<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Copy/Paste Detector Report</title><link href="styles/tailwind.css" rel="stylesheet"><link href="styles/prism.css" rel="stylesheet"></head><body class="bg-gray-100"><header class="bg-white shadow py-4"><div class="container mx-auto px-4"><h1 class="text-3xl font-semibold text-gray-800">jscpd - copy/paste report</h1></div></header><main class="container mx-auto my-8 p-4 bg-white shadow rounded"><section class="mb-8" id="dashboard"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Dashboard</h2><div class="grid grid-cols-4 gap-4"><div class="bg-blue-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-blue-800 mb-2">Total Files</h3><span class="text-4xl font-bold text-blue-800">1250</span></div><div class="bg-green-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-green-800 mb-2">Total Lines of Code</h3><span class="text-4xl font-bold text-green-800">262722</span></div><div class="bg-yellow-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-yellow-800 mb-2">Number of Clones</h3><span class="text-4xl font-bold text-yellow-800">825</span></div><div class="bg-red-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-red-800 mb-2">Duplicated Lines</h3><span class="text-4xl font-bold text-red-800">80520 (30.65%)</span></div></div></section><section class="mb-8" id="formats"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Formats with Duplications</h2><table class="w-full table-auto"><thead><tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">Format</th><th class="py-3 px-6 text-left">Files</th><th class="py-3 px-6 text-left">Lines</th><th class="py-3 px-6 text-left">Clones</th><th class="py-3 px-6 text-left">Duplicated Lines</th><th class="py-3 px-6 text-left">Duplicated Tokens</th></tr></thead><tbody><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#typescript-clones">typescript</a></td><td class="py-3 px-6">816</td><td class="py-3 px-6">126758</td><td class="py-3 px-6">534</td><td class="py-3 px-6">14196</td><td class="py-3 px-6">114449</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#javascript-clones">javascript</a></td><td class="py-3 px-6">213</td><td class="py-3 px-6">46925</td><td class="py-3 px-6">96</td><td class="py-3 px-6">22878</td><td class="py-3 px-6">177995</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#tsx-clones">tsx</a></td><td class="py-3 px-6">217</td><td class="py-3 px-6">88995</td><td class="py-3 px-6">194</td><td class="py-3 px-6">43432</td><td class="py-3 px-6">340305</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#css-clones">css</a></td><td class="py-3 px-6">4</td><td class="py-3 px-6">44</td><td class="py-3 px-6">1</td><td class="py-3 px-6">14</td><td class="py-3 px-6">58</td></tr></tbody></table></section><section class="mb-8" id="txt-clones"><a name="typescript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">typescript</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/domain/entities/tenant.entity.ts (Line 133:5 - Line 222:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/domain/entities/tenant.entity/tenant-properties.ts (Line 1:1 - Line 99:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup9"><code class="language-typescript text-sm text-gray-800">this._name = name;
    this._updatedAt = new Date();

    this.addEvent(
      new TenantUpdatedEvent({
        tenantId: this.id,
        changes: { name },
      })
    );
  }

  changePlan(newPlan: TenantPlan): void {
    if (this._status === TenantStatus.SUSPENDED) {
      throw new InvalidTenantStateException('Cannot change plan for suspended tenant');
    }

    const oldPlan = this._plan;
    this._plan = newPlan;
    this._updatedAt = new Date();

    this.addEvent(
      new PlanChangedEvent({
        tenantId: this.id,
        oldPlan: oldPlan.type,
        newPlan: newPlan.type,
        changedBy: this.ownerId,
      })
    );
  }

  updateBillingInfo(billingInfo: BillingInfo): void {
    this._billingInfo = billingInfo;
    this._updatedAt = new Date();

    this.addEvent(
      new TenantUpdatedEvent({
        tenantId: this.id,
        changes: { billingInfo: billingInfo.toJSON() },
      })
    );
  }

  configureSso(ssoConfig: SSOConfig): void {
    if (!this._plan.features.sso) {
      throw new InvalidTenantStateException('SSO is not available in current plan');
    }

    this._ssoConfig = ssoConfig;
    this._updatedAt = new Date();

    this.addEvent(
      new TenantUpdatedEvent({
        tenantId: this.id,
        changes: { ssoEnabled: true, ssoProvider: ssoConfig.provider },
      })
    );
  }

  updateSettings(settings: Partial&lt;TenantSettings&gt;): void {
    this._settings = this._settings.merge(settings);
    this._updatedAt = new Date();

    this.addEvent(
      new TenantUpdatedEvent({
        tenantId: this.id,
        changes: { settings },
      })
    );
  }

  suspend(reason: string): void {
    if (this._status === TenantStatus.SUSPENDED) {
      throw new InvalidTenantStateException('Tenant is already suspended');
    }

    this._status = TenantStatus.SUSPENDED;
    this._updatedAt = new Date();
    this._metadata.suspendedAt = new Date();
    this._metadata.suspensionReason = reason;

    this.addEvent(
      new TenantSuspendedEvent({
        tenantId: this.id,
        reason,
        suspendedAt: new Date(),
      })
    );
  }

  activate():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/domain/entities/tenant.entity.ts (Line 222:2 - Line 245:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/domain/entities/tenant.entity/tenant-properties.ts (Line 100:1 - Line 126:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup10"><code class="language-typescript text-sm text-gray-800">: void {
    if (this._status === TenantStatus.ACTIVE) {
      throw new InvalidTenantStateException('Tenant is already active');
    }

    this._status = TenantStatus.ACTIVE;
    this._updatedAt = new Date();
    delete this._metadata.suspendedAt;
    delete this._metadata.suspensionReason;

    this.addEvent(
      new TenantUpdatedEvent({
        tenantId: this.id,
        changes: { status: TenantStatus.ACTIVE },
      })
    );
  }

  checkLimit(resource: string, currentUsage: number): void {
    const limit = this._plan.limits[resource];
    if (limit &amp;&amp; currentUsage &gt;= limit) {
      throw new TenantLimitExceededException(
        `Tenant has exceeded ${resource} limit: ${currentUsage}/${limit}`
      );</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/domain/entities/tenant.entity.ts (Line 261:2 - Line 275:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/domain/entities/tenant.entity/tenant-methods.ts (Line 22:1 - Line 38:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup11"><code class="language-typescript text-sm text-gray-800">: Record&lt;string, any&gt; {
    return {
      id: this._id,
      name: this._name,
      slug: this._slug,
      organizationId: this._organizationId,
      plan: this._plan.toJSON(),
      billingInfo: this._billingInfo?.toJSON(),
      ssoConfig: this._ssoConfig?.toJSON(),
      settings: this._settings.toJSON(),
      status: this._status,
      createdAt: this._createdAt,
      updatedAt: this._updatedAt,
      ownerId: this._ownerId,
      metadata: this._metadata,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/application/services/tenant.service.ts (Line 98:11 - Line 105:11), /home/margon/Reporunner/reporunner/packages/@reporunner/services/tenant-service/src/refactored/application/services/tenant.service.ts (Line 66:9 - Line 73:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup12"><code class="language-typescript text-sm text-gray-800">(id: string): Promise&lt;ServiceResult&lt;Tenant&gt;&gt; {
    return this.execute(async () =&gt; {
      const tenant = await this.repository.findById(id);
      if (!tenant) {
        throw new Error(`Tenant not found with ID ${id}`);
      }

      if (tenant.status === 'inactive'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/permission/infrastructure/repositories/PermissionRepository.ts (Line 5:2 - Line 30:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/infrastructure/repositories/VersionControlRepository.ts (Line 5:2 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup76"><code class="language-typescript text-sm text-gray-800">{
  async findById(id: string): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async findAll(): Promise&lt;any[]&gt; {
    // TODO: Implement
    return [];
  }

  async create(data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async update(id: string, data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async delete(id: string): Promise&lt;boolean&gt; {
    // TODO: Implement
    return false;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/permission/domain/repositories/IPermissionRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup77"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/operationaltransform/infrastructure/repositories/OperationalTransformRepository.ts (Line 5:2 - Line 30:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/infrastructure/repositories/VersionControlRepository.ts (Line 5:2 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup78"><code class="language-typescript text-sm text-gray-800">{
  async findById(id: string): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async findAll(): Promise&lt;any[]&gt; {
    // TODO: Implement
    return [];
  }

  async create(data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async update(id: string, data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async delete(id: string): Promise&lt;boolean&gt; {
    // TODO: Implement
    return false;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/operationaltransform/domain/repositories/IOperationalTransformRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup79"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/embeddings/infrastructure/repositories/EmbeddingsRepository.ts (Line 5:2 - Line 30:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/infrastructure/repositories/VersionControlRepository.ts (Line 5:2 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup80"><code class="language-typescript text-sm text-gray-800">{
  async findById(id: string): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async findAll(): Promise&lt;any[]&gt; {
    // TODO: Implement
    return [];
  }

  async create(data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async update(id: string, data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async delete(id: string): Promise&lt;boolean&gt; {
    // TODO: Implement
    return false;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/embeddings/domain/repositories/IEmbeddingsRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup81"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/database/infrastructure/repositories/DatabaseRepository.ts (Line 5:2 - Line 30:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/infrastructure/repositories/VersionControlRepository.ts (Line 5:2 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup82"><code class="language-typescript text-sm text-gray-800">{
  async findById(id: string): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async findAll(): Promise&lt;any[]&gt; {
    // TODO: Implement
    return [];
  }

  async create(data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async update(id: string, data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async delete(id: string): Promise&lt;boolean&gt; {
    // TODO: Implement
    return false;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/database/domain/repositories/IDatabaseRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup83"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/cursortracking/infrastructure/repositories/CursorTrackingRepository.ts (Line 5:2 - Line 30:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/infrastructure/repositories/VersionControlRepository.ts (Line 5:2 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup84"><code class="language-typescript text-sm text-gray-800">{
  async findById(id: string): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async findAll(): Promise&lt;any[]&gt; {
    // TODO: Implement
    return [];
  }

  async create(data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async update(id: string, data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async delete(id: string): Promise&lt;boolean&gt; {
    // TODO: Implement
    return false;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/cursortracking/domain/repositories/ICursorTrackingRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup85"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/infrastructure/repositories/CollaborationRepository.ts (Line 5:2 - Line 30:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/infrastructure/repositories/VersionControlRepository.ts (Line 5:2 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup86"><code class="language-typescript text-sm text-gray-800">{
  async findById(id: string): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async findAll(): Promise&lt;any[]&gt; {
    // TODO: Implement
    return [];
  }

  async create(data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async update(id: string, data: any): Promise&lt;any&gt; {
    // TODO: Implement
    throw new Error('Not implemented');
  }

  async delete(id: string): Promise&lt;boolean&gt; {
    // TODO: Implement
    return false;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/domain/repositories/ICollaborationRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup87"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/gmail/GmailService.ts (Line 38:19 - Line 53:6), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/oauth/OAuthService.ts (Line 113:11 - Line 128:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup88"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Error</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/gmail/GmailService.ts (Line 148:10 - Line 168:7), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/workflow/WorkflowService.ts (Line 33:3 - Line 53:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup89"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async split(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async map(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async trim(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 43:5 - Line 58:5), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/oauth/OAuthService.ts (Line 28:12 - Line 43:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup90"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async AppError(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async plan</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/credential/CredentialService.ts (Line 13:21 - Line 28:15), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 18:15 - Line 33:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup91"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async isValidObjectId(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async isValid(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getCredentials</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/credential/CredentialService.ts (Line 243:19 - Line 258:5), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/oauth/OAuthService.ts (Line 103:15 - Line 118:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup92"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async gmail(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getProfile(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async list</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/credential/CredentialService.ts (Line 258:5 - Line 273:6), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 468:4 - Line 482:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup93"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async fetch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async json(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 90:44 - Line 106:33), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 42:38 - Line 58:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup94"><code class="language-typescript text-sm text-gray-800">));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    // Check if user already reacted</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-reactions.ts (Line 29:2 - Line 38:7), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 2:2 - Line 11:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup95"><code class="language-typescript text-sm text-gray-800">= asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt;
{
  const { commentId } = req.params;

  if (!commentId) {
    res.status(400).json(ApiResponse.error('Comment ID is required'));
    return;
  }

  const userId</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-reactions.ts (Line 34:25 - Line 50:14), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 42:38 - Line 58:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup96"><code class="language-typescript text-sm text-gray-800">));
    return;
  }

  const userId = (req as any).user?.id;
  if (!userId) {
    res.status(401).json(ApiResponse.error('Authentication required'));
    return;
  }

  const comment = await Comment.findById(commentId);
  if (!comment) {
    res.status(404).json(ApiResponse.error('Comment not found'));
    return;
  }

  const reactionIndex</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-reactions.ts (Line 77:5 - Line 96:3), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-reactions.ts (Line 31:7 - Line 58:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup97"><code class="language-typescript text-sm text-gray-800">;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-management.ts (Line 53:5 - Line 66:53), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 4:7 - Line 17:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup98"><code class="language-typescript text-sm text-gray-800">;

  if (!commentId) {
    res.status(400).json(ApiResponse.error('Comment ID is required'));
    return;
  }

  const comment = await Comment.findById(commentId);
  if (!comment) {
    res.status(404).json(ApiResponse.error('Comment not found'));
    return;
  }

  // Check if user is author or has permission to edit</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-sharing.ts (Line 13:2 - Line 26:3), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-versioning.ts (Line 13:5 - Line 26:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup99"><code class="language-typescript text-sm text-gray-800">;
    const userId = (req as any).user?.id;

    const workflow = await this.workflowService.get(id);

    if (!workflow) {
      res.status(404).json({
        success: false,
        message: 'Workflow not found',
      });
      return;
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-execution.ts (Line 42:22 - Line 55:21), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-sharing.ts (Line 13:20 - Line 26:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup100"><code class="language-typescript text-sm text-gray-800">.parse(req.body);
    const userId = (req as any).user?.id;

    const workflow = await this.workflowService.get(id);

    if (!workflow) {
      res.status(404).json({
        success: false,
        message: 'Workflow not found',
      });
      return;
    }

    if (!this.hasExecutePermission</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 43:16 - Line 58:5), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 138:8 - Line 153:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup113"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toLowerCase(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async includes(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async some</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 163:13 - Line 178:5), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 208:13 - Line 223:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup114"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 178:5 - Line 193:11), /home/margon/Reporunner/reporunner/packages/frontend/src/core/types/security/securityService.ts (Line 33:10 - Line 48:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup115"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async reduce(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async round(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async strictness</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 38:7 - Line 53:23), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 208:13 - Line 223:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup116"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async calculateNextExecution</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 373:12 - Line 388:20), /home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/credential/CredentialService.ts (Line 268:5 - Line 283:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup117"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async some(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async includes(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async calculateRetryDelay</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/rbac/rbacService.ts (Line 23:4 - Line 38:14), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 198:8 - Line 213:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup118"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async hasPermission</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/rbac/rbacService.ts (Line 193:12 - Line 218:12), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 18:15 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup119"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async now(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async RBACService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 18:11 - Line 43:4), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 18:15 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup120"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async now(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 48:9 - Line 63:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/rbac/rbacService.ts (Line 48:4 - Line 63:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup121"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 53:4 - Line 68:12), /home/margon/Reporunner/reporunner/packages/frontend/src/core/types/security/securityService.ts (Line 43:6 - Line 58:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup122"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 58:3 - Line 73:20), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 208:13 - Line 223:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup123"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async generateNodeMetrics</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 173:18 - Line 188:16), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 183:22 - Line 198:23)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup124"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getActiveTraces</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performance/PerformanceService.ts (Line 173:8 - Line 188:7), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/oauth/OAuthService.ts (Line 113:11 - Line 128:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup125"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async switch</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/logging/LoggingService.ts (Line 13:7 - Line 38:15), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 18:15 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup126"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async now(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async setupAutoFlush</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/logging/LoggingService.ts (Line 93:18 - Line 108:20), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 208:13 - Line 223:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup127"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async generateFingerprint</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/logging/LoggingService.ts (Line 178:12 - Line 198:8), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performance/PerformanceService.ts (Line 248:7 - Line 268:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup128"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async addEventListener(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async setTimeout(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getEntriesByType(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async service</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/logging/LoggingService.ts (Line 283:22 - Line 298:7), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 263:12 - Line 278:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup129"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async destroy(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async clearInterval(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Logger</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 208:5 - Line 223:11), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 173:12 - Line 188:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup130"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async reduce(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getReviews</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 293:4 - Line 308:30), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 28:7 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup131"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async IntegrationMarketplaceService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 23:14 - Line 48:12), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 18:15 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup132"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async now(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getClientIP</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 103:13 - Line 118:10), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 123:21 - Line 138:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup133"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async from(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async timestamp</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 118:10 - Line 133:21), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 108:24 - Line 123:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup134"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async slice(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async createSecurityPolicy</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 253:10 - Line 268:7), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 183:22 - Line 198:23)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup135"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async delete</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 283:9 - Line 303:13), /home/margon/Reporunner/reporunner/packages/frontend/src/core/types/security/securityService.ts (Line 18:4 - Line 38:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup136"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async stringify(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async btoa(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substring(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async evaluateRule</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enhanceddebugging/enhancedDebuggingService.ts (Line 13:15 - Line 28:4), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/auth/AuthService.ts (Line 23:14 - Line 38:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup137"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Map</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enhanceddebugging/enhancedDebuggingService.ts (Line 103:14 - Line 123:4), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 23:4 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup138"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enhanceddebugging/enhancedDebuggingService.ts (Line 178:13 - Line 193:13), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 333:10 - Line 348:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup139"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Function(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async func(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getCallStack</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enhanceddebugging/enhancedDebuggingService.ts (Line 238:7 - Line 258:16), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 248:23 - Line 198:23)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup140"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async subscribe(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getDebugMetrics</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/costoptimizer/costOptimizerService.ts (Line 28:5 - Line 43:23), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 128:5 - Line 143:29)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup141"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async reduce(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async calculateCostBreakdown</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/costoptimizer/costOptimizerService.ts (Line 178:20 - Line 203:21), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 168:24 - Line 273:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup142"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async subscribeToAlerts(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async delete(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async groupExecutionsByDay</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/costoptimizer/costOptimizerService.ts (Line 333:5 - Line 348:21), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 338:30 - Line 353:26)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup143"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async listener(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async CostOptimizerService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerexecution/containerExecutionService.ts (Line 78:6 - Line 93:6), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/rbac/rbacService.ts (Line 48:4 - Line 63:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup144"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async while</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerexecution/containerExecutionService.ts (Line 198:4 - Line 213:24), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 333:10 - Line 348:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn145" onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn145" onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup145"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Function(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async func(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getCurrentResourceUsage</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerexecution/containerExecutionService.ts (Line 213:24 - Line 228:10), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 278:4 - Line 293:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn146" onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn146" onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup146"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Promise(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async setTimeout(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async subscribe</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/config/ConfigService.ts (Line 118:13 - Line 133:15), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerexecution/containerExecutionService.ts (Line 233:7 - Line 248:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn147" onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn147" onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup147"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async listener(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async onConfigChange</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/config/ConfigService.ts (Line 133:15 - Line 153:10), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 183:22 - Line 273:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn148" onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn148" onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup148"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async delete(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async variables</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 13:9 - Line 33:23), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 198:6 - Line 218:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn149" onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn149" onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup149"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async generateId(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async checkForSecurityAlerts</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 98:10 - Line 118:10), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 48:3 - Line 68:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn150" onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn150" onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup150"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async includes(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toLowerCase(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async stringify</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 118:10 - Line 133:8), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 113:7 - Line 128:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn151" onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn151" onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup151"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async timestamp(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getTime</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 173:24 - Line 193:4), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/workflow/WorkflowService.ts (Line 153:7 - Line 173:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn152" onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn152" onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup152"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async some(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 183:4 - Line 198:4), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 198:8 - Line 213:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn153" onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn153" onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup153"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 188:8 - Line 203:9), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 83:12 - Line 98:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn154" onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn154" onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup154"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getHours</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 248:5 - Line 268:21), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 23:4 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn155" onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn155" onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup155"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async performDataRetention</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/analytics/analyticsService.ts (Line 78:5 - Line 93:12), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 123:21 - Line 138:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn156" onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn156" onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup156"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async from(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/analytics/analyticsService.ts (Line 118:18 - Line 133:8), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 108:24 - Line 123:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn157" onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn157" onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup157"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async slice(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/analytics/analyticsService.ts (Line 183:21 - Line 203:4), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 183:22 - Line 273:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn158" onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn158" onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup158"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async delete(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async map</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 18:17 - Line 33:25), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 198:8 - Line 213:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn159" onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn159" onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup159"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async createMultiModalWorkflow</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 33:25 - Line 48:17), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 198:6 - Line 213:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn160" onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn160" onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup160"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async generateId(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async validateWorkflow</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 48:17 - Line 63:17), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/auth/AuthService.ts (Line 23:14 - Line 38:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn161" onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn161" onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup161"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async optimizeWorkflow</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 68:5 - Line 83:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/rbac/rbacService.ts (Line 43:13 - Line 58:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn162" onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn162" onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup162"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async for(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async find</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 183:19 - Line 198:7), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 263:8 - Line 278:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn163" onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn163" onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup163"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async floor(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async switch</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 203:8 - Line 218:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 123:21 - Line 138:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn164" onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn164" onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup164"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async from(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async some</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 208:5 - Line 223:4), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/workflow/WorkflowService.ts (Line 148:5 - Line 163:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn165" onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn165" onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup165"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async some(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async abs</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 238:24 - Line 253:17), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerexecution/containerExecutionService.ts (Line 173:6 - Line 188:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn166" onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn166" onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup166"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async delete(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async hasPrivateAccess</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 263:4 - Line 278:7), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 278:4 - Line 293:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn167" onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn167" onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup167"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Promise(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async setTimeout(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/aiorchestration/aiOrchestrationService.ts (Line 283:8 - Line 298:19), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 28:7 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn168" onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn168" onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup168"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getAvailableModels</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 18:14 - Line 53:3), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 18:15 - Line 223:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn169" onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn169" onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup169"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async now(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Date(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 73:14 - Line 88:18), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 73:15 - Line 88:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn170" onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn170" onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup170"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async deactivateTrigger</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 123:18 - Line 138:8), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 128:5 - Line 143:29)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn171" onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn171" onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup171"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async reduce(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 138:8 - Line 153:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/costoptimizer/costOptimizerService.ts (Line 218:17 - Line 233:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn172" onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn172" onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup172"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async from(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async map(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 143:5 - Line 158:6), /home/margon/Reporunner/reporunner/packages/frontend/src/core/utils/nodeversioning/nodeVersioningService.ts (Line 53:5 - Line 68:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn173" onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn173" onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup173"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async map(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async slice</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 148:4 - Line 163:21), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 108:24 - Line 123:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn174" onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn174" onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup174"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async slice(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async calculateVolumetrend</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 188:18 - Line 203:7), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 183:22 - Line 198:23)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn175" onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn175" onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup175"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async switch</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 353:9 - Line 368:7), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 443:12 - Line 458:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn176" onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn176" onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup176"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async RegExp(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async test(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Number</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedtriggersystem/advancedTriggerSystemService.ts (Line 443:6 - Line 463:11), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 408:8 - Line 428:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn177" onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn177" onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup177"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async callback(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async destroy(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async clear(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async canTrigger</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedauth/advancedAuthService.ts (Line 48:17 - Line 63:21), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/auth/AuthService.ts (Line 23:14 - Line 38:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn178" onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn178" onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup178"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async generateMFAChallenge</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedauth/advancedAuthService.ts (Line 153:16 - Line 173:16), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 23:4 - Line 43:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn179" onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn179" onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup179"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async checkPermission</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedauth/advancedAuthService.ts (Line 298:15 - Line 323:18), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enterprisesecurity/enterpriseSecurityService.ts (Line 248:23 - Line 273:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn180" onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn180" onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup180"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async subscribe(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async return(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async delete(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getCurrentContext</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedauth/advancedAuthService.ts (Line 358:5 - Line 373:20), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerexecution/containerExecutionService.ts (Line 233:7 - Line 248:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn181" onclick="toggleCodeBlock('cloneGroup181', 'expandBtn181', 'collapseBtn181')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn181" onclick="toggleCodeBlock('cloneGroup181', 'expandBtn181', 'collapseBtn181')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup181"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async listener(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async AdvancedAuthService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/VectorStore.node.ts (Line 85:11 - Line 106:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/VectorStoreTool.node.ts (Line 76:14 - Line 97:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn182" onclick="toggleCodeBlock('cloneGroup182', 'expandBtn182', 'collapseBtn182')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn182" onclick="toggleCodeBlock('cloneGroup182', 'expandBtn182', 'collapseBtn182')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup182"><code class="language-typescript text-sm text-gray-800">,
        type: 'options',
        default: 'pinecone',
        required: true,
        options: [
          {
            name: 'Pinecone',
            value: 'pinecone',
          },
          {
            name: 'Weaviate',
            value: 'weaviate',
          },
          {
            name: 'Qdrant',
            value: 'qdrant',
          },
          {
            name: 'Chroma',
            value: 'chroma',
          },
          {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/HttpRequest.node.ts (Line 24:21 - Line 31:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/Trigger.node.ts (Line 79:26 - Line 86:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn183" onclick="toggleCodeBlock('cloneGroup183', 'expandBtn183', 'collapseBtn183')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn183" onclick="toggleCodeBlock('cloneGroup183', 'expandBtn183', 'collapseBtn183')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup183"><code class="language-typescript text-sm text-gray-800">,
        options: [
          { name: 'GET', value: 'GET' },
          { name: 'POST', value: 'POST' },
          { name: 'PUT', value: 'PUT' },
          { name: 'DELETE', value: 'DELETE' },
          { name: 'PATCH', value: 'PATCH' },
          {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/Action.node.ts (Line 67:6 - Line 78:11), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/HttpRequest.node.ts (Line 23:5 - Line 89:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn184" onclick="toggleCodeBlock('cloneGroup184', 'expandBtn184', 'collapseBtn184')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn184" onclick="toggleCodeBlock('cloneGroup184', 'expandBtn184', 'collapseBtn184')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup184"><code class="language-typescript text-sm text-gray-800">,
        description: 'HTTP method to use',
        options: [
          { name: 'GET', value: 'GET' },
          { name: 'POST', value: 'POST' },
          { name: 'PUT', value: 'PUT' },
          { name: 'DELETE', value: 'DELETE' },
          { name: 'PATCH', value: 'PATCH' },
        ],
        displayOptions: {
          show: {
            actionType</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/AIAgent.node.ts (Line 385:13 - Line 392:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/AIAgent.node.ts (Line 366:36 - Line 373:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn185" onclick="toggleCodeBlock('cloneGroup185', 'expandBtn185', 'collapseBtn185')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn185" onclick="toggleCodeBlock('cloneGroup185', 'expandBtn185', 'collapseBtn185')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup185"><code class="language-typescript text-sm text-gray-800">,
            timestamp: new Date().toISOString(),
            tokenUsage: {
              promptTokens: Math.floor(Math.random() * 100) + 50,
              completionTokens: Math.floor(Math.random() * 200) + 100,
              totalTokens: Math.floor(Math.random() * 300) + 150,
            },
          }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/api/credentialapi/CredentialApiService.ts (Line 168:7 - Line 183:11), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/costoptimizer/costOptimizerService.ts (Line 98:21 - Line 113:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn186" onclick="toggleCodeBlock('cloneGroup186', 'expandBtn186', 'collapseBtn186')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn186" onclick="toggleCodeBlock('cloneGroup186', 'expandBtn186', 'collapseBtn186')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup186"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async isValidUrl</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/api/authapi/AuthApiService.ts (Line 33:8 - Line 48:9), /home/margon/Reporunner/reporunner/packages/frontend/src/core/api/credentialapi/CredentialApiService.ts (Line 18:4 - Line 33:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn187" onclick="toggleCodeBlock('cloneGroup187', 'expandBtn187', 'collapseBtn187')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn187" onclick="toggleCodeBlock('cloneGroup187', 'expandBtn187', 'collapseBtn187')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup187"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async ApiClientError(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async register</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/services/integration/integrationService.ts (Line 33:4 - Line 48:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/api/authapi/AuthApiService.ts (Line 173:7 - Line 188:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn188" onclick="toggleCodeBlock('cloneGroup188', 'expandBtn188', 'collapseBtn188')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn188" onclick="toggleCodeBlock('cloneGroup188', 'expandBtn188', 'collapseBtn188')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup188"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async optional(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async string(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async enum</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/services/integration/integrationService.ts (Line 53:6 - Line 68:21), /home/margon/Reporunner/reporunner/packages/frontend/src/core/api/workflowapi/WorkflowApiService.ts (Line 18:4 - Line 33:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn189" onclick="toggleCodeBlock('cloneGroup189', 'expandBtn189', 'collapseBtn189')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn189" onclick="toggleCodeBlock('cloneGroup189', 'expandBtn189', 'collapseBtn189')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup189"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async ApiClientError(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getIntegrationStatus</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/services/executionmonitor/executionMonitorService.ts (Line 8:2 - Line 23:8), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 8:2 - Line 23:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn190" onclick="toggleCodeBlock('cloneGroup190', 'expandBtn190', 'collapseBtn190')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn190" onclick="toggleCodeBlock('cloneGroup190', 'expandBtn190', 'collapseBtn190')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup190"><code class="language-typescript text-sm text-gray-800">{
  constructor(
    // Add dependencies here
  ) {}

  async Map(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async connect</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/services/executionmonitor/executionMonitorService.ts (Line 83:21 - Line 98:4), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/analytics/analyticsService.ts (Line 23:23 - Line 38:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn191" onclick="toggleCodeBlock('cloneGroup191', 'expandBtn191', 'collapseBtn191')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn191" onclick="toggleCodeBlock('cloneGroup191', 'expandBtn191', 'collapseBtn191')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup191"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/themes/darkTheme.ts (Line 21:10 - Line 68:34), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/themes/defaultTheme.ts (Line 21:10 - Line 68:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn224" onclick="toggleCodeBlock('cloneGroup224', 'expandBtn224', 'collapseBtn224')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn224" onclick="toggleCodeBlock('cloneGroup224', 'expandBtn224', 'collapseBtn224')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup224"><code class="language-typescript text-sm text-gray-800">,
  },
  typography: {
    fontFamily:
      '-apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif',
    fontSize: {
      xs: '10px',
      sm: '12px',
      md: '14px',
      lg: '16px',
      xl: '18px',
    },
    fontWeight: {
      normal: 400,
      medium: 500,
      semibold: 600,
      bold: 700,
    },
    lineHeight: {
      tight: 1.2,
      normal: 1.5,
      relaxed: 1.8,
    },
  },
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '20px',
    '2xl': '24px',
  },
  animations: {
    duration: {
      fast: '150ms',
      normal: '250ms',
      slow: '350ms',
    },
    easing: {
      linear: 'linear',
      ease: 'ease',
      easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
      easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
      easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    },
  },
  shadows: {
    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.15)'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 124:11 - Line 135:21), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn356" onclick="toggleCodeBlock('cloneGroup356', 'expandBtn356', 'collapseBtn356')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn356" onclick="toggleCodeBlock('cloneGroup356', 'expandBtn356', 'collapseBtn356')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup356"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async calculateMemoryTrend</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 136:28 - Line 147:18), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 120:25 - Line 131:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn357" onclick="toggleCodeBlock('cloneGroup357', 'expandBtn357', 'collapseBtn357')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn357" onclick="toggleCodeBlock('cloneGroup357', 'expandBtn357', 'collapseBtn357')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup357"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async for(input: any): Promise&lt;any&gt; {
    return this.forUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async setupGCMonitoring</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 156:18 - Line 167:17), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn358" onclick="toggleCodeBlock('cloneGroup358', 'expandBtn358', 'collapseBtn358')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn358" onclick="toggleCodeBlock('cloneGroup358', 'expandBtn358', 'collapseBtn358')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup358"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async getAverageMetric</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/healthcheck/HealthCheckService.ts (Line 133:7 - Line 148:12), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/rbac/rbacService.ts (Line 48:4 - Line 63:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn359" onclick="toggleCodeBlock('cloneGroup359', 'expandBtn359', 'collapseBtn359')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn359" onclick="toggleCodeBlock('cloneGroup359', 'expandBtn359', 'collapseBtn359')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup359"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async memoryUsage</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/healthcheck/HealthCheckService.ts (Line 278:5 - Line 293:19), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/performancemonitor/performanceMonitorService.ts (Line 268:8 - Line 283:26)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn360" onclick="toggleCodeBlock('cloneGroup360', 'expandBtn360', 'collapseBtn360')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn360" onclick="toggleCodeBlock('cloneGroup360', 'expandBtn360', 'collapseBtn360')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup360"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async clearInterval(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async clear(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async HealthCheckService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 110:26 - Line 121:16), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn361" onclick="toggleCodeBlock('cloneGroup361', 'expandBtn361', 'collapseBtn361')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn361" onclick="toggleCodeBlock('cloneGroup361', 'expandBtn361', 'collapseBtn361')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup361"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async updateErrorRate</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 130:28 - Line 141:20), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn362" onclick="toggleCodeBlock('cloneGroup362', 'expandBtn362', 'collapseBtn362')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn362" onclick="toggleCodeBlock('cloneGroup362', 'expandBtn362', 'collapseBtn362')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup362"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async handleCriticalError</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 194:17 - Line 205:3), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn363" onclick="toggleCodeBlock('cloneGroup363', 'expandBtn363', 'collapseBtn363')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn363" onclick="toggleCodeBlock('cloneGroup363', 'expandBtn363', 'collapseBtn363')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup363"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 198:10 - Line 213:17), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn364" onclick="toggleCodeBlock('cloneGroup364', 'expandBtn364', 'collapseBtn364')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn364" onclick="toggleCodeBlock('cloneGroup364', 'expandBtn364', 'collapseBtn364')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup364"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async getErrorPatterns</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 238:24 - Line 249:5), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 120:25 - Line 131:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn365" onclick="toggleCodeBlock('cloneGroup365', 'expandBtn365', 'collapseBtn365')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn365" onclick="toggleCodeBlock('cloneGroup365', 'expandBtn365', 'collapseBtn365')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup365"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async for(input: any): Promise&lt;any&gt; {
    return this.forUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async stop</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/debugtools/DebugToolsService.ts (Line 23:18 - Line 53:14), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowscheduler/workflowSchedulerService.ts (Line 18:15 - Line 48:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn366" onclick="toggleCodeBlock('cloneGroup366', 'expandBtn366', 'collapseBtn366')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn366" onclick="toggleCodeBlock('cloneGroup366', 'expandBtn366', 'collapseBtn366')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup366"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async now(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async random(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async substr(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async addDebugEvent</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/debugtools/DebugToolsService.ts (Line 63:16 - Line 78:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/rbac/rbacService.ts (Line 48:4 - Line 63:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn367" onclick="toggleCodeBlock('cloneGroup367', 'expandBtn367', 'collapseBtn367')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn367" onclick="toggleCodeBlock('cloneGroup367', 'expandBtn367', 'collapseBtn367')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup367"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/debugtools/DebugToolsService.ts (Line 68:4 - Line 83:8), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/costoptimizer/costOptimizerService.ts (Line 98:21 - Line 113:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn368" onclick="toggleCodeBlock('cloneGroup368', 'expandBtn368', 'collapseBtn368')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn368" onclick="toggleCodeBlock('cloneGroup368', 'expandBtn368', 'collapseBtn368')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup368"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/debugtools/DebugToolsService.ts (Line 73:3 - Line 88:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/utils/nodeversioning/nodeVersioningService.ts (Line 98:17 - Line 113:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn369" onclick="toggleCodeBlock('cloneGroup369', 'expandBtn369', 'collapseBtn369')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn369" onclick="toggleCodeBlock('cloneGroup369', 'expandBtn369', 'collapseBtn369')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup369"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async hook</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/debugtools/DebugToolsService.ts (Line 88:5 - Line 103:15), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/healthcheck/HealthCheckService.ts (Line 113:5 - Line 128:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn370" onclick="toggleCodeBlock('cloneGroup370', 'expandBtn370', 'collapseBtn370')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn370" onclick="toggleCodeBlock('cloneGroup370', 'expandBtn370', 'collapseBtn370')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup370"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async warn(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async startProfiling</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/debugtools/DebugToolsService.ts (Line 233:16 - Line 248:19), /home/margon/Reporunner/reporunner/packages/frontend/src/app/services/executionmonitor/executionMonitorService.ts (Line 103:25 - Line 118:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn371" onclick="toggleCodeBlock('cloneGroup371', 'expandBtn371', 'collapseBtn371')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn371" onclick="toggleCodeBlock('cloneGroup371', 'expandBtn371', 'collapseBtn371')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup371"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async indexOf(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async splice(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async setGlobalDebugMode</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/validators/workflowValidators.ts (Line 53:2 - Line 64:9), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/validators/workflowValidators.ts (Line 25:7 - Line 36:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn372" onclick="toggleCodeBlock('cloneGroup372', 'expandBtn372', 'collapseBtn372')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn372" onclick="toggleCodeBlock('cloneGroup372', 'expandBtn372', 'collapseBtn372')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup372"><code class="language-typescript text-sm text-gray-800">)
    .trim()
    .isLength({ min: 1, max: 100 })
    .withMessage('Workflow name must be between 1 and 100 characters'),

  body('description')
    .optional()
    .trim()
    .isLength({ max: 500 })
    .withMessage('Description must not exceed 500 characters'),

  body('nodes').optional</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/WorkflowService.ts (Line 285:7 - Line 295:6), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/WorkflowService.ts (Line 94:7 - Line 104:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn373" onclick="toggleCodeBlock('cloneGroup373', 'expandBtn373', 'collapseBtn373')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn373" onclick="toggleCodeBlock('cloneGroup373', 'expandBtn373', 'collapseBtn373')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup373"><code class="language-typescript text-sm text-gray-800">) {
    const workflow = await this.workflowRepository.findOne({
      _id: id,
      $or: [{ userId }, { isPublic: true }],
    });

    if (!workflow) {
      throw new AppError('Workflow not found', 404);
    }

    const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/OAuthService.ts (Line 165:7 - Line 173:42), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/OAuthService.ts (Line 44:5 - Line 52:52)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn374" onclick="toggleCodeBlock('cloneGroup374', 'expandBtn374', 'collapseBtn374')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn374" onclick="toggleCodeBlock('cloneGroup374', 'expandBtn374', 'collapseBtn374')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup374"><code class="language-typescript text-sm text-gray-800">// Use HTTPS in production, detect protocol properly
      const protocol =
        process.env.OAUTH_PROTOCOL ||
        (process.env.NODE_ENV === 'production' ? 'https' : req.protocol);
      const redirectUri = `${protocol}://${req.get('host')}/oauth/gmail/callback`;

      const oauth2Client = new google.auth.OAuth2(clientId, clientSecret, redirectUri);

      // Exchange authorization code for tokens</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/controllers/NodeExecutionController.ts (Line 16:2 - Line 22:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/controllers/OAuthController.ts (Line 16:2 - Line 22:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn375" onclick="toggleCodeBlock('cloneGroup375', 'expandBtn375', 'collapseBtn375')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn375" onclick="toggleCodeBlock('cloneGroup375', 'expandBtn375', 'collapseBtn375')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup375"><code class="language-typescript text-sm text-gray-800">= async (req: Request, res: Response) =&gt; {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      throw new AppError('Validation failed', 400);
    }

    const userId = (req as any).user?.id;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 106:17 - Line 120:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 80:18 - Line 95:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn376" onclick="toggleCodeBlock('cloneGroup376', 'expandBtn376', 'collapseBtn376')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn376" onclick="toggleCodeBlock('cloneGroup376', 'expandBtn376', 'collapseBtn376')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup376"><code class="language-typescript text-sm text-gray-800">(id, userId);
    }

    // No custom field to check - only MongoDB _id exists
    if (!credential) {
      if (!this.isValidObjectId(id)) {
        throw new AppError(
          `Invalid credential ID format: ${id}. This appears to be a temporary ID. Please refresh and try again.`,
          400
        );
      } else {
        throw new AppError('Credential not found', 404);
      }
    }
  }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 129:26 - Line 144:4), /home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 80:18 - Line 95:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn377" onclick="toggleCodeBlock('cloneGroup377', 'expandBtn377', 'collapseBtn377')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn377" onclick="toggleCodeBlock('cloneGroup377', 'expandBtn377', 'collapseBtn377')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup377"><code class="language-typescript text-sm text-gray-800">(id, userId);
    }

    // No custom field to check - only MongoDB _id exists
    if (!credential) {
      if (!this.isValidObjectId(id)) {
        throw new AppError(
          `Invalid credential ID format: ${id}. This appears to be a temporary ID. Please refresh and try again.`,
          400
        );
      } else {
        throw new AppError('Credential not found', 404);
      }
    }

    let</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 314:5 - Line 335:8), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/OAuthService.ts (Line 269:5 - Line 290:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn378" onclick="toggleCodeBlock('cloneGroup378', 'expandBtn378', 'collapseBtn378')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn378" onclick="toggleCodeBlock('cloneGroup378', 'expandBtn378', 'collapseBtn378')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup378"><code class="language-typescript text-sm text-gray-800">const oauth2Client = new google.auth.OAuth2(clientId, clientSecret);

    oauth2Client.setCredentials({
      refresh_token: refreshToken,
    });

    try {
      // Refresh the access token
      await oauth2Client.refreshAccessToken();

      // Test Gmail API access
      const gmail = google.gmail({ version: 'v1', auth: oauth2Client });
      const profile = await gmail.users.getProfile({ userId: 'me' });

      // Test basic functionality by listing a few messages
      const messages = await gmail.users.messages.list({
        userId: 'me',
        maxResults: 1,
      });

      return {
        success</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 428:2 - Line 440:7), /home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 374:2 - Line 385:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn379" onclick="toggleCodeBlock('cloneGroup379', 'expandBtn379', 'collapseBtn379')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn379" onclick="toggleCodeBlock('cloneGroup379', 'expandBtn379', 'collapseBtn379')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup379"><code class="language-typescript text-sm text-gray-800">,
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() =&gt; ({}));
        throw new Error(
          errorData.error?.message || `HTTP ${response.status}: ${response.statusText}`
        );
      }

      const data = await response.json();

      return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 525:2 - Line 541:38), /home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 427:2 - Line 442:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn380" onclick="toggleCodeBlock('cloneGroup380', 'expandBtn380', 'collapseBtn380')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn380" onclick="toggleCodeBlock('cloneGroup380', 'expandBtn380', 'collapseBtn380')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup380"><code class="language-typescript text-sm text-gray-800">,
          }),
        }
      );

      if (!response.ok) {
        const errorData = await response.json().catch(() =&gt; ({}));
        throw new Error(
          errorData.error?.message || `HTTP ${response.status}: ${response.statusText}`
        );
      }

      const data = await response.json();

      return {
        success: true,
        message: 'Google AI API connection successful'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 573:7 - Line 586:16), /home/margon/Reporunner/reporunner/packages/backend/src/domains/credentials/services/CredentialService.ts (Line 372:2 - Line 385:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn381" onclick="toggleCodeBlock('cloneGroup381', 'expandBtn381', 'collapseBtn381')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn381" onclick="toggleCodeBlock('cloneGroup381', 'expandBtn381', 'collapseBtn381')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup381"><code class="language-typescript text-sm text-gray-800">,
          'Content-Type': 'application/json',
        },
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() =&gt; ({}));
        throw new Error(
          errorData.error?.message || `HTTP ${response.status}: ${response.statusText}`
        );
      }

      const data = await response.json();
      const deploymentCount</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 102:5 - Line 134:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/sessioncontroller/session-management.ts (Line 1:1 - Line 38:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn382" onclick="toggleCodeBlock('cloneGroup382', 'expandBtn382', 'collapseBtn382')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn382" onclick="toggleCodeBlock('cloneGroup382', 'expandBtn382', 'collapseBtn382')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup382"><code class="language-typescript text-sm text-gray-800">if (!userId) {
      res.status(400).json(ApiResponse.error('User ID is required'));
      return;
    }

    const filter: any = {
      'participants.userId': userId,
    };

    if (active !== undefined) {
      filter.isActive = active === 'true';
    }

    const sessions = await CollaborationSession.find(filter)
      .populate('workflowId', 'name description')
      .sort({ createdAt: -1 })
      .limit(Number(limit))
      .skip((Number(page) - 1) * Number(limit));

    const total = await CollaborationSession.countDocuments(filter);

    res.json(
      ApiResponse.success({
        sessions: sessions.map((s) =&gt; s.toObject()),
        pagination: {
          total,
          page: Number(page),
          limit: Number(limit),
          pages: Math.ceil(total / Number(limit)),
        },
      })
    );
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 140:3 - Line 178:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/sessioncontroller/session-management.ts (Line 39:1 - Line 85:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn383" onclick="toggleCodeBlock('cloneGroup383', 'expandBtn383', 'collapseBtn383')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn383" onclick="toggleCodeBlock('cloneGroup383', 'expandBtn383', 'collapseBtn383')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup383"><code class="language-typescript text-sm text-gray-800">public getSessionOperations = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { sessionId } = req.params;
    const { limit = 50, page = 1, status, type } = req.query;

    if (!sessionId) {
      res.status(400).json(ApiResponse.error('Session ID is required'));
      return;
    }

    const filter: any = { sessionId };

    if (status) {
      filter.status = status;
    }

    if (type) {
      filter.type = type;
    }

    const operations = await Operation.find(filter)
      .populate('authorId', 'name email')
      .sort({ timestamp: -1 })
      .limit(Number(limit))
      .skip((Number(page) - 1) * Number(limit));

    const total = await Operation.countDocuments(filter);

    res.json(
      ApiResponse.success({
        operations: operations.map((op) =&gt; op.toObject()),
        pagination: {
          total,
          page: Number(page),
          limit: Number(limit),
          pages: Math.ceil(total / Number(limit)),
        },
      })
    );
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 184:3 - Line 200:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/sessioncontroller/session-management.ts (Line 86:1 - Line 104:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn384" onclick="toggleCodeBlock('cloneGroup384', 'expandBtn384', 'collapseBtn384')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn384" onclick="toggleCodeBlock('cloneGroup384', 'expandBtn384', 'collapseBtn384')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup384"><code class="language-typescript text-sm text-gray-800">public updateSessionConfig = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { sessionId } = req.params;
    const { settings } = req.body;

    if (!sessionId) {
      res.status(400).json(ApiResponse.error('Session ID is required'));
      return;
    }

    const session = await CollaborationSession.findOne({
      sessionId,
      isActive: true,
    });

    if (!session) {
      res.status(404).json(ApiResponse.error('Session not found'));
      return;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 225:7 - Line 242:19), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/sessioncontroller/session-management.ts (Line 90:5 - Line 203:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn385" onclick="toggleCodeBlock('cloneGroup385', 'expandBtn385', 'collapseBtn385')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn385" onclick="toggleCodeBlock('cloneGroup385', 'expandBtn385', 'collapseBtn385')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup385"><code class="language-typescript text-sm text-gray-800">;

    if (!sessionId) {
      res.status(400).json(ApiResponse.error('Session ID is required'));
      return;
    }

    const session = await CollaborationSession.findOne({
      sessionId,
      isActive: true,
    });

    if (!session) {
      res.status(404).json(ApiResponse.error('Session not found'));
      return;
    }

    // End the session</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 259:2 - Line 272:25), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-resolution.ts (Line 18:2 - Line 31:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn386" onclick="toggleCodeBlock('cloneGroup386', 'expandBtn386', 'collapseBtn386')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn386" onclick="toggleCodeBlock('cloneGroup386', 'expandBtn386', 'collapseBtn386')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup386"><code class="language-typescript text-sm text-gray-800">= asyncHandler(
    async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
      const { workflowId } = req.params;
      const { dateRange = 7 } = req.query; // days

      if (!workflowId) {
        res.status(400).json(ApiResponse.error('Workflow ID is required'));
        return;
      }

      const startDate = new Date();
      startDate.setDate(startDate.getDate() - Number(dateRange));

      // Get session analytics</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 309:7 - Line 328:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/sessioncontroller/collaboration-analytics.ts (Line 11:1 - Line 31:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn387" onclick="toggleCodeBlock('cloneGroup387', 'expandBtn387', 'collapseBtn387')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn387" onclick="toggleCodeBlock('cloneGroup387', 'expandBtn387', 'collapseBtn387')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup387"><code class="language-typescript text-sm text-gray-800">const analytics = {
        dateRange: Number(dateRange),
        sessions: sessionStats[0] || {
          totalSessions: 0,
          activeSessions: 0,
          averageParticipants: 0,
          totalParticipants: 0,
        },
        operations: operationStats.reduce(
          (acc, stat) =&gt; {
            acc[stat._id] = stat.count;
            return acc;
          },
          {} as Record&lt;string, number&gt;
        ),
      };

      res.json(ApiResponse.success(analytics));
    }
  );</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 103:5 - Line 143:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-management.ts (Line 3:1 - Line 48:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn388" onclick="toggleCodeBlock('cloneGroup388', 'expandBtn388', 'collapseBtn388')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn388" onclick="toggleCodeBlock('cloneGroup388', 'expandBtn388', 'collapseBtn388')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup388"><code class="language-typescript text-sm text-gray-800">if (!workflowId || !content) {
      res.status(400).json(ApiResponse.error('Workflow ID and content are required'));
      return;
    }

    // Get user from request (assuming auth middleware sets req.user)
    const authorId = (req as any).user?.id;
    if (!authorId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    try {
      const comment = new Comment({
        workflowId,
        authorId,
        parentCommentId,
        content,
        mentions,
        attachments,
        position,
        visibility,
        priority,
        tags,
        status: 'open',
      });

      await comment.save();
      await comment.populate('authorId', 'name email avatar');

      res.status(201).json(
        ApiResponse.success({
          comment: comment.toObject(),
          message: 'Comment created successfully',
        })
      );
    } catch (error) {
      console.error('Error creating comment:', error);
      res.status(500).json(ApiResponse.error('Failed to create comment'));
    }
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 149:3 - Line 196:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-management.ts (Line 49:1 - Line 104:1)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn389" onclick="toggleCodeBlock('cloneGroup389', 'expandBtn389', 'collapseBtn389')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn389" onclick="toggleCodeBlock('cloneGroup389', 'expandBtn389', 'collapseBtn389')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup389"><code class="language-typescript text-sm text-gray-800">public updateComment = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { commentId } = req.params;
    const { content, visibility, priority, tags, status } = req.body;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    // Check if user is author or has permission to edit
    const userId = (req as any).user?.id;
    if (comment.authorId !== userId) {
      res.status(403).json(ApiResponse.error('Not authorized to edit this comment'));
      return;
    }

    // Store edit history if content is being changed
    if (content &amp;&amp; content !== comment.content) {
      comment.editHistory.push({
        timestamp: new Date(),
        previousContent: comment.content,
        editedBy: userId,
      });
      comment.content = content;
    }

    // Update other fields
    if (visibility) comment.visibility = visibility;
    if (priority) comment.priority = priority;
    if (tags) comment.tags = tags;
    if (status) comment.status = status;

    await comment.save();
    await comment.populate('authorId', 'name email avatar');

    res.json(
      ApiResponse.success({
        comment: comment.toObject(),
        message: 'Comment updated successfully',
      })
    );
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 202:3 - Line 227:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 2:3 - Line 34:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn390" onclick="toggleCodeBlock('cloneGroup390', 'expandBtn390', 'collapseBtn390')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn390" onclick="toggleCodeBlock('cloneGroup390', 'expandBtn390', 'collapseBtn390')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup390"><code class="language-typescript text-sm text-gray-800">public deleteComment = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { commentId } = req.params;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    const userId = (req as any).user?.id;

    // Check if user is author or has admin permissions
    if (comment.authorId !== userId) {
      res.status(403).json(ApiResponse.error('Not authorized to delete this comment'));
      return;
    }

    await Comment.findByIdAndDelete(commentId);

    res.json(ApiResponse.success({ message: 'Comment deleted successfully' }));
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 233:3 - Line 272:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 35:1 - Line 82:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn391" onclick="toggleCodeBlock('cloneGroup391', 'expandBtn391', 'collapseBtn391')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn391" onclick="toggleCodeBlock('cloneGroup391', 'expandBtn391', 'collapseBtn391')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup391"><code class="language-typescript text-sm text-gray-800">public addReply = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { commentId } = req.params;
    const { content, mentions = [] } = req.body;

    if (!commentId || !content) {
      res.status(400).json(ApiResponse.error('Comment ID and content are required'));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    const reply = {
      authorId: userId,
      content,
      mentions,
      timestamp: new Date(),
    };

    comment.thread.push(reply);
    await comment.save();
    await comment.populate('authorId', 'name email avatar');

    res.status(201).json(
      ApiResponse.success({
        reply,
        comment: comment.toObject(),
        message: 'Reply added successfully',
      })
    );
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 278:3 - Line 300:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-threads.ts (Line 83:1 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn392" onclick="toggleCodeBlock('cloneGroup392', 'expandBtn392', 'collapseBtn392')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn392" onclick="toggleCodeBlock('cloneGroup392', 'expandBtn392', 'collapseBtn392')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup392"><code class="language-typescript text-sm text-gray-800">public addReaction = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { commentId } = req.params;
    const { type } = req.body;

    if (!commentId || !type) {
      res.status(400).json(ApiResponse.error('Comment ID and reaction type are required'));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    // Check if user already reacted
    const existingReactionIndex = comment.reactions.findIndex((r) =&gt; r.userId === userId);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 302:5 - Line 323:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-reactions.ts (Line 1:1 - Line 27:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn393" onclick="toggleCodeBlock('cloneGroup393', 'expandBtn393', 'collapseBtn393')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn393" onclick="toggleCodeBlock('cloneGroup393', 'expandBtn393', 'collapseBtn393')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup393"><code class="language-typescript text-sm text-gray-800">if (existingReactionIndex !== -1) {
      // Update existing reaction
      comment.reactions[existingReactionIndex].type = type;
      comment.reactions[existingReactionIndex].timestamp = new Date();
    } else {
      // Add new reaction
      comment.reactions.push({
        userId,
        type,
        timestamp: new Date(),
      });
    }

    await comment.save();

    res.json(
      ApiResponse.success({
        reactions: comment.reactions,
        message: 'Reaction added successfully',
      })
    );
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 329:3 - Line 365:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-reactions.ts (Line 28:1 - Line 72:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn394" onclick="toggleCodeBlock('cloneGroup394', 'expandBtn394', 'collapseBtn394')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn394" onclick="toggleCodeBlock('cloneGroup394', 'expandBtn394', 'collapseBtn394')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup394"><code class="language-typescript text-sm text-gray-800">public removeReaction = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { commentId } = req.params;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    const reactionIndex = comment.reactions.findIndex((r) =&gt; r.userId === userId);
    if (reactionIndex === -1) {
      res.status(404).json(ApiResponse.error('User reaction not found'));
      return;
    }

    // Remove user's reaction
    comment.reactions.splice(reactionIndex, 1);
    await comment.save();

    res.json(
      ApiResponse.success({
        reactions: comment.reactions,
        message: 'Reaction removed successfully',
      })
    );
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 371:3 - Line 400:81), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-reactions.ts (Line 73:1 - Line 104:81)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn395" onclick="toggleCodeBlock('cloneGroup395', 'expandBtn395', 'collapseBtn395')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn395" onclick="toggleCodeBlock('cloneGroup395', 'expandBtn395', 'collapseBtn395')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup395"><code class="language-typescript text-sm text-gray-800">public resolveComment = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { commentId } = req.params;
    const { resolution } = req.body;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    if (comment.status === 'resolved') {
      res.status(409).json(ApiResponse.error('Comment is already resolved'));
      return;
    }

    comment.status = 'resolved';
    comment.resolvedBy = userId;
    comment.resolvedAt = new Date();
    // Note: resolution field would need to be added to IComment interface if needed</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 402:5 - Line 412:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-resolution.ts (Line 1:1 - Line 16:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn396" onclick="toggleCodeBlock('cloneGroup396', 'expandBtn396', 'collapseBtn396')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn396" onclick="toggleCodeBlock('cloneGroup396', 'expandBtn396', 'collapseBtn396')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup396"><code class="language-typescript text-sm text-gray-800">await comment.save();
    await comment.populate('authorId', 'name email avatar');
    await comment.populate('resolvedBy', 'name email avatar');

    res.json(
      ApiResponse.success({
        comment: comment.toObject(),
        message: 'Comment resolved successfully',
      })
    );
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 418:3 - Line 500:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-resolution.ts (Line 17:1 - Line 101:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn397" onclick="toggleCodeBlock('cloneGroup397', 'expandBtn397', 'collapseBtn397')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn397" onclick="toggleCodeBlock('cloneGroup397', 'expandBtn397', 'collapseBtn397')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup397"><code class="language-typescript text-sm text-gray-800">public getCommentAnalytics = asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { workflowId } = req.params;
    const { dateRange = 7 } = req.query; // days

    if (!workflowId) {
      res.status(400).json(ApiResponse.error('Workflow ID is required'));
      return;
    }

    const startDate = new Date();
    startDate.setDate(startDate.getDate() - Number(dateRange));

    // Get comment analytics
    const commentStats = await Comment.aggregate([
      {
        $match: {
          workflowId,
          createdAt: { $gte: startDate },
        },
      },
      {
        $group: {
          _id: null,
          totalComments: { $sum: 1 },
          openComments: {
            $sum: { $cond: [{ $eq: ['$status', 'open'] }, 1, 0] },
          },
          resolvedComments: {
            $sum: { $cond: [{ $eq: ['$status', 'resolved'] }, 1, 0] },
          },
          totalReplies: { $sum: { $size: '$thread' } },
          totalReactions: { $sum: { $size: '$reactions' } },
          averageRepliesPerComment: { $avg: { $size: '$thread' } },
        },
      },
    ]);

    // Get comment activity by day
    const dailyActivity = await Comment.aggregate([
      {
        $match: {
          workflowId,
          createdAt: { $gte: startDate },
        },
      },
      {
        $group: {
          _id: {
            $dateToString: { format: '%Y-%m-%d', date: '$createdAt' },
          },
          count: { $sum: 1 },
        },
      },
      { $sort: { _id: 1 } },
    ]);

    // Get top commenters
    const topCommenters = await Comment.aggregate([
      {
        $match: {
          workflowId,
          createdAt: { $gte: startDate },
        },
      },
      {
        $group: {
          _id: '$authorId',
          commentCount: { $sum: 1 },
        },
      },
      { $sort: { commentCount: -1 } },
      { $limit: 5 },
      {
        $lookup: {
          from: 'users',
          localField: '_id',
          foreignField: '_id',
          as: 'author',
        },
      },
      {
        $unwind: '$author',
      },</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 511:5 - Line 526:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/commentcontroller/comment-analytics.ts (Line 11:1 - Line 27:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn398" onclick="toggleCodeBlock('cloneGroup398', 'expandBtn398', 'collapseBtn398')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn398" onclick="toggleCodeBlock('cloneGroup398', 'expandBtn398', 'collapseBtn398')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup398"><code class="language-typescript text-sm text-gray-800">const analytics = {
      dateRange: Number(dateRange),
      summary: commentStats[0] || {
        totalComments: 0,
        openComments: 0,
        resolvedComments: 0,
        totalReplies: 0,
        totalReactions: 0,
        averageRepliesPerComment: 0,
      },
      dailyActivity,
      topCommenters,
    };

    res.json(ApiResponse.success(analytics));
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 258:5 - Line 275:10), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 180:5 - Line 197:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn399" onclick="toggleCodeBlock('cloneGroup399', 'expandBtn399', 'collapseBtn399')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn399" onclick="toggleCodeBlock('cloneGroup399', 'expandBtn399', 'collapseBtn399')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup399"><code class="language-typescript text-sm text-gray-800">await user.save();

    const permissions = this.permissionService.getEffectivePermissions(user.role, user.permissions);
    const expiresIn = 7 * 24 * 60 * 60; // 7 days in seconds

    return {
      user: {
        id: user._id.toString(),
        email: user.email,
        firstName: user.firstName,
        lastName: user.lastName,
        fullName: user.fullName,
        role: user.role,
        permissions,
        organizationId: user.organizationId,
        department: user.department,
        isEmailVerified: user.isEmailVerified,
        lastLogin</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 409:4 - Line 420:3), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 169:2 - Line 180:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn400" onclick="toggleCodeBlock('cloneGroup400', 'expandBtn400', 'collapseBtn400')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn400" onclick="toggleCodeBlock('cloneGroup400', 'expandBtn400', 'collapseBtn400')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup400"><code class="language-typescript text-sm text-gray-800">);

    // Generate tokens
    const accessToken = this.generateToken(user);
    const refreshToken = this.generateRefreshToken(user._id.toString());

    // Store refresh token
    if (!user.refreshTokens) {
      user.refreshTokens = [];
    }
    user.refreshTokens.push(refreshToken);
    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 416:5 - Line 422:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 251:5 - Line 256:27)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn401" onclick="toggleCodeBlock('cloneGroup401', 'expandBtn401', 'collapseBtn401')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn401" onclick="toggleCodeBlock('cloneGroup401', 'expandBtn401', 'collapseBtn401')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup401"><code class="language-typescript text-sm text-gray-800">if (!user.refreshTokens) {
      user.refreshTokens = [];
    }
    user.refreshTokens.push(refreshToken);
    if (user.refreshTokens.length &gt; 5) {
      user.refreshTokens = user.refreshTokens.slice(-5);
    }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 428:5 - Line 453:6), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/services/AuthService.ts (Line 185:5 - Line 288:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn402" onclick="toggleCodeBlock('cloneGroup402', 'expandBtn402', 'collapseBtn402')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn402" onclick="toggleCodeBlock('cloneGroup402', 'expandBtn402', 'collapseBtn402')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup402"><code class="language-typescript text-sm text-gray-800">return {
      user: {
        id: user._id.toString(),
        email: user.email,
        firstName: user.firstName,
        lastName: user.lastName,
        fullName: user.fullName,
        role: user.role,
        permissions,
        organizationId: user.organizationId,
        department: user.department,
        isEmailVerified: user.isEmailVerified,
        lastLogin: new Date(),
        preferences: user.preferences,
      },
      accessToken,
      refreshToken,
      tokenType: 'Bearer',
      expiresIn,
      expiresAt: new Date(Date.now() + expiresIn * 1000).toISOString(),
    };
  }

  /**
   * Verify email address
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/controllers/AuthController.ts (Line 46:9 - Line 57:18), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/controllers/AuthController.ts (Line 24:2 - Line 35:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn403" onclick="toggleCodeBlock('cloneGroup403', 'expandBtn403', 'collapseBtn403')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn403" onclick="toggleCodeBlock('cloneGroup403', 'expandBtn403', 'collapseBtn403')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup403"><code class="language-typescript text-sm text-gray-800">);

    // Transform response to match frontend expectations
    const responseData = {
      user: result.user,
      token: result.accessToken, // Frontend expects 'token', backend returns 'accessToken'
      refreshToken: result.refreshToken,
      permissions: result.user.permissions || [],
      sessionId: `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
    };

    logger.info(`User logged in: </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/validators/CustomValidator.ts (Line 9:15 - Line 28:5), /home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/validators/SchemaValidator.ts (Line 7:18 - Line 25:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn404" onclick="toggleCodeBlock('cloneGroup404', 'expandBtn404', 'collapseBtn404')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn404" onclick="toggleCodeBlock('cloneGroup404', 'expandBtn404', 'collapseBtn404')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup404"><code class="language-typescript text-sm text-gray-800">&gt;;

  constructor(options: ValidationOptions) {
    this.options = {
      validateQuery: false,
      validateBody: true,
      validateParams: false,
      validateHeaders: false,
      validateCookies: false,
      validateFiles: false,
      allowUnknown: false,
      stripUnknown: true,
      abortEarly: true,
      messages: {},
      ...options,
      onError: options.onError || (() =&gt; {}),
      onSuccess: options.onSuccess || (() =&gt; {})
    };

    this</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/rules/ValidationRule.ts (Line 215:11 - Line 223:2), /home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/rules/ValidationRule.ts (Line 74:12 - Line 82:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn405" onclick="toggleCodeBlock('cloneGroup405', 'expandBtn405', 'collapseBtn405')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn405" onclick="toggleCodeBlock('cloneGroup405', 'expandBtn405', 'collapseBtn405')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup405"><code class="language-typescript text-sm text-gray-800">(
  name: string,
  validateFn: (context: ValidationContext) =&gt; Promise&lt;ValidationResult&gt;,
  options?: {
    description?: string;
    applies?: (context: ValidationContext) =&gt; Promise&lt;boolean&gt;;
    dependencies?: ValidationRule[];
  }
):</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/storage/LocalStorageEngine.ts (Line 14:7 - Line 26:10), /home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/validators/BasicFileValidator.ts (Line 11:2 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn406" onclick="toggleCodeBlock('cloneGroup406', 'expandBtn406', 'collapseBtn406')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn406" onclick="toggleCodeBlock('cloneGroup406', 'expandBtn406', 'collapseBtn406')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup406"><code class="language-typescript text-sm text-gray-800">;

  constructor(options: UploadOptions) {
    this.options = {
      maxFileSize: 5 * 1024 * 1024,
      maxFiles: 1,
      allowedTypes: ['image/*', 'application/pdf'],
      preserveOriginal: false,
      generateUniqueName: true,
      validateMimeType: true,
      createDirectory: true,
      overwrite: false,
      uploadDir</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/filters/BasicFileFilter.ts (Line 7:14 - Line 19:4), /home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/validators/BasicFileValidator.ts (Line 11:15 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn407" onclick="toggleCodeBlock('cloneGroup407', 'expandBtn407', 'collapseBtn407')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn407" onclick="toggleCodeBlock('cloneGroup407', 'expandBtn407', 'collapseBtn407')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup407"><code class="language-typescript text-sm text-gray-800">&gt;;

  constructor(options: UploadOptions) {
    this.options = {
      maxFileSize: 5 * 1024 * 1024,
      maxFiles: 1,
      allowedTypes: ['image/*', 'application/pdf'],
      preserveOriginal: false,
      generateUniqueName: true,
      validateMimeType: true,
      createDirectory: true,
      overwrite: false,
      ...</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/filters/BasicFileFilter.ts (Line 59:3 - Line 80:6), /home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/validators/BasicFileValidator.ts (Line 177:3 - Line 198:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn408" onclick="toggleCodeBlock('cloneGroup408', 'expandBtn408', 'collapseBtn408')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn408" onclick="toggleCodeBlock('cloneGroup408', 'expandBtn408', 'collapseBtn408')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup408"><code class="language-typescript text-sm text-gray-800">}

  /**
   * Match MIME type against pattern
   */
  private matchMimeType(mime: string, pattern: string): boolean {
    if (pattern === '*/*' || pattern === mime) {
      return true;
    }

    if (pattern.endsWith('/*')) {
      const [typePattern] = pattern.split('/');
      const [type] = mime.split('/');
      return typePattern === type;
    }

    return false;
  }

  /**
   * Validate type-specific size limits
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 4:2 - Line 81:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-core.ts (Line 4:2 - Line 82:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn410" onclick="toggleCodeBlock('cloneGroup410', 'expandBtn410', 'collapseBtn410')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn410" onclick="toggleCodeBlock('cloneGroup410', 'expandBtn410', 'collapseBtn410')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup410"><code class="language-typescript text-sm text-gray-800">WorkflowService } from '../index';

// Validation schemas
const CreateWorkflowSchema = z.object({
  name: z.string().min(1).max(255),
  description: z.string().optional(),
  nodes: z
    .array(
      z.object({
        id: z.string(),
        type: z.string(),
        position: z.object({ x: z.number(), y: z.number() }),
        data: z.record(z.any()),
      })
    )
    .min(1),
  edges: z.array(
    z.object({
      id: z.string(),
      source: z.string(),
      target: z.string(),
      sourceHandle: z.string().optional(),
      targetHandle: z.string().optional(),
    })
  ),
  settings: z.object({
    timeout: z.number().default(30000),
    retries: z.number().default(3),
    errorHandling: z.enum(['stop', 'continue', 'rollback']).default('stop'),
  }),
  organizationId: z.string(),
  tags: z.array(z.string()).optional(),
  permissions: z.object({
    public: z.boolean().default(false),
    sharedWith: z.array(z.string()).default([]),
    roles: z.record(z.array(z.string())).default({}),
  }),
});

const UpdateWorkflowSchema = CreateWorkflowSchema.partial();

const ListWorkflowsSchema = z.object({
  organizationId: z.string().optional(),
  userId: z.string().optional(),
  status: z.enum(['draft', 'active', 'archived']).optional(),
  tags: z.array(z.string()).optional(),
  search: z.string().optional(),
  page: z.coerce.number().default(1),
  limit: z.coerce.number().min(1).max(100).default(20),
  sortBy: z.string().optional(),
  sortOrder: z.enum(['asc', 'desc']).optional(),
});

const ExecuteWorkflowSchema = z.object({
  input: z.record(z.any()).default({}),
  environment: z.string().default('production'),
  async: z.boolean().default(true),
});

const ShareWorkflowSchema = z.object({
  userIds: z.array(z.string()),
  permissions: z.array(z.enum(['view', 'edit', 'execute'])).default(['view']),
});

export class WorkflowController {
  constructor(private workflowService: WorkflowService) {}

  async create(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const validated = CreateWorkflowSchema.parse(req.body);
      const userId = (req as any).user?.id;

      const workflow = await this.workflowService.create(validated, userId);

      res.status(201).json({
        success: true,
        data: workflow,
        message: 'Workflow created successfully',</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 81:32 - Line 96:5), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-operations.ts (Line 21:2 - Line 37:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn411" onclick="toggleCodeBlock('cloneGroup411', 'expandBtn411', 'collapseBtn411')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn411" onclick="toggleCodeBlock('cloneGroup411', 'expandBtn411', 'collapseBtn411')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup411"><code class="language-typescript text-sm text-gray-800">,
      });
    } catch (error) {
      if (error instanceof z.ZodError) {
        res.status(400).json({
          success: false,
          errors: error.errors,
          message: 'Validation failed',
        });
      } else {
        next(error);
      }
    }
  }

  async list</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 89:9 - Line 105:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-core.ts (Line 89:9 - Line 106:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn412" onclick="toggleCodeBlock('cloneGroup412', 'expandBtn412', 'collapseBtn412')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn412" onclick="toggleCodeBlock('cloneGroup412', 'expandBtn412', 'collapseBtn412')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup412"><code class="language-typescript text-sm text-gray-800">});
      } else {
        next(error);
      }
    }
  }

  async list(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const validated = ListWorkflowsSchema.parse(req.query);

      const filters = {
        organizationId: validated.organizationId,
        userId: validated.userId || (req as any).user?.id,
        status: validated.status,
        tags: validated.tags,
        search: validated.search,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 108:7 - Line 176:7), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-operations.ts (Line 1:1 - Line 71:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn413" onclick="toggleCodeBlock('cloneGroup413', 'expandBtn413', 'collapseBtn413')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn413" onclick="toggleCodeBlock('cloneGroup413', 'expandBtn413', 'collapseBtn413')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup413"><code class="language-typescript text-sm text-gray-800">const pagination = {
        page: validated.page,
        limit: validated.limit,
        sort: validated.sortBy
          ? ({
              [validated.sortBy]: validated.sortOrder === 'asc' ? 1 : -1,
            } as Record&lt;string, 1 | -1&gt;)
          : undefined,
      };

      const result = await this.workflowService.list(filters, pagination);

      res.json({
        success: true,
        data: result.workflows,
        pagination: {
          page: validated.page,
          limit: validated.limit,
          total: result.total,
          totalPages: Math.ceil(result.total / validated.limit),
        },
      });
    } catch (error) {
      if (error instanceof z.ZodError) {
        res.status(400).json({
          success: false,
          errors: error.errors,
          message: 'Validation failed',
        });
      } else {
        next(error);
      }
    }
  }

  async getById(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;

      const workflow = await this.workflowService.get(id);

      if (!workflow) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      // Check permissions
      const userId = (req as any).user?.id;
      if (!this.hasViewPermission(workflow, userId)) {
        res.status(403).json({
          success: false,
          message: 'Access denied',
        });
        return;
      }

      res.json({
        success: true,
        data: workflow,
      });
    } catch (error) {
      next(error);
    }
  }

  async update</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 176:2 - Line 187:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-operations.ts (Line 72:1 - Line 86:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn414" onclick="toggleCodeBlock('cloneGroup414', 'expandBtn414', 'collapseBtn414')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn414" onclick="toggleCodeBlock('cloneGroup414', 'expandBtn414', 'collapseBtn414')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup414"><code class="language-typescript text-sm text-gray-800">update(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;
      const validated = UpdateWorkflowSchema.parse(req.body);
      const userId = (req as any).user?.id;

      const workflow = await this.workflowService.update(id, validated, userId);

      res.json({
        success: true,
        data: workflow,
        message: 'Workflow updated successfully',</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 201:2 - Line 212:7), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-execution.ts (Line 25:5 - Line 36:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn415" onclick="toggleCodeBlock('cloneGroup415', 'expandBtn415', 'collapseBtn415')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn415" onclick="toggleCodeBlock('cloneGroup415', 'expandBtn415', 'collapseBtn415')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup415"><code class="language-typescript text-sm text-gray-800">if ((error as any).message?.includes('permissions')) {
        res.status(403).json({
          success: false,
          message: 'Access denied',
        });
      } else {
        next(error);
      }
    }
  }

  async delete</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 209:5 - Line 243:8), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-execution.ts (Line 1:1 - Line 36:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn416" onclick="toggleCodeBlock('cloneGroup416', 'expandBtn416', 'collapseBtn416')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn416" onclick="toggleCodeBlock('cloneGroup416', 'expandBtn416', 'collapseBtn416')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup416"><code class="language-typescript text-sm text-gray-800">}
  }

  async delete(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;
      const userId = (req as any).user?.id;

      const success = await this.workflowService.delete(id, userId);

      if (!success) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      res.json({
        success: true,
        message: 'Workflow deleted successfully',
      });
    } catch (error) {
      if ((error as any).message?.includes('permissions')) {
        res.status(403).json({
          success: false,
          message: 'Access denied',
        });
      } else {
        next(error);
      }
    }
  }

  async execute</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 243:2 - Line 295:14), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-execution.ts (Line 37:1 - Line 91:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn417" onclick="toggleCodeBlock('cloneGroup417', 'expandBtn417', 'collapseBtn417')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn417" onclick="toggleCodeBlock('cloneGroup417', 'expandBtn417', 'collapseBtn417')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup417"><code class="language-typescript text-sm text-gray-800">execute(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;
      const validated = ExecuteWorkflowSchema.parse(req.body);
      const userId = (req as any).user?.id;

      const workflow = await this.workflowService.get(id);

      if (!workflow) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      if (!this.hasExecutePermission(workflow, userId)) {
        res.status(403).json({
          success: false,
          message: 'Access denied',
        });
        return;
      }

      // Emit execution request to execution service
      this.workflowService.emit('execution.requested', {
        workflowId: id,
        userId,
        input: validated.input,
        environment: validated.environment,
        async: validated.async,
      });

      if (validated.async) {
        res.json({
          success: true,
          message: 'Workflow execution started',
          executionId: `exec-${Date.now()}`, // Would be generated by execution service
        });
      } else {
        // For sync execution, would need to wait for completion
        res.json({
          success: true,
          message: 'Workflow execution completed',
          result: {}, // Would contain actual execution result
        });
      }
    } catch (error) {
      next(error);
    }
  }

  async getExecutions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 295:2 - Line 308:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-execution.ts (Line 92:1 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn418" onclick="toggleCodeBlock('cloneGroup418', 'expandBtn418', 'collapseBtn418')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn418" onclick="toggleCodeBlock('cloneGroup418', 'expandBtn418', 'collapseBtn418')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup418"><code class="language-typescript text-sm text-gray-800">getExecutions(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;
      const { page = 1, limit = 20 } = req.query;

      // This would query the executions collection
      res.json({
        success: true,
        data: [],
        pagination: {
          page: Number(page),
          limit: Number(limit),
          total: 0,
          totalPages: 0</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 311:5 - Line 357:10), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-sharing.ts (Line 3:1 - Line 51:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn419" onclick="toggleCodeBlock('cloneGroup419', 'expandBtn419', 'collapseBtn419')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn419" onclick="toggleCodeBlock('cloneGroup419', 'expandBtn419', 'collapseBtn419')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup419"><code class="language-typescript text-sm text-gray-800">} catch (error) {
      next(error);
    }
  }

  async share(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;
      const validated = ShareWorkflowSchema.parse(req.body);
      const userId = (req as any).user?.id;

      const workflow = await this.workflowService.get(id);

      if (!workflow) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      if (!this.hasSharePermission(workflow, userId)) {
        res.status(403).json({
          success: false,
          message: 'Access denied',
        });
        return;
      }

      // Update workflow permissions
      const updatedPermissions = {
        ...workflow.permissions,
        sharedWith: [...new Set([...workflow.permissions.sharedWith, ...validated.userIds])],
      };

      await this.workflowService.update(id, { permissions: updatedPermissions }, userId);

      res.json({
        success: true,
        message: 'Workflow shared successfully',
      });
    } catch (error) {
      next(error);
    }
  }

  async duplicate</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 357:2 - Line 404:12), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-sharing.ts (Line 52:1 - Line 101:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn420" onclick="toggleCodeBlock('cloneGroup420', 'expandBtn420', 'collapseBtn420')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn420" onclick="toggleCodeBlock('cloneGroup420', 'expandBtn420', 'collapseBtn420')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup420"><code class="language-typescript text-sm text-gray-800">duplicate(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;
      const userId = (req as any).user?.id;
      const { name } = req.body;

      const workflow = await this.workflowService.get(id);

      if (!workflow) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      if (!this.hasViewPermission(workflow, userId)) {
        res.status(403).json({
          success: false,
          message: 'Access denied',
        });
        return;
      }

      // Create a copy
      const duplicated = await this.workflowService.create(
        {
          ...workflow,
          name: name || `${workflow.name} (Copy)`,
          id: undefined as any,
          version: undefined as any,
          createdAt: undefined as any,
          updatedAt: undefined as any,
        },
        userId
      );

      res.json({
        success: true,
        data: duplicated,
        message: 'Workflow duplicated successfully',
      });
    } catch (error) {
      next(error);
    }
  }

  async getVersions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 414:5 - Line 449:13), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-versioning.ts (Line 3:1 - Line 40:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn421" onclick="toggleCodeBlock('cloneGroup421', 'expandBtn421', 'collapseBtn421')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn421" onclick="toggleCodeBlock('cloneGroup421', 'expandBtn421', 'collapseBtn421')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup421"><code class="language-typescript text-sm text-gray-800">} catch (error) {
      next(error);
    }
  }

  async createVersion(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { id } = req.params;
      const { message } = req.body;
      const userId = (req as any).user?.id;

      const workflow = await this.workflowService.get(id);

      if (!workflow) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      // Create a new version
      const newVersion = this.incrementMajorVersion(workflow.version);
      await this.workflowService.update(id, { version: newVersion }, userId);

      res.json({
        success: true,
        data: { version: newVersion },
        message: 'New version created successfully',
      });
    } catch (error) {
      next(error);
    }
  }

  async getTemplates</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 449:2 - Line 482:19), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-versioning.ts (Line 41:1 - Line 76:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn422" onclick="toggleCodeBlock('cloneGroup422', 'expandBtn422', 'collapseBtn422')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn422" onclick="toggleCodeBlock('cloneGroup422', 'expandBtn422', 'collapseBtn422')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup422"><code class="language-typescript text-sm text-gray-800">getTemplates(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      // This would query a templates collection
      const templates = [
        {
          id: 'email-automation',
          name: 'Email Automation',
          description: 'Automate email sending based on triggers',
          category: 'Marketing',
        },
        {
          id: 'data-sync',
          name: 'Data Synchronization',
          description: 'Sync data between multiple systems',
          category: 'Integration',
        },
        {
          id: 'ai-workflow',
          name: 'AI Processing Pipeline',
          description: 'Process data through AI models',
          category: 'AI/ML',
        },
      ];

      res.json({
        success: true,
        data: templates,
      });
    } catch (error) {
      next(error);
    }
  }

  async createFromTemplate</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 482:2 - Line 511:3), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-versioning.ts (Line 77:1 - Line 114:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn423" onclick="toggleCodeBlock('cloneGroup423', 'expandBtn423', 'collapseBtn423')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn423" onclick="toggleCodeBlock('cloneGroup423', 'expandBtn423', 'collapseBtn423')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup423"><code class="language-typescript text-sm text-gray-800">createFromTemplate(req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; {
    try {
      const { templateId } = req.params;
      const { name, organizationId } = req.body;
      const userId = (req as any).user?.id;

      // This would fetch the template and create a new workflow
      res.json({
        success: true,
        message: 'Workflow created from template',
        data: { id: 'new-workflow-id' },
      });
    } catch (error) {
      next(error);
    }
  }

  // Helper methods
  private hasViewPermission(workflow: WorkflowDefinition, userId: string): boolean {
    return (
      workflow.permissions.public ||
      workflow.createdBy === userId ||
      workflow.permissions.sharedWith.includes(userId)
    );
  }

  private hasExecutePermission(workflow: WorkflowDefinition, userId: string): boolean {
    return (
      workflow.createdBy === userId ||
      workflow.permissions.roles[userId]?.includes('execute') ||</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine.ts (Line 101:7 - Line 129:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine/permission-operations.ts (Line 1:1 - Line 30:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn424" onclick="toggleCodeBlock('cloneGroup424', 'expandBtn424', 'collapseBtn424')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn424" onclick="toggleCodeBlock('cloneGroup424', 'expandBtn424', 'collapseBtn424')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup424"><code class="language-typescript text-sm text-gray-800">return PermissionEngine.checkOwnerPermission(permission);
    }

    return false;
  }

  /**
   * Get all permissions for a role (including inherited)
   */
  static getRolePermissions(role: UserRole): PermissionType[] {
    const permissions = new Set&lt;PermissionType&gt;();

    // Add direct role permissions
    const directPermissions = PermissionEngine.ROLE_PERMISSIONS[role] || [];
    directPermissions.forEach((p) =&gt; permissions.add(p));

    // Add inherited permissions from lower roles
    const inheritedRoles = PermissionEngine.ROLE_HIERARCHY[role] || [];
    inheritedRoles.forEach((inheritedRole) =&gt; {
      const inheritedPermissions = PermissionEngine.ROLE_PERMISSIONS[inheritedRole] || [];
      inheritedPermissions.forEach((p) =&gt; permissions.add(p));
    });

    return Array.from(permissions);
  }

  /**
   * Check if owner has implicit permission
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine.ts (Line 160:3 - Line 181:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine/permission-operations.ts (Line 71:1 - Line 95:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn425" onclick="toggleCodeBlock('cloneGroup425', 'expandBtn425', 'collapseBtn425')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn425" onclick="toggleCodeBlock('cloneGroup425', 'expandBtn425', 'collapseBtn425')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup425"><code class="language-typescript text-sm text-gray-800">static filterResources&lt;T extends { id: string; ownerId?: string; organizationId?: string }&gt;(
    user: IUser,
    resources: T[],
    permission: PermissionType
  ): T[] {
    return resources.filter((resource) =&gt;
      PermissionEngine.hasPermission({
        user,
        permission,
        resource: {
          type: 'resource',
          id: resource.id,
          ownerId: resource.ownerId,
          organizationId: resource.organizationId,
        },
      })
    );
  }

  /**
   * Get permission diff between roles
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine.ts (Line 182:3 - Line 199:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine/permission-operations.ts (Line 96:1 - Line 117:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn426" onclick="toggleCodeBlock('cloneGroup426', 'expandBtn426', 'collapseBtn426')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn426" onclick="toggleCodeBlock('cloneGroup426', 'expandBtn426', 'collapseBtn426')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup426"><code class="language-typescript text-sm text-gray-800">static getPermissionDiff(
    fromRole: UserRole,
    toRole: UserRole
  ): {
    added: PermissionType[];
    removed: PermissionType[];
  } {
    const fromPermissions = new Set(PermissionEngine.getRolePermissions(fromRole));
    const toPermissions = new Set(PermissionEngine.getRolePermissions(toRole));

    const added: PermissionType[] = [];
    const removed: PermissionType[] = [];

    toPermissions.forEach((p) =&gt; {
      if (!fromPermissions.has(p)) {
        added.push(p);
      }
    });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine.ts (Line 201:5 - Line 235:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine/permission-utilities.ts (Line 1:1 - Line 36:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn427" onclick="toggleCodeBlock('cloneGroup427', 'expandBtn427', 'collapseBtn427')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn427" onclick="toggleCodeBlock('cloneGroup427', 'expandBtn427', 'collapseBtn427')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup427"><code class="language-typescript text-sm text-gray-800">fromPermissions.forEach((p) =&gt; {
      if (!toPermissions.has(p)) {
        removed.push(p);
      }
    });

    return { added, removed };
  }

  /**
   * Validate role change
   */
  static canChangeRole(actor: IUser, targetUser: IUser, newRole: UserRole): boolean {
    // Users can't change their own role
    if (actor.id === targetUser.id) {
      return false;
    }

    // Only super admins can create other super admins
    if (newRole === UserRole.SUPER_ADMIN) {
      return actor.role === UserRole.SUPER_ADMIN;
    }

    // Admins can manage roles below them
    if (actor.role === UserRole.ADMIN) {
      return newRole !== UserRole.SUPER_ADMIN &amp;&amp; newRole !== UserRole.ADMIN;
    }

    // Super admins can change any role
    return actor.role === UserRole.SUPER_ADMIN;
  }

  /**
   * Get resource access level for user
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine.ts (Line 236:3 - Line 282:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/rbac/permission-engine/permission-utilities.ts (Line 37:1 - Line 87:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn428" onclick="toggleCodeBlock('cloneGroup428', 'expandBtn428', 'collapseBtn428')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn428" onclick="toggleCodeBlock('cloneGroup428', 'expandBtn428', 'collapseBtn428')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup428"><code class="language-typescript text-sm text-gray-800">static getResourceAccess(
    user: IUser,
    resourceType: string
  ): {
    canView: boolean;
    canCreate: boolean;
    canEdit: boolean;
    canDelete: boolean;
    canExecute: boolean;
  } {
    const accessMap: Record&lt;string, PermissionType[]&gt; = {
      workflow: [
        PermissionType.WORKFLOW_VIEW,
        PermissionType.WORKFLOW_CREATE,
        PermissionType.WORKFLOW_EDIT,
        PermissionType.WORKFLOW_DELETE,
        PermissionType.WORKFLOW_EXECUTE,
      ],
      credential: [
        PermissionType.CREDENTIAL_VIEW,
        PermissionType.CREDENTIAL_CREATE,
        PermissionType.CREDENTIAL_EDIT,
        PermissionType.CREDENTIAL_DELETE,
        PermissionType.WORKFLOW_EXECUTE, // Credentials are executed with workflows
      ],
      execution: [
        PermissionType.EXECUTION_VIEW,
        PermissionType.WORKFLOW_EXECUTE, // Creating new executions
        PermissionType.EXECUTION_RETRY,
        PermissionType.EXECUTION_DELETE,
        PermissionType.EXECUTION_CANCEL,
      ],
    };

    const permissions = accessMap[resourceType] || [];

    return {
      canView: PermissionEngine.hasPermission({ user, permission: permissions[0] }),
      canCreate: PermissionEngine.hasPermission({ user, permission: permissions[1] }),
      canEdit: PermissionEngine.hasPermission({ user, permission: permissions[2] }),
      canDelete: PermissionEngine.hasPermission({ user, permission: permissions[3] }),
      canExecute: PermissionEngine.hasPermission({ user, permission: permissions[4] }),
    };
  }
}

export default PermissionEngine;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager.ts (Line 102:5 - Line 148:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager/token-verification.ts (Line 1:1 - Line 48:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn429" onclick="toggleCodeBlock('cloneGroup429', 'expandBtn429', 'collapseBtn429')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn429" onclick="toggleCodeBlock('cloneGroup429', 'expandBtn429', 'collapseBtn429')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup429"><code class="language-typescript text-sm text-gray-800">const options: jwt.SignOptions = {
      expiresIn: this.config.refreshTokenExpiry,
      issuer: this.config.issuer,
      algorithm: 'RS256',
    };

    const token = jwt.sign(payload, this.config.refreshTokenSecret, options);

    // Store refresh token data for rotation tracking
    this.refreshTokenStore.set(tokenId, {
      userId,
      sessionId,
      tokenFamily,
      issuedAt: new Date(),
      expiresAt,
      used: false,
    });

    return token;
  }

  /**
   * Verify and decode access token
   */
  async verifyAccessToken(token: string): Promise&lt;IJwtPayload&gt; {
    try {
      const decoded = jwt.verify(token, this.config.accessTokenSecret, {
        issuer: this.config.issuer,
        audience: this.config.audience,
        algorithms: ['RS256'],
      }) as IJwtPayload;

      return decoded;
    } catch (error) {
      if (error instanceof jwt.TokenExpiredError) {
        throw new Error('Access token expired');
      }
      if (error instanceof jwt.JsonWebTokenError) {
        throw new Error('Invalid access token');
      }
      throw error;
    }
  }

  /**
   * Refresh token rotation for enhanced security
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager.ts (Line 149:2 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager/token-verification.ts (Line 50:1 - Line 103:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn430" onclick="toggleCodeBlock('cloneGroup430', 'expandBtn430', 'collapseBtn430')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn430" onclick="toggleCodeBlock('cloneGroup430', 'expandBtn430', 'collapseBtn430')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup430"><code class="language-typescript text-sm text-gray-800">refreshTokenRotation(refreshToken: string, user: IUser): Promise&lt;TokenPair&gt; {
    try {
      // Verify refresh token
      const decoded = jwt.verify(refreshToken, this.config.refreshTokenSecret, {
        issuer: this.config.issuer,
        algorithms: ['RS256'],
      }) as any;

      const tokenData = this.refreshTokenStore.get(decoded.jti);

      if (!tokenData) {
        throw new Error('Refresh token not found');
      }

      if (tokenData.used) {
        // Token reuse detected - potential attack
        this.revokeTokenFamily(tokenData.tokenFamily);
        throw new Error('Refresh token reuse detected - all tokens revoked');
      }

      if (tokenData.userId !== user.id) {
        throw new Error('Token user mismatch');
      }

      // Mark current token as used
      tokenData.used = true;

      // Generate new token pair with same family
      const newSessionId = decoded.sessionId;
      const newTokenFamily = tokenData.tokenFamily;

      // Generate new access token
      const accessToken = await this.generateAccessToken(user, newSessionId);

      // Generate new refresh token in same family
      const newRefreshToken = await this.generateRefreshToken(
        user.id,
        newSessionId,
        newTokenFamily
      );

      return {
        accessToken,
        refreshToken: newRefreshToken,
        expiresIn: this.getExpiryInSeconds(this.config.accessTokenExpiry),
      };
    } catch (error) {
      if (error instanceof jwt.TokenExpiredError) {
        throw new Error('Refresh token expired');
      }
      if (error instanceof jwt.JsonWebTokenError) {
        throw new Error('Invalid refresh token');</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager.ts (Line 201:7 - Line 219:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager/token-utilities.ts (Line 1:1 - Line 20:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn431" onclick="toggleCodeBlock('cloneGroup431', 'expandBtn431', 'collapseBtn431')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn431" onclick="toggleCodeBlock('cloneGroup431', 'expandBtn431', 'collapseBtn431')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup431"><code class="language-typescript text-sm text-gray-800">}
      throw error;
    }
  }

  /**
   * Revoke all tokens in a family (used when reuse is detected)
   */
  private revokeTokenFamily(tokenFamily: string): void {
    for (const [tokenId, data] of this.refreshTokenStore.entries()) {
      if (data.tokenFamily === tokenFamily) {
        this.refreshTokenStore.delete(tokenId);
      }
    }
  }

  /**
   * Revoke specific session tokens
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager.ts (Line 231:2 - Line 242:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager/token-utilities.ts (Line 35:1 - Line 47:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn432" onclick="toggleCodeBlock('cloneGroup432', 'expandBtn432', 'collapseBtn432')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn432" onclick="toggleCodeBlock('cloneGroup432', 'expandBtn432', 'collapseBtn432')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup432"><code class="language-typescript text-sm text-gray-800">: void {
    const now = new Date();
    for (const [tokenId, data] of this.refreshTokenStore.entries()) {
      if (data.expiresAt &lt; now) {
        this.refreshTokenStore.delete(tokenId);
      }
    }
  }

  /**
   * Convert expiry string to seconds
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager.ts (Line 243:3 - Line 265:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager/token-utilities.ts (Line 48:1 - Line 73:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn433" onclick="toggleCodeBlock('cloneGroup433', 'expandBtn433', 'collapseBtn433')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn433" onclick="toggleCodeBlock('cloneGroup433', 'expandBtn433', 'collapseBtn433')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup433"><code class="language-typescript text-sm text-gray-800">private getExpiryInSeconds(expiry: string): number {
    const units: { [key: string]: number } = {
      s: 1,
      m: 60,
      h: 3600,
      d: 86400,
      w: 604800,
    };

    const match = expiry.match(/^(\d+)([smhdw])$/);
    if (!match) {
      throw new Error(`Invalid expiry format: ${expiry}`);
    }

    const value = parseInt(match[1], 10);
    const unit = match[2];

    return value * units[unit];
  }

  /**
   * Generate API key
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager.ts (Line 266:2 - Line 276:6), /home/margon/Reporunner/reporunner/packages/@reporunner/services/auth-service/src/jwt/token-manager/token-utilities.ts (Line 80:1 - Line 91:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn434" onclick="toggleCodeBlock('cloneGroup434', 'expandBtn434', 'collapseBtn434')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn434" onclick="toggleCodeBlock('cloneGroup434', 'expandBtn434', 'collapseBtn434')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup434"><code class="language-typescript text-sm text-gray-800">} {
    const key = `rr_${uuidv4().replace(/-/g, '')}`;
    const hash = createHash('sha256').update(key).digest('hex');
    const prefix = key.substring(0, 7);

    return { key, hash, prefix };
  }

  /**
   * Verify API key
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/index/analytics-service.ts (Line 81:16 - Line 91:7), /home/margon/Reporunner/reporunner/packages/@reporunner/services/notification-service/src/index/service-core.ts (Line 44:19 - Line 54:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn435" onclick="toggleCodeBlock('cloneGroup435', 'expandBtn435', 'collapseBtn435')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn435" onclick="toggleCodeBlock('cloneGroup435', 'expandBtn435', 'collapseBtn435')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup435"><code class="language-typescript text-sm text-gray-800">,
    private mongoClient: MongoClient,
    eventBus: DistributedEventBus
  ) {
    super();
    this.eventBus = eventBus;
    this.cache = new Redis(config.redis);
    this.db = mongoClient.db(config.mongodb.database);

    // Initialize collections
    this.events</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-operations.ts (Line 25:7 - Line 34:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-operations.ts (Line 7:3 - Line 15:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn436" onclick="toggleCodeBlock('cloneGroup436', 'expandBtn436', 'collapseBtn436')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn436" onclick="toggleCodeBlock('cloneGroup436', 'expandBtn436', 'collapseBtn436')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup436"><code class="language-typescript text-sm text-gray-800">)
: Promise&lt;boolean&gt;
{
  const dashboard = this.dashboards.get(dashboardId);
  if (!dashboard) return false;

  const widgetIndex = dashboard.widgets.findIndex((w) =&gt; w.id === widgetId);
  if (widgetIndex === -1) return false;

  dashboard.widgets.</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/validation-utilities.ts (Line 38:13 - Line 54:8), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/validation-utilities.ts (Line 18:6 - Line 34:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn437" onclick="toggleCodeBlock('cloneGroup437', 'expandBtn437', 'collapseBtn437')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn437" onclick="toggleCodeBlock('cloneGroup437', 'expandBtn437', 'collapseBtn437')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup437"><code class="language-typescript text-sm text-gray-800">: {
    rules: [
      {
        field: 'email',
        type: 'email',
        required: true,
        normalizeEmail: true,
        toLowerCase: true,
        sanitize: true,
      },
      {
        field: 'password',
        type: 'string',
        required: true,
        minLength: 8,
        maxLength: 128,
        pattern</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers/SecurityHeadersMiddleware.ts (Line 112:3 - Line 140:7), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers/builders/SecurityHeadersBuilder.ts (Line 111:7 - Line 138:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn438" onclick="toggleCodeBlock('cloneGroup438', 'expandBtn438', 'collapseBtn438')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn438" onclick="toggleCodeBlock('cloneGroup438', 'expandBtn438', 'collapseBtn438')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup438"><code class="language-typescript text-sm text-gray-800">frameProtection: {
    enabled: true,
    action: 'DENY'
  },
  contentTypeOptions: {
    enabled: true,
    nosniff: true
  },
  xssProtection: {
    enabled: true,
    mode: '1; mode=block'
  },
  referrerPolicy: {
    enabled: true,
    policy: 'strict-origin-when-cross-origin'
  },
  permissionsPolicy: {
    enabled: true,
    features: {
      geolocation: [&quot;'self'&quot;],
      microphone: [&quot;'none'&quot;],
      camera: [&quot;'none'&quot;],
      payment: [&quot;'self'&quot;],
      usb: [&quot;'none'&quot;]
    }
  }
};

export</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/metadata-processing.ts (Line 40:7 - Line 45:6), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/upload-utilities.ts (Line 90:2 - Line 95:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn439" onclick="toggleCodeBlock('cloneGroup439', 'expandBtn439', 'collapseBtn439')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn439" onclick="toggleCodeBlock('cloneGroup439', 'expandBtn439', 'collapseBtn439')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup439"><code class="language-typescript text-sm text-gray-800">&gt;) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const files = req.file ? [req.file] : (req.files as Express.Multer.File[]) || [];

    for (const file of files) {
      const limit</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/rbac-enforcement.ts (Line 11:14 - Line 23:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/session-management.ts (Line 83:12 - Line 94:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn440" onclick="toggleCodeBlock('cloneGroup440', 'expandBtn440', 'collapseBtn440')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn440" onclick="toggleCodeBlock('cloneGroup440', 'expandBtn440', 'collapseBtn440')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup440"><code class="language-typescript text-sm text-gray-800">: async (req: Request, res: Response) =&gt;
{
  if (!req.user) {
    return res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.UNAUTHORIZED,
            message: 'Not authenticated',
          },
        });
  }

  const {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/rbac-enforcement.ts (Line 82:20 - Line 96:12), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/rbac-enforcement.ts (Line 51:14 - Line 64:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn441" onclick="toggleCodeBlock('cloneGroup441', 'expandBtn441', 'collapseBtn441')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn441" onclick="toggleCodeBlock('cloneGroup441', 'expandBtn441', 'collapseBtn441')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup441"><code class="language-typescript text-sm text-gray-800">: string[]) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    if (!req.user) {
      res.status(401).json({
        success: false,
        error: {
          code: ERROR_CODES.UNAUTHORIZED,
          message: 'Authentication required',
        },
      });
      return;
    }

    if (
      !req.user.permissions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 42:15 - Line 50:13), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 26:17 - Line 34:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn442" onclick="toggleCodeBlock('cloneGroup442', 'expandBtn442', 'collapseBtn442')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn442" onclick="toggleCodeBlock('cloneGroup442', 'expandBtn442', 'collapseBtn442')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup442"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any)
: void
{
  const workflowId = socket.data.workflowId;
  const user = socket.data.user as IJwtPayload;

  if (!workflowId) return;

  socket.to(`workflow:${workflowId}`).emit('node:moved'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 58:14 - Line 66:13), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 26:17 - Line 34:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn443" onclick="toggleCodeBlock('cloneGroup443', 'expandBtn443', 'collapseBtn443')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn443" onclick="toggleCodeBlock('cloneGroup443', 'expandBtn443', 'collapseBtn443')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup443"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any)
: void
{
  const workflowId = socket.data.workflowId;
  const user = socket.data.user as IJwtPayload;

  if (!workflowId) return;

  socket.to(`workflow:${workflowId}`).emit('edge:added'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 74:17 - Line 82:15), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 26:17 - Line 34:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn444" onclick="toggleCodeBlock('cloneGroup444', 'expandBtn444', 'collapseBtn444')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn444" onclick="toggleCodeBlock('cloneGroup444', 'expandBtn444', 'collapseBtn444')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup444"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any)
: void
{
  const workflowId = socket.data.workflowId;
  const user = socket.data.user as IJwtPayload;

  if (!workflowId) return;

  socket.to(`workflow:${workflowId}`).emit('edge:updated'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 90:17 - Line 98:15), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 26:17 - Line 34:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn445" onclick="toggleCodeBlock('cloneGroup445', 'expandBtn445', 'collapseBtn445')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn445" onclick="toggleCodeBlock('cloneGroup445', 'expandBtn445', 'collapseBtn445')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup445"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any)
: void
{
  const workflowId = socket.data.workflowId;
  const user = socket.data.user as IJwtPayload;

  if (!workflowId) return;

  socket.to(`workflow:${workflowId}`).emit('edge:deleted'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 98:20 - Line 105:7), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 64:20 - Line 71:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn446" onclick="toggleCodeBlock('cloneGroup446', 'expandBtn446', 'collapseBtn446')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn446" onclick="toggleCodeBlock('cloneGroup446', 'expandBtn446', 'collapseBtn446')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup446"><code class="language-typescript text-sm text-gray-800">(op1: Operation, op2: Operation)
: TransformResult
{
    if (op1.path.join('.') !== op2.path.join('.')) {
      return { operation1: op1, operation2: op2, conflict: false };
    }

    const start1</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/conflict-resolution.ts (Line 30:21 - Line 36:7), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 64:20 - Line 71:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn447" onclick="toggleCodeBlock('cloneGroup447', 'expandBtn447', 'collapseBtn447')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn447" onclick="toggleCodeBlock('cloneGroup447', 'expandBtn447', 'collapseBtn447')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup447"><code class="language-typescript text-sm text-gray-800">(op1: Operation, op2: Operation): TransformResult
{
  if (op1.path.join('.') !== op2.path.join('.')) {
    return { operation1: op1, operation2: op2, conflict: false };
  }

  const index1</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/conflict-resolution.ts (Line 59:21 - Line 70:2), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 64:20 - Line 40:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn448" onclick="toggleCodeBlock('cloneGroup448', 'expandBtn448', 'collapseBtn448')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn448" onclick="toggleCodeBlock('cloneGroup448', 'expandBtn448', 'collapseBtn448')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup448"><code class="language-typescript text-sm text-gray-800">(op1: Operation, op2: Operation)
: TransformResult
{
  if (op1.path.join('.') !== op2.path.join('.')) {
    return { operation1: op1, operation2: op2, conflict: false };
  }

  const index1 = op1.position || 0;
  const index2 = op2.position || 0;

  if (index1 &lt; index2) {
    op2.position = index2 -</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/utils/rate-limiter/token-bucket.ts (Line 75:6 - Line 105:1), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/utils/rate-limiter/token-bucket.ts (Line 26:2 - Line 56:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn449" onclick="toggleCodeBlock('cloneGroup449', 'expandBtn449', 'collapseBtn449')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn449" onclick="toggleCodeBlock('cloneGroup449', 'expandBtn449', 'collapseBtn449')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup449"><code class="language-typescript text-sm text-gray-800">,
          resetAt: entry.resetAt,
          isLimited: false,
        };
    }

    // Rate limited
    this.handleRateLimit(key, entry, config);

    return {
        remaining: 0,
        resetAt: entry.resetAt,
        isLimited: true,
        retryAfter: Math.ceil((entry.resetAt.getTime() - now.getTime()) / 1000),
      };
  }

  // Request allowed
  entry.count++;
  entry.lastRequest = now;

  return {
      remaining: remaining - 1,
      resetAt: entry.resetAt,
      isLimited: false,
    };
}

/**
   * Record successful request
</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 64:16 - Line 75:14), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 30:9 - Line 41:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn450" onclick="toggleCodeBlock('cloneGroup450', 'expandBtn450', 'collapseBtn450')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn450" onclick="toggleCodeBlock('cloneGroup450', 'expandBtn450', 'collapseBtn450')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup450"><code class="language-typescript text-sm text-gray-800">(name: string, config: any): { success: boolean; data?: any; errors?: any[] } {
    const schema = this.schemas.get(name) || this.schemas.get('base');

    if (!schema) {
      return {
        success: false,
        errors: [{ message: `No schema found for ${name}` }],
      };
    }

    try {
      const partialSchema</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 76:14 - Line 98:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 41:7 - Line 63:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn451" onclick="toggleCodeBlock('cloneGroup451', 'expandBtn451', 'collapseBtn451')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn451" onclick="toggleCodeBlock('cloneGroup451', 'expandBtn451', 'collapseBtn451')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup451"><code class="language-typescript text-sm text-gray-800">.parse(config);
      return { success: true, data };
    } catch (error: any) {
      if (error instanceof z.ZodError) {
        return {
          success: false,
          errors: error.errors.map((e) =&gt; ({
            path: e.path.join('.'),
            message: e.message,
            code: e.code,
          })),
        };
      }
      return {
        success: false,
        errors: [{ message: error.message }],
      };
    }
  }

  /**
   * Get schema
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 18:12 - Line 57:10), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 15:2 - Line 54:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn452" onclick="toggleCodeBlock('cloneGroup452', 'expandBtn452', 'collapseBtn452')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn452" onclick="toggleCodeBlock('cloneGroup452', 'expandBtn452', 'collapseBtn452')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup452"><code class="language-typescript text-sm text-gray-800">);
  }
  
  /**
   * Convert string ID to ObjectId
   */
  protected toObjectId(id: ID): ObjectId {
    return new ObjectId(id as string);
  }
  
  /**
   * Transform repository filter to MongoDB filter
   */
  protected transformFilter(filter: Filter&lt;T&gt; = {}): any {
    // Convert string IDs to ObjectIds in the filter
    const transformed = { ...filter };
    if (transformed._id) {
      if (typeof transformed._id === 'string') {
        transformed._id = this.toObjectId(transformed._id as unknown as ID);
      } else if (typeof transformed._id === 'object') {
        const idFilter = transformed._id as any;
        if (idFilter.$eq) idFilter.$eq = this.toObjectId(idFilter.$eq);
        if (idFilter.$in) idFilter.$in = idFilter.$in.map((id: string) =&gt; this.toObjectId(id as unknown as ID));
      }
    }
    return transformed;
  }
  
  /**
   * Transform repository sort to MongoDB sort
   */
  protected transformSort(sort: Sort&lt;T&gt; = {}): any {
    const transformed: Record&lt;string, 1 | -1&gt; = {};
    for (const [key, value] of Object.entries(sort)) {
      transformed[key] = value === 'desc' || value === -1 ? -1 : 1;
    }
    return transformed;
  }
  
  protected</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 87:9 - Line 134:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 59:2 - Line 106:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn453" onclick="toggleCodeBlock('cloneGroup453', 'expandBtn453', 'collapseBtn453')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn453" onclick="toggleCodeBlock('cloneGroup453', 'expandBtn453', 'collapseBtn453')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup453"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async findOne(filter: Filter&lt;T&gt;): Promise&lt;T | null&gt; {
    return this.wrapError(async () =&gt; {
      return this.collection.findOne(
        this.transformFilter(filter),
        { session: this.session }
      );
    });
  }
  
  async find(filter?: Filter&lt;T&gt;, sort?: Sort&lt;T&gt;, pagination?: Pagination): Promise&lt;T[]&gt; {
    return this.wrapError(async () =&gt; {
      let query = this.collection.find(
        this.transformFilter(filter),
        { session: this.session }
      );
      
      if (sort) {
        query = query.sort(this.transformSort(sort));
      }
      
      if (pagination) {
        query = query.skip(pagination.skip).limit(pagination.limit);
      }
      
      return query.toArray();
    });
  }
  
  async count(filter?: Filter&lt;T&gt;): Promise&lt;number&gt; {
    return this.wrapError(async () =&gt; {
      return this.collection.countDocuments(
        this.transformFilter(filter),
        { session: this.session }
      );
    });
  }
  
  async create(data: Partial&lt;T&gt;): Promise&lt;T&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.insertOne(
        data as any,
        { session: this.session }
      );
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 136:7 - Line 146:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 106:2 - Line 116:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn454" onclick="toggleCodeBlock('cloneGroup454', 'expandBtn454', 'collapseBtn454')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn454" onclick="toggleCodeBlock('cloneGroup454', 'expandBtn454', 'collapseBtn454')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup454"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async createMany(data: Partial&lt;T&gt;[]): Promise&lt;T[]&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.insertMany(
        data as any[],
        { session: this.session }
      );
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 151:9 - Line 166:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 119:2 - Line 133:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn455" onclick="toggleCodeBlock('cloneGroup455', 'expandBtn455', 'collapseBtn455')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn455" onclick="toggleCodeBlock('cloneGroup455', 'expandBtn455', 'collapseBtn455')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup455"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async update(id: ID, data: Partial&lt;T&gt;): Promise&lt;T&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.findOneAndUpdate(
        { _id: this.toObjectId(id) } as any,
        { $set: data },
        { 
          session: this.session,
          returnDocument: 'after'
        }
      );
      
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 168:7 - Line 190:3), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 133:2 - Line 154:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn456" onclick="toggleCodeBlock('cloneGroup456', 'expandBtn456', 'collapseBtn456')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn456" onclick="toggleCodeBlock('cloneGroup456', 'expandBtn456', 'collapseBtn456')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup456"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async updateMany(filter: Filter&lt;T&gt;, data: Partial&lt;T&gt;): Promise&lt;number&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.updateMany(
        this.transformFilter(filter),
        { $set: data },
        { session: this.session }
      );
      return result.modifiedCount;
    });
  }
  
  async delete(id: ID): Promise&lt;boolean&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.deleteOne(
        { _id: this.toObjectId(id) } as any,
        { session: this.session }
      );
      
      if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 194:7 - Line 224:2), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 154:7 - Line 184:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn457" onclick="toggleCodeBlock('cloneGroup457', 'expandBtn457', 'collapseBtn457')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn457" onclick="toggleCodeBlock('cloneGroup457', 'expandBtn457', 'collapseBtn457')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup457"><code class="language-typescript text-sm text-gray-800">return result.deletedCount &gt; 0;
    });
  }
  
  async deleteMany(filter: Filter&lt;T&gt;): Promise&lt;number&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.deleteMany(
        this.transformFilter(filter),
        { session: this.session }
      );
      return result.deletedCount;
    });
  }
  
  protected async beginTransactionImpl(): Promise&lt;void&gt; {
    this.session = await this.collection.db.client.startSession();
    await this.session.startTransaction();
  }
  
  protected async commitTransactionImpl(): Promise&lt;void&gt; {
    await this.session?.commitTransaction();
    await this.session?.endSession();
    this.session = null;
  }
  
  protected async rollbackTransactionImpl(): Promise&lt;void&gt; {
    await this.session?.abortTransaction();
    await this.session?.endSession();
    this.session = null;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/ai/src/providers/openai-provider/openai-provider.ts (Line 84:2 - Line 91:7), /home/margon/Reporunner/reporunner/packages/@reporunner/ai/src/providers/openai-provider/openai-provider.ts (Line 44:2 - Line 51:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn458" onclick="toggleCodeBlock('cloneGroup458', 'expandBtn458', 'collapseBtn458')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn458" onclick="toggleCodeBlock('cloneGroup458', 'expandBtn458', 'collapseBtn458')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup458"><code class="language-typescript text-sm text-gray-800">= await this.client.chat.completions.create({
        model: params.model,
        messages,
        temperature: params.temperature,
        max_tokens: params.maxTokens,
        stop: params.stopSequences,
        tools: params.tools ? this.formatTools(params.tools) : undefined,
        stream</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/shared/src/base/optimized/unified-service-base.ts (Line 94:5 - Line 105:13), /home/margon/Reporunner/reporunner/packages/shared/src/base/optimized/unified-service-base.ts (Line 80:3 - Line 91:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn459" onclick="toggleCodeBlock('cloneGroup459', 'expandBtn459', 'collapseBtn459')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn459" onclick="toggleCodeBlock('cloneGroup459', 'expandBtn459', 'collapseBtn459')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup459"><code class="language-typescript text-sm text-gray-800">);
      if (!result) {
        res.status(404).json({ error: 'Not found' });
        return;
      }
      res.json({ success: true, data: result });
    } catch (error) {
      res.status(500).json({ error: error.message });
    }
  }

  async handleDelete</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/types/credentials.ts (Line 241:5 - Line 272:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/types/credentials.ts (Line 196:5 - Line 227:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn460" onclick="toggleCodeBlock('cloneGroup460', 'expandBtn460', 'collapseBtn460')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn460" onclick="toggleCodeBlock('cloneGroup460', 'expandBtn460', 'collapseBtn460')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup460"><code class="language-typescript text-sm text-gray-800">,
    properties: [
      {
        displayName: 'Host',
        name: 'host',
        type: 'string',
        required: true,
        default: 'localhost',
      },
      {
        displayName: 'Database',
        name: 'database',
        type: 'string',
        required: true,
      },
      {
        displayName: 'User',
        name: 'user',
        type: 'string',
        required: true,
      },
      {
        displayName: 'Password',
        name: 'password',
        type: 'password',
        required: true,
      },
      {
        displayName: 'Port',
        name: 'port',
        type: 'number',
        default: 3306</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/leanWorkflowStore.ts (Line 302:11 - Line 310:6), /home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/leanWorkflowStore.ts (Line 268:11 - Line 275:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn461" onclick="toggleCodeBlock('cloneGroup461', 'expandBtn461', 'collapseBtn461')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn461" onclick="toggleCodeBlock('cloneGroup461', 'expandBtn461', 'collapseBtn461')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup461"><code class="language-typescript text-sm text-gray-800">nodes: nodes.map((node) =&gt; ({
            id: node.id,
            type: node.type,
            position: node.position,
            data: {
              label: node.name,
              parameters: node.parameters || {},
              credentials:
                Array</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/leanWorkflowStore.ts (Line 312:2 - Line 330:3), /home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/leanWorkflowStore.ts (Line 275:2 - Line 293:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn462" onclick="toggleCodeBlock('cloneGroup462', 'expandBtn462', 'collapseBtn462')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn462" onclick="toggleCodeBlock('cloneGroup462', 'expandBtn462', 'collapseBtn462')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup462"><code class="language-typescript text-sm text-gray-800">undefined,
              disabled: node.disabled,
              notes: node.notes,
            },
          })),
          edges: edges,
          settings: {
            timeout: 300000,
            errorHandling: 'stop' as const,
            retryPolicy: {
              maxRetries: 3,
              retryDelay: 5000,
            },
          },
          tags: currentWorkflow.tags || [],
          isActive: currentWorkflow.active || false,
        };

        if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/authStore.ts (Line 62:9 - Line 74:22), /home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/authStore.ts (Line 41:12 - Line 53:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn463" onclick="toggleCodeBlock('cloneGroup463', 'expandBtn463', 'collapseBtn463')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn463" onclick="toggleCodeBlock('cloneGroup463', 'expandBtn463', 'collapseBtn463')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup463"><code class="language-typescript text-sm text-gray-800">);
          set({
            user: authResponse.user,
            isAuthenticated: true,
            isLoading: false,
            error: null,
          });
        } catch (error: any) {
          set({
            user: null,
            isAuthenticated: false,
            isLoading: false,
            error: error.message || 'Registration failed'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enhancedDebuggingService.ts (Line 466:5 - Line 478:21), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/enhancedDebuggingService.ts (Line 427:5 - Line 439:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn464" onclick="toggleCodeBlock('cloneGroup464', 'expandBtn464', 'collapseBtn464')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn464" onclick="toggleCodeBlock('cloneGroup464', 'expandBtn464', 'collapseBtn464')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup464"><code class="language-typescript text-sm text-gray-800">const currentNodeId = session.currentNodeId || 'unknown';

    const step: ExecutionStep = {
      id: `step_${Date.now()}`,
      nodeId: currentNodeId,
      timestamp: Date.now(),
      action: 'start',
    };

    session.executionHistory.push(step);
    this.executionHistory.get(session.id)?.push(step);

    // Add to call stack</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerExecutionService.ts (Line 357:2 - Line 373:6), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerExecutionService.ts (Line 238:9 - Line 254:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn465" onclick="toggleCodeBlock('cloneGroup465', 'expandBtn465', 'collapseBtn465')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn465" onclick="toggleCodeBlock('cloneGroup465', 'expandBtn465', 'collapseBtn465')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup465"><code class="language-typescript text-sm text-gray-800">errors,
        metrics: this.calculateMetrics(state),
      };
    } catch (error) {
      return {
        success: false,
        outputData: [],
        executionTime: performance.now() - startTime,
        errors: [error as Error],
        metrics: this.calculateMetrics(state),
      };
    }
  }

  /**
   * Execute batch container
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerExecutionService.ts (Line 424:8 - Line 442:6), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/containerExecutionService.ts (Line 236:13 - Line 254:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn466" onclick="toggleCodeBlock('cloneGroup466', 'expandBtn466', 'collapseBtn466')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn466" onclick="toggleCodeBlock('cloneGroup466', 'expandBtn466', 'collapseBtn466')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup466"><code class="language-typescript text-sm text-gray-800">,
        executionTime: performance.now() - startTime,
        errors,
        metrics: this.calculateMetrics(state),
      };
    } catch (error) {
      return {
        success: false,
        outputData: [],
        executionTime: performance.now() - startTime,
        errors: [error as Error],
        metrics: this.calculateMetrics(state),
      };
    }
  }

  /**
   * Execute child nodes
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedTriggerSystem.ts (Line 494:13 - Line 506:19), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowScheduler.ts (Line 408:19 - Line 422:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn467" onclick="toggleCodeBlock('cloneGroup467', 'expandBtn467', 'collapseBtn467')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn467" onclick="toggleCodeBlock('cloneGroup467', 'expandBtn467', 'collapseBtn467')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup467"><code class="language-typescript text-sm text-gray-800">) =&gt; void
  ): () =&gt; void {
    if (!this.eventListeners.has(event)) {
      this.eventListeners.set(event, new Set());
    }
    this.eventListeners.get(event)?.add(callback);

    return () =&gt; {
      this.eventListeners.get(event)?.delete(callback);
    };
  }

  // Private methods</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedAuthService.ts (Line 175:9 - Line 191:7), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedAuthService.ts (Line 113:9 - Line 130:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn468" onclick="toggleCodeBlock('cloneGroup468', 'expandBtn468', 'collapseBtn468')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn468" onclick="toggleCodeBlock('cloneGroup468', 'expandBtn468', 'collapseBtn468')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup468"><code class="language-typescript text-sm text-gray-800">userAgent: navigator.userAgent,
      });

      this.currentUser = user;
      this.currentSession = session;

      const context: AuthContext = {
        user,
        session,
        permissions: await this.getUserPermissions(user.id),
        projects: user.projects,
        isLoading: false,
        error: null,
      };

      this.notifyListeners(context);
      return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedAuthService.ts (Line 369:5 - Line 393:6), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedAuthService.ts (Line 172:7 - Line 192:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn469" onclick="toggleCodeBlock('cloneGroup469', 'expandBtn469', 'collapseBtn469')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn469" onclick="toggleCodeBlock('cloneGroup469', 'expandBtn469', 'collapseBtn469')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup469"><code class="language-typescript text-sm text-gray-800">// Create session
    const session = await this.createSession(user.id, {
      ipAddress: '127.0.0.1',
      userAgent: navigator.userAgent,
    });

    this.currentUser = user;
    this.currentSession = session;

    const context: AuthContext = {
      user,
      session,
      permissions: await this.getUserPermissions(user.id),
      projects: user.projects,
      isLoading: false,
      error: null,
    };

    this.notifyListeners(context);
    return context;
  }

  /**
   * API Key Management
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedAuthService.ts (Line 521:2 - Line 547:6), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedAuthService.ts (Line 170:2 - Line 192:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn470" onclick="toggleCodeBlock('cloneGroup470', 'expandBtn470', 'collapseBtn470')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn470" onclick="toggleCodeBlock('cloneGroup470', 'expandBtn470', 'collapseBtn470')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup470"><code class="language-typescript text-sm text-gray-800">);

    // Create session
    const session = await this.createSession(user.id, {
      ipAddress: '127.0.0.1',
      userAgent: navigator.userAgent,
    });

    this.currentUser = user;
    this.currentSession = session;

    const context: AuthContext = {
      user,
      session,
      permissions: await this.getUserPermissions(user.id),
      projects: user.projects,
      isLoading: false,
      error: null,
    };

    this.notifyListeners(context);
    return context;
  }

  /**
   * Session Management
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/services/advancedAuthService.ts (Line 770:2 - Line 793:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/types/authentication.ts (Line 302:2 - Line 325:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn471" onclick="toggleCodeBlock('cloneGroup471', 'expandBtn471', 'collapseBtn471')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn471" onclick="toggleCodeBlock('cloneGroup471', 'expandBtn471', 'collapseBtn471')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup471"><code class="language-typescript text-sm text-gray-800">{
      theme: 'dark',
      language: 'en',
      timezone: 'UTC',
      notifications: {
        email: true,
        push: false,
        inApp: true,
        workflows: true,
        executions: true,
        security: true,
      },
      dashboard: {
        layout: 'grid',
        widgets: ['workflows', 'executions', 'recent'],
        refreshInterval: 30000,
      },
      editor: {
        autoSave: true,
        autoComplete: true,
        syntaxHighlighting: true,
        wordWrap: true,
      },
    };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/schemas/WorkflowSchemas.ts (Line 92:11 - Line 100:60), /home/margon/Reporunner/reporunner/packages/frontend/src/core/schemas/WorkflowSchemas.ts (Line 83:15 - Line 92:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn472" onclick="toggleCodeBlock('cloneGroup472', 'expandBtn472', 'collapseBtn472')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn472" onclick="toggleCodeBlock('cloneGroup472', 'expandBtn472', 'collapseBtn472')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup472"><code class="language-typescript text-sm text-gray-800">: z
      .object({
        totalExecutions: z.number().int().min(0),
        successfulExecutions: z.number().int().min(0),
        failedExecutions: z.number().int().min(0),
        avgDuration: z.number().min(0).optional(),
        successRate: z.number().min(0).max(100).optional(),
      })
      .optional(), // Backend returns &quot;statistics&quot; instead of &quot;executionStats&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/registry.ts (Line 233:2 - Line 255:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/registry.ts (Line 176:2 - Line 198:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn473" onclick="toggleCodeBlock('cloneGroup473', 'expandBtn473', 'collapseBtn473')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn473" onclick="toggleCodeBlock('cloneGroup473', 'expandBtn473', 'collapseBtn473')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup473"><code class="language-typescript text-sm text-gray-800">{
        displayName: enhancedNode.displayName || enhancedNode.name,
        name: enhancedNode.name,
        icon: enhancedNode.icon || 'fa:envelope',
        group: [enhancedNode.type === 'trigger' ? 'trigger' : 'transform'],
        version: 1,
        description: enhancedNode.description || '',
        defaults: {
          name: enhancedNode.displayName || enhancedNode.name,
          color: (enhancedNode as any).color || '#DD4B39',
        },
        inputs: (enhancedNode.inputs || [{ type: 'main' }]).map((input) =&gt;
          typeof input === 'string' ? input : input.type || 'main'
        ),
        outputs: (enhancedNode.outputs || [{ type: 'main' }]).map((output) =&gt;
          typeof output === 'string' ? output : output.type || 'main'
        ),
        categories: enhancedNode.codex?.categories || [],
        properties: [], // Enhanced nodes use different property system
        // Preserve custom UI components from enhanced nodes
        customBodyComponent: (enhancedNode as any).customBodyComponent,
        // customPropertiesPanel: (enhancedNode as any).customPropertiesPanel,
      })</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 94:9 - Line 106:22), /home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 73:12 - Line 85:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn474" onclick="toggleCodeBlock('cloneGroup474', 'expandBtn474', 'collapseBtn474')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn474" onclick="toggleCodeBlock('cloneGroup474', 'expandBtn474', 'collapseBtn474')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup474"><code class="language-typescript text-sm text-gray-800">, LoginApiResponseSchema);

      // Store tokens in localStorage
      if (response.token) {
        localStorage.setItem(configService.get('auth').tokenKey, response.token);
      }
      if (response.refreshToken) {
        localStorage.setItem(configService.get('auth').refreshTokenKey, response.refreshToken);
      }

      return response;
    } catch (error) {
      throw new ApiClientError('Registration failed'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 259:8 - Line 274:27), /home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 231:16 - Line 246:31)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn475" onclick="toggleCodeBlock('cloneGroup475', 'expandBtn475', 'collapseBtn475')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn475" onclick="toggleCodeBlock('cloneGroup475', 'expandBtn475', 'collapseBtn475')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup475"><code class="language-typescript text-sm text-gray-800">,
      });

      // Backend returns: { success, data: { user: UserProfile } }
      // Extract user from nested structure
      const responseData = response.data as any;
      const userData = responseData.data?.user || responseData.user;

      if (!userData) {
        throw new ApiClientError('Invalid profile response structure', 422, 'INVALID_RESPONSE');
      }

      // Transform and validate the user data
      return this.transformUserProfile(userData);
    } catch (error) {
      throw new ApiClientError('Failed to update profile'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/hooks/useSmartMenuPosition.ts (Line 155:2 - Line 166:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/hooks/useSmartMenuPosition.ts (Line 76:4 - Line 87:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn519" onclick="toggleCodeBlock('cloneGroup519', 'expandBtn519', 'collapseBtn519')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn519" onclick="toggleCodeBlock('cloneGroup519', 'expandBtn519', 'collapseBtn519')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup519"><code class="language-typescript text-sm text-gray-800">;

      // Calculate available space in each direction
      const spaceRight = viewport.width - triggerRect.right;
      const spaceLeft = triggerRect.left;
      const spaceBelow = viewport.height - triggerRect.bottom;

      let newPosition: MenuPosition = {};
      let strategy: typeof positionStrategy = 'right';

      // Try positioning to the right of the button (preferred)
      if (spaceRight &gt;= menuRect</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 98:26 - Line 113:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/services/intelligentautoconnect/intelligentAutoConnectService.ts (Line 33:16 - Line 48:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn520" onclick="toggleCodeBlock('cloneGroup520', 'expandBtn520', 'collapseBtn520')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn520" onclick="toggleCodeBlock('cloneGroup520', 'expandBtn520', 'collapseBtn520')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup520"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async slice</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 103:7 - Line 118:11), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/workflowtemplates/workflowTemplatesService.ts (Line 108:24 - Line 123:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn521" onclick="toggleCodeBlock('cloneGroup521', 'expandBtn521', 'collapseBtn521')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn521" onclick="toggleCodeBlock('cloneGroup521', 'expandBtn521', 'collapseBtn521')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup521"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async sort(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async slice(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getVersion</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 183:16 - Line 198:16), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/oauth/OAuthService.ts (Line 113:11 - Line 128:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn522" onclick="toggleCodeBlock('cloneGroup522', 'expandBtn522', 'collapseBtn522')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn522" onclick="toggleCodeBlock('cloneGroup522', 'expandBtn522', 'collapseBtn522')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup522"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getVersionStats</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 213:10 - Line 228:8), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/audit/auditService.ts (Line 158:26 - Line 173:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn523" onclick="toggleCodeBlock('cloneGroup523', 'expandBtn523', 'collapseBtn523')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn523" onclick="toggleCodeBlock('cloneGroup523', 'expandBtn523', 'collapseBtn523')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup523"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async toISOString(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async split(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async forEach</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/permission/PermissionService.ts (Line 13:8 - Line 28:18), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/config/ConfigService.ts (Line 33:16 - Line 48:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn524" onclick="toggleCodeBlock('cloneGroup524', 'expandBtn524', 'collapseBtn524')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn524" onclick="toggleCodeBlock('cloneGroup524', 'expandBtn524', 'collapseBtn524')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup524"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async getInstance(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async PermissionService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/permission/PermissionService.ts (Line 68:8 - Line 83:18), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/config/ConfigService.ts (Line 58:11 - Line 73:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn525" onclick="toggleCodeBlock('cloneGroup525', 'expandBtn525', 'collapseBtn525')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn525" onclick="toggleCodeBlock('cloneGroup525', 'expandBtn525', 'collapseBtn525')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup525"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async split(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async isValidPermission</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/operationaltransform/OperationalTransformService.ts (Line 8:2 - Line 23:28), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 8:2 - Line 23:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn526" onclick="toggleCodeBlock('cloneGroup526', 'expandBtn526', 'collapseBtn526')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn526" onclick="toggleCodeBlock('cloneGroup526', 'expandBtn526', 'collapseBtn526')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup526"><code class="language-typescript text-sm text-gray-800">{
  constructor(
    // Add dependencies here
  ) {}

  async getInstance(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async OperationalTransformService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/operationaltransform/OperationalTransformService.ts (Line 103:17 - Line 118:20), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/integrationmarketplace/integrationMarketplaceService.ts (Line 48:3 - Line 63:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn527" onclick="toggleCodeBlock('cloneGroup527', 'expandBtn527', 'collapseBtn527')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn527" onclick="toggleCodeBlock('cloneGroup527', 'expandBtn527', 'collapseBtn527')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup527"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async filter(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async includes(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async hasPositionConflict</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/HealthCheck.ts (Line 237:2 - Line 250:29), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/PerformanceMonitor.ts (Line 228:2 - Line 241:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn528" onclick="toggleCodeBlock('cloneGroup528', 'expandBtn528', 'collapseBtn528')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn528" onclick="toggleCodeBlock('cloneGroup528', 'expandBtn528', 'collapseBtn528')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup528"><code class="language-typescript text-sm text-gray-800">;
  }

  private async measureEventLoopLag(): Promise&lt;number&gt; {
    return new Promise((resolve) =&gt; {
      const start = performance.now();
      setImmediate(() =&gt; {
        const lag = performance.now() - start;
        resolve(lag);
      });
    });
  }

  // Default dependency checks</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/embeddings/EmbeddingsService.ts (Line 63:16 - Line 78:15), /home/margon/Reporunner/reporunner/packages/frontend/src/core/services/config/ConfigService.ts (Line 63:6 - Line 78:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn529" onclick="toggleCodeBlock('cloneGroup529', 'expandBtn529', 'collapseBtn529')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn529" onclick="toggleCodeBlock('cloneGroup529', 'expandBtn529', 'collapseBtn529')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup529"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async push(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async join(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async semanticSearch</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/database/DatabaseService.ts (Line 8:2 - Line 23:22), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 8:2 - Line 23:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn530" onclick="toggleCodeBlock('cloneGroup530', 'expandBtn530', 'collapseBtn530')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn530" onclick="toggleCodeBlock('cloneGroup530', 'expandBtn530', 'collapseBtn530')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup530"><code class="language-typescript text-sm text-gray-800">{
  constructor(
    // Add dependencies here
  ) {}

  async getInstance(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async HybridDatabaseService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/database/DatabaseService.ts (Line 53:21 - Line 68:11), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/oauth/OAuthService.ts (Line 113:11 - Line 128:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn531" onclick="toggleCodeBlock('cloneGroup531', 'expandBtn531', 'collapseBtn531')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn531" onclick="toggleCodeBlock('cloneGroup531', 'expandBtn531', 'collapseBtn531')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup531"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async disconnect</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/cursortracking/CursorTrackingService.ts (Line 8:2 - Line 23:22), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 8:2 - Line 23:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn532" onclick="toggleCodeBlock('cloneGroup532', 'expandBtn532', 'collapseBtn532')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn532" onclick="toggleCodeBlock('cloneGroup532', 'expandBtn532', 'collapseBtn532')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup532"><code class="language-typescript text-sm text-gray-800">{
  constructor(
    // Add dependencies here
  ) {}

  async getInstance(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async CursorTrackingService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/cursortracking/CursorTrackingService.ts (Line 48:21 - Line 63:4), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 83:12 - Line 98:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn533" onclick="toggleCodeBlock('cloneGroup533', 'expandBtn533', 'collapseBtn533')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn533" onclick="toggleCodeBlock('cloneGroup533', 'expandBtn533', 'collapseBtn533')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup533"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async Set</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/CollaborationService.ts (Line 8:2 - Line 23:21), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/VersionControlService.ts (Line 8:2 - Line 23:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn534" onclick="toggleCodeBlock('cloneGroup534', 'expandBtn534', 'collapseBtn534')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn534" onclick="toggleCodeBlock('cloneGroup534', 'expandBtn534', 'collapseBtn534')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup534"><code class="language-typescript text-sm text-gray-800">{
  constructor(
    // Add dependencies here
  ) {}

  async getInstance(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async if(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async CollaborationService</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/CollaborationService.ts (Line 53:15 - Line 68:4), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/services/nodeexecution/NodeExecutionService.ts (Line 83:12 - Line 98:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn535" onclick="toggleCodeBlock('cloneGroup535', 'expandBtn535', 'collapseBtn535')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn535" onclick="toggleCodeBlock('cloneGroup535', 'expandBtn535', 'collapseBtn535')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup535"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async set(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async get(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async add</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/CollaborationService.ts (Line 153:5 - Line 168:13), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/services/oauth/OAuthService.ts (Line 113:11 - Line 128:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn536" onclick="toggleCodeBlock('cloneGroup536', 'expandBtn536', 'collapseBtn536')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn536" onclick="toggleCodeBlock('cloneGroup536', 'expandBtn536', 'collapseBtn536')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup536"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async catch(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async error(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async updateCursor</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/CollaborationService.ts (Line 193:16 - Line 208:6), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/workflow/WorkflowService.ts (Line 48:5 - Line 63:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn537" onclick="toggleCodeBlock('cloneGroup537', 'expandBtn537', 'collapseBtn537')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn537" onclick="toggleCodeBlock('cloneGroup537', 'expandBtn537', 'collapseBtn537')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup537"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async all(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async countDocuments(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async round</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/CollaborationService.ts (Line 213:8 - Line 228:21), /home/margon/Reporunner/reporunner/packages/backend/src/services/cursortracking/CursorTrackingService.ts (Line 163:6 - Line 178:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn538" onclick="toggleCodeBlock('cloneGroup538', 'expandBtn538', 'collapseBtn538')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn538" onclick="toggleCodeBlock('cloneGroup538', 'expandBtn538', 'collapseBtn538')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup538"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async on(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async emit(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async CollaborationSession</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/CollaborationService.ts (Line 253:21 - Line 267:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/cursortracking/CursorTrackingService.ts (Line 178:6 - Line 193:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn539" onclick="toggleCodeBlock('cloneGroup539', 'expandBtn539', 'collapseBtn539')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn539" onclick="toggleCodeBlock('cloneGroup539', 'expandBtn539', 'collapseBtn539')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup539"><code class="language-typescript text-sm text-gray-800">(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async to(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }

  async except(input: any): Promise&lt;any&gt; {
    // Delegate to use case
    throw new Error('Not implemented');
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/permission-middleware.ts (Line 59:2 - Line 71:53), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/permission-middleware.ts (Line 32:11 - Line 44:45)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn540" onclick="toggleCodeBlock('cloneGroup540', 'expandBtn540', 'collapseBtn540')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn540" onclick="toggleCodeBlock('cloneGroup540', 'expandBtn540', 'collapseBtn540')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup540"><code class="language-typescript text-sm text-gray-800">) =&gt; {
  return async (req: Request, _res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
    try {
      if (!req.user) {
        throw new AppError('Authentication required', 401);
      }

      // Super admin has all permissions
      if (req.user.role === 'super_admin') {
        return next();
      }

      // Check if user has any of the required permissions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/WorkflowEngine.ts (Line 101:9 - Line 136:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/workflowengine/execution-management.ts (Line 1:1 - Line 39:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn541" onclick="toggleCodeBlock('cloneGroup541', 'expandBtn541', 'collapseBtn541')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn541" onclick="toggleCodeBlock('cloneGroup541', 'expandBtn541', 'collapseBtn541')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup541"><code class="language-typescript text-sm text-gray-800">await this.runExecution(workflow, execution, options.timeout);
      } else {
        // Run in background
        this.runExecution(workflow, execution, options.timeout).catch((error) =&gt; {
          this.handleExecutionError(execution, error);
        });
      }
    } catch (error) {
      this.handleExecutionError(execution, error);
    }

    return execution;
  }

  /**
   * Cancel a running execution
   */
  async cancelExecution(executionId: string): Promise&lt;boolean&gt; {
    const execution = this.activeExecutions.get(executionId);
    if (!execution || execution.status !== 'running') {
      return false;
    }

    execution.status = 'cancelled';
    execution.finishedAt = new Date();
    execution.error = 'Execution cancelled by user';

    this.activeExecutions.delete(executionId);
    this.emit('executionCancelled', execution);

    return true;
  }

  /**
   * Get execution status
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/WorkflowEngine.ts (Line 151:2 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/workflowengine/execution-management.ts (Line 60:1 - Line 111:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn542" onclick="toggleCodeBlock('cloneGroup542', 'expandBtn542', 'collapseBtn542')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn542" onclick="toggleCodeBlock('cloneGroup542', 'expandBtn542', 'collapseBtn542')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup542"><code class="language-typescript text-sm text-gray-800">runExecution(
    workflow: WorkflowDefinition,
    execution: WorkflowExecution,
    timeout?: number
  ): Promise&lt;void&gt; {
    const executionTimeout = timeout || this.options.executionTimeout;

    // Set execution timeout
    const timeoutId = setTimeout(() =&gt; {
      this.handleExecutionError(
        execution,
        new WorkflowEngineError('Execution timeout', 'EXECUTION_TIMEOUT')
      );
    }, executionTimeout);

    try {
      // Find trigger nodes (nodes with no inputs)
      const triggerNodes = workflow.nodes.filter(
        (node) =&gt; !workflow.connections.some((conn) =&gt; conn.destination.nodeId === node.id)
      );

      if (triggerNodes.length === 0) {
        throw new WorkflowEngineError('No trigger nodes found', 'NO_TRIGGER_NODES');
      }

      // Execute nodes in topological order
      const executionOrder = this.getExecutionOrder(workflow);

      for (const nodeId of executionOrder) {
        const node = workflow.nodes.find((n) =&gt; n.id === nodeId);
        if (!node) continue;

        // Check if execution was cancelled
        if (execution.status === 'cancelled') {
          return;
        }

        await this.executeNode(workflow, execution, node);
      }

      // Mark execution as successful
      execution.status = 'success';
      execution.finishedAt = new Date();

      this.emit('executionCompleted', execution);
    } catch (error) {
      this.handleExecutionError(execution, error);
    } finally {
      clearTimeout(timeoutId);
      this.activeExecutions.delete(execution.id);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/WorkflowEngine.ts (Line 201:5 - Line 251:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/workflowengine/node-execution.ts (Line 1:1 - Line 52:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn543" onclick="toggleCodeBlock('cloneGroup543', 'expandBtn543', 'collapseBtn543')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn543" onclick="toggleCodeBlock('cloneGroup543', 'expandBtn543', 'collapseBtn543')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup543"><code class="language-typescript text-sm text-gray-800">}
  }

  /**
   * Execute a single node
   */
  private async executeNode(
    workflow: WorkflowDefinition,
    execution: WorkflowExecution,
    node: any
  ): Promise&lt;void&gt; {
    const nodeExecution: NodeExecution = {
      nodeId: node.id,
      nodeName: node.name,
      status: 'running',
      startedAt: new Date(),
      inputData: {},
      outputData: {},
      retryAttempt: 0,
    };

    execution.nodeExecutions.set(node.id, nodeExecution);
    this.emit('nodeExecutionStarted', { execution, nodeExecution });

    try {
      // Get input data from previous nodes
      const inputData = await this.getNodeInputData(workflow, execution, node);
      nodeExecution.inputData = inputData;

      // Execute the node
      const result = await this.nodeExecutor.execute(node, inputData, {
        workflowId: workflow.id,
        executionId: execution.id,
        nodeId: node.id,
      });

      nodeExecution.status = 'success';
      nodeExecution.finishedAt = new Date();
      nodeExecution.outputData = result.data;

      execution.metadata.completedNodes++;

      this.emit('nodeExecutionCompleted', { execution, nodeExecution });
    } catch (error) {
      await this.handleNodeError(workflow, execution, nodeExecution, error);
    }
  }

  /**
   * Handle node execution errors with retry logic
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/WorkflowEngine.ts (Line 252:2 - Line 302:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/workflowengine/node-execution.ts (Line 55:1 - Line 106:1)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn544" onclick="toggleCodeBlock('cloneGroup544', 'expandBtn544', 'collapseBtn544')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn544" onclick="toggleCodeBlock('cloneGroup544', 'expandBtn544', 'collapseBtn544')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup544"><code class="language-typescript text-sm text-gray-800">handleNodeError(
    workflow: WorkflowDefinition,
    execution: WorkflowExecution,
    nodeExecution: NodeExecution,
    error: any
  ): Promise&lt;void&gt; {
    this.logger.error('Node execution failed', {
      executionId: execution.id,
      nodeId: nodeExecution.nodeId,
      error: error.message,
      attempt: nodeExecution.retryAttempt + 1,
    });

    // Check if we should retry
    if (nodeExecution.retryAttempt &lt; this.options.retryAttempts) {
      nodeExecution.retryAttempt++;
      execution.metadata.retriedNodes++;

      this.emit('nodeExecutionRetry', { execution, nodeExecution });

      // Exponential backoff
      const delay = 2 ** nodeExecution.retryAttempt * 1000;
      await new Promise((resolve) =&gt; setTimeout(resolve, delay));

      // Retry execution
      const node = workflow.nodes.find((n) =&gt; n.id === nodeExecution.nodeId);
      if (node) {
        await this.executeNode(workflow, execution, node);
        return;
      }
    }

    // Mark node as failed
    nodeExecution.status = 'error';
    nodeExecution.finishedAt = new Date();
    nodeExecution.error = error.message;

    execution.metadata.failedNodes++;

    this.emit('nodeExecutionFailed', { execution, nodeExecution });

    // Fail the entire execution
    throw new WorkflowEngineError(
      `Node execution failed: ${nodeExecution.nodeName}`,
      'NODE_EXECUTION_FAILED'
    );
  }

  /**
   * Handle execution errors
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/WorkflowEngine.ts (Line 303:3 - Line 319:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/workflowengine/execution-utilities.ts (Line 3:3 - Line 20:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn545" onclick="toggleCodeBlock('cloneGroup545', 'expandBtn545', 'collapseBtn545')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn545" onclick="toggleCodeBlock('cloneGroup545', 'expandBtn545', 'collapseBtn545')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup545"><code class="language-typescript text-sm text-gray-800">private handleExecutionError(execution: WorkflowExecution, error: any): void {
    this.logger.error('Workflow execution failed', {
      executionId: execution.id,
      workflowId: execution.workflowId,
      error: error.message,
    });

    execution.status = 'error';
    execution.finishedAt = new Date();
    execution.error = error.message;

    this.emit('executionFailed', execution);
  }

  /**
   * Get topological execution order for nodes
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/WorkflowEngine.ts (Line 320:3 - Line 360:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/workflowengine/execution-utilities.ts (Line 21:1 - Line 64:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn546" onclick="toggleCodeBlock('cloneGroup546', 'expandBtn546', 'collapseBtn546')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn546" onclick="toggleCodeBlock('cloneGroup546', 'expandBtn546', 'collapseBtn546')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup546"><code class="language-typescript text-sm text-gray-800">private getExecutionOrder(workflow: WorkflowDefinition): string[] {
    const visited = new Set&lt;string&gt;();
    const visiting = new Set&lt;string&gt;();
    const order: string[] = [];

    const visit = (nodeId: string) =&gt; {
      if (visiting.has(nodeId)) {
        throw new WorkflowEngineError('Circular dependency detected', 'CIRCULAR_DEPENDENCY');
      }

      if (visited.has(nodeId)) {
        return;
      }

      visiting.add(nodeId);

      // Visit dependencies first
      const dependencies = workflow.connections
        .filter((conn) =&gt; conn.destination.nodeId === nodeId)
        .map((conn) =&gt; conn.source.nodeId);

      for (const depId of dependencies) {
        visit(depId);
      }

      visiting.delete(nodeId);
      visited.add(nodeId);
      order.push(nodeId);
    };

    // Visit all nodes
    for (const node of workflow.nodes) {
      visit(node.id);
    }

    return order;
  }

  /**
   * Get input data for a node from its connections
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/WorkflowEngine.ts (Line 361:2 - Line 391:2), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/workflowengine/execution-utilities.ts (Line 67:1 - Line 99:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn547" onclick="toggleCodeBlock('cloneGroup547', 'expandBtn547', 'collapseBtn547')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn547" onclick="toggleCodeBlock('cloneGroup547', 'expandBtn547', 'collapseBtn547')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup547"><code class="language-typescript text-sm text-gray-800">getNodeInputData(
    workflow: WorkflowDefinition,
    execution: WorkflowExecution,
    node: any
  ): Promise&lt;Record&lt;string, any&gt;&gt; {
    const inputData: Record&lt;string, any&gt; = {};

    // Get data from connected nodes
    const inputConnections = workflow.connections.filter(
      (conn) =&gt; conn.destination.nodeId === node.id
    );

    for (const connection of inputConnections) {
      const sourceExecution = execution.nodeExecutions.get(connection.source.nodeId);
      if (sourceExecution?.outputData) {
        const sourceData =
          sourceExecution.outputData[connection.source.outputIndex || 0] ||
          sourceExecution.outputData;

        inputData[connection.destination.inputIndex || 0] = sourceData;
      }
    }

    // If no connections, use workflow input data
    if (inputConnections.length === 0) {
      return execution.inputData;
    }

    return inputData;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 134:5 - Line 183:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/job-management.ts (Line 42:1 - Line 100:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn548" onclick="toggleCodeBlock('cloneGroup548', 'expandBtn548', 'collapseBtn548')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn548" onclick="toggleCodeBlock('cloneGroup548', 'expandBtn548', 'collapseBtn548')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup548"><code class="language-typescript text-sm text-gray-800">} catch (error) {
      this.logger.error('Failed to start workers', { error });
      throw error;
    }
  }

  /**
   * Add workflow execution job to queue
   */
  async addWorkflowJob(
    workflow: WorkflowDefinition,
    inputData: Record&lt;string, any&gt; = {},
    options: {
      executionId?: string;
      priority?: number;
      delay?: number;
      attempts?: number;
    } = {}
  ): Promise&lt;string&gt; {
    const executionId =
      options.executionId || `exec_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;

    const jobData: WorkflowJob = {
      workflow,
      inputData,
      executionId,
      priority: options.priority,
      delay: options.delay,
      attempts: options.attempts,
    };

    const job = await this.workflowQueue.add(`workflow-${workflow.id}`, jobData, {
      priority: options.priority,
      delay: options.delay,
      attempts: options.attempts || this.options.retryAttempts,
      jobId: executionId,
    });

    this.logger.info('Workflow job added to queue', {
      jobId: job.id,
      executionId,
      workflowId: workflow.id,
    });

    return executionId;
  }

  /**
   * Get job status and details
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 184:2 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/job-management.ts (Line 102:1 - Line 122:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn549" onclick="toggleCodeBlock('cloneGroup549', 'expandBtn549', 'collapseBtn549')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn549" onclick="toggleCodeBlock('cloneGroup549', 'expandBtn549', 'collapseBtn549')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup549"><code class="language-typescript text-sm text-gray-800">getJobStatus(executionId: string): Promise&lt;{
    status: string;
    progress?: number;
    result?: any;
    error?: string;
  } | null&gt; {
    try {
      const job = await this.workflowQueue.getJob(executionId);
      if (!job) return null;

      const state = await job.getState();

      return {
        status: state,
        progress: job.progress as number,
        result: job.returnvalue,
        error: job.failedReason,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 202:5 - Line 228:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/queue-operations.ts (Line 2:1 - Line 30:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn550" onclick="toggleCodeBlock('cloneGroup550', 'expandBtn550', 'collapseBtn550')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn550" onclick="toggleCodeBlock('cloneGroup550', 'expandBtn550', 'collapseBtn550')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup550"><code class="language-typescript text-sm text-gray-800">} catch (error) {
      this.logger.error('Failed to get job status', { executionId, error });
      return null;
    }
  }

  /**
   * Cancel a job
   */
  async cancelJob(executionId: string): Promise&lt;boolean&gt; {
    try {
      const job = await this.workflowQueue.getJob(executionId);
      if (!job) return false;

      await job.remove();

      this.logger.info('Job cancelled', { executionId });
      return true;
    } catch (error) {
      this.logger.error('Failed to cancel job', { executionId, error });
      return false;
    }
  }

  /**
   * Get queue statistics
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 229:2 - Line 260:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/queue-operations.ts (Line 33:1 - Line 67:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn551" onclick="toggleCodeBlock('cloneGroup551', 'expandBtn551', 'collapseBtn551')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn551" onclick="toggleCodeBlock('cloneGroup551', 'expandBtn551', 'collapseBtn551')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup551"><code class="language-typescript text-sm text-gray-800">: Promise&lt;{
    active: number;
    waiting: number;
    completed: number;
    failed: number;
    delayed: number;
  }&gt; {
    try {
      const [active, waiting, completed, failed, delayed] = await Promise.all([
        this.workflowQueue.getActive(),
        this.workflowQueue.getWaiting(),
        this.workflowQueue.getCompleted(),
        this.workflowQueue.getFailed(),
        this.workflowQueue.getDelayed(),
      ]);

      return {
        active: active.length,
        waiting: waiting.length,
        completed: completed.length,
        failed: failed.length,
        delayed: delayed.length,
      };
    } catch (error) {
      this.logger.error('Failed to get queue stats', { error });
      throw error;
    }
  }

  /**
   * Clean up completed and failed jobs
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 261:2 - Line 283:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/queue-operations.ts (Line 69:1 - Line 94:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn552" onclick="toggleCodeBlock('cloneGroup552', 'expandBtn552', 'collapseBtn552')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn552" onclick="toggleCodeBlock('cloneGroup552', 'expandBtn552', 'collapseBtn552')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup552"><code class="language-typescript text-sm text-gray-800">cleanQueue(
    options: {
      maxAge?: number; // milliseconds
      maxCount?: number;
    } = {}
  ): Promise&lt;void&gt; {
    try {
      const maxAge = options.maxAge || 24 * 60 * 60 * 1000; // 24 hours
      const maxCount = options.maxCount || 1000;

      await this.workflowQueue.clean(maxAge, maxCount, 'completed');
      await this.workflowQueue.clean(maxAge, maxCount, 'failed');

      this.logger.info('Queue cleaned', { maxAge, maxCount });
    } catch (error) {
      this.logger.error('Failed to clean queue', { error });
      throw error;
    }
  }

  /**
   * Shutdown workers and close connections
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 284:2 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/queue-operations.ts (Line 97:1 - Line 114:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn553" onclick="toggleCodeBlock('cloneGroup553', 'expandBtn553', 'collapseBtn553')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn553" onclick="toggleCodeBlock('cloneGroup553', 'expandBtn553', 'collapseBtn553')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup553"><code class="language-typescript text-sm text-gray-800">: Promise&lt;void&gt; {
    try {
      // Close all workers
      await Promise.all(this.workers.map((worker) =&gt; worker.close()));

      // Close queue
      await this.workflowQueue.close();

      // Close Redis connection
      await this.redis.quit();

      this.logger.info('Queue manager shutdown complete');
    } catch (error) {
      this.logger.error('Error during shutdown', { error });
      throw error;
    }
  }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 305:2 - Line 337:6), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/queue-processing.ts (Line 6:1 - Line 40:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn554" onclick="toggleCodeBlock('cloneGroup554', 'expandBtn554', 'collapseBtn554')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn554" onclick="toggleCodeBlock('cloneGroup554', 'expandBtn554', 'collapseBtn554')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup554"><code class="language-typescript text-sm text-gray-800">processWorkflowJob(job: Job&lt;WorkflowJob&gt;): Promise&lt;WorkflowExecution&gt; {
    const { workflow, inputData, executionId } = job.data;

    try {
      // Update job progress
      await job.updateProgress(0);

      // Execute workflow
      const execution = await this.workflowEngine.executeWorkflow(workflow, inputData, {
        executionId,
        waitForCompletion: true,
      });

      // Update progress based on execution
      const progress = Math.round(
        (execution.metadata.completedNodes / execution.metadata.totalNodes) * 100
      );
      await job.updateProgress(progress);

      return execution;
    } catch (error) {
      this.logger.error('Workflow execution failed in queue', {
        jobId: job.id,
        executionId,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Setup event handlers for monitoring
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/QueueManager.ts (Line 338:2 - Line 355:2), /home/margon/Reporunner/reporunner/packages/@reporunner/workflow/src/execution/queuemanager/queue-processing.ts (Line 43:1 - Line 61:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn555" onclick="toggleCodeBlock('cloneGroup555', 'expandBtn555', 'collapseBtn555')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn555" onclick="toggleCodeBlock('cloneGroup555', 'expandBtn555', 'collapseBtn555')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup555"><code class="language-typescript text-sm text-gray-800">: void {
    this.workflowQueue.on('error', (error) =&gt; {
      this.logger.error('Queue error', { error });
    });

    this.redis.on('error', (error) =&gt; {
      this.logger.error('Redis error', { error });
    });

    this.redis.on('connect', () =&gt; {
      this.logger.info('Redis connected');
    });

    this.redis.on('disconnect', () =&gt; {
      this.logger.warn('Redis disconnected');
    });
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/ValidationMiddleware.ts (Line 89:5 - Line 101:5), /home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/validators/SchemaValidator.ts (Line 10:5 - Line 22:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn556" onclick="toggleCodeBlock('cloneGroup556', 'expandBtn556', 'collapseBtn556')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn556" onclick="toggleCodeBlock('cloneGroup556', 'expandBtn556', 'collapseBtn556')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup556"><code class="language-typescript text-sm text-gray-800">this.options = {
      validateQuery: false,
      validateBody: true,
      validateParams: false,
      validateHeaders: false,
      validateCookies: false,
      validateFiles: false,
      allowUnknown: false,
      stripUnknown: true,
      abortEarly: true,
      messages: {},
      ...options,
      onError: options.onError || this</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 4:2 - Line 100:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/workflow-types.ts (Line 4:2 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn557" onclick="toggleCodeBlock('cloneGroup557', 'expandBtn557', 'collapseBtn557')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn557" onclick="toggleCodeBlock('cloneGroup557', 'expandBtn557', 'collapseBtn557')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup557"><code class="language-typescript text-sm text-gray-800">{ Collection, Db, MongoClient } from 'mongodb';
import { v4 as uuidv4 } from 'uuid';

export interface WorkflowDefinition {
  id: string;
  name: string;
  description?: string;
  version: string;
  nodes: WorkflowNode[];
  edges: WorkflowEdge[];
  settings: WorkflowSettings;
  createdAt: Date;
  updatedAt: Date;
  createdBy: string;
  organizationId: string;
  tags?: string[];
  status: 'draft' | 'active' | 'archived';
  permissions: WorkflowPermissions;
}

export interface WorkflowNode {
  id: string;
  type: string;
  position: { x: number; y: number };
  data: Record&lt;string, any&gt;;
  config?: NodeConfiguration;
}

export interface NodeConfiguration {
  retryPolicy?: {
    maxAttempts: number;
    backoffMultiplier: number;
    initialInterval: number;
  };
  timeout?: number;
  skipOnError?: boolean;
}

export interface WorkflowEdge {
  id: string;
  source: string;
  target: string;
  sourceHandle?: string;
  targetHandle?: string;
  condition?: EdgeCondition;
}

export interface EdgeCondition {
  type: 'expression' | 'value' | 'status';
  expression?: string;
  value?: any;
  operator?: 'eq' | 'neq' | 'gt' | 'lt' | 'gte' | 'lte' | 'contains' | 'matches';
}

export interface WorkflowSettings {
  timeout: number;
  retries: number;
  errorHandling: 'stop' | 'continue' | 'rollback';
  scheduling?: SchedulingConfig;
  notifications?: NotificationConfig;
  monitoring?: MonitoringConfig;
}

export interface SchedulingConfig {
  type: 'cron' | 'interval' | 'webhook';
  cron?: string;
  interval?: number;
  webhook?: {
    url: string;
    secret?: string;
  };
}

export interface NotificationConfig {
  onSuccess?: string[];
  onFailure?: string[];
  channels: Array&lt;'email' | 'slack' | 'webhook'&gt;;
}

export interface MonitoringConfig {
  enableMetrics: boolean;
  enableTracing: boolean;
  alertThresholds?: {
    executionTime?: number;
    errorRate?: number;
  };
}

export interface WorkflowPermissions {
  public: boolean;
  sharedWith: string[];
  roles: Record&lt;string, string[]&gt;;
}

export interface WorkflowExecution {
  id: string;
  workflowId: string;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 101:3 - Line 153:5), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/workflow-service.ts (Line 1:1 - Line 53:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn558" onclick="toggleCodeBlock('cloneGroup558', 'expandBtn558', 'collapseBtn558')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn558" onclick="toggleCodeBlock('cloneGroup558', 'expandBtn558', 'collapseBtn558')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup558"><code class="language-typescript text-sm text-gray-800">status: 'pending' | 'running' | 'completed' | 'failed' | 'cancelled';
  startedAt: Date;
  completedAt?: Date;
  duration?: number;
  input: Record&lt;string, any&gt;;
  output?: Record&lt;string, any&gt;;
  error?: any;
  nodeExecutions: NodeExecution[];
  metadata: ExecutionMetadata;
}

export interface NodeExecution {
  nodeId: string;
  status: 'pending' | 'running' | 'completed' | 'failed' | 'skipped';
  startedAt?: Date;
  completedAt?: Date;
  input?: any;
  output?: any;
  error?: any;
  attempts: number;
}

export interface ExecutionMetadata {
  triggeredBy: string;
  triggerType: 'manual' | 'scheduled' | 'webhook' | 'api';
  environment: string;
  correlationId?: string;
}

export class WorkflowService extends EventEmitter {
  private db: Db;
  private workflows: Collection&lt;WorkflowDefinition&gt;;
  private executions: Collection&lt;WorkflowExecution&gt;;
  private cache: Redis;
  private readonly CACHE_TTL = 3600; // 1 hour

  constructor(
    private mongoClient: MongoClient,
    private redisClient: Redis
  ) {
    super();
    this.cache = redisClient;
    this.db = mongoClient.db('reporunner');
    this.workflows = this.db.collection&lt;WorkflowDefinition&gt;('workflows');
    this.executions = this.db.collection&lt;WorkflowExecution&gt;('workflow_executions');
    this.initializeIndexes();
  }

  private async initializeIndexes(): Promise&lt;void&gt; {
    try {
      // Create indexes for efficient queries
      await this.workflows.createIndex({ organizationId: 1, createdAt: -1 });
      await this.workflows.createIndex({ tags</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 153:5 - Line 179:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/workflow-service.ts (Line 53:7 - Line 80:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn559" onclick="toggleCodeBlock('cloneGroup559', 'expandBtn559', 'collapseBtn559')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn559" onclick="toggleCodeBlock('cloneGroup559', 'expandBtn559', 'collapseBtn559')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup559"><code class="language-typescript text-sm text-gray-800">: 1 });
      await this.workflows.createIndex({ status: 1 });
      await this.workflows.createIndex({ createdBy: 1 });
      await this.workflows.createIndex({ name: 'text', description: 'text' });

      await this.executions.createIndex({ workflowId: 1, startedAt: -1 });
      await this.executions.createIndex({ status: 1 });
      await this.executions.createIndex({ 'metadata.correlationId': 1 });

      logger.info('Database indexes initialized');
    } catch (error) {
      logger.error('Failed to create indexes', error);
    }
  }

  async create(
    workflow: Omit&lt;WorkflowDefinition, 'id' | 'version' | 'createdAt' | 'updatedAt'&gt;,
    userId: string
  ): Promise&lt;WorkflowDefinition&gt; {
    const newWorkflow: WorkflowDefinition = {
      ...workflow,
      id: uuidv4(),
      version: '1.0.0',
      createdAt: new Date(),
      updatedAt: new Date(),
      createdBy: userId,
      status: workflow.status || 'draft',</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 180:5 - Line 196:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/workflow-service.ts (Line 80:5 - Line 97:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn560" onclick="toggleCodeBlock('cloneGroup560', 'expandBtn560', 'collapseBtn560')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn560" onclick="toggleCodeBlock('cloneGroup560', 'expandBtn560', 'collapseBtn560')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup560"><code class="language-typescript text-sm text-gray-800">};

    try {
      // Validate workflow structure
      this.validateWorkflow(newWorkflow);

      // Save to database
      await this.workflows.insertOne(newWorkflow);

      // Cache the workflow
      await this.cacheWorkflow(newWorkflow);

      // Emit event for other services
      this.emit('workflow.created', {
        workflowId: newWorkflow.id,
        userId,
        organizationId: newWorkflow.organizationId,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 201:5 - Line 228:7), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/workflow-operations.ts (Line 1:1 - Line 30:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn561" onclick="toggleCodeBlock('cloneGroup561', 'expandBtn561', 'collapseBtn561')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn561" onclick="toggleCodeBlock('cloneGroup561', 'expandBtn561', 'collapseBtn561')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup561"><code class="language-typescript text-sm text-gray-800">} catch (error) {
      logger.error('Failed to create workflow', error);
      throw error;
    }
  }

  async get(id: string): Promise&lt;WorkflowDefinition | null&gt; {
    try {
      // Check cache first
      const cached = await this.getCachedWorkflow(id);
      if (cached) return cached;

      // Fetch from database
      const workflow = await this.workflows.findOne({ id });

      if (workflow) {
        // Cache for future requests
        await this.cacheWorkflow(workflow);
      }

      return workflow;
    } catch (error) {
      logger.error(`Failed to get workflow ${id}`, error);
      throw error;
    }
  }

  async update</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 228:2 - Line 279:7), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/workflow-operations.ts (Line 31:1 - Line 84:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn562" onclick="toggleCodeBlock('cloneGroup562', 'expandBtn562', 'collapseBtn562')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn562" onclick="toggleCodeBlock('cloneGroup562', 'expandBtn562', 'collapseBtn562')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup562"><code class="language-typescript text-sm text-gray-800">update(
    id: string,
    updates: Partial&lt;WorkflowDefinition&gt;,
    userId: string
  ): Promise&lt;WorkflowDefinition&gt; {
    try {
      const existing = await this.get(id);
      if (!existing) {
        throw new Error(`Workflow ${id} not found`);
      }

      // Check permissions
      if (!this.hasEditPermission(existing, userId)) {
        throw new Error('Insufficient permissions to edit workflow');
      }

      const updated: WorkflowDefinition = {
        ...existing,
        ...updates,
        id, // Preserve original ID
        version: this.incrementVersion(existing.version),
        updatedAt: new Date(),
      };

      // Validate updated workflow
      this.validateWorkflow(updated);

      // Save version history
      await this.saveVersionHistory(existing);

      // Update in database
      await this.workflows.replaceOne({ id }, updated);

      // Invalidate cache
      await this.invalidateCache(id);

      // Emit update event
      this.emit('workflow.updated', {
        workflowId: id,
        userId,
        changes: updates,
      });

      logger.info(`Workflow updated: ${id}`);
      return updated;
    } catch (error) {
      logger.error(`Failed to update workflow ${id}`, error);
      throw error;
    }
  }

  async delete</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 279:2 - Line 298:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/workflow-operations.ts (Line 85:1 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn563" onclick="toggleCodeBlock('cloneGroup563', 'expandBtn563', 'collapseBtn563')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn563" onclick="toggleCodeBlock('cloneGroup563', 'expandBtn563', 'collapseBtn563')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup563"><code class="language-typescript text-sm text-gray-800">delete(id: string, userId: string): Promise&lt;boolean&gt; {
    try {
      const workflow = await this.get(id);
      if (!workflow) {
        return false;
      }

      // Check permissions
      if (!this.hasDeletePermission(workflow, userId)) {
        throw new Error('Insufficient permissions to delete workflow');
      }

      // Soft delete by updating status
      await this.workflows.updateOne(
        { id },
        {
          $set: {
            status: 'archived',
            archivedAt: new Date(),
            archivedBy: userId,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 315:7 - Line 336:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/execution-management.ts (Line 17:1 - Line 45:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn564" onclick="toggleCodeBlock('cloneGroup564', 'expandBtn564', 'collapseBtn564')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn564" onclick="toggleCodeBlock('cloneGroup564', 'expandBtn564', 'collapseBtn564')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup564"><code class="language-typescript text-sm text-gray-800">logger.info(`Workflow deleted: ${id}`);
      return true;
    } catch (error) {
      logger.error(`Failed to delete workflow ${id}`, error);
      throw error;
    }
  }

  async list(
    filters: {
      organizationId?: string;
      userId?: string;
      status?: string;
      tags?: string[];
      search?: string;
    },
    pagination: {
      page: number;
      limit: number;
      sort?: Record&lt;string, 1 | -1&gt;;
    }
  ): Promise&lt;{ workflows: WorkflowDefinition[]; total: number }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 336:2 - Line 382:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/execution-management.ts (Line 46:1 - Line 97:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn565" onclick="toggleCodeBlock('cloneGroup565', 'expandBtn565', 'collapseBtn565')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn565" onclick="toggleCodeBlock('cloneGroup565', 'expandBtn565', 'collapseBtn565')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup565"><code class="language-typescript text-sm text-gray-800">}&gt; {
    try {
      const query: any = {};

      if (filters.organizationId) {
        query.organizationId = filters.organizationId;
      }

      if (filters.userId) {
        query.$or = [{ createdBy: filters.userId }, { 'permissions.sharedWith': filters.userId }];
      }

      if (filters.status) {
        query.status = filters.status;
      }

      if (filters.tags &amp;&amp; filters.tags.length &gt; 0) {
        query.tags = { $in: filters.tags };
      }

      if (filters.search) {
        query.$text = { $search: filters.search };
      }

      const skip = (pagination.page - 1) * pagination.limit;
      const sort = pagination.sort || { createdAt: -1 };

      const [workflows, total] = await Promise.all([
        this.workflows.find(query).sort(sort).skip(skip).limit(pagination.limit).toArray(),
        this.workflows.countDocuments(query),
      ]);

      return { workflows, total };
    } catch (error) {
      logger.error('Failed to list workflows', error);
      throw error;
    }
  }

  private validateWorkflow(workflow: WorkflowDefinition): void {
    // Validate workflow has at least one node
    if (!workflow.nodes || workflow.nodes.length === 0) {
      throw new Error('Workflow must have at least one node');
    }

    // Validate node IDs are unique
    const nodeIds = new Set(workflow.nodes.map((</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index.ts (Line 382:2 - Line 392:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/index/execution-management.ts (Line 97:2 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn566" onclick="toggleCodeBlock('cloneGroup566', 'expandBtn566', 'collapseBtn566')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn566" onclick="toggleCodeBlock('cloneGroup566', 'expandBtn566', 'collapseBtn566')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup566"><code class="language-typescript text-sm text-gray-800">=&gt; n.id));
    if (nodeIds.size !== workflow.nodes.length) {
      throw new Error('Duplicate node IDs found');
    }

    // Validate edges reference existing nodes
    for (const edge of workflow.edges) {
      if (!nodeIds.has(edge.source) || !nodeIds.has(edge.target)) {
        throw new Error(`Edge references non-existent node: ${edge.id}`);
      }
    }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/notification-service/src/templates.ts (Line 20:5 - Line 29:10), /home/margon/Reporunner/reporunner/packages/@reporunner/services/notification-service/src/templates.ts (Line 8:5 - Line 17:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn567" onclick="toggleCodeBlock('cloneGroup567', 'expandBtn567', 'collapseBtn567')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn567" onclick="toggleCodeBlock('cloneGroup567', 'expandBtn567', 'collapseBtn567')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup567"><code class="language-typescript text-sm text-gray-800">let result = template;
    Object.entries(variables).forEach(([key, value]) =&gt; {
      const placeholder = `{{${key}}}`;
      result = result.replace(new RegExp(placeholder, 'g'), String(value));
    });
    return result;
  }
}

export interface</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention.ts (Line 101:7 - Line 177:13), /home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention/retention-processing.ts (Line 1:1 - Line 85:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn568" onclick="toggleCodeBlock('cloneGroup568', 'expandBtn568', 'collapseBtn568')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn568" onclick="toggleCodeBlock('cloneGroup568', 'expandBtn568', 'collapseBtn568')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup568"><code class="language-typescript text-sm text-gray-800">const mockEvents: AuditEvent[] = [];
      const eligibleEvents = mockEvents.filter((event) =&gt; {
        const isOldEnough = event.timestamp &lt; cutoffDate;
        const matchesPolicy = this.eventMatchesPolicy(event, policy);
        return isOldEnough &amp;&amp; matchesPolicy;
      });

      job.eventsProcessed = eligibleEvents.length;

      for (const event of eligibleEvents) {
        if (policy.archiveBeforeDelete) {
          await this.archiveEvent(event);
          job.eventsArchived++;
        }

        await this.deleteEvent(event.id);
        job.eventsDeleted++;
      }

      job.status = 'completed';
    } catch (error) {
      job.status = 'failed';
      job.error = error instanceof Error ? error.message : 'Unknown error';
    }
  }

  getJobs(status?: RetentionJob['status']): RetentionJob[] {
    if (status) {
      return this.jobs.filter((job) =&gt; job.status === status);
    }
    return [...this.jobs];
  }

  getJob(id: string): RetentionJob | undefined {
    return this.jobs.find((job) =&gt; job.id === id);
  }

  private eventMatchesPolicy(event: AuditEvent, policy: RetentionPolicy): boolean {
    // Category-based filtering
    if (policy.category !== 'all') {
      const categoryMap: Record&lt;string, string[]&gt; = {
        security: ['login', 'logout', 'password_change', 'permission_change'],
        access: ['read', 'write', 'delete', 'admin_access'],
        data: ['data_export', 'data_import', 'data_deletion'],
        operational: ['workflow_execution', 'system_event'],
      };

      const categoryActions = categoryMap[policy.category] || [];
      if (!categoryActions.some((action) =&gt; event.action.includes(action))) {
        return false;
      }
    }

    // Custom condition filtering
    if (policy.conditions) {
      return policy.conditions.every((condition) =&gt; {
        const eventValue = this.getFieldValue(event, condition.field);

        switch (condition.operator) {
          case 'equals':
            return eventValue === condition.value;
          case 'contains':
            return String(eventValue).includes(String(condition.value));
          case 'greater_than':
            return Number(eventValue) &gt; Number(condition.value);
          case 'less_than':
            return Number(eventValue) &lt; Number(condition.value);
          default:
            return false;
        }
      });
    }

    return true;
  }

  private async archiveEvent</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention.ts (Line 182:2 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention/retention-processing.ts (Line 95:1 - Line 121:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn569" onclick="toggleCodeBlock('cloneGroup569', 'expandBtn569', 'collapseBtn569')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn569" onclick="toggleCodeBlock('cloneGroup569', 'expandBtn569', 'collapseBtn569')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup569"><code class="language-typescript text-sm text-gray-800">deleteEvent(_eventId: string): Promise&lt;void&gt; {
    // TODO: Implement event deletion from primary storage
  }

  private updateJobStatus(jobId: string, status: RetentionJob['status'], error?: string): void {
    const job = this.jobs.find((j) =&gt; j.id === jobId);
    if (job) {
      job.status = status;
      if (error) job.error = error;
    }
  }

  private getFieldValue(event: AuditEvent, field: string): any {
    const fields = field.split('.');
    let value: any = event;

    for (const f of fields) {
      value = value?.[f];
    }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention.ts (Line 194:14 - Line 205:26), /home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/index/analytics-integration.ts (Line 75:19 - Line 89:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn570" onclick="toggleCodeBlock('cloneGroup570', 'expandBtn570', 'collapseBtn570')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn570" onclick="toggleCodeBlock('cloneGroup570', 'expandBtn570', 'collapseBtn570')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup570"><code class="language-typescript text-sm text-gray-800">(event: AuditEvent, field: string): any {
    const fields = field.split('.');
    let value: any = event;

    for (const f of fields) {
      value = value?.[f];
    }

    return value;
  }

  private initializeDefaultPolicies</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention.ts (Line 202:5 - Line 235:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention/retention-policies.ts (Line 1:1 - Line 36:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn571" onclick="toggleCodeBlock('cloneGroup571', 'expandBtn571', 'collapseBtn571')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn571" onclick="toggleCodeBlock('cloneGroup571', 'expandBtn571', 'collapseBtn571')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup571"><code class="language-typescript text-sm text-gray-800">return value;
  }

  private initializeDefaultPolicies(): void {
    // Standard retention policies for different compliance requirements
    this.policies.push(
      {
        id: 'default-security',
        name: 'Security Events',
        description: 'Retain security-related events for 7 years',
        retentionPeriodDays: 2555, // 7 years
        category: 'security',
        archiveBeforeDelete: true,
      },
      {
        id: 'default-access',
        name: 'Access Logs',
        description: 'Retain access logs for 1 year',
        retentionPeriodDays: 365,
        category: 'access',
        archiveBeforeDelete: true,
      },
      {
        id: 'default-operational',
        name: 'Operational Events',
        description: 'Retain operational events for 90 days',
        retentionPeriodDays: 90,
        category: 'operational',
        archiveBeforeDelete: false,
      }
    );
  }

  private generateId():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/compliance.ts (Line 133:3 - Line 145:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/audit-service/src/retention.ts (Line 192:3 - Line 88:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn572" onclick="toggleCodeBlock('cloneGroup572', 'expandBtn572', 'collapseBtn572')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn572" onclick="toggleCodeBlock('cloneGroup572', 'expandBtn572', 'collapseBtn572')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup572"><code class="language-typescript text-sm text-gray-800">}

  private getFieldValue(event: AuditEvent, field: string): any {
    const fields = field.split('.');
    let value: any = event;

    for (const f of fields) {
      value = value?.[f];
    }

    return value;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards.ts (Line 1:1 - Line 100:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-core.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn573" onclick="toggleCodeBlock('cloneGroup573', 'expandBtn573', 'collapseBtn573')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn573" onclick="toggleCodeBlock('cloneGroup573', 'expandBtn573', 'collapseBtn573')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup573"><code class="language-typescript text-sm text-gray-800">import type { ReportDefinition } from './reports';

export interface Widget {
  id: string;
  type: 'metric' | 'chart' | 'table' | 'text';
  title: string;
  reportId: string;
  position: { x: number; y: number; width: number; height: number };
  config: Record&lt;string, any&gt;;
}

export interface Dashboard {
  id: string;
  name: string;
  description: string;
  organizationId: string;
  ownerId: string;
  widgets: Widget[];
  layout: 'grid' | 'freeform';
  shared: boolean;
  createdAt: Date;
  updatedAt: Date;
}

export interface DashboardTemplate {
  id: string;
  name: string;
  description: string;
  category: 'executive' | 'operational' | 'technical' | 'custom';
  widgets: Omit&lt;Widget, 'id'&gt;[];
  reports: ReportDefinition[];
}

export class DashboardManager {
  private dashboards = new Map&lt;string, Dashboard&gt;();
  private templates = new Map&lt;string, DashboardTemplate&gt;();

  constructor() {
    this.initializeTemplates();
  }

  async createDashboard(
    dashboard: Omit&lt;Dashboard, 'id' | 'createdAt' | 'updatedAt'&gt;
  ): Promise&lt;string&gt; {
    const newDashboard: Dashboard = {
      ...dashboard,
      id: this.generateId(),
      createdAt: new Date(),
      updatedAt: new Date(),
    };

    this.dashboards.set(newDashboard.id, newDashboard);
    return newDashboard.id;
  }

  async updateDashboard(id: string, updates: Partial&lt;Dashboard&gt;): Promise&lt;boolean&gt; {
    const existing = this.dashboards.get(id);
    if (!existing) return false;

    this.dashboards.set(id, {
      ...existing,
      ...updates,
      updatedAt: new Date(),
    });
    return true;
  }

  async deleteDashboard(id: string): Promise&lt;boolean&gt; {
    return this.dashboards.delete(id);
  }

  async getDashboard(id: string): Promise&lt;Dashboard | undefined&gt; {
    return this.dashboards.get(id);
  }

  async getDashboards(organizationId?: string, userId?: string): Promise&lt;Dashboard[]&gt; {
    const dashboards = Array.from(this.dashboards.values());

    return dashboards.filter((dashboard) =&gt; {
      const matchesOrg = !organizationId || dashboard.organizationId === organizationId;
      const matchesUser = !userId || dashboard.ownerId === userId || dashboard.shared;
      return matchesOrg &amp;&amp; matchesUser;
    });
  }

  async addWidget(dashboardId: string, widget: Omit&lt;Widget, 'id'&gt;): Promise&lt;string&gt; {
    const dashboard = this.dashboards.get(dashboardId);
    if (!dashboard) {
      throw new Error(`Dashboard not found: ${dashboardId}`);
    }

    const newWidget: Widget = {
      ...widget,
      id: this.generateId(),
    };

    dashboard.widgets.push(newWidget);
    dashboard.updatedAt = new Date();

    return newWidget.id;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards.ts (Line 101:3 - Line 123:13), /home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-operations.ts (Line 1:1 - Line 24:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn574" onclick="toggleCodeBlock('cloneGroup574', 'expandBtn574', 'collapseBtn574')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn574" onclick="toggleCodeBlock('cloneGroup574', 'expandBtn574', 'collapseBtn574')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup574"><code class="language-typescript text-sm text-gray-800">}

  async updateWidget(
    dashboardId: string,
    widgetId: string,
    updates: Partial&lt;Widget&gt;
  ): Promise&lt;boolean&gt; {
    const dashboard = this.dashboards.get(dashboardId);
    if (!dashboard) return false;

    const widgetIndex = dashboard.widgets.findIndex((w) =&gt; w.id === widgetId);
    if (widgetIndex === -1) return false;

    dashboard.widgets[widgetIndex] = {
      ...dashboard.widgets[widgetIndex],
      ...updates,
    };
    dashboard.updatedAt = new Date();

    return true;
  }

  async removeWidget</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards.ts (Line 123:2 - Line 136:19), /home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-operations.ts (Line 25:1 - Line 40:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn575" onclick="toggleCodeBlock('cloneGroup575', 'expandBtn575', 'collapseBtn575')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn575" onclick="toggleCodeBlock('cloneGroup575', 'expandBtn575', 'collapseBtn575')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup575"><code class="language-typescript text-sm text-gray-800">removeWidget(dashboardId: string, widgetId: string): Promise&lt;boolean&gt; {
    const dashboard = this.dashboards.get(dashboardId);
    if (!dashboard) return false;

    const widgetIndex = dashboard.widgets.findIndex((w) =&gt; w.id === widgetId);
    if (widgetIndex === -1) return false;

    dashboard.widgets.splice(widgetIndex, 1);
    dashboard.updatedAt = new Date();

    return true;
  }

  async createFromTemplate</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards.ts (Line 136:2 - Line 163:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-operations.ts (Line 41:1 - Line 70:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn576" onclick="toggleCodeBlock('cloneGroup576', 'expandBtn576', 'collapseBtn576')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn576" onclick="toggleCodeBlock('cloneGroup576', 'expandBtn576', 'collapseBtn576')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup576"><code class="language-typescript text-sm text-gray-800">createFromTemplate(
    templateId: string,
    organizationId: string,
    ownerId: string,
    name?: string
  ): Promise&lt;string&gt; {
    const template = this.templates.get(templateId);
    if (!template) {
      throw new Error(`Template not found: ${templateId}`);
    }

    const dashboard: Omit&lt;Dashboard, 'id' | 'createdAt' | 'updatedAt'&gt; = {
      name: name || `${template.name} Dashboard`,
      description: template.description,
      organizationId,
      ownerId,
      widgets: template.widgets.map((widget) =&gt; ({
        ...widget,
        id: this.generateId(),
      })),
      layout: 'grid',
      shared: false,
    };

    return this.createDashboard(dashboard);
  }

  getTemplates():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards.ts (Line 167:2 - Line 200:34), /home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-operations.ts (Line 78:1 - Line 112:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn577" onclick="toggleCodeBlock('cloneGroup577', 'expandBtn577', 'collapseBtn577')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn577" onclick="toggleCodeBlock('cloneGroup577', 'expandBtn577', 'collapseBtn577')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup577"><code class="language-typescript text-sm text-gray-800">: void {
    // Executive Dashboard Template
    this.templates.set('executive', {
      id: 'executive',
      name: 'Executive Overview',
      description: 'High-level metrics for executives and stakeholders',
      category: 'executive',
      widgets: [
        {
          type: 'metric',
          title: 'Total Workflows',
          reportId: 'workflow-count',
          position: { x: 0, y: 0, width: 3, height: 2 },
          config: { format: 'number' },
        },
        {
          type: 'metric',
          title: 'Active Users',
          reportId: 'active-users',
          position: { x: 3, y: 0, width: 3, height: 2 },
          config: { format: 'number' },
        },
        {
          type: 'chart',
          title: 'Workflow Executions Over Time',
          reportId: 'executions-timeline',
          position: { x: 0, y: 2, width: 6, height: 4 },
          config: { chartType: 'line' },
        },
      ],
      reports: [],
    });

    // Operational Dashboard Template</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards.ts (Line 201:5 - Line 236:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/dashboards/dashboard-templates.ts (Line 1:1 - Line 37:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn578" onclick="toggleCodeBlock('cloneGroup578', 'expandBtn578', 'collapseBtn578')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn578" onclick="toggleCodeBlock('cloneGroup578', 'expandBtn578', 'collapseBtn578')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup578"><code class="language-typescript text-sm text-gray-800">this.templates.set('operational', {
      id: 'operational',
      name: 'Operational Metrics',
      description: 'Day-to-day operational insights and performance metrics',
      category: 'operational',
      widgets: [
        {
          type: 'metric',
          title: 'Success Rate',
          reportId: 'success-rate',
          position: { x: 0, y: 0, width: 2, height: 2 },
          config: { format: 'percentage' },
        },
        {
          type: 'metric',
          title: 'Avg Execution Time',
          reportId: 'avg-execution-time',
          position: { x: 2, y: 0, width: 2, height: 2 },
          config: { format: 'duration' },
        },
        {
          type: 'table',
          title: 'Recent Failures',
          reportId: 'recent-failures',
          position: { x: 0, y: 2, width: 4, height: 4 },
          config: { maxRows: 10 },
        },
      ],
      reports: [],
    });
  }

  private generateId(): string {
    return Math.random().toString(36).substr(2, 9);
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 105:9 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/schema-validation.ts (Line 5:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn579" onclick="toggleCodeBlock('cloneGroup579', 'expandBtn579', 'collapseBtn579')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn579" onclick="toggleCodeBlock('cloneGroup579', 'expandBtn579', 'collapseBtn579')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup579"><code class="language-typescript text-sm text-gray-800">if (schema.abortEarly) {
          break;
        }
        continue;
      }

      // Apply default value if not present
      if (value === undefined &amp;&amp; rule.default !== undefined) {
        value = typeof rule.default === 'function' ? rule.default() : rule.default;
      }

      // Skip validation if value is not present and not required
      if (value === undefined || value === null) {
        continue;
      }

      // Sanitize value first if requested
      if (rule.sanitize) {
        value = sanitizeInput(value, rule);
      }

      // Validate type
      const typeError = validateType(value, rule.type);
      if (typeError) {
        errors.push({
          field: rule.field,
          message: typeError,
          value,
          location,
        });

        if (schema.abortEarly) {
          break;
        }
        continue;
      }

      // Validate constraints
      const constraintErrors = validateConstraints(value, rule);
      if (constraintErrors.length &gt; 0) {
        errors.push(
          ...constraintErrors.map((error) =&gt; ({
            field: rule.field,
            message: error,
            value,
            location,
          }))
        );

        if (schema.abortEarly) {
          break;
        }
        continue;
      }

      // Apply transformation
      if (rule.transform) {
        value = rule.transform(value);
      }

      // Store validated value
      validatedData[rule.field] = value;
    }

    // Handle unknown fields
    if (schema.stripUnknown) {
      for (const location of ['body', 'query', 'params']) {
        const source = req[location as keyof Request] as any;
        if (source &amp;&amp; typeof source === 'object') {
          const knownFields = schema.rules
            .filter((r) =&gt; (r.location || 'body') === location)
            .map((r) =&gt; r.field);

          for (const key of Object.keys(source)) {
            if (!knownFields.includes(key)) {
              if (!schema.allowUnknown) {
                errors.push({
                  field: key,
                  message: `Unknown field: ${key}`,
                  location,
                });
              }
              delete source[key];
            }
          }
        }
      }
    }

    // Return errors if any
    if (errors.length &gt; 0) {
      res.status(400).json({
        success: false,
        error: {
          code: ERROR_CODES.VALIDATION_ERROR,
          message: 'Validation failed',</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 211:1 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/input-sanitization.ts (Line 11:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn580" onclick="toggleCodeBlock('cloneGroup580', 'expandBtn580', 'collapseBtn580')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn580" onclick="toggleCodeBlock('cloneGroup580', 'expandBtn580', 'collapseBtn580')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup580"><code class="language-typescript text-sm text-gray-800">}

/**
 * Validate type of value
 */
function validateType(value: any, type?: string): string | null {
  if (!type) return null;

  switch (type) {
    case 'string':
      if (typeof value !== 'string') {
        return `Expected string, got ${typeof value}`;
      }
      break;

    case 'number':
      if (typeof value !== 'number' || Number.isNaN(value)) {
        return `Expected number, got ${typeof value}`;
      }
      break;

    case 'boolean':
      if (typeof value !== 'boolean') {
        return `Expected boolean, got ${typeof value}`;
      }
      break;

    case 'email':
      if (!validator.isEmail(value)) {
        return 'Invalid email address';
      }
      break;

    case 'url':
      if (!validator.isURL(value)) {
        return 'Invalid URL';
      }
      break;

    case 'uuid':
      if (!validator.isUUID(value)) {
        return 'Invalid UUID';
      }
      break;

    case 'json':
      try {
        JSON.parse(value);
      } catch {
        return 'Invalid JSON';
      }
      break;

    case 'array':
      if (!Array.isArray(value)) {
        return 'Expected array';
      }
      break;

    case 'object':
      if (typeof value !== 'object' || Array.isArray(value)) {
        return 'Expected object';
      }
      break;
  }

  return null;
}

/**
 * Validate constraints
 */
function validateConstraints(value: any, rule: ValidationRule): string[] {
  const errors: string[] = [];

  // Min/Max for numbers
  if (typeof value === 'number') {
    if (rule.min !== undefined &amp;&amp; value &lt; rule.min) {
      errors.push(`Value must be at least ${rule.min}`);
    }
    if (rule.max !== undefined &amp;&amp; value &gt; rule.max) {
      errors.push(`Value must be at most ${rule.max}`);
    }
  }

  // Length for strings and arrays
  if (typeof value === 'string' || Array.isArray(value)) {
    const length = value.length;
    if (rule.minLength !== undefined &amp;&amp; length &lt; rule.minLength) {
      errors.push(`Length must be at least ${rule.minLength}`);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 301:5 - Line 400:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/data-transformation.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn581" onclick="toggleCodeBlock('cloneGroup581', 'expandBtn581', 'collapseBtn581')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn581" onclick="toggleCodeBlock('cloneGroup581', 'expandBtn581', 'collapseBtn581')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup581"><code class="language-typescript text-sm text-gray-800">}
    if (rule.maxLength !== undefined &amp;&amp; length &gt; rule.maxLength) {
      errors.push(`Length must be at most ${rule.maxLength}`);
    }
  }

  // Pattern matching
  if (rule.pattern &amp;&amp; typeof value === 'string') {
    if (!rule.pattern.test(value)) {
      errors.push(`Value does not match required pattern`);
    }
  }

  // Enum validation
  if (rule.enum &amp;&amp; !rule.enum.includes(value)) {
    errors.push(`Value must be one of: ${rule.enum.join(', ')}`);
  }

  // Custom validation
  if (rule.custom) {
    const result = rule.custom(value);
    if (typeof result === 'string') {
      errors.push(result);
    } else if (!result) {
      errors.push('Custom validation failed');
    }
  }

  return errors;
}

/**
 * Sanitize input based on rules
 */
function sanitizeInput(value: any, rule: ValidationRule): any {
  if (typeof value !== 'string') return value;

  let sanitized = value;

  // Basic sanitization
  if (rule.trim) {
    sanitized = sanitized.trim();
  }

  if (rule.toLowerCase) {
    sanitized = sanitized.toLowerCase();
  }

  if (rule.toUpperCase) {
    sanitized = sanitized.toUpperCase();
  }

  if (rule.escape) {
    sanitized = validator.escape(sanitized);
  }

  if (rule.normalizeEmail &amp;&amp; rule.type === 'email') {
    sanitized = validator.normalizeEmail(sanitized) || sanitized;
  }

  // HTML sanitization
  sanitized = DOMPurify.sanitize(sanitized, {
    ALLOWED_TAGS: [],
    ALLOWED_ATTR: [],
  });

  return sanitized;
}

/**
 * Create SQL injection prevention middleware
 */
export function createSQLInjectionProtection() {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const checkValue = (value: any, _field: string): boolean =&gt; {
      if (typeof value !== 'string') return true;

      for (const pattern of SQL_INJECTION_PATTERNS) {
        if (pattern.test(value)) {
          return false;
        }
      }
      return true;
    };

    // Check all input sources
    for (const location of ['body', 'query', 'params']) {
      const source = req[location as keyof Request] as any;
      if (source &amp;&amp; typeof source === 'object') {
        for (const [key, value] of Object.entries(source)) {
          if (!checkValue(value, `${location}.${key}`)) {
            res.status(400).json({
              success: false,
              error: {
                code: ERROR_CODES.SECURITY_VIOLATION,
                message: 'Potentially malicious input detected',
              },
            });
            return;
          }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 407:1 - Line 500:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/error-handling.ts (Line 7:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn582" onclick="toggleCodeBlock('cloneGroup582', 'expandBtn582', 'collapseBtn582')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn582" onclick="toggleCodeBlock('cloneGroup582', 'expandBtn582', 'collapseBtn582')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup582"><code class="language-typescript text-sm text-gray-800">}

/**
 * Create NoSQL injection prevention middleware
 */
export function createNoSQLInjectionProtection() {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const checkValue = (value: any): boolean =&gt; {
      const valueStr = JSON.stringify(value);

      for (const pattern of NOSQL_INJECTION_PATTERNS) {
        if (pattern.test(valueStr)) {
          return false;
        }
      }

      // Check for operator injection
      if (typeof value === 'object' &amp;&amp; value !== null) {
        for (const key of Object.keys(value)) {
          if (key.startsWith('$')) {
            return false;
          }
        }
      }

      return true;
    };

    // Check body for NoSQL injection
    if (req.body &amp;&amp; !checkValue(req.body)) {
      res.status(400).json({
        success: false,
        error: {
          code: ERROR_CODES.SECURITY_VIOLATION,
          message: 'Invalid input detected',
        },
      });
      return;
    }

    next();
  };
}

/**
 * Create XSS prevention middleware
 */
export function createXSSProtection() {
  return (req: Request, _res: Response, next: NextFunction) =&gt; {
    const sanitizeValue = (value: any): any =&gt; {
      if (typeof value === 'string') {
        // Check for XSS patterns
        for (const pattern of XSS_PATTERNS) {
          if (pattern.test(value)) {
          }
        }

        // Sanitize HTML
        return DOMPurify.sanitize(value, {
          ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'a', 'p', 'br'],
          ALLOWED_ATTR: ['href'],
        });
      } else if (Array.isArray(value)) {
        return value.map(sanitizeValue);
      } else if (value &amp;&amp; typeof value === 'object') {
        const sanitized: any = {};
        for (const [key, val] of Object.entries(value)) {
          sanitized[key] = sanitizeValue(val);
        }
        return sanitized;
      }
      return value;
    };

    // Sanitize all input
    if (req.body) {
      req.body = sanitizeValue(req.body);
    }

    next();
  };
}

/**
 * Create path traversal prevention middleware
 */
export function createPathTraversalProtection() {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const checkPath = (value: string): boolean =&gt; {
      for (const pattern of PATH_TRAVERSAL_PATTERNS) {
        if (pattern.test(value)) {
          return false;
        }
      }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 504:5 - Line 533:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/validation-rules.ts (Line 4:1 - Line 34:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn583" onclick="toggleCodeBlock('cloneGroup583', 'expandBtn583', 'collapseBtn583')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn583" onclick="toggleCodeBlock('cloneGroup583', 'expandBtn583', 'collapseBtn583')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup583"><code class="language-typescript text-sm text-gray-800">// Check URL path
    if (!checkPath(req.path)) {
      res.status(400).json({
        success: false,
        error: {
          code: ERROR_CODES.SECURITY_VIOLATION,
          message: 'Invalid path',
        },
      });
      return;
    }

    // Check query parameters that might be file paths
    for (const [key, value] of Object.entries(req.query)) {
      if (typeof value === 'string' &amp;&amp; (key.includes('path') || key.includes('file'))) {
        if (!checkPath(value)) {
          res.status(400).json({
            success: false,
            error: {
              code: ERROR_CODES.SECURITY_VIOLATION,
              message: 'Invalid file path',
            },
          });
          return;
        }
      }
    }

    next();
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 534:1 - Line 600:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/validation-rules.ts (Line 34:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn584" onclick="toggleCodeBlock('cloneGroup584', 'expandBtn584', 'collapseBtn584')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn584" onclick="toggleCodeBlock('cloneGroup584', 'expandBtn584', 'collapseBtn584')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup584"><code class="language-typescript text-sm text-gray-800">}

/**
 * Create command injection prevention middleware
 */
export function createCommandInjectionProtection() {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const checkValue = (value: any): boolean =&gt; {
      if (typeof value !== 'string') return true;

      for (const pattern of COMMAND_INJECTION_PATTERNS) {
        if (pattern.test(value)) {
          return false;
        }
      }
      return true;
    };

    // Check all input that might be used in commands
    for (const location of ['body', 'query', 'params']) {
      const source = req[location as keyof Request] as any;
      if (source &amp;&amp; typeof source === 'object') {
        for (const [key, value] of Object.entries(source)) {
          if (key.includes('cmd') || key.includes('command') || key.includes('exec')) {
            if (!checkValue(value)) {
              res.status(400).json({
                success: false,
                error: {
                  code: ERROR_CODES.SECURITY_VIOLATION,
                  message: 'Invalid command',
                },
              });
              return;
            }
          }
        }
      }
    }

    next();
  };
}

/**
 * Create comprehensive security validation middleware
 */
export function createSecurityValidationMiddleware(
  options: {
    enableSQLProtection?: boolean;
    enableNoSQLProtection?: boolean;
    enableXSSProtection?: boolean;
    enablePathTraversalProtection?: boolean;
    enableCommandInjectionProtection?: boolean;
  } = {}
) {
  const middlewares: any[] = [];

  if (options.enableSQLProtection !== false) {
    middlewares.push(createSQLInjectionProtection());
  }

  if (options.enableNoSQLProtection !== false) {
    middlewares.push(createNoSQLInjectionProtection());
  }

  if (options.enableXSSProtection !== false) {
    middlewares.push(createXSSProtection());</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 601:3 - Line 697:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/validation-utilities.ts (Line 1:1 - Line 97:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn585" onclick="toggleCodeBlock('cloneGroup585', 'expandBtn585', 'collapseBtn585')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn585" onclick="toggleCodeBlock('cloneGroup585', 'expandBtn585', 'collapseBtn585')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup585"><code class="language-typescript text-sm text-gray-800">}

  if (options.enablePathTraversalProtection !== false) {
    middlewares.push(createPathTraversalProtection());
  }

  if (options.enableCommandInjectionProtection !== false) {
    middlewares.push(createCommandInjectionProtection());
  }

  return middlewares;
}

/**
 * Common validation schemas
 */
export const CommonSchemas = {
  login: {
    rules: [
      {
        field: 'email',
        type: 'email',
        required: true,
        normalizeEmail: true,
        toLowerCase: true,
        sanitize: true,
      },
      {
        field: 'password',
        type: 'string',
        required: true,
        minLength: 8,
        maxLength: 128,
      },
    ],
  },

  registration: {
    rules: [
      {
        field: 'email',
        type: 'email',
        required: true,
        normalizeEmail: true,
        toLowerCase: true,
        sanitize: true,
      },
      {
        field: 'password',
        type: 'string',
        required: true,
        minLength: 8,
        maxLength: 128,
        pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&amp;])[A-Za-z\d@$!%*?&amp;]/,
      },
      {
        field: 'name',
        type: 'string',
        required: true,
        minLength: 2,
        maxLength: 100,
        sanitize: true,
        trim: true,
      },
    ],
  },

  pagination: {
    rules: [
      {
        field: 'page',
        location: 'query',
        type: 'number',
        min: 1,
        default: 1,
        transform: (v: any) =&gt; parseInt(v, 10),
      },
      {
        field: 'limit',
        location: 'query',
        type: 'number',
        min: 1,
        max: 100,
        default: 20,
        transform: (v: any) =&gt; parseInt(v, 10),
      },
      {
        field: 'sort',
        location: 'query',
        type: 'string',
        enum: ['asc', 'desc'],
        default: 'desc',
        toLowerCase: true,
      },
    ],
  },
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers.middleware.ts (Line 110:3 - Line 200:4), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers.middleware/csp-policies.ts (Line 10:1 - Line 100:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn586" onclick="toggleCodeBlock('cloneGroup586', 'expandBtn586', 'collapseBtn586')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn586" onclick="toggleCodeBlock('cloneGroup586', 'expandBtn586', 'collapseBtn586')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup586"><code class="language-typescript text-sm text-gray-800">// Configure origin
  if (dynamicOrigin) {
    corsOptions.origin = dynamicOrigin as any;
  } else if (origins === '*') {
    corsOptions.origin = true; // Allow all origins
  } else if (Array.isArray(origins)) {
    corsOptions.origin = (origin, callback) =&gt; {
      if (!origin) {
        // Allow requests with no origin (e.g., mobile apps, Postman)
        return callback(null, true);
      }

      if (origins.includes(origin)) {
        callback(null, true);
      } else {
        callback(new Error('Not allowed by CORS'));
      }
    };
  }

  return cors(corsOptions);
}

/**
 * Create Content Security Policy middleware
 */
export function createCSPMiddleware(
  config: CSPConfig = {}
): (req: Request, res: Response, next: NextFunction) =&gt; void {
  const {
    enabled = true,
    directives = DEFAULT_CSP_DIRECTIVES,
    reportOnly = false,
    reportUri,
    upgradeInsecureRequests = true,
    blockAllMixedContent = true,
  } = config;

  return (_req: Request, res: Response, next: NextFunction) =&gt; {
    if (!enabled) {
      return next();
    }

    // Build CSP header
    const policyDirectives: string[] = [];

    // Add directives
    const mergedDirectives = { ...DEFAULT_CSP_DIRECTIVES, ...directives };

    for (const [key, value] of Object.entries(mergedDirectives)) {
      if (value === undefined || value === null) continue;

      const directiveName = key.replace(/([A-Z])/g, '-$1').toLowerCase();

      if (typeof value === 'boolean') {
        if (value) {
          policyDirectives.push(directiveName);
        }
      } else if (Array.isArray(value) &amp;&amp; value.length &gt; 0) {
        policyDirectives.push(`${directiveName} ${value.join(' ')}`);
      }
    }

    // Add upgrade-insecure-requests
    if (upgradeInsecureRequests) {
      policyDirectives.push('upgrade-insecure-requests');
    }

    // Add block-all-mixed-content
    if (blockAllMixedContent) {
      policyDirectives.push('block-all-mixed-content');
    }

    // Add report-uri if specified
    if (reportUri) {
      policyDirectives.push(`report-uri ${reportUri}`);
    }

    const policy = policyDirectives.join('; ');
    const headerName = reportOnly
      ? 'Content-Security-Policy-Report-Only'
      : 'Content-Security-Policy';

    res.setHeader(headerName, policy);
    next();
  };
}

/**
 * Create comprehensive security headers middleware
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers.middleware.ts (Line 201:1 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers.middleware/security-enforcement.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn587" onclick="toggleCodeBlock('cloneGroup587', 'expandBtn587', 'collapseBtn587')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn587" onclick="toggleCodeBlock('cloneGroup587', 'expandBtn587', 'collapseBtn587')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup587"><code class="language-typescript text-sm text-gray-800">export function createSecurityHeadersMiddleware(
  config: SecurityHeadersConfig = {}
): (req: Request, res: Response, next: NextFunction) =&gt; void {
  const { additionalHeaders = {} } = config;

  // Default security headers
  const defaultHeaders = {
    'X-Content-Type-Options': 'nosniff',
    'X-Frame-Options': 'DENY',
    'X-XSS-Protection': '1; mode=block',
    'Referrer-Policy': 'strict-origin-when-cross-origin',
    'Permissions-Policy': 'camera=(), microphone=(), geolocation=(), interest-cohort=()',
    'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload',
    ...additionalHeaders,
  };

  return (_req: Request, res: Response, next: NextFunction) =&gt; {
    // Apply security headers
    for (const [header, value] of Object.entries(defaultHeaders)) {
      res.setHeader(header, value);
    }

    // Remove potentially dangerous headers
    res.removeHeader('X-Powered-By');
    res.removeHeader('Server');

    next();
  };
}

/**
 * Create a combined security middleware with CORS, CSP, and other security headers
 */
export function createCombinedSecurityMiddleware(config: SecurityHeadersConfig = {}) {
  const corsMiddleware = createCorsMiddleware(config.cors);
  const cspMiddleware = createCSPMiddleware(config.csp);
  const securityHeadersMiddleware = createSecurityHeadersMiddleware(config);

  return [corsMiddleware, cspMiddleware, securityHeadersMiddleware];
}

/**
 * Environment-specific configurations
 */
export const SECURITY_CONFIGS = {
  development: {
    cors: {
      enabled: true,
      origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:5173'],
      credentials: true,
    },
    csp: {
      enabled: false, // Often disabled in development for hot reload
      reportOnly: true,
    },
  },
  staging: {
    cors: {
      enabled: true,
      origins: ['https://staging.reporunner.com'],
      credentials: true,
    },
    csp: {
      enabled: true,
      reportOnly: true,
      reportUri: '/api/security/csp-report',
    },
  },
  production: {
    cors: {
      enabled: true,
      origins: ['https://reporunner.com', 'https://www.reporunner.com'],
      credentials: true,
      maxAge: 86400,
    },
    csp: {
      enabled: true,
      reportOnly: false,
      reportUri: '/api/security/csp-report',
      directives: {
        defaultSrc: [&quot;'self'&quot;],
        scriptSrc: [&quot;'self'&quot;, &quot;'sha256-...'&quot;], // Add specific script hashes
        styleSrc: [&quot;'self'&quot;, &quot;'sha256-...'&quot;], // Add specific style hashes
        imgSrc: [&quot;'self'&quot;, 'https:', 'data:'],
        connectSrc: [&quot;'self'&quot;, 'https://api.reporunner.com'],
        fontSrc: [&quot;'self'&quot;, 'https://fonts.gstatic.com'],
        frameSrc: [&quot;'none'&quot;],
        frameAncestors: [&quot;'none'&quot;],
        upgradeInsecureRequests: true,
      },
    },
    additionalHeaders: {
      'Strict-Transport-Security': 'max-age=63072000; includeSubDomains; preload',
      'X-Frame-Options': 'DENY',
      'Cache-Control': 'no-store, no-cache, must-revalidate, proxy-revalidate',
      Pragma: 'no-cache',
      Expires: '0',
    },
  },
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers.middleware.ts (Line 302:1 - Line 367:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers.middleware/header-utilities.ts (Line 1:1 - Line 66:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn588" onclick="toggleCodeBlock('cloneGroup588', 'expandBtn588', 'collapseBtn588')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn588" onclick="toggleCodeBlock('cloneGroup588', 'expandBtn588', 'collapseBtn588')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup588"><code class="language-typescript text-sm text-gray-800">/**
 * Get security configuration based on environment
 */
export function getEnvironmentConfig(
  env: string = process.env.NODE_ENV || 'development'
): SecurityHeadersConfig {
  return SECURITY_CONFIGS[env as keyof typeof SECURITY_CONFIGS] || SECURITY_CONFIGS.development;
}

/**
 * CSP violation report handler
 */
export function createCSPReportHandler() {
  return async (req: Request, res: Response) =&gt; {
    const _report = req.body;

    // You could also send this to a monitoring service
    // await sendToMonitoring(report);

    res.status(204).end();
  };
}

/**
 * Nonce generator for inline scripts/styles
 */
export function generateNonce(): string {
  const crypto = require('node:crypto');
  return crypto.randomBytes(16).toString('base64');
}

/**
 * Middleware to add nonce to res.locals for CSP
 */
export function createNonceMiddleware() {
  return (_req: Request, res: Response, next: NextFunction) =&gt; {
    res.locals.nonce = generateNonce();
    next();
  };
}

/**
 * Create CSP middleware with nonce support
 */
export function createCSPWithNonce(config: CSPConfig = {}) {
  return (req: Request, res: Response, next: NextFunction) =&gt; {
    const nonce = res.locals.nonce;

    if (!nonce) {
      return next();
    }

    // Update script-src and style-src with nonce
    const updatedConfig = {
      ...config,
      directives: {
        ...config.directives,
        scriptSrc: [...(config.directives?.scriptSrc || [&quot;'self'&quot;]), `'nonce-${nonce}'`],
        styleSrc: [...(config.directives?.styleSrc || [&quot;'self'&quot;]), `'nonce-${nonce}'`],
      },
    };

    const cspMiddleware = createCSPMiddleware(updatedConfig);
    cspMiddleware(req, res, next);
  };
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/rate-limit.middleware.ts (Line 111:1 - Line 200:4), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/rate-limit.middleware/limiter-strategies.ts (Line 12:1 - Line 101:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn589" onclick="toggleCodeBlock('cloneGroup589', 'expandBtn589', 'collapseBtn589')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn589" onclick="toggleCodeBlock('cloneGroup589', 'expandBtn589', 'collapseBtn589')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup589"><code class="language-typescript text-sm text-gray-800">}

/**
 * Default key generator - uses IP address
 */
function defaultKeyGenerator(req: Request): string {
  // Try various headers that might contain the real IP
  const ip =
    req.headers['x-forwarded-for'] ||
    req.headers['x-real-ip'] ||
    req.connection.remoteAddress ||
    req.socket.remoteAddress ||
    req.ip;

  if (typeof ip === 'string') {
    // Handle comma-separated IPs (from x-forwarded-for)
    return ip.split(',')[0].trim();
  }

  if (Array.isArray(ip)) {
    return ip[0];
  }

  return 'unknown';
}

/**
 * User-based key generator
 */
export function userKeyGenerator(req: Request &amp; { user?: any }): string {
  if (req.user?.id) {
    return `user:${req.user.id}`;
  }
  return defaultKeyGenerator(req);
}

/**
 * API key-based key generator
 */
export function apiKeyGenerator(req: Request): string {
  const apiKey = req.headers['x-api-key'] || req.query.api_key;
  if (apiKey) {
    return `api:${apiKey}`;
  }
  return defaultKeyGenerator(req);
}

/**
 * Combined key generator (user + IP)
 */
export function combinedKeyGenerator(req: Request &amp; { user?: any }): string {
  const ip = defaultKeyGenerator(req);
  if (req.user?.id) {
    return `user:${req.user.id}:${ip}`;
  }
  return ip;
}

/**
 * Endpoint-specific key generator
 */
export function endpointKeyGenerator(req: Request): string {
  const base = defaultKeyGenerator(req);
  const endpoint = `${req.method}:${req.path}`;
  return `${base}:${endpoint}`;
}

/**
 * Create login rate limiter
 */
export function createLoginRateLimiter(rateLimiter: AdvancedRateLimiter) {
  return createRateLimitMiddleware(rateLimiter, {
    type: 'login',
    points: 1,
    message: 'Too many login attempts. Please try again later.',
    statusCode: 429,
    keyGenerator: (req) =&gt; {
      // Use email/username if provided, otherwise IP
      const identifier = req.body?.email || req.body?.username;
      if (identifier) {
        return `login:${identifier}`;
      }
      return `login:${defaultKeyGenerator(req)}`;
    },
  });
}

/**
 * Create API rate limiter
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/rate-limit.middleware.ts (Line 201:1 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/rate-limit.middleware/redis-integration.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn590" onclick="toggleCodeBlock('cloneGroup590', 'expandBtn590', 'collapseBtn590')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn590" onclick="toggleCodeBlock('cloneGroup590', 'expandBtn590', 'collapseBtn590')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup590"><code class="language-typescript text-sm text-gray-800">export function createApiRateLimiter(rateLimiter: AdvancedRateLimiter) {
  return createRateLimitMiddleware(rateLimiter, {
    type: 'api',
    points: 1,
    message: 'API rate limit exceeded.',
    keyGenerator: userKeyGenerator,
  });
}

/**
 * Create execution rate limiter
 */
export function createExecutionRateLimiter(rateLimiter: AdvancedRateLimiter) {
  return createRateLimitMiddleware(rateLimiter, {
    type: 'execution',
    points: 1,
    message: 'Workflow execution rate limit exceeded. Please wait before executing more workflows.',
    keyGenerator: userKeyGenerator,
  });
}

/**
 * Create upload rate limiter
 */
export function createUploadRateLimiter(rateLimiter: AdvancedRateLimiter) {
  return createRateLimitMiddleware(rateLimiter, {
    type: 'upload',
    points: 1,
    message: 'File upload rate limit exceeded.',
    keyGenerator: userKeyGenerator,
  });
}

/**
 * Create password reset rate limiter
 */
export function createPasswordResetRateLimiter(rateLimiter: AdvancedRateLimiter) {
  return createRateLimitMiddleware(rateLimiter, {
    type: 'password-reset',
    points: 1,
    message: 'Too many password reset requests. Please try again later.',
    keyGenerator: (req) =&gt; {
      const email = req.body?.email;
      if (email) {
        return `reset:${email}`;
      }
      return `reset:${defaultKeyGenerator(req)}`;
    },
  });
}

/**
 * Create webhook rate limiter
 */
export function createWebhookRateLimiter(rateLimiter: AdvancedRateLimiter) {
  return createRateLimitMiddleware(rateLimiter, {
    type: 'webhook',
    points: 1,
    message: 'Webhook rate limit exceeded.',
    keyGenerator: (req) =&gt; {
      // Use webhook ID if available
      const webhookId = req.params?.webhookId || req.headers['x-webhook-id'];
      if (webhookId) {
        return `webhook:${webhookId}`;
      }
      return `webhook:${defaultKeyGenerator(req)}`;
    },
  });
}

/**
 * Create export rate limiter
 */
export function createExportRateLimiter(rateLimiter: AdvancedRateLimiter) {
  return createRateLimitMiddleware(rateLimiter, {
    type: 'export',
    points: 1,
    message: 'Export rate limit exceeded. Please wait before exporting more data.',
    keyGenerator: userKeyGenerator,
  });
}

/**
 * Create dynamic rate limiter that adjusts based on user tier
 */
export function createTieredRateLimiter(
  rateLimiter: AdvancedRateLimiter,
  tierPoints: Record&lt;string, number&gt; = {
    free: 10,
    basic: 50,
    pro: 200,
    enterprise: 1000,
  }
) {
  return async (req: Request &amp; { user?: any }, res: Response, next: NextFunction) =&gt; {
    const tier = req.user?.tier || 'free';
    const points = tierPoints[tier] || tierPoints.free;

    const middleware = createRateLimitMiddleware(rateLimiter, {
      type: 'api',</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/rate-limit.middleware.ts (Line 307:2 - Line 350:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/rate-limit.middleware/limit-utilities.ts (Line 13:2 - Line 56:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn591" onclick="toggleCodeBlock('cloneGroup591', 'expandBtn591', 'collapseBtn591')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn591" onclick="toggleCodeBlock('cloneGroup591', 'expandBtn591', 'collapseBtn591')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup591"><code class="language-typescript text-sm text-gray-800">, {
      points,
      duration: 60,
      blockDuration: 300,
    });

    return middleware(req, res, next);
  };
}

/**
 * Create rate limit middleware for multiple limits
 */
export function createMultiRateLimiter(
  rateLimiter: AdvancedRateLimiter,
  limits: Array&lt;{ type: string; points?: number; message?: string }&gt;
) {
  return async (req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
    try {
      const key = defaultKeyGenerator(req);
      const result = await rateLimiter.checkMultipleLimits(
        limits.map((l) =&gt; ({ type: l.type, points: l.points })),
        key
      );

      if (!result.allowed &amp;&amp; result.failedLimit) {
        const failedLimitConfig = limits.find((l) =&gt; l.type === result.failedLimit);
        res.status(429).json({
          success: false,
          error: {
            code: ERROR_CODES.RATE_LIMIT_EXCEEDED,
            message: failedLimitConfig?.message || 'Rate limit exceeded',
            limitType: result.failedLimit,
          },
        });
        return;
      }

      next();
    } catch (_error) {
      next();
    }
  };
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 1:1 - Line 100:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/upload-core.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn592" onclick="toggleCodeBlock('cloneGroup592', 'expandBtn592', 'collapseBtn592')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn592" onclick="toggleCodeBlock('cloneGroup592', 'expandBtn592', 'collapseBtn592')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup592"><code class="language-typescript text-sm text-gray-800">import { exec } from 'node:child_process';
import crypto from 'node:crypto';
import fs from 'node:fs';
import path from 'node:path';
import { promisify } from 'node:util';
import { ERROR_CODES } from '@reporunner/constants';
import type { NextFunction, Request, Response } from 'express';
import multer, { type FileFilterCallback, MulterError } from 'multer';

const execAsync = promisify(exec);
const unlinkAsync = promisify(fs.unlink);
const statAsync = promisify(fs.stat);

export interface FileUploadConfig {
  destination?: string;
  maxFileSize?: number;
  maxFiles?: number;
  allowedMimeTypes?: string[];
  allowedExtensions?: string[];
  blockedExtensions?: string[];
  preserveExtension?: boolean;
  generateUniqueName?: boolean;
  scanForVirus?: boolean;
  clamavPath?: string;
  validateMagicNumbers?: boolean;
  sanitizeFilename?: boolean;
  metadata?: boolean;
  hashAlgorithm?: 'md5' | 'sha1' | 'sha256' | 'sha512';
}

export interface UploadedFile {
  fieldname: string;
  originalname: string;
  encoding: string;
  mimetype: string;
  destination: string;
  filename: string;
  path: string;
  size: number;
  hash?: string;
  metadata?: FileMetadata;
}

export interface FileMetadata {
  uploadedAt: Date;
  uploadedBy?: string;
  ipAddress?: string;
  userAgent?: string;
  virusScanResult?: {
    scanned: boolean;
    clean: boolean;
    threat?: string;
  };
}

/**
 * Magic number signatures for file type validation
 */
const MAGIC_NUMBERS: Record&lt;string, Buffer[]&gt; = {
  'image/jpeg': [Buffer.from([0xff, 0xd8, 0xff])],
  'image/png': [Buffer.from([0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a])],
  'image/gif': [Buffer.from('GIF87a'), Buffer.from('GIF89a')],
  'image/webp': [Buffer.from('RIFF'), Buffer.from('WEBP')],
  'application/pdf': [Buffer.from([0x25, 0x50, 0x44, 0x46])],
  'application/zip': [Buffer.from([0x50, 0x4b, 0x03, 0x04]), Buffer.from([0x50, 0x4b, 0x05, 0x06])],
  'application/x-rar': [Buffer.from('Rar!')],
  'application/x-7z-compressed': [Buffer.from([0x37, 0x7a, 0xbc, 0xaf, 0x27, 0x1c])],
  'application/gzip': [Buffer.from([0x1f, 0x8b])],
  'text/plain': [
    Buffer.from([0xef, 0xbb, 0xbf]),
    Buffer.from([0xff, 0xfe]),
    Buffer.from([0xfe, 0xff]),
  ],
  'application/msword': [Buffer.from([0xd0, 0xcf, 0x11, 0xe0, 0xa1, 0xb1, 0x1a, 0xe1])],
  'application/vnd.openxmlformats-officedocument': [Buffer.from([0x50, 0x4b, 0x03, 0x04])],
};

/**
 * Dangerous file extensions that should always be blocked
 */
const DANGEROUS_EXTENSIONS = [
  '.exe',
  '.dll',
  '.bat',
  '.cmd',
  '.com',
  '.scr',
  '.vbs',
  '.vbe',
  '.js',
  '.jse',
  '.ws',
  '.wsf',
  '.wsc',
  '.wsh',
  '.ps1',
  '.ps1xml',
  '.ps2',
  '.ps2xml',
  '.psc1',</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 121:1 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/file-validation.ts (Line 21:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn593" onclick="toggleCodeBlock('cloneGroup593', 'expandBtn593', 'collapseBtn593')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn593" onclick="toggleCodeBlock('cloneGroup593', 'expandBtn593', 'collapseBtn593')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup593"><code class="language-typescript text-sm text-gray-800">/**
 * Create secure file upload middleware
 */
export function createFileUploadMiddleware(config: FileUploadConfig = {}) {
  const {
    destination = '/tmp/uploads',
    maxFileSize = 10 * 1024 * 1024, // 10 MB
    maxFiles = 10,
    allowedMimeTypes = ['image/jpeg', 'image/png', 'image/gif', 'application/pdf'],
    allowedExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.pdf'],
    blockedExtensions = DANGEROUS_EXTENSIONS,
    preserveExtension = true,
    generateUniqueName = true,
    sanitizeFilename = true,
  } = config;

  // Ensure upload directory exists
  if (!fs.existsSync(destination)) {
    fs.mkdirSync(destination, { recursive: true });
  }

  // Configure multer storage
  const storage = multer.diskStorage({
    destination: (_req, _file, cb) =&gt; {
      cb(null, destination);
    },
    filename: (_req, file, cb) =&gt; {
      const sanitized = sanitizeFilename
        ? sanitizeFilenameString(file.originalname)
        : file.originalname;

      if (generateUniqueName) {
        const uniqueSuffix = `${Date.now()}-${crypto.randomBytes(6).toString('hex')}`;
        const ext = preserveExtension ? path.extname(sanitized) : '';
        cb(null, `${path.basename(sanitized, ext)}-${uniqueSuffix}${ext}`);
      } else {
        cb(null, sanitized);
      }
    },
  });

  // File filter
  const fileFilter = (_req: Request, file: Express.Multer.File, cb: FileFilterCallback) =&gt; {
    // Check MIME type
    if (allowedMimeTypes.length &gt; 0 &amp;&amp; !allowedMimeTypes.includes(file.mimetype)) {
      return cb(new Error(`File type ${file.mimetype} is not allowed`));
    }

    // Check extension
    const ext = path.extname(file.originalname).toLowerCase();

    // Block dangerous extensions
    if (blockedExtensions.includes(ext)) {
      return cb(new Error(`File extension ${ext} is blocked for security reasons`));
    }

    // Check allowed extensions
    if (allowedExtensions.length &gt; 0 &amp;&amp; !allowedExtensions.includes(ext)) {
      return cb(new Error(`File extension ${ext} is not allowed`));
    }

    // Sanitize filename for path traversal attempts
    if (file.originalname.includes('../') || file.originalname.includes('..\\')) {
      return cb(new Error('Invalid filename'));
    }

    cb(null, true);
  };

  // Create multer instance
  const upload = multer({
    storage,
    fileFilter,
    limits: {
      fileSize: maxFileSize,
      files: maxFiles,
    },
  });

  return {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 207:1 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/storage-handling.ts (Line 7:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn594" onclick="toggleCodeBlock('cloneGroup594', 'expandBtn594', 'collapseBtn594')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn594" onclick="toggleCodeBlock('cloneGroup594', 'expandBtn594', 'collapseBtn594')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup594"><code class="language-typescript text-sm text-gray-800">}

/**
 * Create upload handler with additional security checks
 */
function createUploadHandler(multerMiddleware: any, config: FileUploadConfig) {
  return [
    multerMiddleware,
    async (req: Request, res: Response, next: NextFunction) =&gt; {
      try {
        const files = req.file ? [req.file] : (req.files as Express.Multer.File[]) || [];

        if (files.length === 0) {
          return next();
        }

        // Process each uploaded file
        const processedFiles: UploadedFile[] = [];
        const errors: string[] = [];

        for (const file of files) {
          try {
            // Validate magic numbers
            if (config.validateMagicNumbers) {
              const isValid = await validateMagicNumber(file.path, file.mimetype);
              if (!isValid) {
                errors.push(`File ${file.originalname} content does not match declared MIME type`);
                await unlinkAsync(file.path);
                continue;
              }
            }

            // Scan for viruses
            let virusScanResult;
            if (config.scanForVirus) {
              virusScanResult = await scanFileForVirus(file.path, config.clamavPath);
              if (!virusScanResult.clean) {
                errors.push(
                  `File ${file.originalname} contains malware: ${virusScanResult.threat}`
                );
                await unlinkAsync(file.path);
                continue;
              }
            }

            // Calculate file hash
            let hash;
            if (config.hashAlgorithm) {
              hash = await calculateFileHash(file.path, config.hashAlgorithm);
            }

            // Create file metadata
            let metadata;
            if (config.metadata) {
              metadata = {
                uploadedAt: new Date(),
                uploadedBy: (req as any).user?.id,
                ipAddress: req.ip,
                userAgent: req.headers['user-agent'],
                virusScanResult,
              };
            }

            processedFiles.push({
              ...file,
              hash,
              metadata,
            } as UploadedFile);
          } catch (error: any) {
            errors.push(`Error processing file ${file.originalname}: ${error.message}`);
            await unlinkAsync(file.path).catch(() =&gt; {});
          }
        }

        if (errors.length &gt; 0 &amp;&amp; processedFiles.length === 0) {
          return res.status(400).json({
            success: false,
            error: {
              code: ERROR_CODES.FILE_UPLOAD_ERROR,
              message: 'File upload failed',
              details: errors,
            },
          });
        }

        // Attach processed files to request
        if (req.file) {
          req.file = processedFiles[0] as any;
        } else {
          req.files = processedFiles as any;
        }

        // Log upload audit event if audit logger is available
        if ((global as any).auditLogger) {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 301:11 - Line 319:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/security-scanning.ts (Line 1:1 - Line 20:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn595" onclick="toggleCodeBlock('cloneGroup595', 'expandBtn595', 'collapseBtn595')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn595" onclick="toggleCodeBlock('cloneGroup595', 'expandBtn595', 'collapseBtn595')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup595"><code class="language-typescript text-sm text-gray-800">await (global as any).auditLogger.log({
            type: 'FILE_UPLOADED',
            severity: 'LOW',
            userId: (req as any).user?.id,
            action: 'File upload',
            result: 'SUCCESS',
            details: {
              files: processedFiles.map((f) =&gt; ({
                filename: f.filename,
                originalname: f.originalname,
                size: f.size,
                mimetype: f.mimetype,
                hash: f.hash,
              })),
            },
          });
        }

        next();</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 325:1 - Line 400:4), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/security-scanning.ts (Line 26:1 - Line 102:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn596" onclick="toggleCodeBlock('cloneGroup596', 'expandBtn596', 'collapseBtn596')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn596" onclick="toggleCodeBlock('cloneGroup596', 'expandBtn596', 'collapseBtn596')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup596"><code class="language-typescript text-sm text-gray-800">}

/**
 * Validate magic number of file
 */
async function validateMagicNumber(filePath: string, mimeType: string): Promise&lt;boolean&gt; {
  const signatures = MAGIC_NUMBERS[mimeType];
  if (!signatures || signatures.length === 0) {
    // No signature to validate against
    return true;
  }

  const buffer = Buffer.alloc(Math.max(...signatures.map((s) =&gt; s.length)));
  const fd = fs.openSync(filePath, 'r');

  try {
    fs.readSync(fd, buffer, 0, buffer.length, 0);

    for (const signature of signatures) {
      if (buffer.slice(0, signature.length).equals(signature)) {
        return true;
      }
    }

    return false;
  } finally {
    fs.closeSync(fd);
  }
}

/**
 * Scan file for viruses using ClamAV
 */
async function scanFileForVirus(
  filePath: string,
  clamavPath?: string
): Promise&lt;{
  scanned: boolean;
  clean: boolean;
  threat?: string;
}&gt; {
  if (!clamavPath || !fs.existsSync(clamavPath)) {
    return { scanned: false, clean: true };
  }

  try {
    const { stdout, stderr } = await execAsync(`${clamavPath} --no-summary &quot;${filePath}&quot;`);

    if (stderr) {
    }

    const output = stdout.toLowerCase();
    const clean = output.includes('ok') &amp;&amp; !output.includes('found');

    if (!clean) {
      // Extract threat name
      const match = output.match(/: (.+) found/i);
      const threat = match ? match[1] : 'Unknown threat';
      return { scanned: true, clean: false, threat };
    }

    return { scanned: true, clean: true };
  } catch (error: any) {
    // ClamAV returns exit code 1 if virus is found
    if (error.code === 1) {
      const match = error.stdout?.match(/: (.+) found/i);
      const threat = match ? match[1] : 'Unknown threat';
      return { scanned: true, clean: false, threat };
    }
    return { scanned: false, clean: true };
  }
}

/**
 * Calculate file hash
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 401:1 - Line 500:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/upload-utilities.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn597" onclick="toggleCodeBlock('cloneGroup597', 'expandBtn597', 'collapseBtn597')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn597" onclick="toggleCodeBlock('cloneGroup597', 'expandBtn597', 'collapseBtn597')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup597"><code class="language-typescript text-sm text-gray-800">async function calculateFileHash(filePath: string, algorithm: string): Promise&lt;string&gt; {
  return new Promise((resolve, reject) =&gt; {
    const hash = crypto.createHash(algorithm);
    const stream = fs.createReadStream(filePath);

    stream.on('error', reject);
    stream.on('data', (chunk) =&gt; hash.update(chunk));
    stream.on('end', () =&gt; resolve(hash.digest('hex')));
  });
}

/**
 * Sanitize filename
 */
function sanitizeFilenameString(filename: string): string {
  // Remove any path components
  const basename = path.basename(filename);

  // Remove special characters except dots and hyphens
  let sanitized = basename.replace(/[^a-zA-Z0-9.-]/g, '_');

  // Remove multiple dots (prevent extension spoofing)
  sanitized = sanitized.replace(/\.{2,}/g, '_');

  // Ensure filename doesn't start with a dot (hidden file)
  if (sanitized.startsWith('.')) {
    sanitized = `_${sanitized.substring(1)}`;
  }

  // Limit length
  if (sanitized.length &gt; 255) {
    const ext = path.extname(sanitized);
    const name = path.basename(sanitized, ext);
    sanitized = name.substring(0, 255 - ext.length) + ext;
  }

  return sanitized;
}

/**
 * Create file cleanup middleware
 */
export function createFileCleanupMiddleware() {
  return async (err: any, req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
    // Clean up uploaded files on error
    if (err) {
      const files = req.file ? [req.file] : (req.files as Express.Multer.File[]) || [];

      for (const file of files) {
        try {
          await unlinkAsync(file.path);
        } catch (_error) {}
      }
    }

    // Handle multer errors
    if (err instanceof MulterError) {
      let message = 'File upload error';

      switch (err.code) {
        case 'LIMIT_FILE_SIZE':
          message = 'File too large';
          break;
        case 'LIMIT_FILE_COUNT':
          message = 'Too many files';
          break;
        case 'LIMIT_UNEXPECTED_FILE':
          message = 'Unexpected field';
          break;
      }

      res.status(400).json({
        success: false,
        error: {
          code: ERROR_CODES.FILE_UPLOAD_ERROR,
          message,
          details: err.message,
        },
      });
      return;
    }

    next(err);
  };
}

/**
 * Create file type validation middleware
 */
export function createFileTypeValidator(allowedTypes: Record&lt;string, string[]&gt;) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const files = req.file ? [req.file] : (req.files as Express.Multer.File[]) || [];

    for (const file of files) {
      const fieldTypes = allowedTypes[file.fieldname];

      if (!fieldTypes) {
        res.status(400).json({
          success: false,
          error: {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 513:2 - Line 539:7), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/metadata-processing.ts (Line 26:2 - Line 61:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn598" onclick="toggleCodeBlock('cloneGroup598', 'expandBtn598', 'collapseBtn598')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn598" onclick="toggleCodeBlock('cloneGroup598', 'expandBtn598', 'collapseBtn598')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup598"><code class="language-typescript text-sm text-gray-800">,
          },
        });
        return;
      }
    }

    next();
  };
}

/**
 * Create file size limiter per field
 */
export function createFieldSizeLimiter(limits: Record&lt;string, number&gt;) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const files = req.file ? [req.file] : (req.files as Express.Multer.File[]) || [];

    for (const file of files) {
      const limit = limits[file.fieldname];

      if (limit &amp;&amp; file.size &gt; limit) {
        res.status(400).json({
          success: false,
          error: {
            code: ERROR_CODES.FILE_TOO_LARGE,
            message: `File </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 539:25 - Line 599:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/metadata-processing.ts (Line 61:5 - Line 121:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn599" onclick="toggleCodeBlock('cloneGroup599', 'expandBtn599', 'collapseBtn599')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn599" onclick="toggleCodeBlock('cloneGroup599', 'expandBtn599', 'collapseBtn599')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup599"><code class="language-typescript text-sm text-gray-800">${file.fieldname}`,
          },
        });
        return;
      }
    }

    next();
  };
}

/**
 * Create secure file download middleware
 */
export function createSecureDownloadMiddleware(
  options: {
    basePath: string;
    allowedPaths?: string[];
    requireAuth?: boolean;
    logDownloads?: boolean;
  } = { basePath: '/uploads' }
) {
  return async (req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
    try {
      // Check authentication if required
      if (options.requireAuth &amp;&amp; !(req as any).user) {
        res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.UNAUTHORIZED,
            message: 'Authentication required',
          },
        });
        return;
      }

      // Get requested file path
      const filename = req.params.filename || req.query.filename;

      if (!filename || typeof filename !== 'string') {
        res.status(400).json({
          success: false,
          error: {
            code: ERROR_CODES.VALIDATION_ERROR,
            message: 'Filename is required',
          },
        });
        return;
      }

      // Prevent path traversal
      if (filename.includes('../') || filename.includes('..\\')) {
        res.status(400).json({
          success: false,
          error: {
            code: ERROR_CODES.SECURITY_VIOLATION,
            message: 'Invalid filename',
          },
        });
        return;
      }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 601:7 - Line 665:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware/cleanup-operations.ts (Line 1:1 - Line 67:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn600" onclick="toggleCodeBlock('cloneGroup600', 'expandBtn600', 'collapseBtn600')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn600" onclick="toggleCodeBlock('cloneGroup600', 'expandBtn600', 'collapseBtn600')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup600"><code class="language-typescript text-sm text-gray-800">const filePath = path.join(options.basePath, filename);

      // Verify file is within allowed paths
      const resolvedPath = path.resolve(filePath);
      const resolvedBase = path.resolve(options.basePath);

      if (!resolvedPath.startsWith(resolvedBase)) {
        res.status(403).json({
          success: false,
          error: {
            code: ERROR_CODES.FORBIDDEN,
            message: 'Access denied',
          },
        });
        return;
      }

      // Check if file exists
      try {
        await statAsync(resolvedPath);
      } catch (_error) {
        res.status(404).json({
          success: false,
          error: {
            code: ERROR_CODES.NOT_FOUND,
            message: 'File not found',
          },
        });
        return;
      }

      // Log download if enabled
      if (options.logDownloads &amp;&amp; (global as any).auditLogger) {
        await (global as any).auditLogger.log({
          type: 'FILE_DOWNLOADED',
          severity: 'LOW',
          userId: (req as any).user?.id,
          action: 'File download',
          result: 'SUCCESS',
          details: { filename },
        });
      }

      // Set security headers
      res.setHeader('X-Content-Type-Options', 'nosniff');
      res.setHeader('Content-Security-Policy', &quot;default-src 'none'&quot;);

      // Send file
      res.download(resolvedPath, path.basename(filename), (err) =&gt; {
        if (err) {
          if (!res.headersSent) {
            res.status(500).json({
              success: false,
              error: {
                code: ERROR_CODES.INTERNAL_ERROR,
                message: 'Failed to download file',
              },
            });
          }
        }
      });
    } catch (error) {
      next(error);
    }
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 108:7 - Line 163:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/token-validation.ts (Line 8:1 - Line 65:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn601" onclick="toggleCodeBlock('cloneGroup601', 'expandBtn601', 'collapseBtn601')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn601" onclick="toggleCodeBlock('cloneGroup601', 'expandBtn601', 'collapseBtn601')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup601"><code class="language-typescript text-sm text-gray-800">// Check role requirements
      if (roles.length &gt; 0 &amp;&amp; !roles.some((role) =&gt; user.roles?.includes(role))) {
        return res.status(403).json({
          success: false,
          error: {
            code: ERROR_CODES.FORBIDDEN,
            message: 'Insufficient role privileges',
          },
        });
      }

      // Check permission requirements
      if (permissions.length &gt; 0 &amp;&amp; !permissions.some((perm) =&gt; user.permissions?.includes(perm))) {
        return res.status(403).json({
          success: false,
          error: {
            code: ERROR_CODES.FORBIDDEN,
            message: 'Insufficient permissions',
          },
        });
      }

      // Attach user to request
      req.user = user;
      req.token = token;
      req.sessionId = user.sessionId;

      next();
    } catch (error: any) {
      if (error.message === 'Token has expired') {
        return res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.TOKEN_EXPIRED,
            message: 'Access token has expired',
          },
        });
      } else if (error.message === 'Token has been revoked') {
        return res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.TOKEN_REVOKED,
            message: 'Access token has been revoked',
          },
        });
      }

      return res.status(401).json({
        success: false,
        error: {
          code: ERROR_CODES.UNAUTHORIZED,
          message: 'Invalid authentication token',
        },
      });
    }
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 164:1 - Line 199:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/token-validation.ts (Line 65:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn602" onclick="toggleCodeBlock('cloneGroup602', 'expandBtn602', 'collapseBtn602')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn602" onclick="toggleCodeBlock('cloneGroup602', 'expandBtn602', 'collapseBtn602')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup602"><code class="language-typescript text-sm text-gray-800">}

/**
 * Create refresh token middleware
 */
export function createRefreshTokenMiddleware(sessionManager: JWTSessionManager) {
  return async (req: Request, res: Response) =&gt; {
    try {
      const refreshToken = req.body.refreshToken || req.cookies?.refresh_token;

      if (!refreshToken) {
        return res.status(400).json({
          success: false,
          error: {
            code: ERROR_CODES.BAD_REQUEST,
            message: 'Refresh token is required',
          },
        });
      }

      // Get IP and user agent for tracking
      const ipAddress =
        (req.headers['x-forwarded-for'] as string)?.split(',')[0] || req.socket.remoteAddress;
      const userAgent = req.headers['user-agent'];

      // Refresh the token
      const tokens = await sessionManager.refreshAccessToken(refreshToken, ipAddress, userAgent);

      // Set cookies if enabled
      if (req.cookies) {
        res.cookie('access_token', tokens.accessToken, {
          httpOnly: true,
          secure: process.env.NODE_ENV === 'production',
          sameSite: 'strict',
          maxAge: 15 * 60 * 1000, // 15 minutes
        });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 201:9 - Line 222:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/session-management.ts (Line 1:1 - Line 24:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn603" onclick="toggleCodeBlock('cloneGroup603', 'expandBtn603', 'collapseBtn603')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn603" onclick="toggleCodeBlock('cloneGroup603', 'expandBtn603', 'collapseBtn603')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup603"><code class="language-typescript text-sm text-gray-800">res.cookie('refresh_token', tokens.refreshToken, {
          httpOnly: true,
          secure: process.env.NODE_ENV === 'production',
          sameSite: 'strict',
          maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days
        });
      }

      return res.json({
        success: true,
        data: tokens,
      });
    } catch (error: any) {
      return res.status(401).json({
        success: false,
        error: {
          code: ERROR_CODES.UNAUTHORIZED,
          message: error.message,
        },
      });
    }
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 223:1 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/session-management.ts (Line 24:1 - Line 101:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn604" onclick="toggleCodeBlock('cloneGroup604', 'expandBtn604', 'collapseBtn604')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn604" onclick="toggleCodeBlock('cloneGroup604', 'expandBtn604', 'collapseBtn604')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup604"><code class="language-typescript text-sm text-gray-800">}

/**
 * Create logout middleware
 */
export function createLogoutMiddleware(sessionManager: JWTSessionManager) {
  return async (req: Request, res: Response) =&gt; {
    try {
      const { logoutAll = false } = req.body;

      if (!req.user) {
        return res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.UNAUTHORIZED,
            message: 'Not authenticated',
          },
        });
      }

      if (logoutAll) {
        // Revoke all user tokens
        sessionManager.revokeAllUserTokens(req.user.id);
      } else if (req.sessionId) {
        // Revoke current session
        sessionManager.revokeSession(req.sessionId);
      } else if (req.user?.tokenId) {
        // Revoke current token
        sessionManager.revokeToken(req.user.tokenId);
      }

      // Clear cookies
      if (req.cookies) {
        res.clearCookie('access_token');
        res.clearCookie('refresh_token');
      }

      return res.json({
        success: true,
        message: logoutAll ? 'All sessions have been terminated' : 'Logged out successfully',
      });
    } catch (_error: any) {
      return res.status(500).json({
        success: false,
        error: {
          code: ERROR_CODES.INTERNAL_ERROR,
          message: 'Failed to logout',
        },
      });
    }
  };
}

/**
 * Create session management middleware
 */
export function createSessionManagementMiddleware(sessionManager: JWTSessionManager) {
  return {
    // Get all user sessions
    getSessions: async (req: Request, res: Response) =&gt; {
      if (!req.user) {
        return res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.UNAUTHORIZED,
            message: 'Not authenticated',
          },
        });
      }

      const sessions = sessionManager.getUserSessions(req.user.id);

      return res.json({
        success: true,
        data: sessions.map((session) =&gt; ({
          sessionId: session.sessionId,
          createdAt: session.issuedAt,
          expiresAt: session.expiresAt,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 308:5 - Line 343:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/rbac-enforcement.ts (Line 8:1 - Line 46:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn605" onclick="toggleCodeBlock('cloneGroup605', 'expandBtn605', 'collapseBtn605')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn605" onclick="toggleCodeBlock('cloneGroup605', 'expandBtn605', 'collapseBtn605')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup605"><code class="language-typescript text-sm text-gray-800">},

    // Revoke a specific session
    revokeSession: async (req: Request, res: Response) =&gt; {
      if (!req.user) {
        return res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.UNAUTHORIZED,
            message: 'Not authenticated',
          },
        });
      }

      const { sessionId } = req.params;

      // Verify user owns this session
      const sessions = sessionManager.getUserSessions(req.user.id);
      if (!sessions.some((s) =&gt; s.sessionId === sessionId)) {
        return res.status(403).json({
          success: false,
          error: {
            code: ERROR_CODES.FORBIDDEN,
            message: 'Cannot revoke session that does not belong to you',
          },
        });
      }

      sessionManager.revokeSession(sessionId);

      return res.json({
        success: true,
        message: 'Session revoked successfully',
      });
    },
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 344:1 - Line 400:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware/rbac-enforcement.ts (Line 46:1 - Line 102:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn606" onclick="toggleCodeBlock('cloneGroup606', 'expandBtn606', 'collapseBtn606')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn606" onclick="toggleCodeBlock('cloneGroup606', 'expandBtn606', 'collapseBtn606')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup606"><code class="language-typescript text-sm text-gray-800">}

/**
 * Role-based access control middleware
 */
export function requireRole(...requiredRoles: string[]) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    if (!req.user) {
      res.status(401).json({
        success: false,
        error: {
          code: ERROR_CODES.UNAUTHORIZED,
          message: 'Authentication required',
        },
      });
      return;
    }

    if (!req.user.roles || !requiredRoles.some((role) =&gt; req.user?.roles?.includes(role))) {
      res.status(403).json({
        success: false,
        error: {
          code: ERROR_CODES.FORBIDDEN,
          message: `One of the following roles is required: ${requiredRoles.join(', ')}`,
        },
      });
      return;
    }

    next();
  };
}

/**
 * Permission-based access control middleware
 */
export function requirePermission(...requiredPermissions: string[]) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    if (!req.user) {
      res.status(401).json({
        success: false,
        error: {
          code: ERROR_CODES.UNAUTHORIZED,
          message: 'Authentication required',
        },
      });
      return;
    }

    if (
      !req.user.permissions ||
      !requiredPermissions.some((perm) =&gt; req.user?.permissions?.includes(perm))
    ) {
      res.status(403).json({
        success: false,
        error: {
          code: ERROR_CODES.FORBIDDEN,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 101:2 - Line 162:19), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/socket-manager-events.ts (Line 3:1 - Line 66:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn607" onclick="toggleCodeBlock('cloneGroup607', 'expandBtn607', 'collapseBtn607')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn607" onclick="toggleCodeBlock('cloneGroup607', 'expandBtn607', 'collapseBtn607')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup607"><code class="language-typescript text-sm text-gray-800">: void {
    this.io.on('connection', (socket: Socket) =&gt; {
      const _user = socket.data.user as IJwtPayload;
      const _sessionId = socket.data.sessionId;

      // Handle workflow room joining
      socket.on('join:workflow', async (data: { workflowId: string }) =&gt; {
        await this.handleJoinWorkflow(socket, data.workflowId);
      });

      // Handle cursor movement
      socket.on('cursor:move', (data: { x: number; y: number; nodeId?: string }) =&gt; {
        this.handleCursorMove(socket, data);
      });

      // Handle selection changes
      socket.on('selection:change', (data: { nodeIds: string[]; edgeIds: string[] }) =&gt; {
        this.handleSelectionChange(socket, data);
      });

      // Handle workflow operations (with OT)
      socket.on('operation:apply', async (operation: any) =&gt; {
        await this.handleOperation(socket, operation);
      });

      // Handle node operations
      socket.on('node:add', (data: any) =&gt; this.handleNodeAdd(socket, data));
      socket.on('node:update', (data: any) =&gt; this.handleNodeUpdate(socket, data));
      socket.on('node:delete', (data: any) =&gt; this.handleNodeDelete(socket, data));
      socket.on('node:move', (data: any) =&gt; this.handleNodeMove(socket, data));

      // Handle edge operations
      socket.on('edge:add', (data: any) =&gt; this.handleEdgeAdd(socket, data));
      socket.on('edge:update', (data: any) =&gt; this.handleEdgeUpdate(socket, data));
      socket.on('edge:delete', (data: any) =&gt; this.handleEdgeDelete(socket, data));

      // Handle comments
      socket.on('comment:add', (data: any) =&gt; this.handleCommentAdd(socket, data));
      socket.on('comment:reply', (data: any) =&gt; this.handleCommentReply(socket, data));
      socket.on('comment:resolve', (data: any) =&gt; this.handleCommentResolve(socket, data));

      // Handle typing indicators
      socket.on('typing:start', (data: { nodeId: string; field: string }) =&gt; {
        this.handleTypingStart(socket, data);
      });
      socket.on('typing:stop', (data: { nodeId: string; field: string }) =&gt; {
        this.handleTypingStop(socket, data);
      });

      // Handle disconnection
      socket.on('disconnect', () =&gt; {
        this.handleDisconnect(socket);
      });

      // Handle leaving workflow
      socket.on('leave:workflow', () =&gt; {
        this.handleLeaveWorkflow(socket);
      });
    });
  }

  private async handleJoinWorkflow</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 162:2 - Line 199:2), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/socket-manager-events.ts (Line 67:1 - Line 106:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn608" onclick="toggleCodeBlock('cloneGroup608', 'expandBtn608', 'collapseBtn608')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn608" onclick="toggleCodeBlock('cloneGroup608', 'expandBtn608', 'collapseBtn608')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup608"><code class="language-typescript text-sm text-gray-800">handleJoinWorkflow(socket: Socket, workflowId: string): Promise&lt;void&gt; {
    const user = socket.data.user as IJwtPayload;
    const sessionId = socket.data.sessionId;

    // Check permissions
    if (!this.checkWorkflowAccess(user, workflowId)) {
      socket.emit('error', { message: 'Access denied to workflow' });
      return;
    }

    // Join room
    await socket.join(`workflow:${workflowId}`);
    socket.data.workflowId = workflowId;

    // Create collaboration session
    const session: CollaborationSession = {
      workflowId,
      userId: user.sub,
      userName: user.email,
      userColor: this.generateUserColor(user.sub),
      isActive: true,
      lastActivity: new Date(),
    };

    this.sessions.set(sessionId, session);

    // Track presence
    await this.presenceTracker.addUser(workflowId, {
      userId: user.sub,
      sessionId,
      socketId: socket.id,
      userName: user.email,
      userColor: session.userColor,
      joinedAt: new Date(),
    });

    // Get current collaborators
    const collaborators = await this.presenceTracker.getUsers(workflowId);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 302:3 - Line 400:2), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager/workflow-operations.ts (Line 1:1 - Line 120:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn609" onclick="toggleCodeBlock('cloneGroup609', 'expandBtn609', 'collapseBtn609')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn609" onclick="toggleCodeBlock('cloneGroup609', 'expandBtn609', 'collapseBtn609')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup609"><code class="language-typescript text-sm text-gray-800">private handleNodeUpdate(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    // Check for conflicts
    const isLocked = this.checkNodeLock(workflowId, data.nodeId, user.sub);
    if (isLocked) {
      socket.emit('node:locked', { nodeId: data.nodeId });
      return;
    }

    // Broadcast node update
    socket.to(`workflow:${workflowId}`).emit('node:updated', {
      ...data,
      userId: user.sub,
      timestamp: new Date(),
    });
  }

  private handleNodeDelete(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('node:deleted', {
      ...data,
      userId: user.sub,
      timestamp: new Date(),
    });
  }

  private handleNodeMove(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('node:moved', {
      ...data,
      userId: user.sub,
      timestamp: new Date(),
    });
  }

  private handleEdgeAdd(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('edge:added', {
      ...data,
      userId: user.sub,
      timestamp: new Date(),
    });
  }

  private handleEdgeUpdate(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('edge:updated', {
      ...data,
      userId: user.sub,
      timestamp: new Date(),
    });
  }

  private handleEdgeDelete(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('edge:deleted', {
      ...data,
      userId: user.sub,
      timestamp: new Date(),
    });
  }

  private handleCommentAdd(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    const comment = {
      id: `comment-${Date.now()}`,
      ...data,
      userId: user.sub,
      userName: user.email,
      timestamp: new Date(),
    };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 451:17 - Line 458:17), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 436:18 - Line 443:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn610" onclick="toggleCodeBlock('cloneGroup610', 'expandBtn610', 'collapseBtn610')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn610" onclick="toggleCodeBlock('cloneGroup610', 'expandBtn610', 'collapseBtn610')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup610"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: { nodeId: string; field: string }): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;
    const sessionId = socket.data.sessionId;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('typing:stopped'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 188:9 - Line 202:2), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 42:5 - Line 57:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn611" onclick="toggleCodeBlock('cloneGroup611', 'expandBtn611', 'collapseBtn611')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn611" onclick="toggleCodeBlock('cloneGroup611', 'expandBtn611', 'collapseBtn611')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup611"><code class="language-typescript text-sm text-gray-800">if (op1.timestamp &gt; op2.timestamp) {
          return {
            operation1: op1,
            operation2: { ...op2, data: null },
            conflict: true,
          };
        } else {
          return {
            operation1: { ...op1, data: null },
            operation2: op2,
            conflict: true,
          };
        }
      }
    }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 201:7 - Line 233:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 1:1 - Line 34:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn612" onclick="toggleCodeBlock('cloneGroup612', 'expandBtn612', 'collapseBtn612')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn612" onclick="toggleCodeBlock('cloneGroup612', 'expandBtn612', 'collapseBtn612')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup612"><code class="language-typescript text-sm text-gray-800">}
    }

    return { operation1: op1, operation2: op2, conflict: false };
  }

  /**
   * Transform NODE_DELETE operations
   */
  private transformNodeDelete(op1: Operation, op2: Operation): TransformResult {
    // Both deleting same node - one becomes no-op
    if (op1.path[0] === op2.path[0]) {
      if (op1.timestamp &lt; op2.timestamp) {
        return {
          operation1: op1,
          operation2: { ...op2, type: OperationType.NODE_ADD },
          conflict: false,
        };
      } else {
        return {
          operation1: { ...op1, type: OperationType.NODE_ADD },
          operation2: op2,
          conflict: false,
        };
      }
    }

    return { operation1: op1, operation2: op2, conflict: false };
  }

  /**
   * Transform NODE_MOVE operations
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 234:3 - Line 258:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 35:1 - Line 62:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn613" onclick="toggleCodeBlock('cloneGroup613', 'expandBtn613', 'collapseBtn613')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn613" onclick="toggleCodeBlock('cloneGroup613', 'expandBtn613', 'collapseBtn613')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup613"><code class="language-typescript text-sm text-gray-800">private transformNodeMove(op1: Operation, op2: Operation): TransformResult {
    // Moving same node
    if (op1.path[0] === op2.path[0]) {
      // Last move wins
      if (op1.timestamp &gt; op2.timestamp) {
        return {
          operation1: op1,
          operation2: { ...op2, data: null },
          conflict: true,
        };
      } else {
        return {
          operation1: { ...op1, data: null },
          operation2: op2,
          conflict: true,
        };
      }
    }

    return { operation1: op1, operation2: op2, conflict: false };
  }

  /**
   * Transform TEXT_INSERT operations
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 259:3 - Line 289:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 63:1 - Line 96:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn614" onclick="toggleCodeBlock('cloneGroup614', 'expandBtn614', 'collapseBtn614')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn614" onclick="toggleCodeBlock('cloneGroup614', 'expandBtn614', 'collapseBtn614')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup614"><code class="language-typescript text-sm text-gray-800">private transformTextInsert(op1: Operation, op2: Operation): TransformResult {
    if (op1.path.join('.') !== op2.path.join('.')) {
      return { operation1: op1, operation2: op2, conflict: false };
    }

    const pos1 = op1.position || 0;
    const pos2 = op2.position || 0;
    const len1 = op1.data?.text?.length || 0;
    const len2 = op2.data?.text?.length || 0;

    if (pos1 &lt; pos2) {
      // op1 is before op2, shift op2's position
      op2.position = pos2 + len1;
    } else if (pos1 &gt; pos2) {
      // op2 is before op1, shift op1's position
      op1.position = pos1 + len2;
    } else {
      // Same position - tie break by user ID
      if (op1.userId &lt; op2.userId) {
        op2.position = pos2 + len1;
      } else {
        op1.position = pos1 + len2;
      }
    }

    return { operation1: op1, operation2: op2, conflict: false };
  }

  /**
   * Transform TEXT_DELETE operations
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 290:3 - Line 300:14), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/transform-algorithms.ts (Line 97:1 - Line 110:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn615" onclick="toggleCodeBlock('cloneGroup615', 'expandBtn615', 'collapseBtn615')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn615" onclick="toggleCodeBlock('cloneGroup615', 'expandBtn615', 'collapseBtn615')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup615"><code class="language-typescript text-sm text-gray-800">private transformTextDelete(op1: Operation, op2: Operation): TransformResult {
    if (op1.path.join('.') !== op2.path.join('.')) {
      return { operation1: op1, operation2: op2, conflict: false };
    }

    const start1 = op1.position || 0;
    const end1 = start1 + (op1.length || 0);
    const start2 = op2.position || 0;
    const end2 = start2 + (op2.length || 0);

    // No overlap</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 301:5 - Line 356:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/conflict-resolution.ts (Line 1:1 - Line 57:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn616" onclick="toggleCodeBlock('cloneGroup616', 'expandBtn616', 'collapseBtn616')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn616" onclick="toggleCodeBlock('cloneGroup616', 'expandBtn616', 'collapseBtn616')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup616"><code class="language-typescript text-sm text-gray-800">if (end1 &lt;= start2) {
      // op1 is before op2
      op2.position = start2 - (end1 - start1);
    } else if (end2 &lt;= start1) {
      // op2 is before op1
      op1.position = start1 - (end2 - start2);
    } else {
      // Overlapping deletes
      const overlapStart = Math.max(start1, start2);
      const overlapEnd = Math.min(end1, end2);
      const overlapLength = overlapEnd - overlapStart;

      if (start1 &lt; start2) {
        op1.length = (op1.length || 0) - overlapLength;
        op2.position = start1;
        op2.length = (op2.length || 0) - overlapLength;
      } else {
        op2.length = (op2.length || 0) - overlapLength;
        op1.position = start2;
        op1.length = (op1.length || 0) - overlapLength;
      }
    }

    return { operation1: op1, operation2: op2, conflict: false };
  }

  /**
   * Transform ARRAY_INSERT operations
   */
  private transformArrayInsert(op1: Operation, op2: Operation): TransformResult {
    if (op1.path.join('.') !== op2.path.join('.')) {
      return { operation1: op1, operation2: op2, conflict: false };
    }

    const index1 = op1.position || 0;
    const index2 = op2.position || 0;

    if (index1 &lt; index2) {
      op2.position = index2 + 1;
    } else if (index1 &gt; index2) {
      op1.position = index1 + 1;
    } else {
      // Same index - tie break by user ID
      if (op1.userId &lt; op2.userId) {
        op2.position = index2 + 1;
      } else {
        op1.position = index1 + 1;
      }
    }

    return { operation1: op1, operation2: op2, conflict: false };
  }

  /**
   * Transform ARRAY_DELETE operations
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 357:3 - Line 391:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/conflict-resolution.ts (Line 58:1 - Line 95:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn617" onclick="toggleCodeBlock('cloneGroup617', 'expandBtn617', 'collapseBtn617')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn617" onclick="toggleCodeBlock('cloneGroup617', 'expandBtn617', 'collapseBtn617')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup617"><code class="language-typescript text-sm text-gray-800">private transformArrayDelete(op1: Operation, op2: Operation): TransformResult {
    if (op1.path.join('.') !== op2.path.join('.')) {
      return { operation1: op1, operation2: op2, conflict: false };
    }

    const index1 = op1.position || 0;
    const index2 = op2.position || 0;

    if (index1 &lt; index2) {
      op2.position = index2 - 1;
    } else if (index1 &gt; index2) {
      op1.position = index1 - 1;
    } else {
      // Same index - one becomes no-op
      if (op1.timestamp &lt; op2.timestamp) {
        return {
          operation1: op1,
          operation2: { ...op2, type: OperationType.ARRAY_INSERT },
          conflict: false,
        };
      } else {
        return {
          operation1: { ...op1, type: OperationType.ARRAY_INSERT },
          operation2: op2,
          conflict: false,
        };
      }
    }

    return { operation1: op1, operation2: op2, conflict: false };
  }

  /**
   * Transform operation against pending operations
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 392:3 - Line 400:2), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/conflict-resolution.ts (Line 96:1 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn618" onclick="toggleCodeBlock('cloneGroup618', 'expandBtn618', 'collapseBtn618')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn618" onclick="toggleCodeBlock('cloneGroup618', 'expandBtn618', 'collapseBtn618')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup618"><code class="language-typescript text-sm text-gray-800">private transformAgainstPending(operation: Operation): Operation {
    const userPending = this.pendingOperations.get(operation.userId) || [];
    let transformedOp = operation;

    for (const pendingOp of userPending) {
      const result = this.transform(transformedOp, pendingOp);
      transformedOp = result.operation1;

      if (result.conflict) {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 401:9 - Line 465:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/operation-validation.ts (Line 1:1 - Line 66:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn619" onclick="toggleCodeBlock('cloneGroup619', 'expandBtn619', 'collapseBtn619')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn619" onclick="toggleCodeBlock('cloneGroup619', 'expandBtn619', 'collapseBtn619')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup619"><code class="language-typescript text-sm text-gray-800">this.emit('conflict:detected', {
          operation1: transformedOp,
          operation2: pendingOp,
          userId: operation.userId,
        });
      }
    }

    return transformedOp;
  }

  /**
   * Create inverse operation for undo
   */
  private createInverseOperation(operation: Operation): Operation {
    const inverse: Operation = {
      ...operation,
      id: `inverse_${operation.id}`,
      timestamp: Date.now(),
    };

    switch (operation.type) {
      case OperationType.NODE_ADD:
        inverse.type = OperationType.NODE_DELETE;
        break;

      case OperationType.NODE_DELETE:
        inverse.type = OperationType.NODE_ADD;
        break;

      case OperationType.TEXT_INSERT:
        inverse.type = OperationType.TEXT_DELETE;
        inverse.length = operation.data?.text?.length || 0;
        break;

      case OperationType.TEXT_DELETE:
        inverse.type = OperationType.TEXT_INSERT;
        break;

      case OperationType.ARRAY_INSERT:
        inverse.type = OperationType.ARRAY_DELETE;
        break;

      case OperationType.ARRAY_DELETE:
        inverse.type = OperationType.ARRAY_INSERT;
        break;

      case OperationType.NODE_MOVE:
        // Swap from and to positions
        inverse.from = operation.to;
        inverse.to = operation.from;
        break;

      case OperationType.PROPERTY_SET:
        // Store old value if available
        inverse.data = operation.data?.oldValue;
        break;
    }

    return inverse;
  }

  /**
   * Add operation to history
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 466:3 - Line 482:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/operation-validation.ts (Line 67:1 - Line 86:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn620" onclick="toggleCodeBlock('cloneGroup620', 'expandBtn620', 'collapseBtn620')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn620" onclick="toggleCodeBlock('cloneGroup620', 'expandBtn620', 'collapseBtn620')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup620"><code class="language-typescript text-sm text-gray-800">private addToHistory(operation: Operation, inverseOperation: Operation): void {
    this.operationHistory.push({
      operation,
      inverseOperation,
      timestamp: operation.timestamp,
      userId: operation.userId,
    });

    // Trim history if needed
    if (this.operationHistory.length &gt; this.maxHistorySize) {
      this.operationHistory.shift();
    }
  }

  /**
   * Validate operation
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 483:3 - Line 500:2), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/operation-validation.ts (Line 87:1 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn621" onclick="toggleCodeBlock('cloneGroup621', 'expandBtn621', 'collapseBtn621')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn621" onclick="toggleCodeBlock('cloneGroup621', 'expandBtn621', 'collapseBtn621')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup621"><code class="language-typescript text-sm text-gray-800">private validateOperation(operation: Operation): void {
    if (!operation.id) {
      throw new Error('Operation must have an ID');
    }

    if (!operation.type) {
      throw new Error('Operation must have a type');
    }

    if (!operation.userId) {
      throw new Error('Operation must have a user ID');
    }

    if (!operation.timestamp) {
      operation.timestamp = Date.now();
    }

    if (operation.version === undefined) {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine.ts (Line 515:3 - Line 536:6), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/operational-transform/operation-engine/operation-utilities.ts (Line 16:1 - Line 39:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn622" onclick="toggleCodeBlock('cloneGroup622', 'expandBtn622', 'collapseBtn622')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn622" onclick="toggleCodeBlock('cloneGroup622', 'expandBtn622', 'collapseBtn622')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup622"><code class="language-typescript text-sm text-gray-800">undo(userId: string): Operation | null {
    // Find last operation by user
    const lastOpIndex = this.operationHistory.findLastIndex((entry) =&gt; entry.userId === userId);

    if (lastOpIndex === -1) {
      return null;
    }

    const entry = this.operationHistory[lastOpIndex];

    // Apply inverse operation
    const undoOp = this.applyOperation(entry.inverseOperation);

    // Remove from history
    this.operationHistory.splice(lastOpIndex, 1);

    return undoOp;
  }

  /**
   * Get operation history
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration.ts (Line 156:2 - Line 179:6), /home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration/integration-execution.ts (Line 74:1 - Line 99:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn623" onclick="toggleCodeBlock('cloneGroup623', 'expandBtn623', 'collapseBtn623')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn623" onclick="toggleCodeBlock('cloneGroup623', 'expandBtn623', 'collapseBtn623')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup623"><code class="language-typescript text-sm text-gray-800">executeTrigger(triggerName: string, properties: Record&lt;string, any&gt;): Promise&lt;any&gt; {
    const trigger = this.triggers.get(triggerName);
    if (!trigger) {
      throw new Error(`Trigger ${triggerName} not found`);
    }

    // Validate properties
    const validatedProps = trigger.properties.parse(properties);

    // Execute trigger implementation
    const methodName = `trigger_${triggerName}`;
    if (typeof (this as any)[methodName] !== 'function') {
      throw new Error(`Trigger implementation ${methodName} not found`);
    }

    const result = await (this as any)[methodName](validatedProps);

    // Validate output
    return trigger.outputSchema.parse(result);
  }

  /**
   * Execute an action
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration.ts (Line 180:2 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration/integration-execution.ts (Line 101:1 - Line 123:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn624" onclick="toggleCodeBlock('cloneGroup624', 'expandBtn624', 'collapseBtn624')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn624" onclick="toggleCodeBlock('cloneGroup624', 'expandBtn624', 'collapseBtn624')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup624"><code class="language-typescript text-sm text-gray-800">executeAction(
    actionName: string,
    input: Record&lt;string, any&gt;,
    properties: Record&lt;string, any&gt;
  ): Promise&lt;any&gt; {
    const action = this.actions.get(actionName);
    if (!action) {
      throw new Error(`Action ${actionName} not found`);
    }

    // Validate input and properties
    const validatedInput = action.inputSchema.parse(input);
    const validatedProps = action.properties.parse(properties);

    // Check rate limiting
    if (this.rateLimiter) {
      await this.rateLimiter.checkLimit();
    }

    // Execute action implementation
    const methodName = `action_${actionName}`;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration.ts (Line 201:5 - Line 224:6), /home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration/integration-utilities.ts (Line 1:1 - Line 25:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn625" onclick="toggleCodeBlock('cloneGroup625', 'expandBtn625', 'collapseBtn625')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn625" onclick="toggleCodeBlock('cloneGroup625', 'expandBtn625', 'collapseBtn625')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup625"><code class="language-typescript text-sm text-gray-800">if (typeof (this as any)[methodName] !== 'function') {
      throw new Error(`Action implementation ${methodName} not found`);
    }

    const result = await (this as any)[methodName](validatedInput, validatedProps);

    // Validate output
    return action.outputSchema.parse(result);
  }

  /**
   * Handle webhook
   */
  async handleWebhook?(
    _headers: Record&lt;string, string&gt;,
    _body: any,
    _query?: Record&lt;string, string&gt;
  ): Promise&lt;any&gt; {
    throw new Error('Webhook handling not implemented');
  }

  /**
   * Validate webhook signature
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration.ts (Line 260:3 - Line 269:6), /home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration/integration-utilities.ts (Line 70:1 - Line 82:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn626" onclick="toggleCodeBlock('cloneGroup626', 'expandBtn626', 'collapseBtn626')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn626" onclick="toggleCodeBlock('cloneGroup626', 'expandBtn626', 'collapseBtn626')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup626"><code class="language-typescript text-sm text-gray-800">protected log(level: string, message: string, data?: any): void {
    if (this.context?.logger) {
      this.context.logger[level](message, data);
    }
    this.emit('log', { level, message, data });
  }

  /**
   * Handle errors
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration.ts (Line 270:3 - Line 280:2), /home/margon/Reporunner/reporunner/packages/@reporunner/plugin-framework/src/base/base-integration/integration-utilities.ts (Line 83:1 - Line 96:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn627" onclick="toggleCodeBlock('cloneGroup627', 'expandBtn627', 'collapseBtn627')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn627" onclick="toggleCodeBlock('cloneGroup627', 'expandBtn627', 'collapseBtn627')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup627"><code class="language-typescript text-sm text-gray-800">protected handleError(error: any): never {
    this.log('error', 'Integration error', {
      integration: this.metadata.name,
      error: error.message,
      stack: error.stack,
    });
    throw error;
  }
}

export default BaseIntegration;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 102:3 - Line 123:16), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/state-management.ts (Line 2:1 - Line 24:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn628" onclick="toggleCodeBlock('cloneGroup628', 'expandBtn628', 'collapseBtn628')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn628" onclick="toggleCodeBlock('cloneGroup628', 'expandBtn628', 'collapseBtn628')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup628"><code class="language-typescript text-sm text-gray-800">): Promise&lt;boolean&gt; {
    const state = this.states.get(executionId);
    if (!state) return false;

    // Merge updates
    Object.assign(state, updates);

    // Update execution tracking
    if (
      updates.status === 'completed' ||
      updates.status === 'failed' ||
      updates.status === 'cancelled'
    ) {
      state.endTime = new Date();
      this.stopSnapshotting(executionId);
      await this.createSnapshot(executionId, 'completion');
    }

    return true;
  }

  async updateNodeState</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 123:2 - Line 153:18), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/state-management.ts (Line 25:1 - Line 57:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn629" onclick="toggleCodeBlock('cloneGroup629', 'expandBtn629', 'collapseBtn629')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn629" onclick="toggleCodeBlock('cloneGroup629', 'expandBtn629', 'collapseBtn629')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup629"><code class="language-typescript text-sm text-gray-800">updateNodeState(
    executionId: string,
    nodeId: string,
    nodeState: Partial&lt;NodeState&gt;
  ): Promise&lt;boolean&gt; {
    const state = this.states.get(executionId);
    if (!state) return false;

    const existingNodeState = state.nodeStates.get(nodeId) || {
      nodeId,
      status: 'pending',
      retryCount: 0,
    };

    const updatedNodeState = { ...existingNodeState, ...nodeState };
    state.nodeStates.set(nodeId, updatedNodeState);

    // Update current node if running
    if (nodeState.status === 'running') {
      state.currentNode = nodeId;
    }

    // Add to executed nodes if completed
    if (nodeState.status === 'completed' &amp;&amp; !state.executedNodes.includes(nodeId)) {
      state.executedNodes.push(nodeId);
    }

    return true;
  }

  async getExecutionState</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 153:2 - Line 167:13), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/state-management.ts (Line 58:1 - Line 74:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn630" onclick="toggleCodeBlock('cloneGroup630', 'expandBtn630', 'collapseBtn630')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn630" onclick="toggleCodeBlock('cloneGroup630', 'expandBtn630', 'collapseBtn630')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup630"><code class="language-typescript text-sm text-gray-800">getExecutionState(executionId: string): Promise&lt;WorkflowState | undefined&gt; {
    let state = this.states.get(executionId);

    // If not in memory, try to load from persistence layer
    if (!state) {
      state = await this.loadFromPersistence(executionId);
      if (state) {
        this.states.set(executionId, state);
      }
    }

    return state;
  }

  async getNodeState</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 172:2 - Line 199:2), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/state-management.ts (Line 83:1 - Line 112:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn631" onclick="toggleCodeBlock('cloneGroup631', 'expandBtn631', 'collapseBtn631')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn631" onclick="toggleCodeBlock('cloneGroup631', 'expandBtn631', 'collapseBtn631')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup631"><code class="language-typescript text-sm text-gray-800">queryStates(query: StateQuery): Promise&lt;WorkflowState[]&gt; {
    let states = Array.from(this.states.values());

    // Apply filters
    if (query.workflowId) {
      states = states.filter((s) =&gt; s.workflowId === query.workflowId);
    }

    if (query.organizationId) {
      states = states.filter((s) =&gt; s.organizationId === query.organizationId);
    }

    if (query.status) {
      states = states.filter((s) =&gt; s.status === query.status);
    }

    if (query.startTime) {
      if (query.startTime.from) {
        states = states.filter((s) =&gt; s.startTime &gt;= query.startTime?.from!);
      }
      if (query.startTime.to) {
        states = states.filter((s) =&gt; s.startTime &lt;= query.startTime?.to!);
      }
    }

    // Apply pagination
    const offset = query.offset || 0;
    const limit = query.limit || 100;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 207:3 - Line 251:20), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/snapshot-operations.ts (Line 7:1 - Line 52:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn632" onclick="toggleCodeBlock('cloneGroup632', 'expandBtn632', 'collapseBtn632')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn632" onclick="toggleCodeBlock('cloneGroup632', 'expandBtn632', 'collapseBtn632')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup632"><code class="language-typescript text-sm text-gray-800">): Promise&lt;string&gt; {
    const state = this.states.get(executionId);
    if (!state) {
      throw new Error(`Execution not found: ${executionId}`);
    }

    // Create serializable state copy
    const serializedState = this.serializeState(state);
    let data = JSON.stringify(serializedState);
    let compressed = false;

    // Compress if enabled
    if (this.config.compressionEnabled) {
      data = await this.compressData(data);
      compressed = true;
    }

    const snapshot: StateSnapshot = {
      id: this.generateId(),
      executionId,
      timestamp: new Date(),
      state: serializedState,
      checkpointType: type,
      size: data.length,
      compressed,
    };

    // Get or create snapshots array
    let executionSnapshots = this.snapshots.get(executionId) || [];

    // Limit snapshots per execution
    if (executionSnapshots.length &gt;= this.config.maxSnapshotsPerExecution) {
      executionSnapshots = executionSnapshots.slice(-this.config.maxSnapshotsPerExecution + 1);
    }

    executionSnapshots.push(snapshot);
    this.snapshots.set(executionId, executionSnapshots);

    // Persist if configured
    await this.persistSnapshot(snapshot);

    return snapshot.id;
  }

  async restoreFromSnapshot</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 251:2 - Line 281:13), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/snapshot-operations.ts (Line 53:1 - Line 85:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn633" onclick="toggleCodeBlock('cloneGroup633', 'expandBtn633', 'collapseBtn633')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn633" onclick="toggleCodeBlock('cloneGroup633', 'expandBtn633', 'collapseBtn633')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup633"><code class="language-typescript text-sm text-gray-800">restoreFromSnapshot(snapshotId: string): Promise&lt;boolean&gt; {
    // Find snapshot across all executions
    let targetSnapshot: StateSnapshot | undefined;
    let executionId: string | undefined;

    for (const [execId, snapshots] of this.snapshots.entries()) {
      const snapshot = snapshots.find((s) =&gt; s.id === snapshotId);
      if (snapshot) {
        targetSnapshot = snapshot;
        executionId = execId;
        break;
      }
    }

    if (!targetSnapshot || !executionId) {
      return false;
    }

    // Restore state
    const restoredState = this.deserializeState(targetSnapshot.state);
    this.states.set(executionId, restoredState);

    // Restart snapshotting if execution is still active
    if (['initializing', 'running', 'paused'].includes(restoredState.status)) {
      this.startSnapshotting(executionId);
    }

    return true;
  }

  async getSnapshots</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 285:2 - Line 296:20), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/snapshot-operations.ts (Line 93:1 - Line 106:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn634" onclick="toggleCodeBlock('cloneGroup634', 'expandBtn634', 'collapseBtn634')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn634" onclick="toggleCodeBlock('cloneGroup634', 'expandBtn634', 'collapseBtn634')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup634"><code class="language-typescript text-sm text-gray-800">deleteExecution(executionId: string): Promise&lt;boolean&gt; {
    this.stopSnapshotting(executionId);
    const stateDeleted = this.states.delete(executionId);
    const snapshotsDeleted = this.snapshots.delete(executionId);

    // Clean up from persistence layer
    await this.deleteFromPersistence(executionId);

    return stateDeleted || snapshotsDeleted;
  }

  async getExecutionMetrics</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index.ts (Line 301:9 - Line 366:13), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/state-store/src/index/state-utilities.ts (Line 1:1 - Line 80:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn635" onclick="toggleCodeBlock('cloneGroup635', 'expandBtn635', 'collapseBtn635')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn635" onclick="toggleCodeBlock('cloneGroup635', 'expandBtn635', 'collapseBtn635')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup635"><code class="language-typescript text-sm text-gray-800">averageNodeTime: number;
        totalExecutionTime: number;
      }
    | undefined
  &gt; {
    const state = await this.getExecutionState(executionId);
    if (!state) return undefined;

    const nodeStates = Array.from(state.nodeStates.values());
    const completedNodes = nodeStates.filter((n) =&gt; n.status === 'completed');
    const failedNodes = nodeStates.filter((n) =&gt; n.status === 'failed');

    const totalExecutionTime = state.endTime
      ? state.endTime.getTime() - state.startTime.getTime()
      : 0;

    const averageNodeTime =
      completedNodes.length &gt; 0
        ? completedNodes.reduce((sum, node) =&gt; sum + (node.executionTime || 0), 0) /
          completedNodes.length
        : 0;

    return {
      totalNodes: nodeStates.length,
      completedNodes: completedNodes.length,
      failedNodes: failedNodes.length,
      averageNodeTime,
      totalExecutionTime,
    };
  }

  private startSnapshotting(executionId: string): void {
    const interval = setInterval(async () =&gt; {
      await this.createSnapshot(executionId, 'auto');
    }, this.config.snapshotInterval);

    this.snapshotIntervals.set(executionId, interval);
  }

  private stopSnapshotting(executionId: string): void {
    const interval = this.snapshotIntervals.get(executionId);
    if (interval) {
      clearInterval(interval);
      this.snapshotIntervals.delete(executionId);
    }
  }

  private serializeState(state: WorkflowState): WorkflowState {
    // Convert Map to object for serialization
    return {
      ...state,
      nodeStates: Object.fromEntries(state.nodeStates) as any,
    };
  }

  private deserializeState(serializedState: any): WorkflowState {
    // Convert object back to Map
    return {
      ...serializedState,
      nodeStates: new Map(Object.entries(serializedState.nodeStates)),
      startTime: new Date(serializedState.startTime),
      endTime: serializedState.endTime ? new Date(serializedState.endTime) : undefined,
    };
  }

  private async compressData</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 102:2 - Line 136:15), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-management.ts (Line 2:1 - Line 38:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn636" onclick="toggleCodeBlock('cloneGroup636', 'expandBtn636', 'collapseBtn636')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn636" onclick="toggleCodeBlock('cloneGroup636', 'expandBtn636', 'collapseBtn636')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup636"><code class="language-typescript text-sm text-gray-800">createSchedule(
    schedule: Omit&lt;ScheduleDefinition, 'id' | 'currentRuns' | 'createdAt' | 'updatedAt'&gt;
  ): Promise&lt;string&gt; {
    const newSchedule: ScheduleDefinition = {
      ...schedule,
      id: this.generateId(),
      currentRuns: 0,
      createdAt: new Date(),
      updatedAt: new Date(),
    };

    // Validate cron expression if provided
    if (newSchedule.type === 'cron' &amp;&amp; newSchedule.schedule.cron) {
      try {
        // TODO: Use cron-parser to validate
        this.validateCronExpression(newSchedule.schedule.cron);
      } catch (_error) {
        throw new Error(`Invalid cron expression: ${newSchedule.schedule.cron}`);
      }
    }

    // Calculate next run time
    newSchedule.nextRun = this.calculateNextRun(newSchedule);

    this.schedules.set(newSchedule.id, newSchedule);

    // Start the schedule if enabled and scheduler is running
    if (newSchedule.enabled &amp;&amp; this.running) {
      await this.startSchedule(newSchedule.id);
    }

    return newSchedule.id;
  }

  async updateSchedule</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 136:2 - Line 165:15), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-management.ts (Line 39:1 - Line 70:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn637" onclick="toggleCodeBlock('cloneGroup637', 'expandBtn637', 'collapseBtn637')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn637" onclick="toggleCodeBlock('cloneGroup637', 'expandBtn637', 'collapseBtn637')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup637"><code class="language-typescript text-sm text-gray-800">updateSchedule(id: string, updates: Partial&lt;ScheduleDefinition&gt;): Promise&lt;boolean&gt; {
    const schedule = this.schedules.get(id);
    if (!schedule) return false;

    // Stop current schedule
    await this.stopSchedule(id);

    // Update schedule
    const updatedSchedule = {
      ...schedule,
      ...updates,
      updatedAt: new Date(),
    };

    // Recalculate next run if schedule changed
    if (updates.schedule || updates.type) {
      updatedSchedule.nextRun = this.calculateNextRun(updatedSchedule);
    }

    this.schedules.set(id, updatedSchedule);

    // Restart if enabled
    if (updatedSchedule.enabled &amp;&amp; this.running) {
      await this.startSchedule(id);
    }

    return true;
  }

  async deleteSchedule</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 170:2 - Line 184:16), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-management.ts (Line 79:1 - Line 95:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn638" onclick="toggleCodeBlock('cloneGroup638', 'expandBtn638', 'collapseBtn638')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn638" onclick="toggleCodeBlock('cloneGroup638', 'expandBtn638', 'collapseBtn638')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup638"><code class="language-typescript text-sm text-gray-800">enableSchedule(id: string): Promise&lt;boolean&gt; {
    const schedule = this.schedules.get(id);
    if (!schedule) return false;

    schedule.enabled = true;
    schedule.updatedAt = new Date();

    if (this.running) {
      await this.startSchedule(id);
    }

    return true;
  }

  async disableSchedule</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 184:2 - Line 195:16), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-management.ts (Line 96:1 - Line 109:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn639" onclick="toggleCodeBlock('cloneGroup639', 'expandBtn639', 'collapseBtn639')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn639" onclick="toggleCodeBlock('cloneGroup639', 'expandBtn639', 'collapseBtn639')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup639"><code class="language-typescript text-sm text-gray-800">disableSchedule(id: string): Promise&lt;boolean&gt; {
    const schedule = this.schedules.get(id);
    if (!schedule) return false;

    schedule.enabled = false;
    schedule.updatedAt = new Date();
    await this.stopSchedule(id);

    return true;
  }

  async triggerSchedule</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 201:5 - Line 232:14), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-execution.ts (Line 1:1 - Line 40:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn640" onclick="toggleCodeBlock('cloneGroup640', 'expandBtn640', 'collapseBtn640')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn640" onclick="toggleCodeBlock('cloneGroup640', 'expandBtn640', 'collapseBtn640')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup640"><code class="language-typescript text-sm text-gray-800">return this.executeWorkflow(schedule);
  }

  getSchedule(id: string): ScheduleDefinition | undefined {
    return this.schedules.get(id);
  }

  getSchedules(organizationId?: string): ScheduleDefinition[] {
    const schedules = Array.from(this.schedules.values());

    if (organizationId) {
      return schedules.filter((s) =&gt; s.organizationId === organizationId);
    }

    return schedules;
  }

  getExecution(id: string): ScheduleExecution | undefined {
    return this.executions.get(id);
  }

  getExecutions(scheduleId?: string): ScheduleExecution[] {
    const executions = Array.from(this.executions.values());

    if (scheduleId) {
      return executions.filter((e) =&gt; e.scheduleId === scheduleId);
    }

    return executions;
  }

  private async startSchedule</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 232:2 - Line 253:13), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-execution.ts (Line 41:1 - Line 65:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn641" onclick="toggleCodeBlock('cloneGroup641', 'expandBtn641', 'collapseBtn641')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn641" onclick="toggleCodeBlock('cloneGroup641', 'expandBtn641', 'collapseBtn641')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup641"><code class="language-typescript text-sm text-gray-800">startSchedule(scheduleId: string): Promise&lt;void&gt; {
    const schedule = this.schedules.get(scheduleId);
    if (!schedule || !schedule.enabled) return;

    // Clear existing interval if any
    await this.stopSchedule(scheduleId);

    switch (schedule.type) {
      case 'cron':
        this.startCronSchedule(schedule);
        break;
      case 'interval':
        this.startIntervalSchedule(schedule);
        break;
      case 'once':
        this.startOnceSchedule(schedule);
        break;
      // webhook schedules are triggered externally
    }
  }

  private async stopSchedule</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 253:2 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-execution.ts (Line 66:1 - Line 124:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn642" onclick="toggleCodeBlock('cloneGroup642', 'expandBtn642', 'collapseBtn642')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn642" onclick="toggleCodeBlock('cloneGroup642', 'expandBtn642', 'collapseBtn642')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup642"><code class="language-typescript text-sm text-gray-800">stopSchedule(scheduleId: string): Promise&lt;void&gt; {
    const interval = this.intervals.get(scheduleId);
    if (interval) {
      clearInterval(interval);
      this.intervals.delete(scheduleId);
    }
  }

  private startCronSchedule(schedule: ScheduleDefinition): void {
    if (!schedule.schedule.cron) return;

    // TODO: Use node-cron for proper cron scheduling
    // For now, simulate with a simple interval
    const interval = setInterval(async () =&gt; {
      if (this.shouldExecute(schedule)) {
        await this.executeWorkflow(schedule);
      }
    }, 60000); // Check every minute

    this.intervals.set(schedule.id, interval);
  }

  private startIntervalSchedule(schedule: ScheduleDefinition): void {
    if (!schedule.schedule.interval) return;

    const interval = setInterval(async () =&gt; {
      if (this.shouldExecute(schedule)) {
        await this.executeWorkflow(schedule);
      }
    }, schedule.schedule.interval);

    this.intervals.set(schedule.id, interval);
  }

  private startOnceSchedule(schedule: ScheduleDefinition): void {
    if (!schedule.schedule.runAt) return;

    const delay = schedule.schedule.runAt.getTime() - Date.now();

    if (delay &gt; 0) {
      const timeout = setTimeout(async () =&gt; {
        if (this.shouldExecute(schedule)) {
          await this.executeWorkflow(schedule);
        }
      }, delay);

      this.intervals.set(schedule.id, timeout);
    }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 301:3 - Line 317:16), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-monitoring.ts (Line 1:1 - Line 19:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn643" onclick="toggleCodeBlock('cloneGroup643', 'expandBtn643', 'collapseBtn643')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn643" onclick="toggleCodeBlock('cloneGroup643', 'expandBtn643', 'collapseBtn643')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup643"><code class="language-typescript text-sm text-gray-800">}

  private shouldExecute(schedule: ScheduleDefinition): boolean {
    // Check max runs limit
    if (schedule.maxRuns &amp;&amp; schedule.currentRuns &gt;= schedule.maxRuns) {
      return false;
    }

    // Check if it's time to run
    if (schedule.nextRun &amp;&amp; schedule.nextRun &gt; new Date()) {
      return false;
    }

    return true;
  }

  private async executeWorkflow</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 317:2 - Line 376:15), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-monitoring.ts (Line 20:1 - Line 82:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn644" onclick="toggleCodeBlock('cloneGroup644', 'expandBtn644', 'collapseBtn644')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn644" onclick="toggleCodeBlock('cloneGroup644', 'expandBtn644', 'collapseBtn644')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup644"><code class="language-typescript text-sm text-gray-800">executeWorkflow(schedule: ScheduleDefinition): Promise&lt;string&gt; {
    const execution: ScheduleExecution = {
      id: this.generateId(),
      scheduleId: schedule.id,
      workflowId: schedule.workflowId,
      status: 'scheduled',
      scheduledAt: new Date(),
      attempts: 0,
    };

    this.executions.set(execution.id, execution);

    try {
      execution.status = 'running';
      execution.startedAt = new Date();

      // TODO: Integrate with workflow execution engine
      // await workflowEngine.execute(schedule.workflowId);

      execution.status = 'completed';
      execution.completedAt = new Date();
      execution.result = { success: true };

      // Update schedule
      schedule.currentRuns++;
      schedule.lastRun = new Date();
      schedule.nextRun = this.calculateNextRun(schedule);

      // Send success notifications
      if (schedule.notifications.onSuccess) {
        await this.sendNotifications(schedule.notifications.onSuccess, 'success', execution);
      }
    } catch (error) {
      execution.status = 'failed';
      execution.error = error instanceof Error ? error.message : 'Unknown error';
      execution.completedAt = new Date();

      // Handle retries
      if (execution.attempts &lt; schedule.retryPolicy.maxRetries) {
        execution.attempts++;
        const delay = this.calculateRetryDelay(schedule.retryPolicy, execution.attempts);
        execution.nextRetryAt = new Date(Date.now() + delay);
        execution.status = 'scheduled';

        // Schedule retry
        setTimeout(() =&gt; {
          this.retryExecution(execution.id);
        }, delay);
      } else {
        // Send failure notifications
        if (schedule.notifications.onFailure) {
          await this.sendNotifications(schedule.notifications.onFailure, 'failure', execution);
        }
      }
    }

    return execution.id;
  }

  private async retryExecution</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 376:2 - Line 399:2), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/schedule-monitoring.ts (Line 83:1 - Line 111:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn645" onclick="toggleCodeBlock('cloneGroup645', 'expandBtn645', 'collapseBtn645')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn645" onclick="toggleCodeBlock('cloneGroup645', 'expandBtn645', 'collapseBtn645')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup645"><code class="language-typescript text-sm text-gray-800">retryExecution(executionId: string): Promise&lt;void&gt; {
    const execution = this.executions.get(executionId);
    const schedule = execution ? this.schedules.get(execution.scheduleId) : undefined;

    if (!execution || !schedule) return;

    // Reset execution for retry
    execution.status = 'running';
    execution.startedAt = new Date();
    execution.error = undefined;

    try {
      // TODO: Re-execute workflow
      execution.status = 'completed';
      execution.completedAt = new Date();
    } catch (error) {
      execution.status = 'failed';
      execution.error = error instanceof Error ? error.message : 'Unknown error';
      execution.completedAt = new Date();
    }
  }

  private calculateNextRun(schedule: ScheduleDefinition): Date | undefined {
    const now = new Date();</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 401:5 - Line 429:18), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/scheduler-utilities.ts (Line 1:1 - Line 31:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn646" onclick="toggleCodeBlock('cloneGroup646', 'expandBtn646', 'collapseBtn646')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn646" onclick="toggleCodeBlock('cloneGroup646', 'expandBtn646', 'collapseBtn646')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup646"><code class="language-typescript text-sm text-gray-800">switch (schedule.type) {
      case 'cron':
        // TODO: Use cron-parser to calculate next run
        return new Date(now.getTime() + 60 * 60 * 1000); // Simplified: next hour
      case 'interval':
        return schedule.schedule.interval
          ? new Date(now.getTime() + schedule.schedule.interval)
          : undefined;
      case 'once':
        return schedule.schedule.runAt;
      default:
        return undefined;
    }
  }

  private calculateRetryDelay(
    retryPolicy: ScheduleDefinition['retryPolicy'],
    attempt: number
  ): number {
    let delay = retryPolicy.retryDelay;

    if (retryPolicy.exponentialBackoff) {
      delay = delay * 2 ** (attempt - 1);
    }

    return delay;
  }

  private async sendNotifications</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 429:2 - Line 444:2), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/scheduler-utilities.ts (Line 32:1 - Line 54:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn647" onclick="toggleCodeBlock('cloneGroup647', 'expandBtn647', 'collapseBtn647')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn647" onclick="toggleCodeBlock('cloneGroup647', 'expandBtn647', 'collapseBtn647')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup647"><code class="language-typescript text-sm text-gray-800">sendNotifications(
    _recipients: string[],
    _type: string,
    _execution: ScheduleExecution
  ): Promise&lt;void&gt; {}

  private validateCronExpression(_cron: string): void {
    // TODO: Implement proper cron validation
    // For now, just check basic format
    const parts = _cron.split(' ');
    if (parts.length &lt; 5 || parts.length &gt; 6) {
      throw new Error('Invalid cron expression format');
    }
  }

  private cleanupOldExecutions():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index.ts (Line 444:2 - Line 455:2), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/scheduler/src/index/scheduler-utilities.ts (Line 55:1 - Line 68:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn648" onclick="toggleCodeBlock('cloneGroup648', 'expandBtn648', 'collapseBtn648')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn648" onclick="toggleCodeBlock('cloneGroup648', 'expandBtn648', 'collapseBtn648')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup648"><code class="language-typescript text-sm text-gray-800">: void {
    const cutoffDate = new Date();
    cutoffDate.setDate(cutoffDate.getDate() - this.config.retentionDays);

    for (const [id, execution] of this.executions.entries()) {
      if (execution.scheduledAt &lt; cutoffDate) {
        this.executions.delete(id);
      }
    }
  }

  private generateId():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 102:3 - Line 115:18), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-allocation.ts (Line 2:1 - Line 16:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn649" onclick="toggleCodeBlock('cloneGroup649', 'expandBtn649', 'collapseBtn649')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn649" onclick="toggleCodeBlock('cloneGroup649', 'expandBtn649', 'collapseBtn649')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup649"><code class="language-typescript text-sm text-gray-800">): Promise&lt;string&gt; {
    const newPool: ResourcePool = {
      ...pool,
      id: this.generateId(),
      currentUsage: await this.getCurrentSystemUsage(),
      allocatedWorkflows: [],
      status: 'available',
    };

    this.pools.set(newPool.id, newPool);
    return newPool.id;
  }

  async allocateResources</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 115:2 - Line 155:20), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-allocation.ts (Line 17:1 - Line 61:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn650" onclick="toggleCodeBlock('cloneGroup650', 'expandBtn650', 'collapseBtn650')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn650" onclick="toggleCodeBlock('cloneGroup650', 'expandBtn650', 'collapseBtn650')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup650"><code class="language-typescript text-sm text-gray-800">allocateResources(
    workflowId: string,
    profile: WorkflowResourceProfile
  ): Promise&lt;{
    allocated: boolean;
    poolId?: string;
    reason?: string;
  }&gt; {
    // Find best pool for allocation
    const suitablePool = await this.findSuitablePool(profile);

    if (!suitablePool) {
      return {
        allocated: false,
        reason: 'No available resource pool with sufficient capacity',
      };
    }

    // Check if allocation would exceed limits
    const wouldExceedLimits = this.wouldExceedLimits(suitablePool, profile);
    if (wouldExceedLimits) {
      return {
        allocated: false,
        reason: 'Allocation would exceed resource limits',
      };
    }

    // Allocate resources
    suitablePool.allocatedWorkflows.push(workflowId);
    this.profiles.set(workflowId, profile);

    // Update pool usage estimation
    await this.updatePoolUsage(suitablePool.id);

    return {
      allocated: true,
      poolId: suitablePool.id,
    };
  }

  async deallocateResources</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 155:2 - Line 176:17), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-allocation.ts (Line 62:1 - Line 85:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn651" onclick="toggleCodeBlock('cloneGroup651', 'expandBtn651', 'collapseBtn651')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn651" onclick="toggleCodeBlock('cloneGroup651', 'expandBtn651', 'collapseBtn651')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup651"><code class="language-typescript text-sm text-gray-800">deallocateResources(workflowId: string): Promise&lt;boolean&gt; {
    // Find pool containing this workflow
    const pool = Array.from(this.pools.values()).find((p) =&gt;
      p.allocatedWorkflows.includes(workflowId)
    );

    if (!pool) return false;

    // Remove allocation
    const index = pool.allocatedWorkflows.indexOf(workflowId);
    pool.allocatedWorkflows.splice(index, 1);

    // Remove profile
    this.profiles.delete(workflowId);

    // Update pool usage
    await this.updatePoolUsage(pool.id);

    return true;
  }

  async addScalingPolicy</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 176:2 - Line 186:20), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-allocation.ts (Line 86:1 - Line 98:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn652" onclick="toggleCodeBlock('cloneGroup652', 'expandBtn652', 'collapseBtn652')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn652" onclick="toggleCodeBlock('cloneGroup652', 'expandBtn652', 'collapseBtn652')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup652"><code class="language-typescript text-sm text-gray-800">addScalingPolicy(policy: Omit&lt;ScalingPolicy, 'id'&gt;): Promise&lt;string&gt; {
    const newPolicy: ScalingPolicy = {
      ...policy,
      id: this.generateId(),
    };

    this.policies.set(newPolicy.id, newPolicy);
    return newPolicy.id;
  }

  async updateScalingPolicy</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 186:2 - Line 194:20), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-allocation.ts (Line 99:1 - Line 109:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn653" onclick="toggleCodeBlock('cloneGroup653', 'expandBtn653', 'collapseBtn653')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn653" onclick="toggleCodeBlock('cloneGroup653', 'expandBtn653', 'collapseBtn653')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup653"><code class="language-typescript text-sm text-gray-800">updateScalingPolicy(id: string, updates: Partial&lt;ScalingPolicy&gt;): Promise&lt;boolean&gt; {
    const policy = this.policies.get(id);
    if (!policy) return false;

    Object.assign(policy, updates);
    return true;
  }

  async removeScalingPolicy</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 201:7 - Line 217:19), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/pool-management.ts (Line 1:1 - Line 18:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn654" onclick="toggleCodeBlock('cloneGroup654', 'expandBtn654', 'collapseBtn654')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn654" onclick="toggleCodeBlock('cloneGroup654', 'expandBtn654', 'collapseBtn654')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup654"><code class="language-typescript text-sm text-gray-800">return pool ? pool.currentUsage : await this.getCurrentSystemUsage();
    }

    return this.usageHistory.slice(-100); // Last 100 measurements
  }

  async getResourcePools(organizationId?: string): Promise&lt;ResourcePool[]&gt; {
    const pools = Array.from(this.pools.values());

    if (organizationId) {
      return pools.filter((p) =&gt; p.organizationId === organizationId);
    }

    return pools;
  }

  async optimizeAllocation</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 217:2 - Line 255:20), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/pool-management.ts (Line 20:1 - Line 61:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn655" onclick="toggleCodeBlock('cloneGroup655', 'expandBtn655', 'collapseBtn655')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn655" onclick="toggleCodeBlock('cloneGroup655', 'expandBtn655', 'collapseBtn655')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup655"><code class="language-typescript text-sm text-gray-800">: Promise&lt;{
    optimized: boolean;
    changes: Array&lt;{ workflowId: string; fromPool: string; toPool: string; reason: string }&gt;;
  }&gt; {
    const changes: Array&lt;{ workflowId: string; fromPool: string; toPool: string; reason: string }&gt; =
      [];

    // Analyze current allocations
    for (const pool of this.pools.values()) {
      if (pool.status === 'overloaded') {
        // Try to move some workflows to other pools
        const movableWorkflows = this.findMovableWorkflows(pool);

        for (const workflowId of movableWorkflows) {
          const profile = this.profiles.get(workflowId);
          if (!profile) continue;

          const betterPool = await this.findBetterPool(workflowId, pool.id, profile);
          if (betterPool) {
            // Move workflow
            await this.moveWorkflow(workflowId, pool.id, betterPool.id);
            changes.push({
              workflowId,
              fromPool: pool.id,
              toPool: betterPool.id,
              reason: 'Load balancing optimization',
            });
          }
        }
      }
    }

    return {
      optimized: changes.length &gt; 0,
      changes,
    };
  }

  async checkResourceHealth</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 255:2 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/pool-management.ts (Line 63:1 - Line 111:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn656" onclick="toggleCodeBlock('cloneGroup656', 'expandBtn656', 'collapseBtn656')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn656" onclick="toggleCodeBlock('cloneGroup656', 'expandBtn656', 'collapseBtn656')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup656"><code class="language-typescript text-sm text-gray-800">: Promise&lt;{
    healthy: boolean;
    issues: Array&lt;{
      type: string;
      message: string;
      severity: 'low' | 'medium' | 'high' | 'critical';
    }&gt;;
  }&gt; {
    const issues: Array&lt;{
      type: string;
      message: string;
      severity: 'low' | 'medium' | 'high' | 'critical';
    }&gt; = [];

    // Check each pool
    for (const pool of this.pools.values()) {
      const usage = pool.currentUsage;

      // CPU usage check
      if (usage.cpu.usage &gt; 90) {
        issues.push({
          type: 'high_cpu_usage',
          message: `Pool ${pool.name} has ${usage.cpu.usage}% CPU usage`,
          severity: 'critical',
        });
      } else if (usage.cpu.usage &gt; 75) {
        issues.push({
          type: 'high_cpu_usage',
          message: `Pool ${pool.name} has ${usage.cpu.usage}% CPU usage`,
          severity: 'high',
        });
      }

      // Memory usage check
      if (usage.memory.usage &gt; 90) {
        issues.push({
          type: 'high_memory_usage',
          message: `Pool ${pool.name} has ${usage.memory.usage}% memory usage`,
          severity: 'critical',
        });
      } else if (usage.memory.usage &gt; 75) {
        issues.push({
          type: 'high_memory_usage',
          message: `Pool ${pool.name} has ${usage.memory.usage}% memory usage`,
          severity: 'high',
        });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 410:3 - Line 420:15), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-utilities.ts (Line 12:1 - Line 24:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn657" onclick="toggleCodeBlock('cloneGroup657', 'expandBtn657', 'collapseBtn657')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn657" onclick="toggleCodeBlock('cloneGroup657', 'expandBtn657', 'collapseBtn657')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup657"><code class="language-typescript text-sm text-gray-800">}

  private findMovableWorkflows(pool: ResourcePool): string[] {
    // Find workflows with low priority that can be moved
    return pool.allocatedWorkflows.filter((workflowId) =&gt; {
      const profile = this.profiles.get(workflowId);
      return profile &amp;&amp; profile.priority === 'low';
    });
  }

  private async findBetterPool</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 420:2 - Line 432:13), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-utilities.ts (Line 25:1 - Line 40:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn658" onclick="toggleCodeBlock('cloneGroup658', 'expandBtn658', 'collapseBtn658')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn658" onclick="toggleCodeBlock('cloneGroup658', 'expandBtn658', 'collapseBtn658')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup658"><code class="language-typescript text-sm text-gray-800">findBetterPool(
    _workflowId: string,
    currentPoolId: string,
    profile: WorkflowResourceProfile
  ): Promise&lt;ResourcePool | undefined&gt; {
    const _otherPools = Array.from(this.pools.values()).filter(
      (p) =&gt; p.id !== currentPoolId &amp;&amp; p.status === 'available'
    );

    return this.findSuitablePool(profile);
  }

  private async moveWorkflow</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 432:2 - Line 456:2), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-utilities.ts (Line 41:1 - Line 68:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn659" onclick="toggleCodeBlock('cloneGroup659', 'expandBtn659', 'collapseBtn659')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn659" onclick="toggleCodeBlock('cloneGroup659', 'expandBtn659', 'collapseBtn659')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup659"><code class="language-typescript text-sm text-gray-800">moveWorkflow(
    workflowId: string,
    fromPoolId: string,
    toPoolId: string
  ): Promise&lt;void&gt; {
    const fromPool = this.pools.get(fromPoolId);
    const toPool = this.pools.get(toPoolId);

    if (!fromPool || !toPool) return;

    // Remove from old pool
    const index = fromPool.allocatedWorkflows.indexOf(workflowId);
    if (index !== -1) {
      fromPool.allocatedWorkflows.splice(index, 1);
    }

    // Add to new pool
    toPool.allocatedWorkflows.push(workflowId);

    // Update both pools
    await this.updatePoolUsage(fromPoolId);
    await this.updatePoolUsage(toPoolId);
  }

  private startMonitoring():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index.ts (Line 456:2 - Line 477:24), /home/margon/Reporunner/reporunner/packages/@reporunner/platform/resource-manager/src/index/resource-utilities.ts (Line 69:1 - Line 92:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn660" onclick="toggleCodeBlock('cloneGroup660', 'expandBtn660', 'collapseBtn660')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn660" onclick="toggleCodeBlock('cloneGroup660', 'expandBtn660', 'collapseBtn660')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup660"><code class="language-typescript text-sm text-gray-800">: void {
    this.monitoringInterval = setInterval(async () =&gt; {
      // Update usage for all pools
      for (const poolId of this.pools.keys()) {
        await this.updatePoolUsage(poolId);
      }

      // Add to history
      const currentUsage = await this.getCurrentSystemUsage();
      this.usageHistory.push(currentUsage);

      // Keep only last 1000 measurements
      if (this.usageHistory.length &gt; 1000) {
        this.usageHistory = this.usageHistory.slice(-1000);
      }

      // Check scaling policies
      await this.evaluateScalingPolicies();
    }, 30000); // Every 30 seconds
  }

  private async evaluateScalingPolicies</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 101:5 - Line 170:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/endpoint-management.ts (Line 1:1 - Line 71:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn661" onclick="toggleCodeBlock('cloneGroup661', 'expandBtn661', 'collapseBtn661')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn661" onclick="toggleCodeBlock('cloneGroup661', 'expandBtn661', 'collapseBtn661')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup661"><code class="language-typescript text-sm text-gray-800">return id;
  }

  /**
   * Setup webhook route
   */
  private setupWebhookRoute(registration: WebhookRegistration): void {
    this.router.post(registration.config.path, async (req: Request, res: Response) =&gt; {
      try {
        // Create webhook event
        const event: WebhookEvent = {
          id: this.generateEventId(),
          webhookId: registration.id,
          headers: req.headers as Record&lt;string, string&gt;,
          body: req.body,
          query: req.query as Record&lt;string, string&gt;,
          timestamp: new Date(),
          verified: false,
          processed: false,
        };

        // Verify signature if required
        if (registration.config.validateSignature &amp;&amp; registration.config.secret) {
          const signature = req.headers[
            registration.config.signatureHeader || 'x-signature'
          ] as string;
          event.signature = signature;
          event.verified = this.verifySignature(
            (req as any).rawBody,
            signature,
            registration.config.secret,
            registration.config.signatureAlgorithm
          );

          if (!event.verified) {
            this.emit('webhook:verification_failed', {
              webhookId: registration.id,
              event,
            });
            return res.status(401).json({ error: 'Invalid signature' });
          }
        } else {
          event.verified = true;
        }

        // Update registration stats
        registration.lastTriggered = new Date();
        registration.triggerCount++;

        // Add to queue for processing
        this.queueEvent(event);

        // Send immediate response
        res.status(200).json({ received: true, eventId: event.id });

        this.emit('webhook:received', { webhookId: registration.id, event });
      } catch (error: any) {
        registration.status = 'error';
        registration.error = error.message;

        this.emit('webhook:error', { webhookId: registration.id, error });

        res.status(500).json({ error: 'Webhook processing failed' });
      }
    });
  }

  /**
   * Verify webhook signature
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 171:3 - Line 189:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/endpoint-management.ts (Line 72:1 - Line 93:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn662" onclick="toggleCodeBlock('cloneGroup662', 'expandBtn662', 'collapseBtn662')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn662" onclick="toggleCodeBlock('cloneGroup662', 'expandBtn662', 'collapseBtn662')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup662"><code class="language-typescript text-sm text-gray-800">private verifySignature(
    payload: Buffer,
    signature: string,
    secret: string,
    algorithm: 'sha1' | 'sha256' | 'sha512' = 'sha256'
  ): boolean {
    if (!signature) {
      return false;
    }

    const expectedSignature = crypto.createHmac(algorithm, secret).update(payload).digest('hex');

    // Use timing-safe comparison
    return crypto.timingSafeEqual(Buffer.from(signature), Buffer.from(expectedSignature));
  }

  /**
   * Queue event for processing
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 190:3 - Line 202:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/endpoint-management.ts (Line 94:1 - Line 108:1)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn663" onclick="toggleCodeBlock('cloneGroup663', 'expandBtn663', 'collapseBtn663')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn663" onclick="toggleCodeBlock('cloneGroup663', 'expandBtn663', 'collapseBtn663')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup663"><code class="language-typescript text-sm text-gray-800">private queueEvent(event: WebhookEvent): void {
    if (this.eventQueue.length &gt;= this.maxQueueSize) {
      // Remove oldest event if queue is full
      const removed = this.eventQueue.shift();
      this.emit('webhook:queue_overflow', { removedEvent: removed });
    }

    this.eventQueue.push(event);
  }

  /**
   * Start event processor
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 214:2 - Line 259:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/payload-processing.ts (Line 18:1 - Line 64:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn664" onclick="toggleCodeBlock('cloneGroup664', 'expandBtn664', 'collapseBtn664')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn664" onclick="toggleCodeBlock('cloneGroup664', 'expandBtn664', 'collapseBtn664')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup664"><code class="language-typescript text-sm text-gray-800">: Promise&lt;void&gt; {
    this.processing = true;

    while (this.eventQueue.length &gt; 0) {
      const event = this.eventQueue.shift();
      if (!event) continue;

      const webhook = this.webhooks.get(event.webhookId);
      if (!webhook || webhook.status !== 'active') {
        continue;
      }

      try {
        // Execute handler with retry logic
        await this.executeWithRetry(() =&gt; webhook.handler(event), webhook.config.maxRetries || 3);

        event.processed = true;

        this.emit('webhook:processed', { webhookId: event.webhookId, event });
      } catch (error: any) {
        event.error = error.message;

        this.emit('webhook:processing_failed', {
          webhookId: event.webhookId,
          event,
          error,
        });

        // Mark webhook as error if too many failures
        if (webhook.triggerCount &gt; 10 &amp;&amp; webhook.status === 'active') {
          const failureRate =
            (webhook.triggerCount - this.getSuccessCount(webhook.id)) / webhook.triggerCount;
          if (failureRate &gt; 0.5) {
            webhook.status = 'error';
            webhook.error = 'Too many processing failures';
          }
        }
      }
    }

    this.processing = false;
  }

  /**
   * Execute with retry
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 260:2 - Line 284:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/payload-processing.ts (Line 67:1 - Line 93:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn665" onclick="toggleCodeBlock('cloneGroup665', 'expandBtn665', 'collapseBtn665')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn665" onclick="toggleCodeBlock('cloneGroup665', 'expandBtn665', 'collapseBtn665')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup665"><code class="language-typescript text-sm text-gray-800">executeWithRetry&lt;T&gt;(
    fn: () =&gt; Promise&lt;T&gt;,
    maxRetries: number = 3,
    delay: number = 1000
  ): Promise&lt;T&gt; {
    let lastError: any;

    for (let attempt = 0; attempt &lt;= maxRetries; attempt++) {
      try {
        return await fn();
      } catch (error) {
        lastError = error;

        if (attempt &lt; maxRetries) {
          await this.sleep(delay * 2 ** attempt);
        }
      }
    }

    throw lastError;
  }

  /**
   * Unregister webhook
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 285:3 - Line 299:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/payload-processing.ts (Line 94:1 - Line 110:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn666" onclick="toggleCodeBlock('cloneGroup666', 'expandBtn666', 'collapseBtn666')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn666" onclick="toggleCodeBlock('cloneGroup666', 'expandBtn666', 'collapseBtn666')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup666"><code class="language-typescript text-sm text-gray-800">unregisterWebhook(id: string): boolean {
    const webhook = this.webhooks.get(id);
    if (!webhook) {
      return false;
    }

    this.webhooks.delete(id);

    // Remove route
    const routes = this.router.stack;
    const index = routes.findIndex((layer: any) =&gt; layer.route?.path === webhook.config.path);

    if (index !== -1) {
      routes.splice(index, 1);
    }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 301:5 - Line 326:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/security-validation.ts (Line 1:1 - Line 27:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn667" onclick="toggleCodeBlock('cloneGroup667', 'expandBtn667', 'collapseBtn667')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn667" onclick="toggleCodeBlock('cloneGroup667', 'expandBtn667', 'collapseBtn667')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup667"><code class="language-typescript text-sm text-gray-800">this.emit('webhook:unregistered', {
      id,
      integrationName: webhook.integrationName,
    });

    return true;
  }

  /**
   * Pause webhook
   */
  pauseWebhook(id: string): boolean {
    const webhook = this.webhooks.get(id);
    if (!webhook) {
      return false;
    }

    webhook.status = 'paused';
    this.emit('webhook:paused', { id });

    return true;
  }

  /**
   * Resume webhook
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 327:3 - Line 342:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/security-validation.ts (Line 28:1 - Line 45:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn668" onclick="toggleCodeBlock('cloneGroup668', 'expandBtn668', 'collapseBtn668')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn668" onclick="toggleCodeBlock('cloneGroup668', 'expandBtn668', 'collapseBtn668')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup668"><code class="language-typescript text-sm text-gray-800">resumeWebhook(id: string): boolean {
    const webhook = this.webhooks.get(id);
    if (!webhook) {
      return false;
    }

    webhook.status = 'active';
    webhook.error = undefined;
    this.emit('webhook:resumed', { id });

    return true;
  }

  /**
   * Get webhook by ID
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 366:2 - Line 388:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager/security-validation.ts (Line 76:1 - Line 100:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn669" onclick="toggleCodeBlock('cloneGroup669', 'expandBtn669', 'collapseBtn669')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn669" onclick="toggleCodeBlock('cloneGroup669', 'expandBtn669', 'collapseBtn669')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup669"><code class="language-typescript text-sm text-gray-800">: {
    totalWebhooks: number;
    activeWebhooks: number;
    pausedWebhooks: number;
    errorWebhooks: number;
    queueSize: number;
    totalEvents: number;
  } {
    const webhooksArray = Array.from(this.webhooks.values());

    return {
      totalWebhooks: webhooksArray.length,
      activeWebhooks: webhooksArray.filter((w) =&gt; w.status === 'active').length,
      pausedWebhooks: webhooksArray.filter((w) =&gt; w.status === 'paused').length,
      errorWebhooks: webhooksArray.filter((w) =&gt; w.status === 'error').length,
      queueSize: this.eventQueue.length,
      totalEvents: webhooksArray.reduce((sum, w) =&gt; sum + w.triggerCount, 0),
    };
  }

  /**
   * Get success count for webhook
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/utils/rate-limiter.ts (Line 102:3 - Line 155:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/utils/rate-limiter/token-bucket.ts (Line 2:3 - Line 56:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn670" onclick="toggleCodeBlock('cloneGroup670', 'expandBtn670', 'collapseBtn670')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn670" onclick="toggleCodeBlock('cloneGroup670', 'expandBtn670', 'collapseBtn670')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup670"><code class="language-typescript text-sm text-gray-800">private applySlidingWindow(
    entry: RateLimitEntry,
    config: RateLimitConfig,
    now: Date,
    key: string
  ): RateLimitStatus {
    // Calculate time passed since first request
    const timePassed = now.getTime() - entry.firstRequest.getTime();
    const windowProgress = timePassed / config.windowMs;

    // Calculate allowed requests based on window progress
    const allowedRequests = Math.floor(config.maxRequests * windowProgress);
    const effectiveCount = Math.max(0, entry.count - allowedRequests);

    const remaining = config.maxRequests - effectiveCount;

    if (remaining &lt;= 0) {
      // Check burst allowance
      if (config.burstAllowance &amp;&amp; effectiveCount &lt; config.maxRequests + config.burstAllowance) {
        entry.count++;
        entry.lastRequest = now;

        return {
          remaining: config.maxRequests + config.burstAllowance - effectiveCount - 1,
          resetAt: entry.resetAt,
          isLimited: false,
        };
      }

      // Rate limited
      this.handleRateLimit(key, entry, config);

      return {
        remaining: 0,
        resetAt: entry.resetAt,
        isLimited: true,
        retryAfter: Math.ceil((entry.resetAt.getTime() - now.getTime()) / 1000),
      };
    }

    // Request allowed
    entry.count++;
    entry.lastRequest = now;

    return {
      remaining: remaining - 1,
      resetAt: entry.resetAt,
      isLimited: false,
    };
  }

  /**
   * Apply fixed window strategy
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/utils/rate-limiter.ts (Line 156:3 - Line 201:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/utils/rate-limiter/token-bucket.ts (Line 57:1 - Line 56:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn671" onclick="toggleCodeBlock('cloneGroup671', 'expandBtn671', 'collapseBtn671')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn671" onclick="toggleCodeBlock('cloneGroup671', 'expandBtn671', 'collapseBtn671')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup671"><code class="language-typescript text-sm text-gray-800">private applyFixedWindow(
    entry: RateLimitEntry,
    config: RateLimitConfig,
    now: Date,
    key: string
  ): RateLimitStatus {
    const remaining = config.maxRequests - entry.count;

    if (remaining &lt;= 0) {
      // Check burst allowance
      if (config.burstAllowance &amp;&amp; entry.count &lt; config.maxRequests + config.burstAllowance) {
        entry.count++;
        entry.lastRequest = now;

        return {
          remaining: config.maxRequests + config.burstAllowance - entry.count,
          resetAt: entry.resetAt,
          isLimited: false,
        };
      }

      // Rate limited
      this.handleRateLimit(key, entry, config);

      return {
        remaining: 0,
        resetAt: entry.resetAt,
        isLimited: true,
        retryAfter: Math.ceil((entry.resetAt.getTime() - now.getTime()) / 1000),
      };
    }

    // Request allowed
    entry.count++;
    entry.lastRequest = now;

    return {
      remaining: remaining - 1,
      resetAt: entry.resetAt,
      isLimited: false,
    };
  }

  /**
   * Record successful request
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration.ts (Line 7:2 - Line 100:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration/gmail-core.ts (Line 7:2 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn672" onclick="toggleCodeBlock('cloneGroup672', 'expandBtn672', 'collapseBtn672')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn672" onclick="toggleCodeBlock('cloneGroup672', 'expandBtn672', 'collapseBtn672')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup672"><code class="language-typescript text-sm text-gray-800">{ OAuth2Client } from 'google-auth-library';
import { google } from 'googleapis';
import { z } from 'zod';

// Schemas for Gmail operations
const EmailSchema = z.object({
  to: z.array(z.string().email()),
  cc: z.array(z.string().email()).optional(),
  bcc: z.array(z.string().email()).optional(),
  subject: z.string(),
  body: z.string(),
  htmlBody: z.string().optional(),
  attachments: z
    .array(
      z.object({
        filename: z.string(),
        content: z.string(), // base64
        contentType: z.string(),
      })
    )
    .optional(),
  replyTo: z.string().optional(),
  threadId: z.string().optional(),
});

const EmailFilterSchema = z.object({
  query: z.string().optional(),
  from: z.string().optional(),
  to: z.string().optional(),
  subject: z.string().optional(),
  labelIds: z.array(z.string()).optional(),
  maxResults: z.number().min(1).max(500).default(50),
  pageToken: z.string().optional(),
  includeSpamTrash: z.boolean().default(false),
});

const LabelSchema = z.object({
  name: z.string(),
  labelListVisibility: z.enum(['labelShow', 'labelShowIfUnread', 'labelHide']).optional(),
  messageListVisibility: z.enum(['show', 'hide']).optional(),
  color: z
    .object({
      backgroundColor: z.string().optional(),
      textColor: z.string().optional(),
    })
    .optional(),
});

export class GmailIntegration extends BaseIntegration {
  private oauth2Client?: OAuth2Client;
  private gmail?: any;

  constructor() {
    super({
      name: 'gmail',
      displayName: 'Gmail',
      description: 'Connect to Gmail for email automation',
      version: '1.0.0',
      category: IntegrationCategory.COMMUNICATION,
      icon: 'gmail-icon-url',
      documentation: 'https://docs.reporunner.com/integrations/gmail',
      supportedTriggers: ['new_email', 'email_labeled', 'email_starred'],
      supportedActions: ['send_email', 'read_emails', 'manage_labels', 'create_draft'],
      rateLimit: {
        requests: 250,
        period: 1, // per second
      },
    });
  }

  protected initialize(): void {
    // Register triggers
    this.registerTrigger({
      name: 'new_email',
      displayName: 'New Email',
      description: 'Triggers when a new email is received',
      properties: z.object({
        labelIds: z.array(z.string()).optional(),
        from: z.string().optional(),
        subject: z.string().optional(),
      }),
      outputSchema: z.object({
        id: z.string(),
        threadId: z.string(),
        from: z.string(),
        to: z.array(z.string()),
        subject: z.string(),
        snippet: z.string(),
        body: z.string(),
        htmlBody: z.string().optional(),
        attachments: z.array(z.any()),
        labels: z.array(z.string()),
        receivedAt: z.string(),
      }),</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration.ts (Line 201:5 - Line 223:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration/auth-integration.ts (Line 1:1 - Line 25:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn673" onclick="toggleCodeBlock('cloneGroup673', 'expandBtn673', 'collapseBtn673')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn673" onclick="toggleCodeBlock('cloneGroup673', 'expandBtn673', 'collapseBtn673')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup673"><code class="language-typescript text-sm text-gray-800">} catch (error) {
      this.handleError(error);
    }
  }

  async testConnection(): Promise&lt;boolean&gt; {
    try {
      if (!this.gmail) {
        return false;
      }

      const profile = await this.gmail.users.getProfile({ userId: 'me' });
      this.log('info', 'Gmail connection successful', {
        email: profile.data.emailAddress,
      });
      return true;
    } catch (error) {
      this.log('error', 'Gmail connection failed', error);
      return false;
    }
  }

  getRequiredScopes():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration.ts (Line 223:2 - Line 247:22), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration/auth-integration.ts (Line 26:1 - Line 53:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn674" onclick="toggleCodeBlock('cloneGroup674', 'expandBtn674', 'collapseBtn674')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn674" onclick="toggleCodeBlock('cloneGroup674', 'expandBtn674', 'collapseBtn674')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup674"><code class="language-typescript text-sm text-gray-800">: string[] {
    return [
      'https://www.googleapis.com/auth/gmail.send',
      'https://www.googleapis.com/auth/gmail.readonly',
      'https://www.googleapis.com/auth/gmail.modify',
      'https://www.googleapis.com/auth/gmail.labels',
    ];
  }

  getAuthorizationUrl(redirectUri: string, state: string): string {
    const oauth2Client = new OAuth2Client(
      process.env.GMAIL_CLIENT_ID,
      process.env.GMAIL_CLIENT_SECRET,
      redirectUri
    );

    return oauth2Client.generateAuthUrl({
      access_type: 'offline',
      scope: this.getRequiredScopes(),
      state: state,
      prompt: 'consent',
    });
  }

  async exchangeCodeForTokens</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration.ts (Line 247:2 - Line 270:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/gmail/gmail.integration/auth-integration.ts (Line 54:1 - Line 79:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn675" onclick="toggleCodeBlock('cloneGroup675', 'expandBtn675', 'collapseBtn675')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn675" onclick="toggleCodeBlock('cloneGroup675', 'expandBtn675', 'collapseBtn675')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup675"><code class="language-typescript text-sm text-gray-800">exchangeCodeForTokens(code: string, redirectUri: string): Promise&lt;IntegrationCredentials&gt; {
    const oauth2Client = new OAuth2Client(
      process.env.GMAIL_CLIENT_ID,
      process.env.GMAIL_CLIENT_SECRET,
      redirectUri
    );

    const { tokens } = await oauth2Client.getToken(code);

    return {
      type: IntegrationType.OAUTH2,
      data: {
        accessToken: tokens.access_token,
        refreshToken: tokens.refresh_token,
        clientId: process.env.GMAIL_CLIENT_ID,
        clientSecret: process.env.GMAIL_CLIENT_SECRET,
        redirectUri,
      },
      expiresAt: tokens.expiry_date ? new Date(tokens.expiry_date) : undefined,
    };
  }
}

export default GmailIntegration;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 101:5 - Line 122:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/integration-discovery.ts (Line 1:1 - Line 23:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn676" onclick="toggleCodeBlock('cloneGroup676', 'expandBtn676', 'collapseBtn676')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn676" onclick="toggleCodeBlock('cloneGroup676', 'expandBtn676', 'collapseBtn676')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup676"><code class="language-typescript text-sm text-gray-800">for (const id of instancesToRemove) {
      this.destroyInstance(id);
    }

    // Remove definition
    this.definitions.delete(name);

    this.emit('definition:unregistered', { name });

    return true;
  }

  /**
   * Get integration definition
   */
  getDefinition(name: string): IntegrationDefinition | undefined {
    return this.definitions.get(name);
  }

  /**
   * Get all definitions
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 130:3 - Line 171:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/integration-discovery.ts (Line 33:1 - Line 76:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn677" onclick="toggleCodeBlock('cloneGroup677', 'expandBtn677', 'collapseBtn677')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn677" onclick="toggleCodeBlock('cloneGroup677', 'expandBtn677', 'collapseBtn677')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup677"><code class="language-typescript text-sm text-gray-800">findDefinitions(filter: IntegrationFilter): IntegrationDefinition[] {
    const results: IntegrationDefinition[] = [];

    this.definitions.forEach((definition) =&gt; {
      // Apply filters
      if (filter.category &amp;&amp; definition.config.category !== filter.category) {
        return;
      }

      if (filter.tags &amp;&amp; filter.tags.length &gt; 0) {
        const hasTag = filter.tags.some((tag) =&gt; definition.config.tags?.includes(tag));
        if (!hasTag) {
          return;
        }
      }

      if (filter.capabilities &amp;&amp; filter.capabilities.length &gt; 0) {
        const hasCap = filter.capabilities.some((cap) =&gt;
          definition.config.supportedFeatures?.includes(cap)
        );
        if (!hasCap) {
          return;
        }
      }

      if (filter.isEnabled !== undefined &amp;&amp; definition.isEnabled !== filter.isEnabled) {
        return;
      }

      if (filter.isBuiltIn !== undefined &amp;&amp; definition.isBuiltIn !== filter.isBuiltIn) {
        return;
      }

      results.push(definition);
    });

    return results;
  }

  /**
   * Create integration instance
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 172:2 - Line 200:24), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/integration-discovery.ts (Line 78:1 - Line 108:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn678" onclick="toggleCodeBlock('cloneGroup678', 'expandBtn678', 'collapseBtn678')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn678" onclick="toggleCodeBlock('cloneGroup678', 'expandBtn678', 'collapseBtn678')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup678"><code class="language-typescript text-sm text-gray-800">createInstance(name: string, context: IntegrationContext): Promise&lt;string&gt; {
    const definition = this.definitions.get(name);
    if (!definition) {
      throw new Error(`Integration ${name} is not registered`);
    }

    if (definition.isEnabled === false) {
      throw new Error(`Integration ${name} is disabled`);
    }

    // Check dependencies
    if (definition.dependencies) {
      for (const dep of definition.dependencies) {
        const depDef = this.definitions.get(dep);
        if (!depDef || depDef.isEnabled === false) {
          throw new Error(`Dependency ${dep} for ${name} is not available`);
        }
      }
    }

    try {
      // Create integration instance
      const IntegrationClass = definition.constructor as any;
      const integration = new IntegrationClass(definition.config) as BaseIntegration;

      // Initialize integration
      await integration.initialize(context);

      // Generate instance ID</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 201:7 - Line 257:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/dependency-resolution.ts (Line 1:1 - Line 59:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn679" onclick="toggleCodeBlock('cloneGroup679', 'expandBtn679', 'collapseBtn679')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn679" onclick="toggleCodeBlock('cloneGroup679', 'expandBtn679', 'collapseBtn679')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup679"><code class="language-typescript text-sm text-gray-800">const instanceId = this.generateInstanceId();

      // Store instance
      const instance: IntegrationInstance = {
        id: instanceId,
        definition,
        integration,
        context,
        createdAt: new Date(),
      };

      this.instances.set(instanceId, instance);

      // Set up event listeners
      this.setupInstanceListeners(instanceId, integration);

      this.emit('instance:created', {
        id: instanceId,
        name: definition.name,
        userId: context.userId,
      });

      return instanceId;
    } catch (error: any) {
      this.emit('instance:creation_failed', {
        name,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Setup instance event listeners
   */
  private setupInstanceListeners(instanceId: string, integration: BaseIntegration): void {
    // Forward integration events
    integration.on('state:changed', (data) =&gt; {
      this.emit('instance:state_changed', { instanceId, ...data });
    });

    integration.on('error', (data) =&gt; {
      this.emit('instance:error', { instanceId, ...data });
    });

    integration.on('action:executed', (data) =&gt; {
      const instance = this.instances.get(instanceId);
      if (instance) {
        instance.lastActivity = new Date();
      }
      this.emit('instance:action_executed', { instanceId, ...data });
    });
  }

  /**
   * Get integration instance
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 290:2 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/dependency-resolution.ts (Line 101:1 - Line 113:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn680" onclick="toggleCodeBlock('cloneGroup680', 'expandBtn680', 'collapseBtn680')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn680" onclick="toggleCodeBlock('cloneGroup680', 'expandBtn680', 'collapseBtn680')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup680"><code class="language-typescript text-sm text-gray-800">executeAction(instanceId: string, action: string, params: any): Promise&lt;any&gt; {
    const instance = this.instances.get(instanceId);
    if (!instance) {
      throw new Error(`Instance ${instanceId} not found`);
    }

    try {
      const result = await instance.integration.execute(action, params);

      this.emit('instance:action_executed', {
        instanceId,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 305:7 - Line 349:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/lifecycle-coordination.ts (Line 5:1 - Line 51:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn681" onclick="toggleCodeBlock('cloneGroup681', 'expandBtn681', 'collapseBtn681')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn681" onclick="toggleCodeBlock('cloneGroup681', 'expandBtn681', 'collapseBtn681')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup681"><code class="language-typescript text-sm text-gray-800">return result;
    } catch (error: any) {
      this.emit('instance:action_failed', {
        instanceId,
        action,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Destroy integration instance
   */
  async destroyInstance(instanceId: string): Promise&lt;boolean&gt; {
    const instance = this.instances.get(instanceId);
    if (!instance) {
      return false;
    }

    try {
      // Cleanup integration
      await instance.integration.cleanup();

      // Remove instance
      this.instances.delete(instanceId);

      this.emit('instance:destroyed', {
        id: instanceId,
        name: instance.definition.name,
      });

      return true;
    } catch (error: any) {
      this.emit('instance:destroy_failed', {
        id: instanceId,
        error: error.message,
      });
      throw error;
    }
  }

  /**
   * Suspend instance
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 350:3 - Line 368:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/lifecycle-coordination.ts (Line 52:1 - Line 72:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn682" onclick="toggleCodeBlock('cloneGroup682', 'expandBtn682', 'collapseBtn682')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn682" onclick="toggleCodeBlock('cloneGroup682', 'expandBtn682', 'collapseBtn682')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup682"><code class="language-typescript text-sm text-gray-800">suspendInstance(instanceId: string): boolean {
    const instance = this.instances.get(instanceId);
    if (!instance) {
      return false;
    }

    instance.integration.suspend();

    this.emit('instance:suspended', {
      id: instanceId,
      name: instance.definition.name,
    });

    return true;
  }

  /**
   * Resume instance
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 369:2 - Line 387:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/lifecycle-coordination.ts (Line 74:1 - Line 94:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn683" onclick="toggleCodeBlock('cloneGroup683', 'expandBtn683', 'collapseBtn683')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn683" onclick="toggleCodeBlock('cloneGroup683', 'expandBtn683', 'collapseBtn683')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup683"><code class="language-typescript text-sm text-gray-800">resumeInstance(instanceId: string): Promise&lt;boolean&gt; {
    const instance = this.instances.get(instanceId);
    if (!instance) {
      return false;
    }

    await instance.integration.resume();

    this.emit('instance:resumed', {
      id: instanceId,
      name: instance.definition.name,
    });

    return true;
  }

  /**
   * Enable integration
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 388:3 - Line 399:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/lifecycle-coordination.ts (Line 95:1 - Line 108:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn684" onclick="toggleCodeBlock('cloneGroup684', 'expandBtn684', 'collapseBtn684')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn684" onclick="toggleCodeBlock('cloneGroup684', 'expandBtn684', 'collapseBtn684')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup684"><code class="language-typescript text-sm text-gray-800">enableIntegration(name: string): boolean {
    const definition = this.definitions.get(name);
    if (!definition) {
      return false;
    }

    definition.isEnabled = true;

    this.emit('definition:enabled', { name });

    return true;
  }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 404:3 - Line 431:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/health-monitoring.ts (Line 4:1 - Line 33:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn685" onclick="toggleCodeBlock('cloneGroup685', 'expandBtn685', 'collapseBtn685')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn685" onclick="toggleCodeBlock('cloneGroup685', 'expandBtn685', 'collapseBtn685')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup685"><code class="language-typescript text-sm text-gray-800">disableIntegration(name: string): boolean {
    const definition = this.definitions.get(name);
    if (!definition) {
      return false;
    }

    // Destroy all instances
    const instancesToDestroy: string[] = [];
    for (const [id, instance] of this.instances.entries()) {
      if (instance.definition.name === name) {
        instancesToDestroy.push(id);
      }
    }

    for (const id of instancesToDestroy) {
      this.destroyInstance(id);
    }

    definition.isEnabled = false;

    this.emit('definition:disabled', { name });

    return true;
  }

  /**
   * Get categories
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 453:2 - Line 493:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/health-monitoring.ts (Line 62:1 - Line 104:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn686" onclick="toggleCodeBlock('cloneGroup686', 'expandBtn686', 'collapseBtn686')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn686" onclick="toggleCodeBlock('cloneGroup686', 'expandBtn686', 'collapseBtn686')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup686"><code class="language-typescript text-sm text-gray-800">: {
    totalDefinitions: number;
    enabledDefinitions: number;
    totalInstances: number;
    instancesByIntegration: Record&lt;string, number&gt;;
    instancesByUser: Record&lt;string, number&gt;;
    categories: number;
    tags: number;
    capabilities: number;
  } {
    const stats = {
      totalDefinitions: this.definitions.size,
      enabledDefinitions: 0,
      totalInstances: this.instances.size,
      instancesByIntegration: {} as Record&lt;string, number&gt;,
      instancesByUser: {} as Record&lt;string, number&gt;,
      categories: this.categories.size,
      tags: this.tags.size,
      capabilities: this.capabilities.size,
    };

    this.definitions.forEach((def) =&gt; {
      if (def.isEnabled !== false) {
        stats.enabledDefinitions++;
      }
    });

    this.instances.forEach((instance) =&gt; {
      const name = instance.definition.name;
      stats.instancesByIntegration[name] = (stats.instancesByIntegration[name] || 0) + 1;

      const userId = instance.context.userId;
      stats.instancesByUser[userId] = (stats.instancesByUser[userId] || 0) + 1;
    });

    return stats;
  }

  /**
   * Generate instance ID
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry.ts (Line 501:2 - Line 519:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/integration-registry/registry-utilities.ts (Line 2:1 - Line 21:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn687" onclick="toggleCodeBlock('cloneGroup687', 'expandBtn687', 'collapseBtn687')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn687" onclick="toggleCodeBlock('cloneGroup687', 'expandBtn687', 'collapseBtn687')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup687"><code class="language-typescript text-sm text-gray-800">: void {
    // Destroy all instances
    const instanceIds = Array.from(this.instances.keys());
    for (const id of instanceIds) {
      this.destroyInstance(id);
    }

    // Clear definitions
    this.definitions.clear();
    this.categories.clear();
    this.tags.clear();
    this.capabilities.clear();
  }
}

// Singleton instance
export const integrationRegistry = new IntegrationRegistry();

export default IntegrationRegistry;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 101:5 - Line 127:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/event-handlers.ts (Line 1:1 - Line 30:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn688" onclick="toggleCodeBlock('cloneGroup688', 'expandBtn688', 'collapseBtn688')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn688" onclick="toggleCodeBlock('cloneGroup688', 'expandBtn688', 'collapseBtn688')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup688"><code class="language-typescript text-sm text-gray-800">} = {}
  ): string {
    const subscriptionId = this.generateSubscriptionId();

    const subscription: EventSubscription = {
      id: subscriptionId,
      pattern,
      handler,
      filter: options.filter,
      once: options.once || false,
      priority: options.priority || 0,
      createdAt: new Date(),
    };

    this.subscriptions.set(subscriptionId, subscription);

    this.emit('subscription:created', {
      id: subscriptionId,
      pattern: pattern.toString(),
    });

    return subscriptionId;
  }

  /**
   * Unsubscribe from events
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 141:2 - Line 156:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/event-handlers.ts (Line 49:1 - Line 65:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn689" onclick="toggleCodeBlock('cloneGroup689', 'expandBtn689', 'collapseBtn689')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn689" onclick="toggleCodeBlock('cloneGroup689', 'expandBtn689', 'collapseBtn689')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup689"><code class="language-typescript text-sm text-gray-800">: Promise&lt;void&gt; {
    this.isProcessing = true;

    while (this.processingQueue.length &gt; 0) {
      const payload = this.processingQueue.shift();
      if (!payload) continue;

      await this.processEvent(payload);
    }

    this.isProcessing = false;
  }

  /**
   * Process single event
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 157:2 - Line 183:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/event-handlers.ts (Line 68:1 - Line 96:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn690" onclick="toggleCodeBlock('cloneGroup690', 'expandBtn690', 'collapseBtn690')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn690" onclick="toggleCodeBlock('cloneGroup690', 'expandBtn690', 'collapseBtn690')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup690"><code class="language-typescript text-sm text-gray-800">processEvent(payload: EventPayload): Promise&lt;void&gt; {
    const eventKey = `${payload.source}:${payload.event}`;

    // Get matching subscriptions
    const matchingSubscriptions = this.getMatchingSubscriptions(eventKey, payload);

    // Sort by priority (higher priority first)
    matchingSubscriptions.sort((a, b) =&gt; (b.priority || 0) - (a.priority || 0));

    // Execute handlers
    for (const subscription of matchingSubscriptions) {
      try {
        await this.executeHandler(subscription, payload);

        // Remove if it was a one-time subscription
        if (subscription.once) {
          this.subscriptions.delete(subscription.id);
        }
      } catch (error: any) {
        this.handleError(subscription, payload, error);
      }
    }
  }

  /**
   * Get matching subscriptions for an event
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 184:3 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/event-handlers.ts (Line 97:1 - Line 116:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn691" onclick="toggleCodeBlock('cloneGroup691', 'expandBtn691', 'collapseBtn691')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn691" onclick="toggleCodeBlock('cloneGroup691', 'expandBtn691', 'collapseBtn691')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup691"><code class="language-typescript text-sm text-gray-800">private getMatchingSubscriptions(eventKey: string, payload: EventPayload): EventSubscription[] {
    const matching: EventSubscription[] = [];

    this.subscriptions.forEach((subscription) =&gt; {
      // Check pattern match
      let matches = false;

      if (typeof subscription.pattern === 'string') {
        // Exact match or wildcard pattern
        if (subscription.pattern === '*' || subscription.pattern === '**') {
          matches = true;
        } else if (subscription.pattern.includes('*')) {
          matches = this.matchWildcard(eventKey, subscription.pattern);
        } else {
          matches = eventKey === subscription.pattern;
        }
      } else if (subscription.pattern instanceof RegExp) {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 214:5 - Line 233:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/subscription-management.ts (Line 14:1 - Line 34:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn692" onclick="toggleCodeBlock('cloneGroup692', 'expandBtn692', 'collapseBtn692')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn692" onclick="toggleCodeBlock('cloneGroup692', 'expandBtn692', 'collapseBtn692')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup692"><code class="language-typescript text-sm text-gray-800">return matching;
  }

  /**
   * Match wildcard pattern
   */
  private matchWildcard(text: string, pattern: string): boolean {
    // Convert wildcard pattern to regex
    const regexPattern = pattern
      .replace(/[.+^${}()|[\]\\]/g, '\\$&amp;')
      .replace(/\*/g, '.*')
      .replace(/\?/g, '.');

    const regex = new RegExp(`^${regexPattern}$`);
    return regex.test(text);
  }

  /**
   * Execute handler
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 234:2 - Line 261:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/subscription-management.ts (Line 37:1 - Line 66:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn693" onclick="toggleCodeBlock('cloneGroup693', 'expandBtn693', 'collapseBtn693')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn693" onclick="toggleCodeBlock('cloneGroup693', 'expandBtn693', 'collapseBtn693')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup693"><code class="language-typescript text-sm text-gray-800">executeHandler(
    subscription: EventSubscription,
    payload: EventPayload
  ): Promise&lt;void&gt; {
    const startTime = Date.now();

    await subscription.handler(payload);

    const duration = Date.now() - startTime;

    this.emit('handler:executed', {
      subscriptionId: subscription.id,
      eventKey: `${payload.source}:${payload.event}`,
      duration,
      correlationId: payload.correlationId,
    });

    if (this.config.enableLogging) {
      this.logEvent('handled', payload, {
        subscriptionId: subscription.id,
        duration,
      });
    }
  }

  /**
   * Handle handler error
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 262:3 - Line 276:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/subscription-management.ts (Line 67:1 - Line 84:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn694" onclick="toggleCodeBlock('cloneGroup694', 'expandBtn694', 'collapseBtn694')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn694" onclick="toggleCodeBlock('cloneGroup694', 'expandBtn694', 'collapseBtn694')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup694"><code class="language-typescript text-sm text-gray-800">private handleError(subscription: EventSubscription, payload: EventPayload, error: Error): void {
    this.emit('handler:error', {
      subscriptionId: subscription.id,
      eventKey: `${payload.source}:${payload.event}`,
      error: error.message,
      correlationId: payload.correlationId,
    });

    if (this.config.enableLogging) {
    }
  }

  /**
   * Add event to history
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 277:3 - Line 288:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/subscription-management.ts (Line 85:1 - Line 99:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn695" onclick="toggleCodeBlock('cloneGroup695', 'expandBtn695', 'collapseBtn695')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn695" onclick="toggleCodeBlock('cloneGroup695', 'expandBtn695', 'collapseBtn695')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup695"><code class="language-typescript text-sm text-gray-800">private addToHistory(payload: EventPayload): void {
    this.eventHistory.push(payload);

    // Trim history if needed
    if (this.eventHistory.length &gt; this.config.maxEventHistory!) {
      this.eventHistory = this.eventHistory.slice(-this.config.maxEventHistory!);
    }
  }

  /**
   * Get event history
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 289:3 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/subscription-management.ts (Line 100:1 - Line 112:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn696" onclick="toggleCodeBlock('cloneGroup696', 'expandBtn696', 'collapseBtn696')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn696" onclick="toggleCodeBlock('cloneGroup696', 'expandBtn696', 'collapseBtn696')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup696"><code class="language-typescript text-sm text-gray-800">getHistory(filter?: {
    source?: string;
    event?: string;
    since?: Date;
    limit?: number;
  }): EventPayload[] {
    let history = [...this.eventHistory];

    if (filter) {
      if (filter.source) {
        history = history.filter((e) =&gt; e.source === filter.source);
      }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 301:7 - Line 343:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/message-routing.ts (Line 1:1 - Line 44:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn697" onclick="toggleCodeBlock('cloneGroup697', 'expandBtn697', 'collapseBtn697')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn697" onclick="toggleCodeBlock('cloneGroup697', 'expandBtn697', 'collapseBtn697')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup697"><code class="language-typescript text-sm text-gray-800">if (filter.event) {
        history = history.filter((e) =&gt; e.event === filter.event);
      }
      if (filter.since) {
        history = history.filter((e) =&gt; e.timestamp &gt;= filter.since!);
      }
      if (filter.limit) {
        history = history.slice(-filter.limit);
      }
    }

    return history;
  }

  /**
   * Wait for event
   */
  async waitForEvent(
    pattern: string | RegExp,
    timeout: number = 30000,
    filter?: EventFilter
  ): Promise&lt;EventPayload&gt; {
    return new Promise((resolve, reject) =&gt; {
      const timer = setTimeout(() =&gt; {
        this.unsubscribe(subscriptionId);
        reject(new Error('Event wait timeout'));
      }, timeout);

      const subscriptionId = this.subscribe(
        pattern,
        (payload) =&gt; {
          clearTimeout(timer);
          this.unsubscribe(subscriptionId);
          resolve(payload);
        },
        { filter, once: true }
      );
    });
  }

  /**
   * Create event channel
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 370:2 - Line 393:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/message-routing.ts (Line 84:1 - Line 109:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn698" onclick="toggleCodeBlock('cloneGroup698', 'expandBtn698', 'collapseBtn698')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn698" onclick="toggleCodeBlock('cloneGroup698', 'expandBtn698', 'collapseBtn698')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup698"><code class="language-typescript text-sm text-gray-800">: {
    totalSubscriptions: number;
    queueSize: number;
    historySize: number;
    subscriptionsByPattern: Record&lt;string, number&gt;;
  } {
    const stats: any = {
      totalSubscriptions: this.subscriptions.size,
      queueSize: this.processingQueue.length,
      historySize: this.eventHistory.length,
      subscriptionsByPattern: {},
    };

    this.subscriptions.forEach((sub) =&gt; {
      const pattern = sub.pattern.toString();
      stats.subscriptionsByPattern[pattern] = (stats.subscriptionsByPattern[pattern] || 0) + 1;
    });

    return stats;
  }

  /**
   * Clear all
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus.ts (Line 402:1 - Line 459:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/event-bus/event-utilities.ts (Line 1:1 - Line 58:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn699" onclick="toggleCodeBlock('cloneGroup699', 'expandBtn699', 'collapseBtn699')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn699" onclick="toggleCodeBlock('cloneGroup699', 'expandBtn699', 'collapseBtn699')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup699"><code class="language-typescript text-sm text-gray-800">/**
 * Event channel for namespaced events
 */
export class EventChannel {
  constructor(
    private bus: IntegrationEventBus,
    private namespace: string
  ) {}

  /**
   * Publish event to channel
   */
  async publish(event: string, data: any, metadata?: Record&lt;string, any&gt;): Promise&lt;void&gt; {
    await this.bus.publish(this.namespace, event, data, metadata);
  }

  /**
   * Subscribe to channel events
   */
  subscribe(
    pattern: string | RegExp,
    handler: EventHandler,
    options?: {
      filter?: EventFilter;
      once?: boolean;
      priority?: number;
    }
  ): string {
    // Prefix pattern with namespace
    const namespacedPattern =
      typeof pattern === 'string'
        ? `${this.namespace}:${pattern}`
        : new RegExp(`^${this.namespace}:${pattern.source}$`, pattern.flags);

    return this.bus.subscribe(namespacedPattern, handler, options);
  }

  /**
   * Wait for channel event
   */
  async waitForEvent(
    pattern: string | RegExp,
    timeout?: number,
    filter?: EventFilter
  ): Promise&lt;EventPayload&gt; {
    const namespacedPattern =
      typeof pattern === 'string'
        ? `${this.namespace}:${pattern}`
        : new RegExp(`^${this.namespace}:${pattern.source}$`, pattern.flags);

    return this.bus.waitForEvent(namespacedPattern, timeout, filter);
  }
}

// Singleton instance
export const integrationEventBus = new IntegrationEventBus();

export default IntegrationEventBus;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 5:2 - Line 100:19), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/core-integration.ts (Line 5:2 - Line 100:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn700" onclick="toggleCodeBlock('cloneGroup700', 'expandBtn700', 'collapseBtn700')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn700" onclick="toggleCodeBlock('cloneGroup700', 'expandBtn700', 'collapseBtn700')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup700"><code class="language-typescript text-sm text-gray-800">{ WebhookManager } from '../webhook/webhook-manager';

export interface IntegrationConfig {
  name: string;
  version: string;
  description?: string;
  icon?: string;
  category?: string;
  tags?: string[];
  author?: string;
  documentation?: string;
  requiredCredentials?: string[];
  optionalCredentials?: string[];
  supportedFeatures?: string[];
  rateLimit?: {
    requests: number;
    period: number; // in seconds
  };
  webhooks?: {
    enabled: boolean;
    basePath?: string;
  };
  oauth?: {
    enabled: boolean;
    provider?: string;
  };
}

export interface IntegrationState {
  status: 'initializing' | 'connected' | 'disconnected' | 'error' | 'suspended';
  lastActivity?: Date;
  errorMessage?: string;
  errorCount: number;
  metadata?: Record&lt;string, any&gt;;
}

export interface IntegrationContext {
  userId: string;
  workspaceId?: string;
  environment?: 'development' | 'staging' | 'production';
  settings?: Record&lt;string, any&gt;;
}

export abstract class BaseIntegration extends EventEmitter {
  protected config: IntegrationConfig;
  protected state: IntegrationState;
  protected context?: IntegrationContext;
  protected httpClient?: AxiosInstance;
  protected webhookManager?: WebhookManager;
  protected oauth2Handler?: OAuth2Handler;
  protected credentialManager?: CredentialManager;
  private initializationPromise?: Promise&lt;void&gt;;
  private heartbeatInterval?: NodeJS.Timeout;
  private retryCount: number = 0;
  private maxRetries: number = 3;

  constructor(config: IntegrationConfig) {
    super();
    this.config = config;
    this.state = {
      status: 'initializing',
      errorCount: 0,
    };
  }

  /**
   * Initialize the integration
   */
  async initialize(context: IntegrationContext): Promise&lt;void&gt; {
    // Prevent multiple initializations
    if (this.initializationPromise) {
      return this.initializationPromise;
    }

    this.initializationPromise = this.performInitialization(context);
    return this.initializationPromise;
  }

  /**
   * Perform initialization
   */
  private async performInitialization(context: IntegrationContext): Promise&lt;void&gt; {
    try {
      this.context = context;
      this.setState('initializing');

      // Validate configuration
      await this.validateConfiguration();

      // Setup components
      await this.setupComponents();

      // Call abstract initialization method
      await this.onInitialize();

      // Start heartbeat</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 101:7 - Line 114:13), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/lifecycle-hooks.ts (Line 1:1 - Line 16:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn701" onclick="toggleCodeBlock('cloneGroup701', 'expandBtn701', 'collapseBtn701')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn701" onclick="toggleCodeBlock('cloneGroup701', 'expandBtn701', 'collapseBtn701')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup701"><code class="language-typescript text-sm text-gray-800">this.startHeartbeat();

      this.setState('connected');
      this.emit('initialized', { name: this.config.name });
    } catch (error: any) {
      this.handleError(error);
      throw error;
    }
  }

  /**
   * Abstract method for integration-specific initialization
   */
  protected abstract onInitialize</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 119:3 - Line 152:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/lifecycle-hooks.ts (Line 23:1 - Line 59:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn702" onclick="toggleCodeBlock('cloneGroup702', 'expandBtn702', 'collapseBtn702')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn702" onclick="toggleCodeBlock('cloneGroup702', 'expandBtn702', 'collapseBtn702')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup702"><code class="language-typescript text-sm text-gray-800">async connect(): Promise&lt;void&gt; {
    try {
      this.setState('initializing');

      // Call abstract connect method
      await this.onConnect();

      this.setState('connected');
      this.retryCount = 0;
      this.emit('connected', { name: this.config.name });
    } catch (error: any) {
      this.handleError(error);

      // Retry logic
      if (this.retryCount &lt; this.maxRetries) {
        this.retryCount++;
        const delay = 2 ** this.retryCount * 1000;

        this.emit('retry', {
          name: this.config.name,
          attempt: this.retryCount,
          delay,
        });

        setTimeout(() =&gt; this.connect(), delay);
      } else {
        throw error;
      }
    }
  }

  /**
   * Abstract method for integration-specific connection
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 158:3 - Line 176:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/lifecycle-hooks.ts (Line 68:1 - Line 89:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn703" onclick="toggleCodeBlock('cloneGroup703', 'expandBtn703', 'collapseBtn703')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn703" onclick="toggleCodeBlock('cloneGroup703', 'expandBtn703', 'collapseBtn703')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup703"><code class="language-typescript text-sm text-gray-800">async disconnect(): Promise&lt;void&gt; {
    try {
      // Stop heartbeat
      this.stopHeartbeat();

      // Call abstract disconnect method
      await this.onDisconnect();

      this.setState('disconnected');
      this.emit('disconnected', { name: this.config.name });
    } catch (error: any) {
      this.handleError(error);
      throw error;
    }
  }

  /**
   * Abstract method for integration-specific disconnection
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 182:3 - Line 199:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/lifecycle-hooks.ts (Line 98:1 - Line 119:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn704" onclick="toggleCodeBlock('cloneGroup704', 'expandBtn704', 'collapseBtn704')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn704" onclick="toggleCodeBlock('cloneGroup704', 'expandBtn704', 'collapseBtn704')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup704"><code class="language-typescript text-sm text-gray-800">protected async validateConfiguration(): Promise&lt;void&gt; {
    // Check required credentials
    if (this.config.requiredCredentials &amp;&amp; this.config.requiredCredentials.length &gt; 0) {
      for (const credentialName of this.config.requiredCredentials) {
        const hasCredential = await this.checkCredential(credentialName);
        if (!hasCredential) {
          throw new Error(`Missing required credential: ${credentialName}`);
        }
      }
    }

    // Call abstract validation method
    await this.onValidateConfiguration();
  }

  /**
   * Abstract method for integration-specific configuration validation
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 224:2 - Line 240:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/error-management.ts (Line 29:1 - Line 47:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn705" onclick="toggleCodeBlock('cloneGroup705', 'expandBtn705', 'collapseBtn705')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn705" onclick="toggleCodeBlock('cloneGroup705', 'expandBtn705', 'collapseBtn705')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup705"><code class="language-typescript text-sm text-gray-800">checkCredential(name: string): Promise&lt;boolean&gt; {
    if (!this.credentialManager || !this.context) {
      return false;
    }

    const credentials = this.credentialManager.findCredentials({
      integrationName: this.config.name,
      userId: this.context.userId,
      isActive: true,
    });

    return credentials.some((cred) =&gt; cred.name === name);
  }

  /**
   * Get credential value
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 241:2 - Line 266:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/error-management.ts (Line 50:1 - Line 77:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn706" onclick="toggleCodeBlock('cloneGroup706', 'expandBtn706', 'collapseBtn706')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn706" onclick="toggleCodeBlock('cloneGroup706', 'expandBtn706', 'collapseBtn706')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup706"><code class="language-typescript text-sm text-gray-800">getCredential(name: string): Promise&lt;string | null&gt; {
    if (!this.credentialManager || !this.context) {
      return null;
    }

    const credentials = this.credentialManager.findCredentials({
      integrationName: this.config.name,
      userId: this.context.userId,
      isActive: true,
    });

    const credential = credentials.find((cred) =&gt; cred.name === name);
    if (credential?.id) {
      const fullCredential = await this.credentialManager.retrieveCredential(
        credential.id,
        this.context.userId
      );
      return fullCredential?.value || null;
    }

    return null;
  }

  /**
   * Execute action
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 267:2 - Line 294:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/error-management.ts (Line 79:1 - Line 108:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn707" onclick="toggleCodeBlock('cloneGroup707', 'expandBtn707', 'collapseBtn707')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn707" onclick="toggleCodeBlock('cloneGroup707', 'expandBtn707', 'collapseBtn707')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup707"><code class="language-typescript text-sm text-gray-800">execute(action: string, params: any): Promise&lt;any&gt; {
    if (this.state.status !== 'connected') {
      throw new Error(`Integration ${this.config.name} is not connected`);
    }

    try {
      // Update last activity
      this.state.lastActivity = new Date();

      // Call abstract execute method
      const result = await this.onExecute(action, params);

      this.emit('action:executed', {
        name: this.config.name,
        action,
        params,
      });

      return result;
    } catch (error: any) {
      this.handleError(error);
      throw error;
    }
  }

  /**
   * Abstract method for integration-specific action execution
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 301:5 - Line 325:10), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/validation-framework.ts (Line 1:1 - Line 26:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn708" onclick="toggleCodeBlock('cloneGroup708', 'expandBtn708', 'collapseBtn708')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn708" onclick="toggleCodeBlock('cloneGroup708', 'expandBtn708', 'collapseBtn708')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup708"><code class="language-typescript text-sm text-gray-800">if (!this.config.webhooks?.enabled) {
      throw new Error(`Webhooks not enabled for ${this.config.name}`);
    }

    try {
      // Call abstract webhook handler
      const result = await this.onWebhook(path, data);

      this.emit('webhook:handled', {
        name: this.config.name,
        path,
        data,
      });

      return result;
    } catch (error: any) {
      this.handleError(error);
      throw error;
    }
  }

  /**
   * Abstract method for integration-specific webhook handling
   */
  protected abstract onWebhook</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 330:3 - Line 353:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/validation-framework.ts (Line 33:1 - Line 59:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn709" onclick="toggleCodeBlock('cloneGroup709', 'expandBtn709', 'collapseBtn709')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn709" onclick="toggleCodeBlock('cloneGroup709', 'expandBtn709', 'collapseBtn709')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup709"><code class="language-typescript text-sm text-gray-800">protected setState(status: IntegrationState['status'], errorMessage?: string): void {
    const previousStatus = this.state.status;
    this.state.status = status;

    if (errorMessage) {
      this.state.errorMessage = errorMessage;
    } else if (status === 'connected') {
      this.state.errorMessage = undefined;
      this.state.errorCount = 0;
    }

    if (previousStatus !== status) {
      this.emit('state:changed', {
        name: this.config.name,
        previousStatus,
        newStatus: status,
        errorMessage,
      });
    }
  }

  /**
   * Handle error
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 354:3 - Line 372:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/validation-framework.ts (Line 60:1 - Line 81:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn710" onclick="toggleCodeBlock('cloneGroup710', 'expandBtn710', 'collapseBtn710')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn710" onclick="toggleCodeBlock('cloneGroup710', 'expandBtn710', 'collapseBtn710')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup710"><code class="language-typescript text-sm text-gray-800">protected handleError(error: Error): void {
    this.state.errorCount++;
    this.setState('error', error.message);

    this.emit('error', {
      name: this.config.name,
      error: error.message,
      errorCount: this.state.errorCount,
    });

    // Suspend if too many errors
    if (this.state.errorCount &gt;= 10) {
      this.suspend();
    }
  }

  /**
   * Start heartbeat
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 373:2 - Line 393:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/validation-framework.ts (Line 84:1 - Line 105:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn711" onclick="toggleCodeBlock('cloneGroup711', 'expandBtn711', 'collapseBtn711')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn711" onclick="toggleCodeBlock('cloneGroup711', 'expandBtn711', 'collapseBtn711')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup711"><code class="language-typescript text-sm text-gray-800">: void {
    if (this.heartbeatInterval) {
      return;
    }

    this.heartbeatInterval = setInterval(async () =&gt; {
      try {
        await this.onHeartbeat();
        this.emit('heartbeat', {
          name: this.config.name,
          status: this.state.status,
        });
      } catch (error: any) {
        this.handleError(error);
      }
    }, 60000); // Every minute
  }

  /**
   * Stop heartbeat
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 451:2 - Line 471:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/helper-utilities.ts (Line 66:1 - Line 88:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn712" onclick="toggleCodeBlock('cloneGroup712', 'expandBtn712', 'collapseBtn712')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn712" onclick="toggleCodeBlock('cloneGroup712', 'expandBtn712', 'collapseBtn712')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup712"><code class="language-typescript text-sm text-gray-800">updateSettings(settings: Record&lt;string, any&gt;): Promise&lt;void&gt; {
    if (!this.context) {
      throw new Error('Integration not initialized');
    }

    this.context.settings = {
      ...this.context.settings,
      ...settings,
    };

    await this.onSettingsUpdate(settings);

    this.emit('settings:updated', {
      name: this.config.name,
      settings,
    });
  }

  /**
   * Abstract method for integration-specific settings update
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 491:2 - Line 500:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/helper-utilities.ts (Line 116:1 - Line 126:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn713" onclick="toggleCodeBlock('cloneGroup713', 'expandBtn713', 'collapseBtn713')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn713" onclick="toggleCodeBlock('cloneGroup713', 'expandBtn713', 'collapseBtn713')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup713"><code class="language-typescript text-sm text-gray-800">: Record&lt;string, any&gt; {
    return {
      name: this.config.name,
      version: this.config.version,
      description: this.config.description,
      icon: this.config.icon,
      category: this.config.category,
      tags: this.config.tags,
      author: this.config.author,
      documentation: this.config.documentation,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration.ts (Line 506:3 - Line 520:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/core/base-integration/metadata-handling.ts (Line 6:1 - Line 21:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn714" onclick="toggleCodeBlock('cloneGroup714', 'expandBtn714', 'collapseBtn714')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn714" onclick="toggleCodeBlock('cloneGroup714', 'expandBtn714', 'collapseBtn714')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup714"><code class="language-typescript text-sm text-gray-800">}

  /**
   * Cleanup resources
   */
  async cleanup(): Promise&lt;void&gt; {
    this.stopHeartbeat();
    await this.disconnect();
    this.removeAllListeners();

    this.emit('cleanup', { name: this.config.name });
  }
}

export default BaseIntegration;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 114:3 - Line 144:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/lifecycle-management.ts (Line 18:1 - Line 55:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn715" onclick="toggleCodeBlock('cloneGroup715', 'expandBtn715', 'collapseBtn715')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn715" onclick="toggleCodeBlock('cloneGroup715', 'expandBtn715', 'collapseBtn715')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup715"><code class="language-typescript text-sm text-gray-800">protected async makeRequest(endpoint: string, options: RequestOptions = {}): Promise&lt;any&gt; {
    // Check rate limits
    await this.checkRateLimit();

    // Build full URL
    const url = this.buildUrl(endpoint, options.queryParams);

    // Add authentication headers
    const headers = await this.getAuthHeaders(options.headers);

    // Make the request with retries
    const response = await this.executeWithRetry(
      async () =&gt; {
        return this.performRequest(url, {
          ...options,
          headers,
        });
      },
      options.retryCount || 3,
      options.retryDelay || 1000
    );

    // Update rate limit counters
    this.incrementRequestCount();

    return response;
  }

  /**
   * Build full URL with query parameters
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 145:3 - Line 167:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/lifecycle-management.ts (Line 56:1 - Line 81:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn716" onclick="toggleCodeBlock('cloneGroup716', 'expandBtn716', 'collapseBtn716')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn716" onclick="toggleCodeBlock('cloneGroup716', 'expandBtn716', 'collapseBtn716')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup716"><code class="language-typescript text-sm text-gray-800">private buildUrl(endpoint: string, queryParams?: Record&lt;string, any&gt;): string {
    const baseUrl = this.config.baseUrl || '';
    let url = endpoint.startsWith('http') ? endpoint : `${baseUrl}${endpoint}`;

    if (queryParams) {
      const params = new URLSearchParams();
      Object.entries(queryParams).forEach(([key, value]) =&gt; {
        if (value !== undefined &amp;&amp; value !== null) {
          params.append(key, String(value));
        }
      });
      const queryString = params.toString();
      if (queryString) {
        url += `${url.includes('?') ? '&amp;' : '?'}${queryString}`;
      }
    }

    return url;
  }

  /**
   * Get authentication headers based on auth type
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 168:2 - Line 199:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/lifecycle-management.ts (Line 84:1 - Line 117:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn717" onclick="toggleCodeBlock('cloneGroup717', 'expandBtn717', 'collapseBtn717')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn717" onclick="toggleCodeBlock('cloneGroup717', 'expandBtn717', 'collapseBtn717')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup717"><code class="language-typescript text-sm text-gray-800">getAuthHeaders(
    additionalHeaders?: Record&lt;string, string&gt;
  ): Promise&lt;Record&lt;string, string&gt;&gt; {
    const headers: Record&lt;string, string&gt; = {
      'Content-Type': 'application/json',
      ...additionalHeaders,
    };

    if (!this.credentials) {
      return headers;
    }

    switch (this.config.authType) {
      case 'apiKey':
        headers.Authorization = `Bearer ${this.credentials.data.apiKey}`;
        break;

      case 'oauth2':
        // Check if token needs refresh
        if (this.credentials.expiresAt &amp;&amp; new Date() &gt;= this.credentials.expiresAt) {
          await this.refreshOAuth2Token();
        }
        headers.Authorization = `Bearer ${this.credentials.data.accessToken}`;
        break;

      case 'basic': {
        const auth = Buffer.from(
          `${this.credentials.data.username}:${this.credentials.data.password}`
        ).toString('base64');
        headers.Authorization = `Basic ${auth}`;
        break;
      }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 233:2 - Line 272:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/error-handling.ts (Line 40:1 - Line 81:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn718" onclick="toggleCodeBlock('cloneGroup718', 'expandBtn718', 'collapseBtn718')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn718" onclick="toggleCodeBlock('cloneGroup718', 'expandBtn718', 'collapseBtn718')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup718"><code class="language-typescript text-sm text-gray-800">performRequest(url: string, options: RequestOptions): Promise&lt;any&gt; {
    const controller = new AbortController();
    const timeout = options.timeout || 30000;

    const timeoutId = setTimeout(() =&gt; controller.abort(), timeout);

    try {
      const response = await fetch(url, {
        method: options.method || 'GET',
        headers: options.headers,
        body: options.body ? JSON.stringify(options.body) : undefined,
        signal: controller.signal,
      });

      clearTimeout(timeoutId);

      if (!response.ok) {
        throw await this.handleResponseError(response);
      }

      const contentType = response.headers.get('content-type');
      if (contentType?.includes('application/json')) {
        return await response.json();
      }

      return await response.text();
    } catch (error: any) {
      clearTimeout(timeoutId);

      if (error.name === 'AbortError') {
        throw this.createError('TIMEOUT', `Request timed out after ${timeout}ms`);
      }

      throw error;
    }
  }

  /**
   * Handle HTTP response errors
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 273:2 - Line 297:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/error-handling.ts (Line 84:1 - Line 110:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn719" onclick="toggleCodeBlock('cloneGroup719', 'expandBtn719', 'collapseBtn719')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn719" onclick="toggleCodeBlock('cloneGroup719', 'expandBtn719', 'collapseBtn719')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup719"><code class="language-typescript text-sm text-gray-800">handleResponseError(response: Response): Promise&lt;IntegrationError&gt; {
    let errorBody: any;

    try {
      errorBody = await response.json();
    } catch {
      errorBody = await response.text();
    }

    const error = this.createError(
      `HTTP_${response.status}`,
      errorBody?.message || `Request failed with status ${response.status}`,
      response.status,
      errorBody
    );

    // Determine if error is retryable
    error.retryable = [408, 429, 500, 502, 503, 504].includes(response.status);

    return error;
  }

  /**
   * Execute function with retry logic
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 298:3 - Line 308:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 260:3 - Line 79:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn720" onclick="toggleCodeBlock('cloneGroup720', 'expandBtn720', 'collapseBtn720')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn720" onclick="toggleCodeBlock('cloneGroup720', 'expandBtn720', 'collapseBtn720')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup720"><code class="language-typescript text-sm text-gray-800">private async executeWithRetry&lt;T&gt;(
    fn: () =&gt; Promise&lt;T&gt;,
    maxRetries: number = 3,
    delay: number = 1000
  ): Promise&lt;T&gt; {
    let lastError: any;

    for (let attempt = 0; attempt &lt;= maxRetries; attempt++) {
      try {
        return await fn();
      } catch (error:</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 302:3 - Line 326:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/validation-methods.ts (Line 2:1 - Line 27:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn721" onclick="toggleCodeBlock('cloneGroup721', 'expandBtn721', 'collapseBtn721')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn721" onclick="toggleCodeBlock('cloneGroup721', 'expandBtn721', 'collapseBtn721')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup721"><code class="language-typescript text-sm text-gray-800">): Promise&lt;T&gt; {
    let lastError: any;

    for (let attempt = 0; attempt &lt;= maxRetries; attempt++) {
      try {
        return await fn();
      } catch (error: any) {
        lastError = error;

        if (!error.retryable || attempt === maxRetries) {
          throw error;
        }

        // Exponential backoff
        const waitTime = delay * 2 ** attempt;
        await this.sleep(waitTime);
      }
    }

    throw lastError;
  }

  /**
   * Check rate limits
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 327:2 - Line 354:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/validation-methods.ts (Line 31:1 - Line 59:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn722" onclick="toggleCodeBlock('cloneGroup722', 'expandBtn722', 'collapseBtn722')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn722" onclick="toggleCodeBlock('cloneGroup722', 'expandBtn722', 'collapseBtn722')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup722"><code class="language-typescript text-sm text-gray-800">: Promise&lt;void&gt; {
    if (!this.config.rateLimit) {
      return;
    }

    const now = Date.now();
    const periodMs = this.config.rateLimit.period * 1000;

    // Reset counter if period has passed
    if (now - this.requestResetTime &gt; periodMs) {
      this.requestCount = 0;
      this.requestResetTime = now;
    }

    // Check if limit exceeded
    if (this.requestCount &gt;= this.config.rateLimit.requests) {
      const waitTime = periodMs - (now - this.requestResetTime);
      throw this.createError(
        'RATE_LIMIT_EXCEEDED',
        `Rate limit exceeded. Try again in ${Math.ceil(waitTime / 1000)} seconds`,
        429
      );
    }
  }

  /**
   * Increment request counter
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 362:3 - Line 378:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/validation-methods.ts (Line 70:1 - Line 89:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn723" onclick="toggleCodeBlock('cloneGroup723', 'expandBtn723', 'collapseBtn723')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn723" onclick="toggleCodeBlock('cloneGroup723', 'expandBtn723', 'collapseBtn723')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup723"><code class="language-typescript text-sm text-gray-800">protected createError(
    code: string,
    message: string,
    statusCode?: number,
    details?: any
  ): IntegrationError {
    const error = new Error(message) as IntegrationError;
    error.code = code;
    error.statusCode = statusCode;
    error.details = details;
    error.name = 'IntegrationError';
    return error;
  }

  /**
   * Sleep utility
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 401:3 - Line 443:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration/utility-helpers.ts (Line 1:1 - Line 43:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn724" onclick="toggleCodeBlock('cloneGroup724', 'expandBtn724', 'collapseBtn724')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn724" onclick="toggleCodeBlock('cloneGroup724', 'expandBtn724', 'collapseBtn724')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup724"><code class="language-typescript text-sm text-gray-800">name: string;
  displayName: string;
  description: string;
  parameters: ActionParameter[];
  outputs: ActionOutput[];
}

export interface IntegrationTrigger {
  name: string;
  displayName: string;
  description: string;
  type: 'webhook' | 'polling' | 'manual';
  parameters: TriggerParameter[];
  outputs: TriggerOutput[];
}

export interface ActionParameter {
  name: string;
  displayName: string;
  type: 'string' | 'number' | 'boolean' | 'json' | 'options' | 'file';
  required: boolean;
  default?: any;
  description?: string;
  options?: Array&lt;{ name: string; value: any }&gt;;
  validation?: {
    min?: number;
    max?: number;
    pattern?: string;
    enum?: any[];
  };
}

export interface ActionOutput {
  name: string;
  displayName: string;
  type: string;
  description?: string;
}

export interface TriggerParameter extends ActionParameter {}
export interface TriggerOutput extends ActionOutput {}

export default BaseIntegration;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler.ts (Line 17:17 - Line 31:14), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/oauth/oauth2-handler.ts (Line 17:13 - Line 31:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn725" onclick="toggleCodeBlock('cloneGroup725', 'expandBtn725', 'collapseBtn725')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn725" onclick="toggleCodeBlock('cloneGroup725', 'expandBtn725', 'collapseBtn725')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup725"><code class="language-typescript text-sm text-gray-800">?: Record&lt;string, string&gt;;
}

export interface OAuth2Token {
  accessToken: string;
  refreshToken?: string;
  tokenType: string;
  expiresIn?: number;
  expiresAt?: Date;
  scope?: string;
  idToken?: string;
  raw?: any;
}

export interface OAuth2Session</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler.ts (Line 101:7 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler/authorization-flow.ts (Line 1:1 - Line 101:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn726" onclick="toggleCodeBlock('cloneGroup726', 'expandBtn726', 'collapseBtn726')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn726" onclick="toggleCodeBlock('cloneGroup726', 'expandBtn726', 'collapseBtn726')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup726"><code class="language-typescript text-sm text-gray-800">params.prompt = this.config.prompt;
    }

    // PKCE support
    let codeVerifier: string | undefined;
    let codeChallenge: string | undefined;

    if (this.config.usePKCE) {
      codeVerifier = this.generateCodeVerifier();
      codeChallenge = await this.generateCodeChallenge(codeVerifier);
      params.code_challenge = codeChallenge;
      params.code_challenge_method = 'S256';
    }

    // Add parameters to URL
    Object.entries(params).forEach(([key, value]) =&gt; {
      url.searchParams.append(key, value);
    });

    const authRequest: AuthorizationRequest = {
      authorizationUrl: url.toString(),
      state,
      codeVerifier,
      codeChallenge,
      nonce,
    };

    // Store pending authorization
    this.pendingAuthorizations.set(state, authRequest);

    // Clean up old pending authorizations after 10 minutes
    setTimeout(
      () =&gt; {
        this.pendingAuthorizations.delete(state);
      },
      10 * 60 * 1000
    );

    this.emit('authorization:generated', {
      integrationName,
      userId,
      state,
    });

    return authRequest;
  }

  /**
   * Exchange authorization code for tokens
   */
  async exchangeCodeForToken(
    code: string,
    state: string,
    integrationName: string,
    userId: string
  ): Promise&lt;OAuth2Token&gt; {
    // Verify state
    const pendingAuth = this.pendingAuthorizations.get(state);
    if (!pendingAuth) {
      throw new Error('Invalid or expired state parameter');
    }

    try {
      const params: Record&lt;string, string&gt; = {
        grant_type: 'authorization_code',
        code,
        client_id: this.config.clientId,
        client_secret: this.config.clientSecret,
        redirect_uri: this.config.redirectUri,
      };

      // Add PKCE verifier if used
      if (this.config.usePKCE &amp;&amp; pendingAuth.codeVerifier) {
        params.code_verifier = pendingAuth.codeVerifier;
      }

      // Make token request
      const response = await this.httpClient.post(
        this.config.tokenUrl,
        new URLSearchParams(params),
        {
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
        }
      );

      const tokenData = response.data;

      // Create token object
      const token: OAuth2Token = {
        accessToken: tokenData.access_token,
        refreshToken: tokenData.refresh_token,
        tokenType: tokenData.token_type || 'Bearer',
        expiresIn: tokenData.expires_in,
        expiresAt: tokenData.expires_in
          ? new Date(Date.now() + tokenData.expires_in * 1000)
          : undefined,
        scope: tokenData.scope,
        idToken: tokenData.id_token,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler.ts (Line 204:7 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler/token-management.ts (Line 4:1 - Line 102:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn727" onclick="toggleCodeBlock('cloneGroup727', 'expandBtn727', 'collapseBtn727')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn727" onclick="toggleCodeBlock('cloneGroup727', 'expandBtn727', 'collapseBtn727')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup727"><code class="language-typescript text-sm text-gray-800">// Create and store session
      const sessionId = this.generateSessionId();
      const session: OAuth2Session = {
        id: sessionId,
        integrationName,
        userId,
        token,
        createdAt: new Date(),
        updatedAt: new Date(),
        state,
        codeVerifier: pendingAuth.codeVerifier,
        codeChallenge: pendingAuth.codeChallenge,
        nonce: pendingAuth.nonce,
      };

      this.sessions.set(sessionId, session);

      // Clean up pending authorization
      this.pendingAuthorizations.delete(state);

      this.emit('token:obtained', {
        sessionId,
        integrationName,
        userId,
      });

      return token;
    } catch (error: any) {
      this.emit('token:error', {
        integrationName,
        userId,
        error: error.message,
      });

      throw new Error(`Failed to exchange code for token: ${error.message}`);
    }
  }

  /**
   * Refresh access token
   */
  async refreshAccessToken(sessionId: string): Promise&lt;OAuth2Token&gt; {
    const session = this.sessions.get(sessionId);
    if (!session) {
      throw new Error('Session not found');
    }

    if (!session.token.refreshToken) {
      throw new Error('No refresh token available');
    }

    try {
      const params: Record&lt;string, string&gt; = {
        grant_type: 'refresh_token',
        refresh_token: session.token.refreshToken,
        client_id: this.config.clientId,
        client_secret: this.config.clientSecret,
      };

      const response = await this.httpClient.post(
        this.config.tokenUrl,
        new URLSearchParams(params),
        {
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
        }
      );

      const tokenData = response.data;

      // Update token
      session.token = {
        accessToken: tokenData.access_token,
        refreshToken: tokenData.refresh_token || session.token.refreshToken,
        tokenType: tokenData.token_type || 'Bearer',
        expiresIn: tokenData.expires_in,
        expiresAt: tokenData.expires_in
          ? new Date(Date.now() + tokenData.expires_in * 1000)
          : undefined,
        scope: tokenData.scope || session.token.scope,
        idToken: tokenData.id_token,
        raw: tokenData,
      };

      session.updatedAt = new Date();

      this.emit('token:refreshed', {
        sessionId,
        integrationName: session.integrationName,
        userId: session.userId,
      });

      return session.token;
    } catch (error: any) {
      this.emit('token:refresh_error', {
        sessionId,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler.ts (Line 304:7 - Line 366:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler/session-handling.ts (Line 4:1 - Line 67:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn728" onclick="toggleCodeBlock('cloneGroup728', 'expandBtn728', 'collapseBtn728')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn728" onclick="toggleCodeBlock('cloneGroup728', 'expandBtn728', 'collapseBtn728')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup728"><code class="language-typescript text-sm text-gray-800">throw new Error(`Failed to refresh token: ${error.message}`);
    }
  }

  /**
   * Revoke token
   */
  async revokeToken(sessionId: string, revokeUrl?: string): Promise&lt;void&gt; {
    const session = this.sessions.get(sessionId);
    if (!session) {
      throw new Error('Session not found');
    }

    if (revokeUrl) {
      try {
        await this.httpClient.post(
          revokeUrl,
          new URLSearchParams({
            token: session.token.accessToken,
            token_type_hint: 'access_token',
            client_id: this.config.clientId,
            client_secret: this.config.clientSecret,
          }),
          {
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
            },
          }
        );

        // Also revoke refresh token if available
        if (session.token.refreshToken) {
          await this.httpClient.post(
            revokeUrl,
            new URLSearchParams({
              token: session.token.refreshToken,
              token_type_hint: 'refresh_token',
              client_id: this.config.clientId,
              client_secret: this.config.clientSecret,
            }),
            {
              headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
              },
            }
          );
        }
      } catch (_error: any) {}
    }

    // Remove session
    this.sessions.delete(sessionId);

    this.emit('token:revoked', {
      sessionId,
      integrationName: session.integrationName,
      userId: session.userId,
    });
  }

  /**
   * Get valid access token (auto-refresh if needed)
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler.ts (Line 367:2 - Line 395:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler/session-handling.ts (Line 69:1 - Line 96:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn729" onclick="toggleCodeBlock('cloneGroup729', 'expandBtn729', 'collapseBtn729')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn729" onclick="toggleCodeBlock('cloneGroup729', 'expandBtn729', 'collapseBtn729')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup729"><code class="language-typescript text-sm text-gray-800">getValidAccessToken(sessionId: string): Promise&lt;string&gt; {
    const session = this.sessions.get(sessionId);
    if (!session) {
      throw new Error('Session not found');
    }

    // Check if token is expired or about to expire (5 minutes buffer)
    const now = new Date();
    const bufferTime = 5 * 60 * 1000; // 5 minutes

    if (
      session.token.expiresAt &amp;&amp;
      new Date(session.token.expiresAt.getTime() - bufferTime) &lt;= now
    ) {
      // Token is expired or about to expire, refresh it
      if (session.token.refreshToken) {
        const newToken = await this.refreshAccessToken(sessionId);
        return newToken.accessToken;
      } else {
        throw new Error('Token expired and no refresh token available');
      }
    }

    return session.token.accessToken;
  }

  /**
   * Create authenticated HTTP client
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler.ts (Line 478:2 - Line 500:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/auth/oauth2-handler/token-validation.ts (Line 102:1 - Line 126:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn730" onclick="toggleCodeBlock('cloneGroup730', 'expandBtn730', 'collapseBtn730')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn730" onclick="toggleCodeBlock('cloneGroup730', 'expandBtn730', 'collapseBtn730')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup730"><code class="language-typescript text-sm text-gray-800">: {
    totalSessions: number;
    pendingAuthorizations: number;
    sessionsByIntegration: Record&lt;string, number&gt;;
    sessionsByUser: Record&lt;string, number&gt;;
  } {
    const sessionsByIntegration: Record&lt;string, number&gt; = {};
    const sessionsByUser: Record&lt;string, number&gt; = {};

    this.sessions.forEach((session) =&gt; {
      sessionsByIntegration[session.integrationName] =
        (sessionsByIntegration[session.integrationName] || 0) + 1;
      sessionsByUser[session.userId] = (sessionsByUser[session.userId] || 0) + 1;
    });

    return {
      totalSessions: this.sessions.size,
      pendingAuthorizations: this.pendingAuthorizations.size,
      sessionsByIntegration,
      sessionsByUser,
    };
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection.ts (Line 290:6 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection/query-operations.ts (Line 134:2 - Line 144:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn731" onclick="toggleCodeBlock('cloneGroup731', 'expandBtn731', 'collapseBtn731')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn731" onclick="toggleCodeBlock('cloneGroup731', 'expandBtn731', 'collapseBtn731')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup731"><code class="language-typescript text-sm text-gray-800">);

    // Get applied migrations
    const appliedResult = await this.query&lt;{ version: number }&gt;(
      'SELECT version FROM migrations ORDER BY version'
    );
    const applied = new Set(appliedResult.rows.map((r) =&gt; r.version));

    // Run pending migrations
    for (const migration of migrations.sort((a, b) =&gt; a.version - b.version)) {
      if (!applied.has(migration.version)) {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection.ts (Line 301:9 - Line 331:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection/transaction-management.ts (Line 1:1 - Line 34:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn732" onclick="toggleCodeBlock('cloneGroup732', 'expandBtn732', 'collapseBtn732')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn732" onclick="toggleCodeBlock('cloneGroup732', 'expandBtn732', 'collapseBtn732')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup732"><code class="language-typescript text-sm text-gray-800">await this.transaction(async (client) =&gt; {
          await client.query(migration.up);
          await client.query('INSERT INTO migrations (version, name) VALUES ($1, $2)', [
            migration.version,
            migration.name,
          ]);
        });
      }
    }
  }

  /**
   * Get pool statistics
   */
  getPoolStats(): {
    total: number;
    idle: number;
    waiting: number;
  } | null {
    if (!this.pool) return null;

    return {
      total: this.pool.totalCount,
      idle: this.pool.idleCount,
      waiting: this.pool.waitingCount,
    };
  }

  /**
   * Disconnect from PostgreSQL
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection.ts (Line 332:2 - Line 348:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection/transaction-management.ts (Line 37:1 - Line 54:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn733" onclick="toggleCodeBlock('cloneGroup733', 'expandBtn733', 'collapseBtn733')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn733" onclick="toggleCodeBlock('cloneGroup733', 'expandBtn733', 'collapseBtn733')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup733"><code class="language-typescript text-sm text-gray-800">: Promise&lt;void&gt; {
    if (this.reconnectInterval) {
      clearTimeout(this.reconnectInterval);
      this.reconnectInterval = null;
    }

    if (this.pool) {
      await this.pool.end();
      this.pool = null;
      this.isConnected = false;
      this.emit('disconnected');
    }
  }

  /**
   * Check if connected
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection.ts (Line 349:2 - Line 369:2), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/postgresql/connection/transaction-management.ts (Line 56:1 - Line 77:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn734" onclick="toggleCodeBlock('cloneGroup734', 'expandBtn734', 'collapseBtn734')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn734" onclick="toggleCodeBlock('cloneGroup734', 'expandBtn734', 'collapseBtn734')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup734"><code class="language-typescript text-sm text-gray-800">: boolean {
    return this.isConnected &amp;&amp; this.pool !== null;
  }
}

// Export singleton instance
let pgConnection: PostgreSQLConnection | null = null;

export function getPostgreSQLConnection(config?: PostgreSQLConfig): PostgreSQLConnection {
  if (!pgConnection &amp;&amp; config) {
    pgConnection = new PostgreSQLConnection(config);
  }

  if (!pgConnection) {
    throw new Error('PostgreSQL connection not initialized. Provide config on first call.');
  }

  return pgConnection;
}

export default PostgreSQLConnection;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection.ts (Line 102:3 - Line 133:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection/error-handling.ts (Line 2:1 - Line 34:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn735" onclick="toggleCodeBlock('cloneGroup735', 'expandBtn735', 'collapseBtn735')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn735" onclick="toggleCodeBlock('cloneGroup735', 'expandBtn735', 'collapseBtn735')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup735"><code class="language-typescript text-sm text-gray-800">}

  /**
   * Handle connection errors and attempt reconnection
   */
  private handleConnectionError(): void {
    if (this.reconnectInterval) return;

    this.isConnected = false;

    if (this.reconnectAttempts &gt;= this.maxReconnectAttempts) {
      this.emit('reconnectFailed');
      return;
    }

    const delay = Math.min(1000 * 2 ** this.reconnectAttempts, 30000);

    this.reconnectInterval = setTimeout(async () =&gt; {
      this.reconnectInterval = null;
      this.reconnectAttempts++;

      try {
        await this.connect();
      } catch (_error) {
        this.handleConnectionError();
      }
    }, delay);
  }

  /**
   * Ping the database to verify connection
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection.ts (Line 134:2 - Line 149:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection/error-handling.ts (Line 37:1 - Line 53:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn736" onclick="toggleCodeBlock('cloneGroup736', 'expandBtn736', 'collapseBtn736')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn736" onclick="toggleCodeBlock('cloneGroup736', 'expandBtn736', 'collapseBtn736')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup736"><code class="language-typescript text-sm text-gray-800">: Promise&lt;boolean&gt; {
    try {
      if (!this.db) {
        throw new Error('Database not connected');
      }

      const result = await this.db.admin().ping();
      return result.ok === 1;
    } catch (_error) {
      return false;
    }
  }

  /**
   * Get database instance
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection.ts (Line 170:2 - Line 187:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection/error-handling.ts (Line 80:1 - Line 98:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn737" onclick="toggleCodeBlock('cloneGroup737', 'expandBtn737', 'collapseBtn737')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn737" onclick="toggleCodeBlock('cloneGroup737', 'expandBtn737', 'collapseBtn737')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup737"><code class="language-typescript text-sm text-gray-800">: Promise&lt;void&gt; {
    if (this.reconnectInterval) {
      clearTimeout(this.reconnectInterval);
      this.reconnectInterval = null;
    }

    if (this.client) {
      await this.client.close();
      this.client = null;
      this.db = null;
      this.isConnected = false;
      this.emit('disconnected');
    }
  }

  /**
   * Check if connected
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection.ts (Line 201:3 - Line 214:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection/utility-methods.ts (Line 1:1 - Line 15:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn738" onclick="toggleCodeBlock('cloneGroup738', 'expandBtn738', 'collapseBtn738')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn738" onclick="toggleCodeBlock('cloneGroup738', 'expandBtn738', 'collapseBtn738')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup738"><code class="language-typescript text-sm text-gray-800">): Promise&lt;void&gt; {
    if (!this.db) {
      throw new Error('Database not connected');
    }

    for (const indexConfig of indexes) {
      const collection = this.db.collection(indexConfig.collection);
      await collection.createIndex(indexConfig.index, indexConfig.options || {});
    }
  }

  /**
   * Run a transaction
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection.ts (Line 215:2 - Line 232:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection/utility-methods.ts (Line 17:1 - Line 36:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn739" onclick="toggleCodeBlock('cloneGroup739', 'expandBtn739', 'collapseBtn739')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn739" onclick="toggleCodeBlock('cloneGroup739', 'expandBtn739', 'collapseBtn739')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup739"><code class="language-typescript text-sm text-gray-800">runTransaction&lt;T&gt;(callback: (session: any) =&gt; Promise&lt;T&gt;, options?: any): Promise&lt;T&gt; {
    if (!this.client) {
      throw new Error('MongoDB client not connected');
    }

    const session = this.client.startSession();

    try {
      const result = await session.withTransaction(async () =&gt; callback(session), options);
      return result as T;
    } finally {
      await session.endSession();
    }
  }

  /**
   * Get connection statistics
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection.ts (Line 233:2 - Line 268:2), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/mongodb/connection/utility-methods.ts (Line 39:1 - Line 75:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn740" onclick="toggleCodeBlock('cloneGroup740', 'expandBtn740', 'collapseBtn740')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn740" onclick="toggleCodeBlock('cloneGroup740', 'expandBtn740', 'collapseBtn740')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup740"><code class="language-typescript text-sm text-gray-800">: Promise&lt;any&gt; {
    if (!this.db) {
      throw new Error('Database not connected');
    }

    const stats = await this.db.stats();
    const serverStatus = await this.db.admin().serverStatus();

    return {
      database: stats,
      server: {
        connections: serverStatus.connections,
        network: serverStatus.network,
        opcounters: serverStatus.opcounters,
        mem: serverStatus.mem,
      },
    };
  }
}

// Export singleton instance
let mongoConnection: MongoDBConnection | null = null;

export function getMongoConnection(config?: MongoDBConfig): MongoDBConnection {
  if (!mongoConnection &amp;&amp; config) {
    mongoConnection = new MongoDBConnection(config);
  }

  if (!mongoConnection) {
    throw new Error('MongoDB connection not initialized. Provide config on first call.');
  }

  return mongoConnection;
}

export default MongoDBConnection;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/service/base-service.ts (Line 134:2 - Line 144:15), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/service/base-service.ts (Line 99:2 - Line 109:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn741" onclick="toggleCodeBlock('cloneGroup741', 'expandBtn741', 'collapseBtn741')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn741" onclick="toggleCodeBlock('cloneGroup741', 'expandBtn741', 'collapseBtn741')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup741"><code class="language-typescript text-sm text-gray-800">data: Partial&lt;T&gt;): Promise&lt;ServiceResult&lt;T&gt;&gt; {
    return this.execute(async () =&gt; {
      // Validate using validator if provided
      if (this.validator) {
        const validationResult = await this.validator.validate(data);
        if (!validationResult.valid) {
          throw new Error(`Validation failed: ${validationResult.errors.map(e =&gt; e.message).join(', ')}`);
        }
      }
      
      await this.validateUpdate</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/validation.ts (Line 63:15 - Line 74:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/validation.ts (Line 33:14 - Line 44:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn742" onclick="toggleCodeBlock('cloneGroup742', 'expandBtn742', 'collapseBtn742')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn742" onclick="toggleCodeBlock('cloneGroup742', 'expandBtn742', 'collapseBtn742')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup742"><code class="language-typescript text-sm text-gray-800">(schema: SchemaDefinition) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;
    const validator = new SchemaValidator(schema);

    descriptor.value = async function (...args: any[]) {
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/core.ts (Line 32:6 - Line 43:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/core.ts (Line 4:4 - Line 16:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn743" onclick="toggleCodeBlock('cloneGroup743', 'expandBtn743', 'collapseBtn743')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn743" onclick="toggleCodeBlock('cloneGroup743', 'expandBtn743', 'collapseBtn743')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup743"><code class="language-typescript text-sm text-gray-800">(logger?: Logger) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const className = target.constructor.name;

    descriptor.value = async function (...args: any[]) {
      const methodLogger = logger || new Logger(`${className}:${propertyKey}`);
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 34:7 - Line 50:12), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 4:2 - Line 20:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn744" onclick="toggleCodeBlock('cloneGroup744', 'expandBtn744', 'collapseBtn744')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn744" onclick="toggleCodeBlock('cloneGroup744', 'expandBtn744', 'collapseBtn744')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup744"><code class="language-typescript text-sm text-gray-800">) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      if (!user.permissions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 64:5 - Line 80:48), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 4:2 - Line 20:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn745" onclick="toggleCodeBlock('cloneGroup745', 'expandBtn745', 'collapseBtn745')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn745" onclick="toggleCodeBlock('cloneGroup745', 'expandBtn745', 'collapseBtn745')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup745"><code class="language-typescript text-sm text-gray-800">) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      // Extract resource ID from args using the path</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 110:9 - Line 126:43), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 34:11 - Line 20:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn746" onclick="toggleCodeBlock('cloneGroup746', 'expandBtn746', 'collapseBtn746')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn746" onclick="toggleCodeBlock('cloneGroup746', 'expandBtn746', 'collapseBtn746')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup746"><code class="language-typescript text-sm text-gray-800">: string) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      // Extract action from method name or args</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 146:6 - Line 162:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 34:11 - Line 20:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn747" onclick="toggleCodeBlock('cloneGroup747', 'expandBtn747', 'collapseBtn747')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn747" onclick="toggleCodeBlock('cloneGroup747', 'expandBtn747', 'collapseBtn747')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup747"><code class="language-typescript text-sm text-gray-800">: string) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node.ts (Line 106:9 - Line 144:2), /home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node/command-handlers.ts (Line 10:1 - Line 45:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn748" onclick="toggleCodeBlock('cloneGroup748', 'expandBtn748', 'collapseBtn748')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn748" onclick="toggleCodeBlock('cloneGroup748', 'expandBtn748', 'collapseBtn748')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup748"><code class="language-typescript text-sm text-gray-800">const nodeName = options.name || answers.name;
        const category = options.category || answers.category;
        const template = options.template || answers.template || 'basic';

        spinner.text = `Creating ${nodeName} node...`;

        // Create node directory
        const nodeDir = join(
          process.cwd(),
          'nodes',
          category.toLowerCase(),
          nodeName.toLowerCase()
        );
        ensureDirSync(nodeDir);

        // Generate node files
        await generateNodeFiles(nodeDir, {
          ...answers,
          name: nodeName,
          category,
          template,
        });

        spinner.succeed(chalk.green(`✅ Node '${nodeName}' created successfully!`));

        if (!options.skipInstall) {
          const installSpinner = ora('Installing dependencies...').start();
          try {
            await execAsync('pnpm install', { cwd: nodeDir });
            installSpinner.succeed(chalk.green('Dependencies installed'));
          } catch (_error) {
            installSpinner.fail(chalk.red('Failed to install dependencies'));
          }
        }
      } catch (_error) {
        spinner.fail(chalk.red('Failed to create node'));
        process.exit(1);
      }
    });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node.ts (Line 145:1 - Line 199:2), /home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node/command-handlers.ts (Line 45:1 - Line 99:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn749" onclick="toggleCodeBlock('cloneGroup749', 'expandBtn749', 'collapseBtn749')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn749" onclick="toggleCodeBlock('cloneGroup749', 'expandBtn749', 'collapseBtn749')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup749"><code class="language-typescript text-sm text-gray-800">}

function testNodeCommand(): Command {
  return new Command('test')
    .description('Test a node')
    .option('-n, --name &lt;name&gt;', 'Node name')
    .option('-d, --data &lt;data&gt;', 'Test data JSON')
    .action(async (_options) =&gt; {
      const spinner = ora('Running node tests...').start();

      try {
        // Implementation for testing nodes
        spinner.succeed(chalk.green('Tests passed!'));
      } catch (_error) {
        spinner.fail(chalk.red('Tests failed'));
        process.exit(1);
      }
    });
}

function buildNodeCommand(): Command {
  return new Command('build')
    .description('Build a node')
    .option('-n, --name &lt;name&gt;', 'Node name')
    .option('-w, --watch', 'Watch for changes')
    .action(async (options) =&gt; {
      const spinner = ora('Building node...').start();

      try {
        const command = options.watch ? 'pnpm build:watch' : 'pnpm build';
        await execAsync(command);
        spinner.succeed(chalk.green('Node built successfully!'));
      } catch (_error) {
        spinner.fail(chalk.red('Build failed'));
        process.exit(1);
      }
    });
}

function validateNodeCommand(): Command {
  return new Command('validate')
    .description('Validate a node definition')
    .option('-n, --name &lt;name&gt;', 'Node name')
    .action(async (_options) =&gt; {
      const spinner = ora('Validating node...').start();

      try {
        // Implementation for validating nodes
        spinner.succeed(chalk.green('Node is valid!'));
      } catch (_error) {
        spinner.fail(chalk.red('Validation failed'));
        process.exit(1);
      }
    });
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node.ts (Line 201:1 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node/file-generation.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn750" onclick="toggleCodeBlock('cloneGroup750', 'expandBtn750', 'collapseBtn750')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn750" onclick="toggleCodeBlock('cloneGroup750', 'expandBtn750', 'collapseBtn750')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup750"><code class="language-typescript text-sm text-gray-800">async function generateNodeFiles(nodeDir: string, data: any): Promise&lt;void&gt; {
  // Package.json template
  const packageJsonTemplate = `{
  &quot;name&quot;: &quot;@reporunner/node-{{name}}&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;{{description}}&quot;,
  &quot;main&quot;: &quot;dist/index.js&quot;,
  &quot;types&quot;: &quot;dist/index.d.ts&quot;,
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;tsc&quot;,
    &quot;build:watch&quot;: &quot;tsc --watch&quot;,
    &quot;test&quot;: &quot;jest&quot;,
    &quot;test:watch&quot;: &quot;jest --watch&quot;,
    &quot;lint&quot;: &quot;eslint src/**/*.ts&quot;,
    &quot;lint:fix&quot;: &quot;eslint src/**/*.ts --fix&quot;
  },
  &quot;dependencies&quot;: {
    &quot;@reporunner/core&quot;: &quot;workspace:*&quot;,
    &quot;@reporunner/shared&quot;: &quot;workspace:*&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;typescript&quot;: &quot;catalog:&quot;,
    &quot;@types/node&quot;: &quot;catalog:&quot;,
    &quot;jest&quot;: &quot;catalog:&quot;,
    &quot;@types/jest&quot;: &quot;catalog:&quot;,
    &quot;eslint&quot;: &quot;catalog:&quot;
  },
  &quot;keywords&quot;: [&quot;reporunner&quot;, &quot;node&quot;, &quot;{{category}}&quot;, &quot;{{name}}&quot;],
  &quot;author&quot;: &quot;{{author}}&quot;
}`;

  // Main node template
  const nodeTemplate = getNodeTemplate(data.template);

  // Credentials template
  const credentialsTemplate = getCredentialsTemplate(data.credentialTypes || []);

  // Properties template
  const propertiesTemplate = getPropertiesTemplate(data.template);

  // README template
  const readmeTemplate = `# {{name}} Node

{{description}}

## Installation

\`\`\`bash
pnpm install
\`\`\`

## Development

\`\`\`bash
# Build
pnpm build

# Watch for changes
pnpm build:watch

# Run tests
pnpm test
\`\`\`

## Usage

This node provides {{name}} integration for Reporunner workflows.

### Operations

- **Get Data**: Retrieve data from {{name}}
{{#addCredentials}}

### Credentials

This node requires {{name}} credentials. Configure them in your Reporunner instance.
{{/addCredentials}}

## Author

{{author}}
`;

  // TypeScript config
  const tsConfigTemplate = `{
  &quot;extends&quot;: &quot;../../../tsconfig.base.json&quot;,
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;dist&quot;,
    &quot;rootDir&quot;: &quot;src&quot;
  },
  &quot;include&quot;: [&quot;src/**/*&quot;],
  &quot;exclude&quot;: [&quot;dist&quot;, &quot;node_modules&quot;, &quot;**/*.test.ts&quot;]
}`;

  // Generate files
  writeFileSync(join(nodeDir, 'package.json'), Mustache.render(packageJsonTemplate, data));

  writeFileSync(join(nodeDir, 'src/index.ts'), Mustache.render(nodeTemplate, data));

  writeFileSync(join(nodeDir, 'src/credentials.ts'), Mustache.render(credentialsTemplate, data));</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node.ts (Line 302:3 - Line 308:2), /home/margon/Reporunner/reporunner/packages/@reporunner/cli/src/commands/node/node-templates.ts (Line 1:1 - Line 7:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn751" onclick="toggleCodeBlock('cloneGroup751', 'expandBtn751', 'collapseBtn751')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn751" onclick="toggleCodeBlock('cloneGroup751', 'expandBtn751', 'collapseBtn751')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup751"><code class="language-typescript text-sm text-gray-800">writeFileSync(join(nodeDir, 'src/properties.ts'), Mustache.render(propertiesTemplate, data));

  writeFileSync(join(nodeDir, 'README.md'), Mustache.render(readmeTemplate, data));

  writeFileSync(join(nodeDir, 'tsconfig.json'), tsConfigTemplate);

  /</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/middleware/rbac-middleware.ts (Line 57:2 - Line 66:16), /home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/middleware/rbac-middleware.ts (Line 22:11 - Line 32:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn752" onclick="toggleCodeBlock('cloneGroup752', 'expandBtn752', 'collapseBtn752')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn752" onclick="toggleCodeBlock('cloneGroup752', 'expandBtn752', 'collapseBtn752')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup752"><code class="language-typescript text-sm text-gray-800">) {
    return async (req: AuthenticatedRequest, res: Response, next: NextFunction) =&gt; {
      try {
        if (!req.userId) {
          return res.status(401).json({ error: 'Not authenticated' });
        }

        const userRoleIds = await config.getUserRoles(req.userId);
        const userRoles = config.roles.filter((role) =&gt; userRoleIds.includes(role.id));
        const hasRequiredRole</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/api/src/middleware/validation.ts (Line 66:18 - Line 75:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware/data-transformation.ts (Line 16:24 - Line 25:27)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn753" onclick="toggleCodeBlock('cloneGroup753', 'expandBtn753', 'collapseBtn753')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn753" onclick="toggleCodeBlock('cloneGroup753', 'expandBtn753', 'collapseBtn753')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup753"><code class="language-typescript text-sm text-gray-800">${rule.enum.join(', ')}`);
      }

      // Custom validation
      if (rule.custom) {
        const result = rule.custom(value);
        if (typeof result === 'string') {
          errors.push(result);
        } else if (!result) {
          errors.push(`</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/core/src/schemas/index.ts (Line 21:2 - Line 27:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller/controller-core.ts (Line 21:5 - Line 28:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn754" onclick="toggleCodeBlock('cloneGroup754', 'expandBtn754', 'collapseBtn754')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn754" onclick="toggleCodeBlock('cloneGroup754', 'expandBtn754', 'collapseBtn754')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup754"><code class="language-typescript text-sm text-gray-800">z.object({
  id: z.string(),
  source: z.string(),
  target: z.string(),
  sourceHandle: z.string().optional(),
  targetHandle: z.string().optional(),
});</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/types/workflow.ts (Line 27:2 - Line 38:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/interfaces/index.ts (Line 5:2 - Line 16:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn755" onclick="toggleCodeBlock('cloneGroup755', 'expandBtn755', 'collapseBtn755')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn755" onclick="toggleCodeBlock('cloneGroup755', 'expandBtn755', 'collapseBtn755')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup755"><code class="language-typescript text-sm text-gray-800">{
  id: string;
  workflowId: string;
  userId: string;
  status: 'pending' | 'running' | 'success' | 'error' | 'cancelled';
  startedAt: Date;
  completedAt?: Date;
  executedNodes: string[];
  currentNode?: string;
  results: Map&lt;string, any&gt;;
  error?: string;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/EmbeddingsService.ts (Line 204:2 - Line 220:6), /home/margon/Reporunner/reporunner/packages/backend/src/services/EmbeddingsService.ts (Line 153:7 - Line 168:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn756" onclick="toggleCodeBlock('cloneGroup756', 'expandBtn756', 'collapseBtn756')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn756" onclick="toggleCodeBlock('cloneGroup756', 'expandBtn756', 'collapseBtn756')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup756"><code class="language-typescript text-sm text-gray-800">);

    return result.rows.map((row: any) =&gt; ({
      id: row.id,
      contentId: row.content_id,
      contentType: row.content_type,
      textContent: row.text_content,
      metadata: row.metadata,
      createdAt: row.created_at,
      updatedAt: row.updated_at,
      similarity: parseFloat(row.similarity),
    }));
  }

  /**
   * Delete embedding by content ID
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 212:15 - Line 219:6), /home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 175:7 - Line 182:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn757" onclick="toggleCodeBlock('cloneGroup757', 'expandBtn757', 'collapseBtn757')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn757" onclick="toggleCodeBlock('cloneGroup757', 'expandBtn757', 'collapseBtn757')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup757"><code class="language-typescript text-sm text-gray-800">): Promise&lt;void&gt; {
    const workflowId = this.socketToWorkflow.get(socketId);
    const userId = this.socketToUser.get(socketId);

    if (!workflowId || !userId) return;

    const workflowUsers = this.workflowPresence.get(workflowId);
    const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 251:3 - Line 261:10), /home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 175:7 - Line 222:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn758" onclick="toggleCodeBlock('cloneGroup758', 'expandBtn758', 'collapseBtn758')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn758" onclick="toggleCodeBlock('cloneGroup758', 'expandBtn758', 'collapseBtn758')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup758"><code class="language-typescript text-sm text-gray-800">): Promise&lt;void&gt; {
    const workflowId = this.socketToWorkflow.get(socketId);
    const userId = this.socketToUser.get(socketId);

    if (!workflowId || !userId) return;

    const workflowUsers = this.workflowPresence.get(workflowId);
    const userPresence = workflowUsers?.get(userId);

    if (userPresence) {
      userPresence.selection</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 288:13 - Line 299:11), /home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 250:12 - Line 222:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn759" onclick="toggleCodeBlock('cloneGroup759', 'expandBtn759', 'collapseBtn759')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn759" onclick="toggleCodeBlock('cloneGroup759', 'expandBtn759', 'collapseBtn759')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup759"><code class="language-typescript text-sm text-gray-800">]
  ): Promise&lt;void&gt; {
    const workflowId = this.socketToWorkflow.get(socketId);
    const userId = this.socketToUser.get(socketId);

    if (!workflowId || !userId) return;

    const workflowUsers = this.workflowPresence.get(workflowId);
    const userPresence = workflowUsers?.get(userId);

    if (userPresence) {
      userPresence.activeArea</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 111:3 - Line 127:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/error-routes.ts (Line 10:1 - Line 30:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn760" onclick="toggleCodeBlock('cloneGroup760', 'expandBtn760', 'collapseBtn760')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn760" onclick="toggleCodeBlock('cloneGroup760', 'expandBtn760', 'collapseBtn760')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup760"><code class="language-typescript text-sm text-gray-800">router.get('/errors/:errorId', (req, res) =&gt; {
    const { errorId } = req.params;
    const error = errorTracker.getError(errorId);

    if (!error) {
      res.status(404).json({
        success: false,
        message: 'Error not found',
      });
      return;
    }

    res.json({
      success: true,
      data: { error },
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 138:3 - Line 156:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/error-routes.ts (Line 41:1 - Line 63:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn761" onclick="toggleCodeBlock('cloneGroup761', 'expandBtn761', 'collapseBtn761')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn761" onclick="toggleCodeBlock('cloneGroup761', 'expandBtn761', 'collapseBtn761')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup761"><code class="language-typescript text-sm text-gray-800">router.post('/errors/patterns/:fingerprint/resolve', (req, res) =&gt; {
    const { fingerprint } = req.params;
    const { resolvedBy = 'unknown' } = req.body;

    const success = errorTracker.resolvePattern(fingerprint, resolvedBy);

    if (!success) {
      res.status(404).json({
        success: false,
        message: 'Error pattern not found',
      });
      return;
    }

    res.json({
      success: true,
      message: 'Error pattern resolved',
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 158:3 - Line 200:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/error-routes.ts (Line 63:1 - Line 105:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn762" onclick="toggleCodeBlock('cloneGroup762', 'expandBtn762', 'collapseBtn762')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn762" onclick="toggleCodeBlock('cloneGroup762', 'expandBtn762', 'collapseBtn762')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup762"><code class="language-typescript text-sm text-gray-800">// Debug Session Routes
  router.post('/debug/sessions', (req, res) =&gt; {
    const { context = {} } = req.body;
    const sessionId = debugTools.startDebugSession(context);

    res.status(201).json({
      success: true,
      data: { sessionId },
    });
  });

  router.get('/debug/sessions/:sessionId', (req, res) =&gt; {
    const { sessionId } = req.params;
    const session = debugTools.activeSessions.get(sessionId);

    if (!session) {
      res.status(404).json({
        success: false,
        message: 'Debug session not found',
      });
      return;
    }

    res.json({
      success: true,
      data: { session },
    });
  });

  router.post('/debug/sessions/:sessionId/end', (req, res) =&gt; {
    const { sessionId } = req.params;
    const session = debugTools.endDebugSession(sessionId);

    if (!session) {
      res.status(404).json({
        success: false,
        message: 'Debug session not found',
      });
      return;
    }

    res.json({
      success: true,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 189:16 - Line 205:4), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/error-routes.ts (Line 76:4 - Line 92:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn763" onclick="toggleCodeBlock('cloneGroup763', 'expandBtn763', 'collapseBtn763')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn763" onclick="toggleCodeBlock('cloneGroup763', 'expandBtn763', 'collapseBtn763')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup763"><code class="language-typescript text-sm text-gray-800">(sessionId);

    if (!session) {
      res.status(404).json({
        success: false,
        message: 'Debug session not found',
      });
      return;
    }

    res.json({
      success: true,
      data: { session },
    });
  });

  router.get</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 205:3 - Line 225:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/profiling-routes.ts (Line 8:1 - Line 32:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn764" onclick="toggleCodeBlock('cloneGroup764', 'expandBtn764', 'collapseBtn764')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn764" onclick="toggleCodeBlock('cloneGroup764', 'expandBtn764', 'collapseBtn764')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup764"><code class="language-typescript text-sm text-gray-800">router.get('/debug/sessions/:sessionId/export', (req, res) =&gt; {
    const { sessionId } = req.params;
    const { format = 'json' } = req.query;

    const exported = debugTools.exportDebugSession(sessionId, format as 'json' | 'csv');

    if (!exported) {
      res.status(404).json({
        success: false,
        message: 'Debug session not found',
      });
      return;
    }

    const contentType = format === 'csv' ? 'text/csv' : 'application/json';
    const filename = `debug-session-${sessionId}.${format}`;

    res.setHeader('Content-Type', contentType);
    res.setHeader('Content-Disposition', `attachment; filename=${filename}`);
    res.send(exported);
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 227:3 - Line 248:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/profiling-routes.ts (Line 32:1 - Line 57:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn765" onclick="toggleCodeBlock('cloneGroup765', 'expandBtn765', 'collapseBtn765')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn765" onclick="toggleCodeBlock('cloneGroup765', 'expandBtn765', 'collapseBtn765')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup765"><code class="language-typescript text-sm text-gray-800">// Performance Profiling Routes
  router.post('/debug/profiling/start', (req, res) =&gt; {
    const { name, sampleInterval, duration } = req.body;

    if (!name) {
      res.status(400).json({
        success: false,
        message: 'Profile name is required',
      });
      return;
    }

    const profileId = debugTools.startProfiling(name, {
      sampleInterval: sampleInterval ? parseInt(sampleInterval, 10) : undefined,
      duration: duration ? parseInt(duration, 10) : undefined,
    });

    res.status(201).json({
      success: true,
      data: { profileId },
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 250:3 - Line 266:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/profiling-routes.ts (Line 57:1 - Line 77:26)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn766" onclick="toggleCodeBlock('cloneGroup766', 'expandBtn766', 'collapseBtn766')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn766" onclick="toggleCodeBlock('cloneGroup766', 'expandBtn766', 'collapseBtn766')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup766"><code class="language-typescript text-sm text-gray-800">router.post('/debug/profiling/:profileId/stop', (req, res) =&gt; {
    const { profileId } = req.params;
    const profile = debugTools.stopProfiling(profileId);

    if (!profile) {
      res.status(404).json({
        success: false,
        message: 'Profile not found',
      });
      return;
    }

    res.json({
      success: true,
      data: { profile },
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 268:3 - Line 300:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/profiling-routes.ts (Line 77:1 - Line 109:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn767" onclick="toggleCodeBlock('cloneGroup767', 'expandBtn767', 'collapseBtn767')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn767" onclick="toggleCodeBlock('cloneGroup767', 'expandBtn767', 'collapseBtn767')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup767"><code class="language-typescript text-sm text-gray-800">// Memory Analysis Routes
  router.post('/debug/memory/snapshot', (req, res) =&gt; {
    const { name = 'manual' } = req.body;
    const snapshotId = debugTools.takeMemorySnapshot(name);

    res.status(201).json({
      success: true,
      data: { snapshotId },
    });
  });

  router.post('/debug/memory/leak-detection/start', (req, res) =&gt; {
    const { interval = 30000 } = req.body;
    debugTools.startMemoryLeakDetection(interval);

    res.json({
      success: true,
      message: 'Memory leak detection started',
    });
  });

  router.post('/debug/memory/leak-detection/stop', (_req, res) =&gt; {
    debugTools.stopMemoryLeakDetection();

    res.json({
      success: true,
      message: 'Memory leak detection stopped',
    });
  });

  // Configuration Routes
  router.get('/debug/config', (_req, res) =&gt; {
    const config = {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 315:3 - Line 332:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/config-routes.ts (Line 17:1 - Line 38:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn768" onclick="toggleCodeBlock('cloneGroup768', 'expandBtn768', 'collapseBtn768')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn768" onclick="toggleCodeBlock('cloneGroup768', 'expandBtn768', 'collapseBtn768')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup768"><code class="language-typescript text-sm text-gray-800">router.post('/debug/config/debug-mode', (req, res) =&gt; {
    const { enabled } = req.body;

    if (typeof enabled !== 'boolean') {
      res.status(400).json({
        success: false,
        message: 'enabled field must be boolean',
      });
      return;
    }

    debugTools.setGlobalDebugMode(enabled);

    res.json({
      success: true,
      message: `Debug mode ${enabled ? 'enabled' : 'disabled'}`,
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 334:3 - Line 352:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/config-routes.ts (Line 38:1 - Line 60:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn769" onclick="toggleCodeBlock('cloneGroup769', 'expandBtn769', 'collapseBtn769')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn769" onclick="toggleCodeBlock('cloneGroup769', 'expandBtn769', 'collapseBtn769')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup769"><code class="language-typescript text-sm text-gray-800">router.post('/debug/config/log-level', (req, res) =&gt; {
    const { level } = req.body;

    const validLevels = ['error', 'warn', 'info', 'http', 'verbose', 'debug', 'silly'];
    if (!validLevels.includes(level)) {
      res.status(400).json({
        success: false,
        message: `Invalid log level. Valid levels: ${validLevels.join(', ')}`,
      });
      return;
    }

    logger.setLogLevel(level);

    res.json({
      success: true,
      message: `Log level set to ${level}`,
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 354:3 - Line 363:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/config-routes.ts (Line 60:1 - Line 73:54)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn770" onclick="toggleCodeBlock('cloneGroup770', 'expandBtn770', 'collapseBtn770')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn770" onclick="toggleCodeBlock('cloneGroup770', 'expandBtn770', 'collapseBtn770')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup770"><code class="language-typescript text-sm text-gray-800">// State Dump Routes
  router.get('/debug/state', (req, res) =&gt; {
    const { sessionId } = req.query;
    const state = debugTools.dumpState(sessionId as string);

    res.json({
      success: true,
      data: state,
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 365:3 - Line 400:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/config-routes.ts (Line 73:1 - Line 108:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn771" onclick="toggleCodeBlock('cloneGroup771', 'expandBtn771', 'collapseBtn771')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn771" onclick="toggleCodeBlock('cloneGroup771', 'expandBtn771', 'collapseBtn771')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup771"><code class="language-typescript text-sm text-gray-800">// Test Error Generation (for testing error tracking)
  router.post('/debug/test/error', (req, res) =&gt; {
    const { type = 'generic', message = 'Test error', severity = 'medium' } = req.body;
    if (type === 'throw') {
      throw new Error(message);
    } else if (type === 'async') {
      Promise.reject(new Error(message));
      res.json({ success: true, message: 'Async error triggered' });
    } else {
      const error = new Error(message);
      errorTracker.trackError(
        error,
        {
          component: 'debug-test',
          requestId: (req as any).id,
        },
        severity
      );

      res.json({
        success: true,
        message: 'Test error tracked',
      });
    }
  });

  // Performance Test Routes
  router.post('/debug/test/performance', (req, res) =&gt; {
    const { duration = 100, cpu = false, memory = false } = req.body;

    const startTime = Date.now();

    if (cpu) {
      // CPU intensive task
      const end = Date.now() + duration;
      while (Date.now() &lt; end) {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 401:9 - Line 425:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/testing-routes.ts (Line 1:1 - Line 27:41)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn772" onclick="toggleCodeBlock('cloneGroup772', 'expandBtn772', 'collapseBtn772')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn772" onclick="toggleCodeBlock('cloneGroup772', 'expandBtn772', 'collapseBtn772')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup772"><code class="language-typescript text-sm text-gray-800">Math.random();
      }
    }

    if (memory) {
      // Memory intensive task
      const largeArray = new Array(1000000).fill('test data');
      setTimeout(() =&gt; {
        // Release after a moment
        largeArray.length = 0;
      }, 100);
    }

    const actualDuration = Date.now() - startTime;

    res.json({
      success: true,
      data: {
        requestedDuration: duration,
        actualDuration,
        cpuTest: cpu,
        memoryTest: memory,
      },
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/routes/debug.ts (Line 427:3 - Line 443:2), /home/margon/Reporunner/reporunner/packages/backend/src/routes/debug/testing-routes.ts (Line 27:1 - Line 47:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn773" onclick="toggleCodeBlock('cloneGroup773', 'expandBtn773', 'collapseBtn773')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn773" onclick="toggleCodeBlock('cloneGroup773', 'expandBtn773', 'collapseBtn773')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup773"><code class="language-typescript text-sm text-gray-800">// MongoDB Debugging (if using Mongoose)
  router.get('/debug/database/connections', (_req, res) =&gt; {
    const mongoose = require('mongoose');

    const connectionInfo = {
      readyState: mongoose.connection.readyState,
      host: mongoose.connection.host,
      port: mongoose.connection.port,
      name: mongoose.connection.name,
      models: Object.keys(mongoose.connection.models),
    };

    res.json({
      success: true,
      data: connectionInfo,
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Workflow.ts (Line 122:1 - Line 200:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/workflow/workflow-middleware.ts (Line 57:1 - Line 135:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn774" onclick="toggleCodeBlock('cloneGroup774', 'expandBtn774', 'collapseBtn774')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn774" onclick="toggleCodeBlock('cloneGroup774', 'expandBtn774', 'collapseBtn774')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup774"><code class="language-typescript text-sm text-gray-800">const workflowEdgeSchema = new Schema(
  {
    id: { type: String, required: true },
    source: { type: String, required: true },
    target: { type: String, required: true },
    sourceHandle: { type: String },
    targetHandle: { type: String },
    type: { type: String },
  },
  { _id: false }
);

const workflowSchema = new Schema&lt;IWorkflow&gt;(
  {
    name: {
      type: String,
      required: [true, 'Workflow name is required'],
      trim: true,
      maxlength: [100, 'Workflow name cannot be more than 100 characters'],
    },
    description: {
      type: String,
      trim: true,
      maxlength: [500, 'Description cannot be more than 500 characters'],
    },
    userId: {
      type: String,
      required: [true, 'User ID is required'],
      ref: 'User',
    },
    nodes: [workflowNodeSchema],
    edges: [workflowEdgeSchema],
    isActive: {
      type: Boolean,
      default: true,
    },
    isPublic: {
      type: Boolean,
      default: false,
    },
    tags: [
      {
        type: String,
        trim: true,
        lowercase: true,
      },
    ],
    version: {
      type: Number,
      default: 1,
    },
    settings: {
      errorHandling: {
        type: String,
        enum: ['stop', 'continue'],
        default: 'stop',
      },
      timeout: {
        type: Number,
        default: 300000, // 5 minutes
        min: [1000, 'Timeout must be at least 1 second'],
        max: [1800000, 'Timeout cannot exceed 30 minutes'],
      },
      retryAttempts: {
        type: Number,
        default: 3,
        min: [0, 'Retry attempts cannot be negative'],
        max: [10, 'Maximum 10 retry attempts allowed'],
      },
      concurrent: {
        type: Boolean,
        default: false,
      },
    },
    statistics: {
      totalExecutions: { type: Number, default: 0 },
      successfulExecutions: { type: Number, default: 0 },
      failedExecutions: { type: Number, default: 0 },
      lastExecuted: { type: Date },</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Workflow.ts (Line 215:1 - Line 232:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/workflow/workflow-methods.ts (Line 34:1 - Line 51:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn775" onclick="toggleCodeBlock('cloneGroup775', 'expandBtn775', 'collapseBtn775')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn775" onclick="toggleCodeBlock('cloneGroup775', 'expandBtn775', 'collapseBtn775')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup775"><code class="language-typescript text-sm text-gray-800">workflowSchema.index({ tags: 1 });
workflowSchema.index({ 'statistics.lastExecuted': -1 });

// Virtual for success rate
workflowSchema.virtual('successRate').get(function () {
  if (this.statistics.totalExecutions === 0) return 0;
  return (this.statistics.successfulExecutions / this.statistics.totalExecutions) * 100;
});

// Pre-save middleware to increment version
workflowSchema.pre('save', function (next) {
  if (this.isModified('nodes') || this.isModified('edges')) {
    this.version += 1;
  }
  next();
});

export const Workflow = mongoose.model&lt;IWorkflow&gt;('Workflow', workflowSchema);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/User.ts (Line 114:7 - Line 138:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/user/user-middleware.ts (Line 19:3 - Line 56:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn776" onclick="toggleCodeBlock('cloneGroup776', 'expandBtn776', 'collapseBtn776')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn776" onclick="toggleCodeBlock('cloneGroup776', 'expandBtn776', 'collapseBtn776')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup776"><code class="language-typescript text-sm text-gray-800">: false,
    },
    refreshTokens: {
      type: [String],
      default: [],
      select: false,
    },
    lastLogin: {
      type: Date,
    },
    lastPasswordChange: {
      type: Date,
    },
    failedLoginAttempts: {
      type: Number,
      default: 0,
    },
    lockUntil: {
      type: Date,
    },
    ssoProvider: {
      type: String,
      enum: ['google', 'microsoft', 'okta', 'auth0'],
    },
    ssoId: {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/User.ts (Line 176:1 - Line 200:51), /home/margon/Reporunner/reporunner/packages/backend/src/models/user/user-middleware.ts (Line 80:1 - Line 104:51)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn777" onclick="toggleCodeBlock('cloneGroup777', 'expandBtn777', 'collapseBtn777')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn777" onclick="toggleCodeBlock('cloneGroup777', 'expandBtn777', 'collapseBtn777')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup777"><code class="language-typescript text-sm text-gray-800">);

// Virtual for full name
userSchema.virtual('fullName').get(function () {
  return `${this.firstName} ${this.lastName}`;
});

// Indexes for performance
userSchema.index({ isActive: 1 });
userSchema.index({ organizationId: 1 });
userSchema.index({ role: 1 });
userSchema.index({ ssoProvider: 1, ssoId: 1 });
userSchema.index({ emailVerificationToken: 1 });
userSchema.index({ passwordResetToken: 1 });

// Pre-save middleware to hash password
userSchema.pre('save', async function (next) {
  if (!this.isModified('password')) return next();

  const saltRounds = parseInt(process.env.BCRYPT_SALT_ROUNDS || '12', 10);
  this.password = await bcrypt.hash(this.password, saltRounds);
  next();
});

// Pre-save middleware to set password change date</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/User.ts (Line 201:1 - Line 269:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/user/user-methods.ts (Line 1:1 - Line 69:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn778" onclick="toggleCodeBlock('cloneGroup778', 'expandBtn778', 'collapseBtn778')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn778" onclick="toggleCodeBlock('cloneGroup778', 'expandBtn778', 'collapseBtn778')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup778"><code class="language-typescript text-sm text-gray-800">userSchema.pre('save', function (next) {
  if (this.isModified('password') &amp;&amp; !this.isNew) {
    this.lastPasswordChange = new Date();
  }
  next();
});

// Method to compare password
userSchema.methods.comparePassword = async function (candidatePassword: string): Promise&lt;boolean&gt; {
  return bcrypt.compare(candidatePassword, this.password);
};

// Method to check if user has specific permission
userSchema.methods.hasPermission = function (permission: string): boolean {
  // Super admin has all permissions
  if (this.role === 'super_admin') return true;

  // Check if user has the specific permission
  return this.permissions.includes(permission);
};

// Method to check if account is locked
userSchema.methods.isLocked = function (): boolean {
  return !!(this.lockUntil &amp;&amp; this.lockUntil &gt; new Date());
};

// Static method to handle failed login attempts
userSchema.methods.incLoginAttempts = function () {
  const maxAttempts = 5;
  const lockTime = 2 * 60 * 60 * 1000; // 2 hours

  // If we have a previous lock that has expired, restart at 1
  if (this.lockUntil &amp;&amp; this.lockUntil &lt; new Date()) {
    return this.updateOne({
      $unset: { lockUntil: 1 },
      $set: { failedLoginAttempts: 1 },
    });
  }

  const updates = { $inc: { failedLoginAttempts: 1 } };

  // If we've hit max attempts and it's not locked already, lock the account
  if (this.failedLoginAttempts + 1 &gt;= maxAttempts &amp;&amp; !this.isLocked()) {
    (updates as any).$set = { lockUntil: new Date(Date.now() + lockTime) };
  }

  return this.updateOne(updates);
};

// Static method to reset login attempts
userSchema.methods.resetLoginAttempts = function () {
  return this.updateOne({
    $unset: { failedLoginAttempts: 1, lockUntil: 1 },
  });
};

// Remove sensitive data from JSON output
userSchema.methods.toJSON = function () {
  const userObject = this.toObject();
  userObject.password = undefined;
  userObject.refreshTokens = undefined;
  userObject.emailVerificationToken = undefined;
  userObject.emailVerificationTokenExpires = undefined;
  userObject.passwordResetToken = undefined;
  userObject.passwordResetTokenExpires = undefined;
  return userObject;
};

export const User = mongoose.model&lt;IUser&gt;('User', userSchema);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Organization.ts (Line 128:2 - Line 144:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/organization/organization-middleware.ts (Line 27:3 - Line 51:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn779" onclick="toggleCodeBlock('cloneGroup779', 'expandBtn779', 'collapseBtn779')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn779" onclick="toggleCodeBlock('cloneGroup779', 'expandBtn779', 'collapseBtn779')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup779"><code class="language-typescript text-sm text-gray-800">,
      },
      sessionTimeout: {
        type: Number,
        default: 480, // 8 hours in minutes
        min: 15,
        max: 1440, // 24 hours
      },
      ssoEnabled: {
        type: Boolean,
        default: false,
      },
      ssoProvider: {
        type: String,
        enum: ['google', 'microsoft', 'okta', 'auth0'],
      },
      ssoSettings: {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Operation.ts (Line 215:1 - Line 289:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/operation/operation-methods.ts (Line 34:1 - Line 108:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn780" onclick="toggleCodeBlock('cloneGroup780', 'expandBtn780', 'collapseBtn780')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn780" onclick="toggleCodeBlock('cloneGroup780', 'expandBtn780', 'collapseBtn780')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup780"><code class="language-typescript text-sm text-gray-800">operationSchema.index({ operationId: 1 }, { unique: true });
operationSchema.index({ status: 1 });
operationSchema.index({ 'target.type': 1, 'target.id': 1 });

// TTL index to cleanup old operations (30 days)
operationSchema.index({ createdAt: 1 }, { expireAfterSeconds: 30 * 24 * 60 * 60 });

// Methods for operational transform
operationSchema.methods.transform = function (_otherOperation: IOperation) {
  // This will be implemented by the OperationalTransform service
  // For now, return a simple transform
  return {
    operation: this,
    transformed: false,
    conflicts: [],
  };
};

operationSchema.methods.compose = function (otherOperation: IOperation) {
  // Compose two operations into one if possible
  if (
    this.target.id === otherOperation.target.id &amp;&amp;
    this.target.type === otherOperation.target.type
  ) {
    return {
      ...this.toObject(),
      data: {
        before: this.data.before,
        after: otherOperation.data.after,
        delta: { ...this.data.delta, ...otherOperation.data.delta },
      },
      version: Math.max(this.version, otherOperation.version),
      transformations: [...this.transformations, ...otherOperation.transformations],
    };
  }
  return null;
};

operationSchema.methods.inverse = function () {
  // Create inverse operation for undo functionality
  return {
    ...this.toObject(),
    operationId: `${this.operationId}_inverse`,
    data: {
      before: this.data.after,
      after: this.data.before,
      delta: this.invertDelta(this.data.delta),
    },
    metadata: {
      ...this.metadata,
      source: 'system',
      timestamp: new Date(),
    },
  };
};

operationSchema.methods.invertDelta = function (delta: any) {
  if (!delta) return null;

  // Simple delta inversion - this would be more complex in practice
  const inverted: any = {};

  for (const [key, value] of Object.entries(delta)) {
    if (typeof value === 'object' &amp;&amp; value !== null) {
      inverted[key] = this.invertDelta(value);
    } else {
      // For simple values, we'd need the previous state to create proper inverse
      inverted[key] = null; // This would be properly implemented
    }
  }

  return inverted;
};

export const Operation = mongoose.model&lt;IOperation&gt;('Operation', operationSchema);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Execution.ts (Line 1:1 - Line 100:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/execution/execution-schema.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn781" onclick="toggleCodeBlock('cloneGroup781', 'expandBtn781', 'collapseBtn781')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn781" onclick="toggleCodeBlock('cloneGroup781', 'expandBtn781', 'collapseBtn781')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup781"><code class="language-typescript text-sm text-gray-800">import mongoose, { type Document, Schema } from 'mongoose';

export interface INodeExecution {
  nodeId: string;
  nodeName: string;
  status: 'pending' | 'running' | 'success' | 'error' | 'skipped';
  startTime?: Date;
  endTime?: Date;
  duration?: number;
  input?: Record&lt;string, any&gt;;
  output?: Record&lt;string, any&gt;;
  error?: {
    message: string;
    stack?: string;
    code?: string;
  };
  retryAttempt: number;
}

export interface IExecution extends Document {
  _id: string;
  workflowId: string;
  userId: string;
  status: 'pending' | 'running' | 'success' | 'error' | 'cancelled' | 'timeout';
  startTime: Date;
  endTime?: Date;
  duration?: number;
  triggerType: 'manual' | 'webhook' | 'schedule' | 'api';
  triggerData?: Record&lt;string, any&gt;;
  nodeExecutions: INodeExecution[];
  totalNodes: number;
  completedNodes: number;
  errorMessage?: string;
  metadata: {
    version: number;
    environment: string;
    userAgent?: string;
    ipAddress?: string;
  };
  createdAt: Date;
  updatedAt: Date;
  updateNodeExecution(nodeId: string, update: Partial&lt;INodeExecution&gt;): Promise&lt;IExecution&gt;;
}

const nodeExecutionSchema = new Schema({
  nodeId: { type: String, required: true },
  nodeName: { type: String, required: true },
  status: {
    type: String,
    enum: ['pending', 'running', 'success', 'error', 'skipped'],
    default: 'pending',
  },
  startTime: { type: Date },
  endTime: { type: Date },
  duration: { type: Number },
  input: { type: Schema.Types.Mixed },
  output: { type: Schema.Types.Mixed },
  error: {
    message: { type: String },
    stack: { type: String },
    code: { type: String },
  },
  retryAttempt: { type: Number, default: 0 },
});

const executionSchema = new Schema&lt;IExecution&gt;(
  {
    workflowId: {
      type: String,
      required: [true, 'Workflow ID is required'],
      ref: 'Workflow',
    },
    userId: {
      type: String,
      required: [true, 'User ID is required'],
      ref: 'User',
    },
    status: {
      type: String,
      enum: ['pending', 'running', 'success', 'error', 'cancelled', 'timeout'],
      default: 'pending',
    },
    startTime: {
      type: Date,
      required: true,
      default: Date.now,
    },
    endTime: { type: Date },
    duration: { type: Number },
    triggerType: {
      type: String,
      enum: ['manual', 'webhook', 'schedule', 'api'],
      required: true,
    },
    triggerData: { type: Schema.Types.Mixed },
    nodeExecutions: [nodeExecutionSchema],
    totalNodes: {
      type: Number,
      required: true,
      min: [1, 'Total nodes must be at least 1'],</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Execution.ts (Line 129:1 - Line 200:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/execution/execution-middleware.ts (Line 61:1 - Line 132:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn782" onclick="toggleCodeBlock('cloneGroup782', 'expandBtn782', 'collapseBtn782')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn782" onclick="toggleCodeBlock('cloneGroup782', 'expandBtn782', 'collapseBtn782')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup782"><code class="language-typescript text-sm text-gray-800">executionSchema.index({ triggerType: 1 });
executionSchema.index({ startTime: -1 });

// Virtual for progress percentage
executionSchema.virtual('progress').get(function () {
  if (this.totalNodes === 0) return 0;
  return Math.round((this.completedNodes / this.totalNodes) * 100);
});

// Virtual for success rate
executionSchema.virtual('isSuccessful').get(function () {
  return this.status === 'success';
});

// Pre-save middleware to calculate duration
executionSchema.pre('save', function (next) {
  if (this.endTime &amp;&amp; this.startTime) {
    this.duration = this.endTime.getTime() - this.startTime.getTime();
  }
  next();
});

// Method to update node execution
executionSchema.methods.updateNodeExecution = function (
  nodeId: string,
  update: Partial&lt;INodeExecution&gt;
) {
  const nodeExecution = this.nodeExecutions.find((ne: INodeExecution) =&gt; ne.nodeId === nodeId);
  if (nodeExecution) {
    Object.assign(nodeExecution, update);

    // Calculate duration if both start and end times are present
    if (nodeExecution.startTime &amp;&amp; nodeExecution.endTime) {
      nodeExecution.duration = nodeExecution.endTime.getTime() - nodeExecution.startTime.getTime();
    }

    // Update completed nodes count
    if (update.status === 'success' || update.status === 'error' || update.status === 'skipped') {
      this.completedNodes = this.nodeExecutions.filter((ne: INodeExecution) =&gt;
        ['success', 'error', 'skipped'].includes(ne.status)
      ).length;
    }
  }
  return this.save();
};

// Static method to get execution statistics
executionSchema.statics.getStatistics = async function (workflowId: string, days: number = 30) {
  const startDate = new Date();
  startDate.setDate(startDate.getDate() - days);

  const stats = await this.aggregate([
    {
      $match: {
        workflowId,
        startTime: { $gte: startDate },
      },
    },
    {
      $group: {
        _id: null,
        totalExecutions: { $sum: 1 },
        successfulExecutions: { $sum: { $cond: [{ $eq: ['$status', 'success'] }, 1, 0] } },
        failedExecutions: { $sum: { $cond: [{ $eq: ['$status', 'error'] }, 1, 0] } },
        averageDuration: { $avg: '$duration' },
      },
    },
  ]);

  return (
    stats[0] || {
      totalExecutions: 0,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Credentials.ts (Line 121:1 - Line 200:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/credentials/credentials-middleware.ts (Line 43:1 - Line 122:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn783" onclick="toggleCodeBlock('cloneGroup783', 'expandBtn783', 'collapseBtn783')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn783" onclick="toggleCodeBlock('cloneGroup783', 'expandBtn783', 'collapseBtn783')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup783"><code class="language-typescript text-sm text-gray-800">// Virtual for expiry status
credentialSchema.virtual('isExpired').get(function () {
  if (!this.expiresAt) return false;
  return new Date() &gt; this.expiresAt;
});

// Encryption key from environment
const getEncryptionKey = (): Buffer =&gt; {
  const keyHex = process.env.CREDENTIAL_ENCRYPTION_KEY;
  if (!keyHex) {
    throw new Error('CREDENTIAL_ENCRYPTION_KEY environment variable is required');
  }
  if (keyHex.length !== 64) {
    throw new Error('CREDENTIAL_ENCRYPTION_KEY must be exactly 64 hex characters (32 bytes)');
  }
  try {
    return Buffer.from(keyHex, 'hex');
  } catch (_error) {
    throw new Error('CREDENTIAL_ENCRYPTION_KEY must be a valid hex string');
  }
};

const ENCRYPTION_KEY = getEncryptionKey();

// Debug: Log if we're using env key or random key
console.log('📄 Credentials model loading...');
console.log('   CREDENTIAL_ENCRYPTION_KEY available:', !!process.env.CREDENTIAL_ENCRYPTION_KEY);
if (process.env.CREDENTIAL_ENCRYPTION_KEY) {
  console.log('✓ Using CREDENTIAL_ENCRYPTION_KEY from environment');
} else {
  console.log(
    '⚠️  WARNING: CREDENTIAL_ENCRYPTION_KEY not set, using random key - credentials will be lost on restart!'
  );
}

const IV_LENGTH = 16;
const ALGORITHM = 'aes-256-cbc';

// Method to encrypt credential data
credentialSchema.methods.encrypt = (data: Record&lt;string, any&gt;): Record&lt;string, any&gt; =&gt; {
  try {
    const iv = crypto.randomBytes(IV_LENGTH);
    const cipher = crypto.createCipheriv(ALGORITHM, ENCRYPTION_KEY, iv);

    let encrypted = cipher.update(JSON.stringify(data), 'utf8', 'hex');
    encrypted += cipher.final('hex');

    return {
      encrypted,
      iv: iv.toString('hex'),
    };
  } catch (error: any) {
    console.error('Encryption error:', error);
    throw new Error(`Failed to encrypt credential data: ${error.message}`);
  }
};

// Method to decrypt credential data
credentialSchema.methods.decrypt = (encryptedData: Record&lt;string, any&gt;): Record&lt;string, any&gt; =&gt; {
  if (!encryptedData || typeof encryptedData !== 'object') {
    throw new Error('Invalid encrypted data format');
  }

  try {
    // Check if data has proper IV format
    if (encryptedData.iv &amp;&amp; encryptedData.encrypted) {
      const iv = Buffer.from(encryptedData.iv, 'hex');
      if (iv.length !== IV_LENGTH) {
        throw new Error('Invalid IV length');
      }

      const decipher = crypto.createDecipheriv(ALGORITHM, ENCRYPTION_KEY, iv);
      let decrypted = decipher.update(encryptedData.encrypted, 'hex', 'utf8');
      decrypted += decipher.final('utf8');

      const parsedData = JSON.parse(decrypted);
      return parsedData;
    } else {
      throw new Error('Missing encryption IV. This credential needs to be re-created.');
    }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Credentials.ts (Line 201:3 - Line 217:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/credentials/credentials-methods.ts (Line 1:1 - Line 18:39)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn784" onclick="toggleCodeBlock('cloneGroup784', 'expandBtn784', 'collapseBtn784')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn784" onclick="toggleCodeBlock('cloneGroup784', 'expandBtn784', 'collapseBtn784')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup784"><code class="language-typescript text-sm text-gray-800">} catch (error: any) {
    console.error('Failed to decrypt credential data:', error);

    // Provide more specific error message
    if (error.code === 'ERR_OSSL_BAD_DECRYPT') {
      throw new Error(
        'Failed to decrypt credential data. The credential may be corrupted or using an outdated encryption method.'
      );
    } else if (error.message.includes('JSON')) {
      throw new Error(
        'Failed to parse decrypted credential data. The credential may be corrupted.'
      );
    } else {
      throw new Error(`Failed to decrypt credential data: ${error.message}`);
    }
  }
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Credentials.ts (Line 219:1 - Line 232:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/credentials/credentials-methods.ts (Line 18:1 - Line 35:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn785" onclick="toggleCodeBlock('cloneGroup785', 'expandBtn785', 'collapseBtn785')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn785" onclick="toggleCodeBlock('cloneGroup785', 'expandBtn785', 'collapseBtn785')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup785"><code class="language-typescript text-sm text-gray-800">// Pre-save middleware to encrypt data
credentialSchema.pre('save', async function (next) {
  if (this.isModified('data') &amp;&amp; this.data) {
    // Check if data is already encrypted (has iv and encrypted properties)
    if (typeof this.data === 'object' &amp;&amp; this.data.iv &amp;&amp; this.data.encrypted) {
      // Data is already encrypted, don't encrypt again
      return next();
    }

    // Encrypt the data
    this.data = this.encrypt(this.data);
  }
  next();
});</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Credentials.ts (Line 240:1 - Line 279:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/credentials/credentials-methods.ts (Line 42:1 - Line 81:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn786" onclick="toggleCodeBlock('cloneGroup786', 'expandBtn786', 'collapseBtn786')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn786" onclick="toggleCodeBlock('cloneGroup786', 'expandBtn786', 'collapseBtn786')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup786"><code class="language-typescript text-sm text-gray-800">// Static method to find active credentials
credentialSchema.statics.findActive = function (userId: string, integration?: string) {
  const query: any = { userId, isActive: true };
  if (integration) {
    query.integration = integration;
  }

  // Check for expired credentials
  query.$or = [{ expiresAt: { $exists: false } }, { expiresAt: { $gt: new Date() } }];

  return this.find(query);
};

// Method to refresh OAuth2 credentials
credentialSchema.methods.refreshOAuth2Token = async function (_refreshToken: string) {
  if (this.type !== 'oauth2') {
    throw new Error('This method is only available for OAuth2 credentials');
  }

  // This would typically make an API call to refresh the token
  // Implementation depends on the specific OAuth2 provider

  this.lastUsed = new Date();
  return this.save();
};

// Method to mark as used
credentialSchema.methods.markAsUsed = function () {
  this.lastUsed = new Date();
  return this.save();
};

// Remove credential data from JSON output
credentialSchema.methods.toJSON = function () {
  const credentialObject = this.toObject();
  credentialObject.data = undefined;
  return credentialObject;
};

export const Credential = mongoose.model&lt;ICredential&gt;('Credential', credentialSchema);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Comment.ts (Line 257:1 - Line 300:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/comment/comment-reactions.ts (Line 47:1 - Line 90:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn787" onclick="toggleCodeBlock('cloneGroup787', 'expandBtn787', 'collapseBtn787')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn787" onclick="toggleCodeBlock('cloneGroup787', 'expandBtn787', 'collapseBtn787')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup787"><code class="language-typescript text-sm text-gray-800">);

// Indexes for performance
commentSchema.index({ workflowId: 1, createdAt: -1 });
commentSchema.index({ sessionId: 1 });
commentSchema.index({ authorId: 1, createdAt: -1 });
commentSchema.index({ parentCommentId: 1 });
commentSchema.index({ status: 1 });
commentSchema.index({ 'position.nodeId': 1 });
commentSchema.index({ 'position.edgeId': 1 });
commentSchema.index({ tags: 1 });

// Virtual for replies
commentSchema.virtual('replies', {
  ref: 'Comment',
  localField: '_id',
  foreignField: 'parentCommentId',
});

// Virtual for author information
commentSchema.virtual('author', {
  ref: 'User',
  localField: 'authorId',
  foreignField: '_id',
  justOne: true,
});

// Methods
commentSchema.methods.addReply = function (replyData: any) {
  this.thread.push({
    ...replyData,
    timestamp: new Date(),
  });
  return this.save();
};

commentSchema.methods.addReaction = function (userId: string, reactionType: string) {
  // Remove existing reaction from this user
  this.reactions = this.reactions.filter((r: any) =&gt; r.userId !== userId);

  // Add new reaction
  this.reactions.push({
    userId,
    type: reactionType,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/Comment.ts (Line 312:1 - Line 343:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/comment/comment-methods.ts (Line 13:1 - Line 44:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn788" onclick="toggleCodeBlock('cloneGroup788', 'expandBtn788', 'collapseBtn788')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn788" onclick="toggleCodeBlock('cloneGroup788', 'expandBtn788', 'collapseBtn788')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup788"><code class="language-typescript text-sm text-gray-800">commentSchema.methods.resolve = function (resolvedBy: string) {
  this.status = 'resolved';
  this.resolvedBy = resolvedBy;
  this.resolvedAt = new Date();
  return this.save();
};

commentSchema.methods.edit = function (newContent: string, editedBy: string) {
  // Store edit history
  this.editHistory.push({
    timestamp: new Date(),
    previousContent: this.content,
    editedBy,
  });

  this.content = newContent;
  return this.save();
};

// Pre-save middleware to validate mentions
commentSchema.pre('save', function (next) {
  // Validate that mention indices are within content bounds
  for (const mention of this.mentions) {
    if (mention.startIndex &lt; 0 || mention.endIndex &gt; this.content.length) {
      next(new Error('Invalid mention indices'));
      return;
    }
  }
  next();
});

export const Comment = mongoose.model&lt;IComment&gt;('Comment', commentSchema);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/CollaborationSession.ts (Line 118:2 - Line 137:15), /home/margon/Reporunner/reporunner/packages/backend/src/models/collaborationsession/collaboration-middleware.ts (Line 32:3 - Line 61:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn789" onclick="toggleCodeBlock('cloneGroup789', 'expandBtn789', 'collapseBtn789')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn789" onclick="toggleCodeBlock('cloneGroup789', 'expandBtn789', 'collapseBtn789')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup789"><code class="language-typescript text-sm text-gray-800">,
      },
    ],
    isActive: {
      type: Boolean,
      default: true,
    },
    endedAt: {
      type: Date,
    },
    currentVersion: {
      type: Number,
      default: 0,
    },
    lastActivity: {
      type: Date,
      default: Date.now,
    },
    settings: {
      allowAnonymous</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/models/CollaborationSession.ts (Line 184:1 - Line 200:2), /home/margon/Reporunner/reporunner/packages/backend/src/models/collaborationsession/collaboration-middleware.ts (Line 94:1 - Line 110:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn790" onclick="toggleCodeBlock('cloneGroup790', 'expandBtn790', 'collapseBtn790')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn790" onclick="toggleCodeBlock('cloneGroup790', 'expandBtn790', 'collapseBtn790')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup790"><code class="language-typescript text-sm text-gray-800">);

// Indexes for performance
collaborationSessionSchema.index({ workflowId: 1 });
collaborationSessionSchema.index({ sessionId: 1 }, { unique: true });
collaborationSessionSchema.index({ ownerId: 1 });
collaborationSessionSchema.index({ organizationId: 1 });
collaborationSessionSchema.index({ status: 1 });
collaborationSessionSchema.index({ lastActivity: 1 });

// TTL index to automatically cleanup old sessions (7 days)
collaborationSessionSchema.index({ lastActivity: 1 }, { expireAfterSeconds: 7 * 24 * 60 * 60 });

// Virtual for active participants
collaborationSessionSchema.virtual('activeParticipants').get(function () {
  const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000);
  return this.participants.filter((p) =&gt; p.lastSeen &gt; fiveMinutesAgo);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 144:2 - Line 153:36), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 102:2 - Line 111:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn791" onclick="toggleCodeBlock('cloneGroup791', 'expandBtn791', 'collapseBtn791')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn791" onclick="toggleCodeBlock('cloneGroup791', 'expandBtn791', 'collapseBtn791')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup791"><code class="language-typescript text-sm text-gray-800">{
    requestId: req.id,
    method: req.method,
    url: req.originalUrl,
    userAgent: req.get('User-Agent'),
    ip: req.ip,
    userId: (req as any).user?.id,
  });

  // Log detailed request information</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 162:7 - Line 175:16), /home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/DebugTools.ts (Line 490:6 - Line 503:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn792" onclick="toggleCodeBlock('cloneGroup792', 'expandBtn792', 'collapseBtn792')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn792" onclick="toggleCodeBlock('cloneGroup792', 'expandBtn792', 'collapseBtn792')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup792"><code class="language-typescript text-sm text-gray-800">,
      body: req.body,
    },
  });

  // Intercept response
  const originalSend = res.send;
  res.send = function (data: any) {
    if (req.debugSession) {
      debugTools.addDebugEvent(req.debugSession, {
        timestamp: Date.now(),
        type: 'log',
        level: 'debug',
        message: 'Response sent'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 175:16 - Line 194:4), /home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/DebugTools.ts (Line 503:21 - Line 518:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn793" onclick="toggleCodeBlock('cloneGroup793', 'expandBtn793', 'collapseBtn793')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn793" onclick="toggleCodeBlock('cloneGroup793', 'expandBtn793', 'collapseBtn793')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup793"><code class="language-typescript text-sm text-gray-800">,
        data: {
          statusCode: res.statusCode,
          headers: res.getHeaders(),
          body: data,
        },
      });

      debugTools.endDebugSession(req.debugSession);
    }

    return originalSend.call(this, data);
  };

  next();
}

/**
 * Error tracking middleware
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 306:7 - Line 400:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging/security-middleware.ts (Line 6:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn794" onclick="toggleCodeBlock('cloneGroup794', 'expandBtn794', 'collapseBtn794')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn794" onclick="toggleCodeBlock('cloneGroup794', 'expandBtn794', 'collapseBtn794')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup794"><code class="language-typescript text-sm text-gray-800">break;
    }
  }

  // Monitor for brute force attempts
  const failedAttempts = res.locals.failedAttempts || 0;
  if (failedAttempts &gt; 5) {
    logger.logSecurityEvent('Potential brute force attack', 'high', {
      requestId: req.id,
      ip: req.ip,
      failedAttempts,
      url: req.originalUrl,
    });
  }

  next();
}

/**
 * Rate limiting middleware
 */
// Simple in-memory rate limiting (in production, use Redis)
const rateLimitStore = new Map&lt;string, { count: number; resetTime: number }&gt;();

export function rateLimitingMiddleware(
  req: DebuggingRequest,
  res: Response,
  next: NextFunction
): void {
  const key = req.ip || 'unknown';
  const now = Date.now();
  const windowMs = 60 * 1000; // 1 minute
  const maxRequests = 100;

  let store = rateLimitStore.get(key);

  if (!store || now &gt; store.resetTime) {
    store = { count: 1, resetTime: now + windowMs };
    rateLimitStore.set(key, store);
  } else {
    store.count++;
  }

  // Set rate limit headers
  res.setHeader('X-RateLimit-Limit', maxRequests);
  res.setHeader('X-RateLimit-Remaining', Math.max(0, maxRequests - store.count));
  res.setHeader('X-RateLimit-Reset', new Date(store.resetTime).toISOString());

  if (store.count &gt; maxRequests) {
    logger.logSecurityEvent('Rate limit exceeded', 'medium', {
      requestId: req.id,
      ip: req.ip,
      count: store.count,
      limit: maxRequests,
    });

    res.status(429).json({
      success: false,
      message: 'Too many requests',
      retryAfter: Math.ceil((store.resetTime - now) / 1000),
    });
    return;
  }

  next();
}

/**
 * Complete debugging middleware stack
 */
export function createDebuggingMiddleware() {
  return [
    requestIdMiddleware,
    performanceMiddleware,
    loggingMiddleware,
    securityMiddleware,
    rateLimitingMiddleware,
    debugMiddleware,
  ];
}

/**
 * Database query monitoring middleware (for Mongoose)
 */
export function setupDatabaseMonitoring(): void {
  const mongoose = require('mongoose');

  // Monitor slow queries
  mongoose.set('debug', (collectionName: string, method: string, query: any, _doc: any) =&gt; {
    const startTime = Date.now();

    // This is a simplified implementation
    logger.debug('Database query', {
      collection: collectionName,
      method,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 405:5 - Line 427:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging/monitoring-utilities.ts (Line 5:1 - Line 28:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn795" onclick="toggleCodeBlock('cloneGroup795', 'expandBtn795', 'collapseBtn795')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn795" onclick="toggleCodeBlock('cloneGroup795', 'expandBtn795', 'collapseBtn795')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup795"><code class="language-typescript text-sm text-gray-800">// In a real implementation, you'd measure actual query duration
    const duration = Date.now() - startTime;
    if (duration &gt; 100) {
      logger.warn('Slow database query', {
        collection: collectionName,
        method,
        duration,
        query: JSON.stringify(query),
        component: 'database',
      });
    }

    performanceMonitor.recordMetric({
      name: 'database_query_duration',
      value: duration,
      unit: 'ms',
      timestamp: Date.now(),
      tags: {
        collection: collectionName,
        method,
      },
    });
  });</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 428:1 - Line 486:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging/monitoring-utilities.ts (Line 28:1 - Line 86:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn796" onclick="toggleCodeBlock('cloneGroup796', 'expandBtn796', 'collapseBtn796')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn796" onclick="toggleCodeBlock('cloneGroup796', 'expandBtn796', 'collapseBtn796')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup796"><code class="language-typescript text-sm text-gray-800">}

/**
 * WebSocket debugging middleware
 */
export function createWebSocketDebugging(io: any): void {
  io.use((socket: any, next: any) =&gt; {
    // Add debugging to socket
    socket.debugSession = debugTools.startDebugSession({
      socketId: socket.id,
      component: 'websocket',
      handshake: socket.handshake,
    });

    logger.debug('WebSocket connection established', {
      socketId: socket.id,
      component: 'websocket',
    });

    socket.on('disconnect', () =&gt; {
      logger.debug('WebSocket connection closed', {
        socketId: socket.id,
        component: 'websocket',
      });

      if (socket.debugSession) {
        debugTools.endDebugSession(socket.debugSession);
      }
    });

    // Monitor socket events
    const originalEmit = socket.emit;
    socket.emit = function (...args: any[]) {
      if (socket.debugSession) {
        debugTools.addDebugEvent(socket.debugSession, {
          timestamp: Date.now(),
          type: 'log',
          level: 'debug',
          message: 'Socket event emitted',
          data: {
            event: args[0],
            data: args.slice(1),
          },
        });
      }

      return originalEmit.apply(this, args);
    };

    next();
  });
}

export default {
  createDebuggingMiddleware,
  errorTrackingMiddleware,
  setupDatabaseMonitoring,
  createWebSocketDebugging,
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 101:7 - Line 109:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/permission-middleware.ts (Line 1:1 - Line 13:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn797" onclick="toggleCodeBlock('cloneGroup797', 'expandBtn797', 'collapseBtn797')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn797" onclick="toggleCodeBlock('cloneGroup797', 'expandBtn797', 'collapseBtn797')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup797"><code class="language-typescript text-sm text-gray-800">if (error instanceof jwt.JsonWebTokenError) {
        next(new AppError('Invalid authentication token', 401));
      } else if (error instanceof jwt.TokenExpiredError) {
        next(new AppError('Authentication token has expired', 401));
      } else {
        next(error);
      }
    }
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 114:3 - Line 126:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/permission-middleware.ts (Line 14:1 - Line 31:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn798" onclick="toggleCodeBlock('cloneGroup798', 'expandBtn798', 'collapseBtn798')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn798" onclick="toggleCodeBlock('cloneGroup798', 'expandBtn798', 'collapseBtn798')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup798"><code class="language-typescript text-sm text-gray-800">optionalAuth = async (req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
    try {
      const token = this.extractToken(req);
      if (!token) {
        return next();
      }

      await this.authenticate(req, res, next);
    } catch (_error) {
      // For optional auth, continue without user data
      next();
    }
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 131:3 - Line 157:6), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/permission-middleware.ts (Line 32:1 - Line 58:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn799" onclick="toggleCodeBlock('cloneGroup799', 'expandBtn799', 'collapseBtn799')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn799" onclick="toggleCodeBlock('cloneGroup799', 'expandBtn799', 'collapseBtn799')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup799"><code class="language-typescript text-sm text-gray-800">requirePermission = (permission: Permission) =&gt; {
    return async (req: Request, _res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
      try {
        if (!req.user) {
          throw new AppError('Authentication required', 401);
        }

        // Super admin has all permissions
        if (req.user.role === 'super_admin') {
          return next();
        }

        // Check if user has the required permission
        if (!req.user.permissions.includes(permission)) {
          throw new AppError('Insufficient permissions', 403);
        }

        next();
      } catch (error) {
        next(error);
      }
    };
  };

  /**
   * Require one of multiple permissions
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 158:3 - Line 188:6), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/permission-middleware.ts (Line 59:1 - Line 89:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn800" onclick="toggleCodeBlock('cloneGroup800', 'expandBtn800', 'collapseBtn800')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn800" onclick="toggleCodeBlock('cloneGroup800', 'expandBtn800', 'collapseBtn800')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup800"><code class="language-typescript text-sm text-gray-800">requireAnyPermission = (permissions: Permission[]) =&gt; {
    return async (req: Request, _res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
      try {
        if (!req.user) {
          throw new AppError('Authentication required', 401);
        }

        // Super admin has all permissions
        if (req.user.role === 'super_admin') {
          return next();
        }

        // Check if user has any of the required permissions
        const hasPermission = permissions.some((permission) =&gt;
          req.user?.permissions.includes(permission)
        );

        if (!hasPermission) {
          throw new AppError('Insufficient permissions', 403);
        }

        next();
      } catch (error) {
        next(error);
      }
    };
  };

  /**
   * Require specific role
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 189:3 - Line 200:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/permission-middleware.ts (Line 90:1 - Line 101:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn801" onclick="toggleCodeBlock('cloneGroup801', 'expandBtn801', 'collapseBtn801')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn801" onclick="toggleCodeBlock('cloneGroup801', 'expandBtn801', 'collapseBtn801')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup801"><code class="language-typescript text-sm text-gray-800">requireRole = (roles: string | string[]) =&gt; {
    const roleArray = Array.isArray(roles) ? roles : [roles];

    return async (req: Request, _res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
      try {
        if (!req.user) {
          throw new AppError('Authentication required', 401);
        }

        if (!roleArray.includes(req.user.role)) {
          throw new AppError('Insufficient role privileges', 403);
        }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 212:3 - Line 230:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/access-control.ts (Line 12:1 - Line 35:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn802" onclick="toggleCodeBlock('cloneGroup802', 'expandBtn802', 'collapseBtn802')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn802" onclick="toggleCodeBlock('cloneGroup802', 'expandBtn802', 'collapseBtn802')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup802"><code class="language-typescript text-sm text-gray-800">requireEmailVerification = async (
    req: Request,
    _res: Response,
    next: NextFunction
  ): Promise&lt;void&gt; =&gt; {
    try {
      if (!req.user) {
        throw new AppError('Authentication required', 401);
      }

      if (!req.user.isEmailVerified) {
        throw new AppError('Email verification required', 403);
      }

      next();
    } catch (error) {
      next(error);
    }
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 235:3 - Line 271:6), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/access-control.ts (Line 36:1 - Line 72:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn803" onclick="toggleCodeBlock('cloneGroup803', 'expandBtn803', 'collapseBtn803')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn803" onclick="toggleCodeBlock('cloneGroup803', 'expandBtn803', 'collapseBtn803')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup803"><code class="language-typescript text-sm text-gray-800">requireOwnershipOrAdmin = (resourceUserIdField: string = 'userId') =&gt; {
    return async (req: Request, _res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
      try {
        if (!req.user) {
          throw new AppError('Authentication required', 401);
        }

        // Admin and super_admin can access any resource
        if (['admin', 'super_admin'].includes(req.user.role)) {
          return next();
        }

        // Get resource user ID from params, body, or query
        const resourceUserId =
          req.params[resourceUserIdField] ||
          req.body[resourceUserIdField] ||
          req.query[resourceUserIdField];

        if (!resourceUserId) {
          throw new AppError('Resource ownership cannot be determined', 400);
        }

        // Check if user owns the resource
        if (req.user.id !== resourceUserId) {
          throw new AppError('Access denied: insufficient privileges', 403);
        }

        next();
      } catch (error) {
        next(error);
      }
    };
  };

  /**
   * Rate limiting by user
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 272:3 - Line 300:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/access-control.ts (Line 73:1 - Line 101:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn804" onclick="toggleCodeBlock('cloneGroup804', 'expandBtn804', 'collapseBtn804')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn804" onclick="toggleCodeBlock('cloneGroup804', 'expandBtn804', 'collapseBtn804')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup804"><code class="language-typescript text-sm text-gray-800">rateLimitByUser = (maxRequests: number, windowMs: number) =&gt; {
    const userRequests = new Map&lt;string, { count: number; resetTime: number }&gt;();

    return async (req: Request, res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
      try {
        if (!req.user) {
          throw new AppError('Authentication required', 401);
        }

        const userId = req.user.id;
        const now = Date.now();
        const userLimit = userRequests.get(userId);

        if (!userLimit || now &gt; userLimit.resetTime) {
          // Reset window
          userRequests.set(userId, {
            count: 1,
            resetTime: now + windowMs,
          });
          return next();
        }

        if (userLimit.count &gt;= maxRequests) {
          res.status(429).json({
            success: false,
            error: 'Too many requests',
            retryAfter: Math.ceil((userLimit.resetTime - now) / 1000),
          });
          return;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 314:3 - Line 328:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/auth-utilities.ts (Line 15:1 - Line 34:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn805" onclick="toggleCodeBlock('cloneGroup805', 'expandBtn805', 'collapseBtn805')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn805" onclick="toggleCodeBlock('cloneGroup805', 'expandBtn805', 'collapseBtn805')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup805"><code class="language-typescript text-sm text-gray-800">requireOrganization = async (req: Request, _res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
    try {
      if (!req.user) {
        throw new AppError('Authentication required', 401);
      }

      if (!req.user.organizationId) {
        throw new AppError('Organization membership required', 403);
      }

      next();
    } catch (error) {
      next(error);
    }
  };</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 333:3 - Line 381:2), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth/auth-utilities.ts (Line 35:1 - Line 86:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn806" onclick="toggleCodeBlock('cloneGroup806', 'expandBtn806', 'collapseBtn806')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn806" onclick="toggleCodeBlock('cloneGroup806', 'expandBtn806', 'collapseBtn806')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup806"><code class="language-typescript text-sm text-gray-800">private extractToken(req: Request): string | null {
    // Check Authorization header
    const authHeader = req.headers.authorization;
    if (authHeader?.startsWith('Bearer ')) {
      return authHeader.substring(7);
    }

    // Legacy support for bearer (lowercase)
    if (authHeader?.toLowerCase().startsWith('bearer ')) {
      return authHeader.split(' ')[1];
    }

    // Legacy support: token without Bearer prefix (only if no spaces)
    if (authHeader &amp;&amp; !authHeader.includes(' ')) {
      return authHeader;
    }

    // Check cookies (for browser requests)
    if (req.cookies?.token) {
      return req.cookies.token;
    }

    // Check query parameter (for websocket connections)
    if (req.query?.token &amp;&amp; typeof req.query.token === 'string') {
      return req.query.token;
    }

    return null;
  }
}

// Export singleton instance
export const authMiddleware = new AuthMiddleware();

// Export individual middleware functions for convenience and backward compatibility
export const authenticate = authMiddleware.authenticate;
export const optionalAuth = authMiddleware.optionalAuth;
export const requirePermission = authMiddleware.requirePermission;
export const requireAnyPermission = authMiddleware.requireAnyPermission;
export const requireRole = authMiddleware.requireRole;
export const requireEmailVerification = authMiddleware.requireEmailVerification;
export const requireOwnershipOrAdmin = authMiddleware.requireOwnershipOrAdmin;
export const rateLimitByUser = authMiddleware.rateLimitByUser;
export const requireOrganization = authMiddleware.requireOrganization;

// Legacy compatibility exports
export const authorize = (...roles: string[]) =&gt; {
  return authMiddleware.requireRole(roles);
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/testing.ts (Line 160:8 - Line 187:7), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/testing.ts (Line 43:6 - Line 70:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn807" onclick="toggleCodeBlock('cloneGroup807', 'expandBtn807', 'collapseBtn807')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn807" onclick="toggleCodeBlock('cloneGroup807', 'expandBtn807', 'collapseBtn807')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup807"><code class="language-typescript text-sm text-gray-800">);
      const duration = Date.now() - startTime;

      if (testCase.expectedOutput) {
        const isMatch = JSON.stringify(actualOutput) === JSON.stringify(testCase.expectedOutput);

        if (!isMatch) {
          return {
            testCaseId: testCase.id,
            status: 'failed',
            duration,
            actualOutput,
            assertion: 'Output does not match expected',
          };
        }
      }

      return {
        testCaseId: testCase.id,
        status: 'passed',
        duration,
        actualOutput,
      };
    } catch (error) {
      const duration = Date.now() - startTime;
      const errorMessage = error instanceof Error ? error.message : String(error);

      return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index.ts (Line 1:1 - Line 99:2), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index/dev-tools-core.ts (Line 1:1 - Line 99:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn808" onclick="toggleCodeBlock('cloneGroup808', 'expandBtn808', 'collapseBtn808')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn808" onclick="toggleCodeBlock('cloneGroup808', 'expandBtn808', 'collapseBtn808')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup808"><code class="language-typescript text-sm text-gray-800">export interface DevToolsConfig {
  environment: 'development' | 'staging' | 'production';
  debugLevel: 'error' | 'warn' | 'info' | 'debug' | 'verbose';
  enableHotReload: boolean;
  enableProfiler: boolean;
  watchPaths: string[];
}

export interface WorkflowTestResult {
  workflowId: string;
  executionId: string;
  status: 'passed' | 'failed' | 'skipped';
  duration: number;
  nodeResults: Array&lt;{
    nodeId: string;
    status: 'passed' | 'failed' | 'skipped';
    duration: number;
    error?: string;
  }&gt;;
  error?: string;
}

export interface PerformanceMetrics {
  timestamp: Date;
  cpu: {
    usage: number;
    load: number[];
  };
  memory: {
    used: number;
    heap: number;
    external: number;
  };
  eventLoop: {
    delay: number;
    utilization: number;
  };
}

export class DevTools {
  private config: DevToolsConfig;
  private watchers: Map&lt;string, any&gt; = new Map();
  private profiler?: any;

  constructor(config: Partial&lt;DevToolsConfig&gt; = {}) {
    this.config = {
      environment: 'development',
      debugLevel: 'info',
      enableHotReload: true,
      enableProfiler: false,
      watchPaths: ['src/**/*.ts', 'workflows/**/*.json'],
      ...config,
    };
  }

  async generateWorkflow(options: {
    name: string;
    description?: string;
    template?: 'basic' | 'api' | 'data-processing' | 'ai-workflow';
    outputPath?: string;
  }): Promise&lt;string&gt; {
    const template = this.getWorkflowTemplate(options.template || 'basic');

    const _workflow = {
      ...template,
      name: options.name,
      description: options.description || `Generated workflow: ${options.name}`,
      createdAt: new Date().toISOString(),
    };

    const outputPath =
      options.outputPath || `./workflows/${options.name.toLowerCase().replace(/\s+/g, '-')}.json`;

    return outputPath;
  }

  async generateNode(options: {
    type: string;
    name: string;
    category: string;
    outputPath?: string;
  }): Promise&lt;string&gt; {
    const nodeTemplate = this.getNodeTemplate(options.type);

    const _node = {
      ...nodeTemplate,
      name: options.name,
      category: options.category,
      createdAt: new Date().toISOString(),
    };

    const outputPath =
      options.outputPath || `./src/nodes/${options.category}/${options.name.toLowerCase()}.ts`;

    return outputPath;
  }

  async testWorkflow(workflowId: string, _testData?: any): Promise&lt;WorkflowTestResult&gt; {
    const startTime = Date.now();</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index.ts (Line 101:5 - Line 153:2), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index/testing-benchmarking.ts (Line 1:1 - Line 56:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn809" onclick="toggleCodeBlock('cloneGroup809', 'expandBtn809', 'collapseBtn809')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn809" onclick="toggleCodeBlock('cloneGroup809', 'expandBtn809', 'collapseBtn809')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup809"><code class="language-typescript text-sm text-gray-800">try {
      // TODO: Execute workflow with test data
      const result: WorkflowTestResult = {
        workflowId,
        executionId: this.generateId(),
        status: 'passed',
        duration: Date.now() - startTime,
        nodeResults: [],
      };

      return result;
    } catch (error) {
      return {
        workflowId,
        executionId: this.generateId(),
        status: 'failed',
        duration: Date.now() - startTime,
        nodeResults: [],
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  async benchmarkWorkflow(
    workflowId: string,
    iterations: number = 10
  ): Promise&lt;{
    averageDuration: number;
    minDuration: number;
    maxDuration: number;
    successRate: number;
    results: WorkflowTestResult[];
  }&gt; {
    const results: WorkflowTestResult[] = [];

    for (let i = 0; i &lt; iterations; i++) {
      const result = await this.testWorkflow(workflowId);
      results.push(result);
    }

    const durations = results.map((r) =&gt; r.duration);
    const successCount = results.filter((r) =&gt; r.status === 'passed').length;

    return {
      averageDuration: durations.reduce((sum, d) =&gt; sum + d, 0) / durations.length,
      minDuration: Math.min(...durations),
      maxDuration: Math.max(...durations),
      successRate: (successCount / iterations) * 100,
      results,
    };
  }

  startWatching():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index.ts (Line 153:2 - Line 166:2), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index/testing-benchmarking.ts (Line 57:1 - Line 71:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn810" onclick="toggleCodeBlock('cloneGroup810', 'expandBtn810', 'collapseBtn810')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn810" onclick="toggleCodeBlock('cloneGroup810', 'expandBtn810', 'collapseBtn810')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup810"><code class="language-typescript text-sm text-gray-800">: void {
    if (!this.config.enableHotReload) return;

    for (const pattern of this.config.watchPaths) {
      // Mock watcher
      const watcher = {
        close: () =&gt; {},
      };

      this.watchers.set(pattern, watcher);
    }
  }

  stopWatching():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index.ts (Line 187:2 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index/testing-benchmarking.ts (Line 99:1 - Line 116:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn811" onclick="toggleCodeBlock('cloneGroup811', 'expandBtn811', 'collapseBtn811')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn811" onclick="toggleCodeBlock('cloneGroup811', 'expandBtn811', 'collapseBtn811')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup811"><code class="language-typescript text-sm text-gray-800">validateWorkflows(_directory: string = './workflows'): Promise&lt;{
    valid: number;
    invalid: number;
    errors: Array&lt;{ file: string; errors: string[] }&gt;;
  }&gt; {
    // TODO: Implement workflow validation
    // This would scan workflow files and validate their structure

    return {
      valid: 0,
      invalid: 0,
      errors: [],
    };
  }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index.ts (Line 202:2 - Line 300:2), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index/performance-analysis.ts (Line 2:1 - Line 112:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn812" onclick="toggleCodeBlock('cloneGroup812', 'expandBtn812', 'collapseBtn812')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn812" onclick="toggleCodeBlock('cloneGroup812', 'expandBtn812', 'collapseBtn812')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup812"><code class="language-typescript text-sm text-gray-800">analyzePerformance(_workflowId: string): Promise&lt;{
    bottlenecks: Array&lt;{
      nodeId: string;
      avgDuration: number;
      callCount: number;
      errorRate: number;
    }&gt;;
    recommendations: string[];
  }&gt; {
    // TODO: Analyze workflow performance and identify bottlenecks

    return {
      bottlenecks: [],
      recommendations: [
        'Consider adding caching to frequently accessed data',
        'Optimize database queries in data processing nodes',
        'Use parallel execution where possible',
      ],
    };
  }

  generateMockData(_schema: any): any {
    // TODO: Generate mock data based on schema
    // This would be useful for testing workflows

    return {
      id: this.generateId(),
      timestamp: new Date().toISOString(),
      data: 'mock data',
    };
  }

  private getWorkflowTemplate(type: string): any {
    const templates = {
      basic: {
        nodes: [
          {
            id: 'start',
            type: 'trigger',
            position: { x: 100, y: 100 },
            data: { label: 'Start' },
          },
          {
            id: 'end',
            type: 'action',
            position: { x: 300, y: 100 },
            data: { label: 'End' },
          },
        ],
        edges: [
          {
            id: 'start-end',
            source: 'start',
            target: 'end',
          },
        ],
      },
      api: {
        nodes: [
          {
            id: 'webhook',
            type: 'webhook-trigger',
            position: { x: 100, y: 100 },
            data: { label: 'Webhook Trigger' },
          },
          {
            id: 'http',
            type: 'http-request',
            position: { x: 300, y: 100 },
            data: { label: 'HTTP Request' },
          },
          {
            id: 'response',
            type: 'webhook-response',
            position: { x: 500, y: 100 },
            data: { label: 'Send Response' },
          },
        ],
        edges: [
          { id: 'webhook-http', source: 'webhook', target: 'http' },
          { id: 'http-response', source: 'http', target: 'response' },
        ],
      },
    };

    return templates[type as keyof typeof templates] || templates.basic;
  }

  private getNodeTemplate(type: string): any {
    const templates = {
      action: {
        type: 'action',
        properties: {
          operation: {
            type: 'select',
            required: true,
            options: ['create', 'read', 'update', 'delete'],
          },
        },</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index.ts (Line 318:5 - Line 343:2), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/index/template-utilities.ts (Line 25:1 - Line 52:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn813" onclick="toggleCodeBlock('cloneGroup813', 'expandBtn813', 'collapseBtn813')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn813" onclick="toggleCodeBlock('cloneGroup813', 'expandBtn813', 'collapseBtn813')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup813"><code class="language-typescript text-sm text-gray-800">return templates[type as keyof typeof templates] || templates.action;
  }

  private collectMetrics(): PerformanceMetrics {
    const memUsage = process.memoryUsage();

    const metrics: PerformanceMetrics = {
      timestamp: new Date(),
      cpu: {
        usage: 0, // TODO: Calculate CPU usage
        load: [0, 0, 0], // TODO: Get system load
      },
      memory: {
        used: memUsage.rss / 1024 / 1024, // MB
        heap: memUsage.heapUsed / 1024 / 1024, // MB
        external: memUsage.external / 1024 / 1024, // MB
      },
      eventLoop: {
        delay: 0, // TODO: Measure event loop delay
        utilization: 0, // TODO: Calculate event loop utilization
      },
    };
    return metrics;
  }

  private generateId():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/database-manager.ts (Line 1:1 - Line 102:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/database-manager/hybrid-manager.ts (Line 1:1 - Line 101:1)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn814" onclick="toggleCodeBlock('cloneGroup814', 'expandBtn814', 'collapseBtn814')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn814" onclick="toggleCodeBlock('cloneGroup814', 'expandBtn814', 'collapseBtn814')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup814"><code class="language-typescript text-sm text-gray-800">import { MongoDBConnection } from './mongodb/connection';
import { PostgreSQLConnection } from './postgresql/connection';
import { RedisConnection } from './redis/connection';
import type { DatabaseConfig } from './types';

/**
 * Hybrid database manager that orchestrates MongoDB, PostgreSQL, and Redis connections
 *
 * Architecture:
 * - MongoDB: Primary database for workflows, executions, users, organizations
 * - PostgreSQL: AI database with pgvector for embeddings and vector search
 * - Redis: Caching, sessions, and queue management
 */
export class DatabaseManager {
  private mongodb: MongoDBConnection;
  private postgresql: PostgreSQLConnection;
  private redis: RedisConnection;
  private isInitialized = false;

  constructor(config: DatabaseConfig) {
    this.mongodb = new MongoDBConnection(config.mongodb);
    this.postgresql = new PostgreSQLConnection(config.postgresql);
    this.redis = new RedisConnection(config.redis);
  }

  /**
   * Initialize all database connections
   */
  async initialize(): Promise&lt;void&gt; {
    if (this.isInitialized) {
      return;
    }
    await this.mongodb.connect();
    await this.postgresql.connect();
    await this.postgresql.enableVectorExtension();
    await this.redis.connect();

    this.isInitialized = true;
  }

  /**
   * Shutdown all database connections gracefully
   */
  async shutdown(): Promise&lt;void&gt; {
    await Promise.all([
      this.mongodb.disconnect(),
      this.postgresql.disconnect(),
      this.redis.disconnect(),
    ]);

    this.isInitialized = false;
  }

  /**
   * Check health of all database connections
   */
  async healthCheck(): Promise&lt;{
    mongodb: boolean;
    postgresql: boolean;
    redis: boolean;
    overall: boolean;
  }&gt; {
    const [mongoHealth, pgHealth, redisHealth] = await Promise.allSettled([
      this.mongodb.ping(),
      this.postgresql.ping(),
      this.redis.ping(),
    ]);

    const health = {
      mongodb: mongoHealth.status === 'fulfilled' &amp;&amp; mongoHealth.value,
      postgresql: pgHealth.status === 'fulfilled' &amp;&amp; pgHealth.value,
      redis: redisHealth.status === 'fulfilled' &amp;&amp; redisHealth.value,
      overall: false,
    };

    health.overall = health.mongodb &amp;&amp; health.postgresql &amp;&amp; health.redis;
    return health;
  }

  /**
   * Get MongoDB connection instance
   */
  getMongoDB(): MongoDBConnection {
    if (!this.isInitialized) {
      throw new Error('Database not initialized. Call initialize() first.');
    }
    return this.mongodb;
  }

  /**
   * Get PostgreSQL connection instance
   */
  getPostgreSQL(): PostgreSQLConnection {
    if (!this.isInitialized) {
      throw new Error('Database not initialized. Call initialize() first.');
    }
    return this.postgresql;
  }

  /**
   * Get Redis connection instance
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/database-manager.ts (Line 113:2 - Line 159:6), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/database-manager/connection-orchestration.ts (Line 15:1 - Line 66:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn815" onclick="toggleCodeBlock('cloneGroup815', 'expandBtn815', 'collapseBtn815')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn815" onclick="toggleCodeBlock('cloneGroup815', 'expandBtn815', 'collapseBtn815')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup815"><code class="language-typescript text-sm text-gray-800">transaction&lt;T&gt;(
    operations: {
      mongodb?: () =&gt; Promise&lt;any&gt;;
      postgresql?: () =&gt; Promise&lt;any&gt;;
    },
    options: {
      retries?: number;
      timeout?: number;
    } = {}
  ): Promise&lt;T&gt; {
    const { retries = 3, timeout = 30000 } = options;
    let attempt = 0;

    while (attempt &lt; retries) {
      try {
        const results: any[] = [];

        // Execute MongoDB operations in transaction
        if (operations.mongodb) {
          const mongoResult = await this.mongodb.transaction(operations.mongodb);
          results.push(mongoResult);
        }

        // Execute PostgreSQL operations in transaction
        if (operations.postgresql) {
          const pgResult = await this.postgresql.transaction(operations.postgresql);
          results.push(pgResult);
        }

        return results.length === 1 ? results[0] : results;
      } catch (error) {
        attempt++;
        if (attempt &gt;= retries) {
          throw error;
        }

        // Exponential backoff
        await new Promise((resolve) =&gt; setTimeout(resolve, 2 ** attempt * 1000));
      }
    }

    throw new Error('Transaction failed after maximum retries');
  }

  /**
   * Migrate databases to latest schema
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/database/src/database-manager.ts (Line 201:5 - Line 213:2), /home/margon/Reporunner/reporunner/packages/@reporunner/database/src/database-manager/health-monitoring.ts (Line 1:1 - Line 13:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn816" onclick="toggleCodeBlock('cloneGroup816', 'expandBtn816', 'collapseBtn816')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn816" onclick="toggleCodeBlock('cloneGroup816', 'expandBtn816', 'collapseBtn816')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup816"><code class="language-typescript text-sm text-gray-800">const [mongoStats, pgStats, redisStats] = await Promise.all([
      this.mongodb.getStats(),
      this.postgresql.getStats(),
      this.redis.getStats(),
    ]);

    return {
      mongodb: mongoStats,
      postgresql: pgStats,
      redis: redisStats,
    };
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index.ts (Line 1:1 - Line 100:2), /home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index/api-response-types.ts (Line 1:1 - Line 100:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn817" onclick="toggleCodeBlock('cloneGroup817', 'expandBtn817', 'collapseBtn817')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn817" onclick="toggleCodeBlock('cloneGroup817', 'expandBtn817', 'collapseBtn817')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup817"><code class="language-typescript text-sm text-gray-800">import type { NextFunction, Request, Response } from 'express';

export interface ApiResponse&lt;T = any&gt; {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
    details?: any;
  };
  meta?: {
    timestamp: string;
    requestId: string;
    pagination?: {
      page: number;
      limit: number;
      total: number;
      totalPages: number;
    };
  };
}

export interface RequestContext {
  requestId: string;
  userId?: string;
  organizationId?: string;
  roles?: string[];
  permissions?: string[];
  ip: string;
  userAgent: string;
  startTime: Date;
}

export interface PaginationOptions {
  page: number;
  limit: number;
  sortBy?: string;
  sortOrder?: 'asc' | 'desc';
}

export interface ValidationError {
  field: string;
  message: string;
  value?: any;
}

export class ApiError extends Error {
  constructor(
    public statusCode: number,
    public code: string,
    message: string,
    public details?: any
  ) {
    super(message);
    this.name = 'ApiError';
  }

  static badRequest(message: string, details?: any): ApiError {
    return new ApiError(400, 'BAD_REQUEST', message, details);
  }

  static unauthorized(message: string = 'Unauthorized'): ApiError {
    return new ApiError(401, 'UNAUTHORIZED', message);
  }

  static forbidden(message: string = 'Forbidden'): ApiError {
    return new ApiError(403, 'FORBIDDEN', message);
  }

  static notFound(message: string = 'Resource not found'): ApiError {
    return new ApiError(404, 'NOT_FOUND', message);
  }

  static conflict(message: string, details?: any): ApiError {
    return new ApiError(409, 'CONFLICT', message, details);
  }

  static validationFailed(errors: ValidationError[]): ApiError {
    return new ApiError(422, 'VALIDATION_FAILED', 'Validation failed', errors);
  }

  static tooManyRequests(message: string = 'Too many requests'): ApiError {
    return new ApiError(429, 'TOO_MANY_REQUESTS', message);
  }

  static internalError(message: string = 'Internal server error', details?: any): ApiError {
    return new ApiError(500, 'INTERNAL_ERROR', message, details);
  }

  static serviceUnavailable(message: string = 'Service unavailable'): ApiError {
    return new ApiError(503, 'SERVICE_UNAVAILABLE', message);
  }
}

export class ResponseHelper {
  static success&lt;T&gt;(data: T, meta?: Partial&lt;ApiResponse['meta']&gt;): ApiResponse&lt;T&gt; {
    return {
      success: true,
      data,
      meta: {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index.ts (Line 106:3 - Line 149:2), /home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index/middleware-handlers.ts (Line 6:1 - Line 55:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn818" onclick="toggleCodeBlock('cloneGroup818', 'expandBtn818', 'collapseBtn818')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn818" onclick="toggleCodeBlock('cloneGroup818', 'expandBtn818', 'collapseBtn818')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup818"><code class="language-typescript text-sm text-gray-800">}

  static error(error: ApiError | Error, requestId?: string): ApiResponse {
    const isApiError = error instanceof ApiError;

    return {
      success: false,
      error: {
        code: isApiError ? error.code : 'INTERNAL_ERROR',
        message: error.message,
        details: isApiError ? error.details : undefined,
      },
      meta: {
        timestamp: new Date().toISOString(),
        requestId: requestId || ResponseHelper.generateRequestId(),
      },
    };
  }

  static paginated&lt;T&gt;(
    data: T[],
    pagination: PaginationOptions,
    total: number,
    requestId?: string
  ): ApiResponse&lt;T[]&gt; {
    const totalPages = Math.ceil(total / pagination.limit);

    return {
      success: true,
      data,
      meta: {
        timestamp: new Date().toISOString(),
        requestId: requestId || ResponseHelper.generateRequestId(),
        pagination: {
          page: pagination.page,
          limit: pagination.limit,
          total,
          totalPages,
        },
      },
    };
  }

  private static generateRequestId():</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index.ts (Line 149:2 - Line 200:2), /home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index/middleware-handlers.ts (Line 56:1 - Line 108:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn819" onclick="toggleCodeBlock('cloneGroup819', 'expandBtn819', 'collapseBtn819')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn819" onclick="toggleCodeBlock('cloneGroup819', 'expandBtn819', 'collapseBtn819')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup819"><code class="language-typescript text-sm text-gray-800">: string {
    return Math.random().toString(36).substr(2, 9);
  }
}

export const asyncHandler = (
  fn: (req: Request, res: Response, next: NextFunction) =&gt; Promise&lt;any&gt;
) =&gt; {
  return (req: Request, res: Response, next: NextFunction) =&gt; {
    Promise.resolve(fn(req, res, next)).catch(next);
  };
};

export const contextMiddleware = (req: Request, res: Response, next: NextFunction): void =&gt; {
  const context: RequestContext = {
    requestId: Math.random().toString(36).substr(2, 9),
    userId: req.user?.id,
    organizationId: req.user?.organizationId,
    roles: req.user?.roles || [],
    permissions: req.user?.permissions || [],
    ip: req.ip || req.connection.remoteAddress || 'unknown',
    userAgent: req.get('User-Agent') || 'unknown',
    startTime: new Date(),
  };

  req.context = context;
  res.setHeader('X-Request-ID', context.requestId);

  next();
};

export const errorHandler = (
  error: Error,
  req: Request,
  res: Response,
  _next: NextFunction
): void =&gt; {
  const context = req.context as RequestContext;
  const requestId = context?.requestId;

  if (error instanceof ApiError) {
    res.status(error.statusCode).json(ResponseHelper.error(error, requestId));
  } else {
    const internalError = ApiError.internalError();
    res.status(500).json(ResponseHelper.error(internalError, requestId));
  }
};

export const notFoundHandler = (req: Request, res: Response, _next: NextFunction): void =&gt; {
  const context = req.context as RequestContext;
  const error = ApiError.notFound(`Route ${req.method} ${req.path} not found`);
  res.status(404).json(ResponseHelper.error(error, context?.requestId));</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index.ts (Line 203:1 - Line 245:2), /home/margon/Reporunner/reporunner/packages/@reporunner/backend-common/src/index/validation-extensions.ts (Line 3:1 - Line 45:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn820" onclick="toggleCodeBlock('cloneGroup820', 'expandBtn820', 'collapseBtn820')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn820" onclick="toggleCodeBlock('cloneGroup820', 'expandBtn820', 'collapseBtn820')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup820"><code class="language-typescript text-sm text-gray-800">export const validatePagination = (req: Request, _res: Response, next: NextFunction): void =&gt; {
  const page = parseInt(req.query.page as string, 10) || 1;
  const limit = Math.min(parseInt(req.query.limit as string, 10) || 20, 100);
  const sortBy = req.query.sortBy as string;
  const sortOrder = (req.query.sortOrder as string) === 'desc' ? 'desc' : 'asc';

  if (page &lt; 1) {
    throw ApiError.badRequest('Page must be greater than 0');
  }

  if (limit &lt; 1) {
    throw ApiError.badRequest('Limit must be greater than 0');
  }

  req.pagination = {
    page,
    limit,
    sortBy,
    sortOrder,
  };

  next();
};

// Extend Express Request interface
declare global {
  namespace Express {
    interface Request {
      context?: RequestContext;
      user?: {
        id: string;
        organizationId: string;
        roles: string[];
        permissions: string[];
      };
      pagination?: PaginationOptions;
    }
  }
}

export * from './middleware';
export * from './utils';
export * from './validation';</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/auth-manager.ts (Line 150:2 - Line 176:27), /home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/auth-manager.ts (Line 94:9 - Line 120:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn821" onclick="toggleCodeBlock('cloneGroup821', 'expandBtn821', 'collapseBtn821')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn821" onclick="toggleCodeBlock('cloneGroup821', 'expandBtn821', 'collapseBtn821')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup821"><code class="language-typescript text-sm text-gray-800">};
      }

      // Generate tokens
      const { token, refreshToken } = await this.generateTokens(user);

      // Update last login
      await this.config.database.updateUser(user.id, {
        lastLoginAt: new Date(),
      });

      await this.emitAuthEvent(AuthEvent.LOGIN_SUCCESS, {
        userId: user.id,
        email: user.email,
        organizationId: user.organizationId,
        metadata,
      });

      return {
        success: true,
        user,
        token,
        refreshToken,
        expiresIn: this.getTokenExpiration(),
      };
    } catch (_error) {
      return { success: false, error: 'Invalid two-factor token'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/auth-manager.ts (Line 321:21 - Line 330:26), /home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/auth-manager.ts (Line 302:20 - Line 311:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn822" onclick="toggleCodeBlock('cloneGroup822', 'expandBtn822', 'collapseBtn822')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn822" onclick="toggleCodeBlock('cloneGroup822', 'expandBtn822', 'collapseBtn822')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup822"><code class="language-typescript text-sm text-gray-800">(user: User): string {
    const payload: JWTPayload = {
      sub: user.id,
      email: user.email,
      username: user.username,
      organizationId: user.organizationId,
      roles: user.roles,
      permissions: user.permissions,
      iat: Math.floor(Date.now() / 1000),
      exp: Math.floor(Date.now() / 1000) + this.getRefreshTokenExpiration</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/api/src/server.ts (Line 36:5 - Line 52:8), /home/margon/Reporunner/reporunner/packages/@reporunner/api-gateway/src/index.ts (Line 72:5 - Line 88:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn823" onclick="toggleCodeBlock('cloneGroup823', 'expandBtn823', 'collapseBtn823')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn823" onclick="toggleCodeBlock('cloneGroup823', 'expandBtn823', 'collapseBtn823')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup823"><code class="language-typescript text-sm text-gray-800">this.app.use(
      helmet({
        contentSecurityPolicy: {
          directives: {
            defaultSrc: [&quot;'self'&quot;],
            styleSrc: [&quot;'self'&quot;, &quot;'unsafe-inline'&quot;],
            scriptSrc: [&quot;'self'&quot;],
            imgSrc: [&quot;'self'&quot;, 'data:', 'https:'],
          },
        },
      })
    );

    // CORS
    this.app.use(
      cors({
        origin: process</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/ai/src/embeddings.ts (Line 105:41 - Line 116:9), /home/margon/Reporunner/reporunner/packages/@reporunner/ai/src/embeddings.ts (Line 71:36 - Line 82:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn824" onclick="toggleCodeBlock('cloneGroup824', 'expandBtn824', 'collapseBtn824')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn824" onclick="toggleCodeBlock('cloneGroup824', 'expandBtn824', 'collapseBtn824')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup824"><code class="language-typescript text-sm text-gray-800">);
    return this.generateMockEmbedding();
  }

  private generateMockEmbedding(): number[] {
    return Array(this.model.dimensions)
      .fill(0)
      .map(() =&gt; Math.random() * 2 - 1);
  }
}

export function</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="javascript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">javascript</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 363:7 - Line 432:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 315:17 - Line 337:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup0"><code class="language-javascript text-sm text-gray-800">${output.id}`}&gt;
            {/* Connection Line for Standard Outputs */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Draggable Plus Icon Handle for Standard Outputs */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (AI Agent only) */}
      {isAIAgent &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`plus-${output.id}`}&gt;
            {/* Connection Line for Output */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Plus Icon Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode/ContainerNode.tsx (Line 110:8 - Line 363:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode/containernode/ContainerNode.tsx (Line 115:8 - Line 368:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup3"><code class="language-javascript text-sm text-gray-800">={onEdit}
        className=&quot;p-1 text-gray-400 hover:text-white transition-colors&quot;
        title=&quot;Edit container&quot;
      &gt;
        ⚙️
      &lt;/button&gt;
      &lt;button
        onClick={onToggleExpanded}
        className=&quot;p-1 text-gray-400 hover:text-white transition-colors&quot;
        title={isExpanded ? 'Collapse' : 'Expand'}
      &gt;
        {isExpanded ? '▼' : '▶'}
      &lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
);

const DropZone: React.FC&lt;{
  containerType: ContainerType;
  onDrop: (event: React.DragEvent) =&gt; void;
  onDragOver: (event: React.DragEvent) =&gt; void;
  hasChildren: boolean;
}&gt; = ({ containerType, onDrop, onDragOver, hasChildren }) =&gt; (
  &lt;div
    className={cn(
      'flex-1 flex items-center justify-center transition-all duration-200',
      'border-2 border-dashed border-gray-600 rounded m-2',
      'hover:border-gray-400 hover:bg-gray-800/20'
    )}
    onDrop={onDrop}
    onDragOver={onDragOver}
  &gt;
    {!hasChildren ? (
      &lt;div className=&quot;text-center p-8&quot;&gt;
        &lt;div className=&quot;text-3xl mb-2&quot;&gt;{getContainerIcon(containerType)}&lt;/div&gt;
        &lt;div className=&quot;text-sm text-gray-400&quot;&gt;
          Drop nodes here to add them to this {containerType}
        &lt;/div&gt;
        {containerType === 'loop' &amp;&amp; (
          &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;Nodes will be executed repeatedly&lt;/div&gt;
        )}
        {containerType === 'parallel' &amp;&amp; (
          &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;Nodes will be executed concurrently&lt;/div&gt;
        )}
      &lt;/div&gt;
    ) : (
      &lt;div className=&quot;w-full h-full min-h-[200px] p-2&quot;&gt;
        {/* Child nodes will be rendered here */}
        &lt;div className=&quot;text-xs text-gray-500 text-center&quot;&gt;Container content ({containerType})&lt;/div&gt;
      &lt;/div&gt;
    )}
  &lt;/div&gt;
);

export const ContainerNode: React.FC&lt;ContainerNodeProps&gt; = ({ id, data, selected = false }) =&gt; {
  const { setNodes } = useReactFlow();
  const { addNode } = useLeanWorkflowStore();
  const [isDragOver, setIsDragOver] = useState(false);

  const { containerType, children, dimensions, isExpanded, config } = data;

  const handleToggleExpanded = useCallback(() =&gt; {
    // Update node data to toggle expanded state
    setNodes((nodes) =&gt;
      nodes.map((node) =&gt;
        node.id === id
          ? {
              ...node,
              data: {
                ...node.data,
                isExpanded: !node.data.isExpanded,
              },
            }
          : node
      )
    );
  }, [id, setNodes]);

  const handleEdit = useCallback(() =&gt; {}, []);

  const handleDrop = useCallback(
    (event: React.DragEvent) =&gt; {
      event.preventDefault();
      setIsDragOver(false);

      try {
        const data = event.dataTransfer.getData('application/reactflow');
        if (!data) return;

        const { type, nodeTypeData, integrationData } = JSON.parse(data);

        // Calculate position within container
        const containerRect = event.currentTarget.getBoundingClientRect();
        const relativeX = event.clientX - containerRect.left;
        const relativeY = event.clientY - containerRect.top;

        // Create new node within container
        const newNodeId = `node-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        const newNode = {
          id: newNodeId,
          type: type,
          position: { x: relativeX - 50, y: relativeY - 25 }, // Center on drop point
          parameters: {},
          data: {
            label: nodeTypeData?.displayName || nodeTypeData?.name || type,
            integration: integrationData?.id,
            nodeType: nodeTypeData?.name || nodeTypeData?.id,
            configuration: {},
            credentials: [],
            // Mark this node as belonging to the container
            parentContainer: id,
            containerType: containerType,
          },
        };

        addNode(newNode);

        // Update container to include this child
        setNodes((nodes) =&gt;
          nodes.map((node) =&gt;
            node.id === id
              ? {
                  ...node,
                  data: {
                    ...node.data,
                    children: [...(node.data.children || []), newNode],
                  },
                }
              : node
          )
        );
      } catch (_error) {}
    },
    [id, containerType, addNode, setNodes]
  );

  const handleDragOver = useCallback((event: React.DragEvent) =&gt; {
    event.preventDefault();
    event.dataTransfer.dropEffect = 'move';
    setIsDragOver(true);
  }, []);

  const handleDragLeave = useCallback((event: React.DragEvent) =&gt; {
    // Only hide if leaving the container entirely
    if (!event.currentTarget.contains(event.relatedTarget as HTMLElement)) {
      setIsDragOver(false);
    }
  }, []);

  // Calculate container handles based on type
  const containerHandles = useMemo(() =&gt; {
    switch (containerType) {
      case 'loop':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs: [
            { id: 'loop-start', position: Position.Right, label: 'Loop Start' },
            { id: 'loop-end', position: Position.Bottom, label: 'Loop End' },
          ],
        };
      case 'parallel':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs: [
            {
              id: 'parallel-branch',
              position: Position.Right,
              label: 'Branch',
            },
            {
              id: 'parallel-complete',
              position: Position.Bottom,
              label: 'Complete',
            },
          ],
        };
      case 'conditional':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs:
            config.conditions?.map((condition, index) =&gt; ({
              id: condition.id,
              position: Position.Right,
              label: condition.label,
              style: { top: `${20 + index * 30}%` },
            })) || [],
        };
      case 'subflow':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs: [{ id: 'output', position: Position.Right }],
        };
      default:
        return { inputs: [], outputs: [] };
    }
  }, [containerType, config.conditions]);

  return (
    &lt;div
      className={cn(
        getContainerStyles(containerType, selected),
        isDragOver &amp;&amp; 'ring-2 ring-blue-400 ring-opacity-50',
        'min-w-[300px] min-h-[200px]'
      )}
      style={{
        width: dimensions.width,
        height: isExpanded ? dimensions.height : 'auto',
      }}
      onDragLeave={handleDragLeave}
    &gt;
      {/* Container Handles */}
      {containerHandles.inputs.map((handle) =&gt; (
        &lt;Handle
          key={handle.id}
          type=&quot;target&quot;
          position={handle.position}
          id={handle.id}
          className=&quot;!bg-gray-600 !border-2 !border-gray-400&quot;
        /&gt;
      ))}

      {containerHandles.outputs.map((handle) =&gt; (
        &lt;Handle
          key={handle.id}
          type=&quot;source&quot;
          position={handle.position}
          id={handle.id}
          className=&quot;!bg-gray-600 !border-2 !border-gray-400&quot;
          style={'style' in handle ? handle.style : undefined}
        &gt;
          {'label' in handle &amp;&amp; handle.label &amp;&amp; (
            &lt;div className=&quot;absolute top-0 left-full ml-2 text-xs text-gray-400 whitespace-nowrap&quot;&gt;
              {handle.label}
            &lt;/div&gt;
          )}
        &lt;/Handle&gt;
      ))}

      {/* Container Header */}
      &lt;ContainerHeader
        containerType={containerType}
        label={data.label}
        isExpanded={isExpanded}
        onToggleExpanded={handleToggleExpanded}
        onEdit={handleEdit}
      /&gt;

      {/* Container Content */}
      {isExpanded &amp;&amp; (
        &lt;DropZone
          containerType={containerType}
          onDrop={handleDrop}
          onDragOver={handleDragOver}
          hasChildren={children.length &gt; 0}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/index.tsx (Line 235:4 - Line 323:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/index/index.tsx (Line 241:4 - Line 329:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup5"><code class="language-javascript text-sm text-gray-800">={iconSrc}
            alt={displayName}
            className=&quot;w-6 h-6&quot;
            onError={(e) =&gt; {
              const target = e.target as HTMLImageElement;
              target.style.display = 'none';
              target.nextElementSibling?.classList.remove('hidden');
            }}
          /&gt;
        );
      }
      return &lt;span className=&quot;text-xl&quot;&gt;{iconSrc}&lt;/span&gt;;
    }

    // Fallback to default icon
    const defaultIcon = config.visual.defaultIcon;
    if (typeof defaultIcon === 'string') {
      // Handle special default icon types
      switch (defaultIcon) {
        case 'trigger-default':
          return &lt;div className=&quot;w-4 h-4 bg-green-500 rounded&quot;&gt;&lt;/div&gt;;
        case 'action-default':
          return &lt;div className=&quot;w-4 h-4 bg-blue-500 rounded&quot;&gt;&lt;/div&gt;;
        case 'condition-default':
          return &lt;div className=&quot;w-4 h-4 bg-yellow-500 rounded&quot;&gt;&lt;/div&gt;;
        default:
          return &lt;span className=&quot;text-xl&quot;&gt;{defaultIcon}&lt;/span&gt;;
      }
    }
    return defaultIcon;
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        {' '}
        {/* This container holds both the node and plus icons */}
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              ${config.visual.shape}
              ${config.visual.dimensions.minWidth}
              ${config.visual.dimensions.maxWidth ? config.visual.dimensions.maxWidth : ''}
              ${config.visual.dimensions.minHeight ? config.visual.dimensions.minHeight : ''}
              ${isSelected ? `ring-2 ring-offset-2 ring-offset-gray-900 ${config.visual.selectionRingColor}` : ''}
              ${isHovered ? `hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ${config.visual.selectionRingColor}` : ''}
            `}
            style={config.visual.dimensions.style}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Use NodeHandles for all node types to ensure consistent UX */}
            &lt;NodeHandles
              config={config.handles}
              integration={data.integrationData?.id || data.integration}
              nodeType={nodeType}
              aiHandleConnections={aiHandleConnections}
              hasOutgoingConnection={data.hasOutgoingConnection}
            /&gt;

            {/* Execution State Overlay */}
            {id &amp;&amp; &lt;ExecutionStateOverlay nodeId={id} /&gt;}

            {/* Node Icon */}
            &lt;div className=&quot;flex items-center justify-center&quot;&gt;{renderIcon()}&lt;/div&gt;

            {/* Node Toolbar */}
            &lt;NodeToolbar
              visible={toolbarVisible}
              onPlay={handlePlay}
              onStop={handleStop}
              onDelete={handleDelete}
              onMenuToggle={() =&gt; setShowThreeDotMenu(!showThreeDotMenu)}
            /&gt;

            {/* Three Dot Menu */}
            &lt;NodeMenu
              visible={showThreeDotMenu}
              onClose={() =&gt; setShowThreeDotMenu(false)}
              onOpen={handleOpen}
              onTest={handleTest}
              onRename={handleRename}
              onDeactivate={handleDeactivate}
              onCopy={handleCopy}
              onDuplicate={handleDuplicate}
              onSelectAll={handleSelectAll}
              onClearSelection={handleClearSelection}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 64:9 - Line 432:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 64:9 - Line 337:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup7"><code class="language-javascript text-sm text-gray-800">={Position.Left}
          id=&quot;main&quot;
          className=&quot;w-3 h-3 bg-gray-600 border-2 border-gray-800 hover:bg-gray-500 transition-colors&quot;
          style={{ left: '-6px', top: isAIAgent ? '50%' : '50%' }}
        /&gt;
      )}

      {/* AI-specific handles for AI Agent nodes - positioned at bottom with vertical connection lines */}
      {isAIAgent &amp;&amp; (
        &lt;&gt;
          {/* Vertical connection lines for AI handles - only show if not connected */}
          {!aiHandleConnections.ai_languageModel &amp;&amp; (
            &lt;div
              className=&quot;absolute w-px h-14 bg-gray-400&quot;
              style={{
                bottom: '-56px',
                left: '25%',
                transform: 'translateX(-50%)',
                zIndex: -1,
              }}
            /&gt;
          )}
          {!aiHandleConnections.ai_memory &amp;&amp; (
            &lt;div
              className=&quot;absolute w-px h-14 bg-gray-400&quot;
              style={{
                bottom: '-56px',
                left: '50%',
                transform: 'translateX(-50%)',
                zIndex: -1,
              }}
            /&gt;
          )}
          {!aiHandleConnections.ai_tool &amp;&amp; (
            &lt;div
              className=&quot;absolute w-px h-14 bg-gray-400&quot;
              style={{
                bottom: '-56px',
                left: '75%',
                transform: 'translateX(-50%)',
                zIndex: -1,
              }}
            /&gt;
          )}

          {/* Plus Icons for AI handles - positioned below the node - only show if not connected */}
          {!aiHandleConnections.ai_languageModel &amp;&amp; (
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Bottom}
              id=&quot;plus-ai_languageModel&quot;
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                bottom: '-58px',
                left: '25%',
                transform: 'translateX(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-blue-400 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          )}

          {!aiHandleConnections.ai_memory &amp;&amp; (
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Bottom}
              id=&quot;plus-ai_memory&quot;
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                bottom: '-58px',
                left: '50%',
                transform: 'translateX(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-orange-400 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          )}

          {!aiHandleConnections.ai_tool &amp;&amp; (
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Bottom}
              id=&quot;plus-ai_tool&quot;
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                bottom: '-58px',
                left: '75%',
                transform: 'translateX(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-teal-400 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          )}

          {/* Actual functional AI handles (visible at bottom edge of node) */}
          &lt;Handle
            type=&quot;target&quot;
            position={Position.Bottom}
            id=&quot;ai_languageModel&quot;
            className={getHandleStyle('ai_languageModel', nodeType)}
            style={{
              bottom: '-6px',
              left: '25%',
              transform: 'translateX(-50%)',
            }}
          /&gt;
          &lt;Handle
            type=&quot;target&quot;
            position={Position.Bottom}
            id=&quot;ai_memory&quot;
            className={getHandleStyle('ai_memory', nodeType)}
            style={{
              bottom: '-6px',
              left: '50%',
              transform: 'translateX(-50%)',
            }}
          /&gt;
          &lt;Handle
            type=&quot;target&quot;
            position={Position.Bottom}
            id=&quot;ai_tool&quot;
            className={getHandleStyle('ai_tool', nodeType)}
            style={{
              bottom: '-6px',
              left: '75%',
              transform: 'translateX(-50%)',
            }}
          /&gt;

          {/* Labels for bottom handles - positioned below plus icons */}
          &lt;div
            className=&quot;absolute text-xs text-blue-400 font-medium pointer-events-none&quot;
            style={{
              bottom: '-75px',
              left: '25%',
              transform: 'translateX(-50%)',
              whiteSpace: 'nowrap',
            }}
          &gt;
            LLM
          &lt;/div&gt;
          &lt;div
            className=&quot;absolute text-xs text-orange-400 font-medium pointer-events-none&quot;
            style={{
              bottom: '-75px',
              left: '50%',
              transform: 'translateX(-50%)',
              whiteSpace: 'nowrap',
            }}
          &gt;
            Mem
          &lt;/div&gt;
          &lt;div
            className=&quot;absolute text-xs text-teal-400 font-medium pointer-events-none&quot;
            style={{
              bottom: '-75px',
              left: '75%',
              transform: 'translateX(-50%)',
              whiteSpace: 'nowrap',
            }}
          &gt;
            Tool
          &lt;/div&gt;
        &lt;/&gt;
      )}

      {/* Output Handles with Plus Icons and Connection Lines */}
      {config.outputs?.map((output) =&gt; {
        return (
          &lt;React.Fragment key={output.id}&gt;
            {/* Actual Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={output.id}
              className={getHandleStyle(output.id, nodeType)}
              style={{
                right: '-6px',
                top: output.position.top || '50%',
                transform: 'translateY(-50%)',
                zIndex: 10, // Ensure handles are above other elements
              }}
            /&gt;

            {/* Output Label */}
            {output.label &amp;&amp; (
              &lt;div
                className=&quot;absolute text-xs text-gray-400 font-medium pointer-events-none&quot;
                style={{
                  right: '-60px',
                  top: output.position.top || '40%',
                  transform: 'translateY(-50%)',
                  whiteSpace: 'nowrap',
                }}
              &gt;
                {output.label}
              &lt;/div&gt;
            )}
          &lt;/React.Fragment&gt;
        );
      })}

      {/* Condition node specific connection lines and draggable plus icons */}
      {nodeType === 'condition' &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`condition-plus-${output.id}`}&gt;
            {/* Connection Line for Condition Output */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Draggable Plus Icon Handle for Condition */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (All node types except AI Agent and Condition - they have their own) */}
      {!isAIAgent &amp;&amp;
        nodeType !== 'condition' &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`plus-${output.id}`}&gt;
            {/* Connection Line for Standard Outputs */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Draggable Plus Icon Handle for Standard Outputs */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (AI Agent only) */}
      {isAIAgent &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`plus-${output.id}`}&gt;
            {/* Connection Line for Output */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Plus Icon Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/GmailTriggerNodeBody.tsx (Line 137:13 - Line 323:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/gmailtriggernodebody/GmailTriggerNodeBody.tsx (Line 140:13 - Line 326:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup13"><code class="language-javascript text-sm text-gray-800">={onMouseEnter} onMouseLeave={onMouseLeave}&gt;
      {/* Enhanced Node Toolbar */}
      &lt;EnhancedNodeToolbar
        visible={isHovered &amp;&amp; selected}
        nodeId={nodeId}
        actions={toolbarActions}
        onActionClick={(actionId) =&gt; handleToolbarAction(actionId)}
        theme={gmailTheme}
      /&gt;

      {/* Gmail Trigger Input Handle (Hidden - triggers don't have inputs) */}

      {/* Output Handle */}
      &lt;Handle
        type=&quot;source&quot;
        position={Position.Right}
        id=&quot;output_0&quot;
        style={{
          background: '#ea4335',
          width: 12,
          height: 12,
          top: '50%',
          border: '2px solid #fff',
          boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
        }}
      /&gt;

      &lt;Card
        size=&quot;small&quot;
        variant=&quot;outlined&quot;
        onDoubleClick={handleDoubleClick}
        className={`
          gmail-trigger-node
          ${selected ? 'node-selected' : ''}
          ${isConnected ? 'node-connected' : 'node-disconnected'}
          transition-all duration-200 hover:shadow-md cursor-pointer
        `}
        style={{
          minWidth: 280,
          maxWidth: 320,
          borderColor: selected ? '#ea4335' : isConnected ? '#34a853' : '#fbbc04',
          borderWidth: selected ? 2 : 1,
          backgroundColor: nodeData.disabled ? '#f8f9fa' : '#fff',
          boxShadow: selected ? '0 4px 12px rgba(234, 67, 53, 0.15)' : undefined,
        }}
        styles={{ body: { padding: '16px' } }}
      &gt;
        {/* Header Section */}
        &lt;div className=&quot;flex items-start gap-3 mb-3&quot;&gt;
          {/* Gmail Logo Avatar */}
          &lt;Avatar
            size={36}
            style={{
              backgroundColor: '#ea4335',
              flexShrink: 0,
            }}
          &gt;
            &lt;MailOutlined style={{ fontSize: '20px', color: '#fff' }} /&gt;
          &lt;/Avatar&gt;

          {/* Node Info */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2 mb-1&quot;&gt;
              &lt;div className=&quot;font-semibold text-sm truncate flex-1&quot;&gt;
                {nodeData.name || 'Gmail Trigger'}
              &lt;/div&gt;
              {isConnected ? (
                &lt;CheckCircleOutlined className=&quot;text-green-500 text-xs&quot; /&gt;
              ) : (
                &lt;ExclamationCircleOutlined className=&quot;text-yellow-500 text-xs&quot; /&gt;
              )}

              {/* Standard Edit/Settings Buttons */}
              &lt;div className=&quot;flex gap-1 ml-2&quot;&gt;
                &lt;Tooltip title=&quot;Edit&quot;&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    icon={&lt;EditOutlined /&gt;}
                    onClick={handleEditClick}
                    className=&quot;text-gray-500 hover:text-gray-700&quot;
                  /&gt;
                &lt;/Tooltip&gt;
                &lt;Tooltip title=&quot;Settings&quot;&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    icon={&lt;SettingOutlined /&gt;}
                    onClick={handleSettingsClick}
                    className=&quot;text-gray-500 hover:text-gray-700&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div className=&quot;text-xs text-gray-500 mb-2&quot;&gt;
              {isConnected ? 'Connected to Gmail' : 'Not connected'}
            &lt;/div&gt;

            {/* Connection Status */}
            &lt;div className=&quot;flex gap-1 mb-2&quot;&gt;
              &lt;Tag color={isConnected ? 'green' : 'orange'} style={{ margin: 0, fontSize: '10px' }}&gt;
                {isConnected ? 'Connected' : 'Setup Required'}
              &lt;/Tag&gt;
              {isConnected &amp;&amp; (
                &lt;Tag color=&quot;blue&quot; style={{ margin: 0, fontSize: '10px' }}&gt;
                  &lt;ClockCircleOutlined style={{ marginRight: '2px' }} /&gt;
                  {pollFrequency}
                &lt;/Tag&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Email Statistics */}
        {isConnected &amp;&amp; (
          &lt;div className=&quot;bg-gray-50 rounded-lg p-3 mb-3&quot;&gt;
            &lt;div className=&quot;grid grid-cols-3 gap-2 text-center&quot;&gt;
              &lt;div&gt;
                &lt;div className=&quot;text-lg font-semibold text-blue-600&quot;&gt;{emailCount}&lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Recent&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;div className=&quot;text-lg font-semibold text-red-600&quot;&gt;{unreadCount}&lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Unread&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;div className=&quot;text-lg font-semibold text-green-600&quot;&gt;{activeFilters}&lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Filters&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Configuration Summary */}
        &lt;div className=&quot;space-y-2&quot;&gt;
          {/* Filters Summary */}
          {activeFilters &gt; 0 &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;FilterOutlined className=&quot;text-blue-500 text-xs&quot; /&gt;
              &lt;span className=&quot;text-xs text-gray-600&quot;&gt;
                {activeFilters} filter{activeFilters !== 1 ? 's' : ''} active
              &lt;/span&gt;
            &lt;/div&gt;
          )}

          {/* Output Format */}
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;Output:&lt;/span&gt;
            &lt;Badge
              count={simplify ? 'Simplified' : 'Full'}
              style={{
                backgroundColor: simplify ? '#52c41a' : '#1890ff',
                fontSize: '9px',
                height: '16px',
                lineHeight: '14px',
              }}
            /&gt;
          &lt;/div&gt;

          {/* Advanced Options */}
          {options.downloadAttachments &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-xs text-gray-500&quot;&gt;Attachments:&lt;/span&gt;
              &lt;Badge
                count=&quot;Download&quot;
                style={{
                  backgroundColor: '#fa8c16',
                  fontSize: '9px',
                  height: '16px',
                  lineHeight: '14px',
                }}
              /&gt;
            &lt;/div&gt;
          )}

          {options.markAsRead &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-xs text-gray-500&quot;&gt;Auto-mark:&lt;/span&gt;
              &lt;Badge
                count=&quot;Read&quot;
                style={{
                  backgroundColor: '#13c2c2',
                  fontSize: '9px',
                  height: '16px',
                  lineHeight: '14px',
                }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/GmailPropertiesPanel.tsx (Line 142:5 - Line 703:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/gmailpropertiespanel/GmailPropertiesPanel.tsx (Line 145:5 - Line 706:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup16"><code class="language-javascript text-sm text-gray-800">={&lt;ExperimentOutlined /&gt;}
            onClick={handleTestConnection}
            loading={isTestingConnection}
          &gt;
            Test
          &lt;/Button&gt;
          &lt;Button type=&quot;default&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 overflow-hidden&quot;&gt;
        &lt;Form form={form} layout=&quot;vertical&quot; onValuesChange={handleFormChange} className=&quot;h-full&quot;&gt;
          &lt;Tabs
            activeKey={activeTab}
            onChange={setActiveTab}
            className=&quot;h-full gmail-tabs&quot;
            tabBarStyle={{
              paddingLeft: '16px',
              paddingRight: '16px',
              marginBottom: 0,
            }}
          &gt;
            {/* Connection Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;MailOutlined /&gt;
                  Connection
                  {connectionStatus === 'connected' &amp;&amp; (
                    &lt;CheckCircleOutlined className=&quot;text-green-500&quot; /&gt;
                  )}
                  {connectionStatus === 'error' &amp;&amp; (
                    &lt;ExclamationCircleOutlined className=&quot;text-red-500&quot; /&gt;
                  )}
                &lt;/span&gt;
              }
              key=&quot;connection&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                {/* Credential Selection */}
                &lt;PropertyField
                  property={{
                    name: 'credential',
                    displayName: 'Gmail Credential',
                    type: 'credentialsSelect',
                    description: 'Gmail OAuth2 credentials for accessing the API',
                    required: true,
                    credentialTypes: ['gmailOAuth2'],
                    default: '',
                  }}
                  value={formState?.credential}
                  context={{ nodeData, formState }}
                  onChange={(value) =&gt; handlePropertyChange('credential', value)}
                /&gt;

                {/* Connection Status */}
                {connectionStatus !== 'unknown' &amp;&amp; (
                  &lt;Alert
                    message={
                      connectionStatus === 'connected'
                        ? 'Successfully connected to Gmail'
                        : connectionStatus === 'error'
                          ? 'Failed to connect to Gmail'
                          : 'Testing connection...'
                    }
                    type={
                      connectionStatus === 'connected'
                        ? 'success'
                        : connectionStatus === 'error'
                          ? 'error'
                          : 'info'
                    }
                    showIcon
                    action={
                      connectionStatus === 'error' &amp;&amp; (
                        &lt;Button size=&quot;small&quot; onClick={handleTestConnection}&gt;
                          Retry
                        &lt;/Button&gt;
                      )
                    }
                  /&gt;
                )}

                {/* Event Type */}
                &lt;Form.Item
                  label=&quot;Trigger Event&quot;
                  name={['event']}
                  tooltip=&quot;The Gmail event that will trigger the workflow&quot;
                &gt;
                  &lt;Select placeholder=&quot;Select trigger event&quot; defaultValue=&quot;messageReceived&quot;&gt;
                    &lt;Option value=&quot;messageReceived&quot;&gt;Message Received&lt;/Option&gt;
                    &lt;Option value=&quot;messageSent&quot;&gt;Message Sent&lt;/Option&gt;
                    &lt;Option value=&quot;messageRead&quot;&gt;Message Read&lt;/Option&gt;
                    &lt;Option value=&quot;messageStarred&quot;&gt;Message Starred&lt;/Option&gt;
                    &lt;Option value=&quot;messageDeleted&quot;&gt;Message Deleted&lt;/Option&gt;
                    &lt;Option value=&quot;newThread&quot;&gt;New Thread&lt;/Option&gt;
                    &lt;Option value=&quot;labelAdded&quot;&gt;Label Added&lt;/Option&gt;
                    &lt;Option value=&quot;labelRemoved&quot;&gt;Label Removed&lt;/Option&gt;
                  &lt;/Select&gt;
                &lt;/Form.Item&gt;

                {/* Simplify Response */}
                &lt;Form.Item
                  label=&quot;Response Format&quot;
                  name={['simplify']}
                  tooltip=&quot;Choose between simplified or full email data&quot;
                  valuePropName=&quot;checked&quot;
                &gt;
                  &lt;Switch
                    checkedChildren=&quot;Simplified&quot;
                    unCheckedChildren=&quot;Full Data&quot;
                    defaultChecked={true}
                  /&gt;
                &lt;/Form.Item&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Polling Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;SyncOutlined /&gt;
                  Polling
                &lt;/span&gt;
              }
              key=&quot;polling&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;Collapse defaultActiveKey={['basic']} ghost&gt;
                  &lt;Panel header=&quot;Polling Configuration&quot; key=&quot;basic&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Polling Mode */}
                      &lt;Form.Item
                        label=&quot;Polling Frequency&quot;
                        name={['pollTimes', 'mode']}
                        tooltip=&quot;How often to check for new emails&quot;
                      &gt;
                        &lt;Select placeholder=&quot;Select frequency&quot; defaultValue=&quot;everyMinute&quot;&gt;
                          {pollModeOptions.map((option) =&gt; (
                            &lt;Option key={option.value} value={option.value}&gt;
                              {option.label}
                            &lt;/Option&gt;
                          ))}
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;

                      {/* Dynamic polling fields based on mode */}
                      &lt;Form.Item
                        noStyle
                        shouldUpdate={(prevValues, currentValues) =&gt;
                          prevValues.pollTimes?.mode !== currentValues.pollTimes?.mode
                        }
                      &gt;
                        {({ getFieldValue }) =&gt; {
                          const mode = getFieldValue(['pollTimes', 'mode']);

                          return (
                            &lt;div className=&quot;space-y-4&quot;&gt;
                              {mode === 'customInterval' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Interval (Minutes)&quot;
                                  name={['pollTimes', 'intervalMinutes']}
                                  tooltip=&quot;Check every X minutes&quot;
                                &gt;
                                  &lt;InputNumber min={1} max={1440} defaultValue={5} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {['everyHour', 'everyDay', 'everyWeek', 'everyMonth'].includes(
                                mode
                              ) &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Minute&quot;
                                  name={['pollTimes', 'minute']}
                                  tooltip=&quot;Minute of the hour (0-59)&quot;
                                &gt;
                                  &lt;InputNumber min={0} max={59} defaultValue={0} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {['everyDay', 'everyWeek', 'everyMonth'].includes(mode) &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Hour&quot;
                                  name={['pollTimes', 'hour']}
                                  tooltip=&quot;Hour of the day (0-23)&quot;
                                &gt;
                                  &lt;InputNumber min={0} max={23} defaultValue={9} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {mode === 'everyWeek' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Day of Week&quot;
                                  name={['pollTimes', 'weekday']}
                                  tooltip=&quot;Which day of the week&quot;
                                &gt;
                                  &lt;Select defaultValue={1}&gt;
                                    &lt;Option value={1}&gt;Monday&lt;/Option&gt;
                                    &lt;Option value={2}&gt;Tuesday&lt;/Option&gt;
                                    &lt;Option value={3}&gt;Wednesday&lt;/Option&gt;
                                    &lt;Option value={4}&gt;Thursday&lt;/Option&gt;
                                    &lt;Option value={5}&gt;Friday&lt;/Option&gt;
                                    &lt;Option value={6}&gt;Saturday&lt;/Option&gt;
                                    &lt;Option value={0}&gt;Sunday&lt;/Option&gt;
                                  &lt;/Select&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {mode === 'everyMonth' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Day of Month&quot;
                                  name={['pollTimes', 'dayOfMonth']}
                                  tooltip=&quot;Day of the month (1-31)&quot;
                                &gt;
                                  &lt;InputNumber min={1} max={31} defaultValue={1} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {mode === 'customCron' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Cron Expression&quot;
                                  name={['pollTimes', 'cronExpression']}
                                  tooltip='Custom cron expression (e.g., &quot;0 9 * * MON&quot; for 9 AM every Monday)'
                                &gt;
                                  &lt;Input placeholder=&quot;0 9 * * MON&quot; /&gt;
                                &lt;/Form.Item&gt;
                              )}
                            &lt;/div&gt;
                          );
                        }}
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;
                &lt;/Collapse&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Filters Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;FilterOutlined /&gt;
                  Filters
                  &lt;Badge count={0} size=&quot;small&quot; /&gt;
                &lt;/span&gt;
              }
              key=&quot;filters&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;Collapse ghost&gt;
                  &lt;Panel header=&quot;Basic Filters&quot; key=&quot;basic&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Gmail Labels */}
                      &lt;Form.Item
                        label=&quot;Gmail Labels&quot;
                        name={['filters', 'labelNamesOrIds']}
                        tooltip=&quot;Filter by specific Gmail labels&quot;
                      &gt;
                        &lt;Select
                          mode=&quot;multiple&quot;
                          placeholder=&quot;Select labels&quot;
                          defaultValue={['INBOX']}
                          allowClear
                        &gt;
                          {gmailLabels.map((label) =&gt; (
                            &lt;Option key={label.value} value={label.value}&gt;
                              {label.label}
                            &lt;/Option&gt;
                          ))}
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;

                      {/* Read Status */}
                      &lt;Form.Item
                        label=&quot;Read Status&quot;
                        name={['filters', 'readStatus']}
                        tooltip=&quot;Filter by email read status&quot;
                      &gt;
                        &lt;Select placeholder=&quot;Select read status&quot; defaultValue=&quot;all&quot;&gt;
                          &lt;Option value=&quot;all&quot;&gt;All&lt;/Option&gt;
                          &lt;Option value=&quot;unread&quot;&gt;Unread Only&lt;/Option&gt;
                          &lt;Option value=&quot;read&quot;&gt;Read Only&lt;/Option&gt;
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;

                      {/* Has Attachment */}
                      &lt;Form.Item
                        label=&quot;Attachment Filter&quot;
                        name={['filters', 'hasAttachment']}
                        tooltip=&quot;Filter by attachment presence&quot;
                      &gt;
                        &lt;Select placeholder=&quot;Select attachment filter&quot; defaultValue=&quot;any&quot;&gt;
                          &lt;Option value=&quot;any&quot;&gt;Any&lt;/Option&gt;
                          &lt;Option value=&quot;true&quot;&gt;Has Attachments&lt;/Option&gt;
                          &lt;Option value=&quot;false&quot;&gt;No Attachments&lt;/Option&gt;
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;

                  &lt;Panel header=&quot;Advanced Filters&quot; key=&quot;advanced&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Search Query */}
                      &lt;Form.Item
                        label=&quot;Gmail Search Query&quot;
                        name={['filters', 'search']}
                        tooltip='Gmail search query (e.g., &quot;has:attachment from:support@company.com&quot;)'
                      &gt;
                        &lt;Input.TextArea
                          rows={3}
                          placeholder='has:attachment from:user@example.com subject:&quot;urgent&quot;'
                        /&gt;
                      &lt;/Form.Item&gt;

                      {/* Sender Filter */}
                      &lt;Form.Item
                        label=&quot;Sender Filter&quot;
                        name={['filters', 'senderFilter']}
                        tooltip=&quot;Filter by sender email or name (supports wildcards)&quot;
                      &gt;
                        &lt;Input placeholder=&quot;support@example.com or *@company.com&quot; /&gt;
                      &lt;/Form.Item&gt;

                      {/* Subject Filter */}
                      &lt;Form.Item
                        label=&quot;Subject Filter&quot;
                        name={['filters', 'subjectFilter']}
                        tooltip=&quot;Filter by email subject (case-insensitive)&quot;
                      &gt;
                        &lt;Input placeholder=&quot;Contains this text in subject&quot; /&gt;
                      &lt;/Form.Item&gt;

                      {/* Date Range */}
                      &lt;Form.Item label=&quot;Date Range Filter&quot; tooltip=&quot;Filter emails by date range&quot;&gt;
                        &lt;div className=&quot;space-y-2&quot;&gt;
                          &lt;Form.Item
                            name={['filters', 'dateRange', 'enabled']}
                            valuePropName=&quot;checked&quot;
                            style={{ marginBottom: 8 }}
                          &gt;
                            &lt;Switch size=&quot;small&quot; /&gt;
                          &lt;/Form.Item&gt;

                          &lt;Form.Item
                            noStyle
                            shouldUpdate={(prevValues, currentValues) =&gt;
                              prevValues.filters?.dateRange?.enabled !==
                              currentValues.filters?.dateRange?.enabled
                            }
                          &gt;
                            {({ getFieldValue }) =&gt; {
                              const enabled = getFieldValue(['filters', 'dateRange', 'enabled']);

                              return enabled ? (
                                &lt;Form.Item
                                  name={['filters', 'dateRange', 'range']}
                                  style={{ marginBottom: 0 }}
                                &gt;
                                  &lt;RangePicker showTime /&gt;
                                &lt;/Form.Item&gt;
                              ) : null;
                            }}
                          &lt;/Form.Item&gt;
                        &lt;/div&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;

                  &lt;Panel header=&quot;Inclusion Options&quot; key=&quot;inclusion&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Include Spam and Trash */}
                      &lt;Form.Item
                        label=&quot;Include Spam and Trash&quot;
                        name={['filters', 'includeSpamTrash']}
                        tooltip=&quot;Include emails from spam and trash folders&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;

                      {/* Include Drafts */}
                      &lt;Form.Item
                        label=&quot;Include Drafts&quot;
                        name={['filters', 'includeDrafts']}
                        tooltip=&quot;Include draft emails&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;
                &lt;/Collapse&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Output Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;ExportOutlined /&gt;
                  Output
                &lt;/span&gt;
              }
              key=&quot;output&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;Collapse defaultActiveKey={['processing']} ghost&gt;
                  &lt;Panel header=&quot;Email Processing&quot; key=&quot;processing&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Max Results */}
                      &lt;Form.Item
                        label=&quot;Max Results&quot;
                        name={['options', 'maxResults']}
                        tooltip=&quot;Maximum number of emails to process per poll&quot;
                      &gt;
                        &lt;InputNumber min={1} max={500} defaultValue={1} /&gt;
                      &lt;/Form.Item&gt;

                      {/* Mark as Read */}
                      &lt;Form.Item
                        label=&quot;Mark as Read&quot;
                        name={['options', 'markAsRead']}
                        tooltip=&quot;Automatically mark processed emails as read&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;

                      {/* Add Label */}
                      &lt;Form.Item
                        label=&quot;Add Label&quot;
                        name={['options', 'addLabel']}
                        tooltip=&quot;Label to add to processed emails&quot;
                      &gt;
                        &lt;Input placeholder=&quot;processed&quot; /&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;

                  &lt;Panel header=&quot;Attachment Handling&quot; key=&quot;attachments&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Download Attachments */}
                      &lt;Form.Item
                        label=&quot;Download Attachments&quot;
                        name={['options', 'downloadAttachments']}
                        tooltip=&quot;Automatically download email attachments&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;

                      &lt;Form.Item
                        noStyle
                        shouldUpdate={(prevValues, currentValues) =&gt;
                          prevValues.options?.downloadAttachments !==
                          currentValues.options?.downloadAttachments
                        }
                      &gt;
                        {({ getFieldValue }) =&gt; {
                          const downloadAttachments = getFieldValue([
                            'options',
                            'downloadAttachments',
                          ]);

                          return downloadAttachments ? (
                            &lt;div className=&quot;space-y-4&quot;&gt;
                              {/* Attachment Prefix */}
                              &lt;Form.Item
                                label=&quot;Attachment Prefix&quot;
                                name={['options', 'attachmentPrefix']}
                                tooltip=&quot;Prefix to add to downloaded attachment filenames&quot;
                              &gt;
                                &lt;Input placeholder=&quot;gmail_&quot; /&gt;
                              &lt;/Form.Item&gt;

                              {/* Max Attachment Size */}
                              &lt;Form.Item
                                label=&quot;Max Attachment Size (MB)&quot;
                                name={['options', 'maxAttachmentSize']}
                                tooltip=&quot;Maximum size of attachments to download (in MB)&quot;
                              &gt;
                                &lt;InputNumber min={1} max={25} defaultValue={10} /&gt;
                              &lt;/Form.Item&gt;
                            &lt;/div&gt;
                          ) : null;
                        }}
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;
                &lt;/Collapse&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Test Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;ExperimentOutlined /&gt;
                  Test
                &lt;/span&gt;
              }
              key=&quot;test&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;div className=&quot;text-center&quot;&gt;
                  &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot;&gt;
                    &lt;Button
                      type=&quot;primary&quot;
                      size=&quot;large&quot;
                      icon={&lt;ExperimentOutlined /&gt;}
                      onClick={handleTestConnection}
                      loading={isTestingConnection}
                    &gt;
                      Test Gmail Connection
                    &lt;/Button&gt;

                    &lt;Button
                      type=&quot;default&quot;
                      size=&quot;large&quot;
                      icon={&lt;MailOutlined /&gt;}
                      onClick={handlePreviewEmails}
                      disabled={connectionStatus !== 'connected'}
                    &gt;
                      Preview Emails
                    &lt;/Button&gt;
                  &lt;/Space&gt;
                &lt;/div&gt;

                {/* Test Results */}
                {testResults &amp;&amp; (
                  &lt;Card title=&quot;Test Results&quot; size=&quot;small&quot; variant=&quot;outlined&quot;&gt;
                    {isTestingConnection ? (
                      &lt;div className=&quot;text-center&quot;&gt;
                        &lt;Spin size=&quot;large&quot; /&gt;
                        &lt;p className=&quot;mt-4 text-gray-600&quot;&gt;Testing connection...&lt;/p&gt;
                      &lt;/div&gt;
                    ) : (
                      &lt;div className=&quot;space-y-3&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                          &lt;span className=&quot;font-medium&quot;&gt;Status:&lt;/span&gt;
                          &lt;Tag color={testResults.success ? 'green' : 'red'}&gt;
                            {testResults.success ? 'Success' : 'Failed'}
                          &lt;/Tag&gt;
                        &lt;/div&gt;

                        {testResults.message &amp;&amp; (
                          &lt;div&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;Message:&lt;/span&gt;
                            &lt;p className=&quot;mt-1 text-gray-600&quot;&gt;{testResults.message}&lt;/p&gt;
                          &lt;/div&gt;
                        )}

                        {testResults.data &amp;&amp; Array.isArray(testResults.data) &amp;&amp; (
                          &lt;div&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;Emails Found:&lt;/span&gt;
                            &lt;p className=&quot;mt-1 text-gray-600&quot;&gt;{testResults.data.length} emails&lt;/p&gt;

                            {testResults.data.slice(0, 3).map((email: any, index: number) =&gt; (
                              &lt;div key={index}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/DatabaseNode/DatabaseNodeBody.tsx (Line 155:13 - Line 341:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/DatabaseNode/databasenodebody/DatabaseNodeBody.tsx (Line 159:13 - Line 345:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup19"><code class="language-javascript text-sm text-gray-800">={onMouseEnter} onMouseLeave={onMouseLeave}&gt;
      {/* Enhanced Node Toolbar */}
      &lt;EnhancedNodeToolbar
        nodeId={nodeId}
        visible={isHovered &amp;&amp; selected}
        onActionClick={(actionId, nodeId) =&gt; {
          switch (actionId) {
            case 'play':
              handlePlay();
              break;
            case 'stop':
              handleStop();
              break;
            case 'delete':
              handleDelete();
              break;
            default:
              handleMenuToggle(nodeId);
          }
        }}
        theme={theme}
      /&gt;

      {/* Badges */}
      {badges.map((badge) =&gt; (
        &lt;div
          key={badge.id}
          className=&quot;absolute z-10&quot;
          style={{
            ...{
              'top-left': { top: '-6px', left: '-6px' },
              'top-right': { top: '-6px', right: '-6px' },
              'bottom-left': { bottom: '-6px', left: '-6px' },
              'bottom-right': { bottom: '-6px', right: '-6px' },
            }[badge.position],
          }}
        &gt;
          &lt;div
            style={{
              backgroundColor: badge.backgroundColor,
              color: badge.color,
              fontSize: theme.typography.fontSize.xs,
              fontWeight: theme.typography.fontWeight.medium,
              borderRadius: theme.borderRadius.sm,
              padding: '2px 6px',
              minWidth: '18px',
              height: '18px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              boxShadow: theme.shadows.sm,
            }}
          &gt;
            {badge.icon &amp;&amp; (
              &lt;span style={{ marginRight: badge.text ? '2px' : '0' }}&gt;{badge.icon}&lt;/span&gt;
            )}
            {badge.text &amp;&amp; &lt;span&gt;{badge.text}&lt;/span&gt;}
          &lt;/div&gt;
        &lt;/div&gt;
      ))}

      {/* Input Handle */}
      &lt;Handle
        type=&quot;target&quot;
        position={Position.Left}
        id=&quot;input_0&quot;
        style={{
          background: theme.colors.border,
          width: 10,
          height: 10,
          top: '50%',
        }}
      /&gt;

      {/* Output Handle */}
      &lt;Handle
        type=&quot;source&quot;
        position={Position.Right}
        id=&quot;output_0&quot;
        style={{
          background: dbInfo.color,
          width: 10,
          height: 10,
          top: '50%',
        }}
      /&gt;

      &lt;Card
        size=&quot;small&quot;
        bordered
        style={{
          minWidth: 220,
          maxWidth: 350,
          borderColor: selected ? dbInfo.color : theme.colors.border,
          borderWidth: selected ? 2 : 1,
          backgroundColor: nodeData.disabled ? theme.colors.background : '#fff',
        }}
        bodyStyle={{ padding: '12px 16px' }}
      &gt;
        &lt;div className=&quot;flex items-start gap-3&quot;&gt;
          {/* Database Avatar */}
          &lt;Avatar
            size={36}
            style={{
              backgroundColor: dbInfo.color,
              fontSize: '20px',
              flexShrink: 0,
            }}
          &gt;
            {dbInfo.icon}
          &lt;/Avatar&gt;

          {/* Node Content */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2 mb-1&quot;&gt;
              &lt;div className=&quot;font-semibold text-sm truncate&quot;&gt;{nodeData.name || 'Database'}&lt;/div&gt;
              &lt;DatabaseOutlined className=&quot;text-blue-500 text-xs&quot; /&gt;
            &lt;/div&gt;

            &lt;div className=&quot;text-xs text-gray-500 mb-2&quot;&gt;
              {dbInfo.name} • {operation}
            &lt;/div&gt;

            {/* Connection Status */}
            &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
              &lt;span style={{ color: statusInfo.color, fontSize: '12px' }}&gt;{statusInfo.icon}&lt;/span&gt;
              &lt;span style={{ fontSize: '11px', color: statusInfo.color }}&gt;{statusInfo.text}&lt;/span&gt;
            &lt;/div&gt;

            {/* Database Details */}
            &lt;div className=&quot;space-y-1&quot;&gt;
              {table &amp;&amp; (
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-xs text-gray-600&quot;&gt;Table:&lt;/span&gt;
                  &lt;Tag color=&quot;blue&quot;&gt;{table}&lt;/Tag&gt;
                &lt;/div&gt;
              )}

              {queryLimit &amp;&amp; (
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-xs text-gray-600&quot;&gt;Limit:&lt;/span&gt;
                  &lt;Tag color={queryLimit &gt; 1000 ? 'orange' : 'green'}&gt;
                    {queryLimit.toLocaleString()}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;

            {/* Connection Progress (when connecting) */}
            {connectionStatus === 'connecting' &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;Progress
                  percent={60}
                  size=&quot;small&quot;
                  status=&quot;active&quot;
                  showInfo={false}
                  strokeColor={theme.colors.info}
                /&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Execution Settings Indicators */}
        &lt;div className=&quot;mt-3 flex gap-1 flex-wrap&quot;&gt;
          {nodeData.retryOnFail &amp;&amp; (
            &lt;Badge
              count={`Retry ${nodeData.maxTries || 3}x`}
              style={{ backgroundColor: theme.colors.info, fontSize: '10px' }}
            /&gt;
          )}
          {nodeData.continueOnFail &amp;&amp; (
            &lt;Badge
              count=&quot;Continue on fail&quot;
              style={{
                backgroundColor: theme.colors.warning,
                fontSize: '10px',
              }}
            /&gt;
          )}
          {connectionString &amp;&amp; (
            &lt;Badge
              count=&quot;SSL&quot;
              style={{
                backgroundColor: theme.colors.success,
                fontSize: '10px',
              }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 269:2 - Line 286:14), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 248:8 - Line 269:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup21"><code class="language-javascript text-sm text-gray-800">}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/aiagentpropertiespanel/AIAgentPropertiesPanel.tsx (Line 298:6 - Line 355:26), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/aiagentpropertiespanel/AIAgentPropertiesPanel.tsx (Line 263:6 - Line 298:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup23"><code class="language-javascript text-sm text-gray-800">={{ marginBottom: '16px' }}
      /&gt;

      &lt;Collapse
        items={[
          {
            key: 'performance',
            label: (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ExperimentOutlined /&gt;
                &lt;span&gt;Performance &amp; Sampling&lt;/span&gt;
              &lt;/div&gt;
            ),
            children: (
              &lt;div className=&quot;space-y-4&quot;&gt;
                {advancedProperties.map((property) =&gt; {
                  const shouldShow =
                    !property.displayOptions?.show ||
                    Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
                      values?.includes(formValues[key])
                    );

                  if (!shouldShow) return null;

                  return (
                    &lt;PropertyField
                      key={property.name}
                      property={property}
                      value={formValues[property.name]}
                      onChange={(value) =&gt; handleFieldChange(property.name, value)}
                      errors={errors[property.name]}
                      theme={theme}
                      context={formValues}
                    /&gt;
                  );
                })}
              &lt;/div&gt;
            ),
          },
        ]}
      /&gt;
    &lt;/div&gt;
  );

  const renderTestingTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Test Your AI Agent&quot;
        description=&quot;Test your AI agent configuration with sample data.&quot;
        type=&quot;success&quot;
        showIcon
      /&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Quick Test&quot;&gt;
        &lt;div className=&quot;space-y-4&quot;&gt;
          &lt;PropertyField
            property={{
              displayName</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 152:16 - Line 181:29), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 143:2 - Line 162:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup25"><code class="language-javascript text-sm text-gray-800">();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyfield/PropertyField.tsx (Line 111:6 - Line 442:7), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 109:6 - Line 440:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup35"><code class="language-javascript text-sm text-gray-800">={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={String</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 303:6 - Line 362:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 298:6 - Line 357:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup39"><code class="language-javascript text-sm text-gray-800">={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 195:4 - Line 308:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/datavisualizationpanel/DataVisualizationPanel.tsx (Line 159:8 - Line 213:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup49"><code class="language-javascript text-sm text-gray-800">} className=&quot;border-b border-gray-700 hover:bg-gray-700&quot;&gt;
                &lt;td className=&quot;py-2 px-3 text-blue-300 font-mono text-xs&quot;&gt;{key}&lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-300 break-all&quot;&gt;
                  {typeof value === 'string' &amp;&amp; value.length &gt; 100
                    ? `${value.substring(0, 100)}...`
                    : String(value)}
                &lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-400 text-xs&quot;&gt;{typeof value}&lt;/td&gt;
              &lt;/tr&gt;
            ))}
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    );
  };

  // Render JSON view
  const renderJsonView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;pre className=&quot;text-sm text-gray-300 whitespace-pre-wrap p-4 bg-gray-900 rounded border border-gray-600 font-mono&quot;&gt;
          {JSON.stringify(filteredData || selectedEmail, null, 2)}
        &lt;/pre&gt;
      &lt;/div&gt;
    );
  };

  const renderContent = () =&gt; {
    if (!selectedEmail) {
      return (
        &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
              &lt;span className=&quot;text-2xl&quot;&gt;📧&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;p className=&quot;mb-2&quot;&gt;Select an email from the input column&lt;/p&gt;
          &lt;p className=&quot;text-gray-400&quot;&gt;to view its detailed structure&lt;/p&gt;
        &lt;/div&gt;
      );
    }

    switch (displayMode) {
      case 'schema':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            {filteredData ? (
              Object.entries(filteredData).map(([key, value]) =&gt; renderSchemaItem(key, value, key))
            ) : (
              &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No matching data found&lt;/div&gt;
            )}
          &lt;/div&gt;
        );
      case 'table':
        return renderTableView();
      case 'json':
        return renderJsonView();
      default:
        return null;
    }
  };

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
            OUTPUT
            {selectedEmail &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Email selected&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {selectedEmail &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search email data&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 250:2 - Line 264:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 215:7 - Line 231:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup53"><code class="language-javascript text-sm text-gray-800">}
            onChange={onChange}
            className=&quot;ant-select-multiple&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            tagRender={(</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 410:5 - Line 488:51), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 334:14 - Line 438:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup60"><code class="language-javascript text-sm text-gray-800">}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// AI Agent data condition view
const AIConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const aiFields = [
    { key: 'output', label: 'AI Output', value: data.output },
    { key: 'provider', label: 'Provider', value: data.provider },
    { key: 'model', label: 'Model', value: data.model },
    { key: 'usage', label: 'Token Usage', value: data.usage },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-orange-400 mb-2&quot;&gt;
        🤖 AI response fields available for conditions:
      &lt;/div&gt;
      {aiFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Generic data condition view
const GenericConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;📊 Data fields available for conditions:&lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Reusable field row component
const FieldRow: React.FC&lt;{
  fieldKey: string;
  label: string;
  value: any;
  isSelected: boolean;
  onSelect: (field: string) =&gt; void;
}&gt; = ({ fieldKey, label, value, isSelected, onSelect }) =&gt; {
  const displayValue =
    typeof value === 'string' &amp;&amp; value.length &gt; 100 ? `${value.substring(0, 100)}...` : value;

  return (
    &lt;div
      className={`p-3 rounded border cursor-pointer transition-all </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 401:23 - Line 428:16), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 238:17 - Line 256:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup64"><code class="language-javascript text-sm text-gray-800">}
                      onPressEnter={() =&gt; handleReplyToComment(comment.id)}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;SendOutlined /&gt;}
                      onClick={() =&gt; handleReplyToComment(comment.id)}
                      disabled={!replyContents[comment.id]?.trim()}
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Conflicts Tab
  const ConflictsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Conflicts ({activeConflicts.length})
        &lt;/h3&gt;
        {activeConflicts.length &gt; 0 &amp;&amp; &lt;Badge count={activeConflicts</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 298:4 - Line 308:14), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 182:4 - Line 192:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup69"><code class="language-javascript text-sm text-gray-800">}&gt;
              &lt;AreaChart data={performanceHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Performance'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/RegistryNode.tsx (Line 86:9 - Line 292:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 93:9 - Line 299:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup70"><code class="language-javascript text-sm text-gray-800">={Position.Left}
          id=&quot;input_0&quot;
          style={{
            background: '#555',
            width: 10,
            height: 10,
            // No top property - handle will be vertically centered by default
          }}
        /&gt;
      );
    }

    // Output handles
    if (nodeDefinition.outputs?.length &gt; 0) {
      nodeDefinition.outputs.forEach((_, index) =&gt; {
        // For single output, don't set top (centers by default)
        // For multiple outputs, calculate vertical distribution
        const handleStyle: React.CSSProperties = {
          background: '#555',
          width: 10,
          height: 10,
        };

        if (nodeDefinition.outputs.length &gt; 1) {
          handleStyle.top = `${((index + 1) / (nodeDefinition.outputs.length + 1)) * 100}%`;
        }
        // No top property for single output - centers by default

        handles.push(
          &lt;Handle
            key={`output-${index}`}
            type=&quot;source&quot;
            position={Position.Right}
            id={`output_${index}`}
            style={handleStyle}
          /&gt;
        );
      });
    }

    return handles;
  };

  // Simple status indicator logic - integrated into main template

  // Toolbar handlers
  const handlePlay = (_nodeId: string) =&gt; {
    // TODO: Implement play functionality
  };

  const handleStop = (_nodeId: string) =&gt; {
    // TODO: Implement stop functionality
  };

  const handleDelete = (_nodeId: string) =&gt; {
    data.onDelete?.();
  };

  const handleMenuToggle = () =&gt; {
    setShowMenu(!showMenu);
  };

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    // Handle double-click to open properties panel
    event.stopPropagation();
    data.onOpenProperties?.();
  };

  // Render shared node toolbar and menu
  const renderToolbarAndMenu = () =&gt; {
    const toolbarVisible = isHovered; // Show on hover only, not requiring selection

    return (
      &lt;&gt;
        &lt;NodeToolbar
          visible={toolbarVisible}
          onPlay={() =&gt; handlePlay(id)}
          onStop={() =&gt; handleStop(id)}
          onDelete={(e) =&gt; {
            e.stopPropagation();
            handleDelete(id);
          }}
          onMenuToggle={handleMenuToggle}
          menuTriggerRef={menuTriggerRef as React.RefObject&lt;HTMLButtonElement&gt;}
        /&gt;
        {/* Custom dark-themed menu with smart positioning */}
        {showMenu &amp;&amp; (
          &lt;div
            ref={menuRef}
            className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
            style={positionStyles}
            onClick={(e) =&gt; e.stopPropagation()}
          &gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                data.onOpenProperties?.();
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📂&lt;/span&gt; Open
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement test functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🧪&lt;/span&gt; Test
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement copy functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📄&lt;/span&gt; Copy
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement duplicate functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📋&lt;/span&gt; Duplicate
            &lt;/button&gt;
            &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                handleDelete(id);
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🗑️&lt;/span&gt; Delete
            &lt;/button&gt;
          &lt;/div&gt;
        )}
      &lt;/&gt;
    );
  };

  // Check for custom body component
  const CustomBodyComponent = useMemo(() =&gt; {
    if (!nodeDefinition?.customBodyComponent) return null;
    return getCustomBodyComponent(nodeDefinition.customBodyComponent);
  }, [nodeDefinition]);

  // If custom body component exists, use it instead of default rendering
  if (CustomBodyComponent) {
    return (
      &lt;div
        className={`registry-node ${selected ? 'selected' : ''} relative`}
        style={{
          opacity: data.disabled ? 0.5 : 1,
        }}
        onMouseEnter={() =&gt; setIsHovered(true)}
        onMouseLeave={() =&gt; setIsHovered(false)}
        onDoubleClick={handleDoubleClick}
      &gt;
        {/* Custom body components handle their own handles and toolbars internally */}
        &lt;CustomBodyComponent
          nodeId={id}
          nodeData={data}
          selected={selected}
          isHovered={isHovered}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
          onDelete={data.onDelete}
          onEdit={data.onEdit}
          onOpenProperties={data.onOpenProperties}
        /&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div
      className={`registry-node ${selected ? 'selected' : ''} relative`}
      style={{
        opacity: data.disabled ? 0.5 : 1,
      }}
      onMouseEnter={() =&gt; setIsHovered(true)}
      onMouseLeave={() =&gt; setIsHovered(false)}
      onDoubleClick={handleDoubleClick}
    &gt;
      {renderHandles()}
      {renderToolbarAndMenu()}

      {/* Gmail-style Base Template for All Nodes */}
      &lt;div className=&quot;flex flex-col&quot;&gt;
        &lt;div className=&quot;relative&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
            `}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode.tsx (Line 221:10 - Line 436:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/containernode/ContainerNode.tsx (Line 230:10 - Line 445:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup73"><code class="language-javascript text-sm text-gray-800">={cn(
          'relative border-2 rounded-lg transition-all duration-200',
          selected &amp;&amp; 'ring-2 ring-blue-500 ring-opacity-50',
          isResizing &amp;&amp; 'cursor-nw-resize'
        )}
        style={{
          width: config.dimensions.width,
          height: config.dimensions.height,
          backgroundColor: config.style.backgroundColor,
          borderColor: config.style.borderColor,
          borderWidth: config.style.borderWidth,
          borderRadius: config.style.borderRadius,
          opacity: config.style.opacity,
          zIndex: config.style.zIndex,
        }}
        onDrop={handleDrop}
        onDragOver={(e) =&gt; e.preventDefault()}
      &gt;
        {/* Container Header */}
        &lt;div className=&quot;absolute top-0 left-0 right-0 p-2 bg-gray-900 bg-opacity-80 rounded-t-lg&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-lg&quot;&gt;{getContainerIcon()}&lt;/span&gt;
              &lt;span className=&quot;text-sm font-semibold text-white&quot;&gt;{config.name}&lt;/span&gt;
              &lt;Badge
                count={config.children.length}
                size=&quot;small&quot;
                style={{ backgroundColor: '#1890ff' }}
              /&gt;
            &lt;/div&gt;

            &lt;Space size=&quot;small&quot;&gt;
              {state.status === 'running' ? (
                &lt;Tooltip title=&quot;Stop execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;StopOutlined /&gt;}
                    onClick={handleStop}
                    className=&quot;text-red-400 hover:text-red-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              ) : (
                &lt;Tooltip title=&quot;Start execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;PlayCircleOutlined /&gt;}
                    onClick={handleExecute}
                    className=&quot;text-green-400 hover:text-green-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}

              &lt;Dropdown menu={{ items: menuItems }} trigger={['click']} placement=&quot;bottomRight&quot;&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;MoreOutlined /&gt;}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/Dropdown&gt;
            &lt;/Space&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Status */}
        &lt;div className=&quot;absolute top-8 left-2 right-2&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between text-xs&quot;&gt;
            &lt;div className=&quot;flex items-center gap-1&quot;&gt;
              {getStatusIcon()}
              &lt;span className=&quot;text-gray-300 capitalize&quot;&gt;{state.status}&lt;/span&gt;
            &lt;/div&gt;

            {state.currentIteration !== undefined &amp;&amp; (
              &lt;div className=&quot;text-gray-400&quot;&gt;
                {state.currentIteration}/{state.totalIterations || '∞'}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Content Area */}
        &lt;div className=&quot;absolute top-16 left-2 right-2 bottom-2 bg-gray-800 bg-opacity-50 rounded border border-gray-600&quot;&gt;
          &lt;div className=&quot;p-2 h-full overflow-auto&quot;&gt;
            {config.children.length === 0 ? (
              &lt;div className=&quot;flex items-center justify-center h-full text-gray-500&quot;&gt;
                &lt;div className=&quot;text-center&quot;&gt;
                  &lt;div className=&quot;text-2xl mb-2&quot;&gt;📁&lt;/div&gt;
                  &lt;div className=&quot;text-sm&quot;&gt;Drop nodes here&lt;/div&gt;
                  &lt;div className=&quot;text-xs&quot;&gt;to add them to this container&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {config.children.map((childId) =&gt; (
                  &lt;div key={childId} className=&quot;p-1 bg-gray-700 rounded text-xs text-gray-300&quot;&gt;
                    {childId}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Resize Handle */}
        &lt;div
          ref={resizeRef}
          className=&quot;absolute bottom-0 right-0 w-3 h-3 cursor-nw-resize bg-blue-500 opacity-0 hover:opacity-100 transition-opacity&quot;
          onMouseDown={handleMouseDown}
        /&gt;

        {/* Input Handle */}
        &lt;Handle
          type=&quot;target&quot;
          position={Position.Left}
          id=&quot;input&quot;
          className=&quot;w-3 h-3 bg-blue-500 border-2 border-white&quot;
        /&gt;

        {/* Output Handles */}
        &lt;Handle
          type=&quot;source&quot;
          position={Position.Right}
          id=&quot;output&quot;
          className=&quot;w-3 h-3 bg-green-500 border-2 border-white&quot;
        /&gt;
      &lt;/div&gt;

      {/* Configuration Modal */}
      &lt;Modal
        title={`Configure ${config.name}`}
        open={isConfigModalOpen}
        onCancel={() =&gt; setIsConfigModalOpen(false)}
        onOk={() =&gt; configForm.submit()}
        width={600}
      &gt;
        &lt;Form
          form={configForm}
          layout=&quot;vertical&quot;
          initialValues={config.executionConfig}
          onFinish={handleConfigChange}
        &gt;
          {config.type === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopType&quot; label=&quot;Loop Type&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;for&quot;&gt;For Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;while&quot;&gt;While Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;foreach&quot;&gt;For Each&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot;&gt;
                &lt;InputNumber min={1} max={1000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot;&gt;
                &lt;InputNumber min={1} max={20} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;parallelStrategy&quot; label=&quot;Execution Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'conditional' &amp;&amp; (
            &lt;Form.Item name=&quot;conditionExpression&quot; label=&quot;Condition Expression&quot;&gt;
              &lt;Input.TextArea
                placeholder=&quot;Enter JavaScript expression, e.g., $input.value &gt; 10&quot;
                rows={3}
              /&gt;
            &lt;/Form.Item&gt;
          )}

          {config.type === 'try-catch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;retryAttempts&quot; label=&quot;Retry Attempts&quot;&gt;
                &lt;InputNumber min={0} max={10} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;retryDelay&quot; label=&quot;Retry Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;errorHandling&quot; label=&quot;Error Handling&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;stop&quot;&gt;Stop on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;continue&quot;&gt;Continue on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;retry&quot;&gt;Retry on Error&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'batch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;batchSize&quot; label=&quot;Batch Size&quot;&gt;
                &lt;InputNumber min={1} max={100} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;batchDelay&quot; label=&quot;Batch Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/PropertyField.tsx (Line 106:6 - Line 446:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 109:6 - Line 449:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup101"><code class="language-javascript text-sm text-gray-800">={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={cred.value} value={cred.value}&gt;
            {cred.name}
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
    );
  };

  return (
    &lt;div style={{ marginBottom: theme.spacing.md }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/EnhancedNodeToolbar.tsx (Line 291:6 - Line 350:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 298:6 - Line 357:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup103"><code class="language-javascript text-sm text-gray-800">={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/TableView.tsx (Line 192:6 - Line 299:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/tableview/TableView.tsx (Line 194:6 - Line 301:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup105"><code class="language-javascript text-sm text-gray-800">={getTypeColor(type)}&gt;{type}&lt;/Tag&gt;
          {record.nullable &amp;&amp; &lt;Tag color=&quot;red&quot;&gt;nullable&lt;/Tag&gt;}
        &lt;/Space&gt;
      ),
      filters: typeOptions.map((type) =&gt; ({ text: type, value: type })),
      onFilter: (value: any, record: TableRow) =&gt; record.type === value,
    },
    {
      title: 'Value',
      dataIndex: 'displayValue',
      key: 'value',
      ellipsis: true,
      render: (displayValue: string, record: TableRow) =&gt; {
        const isLongValue = record.type === 'string' &amp;&amp; record.size &amp;&amp; record.size &gt; 100;
        const isComplexValue = record.type === 'object' || record.type === 'array';

        return (
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;Text
              className={`${record.nullable ? 'text-gray-500 italic' : 'text-gray-300'}`}
              style={{ maxWidth: compact ? 150 : 300 }}
            &gt;
              {displayValue}
            &lt;/Text&gt;
            &lt;Space size=&quot;small&quot;&gt;
              {(isLongValue || isComplexValue) &amp;&amp; (
                &lt;Tooltip title=&quot;View full value&quot;&gt;
                  &lt;Button
                    icon={&lt;EyeOutlined /&gt;}
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    onClick={() =&gt; viewFullValue(record)}
                    className=&quot;text-gray-400 hover:text-white&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}
              &lt;Tooltip title=&quot;Copy value&quot;&gt;
                &lt;Button
                  icon={&lt;CopyOutlined /&gt;}
                  size=&quot;small&quot;
                  type=&quot;text&quot;
                  onClick={() =&gt; copyValue(record.value)}
                  className=&quot;text-gray-400 hover:text-white&quot;
                /&gt;
              &lt;/Tooltip&gt;
              {onDataTransform &amp;&amp; (
                &lt;Tooltip title=&quot;Use in transform&quot;&gt;
                  &lt;Button
                    icon={&lt;EditOutlined /&gt;}
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    onClick={() =&gt; onDataTransform({ [record.field]: record.value })}
                    className=&quot;text-gray-400 hover:text-white&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}
            &lt;/Space&gt;
          &lt;/div&gt;
        );
      },
    },
  ];

  if (compact) {
    // Remove the path display and reduce column widths for compact mode
    columns[0].width = 100;
    columns[2].render = (displayValue: string, record: TableRow) =&gt; (
      &lt;Text
        className={`${record.nullable ? 'text-gray-500 italic' : 'text-gray-300'}`}
        ellipsis={{ tooltip: displayValue }}
        style={{ maxWidth: 120 }}
      &gt;
        {displayValue}
      &lt;/Text&gt;
    );
  }

  if (!data) {
    return (
      &lt;div className=&quot;p-8 text-center text-gray-400&quot;&gt;
        &lt;FilterOutlined className=&quot;text-4xl mb-2&quot; /&gt;
        &lt;div&gt;No data to display&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 overflow-hidden h-full flex flex-col&quot;&gt;
      {/* Filters and Controls */}
      &lt;div
        className={`${compact ? 'p-2' : 'p-3'} border-b border-gray-700 bg-gray-800 flex-shrink-0`}
      &gt;
        &lt;Space wrap size={compact ? 'small' : 'middle'}&gt;
          &lt;Input.Search
            placeholder=&quot;Search fields and values...&quot;
            value={searchText}
            onChange={(e) =&gt; setSearchText(e.target.value)}
            style={{ width: compact ? 150 : 200 }}
          /&gt;
          &lt;Select
            value={filterType}
            onChange={setFilterType}
            style={{ width: compact ? 100 : 120 }}
          &gt;
            &lt;Option value=&quot;all&quot;&gt;All Types&lt;/Option&gt;
            {typeOptions.map((type) =&gt; (
              &lt;Option key={type} value={type}&gt;
                &lt;Tag color={getTypeColor(type)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/SchemaView.tsx (Line 132:8 - Line 236:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/schemaview/SchemaView.tsx (Line 133:8 - Line 237:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup107"><code class="language-javascript text-sm text-gray-800">={() =&gt; onFieldClick?.(currentPath)}
      &gt;
        &lt;Space size=&quot;small&quot;&gt;
          {getTypeIcon(type)}
          &lt;Text className=&quot;text-white font-medium&quot;&gt;{key}&lt;/Text&gt;
          &lt;Tag color={getTypeColor(type)}&gt;{type}&lt;/Tag&gt;
          {nullable &amp;&amp; &lt;Tag color=&quot;red&quot;&gt;nullable&lt;/Tag&gt;}
        &lt;/Space&gt;
        {preview &amp;&amp; &lt;Text className=&quot;text-gray-400 text-xs ml-2 max-w-xs truncate&quot;&gt;{preview}&lt;/Text&gt;}
      &lt;/div&gt;
    );

    const node: SchemaNode = {
      key: currentPath,
      title: nodeTitle,
      type,
      nullable,
      path: currentPath,
      isLeaf: type !== 'object' &amp;&amp; type !== 'array',
    };

    // Add children for objects and arrays
    if (type === 'object' &amp;&amp; value &amp;&amp; Object.keys(value).length &gt; 0) {
      node.children = buildSchemaTree(value, currentPath, onFieldClick);
    } else if (type === 'array' &amp;&amp; Array.isArray(value) &amp;&amp; value.length &gt; 0) {
      // For arrays, show the schema of the first item
      const firstItem = value[0];
      if (firstItem &amp;&amp; typeof firstItem === 'object') {
        node.children = buildSchemaTree(firstItem, `${currentPath}[0]`, onFieldClick);
      }
    }

    return node;
  });
};

const SchemaView: React.FC&lt;SchemaViewProps&gt; = ({ data, onFieldClick, compact = false }) =&gt; {
  const schemaTree = useMemo(() =&gt; {
    return buildSchemaTree(data, '', onFieldClick);
  }, [data, onFieldClick]);

  const schemaStats = useMemo(() =&gt; {
    const countTypes = (nodes: SchemaNode[]): Record&lt;string, number&gt; =&gt; {
      const counts: Record&lt;string, number&gt; = {};

      const traverse = (nodeList: SchemaNode[]) =&gt; {
        nodeList.forEach((node) =&gt; {
          counts[node.type] = (counts[node.type] || 0) + 1;
          if (node.children) {
            traverse(node.children);
          }
        });
      };

      traverse(nodes);
      return counts;
    };

    return countTypes(schemaTree);
  }, [schemaTree]);

  if (!data) {
    return (
      &lt;div className=&quot;p-8 text-center text-gray-400&quot;&gt;
        &lt;DatabaseOutlined className=&quot;text-4xl mb-2&quot; /&gt;
        &lt;div&gt;No data to analyze&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 overflow-hidden h-full flex flex-col&quot;&gt;
      {/* Schema Statistics Header */}
      {(compact || !compact) &amp;&amp; (
        &lt;div
          className={`${compact ? 'p-2' : 'p-3'} border-b border-gray-700 bg-gray-800 flex-shrink-0`}
        &gt;
          &lt;Text
            className={`text-gray-300 ${compact ? 'text-xs' : 'text-sm'} font-medium mb-2 block`}
          &gt;
            Type Distribution
          &lt;/Text&gt;
          &lt;div className=&quot;flex flex-wrap gap-1&quot;&gt;
            {Object.entries(schemaStats).map(([type, count]) =&gt; (
              &lt;div key={type} className=&quot;flex items-center gap-1&quot;&gt;
                {compact ? null : getTypeIcon(type)}
                &lt;Tag
                  color={getTypeColor(type)}
                  // size={compact ? 'small' : 'default'}
                &gt;
                  {type} ({count})
                &lt;/Tag&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Schema Tree */}
      &lt;div className={`${compact ? 'p-2' : 'p-4'} flex-1 overflow-hidden bg-gray-900`}&gt;
        &lt;Tree
          treeData={schemaTree}
          defaultExpandAll={!compact}
          showLine
          showIcon={false}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/JsonView.tsx (Line 132:5 - Line 418:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/jsonview/JsonView.tsx (Line 134:5 - Line 420:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup109"><code class="language-javascript text-sm text-gray-800">={compact ? 'small' : 'middle'}&gt;
//             &lt;Input
//               placeholder=&quot;Search JSON...&quot;
//               value={searchTerm}
//               onChange={(e) =&gt; setSearchTerm(e.target.value)}
//               style={{ width: compact ? 150 : 200 }}
//               size=&quot;small&quot;
//               prefix={&lt;SearchOutlined /&gt;}
//             /&gt;
//             {!compact &amp;&amp; (
//               &lt;&gt;
//                 &lt;Switch
//                   checked={showLineNumbers}
//                   onChange={setShowLineNumbers}
//                   size=&quot;small&quot;
//                 /&gt;
//                 &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;Line numbers&lt;/Text&gt;
//               &lt;/&gt;
//             )}
//           &lt;/Space&gt;

//           &lt;Space size=&quot;small&quot;&gt;
//             &lt;Tooltip title={collapsed ? &quot;Expand JSON&quot; : &quot;Collapse JSON&quot;}&gt;
//               &lt;Button
//                 icon={collapsed ? &lt;ExpandOutlined /&gt; : &lt;CompressOutlined /&gt;}
//                 size=&quot;small&quot;
//                 onClick={handleFormat}
//                 className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
//               /&gt;
//             &lt;/Tooltip&gt;
//             &lt;Tooltip title=&quot;Copy JSON&quot;&gt;
//               &lt;Button
//                 icon={&lt;CopyOutlined /&gt;}
//                 size=&quot;small&quot;
//                 onClick={handleCopy}
//                 className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
//               /&gt;
//             &lt;/Tooltip&gt;
//           &lt;/Space&gt;
//         &lt;/div&gt;

//         {searchTerm &amp;&amp; (
//           &lt;div className=&quot;mt-2&quot;&gt;
//             &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;
//               {filteredLines.length} matches found
//             &lt;/Text&gt;
//           &lt;/div&gt;
//         )}
//       &lt;/div&gt;

//       {/* JSON Content */}
//       &lt;div className=&quot;p-2 overflow-auto flex-1&quot;&gt;
//         {searchTerm ? (
//           // Filtered view
//           &lt;div className=&quot;space-y-1&quot;&gt;
//             {filteredLines.map(({ line, index }) =&gt; (
//               &lt;JsonLine
//                 key={index}
//                 line={line}
//                 lineNumber={showLineNumbers ? index + 1 : 0}
//                 isHighlighted={highlightPath ? line.includes(highlightPath) : false}
//                 onFieldClick={onFieldClick}
//               /&gt;
//             ))}
//           &lt;/div&gt;
//         ) : (
//           // Full JSON view
//           &lt;div className=&quot;space-y-1&quot;&gt;
//             {jsonLines.map((line, index) =&gt; (
//               &lt;JsonLine
//                 key={index}
//                 line={line}
//                 lineNumber={showLineNumbers ? index + 1 : 0}
//                 isHighlighted={highlightPath ? line.includes(highlightPath) : false}
//                 onFieldClick={onFieldClick}
//               /&gt;
//             ))}
//           &lt;/div&gt;
//         )}
//       &lt;/div&gt;

//       {/* Footer Stats - hide in compact mode */}
//       {!compact &amp;&amp; (
//         &lt;div className=&quot;p-2 border-t border-gray-700 bg-gray-800 flex-shrink-0&quot;&gt;
//           &lt;div className=&quot;flex justify-between text-xs text-gray-400&quot;&gt;
//             &lt;span&gt;{jsonLines.length} lines&lt;/span&gt;
//             &lt;span&gt;{(formattedJson.length / 1024).toFixed(1)} KB&lt;/span&gt;
//             &lt;span&gt;{Object.keys(data || {}).length} top-level fields&lt;/span&gt;
//           &lt;/div&gt;
//         &lt;/div&gt;
//       )}
//     &lt;/div&gt;
//   )
// }

// export default JsonView

import {
  CompressOutlined,
  CopyOutlined,
  ExpandOutlined,
  FormatPainterOutlined,
  SearchOutlined,
} from '@ant-design/icons';
import { Button, Input, Space, Switch, Tooltip, Typography } from 'antd';
/* eslint-disable @typescript-eslint/no-explicit-any */
import type React from 'react';
import { useMemo, useState } from 'react';

const { Text } = Typography;

interface JsonViewProps {
  data: any;
  onFieldClick?: (fieldPath: string) =&gt; void;
  compact?: boolean;
  highlightPath?: string;
}

interface JsonLineProps {
  line: string;
  lineNumber: number;
  isHighlighted: boolean;
  onFieldClick?: (fieldPath: string) =&gt; void;
}

interface LineWithIndex {
  line: string;
  index: number;
}

const JsonLine: React.FC&lt;JsonLineProps&gt; = ({ line, lineNumber, isHighlighted, onFieldClick }) =&gt; {
  const handleClick = () =&gt; {
    // Extract field path from JSON line (simplified)
    const fieldMatch = line.match(/&quot;([^&quot;]+)&quot;:\s*/);
    if (fieldMatch &amp;&amp; onFieldClick) {
      onFieldClick(fieldMatch[1]);
    }
  };

  return (
    &lt;div
      className={`flex items-start hover:bg-gray-700 ${isHighlighted ? 'bg-yellow-900' : ''}`}
      onClick={handleClick}
    &gt;
      &lt;span className=&quot;text-gray-500 text-xs mr-4 select-none w-8 text-right&quot;&gt;{lineNumber}&lt;/span&gt;
      &lt;pre className=&quot;text-sm text-gray-300 font-mono flex-1 whitespace-pre-wrap cursor-pointer&quot;&gt;
        &lt;code dangerouslySetInnerHTML={{ __html: syntaxHighlight(line) }} /&gt;
      &lt;/pre&gt;
    &lt;/div&gt;
  );
};

const syntaxHighlight = (json: string): string =&gt; {
  return json
    .replace(/&amp;/g, '&amp;amp;')
    .replace(/&lt;/g, '&amp;lt;')
    .replace(/&gt;/g, '&amp;gt;')
    .replace(
      /(&quot;(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\&quot;])*&quot;(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,
      (match) =&gt; {
        let cls = 'text-yellow-400'; // numbers
        if (/^&quot;/.test(match)) {
          if (/:$/.test(match)) {
            cls = 'text-blue-400'; // keys
          } else {
            cls = 'text-green-400'; // strings
          }
        } else if (/true|false/.test(match)) {
          cls = 'text-purple-400'; // booleans
        } else if (/null/.test(match)) {
          cls = 'text-red-400'; // null
        }
        return `&lt;span class=&quot;${cls}&quot;&gt;${match}&lt;/span&gt;`;
      }
    );
};

const JsonView: React.FC&lt;JsonViewProps&gt; = ({
  data,
  onFieldClick,
  compact = false,
  highlightPath,
}) =&gt; {
  const [collapsed, setCollapsed] = useState(compact);
  const [searchTerm, setSearchTerm] = useState('');
  const [showLineNumbers, setShowLineNumbers] = useState(true);

  const formattedJson = useMemo(() =&gt; {
    if (!data) return '';
    return JSON.stringify(data, null, collapsed ? 0 : 2);
  }, [data, collapsed]);

  const jsonLines = useMemo(() =&gt; {
    return formattedJson.split('\n');
  }, [formattedJson]);

  // Fix: Always return the same type structure
  const filteredLines = useMemo((): LineWithIndex[] =&gt; {
    const linesWithIndex = jsonLines.map((line, index) =&gt; ({ line, index }));

    if (!searchTerm) {
      return linesWithIndex;
    }

    return linesWithIndex.filter(({ line }) =&gt;
      line.toLowerCase().includes(searchTerm.toLowerCase())
    );
  }, [jsonLines, searchTerm]);

  const handleCopy = () =&gt; {
    navigator.clipboard.writeText(formattedJson);
  };

  const handleFormat = () =&gt; {
    setCollapsed(!collapsed);
  };

  if (!data) {
    return (
      &lt;div className=&quot;p-8 text-center text-gray-400&quot;&gt;
        &lt;FormatPainterOutlined className=&quot;text-4xl mb-2&quot; /&gt;
        &lt;div&gt;No JSON data to display&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 overflow-hidden h-full flex flex-col&quot;&gt;
      {/* Header Controls */}
      &lt;div
        className={`${compact ? 'p-2' : 'p-3'} border-b border-gray-700 bg-gray-800 flex-shrink-0`}
      &gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;Space size={compact ? 'small' : 'middle'}&gt;
            &lt;Input
              placeholder=&quot;Search JSON...&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              style={{ width: compact ? 150 : 200 }}
              size=&quot;small&quot;
              prefix={&lt;SearchOutlined /&gt;}
            /&gt;
            {!compact &amp;&amp; (
              &lt;&gt;
                &lt;Switch checked={showLineNumbers} onChange={setShowLineNumbers} size=&quot;small&quot; /&gt;
                &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;Line numbers&lt;/Text&gt;
              &lt;/&gt;
            )}
          &lt;/Space&gt;

          &lt;Space size=&quot;small&quot;&gt;
            &lt;Tooltip title={collapsed ? 'Expand JSON' : 'Collapse JSON'}&gt;
              &lt;Button
                icon={collapsed ? &lt;ExpandOutlined /&gt; : &lt;CompressOutlined /&gt;}
                size=&quot;small&quot;
                onClick={handleFormat}
                className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
              /&gt;
            &lt;/Tooltip&gt;
            &lt;Tooltip title=&quot;Copy JSON&quot;&gt;
              &lt;Button
                icon={&lt;CopyOutlined /&gt;}
                size=&quot;small&quot;
                onClick={handleCopy}
                className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
              /&gt;
            &lt;/Tooltip&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        {searchTerm &amp;&amp; (
          &lt;div className=&quot;mt-2&quot;&gt;
            &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;{filteredLines.length} matches found&lt;/Text&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* JSON Content */}
      &lt;div className=&quot;p-2 overflow-auto flex-1&quot;&gt;
        &lt;div className=&quot;space-y-1&quot;&gt;
          {filteredLines.map(({ line, index }) =&gt; (
            &lt;JsonLine
              key={index}
              line={line}
              lineNumber={showLineNumbers ? index + 1 : 0}
              isHighlighted={highlightPath ? line.includes(highlightPath) : false}
              onFieldClick={onFieldClick}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/DataVisualizationPanel.tsx (Line 140:5 - Line 266:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/datavisualizationpanel/DataVisualizationPanel.tsx (Line 142:5 - Line 268:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup111"><code class="language-javascript text-sm text-gray-800">={filteredData} onFieldClick={showFieldDetails} compact={compact} /&gt;
          &lt;/div&gt;
        );
      case 'table':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            &lt;TableView
              data={filteredData}
              onFieldClick={showFieldDetails}
              onDataTransform={onDataTransform}
              compact={compact}
            /&gt;
          &lt;/div&gt;
        );
      case 'json':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            &lt;JsonView data={filteredData} onFieldClick={showFieldDetails} compact={compact} /&gt;
          &lt;/div&gt;
        );
      default:
        return null;
    }
  };

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
            {title}
            {data &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Data loaded&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {data &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search data fields&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}
                &gt;
                  {label}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;

            {/* Action buttons */}
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button
                onClick={handleCopyData}
                className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;
                title=&quot;Copy JSON&quot;
              &gt;
                &lt;CopyOutlined className=&quot;w-4 h-4&quot; /&gt;
              &lt;/button&gt;
              &lt;button
                onClick={handleDownloadData}
                className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;
                title=&quot;Download JSON&quot;
              &gt;
                &lt;DownloadOutlined className=&quot;w-4 h-4&quot; /&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Data info */}
        {data &amp;&amp; dataStats &amp;&amp; (
          &lt;div className=&quot;mt-3 flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;Fields:&lt;/span&gt; {dataStats.totalFields}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;Size:&lt;/span&gt; {(dataStats.dataSize / 1024).toFixed(1)}
              KB
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 overflow-hidden&quot;&gt;{renderContent()}&lt;/div&gt;

      {/* Field Details Modal */}
      &lt;Modal
        title={`Field Details: ${selectedField}`}
        open={isModalVisible}
        onCancel={() =&gt; setIsModalVisible(false)}
        footer={null}
        width={800}
        className=&quot;dark-modal&quot;
      &gt;
        {selectedField &amp;&amp; (
          &lt;div className=&quot;bg-gray-900 p-4 rounded&quot;&gt;
            &lt;JsonView data={filteredData} highlightPath={selectedField} compact={false}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 176:13 - Line 252:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 288:2 - Line 376:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn197" onclick="toggleCodeBlock('cloneGroup197', 'expandBtn197', 'collapseBtn197')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn197" onclick="toggleCodeBlock('cloneGroup197', 'expandBtn197', 'collapseBtn197')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup197"><code class="language-javascript text-sm text-gray-800">} className=&quot;space-y-6&quot;&gt;
                {/* Global Error */}
                {error &amp;&amp; (
                  &lt;div className=&quot;rounded-lg bg-red-500/20 border border-red-500/30 p-4&quot;&gt;
                    &lt;div className=&quot;text-sm text-red-200&quot;&gt;{error}&lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Email Field */}
                &lt;div&gt;
                  &lt;label htmlFor=&quot;email&quot; className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;&gt;
                    Email address
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Mail className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;email&quot;
                      name=&quot;email&quot;
                      type=&quot;email&quot;
                      autoComplete=&quot;email&quot;
                      required
                      value={formData.email}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.email ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your email&quot;
                    /&gt;
                  &lt;/div&gt;
                  {formErrors.email &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.email}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;password&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;password&quot;
                      name=&quot;password&quot;
                      type={showPassword ? 'text' : 'password'}
                      autoComplete=&quot;current-password&quot;
                      required
                      value={formData.password}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-12 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.password ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your password&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowPassword(!showPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showPassword ? &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt; : &lt;Eye className=&quot;w-5 h-5&quot; /&gt;}
                    &lt;/button&gt;
                  &lt;/div&gt;
                  {formErrors.password &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.password}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Remember Me &amp; Forgot Password */}
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;label className=&quot;flex items-center&quot;&gt;
                    &lt;input
                      type=&quot;checkbox&quot;
                      name=&quot;rememberMe&quot;
                      checked={formData</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/AIAgentPropertiesPanel.tsx (Line 261:6 - Line 535:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/aiagentpropertiespanel/AIAgentPropertiesPanel.tsx (Line 263:6 - Line 537:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn228" onclick="toggleCodeBlock('cloneGroup228', 'expandBtn228', 'collapseBtn228')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn228" onclick="toggleCodeBlock('cloneGroup228', 'expandBtn228', 'collapseBtn228')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup228"><code class="language-javascript text-sm text-gray-800">={{ marginBottom: '16px' }}
      /&gt;

      {aiAgentProperties.map((property) =&gt; {
        // Check display conditions
        const shouldShow =
          !property.displayOptions?.show ||
          Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
            values?.includes(formValues[key])
          );

        if (!shouldShow) return null;

        return (
          &lt;PropertyField
            key={property.name}
            property={property}
            value={formValues[property.name]}
            onChange={(value) =&gt; handleFieldChange(property.name, value)}
            errors={errors[property.name]}
            theme={theme}
            context={formValues}
          /&gt;
        );
      })}
    &lt;/div&gt;
  );

  const renderAdvancedTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Advanced Settings&quot;
        description=&quot;Fine-tune AI model behavior and performance parameters.&quot;
        type=&quot;warning&quot;
        showIcon
        style={{ marginBottom: '16px' }}
      /&gt;

      &lt;Collapse
        items={[
          {
            key: 'performance',
            label: (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ExperimentOutlined /&gt;
                &lt;span&gt;Performance &amp; Sampling&lt;/span&gt;
              &lt;/div&gt;
            ),
            children: (
              &lt;div className=&quot;space-y-4&quot;&gt;
                {advancedProperties.map((property) =&gt; {
                  const shouldShow =
                    !property.displayOptions?.show ||
                    Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
                      values?.includes(formValues[key])
                    );

                  if (!shouldShow) return null;

                  return (
                    &lt;PropertyField
                      key={property.name}
                      property={property}
                      value={formValues[property.name]}
                      onChange={(value) =&gt; handleFieldChange(property.name, value)}
                      errors={errors[property.name]}
                      theme={theme}
                      context={formValues}
                    /&gt;
                  );
                })}
              &lt;/div&gt;
            ),
          },
        ]}
      /&gt;
    &lt;/div&gt;
  );

  const renderTestingTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Test Your AI Agent&quot;
        description=&quot;Test your AI agent configuration with sample data.&quot;
        type=&quot;success&quot;
        showIcon
      /&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Quick Test&quot;&gt;
        &lt;div className=&quot;space-y-4&quot;&gt;
          &lt;PropertyField
            property={{
              displayName: 'Test Input',
              name: 'testInput',
              type: 'text',
              description: 'Sample data to test with',
              placeholder: 'Enter test data here...',
              rows: 4,
            }}
            value={formValues.testInput || ''}
            onChange={(value) =&gt; handleFieldChange('testInput', value)}
            theme={theme}
          /&gt;

          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;PlayCircleOutlined /&gt;}
            loading={isTestMode}
            onClick={handleTest}
            block
          &gt;
            {isTestMode ? 'Testing...' : 'Test AI Agent'}
          &lt;/Button&gt;

          {isTestMode &amp;&amp; (
            &lt;Card size=&quot;small&quot; loading&gt;
              &lt;div&gt;Running test with current configuration...&lt;/div&gt;
            &lt;/Card&gt;
          )}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderDebugTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Debug Information&quot;
        description=&quot;View current configuration and troubleshooting information.&quot;
        type=&quot;info&quot;
        showIcon
      /&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Current Configuration&quot;&gt;
        &lt;pre
          style={{
            fontSize: '11px',
            background: '#f5f5f5',
            padding: '12px',
            borderRadius: '4px',
            overflow: 'auto',
            maxHeight: '300px',
          }}
        &gt;
          {JSON.stringify(formValues, null, 2)}
        &lt;/pre&gt;
      &lt;/Card&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Provider Information&quot;&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;div&gt;
            &lt;strong&gt;Provider:&lt;/strong&gt; {formValues.provider || 'Not selected'}
          &lt;/div&gt;
          &lt;div&gt;
            &lt;strong&gt;Model:&lt;/strong&gt; {formValues.model || formValues.ollamaModel || 'Not selected'}
          &lt;/div&gt;
          &lt;div&gt;
            &lt;strong&gt;Token Limit:&lt;/strong&gt; {formValues.maxTokens || 1000}
          &lt;/div&gt;
          &lt;div&gt;
            &lt;strong&gt;Temperature:&lt;/strong&gt; {formValues.temperature || 0.7}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div style={{ height: '100%', display: 'flex', flexDirection: 'column' }}&gt;
      {/* Header */}
      &lt;div
        style={{
          padding: '16px',
          borderBottom: `1px solid ${theme.colors.border}`,
          backgroundColor: theme.colors.background,
        }}
      &gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;SettingOutlined style={{ color: theme.colors.primary }} /&gt;
            &lt;span
              style={{
                fontSize: theme.typography.fontSize.lg,
                fontWeight: theme.typography.fontWeight.semibold,
                color: theme.colors.text,
              }}
            &gt;
              AI Agent Properties
            &lt;/span&gt;
            &lt;Badge count={Object.keys(errors).length} showZero={false} /&gt;
          &lt;/div&gt;
          &lt;Button size=&quot;small&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Content */}
      &lt;div style={{ flex: 1, overflow: 'hidden' }}&gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab} style={{ height: '100%' }}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Configuration
              &lt;/span&gt;
            }
            key=&quot;configuration&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderConfigurationTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;ExperimentOutlined /&gt;
                Advanced
              &lt;/span&gt;
            }
            key=&quot;advanced&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderAdvancedTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;PlayCircleOutlined /&gt;
                Testing
              &lt;/span&gt;
            }
            key=&quot;testing&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderTestingTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;BugOutlined /&gt;
                Debug
              &lt;/span&gt;
            }
            key=&quot;debug&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderDebugTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/div&gt;

      {/* Footer */}
      &lt;div
        style={{
          padding: '12px 16px',
          borderTop: `1px solid ${theme.colors.border}`,
          backgroundColor: theme.colors.background,
        }}
      &gt;
        &lt;Space&gt;
          &lt;Button size=&quot;small&quot; onClick={validateForm}&gt;
            Validate
          &lt;/Button&gt;
          &lt;Button size=&quot;small&quot; type=&quot;primary&quot; onClick={() =&gt; onChange(nodeData)}&gt;
            Apply Changes
          &lt;/Button&gt;
          &lt;Tooltip title=&quot;Get help with AI Agent configuration&quot;&gt;
            &lt;Button size=&quot;small&quot; icon={&lt;InfoCircleOutlined /&gt;}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 59:10 - Line 177:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 65:10 - Line 183:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn230" onclick="toggleCodeBlock('cloneGroup230', 'expandBtn230', 'collapseBtn230')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn230" onclick="toggleCodeBlock('cloneGroup230', 'expandBtn230', 'collapseBtn230')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup230"><code class="language-javascript text-sm text-gray-800">={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* Gmail Icon */}
            &lt;div className=&quot;flex items-center justify-center&quot;&gt;
              &lt;img
                src={icon}
                alt=&quot;Gmail&quot;
                className=&quot;w-6 h-6&quot;
                onError={(e) =&gt; {
                  const target = e.target as HTMLImageElement;
                  target.style.display = 'none';
                  const fallback = target.nextElementSibling;
                  if (fallback) {
                    fallback.classList.remove('hidden');
                  }
                }}
              /&gt;
              &lt;span className=&quot;hidden text-xl&quot;&gt;📧&lt;/span&gt;
            &lt;/div&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 72:92 - Line 97:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 69:89 - Line 94:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn232" onclick="toggleCodeBlock('cloneGroup232', 'expandBtn232', 'collapseBtn232')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn232" onclick="toggleCodeBlock('cloneGroup232', 'expandBtn232', 'collapseBtn232')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup232"><code class="language-javascript text-sm text-gray-800"> : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* True Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#22c55e'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 142:7 - Line 182:21), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 97:2 - Line 143:37)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn233" onclick="toggleCodeBlock('cloneGroup233', 'expandBtn233', 'collapseBtn233')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn233" onclick="toggleCodeBlock('cloneGroup233', 'expandBtn233', 'collapseBtn233')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup233"><code class="language-javascript text-sm text-gray-800">,
              }}
            &gt;
              F
            &lt;/div&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 167:2 - Line 223:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 145:2 - Line 169:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn234" onclick="toggleCodeBlock('cloneGroup234', 'expandBtn234', 'collapseBtn234')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn234" onclick="toggleCodeBlock('cloneGroup234', 'expandBtn234', 'collapseBtn234')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup234"><code class="language-javascript text-sm text-gray-800">}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badges */}
            {nodeData.disabled &amp;&amp; &lt;StatusBadge type=&quot;disabled&quot; position=&quot;top-right&quot; /&gt;}
            {mode === 'rules' &amp;&amp; rules.length &gt; 0 &amp;&amp; (
              &lt;StatusBadge type=&quot;count&quot; content={rules</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/TransformAssignmentCollection.tsx (Line 80:6 - Line 466:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/transformassignmentcollection/TransformAssignmentCollection.tsx (Line 85:6 - Line 471:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn238" onclick="toggleCodeBlock('cloneGroup238', 'expandBtn238', 'collapseBtn238')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn238" onclick="toggleCodeBlock('cloneGroup238', 'expandBtn238', 'collapseBtn238')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup238"><code class="language-javascript text-sm text-gray-800">={assignment.value || ''}
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            disabled={disabled}
          /&gt;
        );
      case 'numberValue':
        return (
          &lt;Input
            type=&quot;number&quot;
            placeholder=&quot;Numeric value&quot;
            value={assignment.value ?? ''}
            onChange={(e) =&gt; handleFieldChange('value', Number(e.target.value) || 0)}
            disabled={disabled}
          /&gt;
        );
      case 'booleanValue':
        return (
          &lt;Switch
            checked={assignment.value ?? false}
            onChange={(value) =&gt; handleFieldChange('value', value)}
            disabled={disabled}
          /&gt;
        );
      case 'arrayValue':
        return (
          &lt;Input.TextArea
            placeholder='[&quot;item1&quot;, &quot;item2&quot;] or JSON array'
            value={
              typeof assignment.value === 'string'
                ? assignment.value
                : JSON.stringify(assignment.value || [])
            }
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            rows={2}
            disabled={disabled}
          /&gt;
        );
      case 'objectValue':
        return (
          &lt;Input.TextArea
            placeholder='{&quot;key&quot;: &quot;value&quot;} or JSON object'
            value={
              typeof assignment.value === 'string'
                ? assignment.value
                : JSON.stringify(assignment.value || {})
            }
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            rows={2}
            disabled={disabled}
          /&gt;
        );
      default:
        return (
          &lt;Input
            placeholder=&quot;Value&quot;
            value={assignment.value || ''}
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            disabled={disabled}
          /&gt;
        );
    }
  };

  return (
    &lt;Card
      ref={setNodeRef}
      style={style}
      size=&quot;small&quot;
      className={`assignment-item ${isDragging ? 'dragging' : ''}`}
      bodyStyle={{ padding: '12px' }}
    &gt;
      &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;small&quot;&gt;
        {/* Header with drag handle and delete button */}
        &lt;div
          style={{
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
          }}
        &gt;
          &lt;div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
            &lt;div {...attributes} {...listeners} style={{ cursor: 'grab', color: '#8c8c8c' }}&gt;
              &lt;DragOutlined /&gt;
            &lt;/div&gt;
            &lt;Text strong style={{ fontSize: '12px' }}&gt;
              Assignment {assignment.id.slice(-3)}
            &lt;/Text&gt;
          &lt;/div&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;DeleteOutlined /&gt;}
            onClick={() =&gt; onDelete(assignment.id)}
            disabled={disabled}
            danger
            style={{ minWidth: 'auto', padding: '4px' }}
          /&gt;
        &lt;/div&gt;

        {/* Field Name */}
        &lt;div&gt;
          &lt;Text
            type=&quot;secondary&quot;
            style={{ fontSize: '11px', marginBottom: '4px', display: 'block' }}
          &gt;
            Field Name
          &lt;/Text&gt;
          &lt;Input
            placeholder=&quot;e.g. user.name or address.city&quot;
            value={assignment.name}
            onChange={(e) =&gt; handleFieldChange('name', e.target.value)}
            size=&quot;small&quot;
            disabled={disabled}
          /&gt;
        &lt;/div&gt;

        {/* Field Type */}
        &lt;div&gt;
          &lt;Text
            type=&quot;secondary&quot;
            style={{ fontSize: '11px', marginBottom: '4px', display: 'block' }}
          &gt;
            Field Type
          &lt;/Text&gt;
          &lt;Select
            value={assignment.type}
            onChange={(value) =&gt; handleFieldChange('type', value)}
            size=&quot;small&quot;
            style={{ width: '100%' }}
            disabled={disabled}
          &gt;
            &lt;Option value=&quot;stringValue&quot;&gt;String&lt;/Option&gt;
            &lt;Option value=&quot;numberValue&quot;&gt;Number&lt;/Option&gt;
            &lt;Option value=&quot;booleanValue&quot;&gt;Boolean&lt;/Option&gt;
            &lt;Option value=&quot;arrayValue&quot;&gt;Array&lt;/Option&gt;
            &lt;Option value=&quot;objectValue&quot;&gt;Object&lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;

        {/* Field Value */}
        &lt;div&gt;
          &lt;Text
            type=&quot;secondary&quot;
            style={{ fontSize: '11px', marginBottom: '4px', display: 'block' }}
          &gt;
            Value
          &lt;/Text&gt;
          {renderValueInput()}
        &lt;/div&gt;
      &lt;/Space&gt;
    &lt;/Card&gt;
  );
};

// Main Transform Assignment Collection Component
const TransformAssignmentCollection: React.FC&lt;TransformAssignmentCollectionProps&gt; = ({
  assignments,
  onChange,
  inputData,
  disabled,
}) =&gt; {
  const sensors = useSensors(
    useSensor(PointerSensor),
    useSensor(KeyboardSensor, {
      coordinateGetter: sortableKeyboardCoordinates,
    })
  );

  // Generate unique ID for new assignments
  const generateId = useCallback(() =&gt; {
    return `assignment-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }, []);

  // Add new assignment
  const handleAddAssignment = useCallback(() =&gt; {
    const newAssignment: FieldAssignment = {
      id: generateId(),
      name: '',
      type: 'stringValue',
      value: '',
    };
    onChange([...assignments, newAssignment]);
  }, [assignments, generateId, onChange]);

  // Update assignment
  const handleUpdateAssignment = useCallback(
    (id: string, updates: Partial&lt;FieldAssignment&gt;) =&gt; {
      const updatedAssignments = assignments.map((assignment) =&gt;
        assignment.id === id ? { ...assignment, ...updates } : assignment
      );
      onChange(updatedAssignments);
    },
    [assignments, onChange]
  );

  // Delete assignment
  const handleDeleteAssignment = useCallback(
    (id: string) =&gt; {
      const filteredAssignments = assignments.filter((assignment) =&gt; assignment.id !== id);
      onChange(filteredAssignments);
    },
    [assignments, onChange]
  );

  // Clear all assignments
  const handleClearAll = useCallback(() =&gt; {
    onChange([]);
  }, [onChange]);

  // Add all fields from input data
  const handleAddAllFields = useCallback(() =&gt; {
    if (!inputData || !inputData.length) return;

    // Get all unique field names from input data
    const fieldNames = new Set&lt;string&gt;();
    inputData.forEach((item) =&gt; {
      if (item.json &amp;&amp; typeof item.json === 'object') {
        Object.keys(item.json).forEach((key) =&gt; fieldNames.add(key));
      }
    });

    // Create assignments for each field with auto-detected type
    const newAssignments = Array.from(fieldNames).map((fieldName) =&gt; {
      // Auto-detect type from first occurrence
      let detectedType: FieldAssignment['type'] = 'stringValue';
      for (const item of inputData) {
        if (item.json &amp;&amp; item.json[fieldName] !== undefined) {
          const value = item.json[fieldName];
          if (typeof value === 'number') detectedType = 'numberValue';
          else if (typeof value === 'boolean') detectedType = 'booleanValue';
          else if (Array.isArray(value)) detectedType = 'arrayValue';
          else if (typeof value === 'object' &amp;&amp; value !== null) detectedType = 'objectValue';
          break;
        }
      }

      return {
        id: generateId(),
        name: fieldName,
        type: detectedType,
        value: '', // Start with empty value for user to configure
      };
    });

    // Merge with existing assignments (avoid duplicates)
    const existingNames = new Set(assignments.map((a) =&gt; a.name));
    const filteredNewAssignments = newAssignments.filter((a) =&gt; !existingNames.has(a.name));

    onChange([...assignments, ...filteredNewAssignments]);
  }, [inputData, assignments, generateId, onChange]);

  // Handle drag and drop reordering
  const handleDragEnd = useCallback(
    (event: any) =&gt; {
      const { active, over } = event;

      if (active.id !== over?.id) {
        const oldIndex = assignments.findIndex((item) =&gt; item.id === active.id);
        const newIndex = assignments.findIndex((item) =&gt; item.id === over.id);
        const reorderedAssignments = arrayMove(assignments, oldIndex, newIndex);
        onChange(reorderedAssignments);
      }
    },
    [assignments, onChange]
  );

  // Memoize assignment items for performance
  const assignmentItems = useMemo(() =&gt; {
    return assignments.map((assignment) =&gt; (
      &lt;SortableAssignmentItem
        key={assignment.id}
        assignment={assignment}
        onUpdate={handleUpdateAssignment}
        onDelete={handleDeleteAssignment}
        disabled={disabled}
      /&gt;
    ));
  }, [assignments, handleUpdateAssignment, handleDeleteAssignment, disabled]);

  return (
    &lt;div className=&quot;transform-assignment-collection&quot;&gt;
      &lt;style&gt;{`
        .transform-assignment-collection {
          max-width: 100%;
        }
        .assignment-item.dragging {
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .bulk-operations {
          margin-bottom: 16px;
          padding: 12px;
          background: #fafafa;
          border-radius: 6px;
          border: 1px solid #d9d9d9;
        }
      `}&lt;/style&gt;

      {/* Header and Bulk Operations */}
      &lt;div className=&quot;bulk-operations&quot;&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginBottom: '8px',
          }}
        &gt;
          &lt;Title level={5} style={{ margin: 0 }}&gt;
            Field Assignments ({assignments.length})
          &lt;/Title&gt;
          &lt;Space size=&quot;small&quot;&gt;
            {inputData &amp;&amp; inputData.length &gt; 0 &amp;&amp; (
              &lt;Tooltip title=&quot;Add all fields from input data&quot;&gt;
                &lt;Button
                  type=&quot;dashed&quot;
                  size=&quot;small&quot;
                  icon={&lt;AppstoreAddOutlined /&gt;}
                  onClick={handleAddAllFields}
                  disabled={disabled}
                &gt;
                  Add All
                &lt;/Button&gt;
              &lt;/Tooltip&gt;
            )}
            {assignments.length &gt; 0 &amp;&amp; (
              &lt;Tooltip title=&quot;Clear all assignments&quot;&gt;
                &lt;Button
                  type=&quot;dashed&quot;
                  size=&quot;small&quot;
                  icon={&lt;ClearOutlined /&gt;}
                  onClick={handleClearAll}
                  disabled={disabled}
                  danger
                &gt;
                  Clear
                &lt;/Button&gt;
              &lt;/Tooltip&gt;
            )}
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
          Configure field assignments with type validation. Drag to reorder.
        &lt;/Text&gt;
      &lt;/div&gt;

      {/* Assignment Items with Drag &amp; Drop */}
      &lt;DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}&gt;
        &lt;SortableContext
          items={assignments.map((a) =&gt; a.id)}
          strategy={verticalListSortingStrategy}
        &gt;
          &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;small&quot;&gt;
            {assignmentItems}
          &lt;/Space&gt;
        &lt;/SortableContext&gt;
      &lt;/DndContext&gt;

      {/* Add Assignment Button */}
      &lt;div style={{ marginTop: assignments.length &gt; 0 ? '16px' : '0' }}&gt;
        &lt;Button
          type=&quot;dashed&quot;
          onClick={handleAddAssignment}
          icon={&lt;PlusOutlined /&gt;}
          style={{ width: '100%' }}
          disabled={disabled}
        &gt;
          Add Assignment
        &lt;/Button&gt;
      &lt;/div&gt;

      {/* Empty State */}
      {assignments.length === 0 &amp;&amp; (
        &lt;div
          style={{
            textAlign: 'center',
            padding: '24px',
            color: '#8c8c8c',
            backgroundColor: '#fafafa',
            borderRadius: '6px',
            border: '1px dashed #d9d9d9',
            marginTop: '8px',
          }}
        &gt;
          &lt;Text type=&quot;secondary&quot;&gt;No field assignments configured&lt;/Text&gt;
          &lt;br /&gt;
          &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 72:6 - Line 816:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 75:6 - Line 819:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn240" onclick="toggleCodeBlock('cloneGroup240', 'expandBtn240', 'collapseBtn240')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn240" onclick="toggleCodeBlock('cloneGroup240', 'expandBtn240', 'collapseBtn240')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup240"><code class="language-javascript text-sm text-gray-800">={value || ''}
        onChange={(e) =&gt; onChange(e.target.value)}
        placeholder={property.placeholder || `Enter ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 2. Number Property Renderer
export const NumberRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const typeOptions = property.typeOptions?.numberOptions;

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Input
        type=&quot;number&quot;
        value={value ?? ''}
        onChange={(e) =&gt; onChange(e.target.value ? Number(e.target.value) : undefined)}
        placeholder={property.placeholder}
        disabled={disabled}
        min={typeOptions?.minValue}
        max={typeOptions?.maxValue}
        step={typeOptions?.numberStepSize || 1}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 3. Boolean Property Renderer
export const BooleanRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;label className=&quot;text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
        &lt;Switch checked={Boolean(value)} onChange={onChange} disabled={disabled} /&gt;
      &lt;/div&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 4. Options/Select Property Renderer
export const OptionsRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const options = property.options || [];
  const typeOptions = property.typeOptions;

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder={property.placeholder || `Select ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch={typeOptions?.searchable !== false}
        allowClear={!property.required}
      &gt;
        {options.map((option) =&gt; (
          &lt;Option key={String(option.value)} value={option.value} title={option.description}&gt;
            &lt;div&gt;
              &lt;div className=&quot;text-gray-200&quot;&gt;{option.name}&lt;/div&gt;
              {option.description &amp;&amp; (
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{option.description}&lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 5. Multi-Options Property Renderer
export const MultiOptionsRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const options = property.options || [];
  const currentValues = Array.isArray(value) ? value : [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        mode=&quot;multiple&quot;
        value={currentValues}
        onChange={onChange}
        placeholder={property.placeholder || `Select ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
        allowClear
      &gt;
        {options.map((option) =&gt; (
          &lt;Option key={String(option.value)} value={option.value} title={option.description}&gt;
            &lt;div&gt;
              &lt;div className=&quot;text-gray-200&quot;&gt;{option.name}&lt;/div&gt;
              {option.description &amp;&amp; (
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{option.description}&lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 6. Text/TextArea Property Renderer
export const TextRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const typeOptions = property.typeOptions?.textAreaOptions;
  const rows = typeOptions?.rows || 4;

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;TextArea
        value={value || ''}
        onChange={(e) =&gt; onChange(e.target.value)}
        placeholder={property.placeholder || `Enter ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        rows={rows}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 7. DateTime Property Renderer
export const DateTimeRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;DatePicker
        value={value ? new Date(value) : null}
        onChange={(date) =&gt; onChange(date?.toISOString())}
        showTime
        placeholder={property.placeholder}
        disabled={disabled}
        className=&quot;w-full bg-gray-800 border-gray-600&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 8. Color Property Renderer
export const ColorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
        &lt;input
          type=&quot;color&quot;
          value={value || '#000000'}
          onChange={(e) =&gt; onChange(e.target.value)}
          disabled={disabled}
          className=&quot;w-12 h-8 rounded border-2 border-gray-600 cursor-pointer disabled:cursor-not-allowed&quot;
        /&gt;
        &lt;Input
          value={value || ''}
          onChange={(e) =&gt; onChange(e.target.value)}
          placeholder=&quot;#000000&quot;
          disabled={disabled}
          className=&quot;flex-1 bg-gray-800 border-gray-600 text-gray-200&quot;
        /&gt;
      &lt;/div&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 9. File Property Renderer
export const FileRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const handleUpload = (file: File) =&gt; {
    const reader = new FileReader();
    reader.onload = (e) =&gt; {
      onChange({
        name: file.name,
        type: file.type,
        size: file.size,
        content: e.target?.result,
      });
    };
    reader.readAsDataURL(file);
    return false; // Prevent automatic upload
  };

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Upload beforeUpload={handleUpload} maxCount={1} disabled={disabled} className=&quot;w-full&quot;&gt;
        &lt;Button
          icon={&lt;PlusOutlined /&gt;}
          disabled={disabled}
          className=&quot;w-full bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600&quot;
        &gt;
          {value ? 'Replace File' : 'Upload File'}
        &lt;/Button&gt;
      &lt;/Upload&gt;
      {value &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
          Selected: {value.name} ({Math.round(value.size / 1024)}KB)
        &lt;/div&gt;
      )}
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 10. JSON Property Renderer
export const JsonRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const [jsonString, setJsonString] = useState(() =&gt; {
    try {
      return typeof value === 'string' ? value : JSON.stringify(value, null, 2);
    } catch {
      return value || '';
    }
  });

  const [isValid, setIsValid] = useState(true);

  const handleChange = useCallback(
    (newValue: string) =&gt; {
      setJsonString(newValue);

      try {
        const parsed = JSON.parse(newValue);
        setIsValid(true);
        onChange(parsed);
      } catch (_error) {
        setIsValid(false);
        // Still update the string value for live editing
        onChange(newValue);
      }
    },
    [onChange]
  );

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;flex justify-between items-center&quot;&gt;
        &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
        &lt;Tag color={isValid ? 'green' : 'red'}&gt;{isValid ? 'Valid JSON' : 'Invalid JSON'}&lt;/Tag&gt;
      &lt;/div&gt;
      &lt;TextArea
        value={jsonString}
        onChange={(e) =&gt; handleChange(e.target.value)}
        placeholder={property.placeholder || 'Enter valid JSON'}
        disabled={disabled}
        rows={6}
        className={cn(
          'bg-gray-800 border-gray-600 text-gray-200 font-mono',
          !isValid &amp;&amp; 'border-red-500'
        )}
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 11. Expression Property Renderer
export const ExpressionRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  context,
  disabled,
}) =&gt; {
  const [showExpressionMode, setShowExpressionMode] = useState(
    ExpressionUtils.hasExpressions(value)
  );

  const evaluator = useMemo(() =&gt; (context ? new ExpressionEvaluator(context) : null), [context]);

  const [previewValue, setPreviewValue] = useState&lt;any&gt;(null);

  const handleEvaluatePreview = useCallback(() =&gt; {
    if (evaluator &amp;&amp; ExpressionUtils.hasExpressions(value)) {
      try {
        const result = evaluator.evaluate(value);
        setPreviewValue(result);
      } catch (error) {
        if (error instanceof Error) {
          setPreviewValue(`Error: ${error.message}`);
        } else {
          setPreviewValue(`Error: ${String(error)}`);
        }
      }
    }
  }, [evaluator, value]);

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;flex justify-between items-center&quot;&gt;
        &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
        &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
          &lt;Button
            size=&quot;small&quot;
            type={showExpressionMode ? 'primary' : 'default'}
            onClick={() =&gt; setShowExpressionMode(!showExpressionMode)}
            className=&quot;text-xs&quot;
          &gt;
            {`{{}}`}
          &lt;/Button&gt;
          {showExpressionMode &amp;&amp; (
            &lt;Button
              size=&quot;small&quot;
              onClick={handleEvaluatePreview}
              disabled={!context}
              className=&quot;text-xs&quot;
            &gt;
              Preview
            &lt;/Button&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;

      {showExpressionMode ? (
        &lt;TextArea
          value={value || ''}
          onChange={(e) =&gt; onChange(e.target.value)}
          placeholder=&quot;{{ $json.field }}&quot;
          disabled={disabled}
          rows={3}
          className=&quot;bg-gray-800 border-gray-600 text-gray-200 font-mono&quot;
        /&gt;
      ) : (
        &lt;Input
          value={value || ''}
          onChange={(e) =&gt; onChange(e.target.value)}
          placeholder={property.placeholder}
          disabled={disabled}
          className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
        /&gt;
      )}

      {previewValue !== null &amp;&amp; (
        &lt;div className=&quot;text-xs bg-gray-700 p-2 rounded border border-gray-600&quot;&gt;
          &lt;div className=&quot;text-gray-400 mb-1&quot;&gt;Preview:&lt;/div&gt;
          &lt;div className=&quot;text-gray-200 font-mono&quot;&gt;
            {typeof previewValue === 'object'
              ? JSON.stringify(previewValue, null, 2)
              : String(previewValue)}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 12. Resource Locator Property Renderer
export const ResourceLocatorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const [mode, setMode] = useState(value?.mode || 'list');
  const currentValue = value || { mode: 'list', value: '' };

  const handleModeChange = (newMode: string) =&gt; {
    setMode(newMode);
    onChange({ ...currentValue, mode: newMode, value: '' });
  };

  const handleValueChange = (newValue: any) =&gt; {
    onChange({ ...currentValue, value: newValue });
  };

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;flex space-x-2&quot;&gt;
        &lt;Select
          value={mode}
          onChange={handleModeChange}
          disabled={disabled}
          className=&quot;w-32 [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        &gt;
          &lt;Option value=&quot;list&quot;&gt;List&lt;/Option&gt;
          &lt;Option value=&quot;id&quot;&gt;ID&lt;/Option&gt;
          &lt;Option value=&quot;url&quot;&gt;URL&lt;/Option&gt;
        &lt;/Select&gt;

        {mode === 'list' ? (
          &lt;Select
            value={currentValue.value}
            onChange={handleValueChange}
            placeholder=&quot;Select resource&quot;
            disabled={disabled}
            className=&quot;flex-1 [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
            showSearch
          &gt;
            {/* Dynamic options based on resource type */}
            &lt;Option value=&quot;resource1&quot;&gt;Resource 1&lt;/Option&gt;
            &lt;Option value=&quot;resource2&quot;&gt;Resource 2&lt;/Option&gt;
          &lt;/Select&gt;
        ) : (
          &lt;Input
            value={currentValue.value}
            onChange={(e) =&gt; handleValueChange(e.target.value)}
            placeholder={mode === 'id' ? 'Enter resource ID' : 'Enter resource URL'}
            disabled={disabled}
            className=&quot;flex-1 bg-gray-800 border-gray-600 text-gray-200&quot;
          /&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 13. Assignment Collection Property Renderer
export const AssignmentCollectionRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
}) =&gt; {
  const assignments = value?.values || [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      {/* Import the AdvancedAssignmentCollection component we created */}
      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;text-sm text-gray-400 mb-2&quot;&gt;
          Assignment collection component would be rendered here
        &lt;/div&gt;
        &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Current assignments: {assignments.length}&lt;/div&gt;
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 14. Resource Mapper Property Renderer
export const ResourceMapperRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  disabled,
}) =&gt; {
  const mappings = value?.mappings || [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Field Mappings&lt;/div&gt;
          &lt;Button
            size=&quot;small&quot;
            icon={&lt;PlusOutlined /&gt;}
            disabled={disabled}
            className=&quot;bg-gray-700 border-gray-600 text-gray-200&quot;
          &gt;
            Add Mapping
          &lt;/Button&gt;
        &lt;/div&gt;

        {mappings.length === 0 ? (
          &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;No field mappings configured&lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {mappings.map((mapping: any, index: number) =&gt; (
              &lt;div key={index} className=&quot;flex items-center space-x-2 p-2 bg-gray-700 rounded&quot;&gt;
                &lt;Input
                  placeholder=&quot;Source field&quot;
                  value={mapping.source}
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;div className=&quot;text-gray-400&quot;&gt;→&lt;/div&gt;
                &lt;Input
                  placeholder=&quot;Target field&quot;
                  value={mapping.target}
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;Button
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 15. Filter Property Renderer
export const FilterRenderer: React.FC&lt;PropertyRendererProps&gt; = ({ property, value, disabled }) =&gt; {
  const conditions = value?.conditions || [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Filter Conditions&lt;/div&gt;
          &lt;Button
            size=&quot;small&quot;
            icon={&lt;FilterOutlined /&gt;}
            disabled={disabled}
            className=&quot;bg-gray-700 border-gray-600 text-gray-200&quot;
          &gt;
            Add Condition
          &lt;/Button&gt;
        &lt;/div&gt;

        {conditions.length === 0 ? (
          &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;No filter conditions set&lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {conditions.map((condition: any, index: number) =&gt; (
              &lt;div key={index} className=&quot;flex items-center space-x-2 p-2 bg-gray-700 rounded&quot;&gt;
                &lt;Select value={condition.field} className=&quot;w-32&quot;&gt;
                  &lt;Option value=&quot;field1&quot;&gt;Field 1&lt;/Option&gt;
                  &lt;Option value=&quot;field2&quot;&gt;Field 2&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Select value={condition.operator} className=&quot;w-24&quot;&gt;
                  &lt;Option value=&quot;equals&quot;&gt;Equals&lt;/Option&gt;
                  &lt;Option value=&quot;contains&quot;&gt;Contains&lt;/Option&gt;
                  &lt;Option value=&quot;gt&quot;&gt;Greater than&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Input
                  value={condition.value}
                  placeholder=&quot;Value&quot;
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;Button
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 16-22. Additional Complex Property Renderers
export const CurlImportRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;TextArea
        value={value || ''}
        onChange={(e) =&gt; onChange(e.target.value)}
        placeholder=&quot;curl -X GET https://api.example.com/data&quot;
        rows={4}
        disabled={disabled}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200 font-mono&quot;
      /&gt;
      &lt;Button size=&quot;small&quot; disabled={!value || disabled}&gt;
        Import from cURL
      &lt;/Button&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const WorkflowSelectorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder=&quot;Select workflow&quot;
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
      &gt;
        &lt;Option value=&quot;workflow1&quot;&gt;Sample Workflow 1&lt;/Option&gt;
        &lt;Option value=&quot;workflow2&quot;&gt;Sample Workflow 2&lt;/Option&gt;
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const NodeSelectorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder=&quot;Select node&quot;
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
      &gt;
        &lt;Option value=&quot;node1&quot;&gt;Transform Node&lt;/Option&gt;
        &lt;Option value=&quot;node2&quot;&gt;HTTP Request Node&lt;/Option&gt;
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const CredentialsSelectRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div className=&quot;flex space-x-2&quot;&gt;
        &lt;Select
          value={value}
          onChange={onChange}
          placeholder=&quot;Select credentials&quot;
          disabled={disabled}
          className=&quot;flex-1 [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
          showSearch
        &gt;
          &lt;Option value=&quot;cred1&quot;&gt;API Key Credentials&lt;/Option&gt;
          &lt;Option value=&quot;cred2&quot;&gt;OAuth2 Credentials&lt;/Option&gt;
        &lt;/Select&gt;
        &lt;Button
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          disabled={disabled}
          className=&quot;bg-gray-700 border-gray-600 text-gray-200&quot;
        &gt;
          New
        &lt;/Button&gt;
      &lt;/div&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const HiddenRenderer: React.FC&lt;PropertyRendererProps&gt; = () =&gt; null;

// Additional utility renderers for complex types
export const CollectionRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  disabled,
}) =&gt; {
  const items = Array.isArray(value) ? value : [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Collapse&gt;
        &lt;Panel header={`${items.length} items configured`} key=&quot;1&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            {items.map((_item: any, index: number) =&gt; (
              &lt;div key={index} className=&quot;p-2 bg-gray-700 rounded&quot;&gt;
                &lt;div className=&quot;text-sm text-gray-200&quot;&gt;Item {index + 1}&lt;/div&gt;
                {/* Render collection item properties */}
              &lt;/div&gt;
            ))}
            &lt;Button
              size=&quot;small&quot;
              icon={&lt;PlusOutlined /&gt;}
              disabled={disabled}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyField.tsx (Line 108:6 - Line 448:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 109:6 - Line 451:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn242" onclick="toggleCodeBlock('cloneGroup242', 'expandBtn242', 'collapseBtn242')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn242" onclick="toggleCodeBlock('cloneGroup242', 'expandBtn242', 'collapseBtn242')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup242"><code class="language-javascript text-sm text-gray-800">={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={String(cred.value)} value={cred.value}&gt;
            {cred.name}
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
    );
  };

  return (
    &lt;div style={{ marginBottom: theme.spacing.md }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/NodeHandle.tsx (Line 116:5 - Line 173:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/nodehandle/NodeHandle.tsx (Line 121:5 - Line 178:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn244" onclick="toggleCodeBlock('cloneGroup244', 'expandBtn244', 'collapseBtn244')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn244" onclick="toggleCodeBlock('cloneGroup244', 'expandBtn244', 'collapseBtn244')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup244"><code class="language-javascript text-sm text-gray-800">={handle.type}
      position={getPositionValue()}
      id={handle.id}
      style={getHandleStyles()}
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
      onClick={handleConnection}
    /&gt;
  );

  if (showTooltip &amp;&amp; handle.label) {
    return (
      &lt;Tooltip
        title={handle.label}
        placement={handle.position === 'left' ? 'left' : 'right'}
        mouseEnterDelay={0.5}
      &gt;
        {renderHandle()}
      &lt;/Tooltip&gt;
    );
  }

  return renderHandle();
};

/**
 * NodeHandleGroup Component
 * Manages multiple handles for a single node
 */
interface NodeHandleGroupProps {
  handles: CustomHandle[];
  nodeId: string;
  theme?: NodeTheme;
  connections?: Record&lt;string, boolean&gt;;
  onConnect?: (handleId: string, nodeId: string) =&gt; void;
  onDisconnect?: (handleId: string, nodeId: string) =&gt; void;
}

export const NodeHandleGroup: React.FC&lt;NodeHandleGroupProps&gt; = ({
  handles,
  nodeId,
  theme,
  connections = {},
  onConnect,
  onDisconnect,
}) =&gt; {
  if (!handles || handles.length === 0) return null;

  return (
    &lt;&gt;
      {handles.map((handle) =&gt; (
        &lt;NodeHandleComponent
          key={handle.id}
          handle={handle}
          theme={theme}
          connected={connections[handle.id] || false}
          onConnect={onConnect ? (handleId) =&gt; onConnect(handleId, nodeId) : undefined}
          onDisconnect={onDisconnect ? (handleId) =&gt; onDisconnect(handleId, nodeId) : undefined}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/NodeBadge.tsx (Line 98:6 - Line 132:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/nodebadge/NodeBadge.tsx (Line 102:6 - Line 136:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn246" onclick="toggleCodeBlock('cloneGroup246', 'expandBtn246', 'collapseBtn246')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn246" onclick="toggleCodeBlock('cloneGroup246', 'expandBtn246', 'collapseBtn246')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup246"><code class="language-javascript text-sm text-gray-800">={badgeStyle}&gt;
        {badge.icon &amp;&amp; &lt;span style={{ marginRight: badge.text ? '2px' : '0' }}&gt;{badge.icon}&lt;/span&gt;}
        {badge.text &amp;&amp; &lt;span&gt;{badge.text}&lt;/span&gt;}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

/**
 * NodeBadgeGroup Component
 * Manages multiple badges for a single node
 */
interface NodeBadgeGroupProps {
  badges: NodeBadge[];
  nodeId: string;
  theme?: NodeTheme;
  onBadgeClick?: (badgeId: string, nodeId: string) =&gt; void;
}

export const NodeBadgeGroup: React.FC&lt;NodeBadgeGroupProps&gt; = ({
  badges,
  nodeId,
  theme,
  onBadgeClick,
}) =&gt; {
  if (!badges || badges.length === 0) return null;

  return (
    &lt;&gt;
      {badges.map((badge) =&gt; (
        &lt;NodeBadgeComponent
          key={badge.id}
          badge={badge}
          theme={theme}
          onClick={onBadgeClick ? (badgeId) =&gt; onBadgeClick(badgeId, nodeId) : undefined}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedTransformPropertyPanel.tsx (Line 148:6 - Line 449:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/enhancedtransformpropertypanel/EnhancedTransformPropertyPanel.tsx (Line 151:6 - Line 452:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn248" onclick="toggleCodeBlock('cloneGroup248', 'expandBtn248', 'collapseBtn248')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn248" onclick="toggleCodeBlock('cloneGroup248', 'expandBtn248', 'collapseBtn248')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup248"><code class="language-javascript text-sm text-gray-800">={{ width: '100%' }} size=&quot;large&quot;&gt;
            {/* Input Field Inclusion */}
            &lt;Card size=&quot;small&quot; title=&quot;Input Field Handling&quot;&gt;
              &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                &lt;div&gt;
                  &lt;Text strong&gt;Include Input Fields&lt;/Text&gt;
                  &lt;br /&gt;
                  &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                    Choose which input fields to include in the output
                  &lt;/Text&gt;
                  &lt;Select
                    value={includeInputFields}
                    onChange={(value) =&gt; updateParameter('includeInputFields', value)}
                    style={{ width: '100%', marginTop: '8px' }}
                    disabled={disabled}
                  &gt;
                    &lt;Option value=&quot;all&quot;&gt;Include All Input Fields&lt;/Option&gt;
                    &lt;Option value=&quot;none&quot;&gt;Include No Input Fields&lt;/Option&gt;
                    &lt;Option value=&quot;selected&quot;&gt;Include Selected Input Fields&lt;/Option&gt;
                    &lt;Option value=&quot;except&quot;&gt;Include All Except Selected&lt;/Option&gt;
                  &lt;/Select&gt;
                &lt;/div&gt;

                {/* Conditional field selection */}
                {(includeInputFields === 'selected' || includeInputFields === 'except') &amp;&amp; (
                  &lt;div&gt;
                    &lt;Text strong&gt;Selected Input Fields&lt;/Text&gt;
                    &lt;br /&gt;
                    &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                      Comma-separated list of field names
                    &lt;/Text&gt;
                    &lt;Input
                      placeholder=&quot;field1, field2, field3&quot;
                      value={selectedInputFields}
                      onChange={(e) =&gt; updateParameter('selectedInputFields', e.target.value)}
                      style={{ marginTop: '8px' }}
                      disabled={disabled}
                    /&gt;
                    {inputFieldSuggestions.length &gt; 0 &amp;&amp; (
                      &lt;div style={{ marginTop: '8px' }}&gt;
                        &lt;Text type=&quot;secondary&quot; style={{ fontSize: '11px' }}&gt;
                          Available fields:{' '}
                        &lt;/Text&gt;
                        {inputFieldSuggestions.map((field: string) =&gt; (
                          &lt;Tag
                            key={field}
                            style={{ cursor: 'pointer', margin: '2px' }}
                            onClick={() =&gt; {
                              const currentFields = selectedInputFields
                                .split(',')
                                .map((f: string) =&gt; f.trim())
                                .filter((f: string) =&gt; f);
                              if (!currentFields.includes(field)) {
                                const newFields = [...currentFields, field].join(', ');
                                updateParameter('selectedInputFields', newFields);
                              }
                            }}
                          &gt;
                            {field}
                          &lt;/Tag&gt;
                        ))}
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;
                )}
              &lt;/Space&gt;
            &lt;/Card&gt;

            {/* Field Assignments */}
            &lt;Card size=&quot;small&quot; title=&quot;Field Assignments&quot;&gt;
              &lt;TransformAssignmentCollection
                assignments={assignments}
                onChange={(newAssignments) =&gt;
                  updateNestedParameter('assignments.values', newAssignments)
                }
                inputData={inputData}
                disabled={disabled}
              /&gt;
            &lt;/Card&gt;
          &lt;/Space&gt;
        );

      case 'json':
        return (
          &lt;Card size=&quot;small&quot; title=&quot;JSON Object Definition&quot;&gt;
            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;div&gt;
                &lt;Text strong&gt;JSON Object&lt;/Text&gt;
                &lt;br /&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                  Define the output object structure using JSON with expressions
                &lt;/Text&gt;
              &lt;/div&gt;
              &lt;TextArea
                value={jsonObject}
                onChange={(e) =&gt; updateParameter('jsonObject', e.target.value)}
                rows={8}
                placeholder='{\n  &quot;newField&quot;: &quot;{{ $json.existingField }}&quot;,\n  &quot;computed&quot;: &quot;{{ $json.value1 + $json.value2 }}&quot;\n}'
                disabled={disabled}
                style={{
                  fontFamily: 'Monaco, Consolas, monospace',
                  fontSize: '12px',
                }}
              /&gt;
              &lt;Alert
                message=&quot;Expression Support&quot;
                description=&quot;Use {{ expression }} syntax to access input data and perform calculations&quot;
                type=&quot;info&quot;
                showIcon
                icon={&lt;BulbOutlined /&gt;}
              /&gt;
            &lt;/Space&gt;
          &lt;/Card&gt;
        );

      default:
        return null;
    }
  };

  // Render advanced options
  const renderAdvancedOptions = () =&gt; (
    &lt;Collapse ghost&gt;
      &lt;Panel header=&quot;Advanced Options&quot; key=&quot;advanced&quot;&gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
          &lt;Row gutter={16}&gt;
            &lt;Col span={12}&gt;
              &lt;div&gt;
                &lt;Text strong&gt;Dot Notation&lt;/Text&gt;
                &lt;br /&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                  Access nested object properties
                &lt;/Text&gt;
                &lt;br /&gt;
                &lt;Switch
                  checked={options.dotNotation ?? true}
                  onChange={(value) =&gt; updateNestedParameter('options.dotNotation', value)}
                  disabled={disabled}
                  style={{ marginTop: '4px' }}
                /&gt;
              &lt;/div&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;div&gt;
                &lt;Text strong&gt;Ignore Conversion Errors&lt;/Text&gt;
                &lt;br /&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                  Continue on type conversion failures
                &lt;/Text&gt;
                &lt;br /&gt;
                &lt;Switch
                  checked={options.ignoreConversionErrors ?? false}
                  onChange={(value) =&gt;
                    updateNestedParameter('options.ignoreConversionErrors', value)
                  }
                  disabled={disabled}
                  style={{ marginTop: '4px' }}
                /&gt;
              &lt;/div&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {mode === 'manual' &amp;&amp; (
            &lt;div&gt;
              &lt;Text strong&gt;Keep Only Set Fields&lt;/Text&gt;
              &lt;br /&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                Only include explicitly set fields (overrides input field inclusion)
              &lt;/Text&gt;
              &lt;br /&gt;
              &lt;Switch
                checked={options.keepOnlySet ?? false}
                onChange={(value) =&gt; updateNestedParameter('options.keepOnlySet', value)}
                disabled={disabled}
                style={{ marginTop: '4px' }}
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/Space&gt;
      &lt;/Panel&gt;
    &lt;/Collapse&gt;
  );

  return (
    &lt;div
      className=&quot;enhanced-transform-property-panel&quot;
      style={{ height: '100%', display: 'flex', flexDirection: 'column' }}
    &gt;
      &lt;style&gt;{`
        .enhanced-transform-property-panel {
          background: #fff;
        }
        .ant-tabs-content-holder {
          overflow-y: auto;
          flex: 1;
        }
      `}&lt;/style&gt;

      {/* Header */}
      &lt;div style={{ padding: '16px 16px 0', borderBottom: '1px solid #f0f0f0' }}&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginBottom: '16px',
          }}
        &gt;
          &lt;div&gt;
            &lt;Title level={4} style={{ margin: 0 }}&gt;
              Transform Configuration
            &lt;/Title&gt;
            &lt;Text type=&quot;secondary&quot;&gt;Enhanced field transformation with type validation&lt;/Text&gt;
          &lt;/div&gt;
          {onTest &amp;&amp; (
            &lt;Button
              type=&quot;primary&quot;
              size=&quot;small&quot;
              onClick={onTest}
              disabled={disabled || validationErrors.length &gt; 0}
            &gt;
              Test
            &lt;/Button&gt;
          )}
        &lt;/div&gt;

        {/* Mode Selection */}
        &lt;div style={{ marginBottom: '16px' }}&gt;
          &lt;Text strong&gt;Transformation Mode&lt;/Text&gt;
          &lt;Select
            value={mode}
            onChange={(value) =&gt; updateParameter('mode', value)}
            style={{ width: '100%', marginTop: '8px' }}
            disabled={disabled}
          &gt;
            &lt;Option value=&quot;manual&quot;&gt;
              &lt;div&gt;
                &lt;div&gt;Manual Field Assignment&lt;/div&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '11px' }}&gt;
                  Configure individual field transformations with type validation
                &lt;/Text&gt;
              &lt;/div&gt;
            &lt;/Option&gt;
            &lt;Option value=&quot;json&quot;&gt;
              &lt;div&gt;
                &lt;div&gt;JSON Object&lt;/div&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '11px' }}&gt;
                  Define transformations using a JSON object with expressions
                &lt;/Text&gt;
              &lt;/div&gt;
            &lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Validation Errors */}
      {validationErrors.length &gt; 0 &amp;&amp; (
        &lt;div style={{ padding: '0 16px' }}&gt;
          &lt;Alert
            message=&quot;Configuration Errors&quot;
            description={
              &lt;ul style={{ margin: '8px 0', paddingLeft: '20px' }}&gt;
                {validationErrors.map((error: string, index: number) =&gt; (
                  &lt;li key={index} style={{ fontSize: '12px' }}&gt;
                    {error}
                  &lt;/li&gt;
                ))}
              &lt;/ul&gt;
            }
            type=&quot;error&quot;
            showIcon
            style={{ marginTop: '16px' }}
          /&gt;
        &lt;/div&gt;
      )}

      {/* Main Configuration */}
      &lt;div style={{ padding: '16px', flex: 1, overflowY: 'auto' }}&gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;large&quot;&gt;
          {renderModeConfiguration()}
          {renderAdvancedOptions()}
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Footer with stats */}
      &lt;div
        style={{
          padding: '12px 16px',
          borderTop: '1px solid #f0f0f0',
          backgroundColor: '#fafafa',
          fontSize: '12px',
          color: '#8c8c8c',
        }}
      &gt;
        &lt;Row&gt;
          &lt;Col span={8}&gt;
            &lt;Text type=&quot;secondary&quot;&gt;Mode: {mode}&lt;/Text&gt;
          &lt;/Col&gt;
          &lt;Col span={8}&gt;
            {mode === 'manual' &amp;&amp; &lt;Text type=&quot;secondary&quot;&gt;Assignments: {assignments.length}&lt;/Text&gt;}
          &lt;/Col&gt;
          &lt;Col span={8} style={{ textAlign: 'right' }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedNodeToolbar.tsx (Line 296:6 - Line 355:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 298:6 - Line 357:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn250" onclick="toggleCodeBlock('cloneGroup250', 'expandBtn250', 'collapseBtn250')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn250" onclick="toggleCodeBlock('cloneGroup250', 'expandBtn250', 'collapseBtn250')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup250"><code class="language-javascript text-sm text-gray-800">={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/ConditionalPropertyRenderer.tsx (Line 390:10 - Line 461:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/conditionalpropertyrenderer/ConditionalPropertyRenderer.tsx (Line 392:10 - Line 463:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn252" onclick="toggleCodeBlock('cloneGroup252', 'expandBtn252', 'collapseBtn252')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn252" onclick="toggleCodeBlock('cloneGroup252', 'expandBtn252', 'collapseBtn252')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup252"><code class="language-javascript text-sm text-gray-800">={`property-field ${displayState.disabled ? 'opacity-50' : ''}`}&gt;
      &lt;PropertyRenderer
        property={{
          ...property,
          required: displayState.required,
        }}
        value={value}
        onChange={handleChange}
        disabled={disabled || displayState.disabled}
        context={context}
        nodeValues={nodeValues}
      /&gt;
    &lt;/div&gt;
  );
};

// Property Group Renderer with Conditional Logic
export interface PropertyGroupRendererProps {
  properties: Array&lt;INodeProperty &amp; { displayOptions?: EnhancedDisplayOptions }&gt;;
  values: Record&lt;string, any&gt;;
  onChange: (field: string, value: any) =&gt; void;
  evaluationContext?: any;
  disabled?: boolean;
  context?: any;
}

export const PropertyGroupRenderer: React.FC&lt;PropertyGroupRendererProps&gt; = ({
  properties,
  values,
  onChange,
  disabled = false,
  context,
}) =&gt; {
  // Dependency tracker
  const dependencyTracker = useMemo(() =&gt; {
    const tracker = new PropertyDependencyTracker();

    // Register all dependencies
    properties.forEach((property) =&gt; {
      if (property.displayOptions) {
        tracker.extractDependencies(property.name, property.displayOptions);
      }
    });

    return tracker;
  }, [properties]);

  // Handle field changes with dependency re-evaluation
  const handleFieldChange = useCallback(
    (fieldName: string, value: any) =&gt; {
      onChange(fieldName, value);

      // Find and trigger re-evaluation of dependent properties
      const dependentProperties = dependencyTracker.getDependents(fieldName);
      if (dependentProperties.length &gt; 0) {
        // The parent component should handle this by updating its state
      }
    },
    [onChange, dependencyTracker]
  );

  return (
    &lt;div className=&quot;property-group space-y-4&quot;&gt;
      {properties.map((property) =&gt; (
        &lt;ConditionalPropertyRenderer
          key={property.name}
          property={property}
          value={values[property.name]}
          onChange={(value) =&gt; handleFieldChange(property.name, value)}
          nodeValues={values}
          disabled={disabled}
          context={context}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/bodies/DatabaseNodeBody.tsx (Line 59:90 - Line 92:5), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 69:89 - Line 121:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn254" onclick="toggleCodeBlock('cloneGroup254', 'expandBtn254', 'collapseBtn254')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn254" onclick="toggleCodeBlock('cloneGroup254', 'expandBtn254', 'collapseBtn254')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup254"><code class="language-javascript text-sm text-gray-800"> : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* Database Icon */}
            &lt;NodeIcon icon={icon</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 121:6 - Line 144:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/bodies/DatabaseNodeBody.tsx (Line 74:2 - Line 95:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn256" onclick="toggleCodeBlock('cloneGroup256', 'expandBtn256', 'collapseBtn256')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn256" onclick="toggleCodeBlock('cloneGroup256', 'expandBtn256', 'collapseBtn256')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup256"><code class="language-javascript text-sm text-gray-800">,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* AI Agent Icon */}
            &lt;NodeIcon icon={icon} displayName={displayName} size=&quot;md&quot; /&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={(</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 139:12 - Line 205:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 98:2 - Line 183:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn257" onclick="toggleCodeBlock('cloneGroup257', 'expandBtn257', 'collapseBtn257')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn257" onclick="toggleCodeBlock('cloneGroup257', 'expandBtn257', 'collapseBtn257')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup257"><code class="language-javascript text-sm text-gray-800">} size=&quot;md&quot; /&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/WorkflowTester.tsx (Line 152:4 - Line 388:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/workflowtester/WorkflowTester.tsx (Line 154:4 - Line 390:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn262" onclick="toggleCodeBlock('cloneGroup262', 'expandBtn262', 'collapseBtn262')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn262" onclick="toggleCodeBlock('cloneGroup262', 'expandBtn262', 'collapseBtn262')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup262"><code class="language-javascript text-sm text-gray-800">={index} className=&quot;text-red-600&quot;&gt;
                      • {error}
                    &lt;/li&gt;
                  ))}
                &lt;/ul&gt;
              &lt;/div&gt;
            )}
            {result.warnings.length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;strong&gt;Warnings:&lt;/strong&gt;
                &lt;ul className=&quot;mt-1&quot;&gt;
                  {result.warnings.map((warning: string, index: number) =&gt; (
                    &lt;li key={index} className=&quot;text-orange-600&quot;&gt;
                      • {warning}
                    &lt;/li&gt;
                  ))}
                &lt;/ul&gt;
              &lt;/div&gt;
            )}
            {result.estimatedDuration &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;strong&gt;Estimated Duration:&lt;/strong&gt; {Math.round(result.estimatedDuration / 1000)}s
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        }
      /&gt;
    &lt;/div&gt;
  );

  const renderExecutionResult = (exec: WorkflowExecution) =&gt; (
    &lt;div&gt;
      &lt;div className=&quot;mb-4&quot;&gt;
        &lt;Alert
          type={
            exec.status === 'completed' ? 'success' : exec.status === 'failed' ? 'error' : 'info'
          }
          message={`Execution ${exec.status}`}
          description={
            &lt;div&gt;
              &lt;div&gt;
                Started: {exec.startedAt ? new Date(exec.startedAt).toLocaleString() : 'N/A'}
              &lt;/div&gt;
              {exec.completedAt &amp;&amp; (
                &lt;div&gt;Completed: {new Date(exec.completedAt).toLocaleString()}&lt;/div&gt;
              )}
              {exec.duration &amp;&amp; &lt;div&gt;Duration: {Math.round(exec.duration / 1000)}s&lt;/div&gt;}
              &lt;div&gt;
                Progress: {exec.progress?.completedNodes?.length || 0} /{' '}
                {exec.progress?.totalNodes || 0} nodes
              &lt;/div&gt;
            &lt;/div&gt;
          }
        /&gt;
      &lt;/div&gt;

      &lt;Card title=&quot;Node Execution Timeline&quot; size=&quot;small&quot;&gt;
        &lt;Timeline&gt;
          {exec.results?.map((result) =&gt; (
            &lt;Timeline.Item
              key={result.nodeId}
              color={
                result.status === 'success' ? 'green' : result.status === 'error' ? 'red' : 'gray'
              }
              dot={
                result.status === 'success' ? (
                  &lt;CheckCircleOutlined /&gt;
                ) : result.status === 'error' ? (
                  &lt;ExclamationCircleOutlined /&gt;
                ) : undefined
              }
            &gt;
              &lt;div&gt;
                &lt;Space&gt;
                  &lt;strong&gt;{result.nodeName}&lt;/strong&gt;
                  &lt;Tag color={result.status === 'success' ? 'green' : 'red'}&gt;{result.status}&lt;/Tag&gt;
                  &lt;span className=&quot;text-gray-500&quot;&gt;{Math.round(result.duration)}ms&lt;/span&gt;
                &lt;/Space&gt;

                {result.error &amp;&amp; &lt;div className=&quot;text-red-500 text-sm mt-1&quot;&gt;{result.error}&lt;/div&gt;}

                {result.output &amp;&amp; Object.keys(result.output).length &gt; 0 &amp;&amp; (
                  &lt;details className=&quot;mt-1&quot;&gt;
                    &lt;summary className=&quot;text-blue-500 cursor-pointer text-sm&quot;&gt;
                      View Output ({Object.keys(result.output).length} fields)
                    &lt;/summary&gt;
                    &lt;pre className=&quot;bg-gray-100 p-2 rounded mt-1 text-xs overflow-auto max-h-32&quot;&gt;
                      {JSON.stringify(result.output, null, 2)}
                    &lt;/pre&gt;
                  &lt;/details&gt;
                )}
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          ))}

          {exec.progress?.currentNodeId &amp;&amp; exec.status === 'running' &amp;&amp; (
            &lt;Timeline.Item color=&quot;blue&quot; dot={&lt;Spin size=&quot;small&quot; /&gt;}&gt;
              &lt;div&gt;
                &lt;strong&gt;Currently executing...&lt;/strong&gt;
                &lt;div className=&quot;text-gray-500 text-sm&quot;&gt;Node: {exec.progress?.currentNodeId}&lt;/div&gt;
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          )}
        &lt;/Timeline&gt;
      &lt;/Card&gt;

      {exec.error &amp;&amp; (
        &lt;Card title=&quot;Execution Error&quot; className=&quot;mt-4 border-red-200&quot;&gt;
          &lt;Alert
            type=&quot;error&quot;
            message={exec.error.message}
            description={
              &lt;div&gt;
                {exec.error.nodeId &amp;&amp; (
                  &lt;div&gt;
                    Failed at node: &lt;code&gt;{exec.error.nodeId}&lt;/code&gt;
                  &lt;/div&gt;
                )}
                {exec.error.code &amp;&amp; (
                  &lt;div&gt;
                    Error code: &lt;code&gt;{exec.error.code}&lt;/code&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            }
          /&gt;
        &lt;/Card&gt;
      )}
    &lt;/div&gt;
  );

  const currentExecution = execution || testResult?.execution;

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;BugOutlined /&gt;
          Workflow Tester
          {!isConnected &amp;&amp; executionId &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;Disconnected&lt;/Tag&gt;}
        &lt;/Space&gt;
      }
      open={true}
      onCancel={onClose}
      width={800}
      footer={[
        &lt;Button key=&quot;close&quot; onClick={onClose}&gt;
          Close
        &lt;/Button&gt;,
        currentExecution?.status === 'running' ? (
          &lt;Button key=&quot;stop&quot; danger onClick={stopTest}&gt;
            Stop Test
          &lt;/Button&gt;
        ) : (
          &lt;Button
            key=&quot;test&quot;
            type=&quot;primary&quot;
            icon={&lt;PlayCircleOutlined /&gt;}
            loading={testing}
            onClick={runTest}
          &gt;
            Run Test
          &lt;/Button&gt;
        ),
      ]}
    &gt;
      &lt;div className=&quot;workflow-tester&quot;&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
          &lt;Steps
            current={testMode === 'validate' ? 0 : testMode === 'dry_run' ? 1 : 2}
            size=&quot;small&quot;
          &gt;
            &lt;Step
              title=&quot;Validate&quot;
              description=&quot;Check workflow structure&quot;
              onClick={() =&gt; setTestMode('validate')}
              style={{ cursor: 'pointer' }}
            /&gt;
            &lt;Step
              title=&quot;Dry Run&quot;
              description=&quot;Simulate execution&quot;
              onClick={() =&gt; setTestMode('dry_run')}
              style={{ cursor: 'pointer' }}
            /&gt;
            &lt;Step
              title=&quot;Full Test&quot;
              description=&quot;Real execution&quot;
              onClick={() =&gt; setTestMode('full_test')}
              style={{ cursor: 'pointer' }}
            /&gt;
          &lt;/Steps&gt;
        &lt;/div&gt;

        {testMode === 'full_test' &amp;&amp; (
          &lt;Card title=&quot;Test Configuration&quot; size=&quot;small&quot; className=&quot;mb-4&quot;&gt;
            &lt;Form layout=&quot;vertical&quot;&gt;
              &lt;Form.Item
                label=&quot;Trigger Data (JSON)&quot;
                help=&quot;Optional test data to trigger the workflow&quot;
              &gt;
                &lt;TextArea
                  rows={4}
                  placeholder={`{
  &quot;subject&quot;: &quot;Test email&quot;,
  &quot;from&quot;: &quot;test@example.com&quot;,
  &quot;body&quot;: &quot;This is a test customer support email about my order status.&quot;
}`}
                  value={triggerData}
                  onChange={(e) =&gt; setTriggerData(e.target.value)}
                /&gt;
              &lt;/Form.Item&gt;
            &lt;/Form&gt;
          &lt;/Card&gt;
        )}

        &lt;Card title=&quot;Test Results&quot; size=&quot;small&quot; extra={testing &amp;&amp; &lt;Spin size=&quot;small&quot; /&gt;}&gt;
          {!testResult &amp;&amp; !testing &amp;&amp; (
            &lt;div className=&quot;text-gray-500 text-center py-8&quot;&gt;
              Configure your test settings and click &quot;Run Test&quot; to begin
            &lt;/div&gt;
          )}

          {testing &amp;&amp; (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;Spin size=&quot;large&quot; /&gt;
              &lt;div className=&quot;mt-2&quot;&gt;
                {testMode === 'validate'
                  ? 'Validating workflow...'
                  : testMode === 'dry_run'
                    ? 'Running simulation...'
                    : 'Executing workflow...'}
              &lt;/div&gt;
            &lt;/div&gt;
          )}

          {testResult &amp;&amp; testResult.type === 'error' &amp;&amp; (
            &lt;Alert type=&quot;error&quot; message=&quot;Test Failed&quot; description={testResult.error}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/WorkflowTemplatesPanel.tsx (Line 208:4 - Line 670:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/workflowtemplatespanel/WorkflowTemplatesPanel.tsx (Line 211:4 - Line 673:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn264" onclick="toggleCodeBlock('cloneGroup264', 'expandBtn264', 'collapseBtn264')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn264" onclick="toggleCodeBlock('cloneGroup264', 'expandBtn264', 'collapseBtn264')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup264"><code class="language-javascript text-sm text-gray-800">={template.id}
          actions={[
            &lt;Button
              type=&quot;link&quot;
              icon={isFavorite ? &lt;HeartFilled /&gt; : &lt;HeartOutlined /&gt;}
              onClick={() =&gt; handleToggleFavorite(template.id)}
              style={{ color: isFavorite ? colors.error[500] : undefined }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedTemplate(template);
                setTemplateModalVisible(true);
              }}
            &gt;
              Preview
            &lt;/Button&gt;,
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;DownloadOutlined /&gt;}
              onClick={() =&gt; handleCreateFromTemplate(template)}
            &gt;
              Use Template
            &lt;/Button&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            avatar={&lt;Avatar&gt;{getCategoryIcon(template.category)}&lt;/Avatar&gt;}
            title={
              &lt;Space&gt;
                {template.name}
                &lt;Tag color={getDifficultyColor(template.difficulty)}&gt;{template.difficulty}&lt;/Tag&gt;
                &lt;Rate disabled defaultValue={template.metadata.rating} /&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {template.description}
                &lt;Space&gt;
                  &lt;Tag&gt;{template.category}&lt;/Tag&gt;
                  &lt;Text type=&quot;secondary&quot;&gt;
                    &lt;ClockCircleOutlined /&gt; {template.estimatedSetupTime} min
                  &lt;/Text&gt;
                  &lt;Text type=&quot;secondary&quot;&gt;
                    &lt;EyeOutlined /&gt; {template.metadata.usageCount} uses
                  &lt;/Text&gt;
                &lt;/Space&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      );
    }

    return (
      &lt;Card
        key={template.id}
        hoverable
        className=&quot;template-card&quot;
        cover={
          &lt;div className=&quot;h-32 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center text-4xl&quot;&gt;
            {getCategoryIcon(template.category)}
          &lt;/div&gt;
        }
        actions={[
          &lt;Button
            type=&quot;link&quot;
            icon={isFavorite ? &lt;HeartFilled /&gt; : &lt;HeartOutlined /&gt;}
            onClick={() =&gt; handleToggleFavorite(template.id)}
            style={{ color: isFavorite ? colors.error[500] : undefined }}
          /&gt;,
          &lt;Button
            type=&quot;link&quot;
            icon={&lt;EyeOutlined /&gt;}
            onClick={() =&gt; {
              setSelectedTemplate(template);
              setTemplateModalVisible(true);
            }}
          /&gt;,
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;DownloadOutlined /&gt;}
            onClick={() =&gt; handleCreateFromTemplate(template)}
          /&gt;,
        ]}
      &gt;
        &lt;Meta
          title={
            &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
              &lt;Text strong&gt;{template.name}&lt;/Text&gt;
              &lt;Space&gt;
                &lt;Tag color={getDifficultyColor(template.difficulty)}&gt;{template.difficulty}&lt;/Tag&gt;
                &lt;Rate disabled defaultValue={template.metadata.rating} /&gt;
              &lt;/Space&gt;
            &lt;/Space&gt;
          }
          description={
            &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
              &lt;Text ellipsis={{ tooltip: template.description }}&gt;{template.description}&lt;/Text&gt;
              &lt;Space&gt;
                &lt;Text type=&quot;secondary&quot;&gt;
                  &lt;ClockCircleOutlined /&gt; {template.estimatedSetupTime} min
                &lt;/Text&gt;
                &lt;Text type=&quot;secondary&quot;&gt;
                  &lt;EyeOutlined /&gt; {template.metadata.usageCount}
                &lt;/Text&gt;
              &lt;/Space&gt;
            &lt;/Space&gt;
          }
        /&gt;
      &lt;/Card&gt;
    );
  };

  const renderTemplateModal = () =&gt; {
    if (!selectedTemplate) return null;

    return (
      &lt;Modal
        title={selectedTemplate.name}
        open={templateModalVisible}
        onCancel={() =&gt; setTemplateModalVisible(false)}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={() =&gt; setTemplateModalVisible(false)}&gt;
            Close
          &lt;/Button&gt;,
          &lt;Button
            key=&quot;use&quot;
            type=&quot;primary&quot;
            icon={&lt;DownloadOutlined /&gt;}
            onClick={() =&gt; {
              handleCreateFromTemplate(selectedTemplate);
              setTemplateModalVisible(false);
            }}
          &gt;
            Use This Template
          &lt;/Button&gt;,
        ]}
        width={800}
      &gt;
        &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
          &lt;div&gt;
            &lt;Paragraph&gt;{selectedTemplate.description}&lt;/Paragraph&gt;
            &lt;Space wrap&gt;
              {selectedTemplate.tags.map((tag) =&gt; (
                &lt;Tag key={tag}&gt;{tag}&lt;/Tag&gt;
              ))}
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;Row gutter={16}&gt;
            &lt;Col span={8}&gt;
              &lt;Statistic
                title=&quot;Difficulty&quot;
                value={selectedTemplate.difficulty}
                valueStyle={{
                  color: getDifficultyColor(selectedTemplate.difficulty),
                }}
              /&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Statistic
                title=&quot;Setup Time&quot;
                value={selectedTemplate.estimatedSetupTime}
                suffix=&quot;min&quot;
              /&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Statistic
                title=&quot;Rating&quot;
                value={selectedTemplate.metadata.rating}
                suffix={&lt;StarOutlined /&gt;}
              /&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;div&gt;
            &lt;Title level={5}&gt;Required Integrations&lt;/Title&gt;
            &lt;Space wrap&gt;
              {selectedTemplate.configuration.requiredIntegrations.map((integration) =&gt; (
                &lt;Tag key={integration} color=&quot;blue&quot;&gt;
                  {integration}
                &lt;/Tag&gt;
              ))}
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;div&gt;
            &lt;Title level={5}&gt;Workflow Structure&lt;/Title&gt;
            &lt;Text&gt;
              {selectedTemplate.nodes.length} nodes, {selectedTemplate.edges.length} connections
            &lt;/Text&gt;
            {selectedTemplate.configuration.conditionalBranches &gt; 0 &amp;&amp; (
              &lt;Tag color=&quot;orange&quot; style={{ marginLeft: 8 }}&gt;
                &lt;BranchesOutlined /&gt; {selectedTemplate.configuration.conditionalBranches} branches
              &lt;/Tag&gt;
            )}
            {selectedTemplate.configuration.schedulingRequired &amp;&amp; (
              &lt;Tag color=&quot;purple&quot; style={{ marginLeft: 8 }}&gt;
                &lt;ClockCircleOutlined /&gt; Scheduling
              &lt;/Tag&gt;
            )}
            {selectedTemplate.configuration.triggersRequired &amp;&amp; (
              &lt;Tag color=&quot;green&quot; style={{ marginLeft: 8 }}&gt;
                &lt;ThunderboltOutlined /&gt; Triggers
              &lt;/Tag&gt;
            )}
          &lt;/div&gt;

          &lt;div&gt;
            &lt;Title level={5}&gt;Resource Requirements&lt;/Title&gt;
            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;div&gt;
                &lt;Text&gt;Memory: &lt;/Text&gt;
                &lt;Progress
                  percent={
                    selectedTemplate.configuration.resourceRequirements.memory === 'low'
                      ? 25
                      : selectedTemplate.configuration.resourceRequirements.memory === 'medium'
                        ? 50
                        : 75
                  }
                  size=&quot;small&quot;
                  status=&quot;active&quot;
                /&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text&gt;CPU: &lt;/Text&gt;
                &lt;Progress
                  percent={
                    selectedTemplate.configuration.resourceRequirements.cpu === 'low'
                      ? 25
                      : selectedTemplate.configuration.resourceRequirements.cpu === 'medium'
                        ? 50
                        : 75
                  }
                  size=&quot;small&quot;
                  status=&quot;active&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/Space&gt;
          &lt;/div&gt;

          {selectedTemplate.variables.length &gt; 0 &amp;&amp; (
            &lt;div&gt;
              &lt;Title level={5}&gt;Configuration Variables&lt;/Title&gt;
              &lt;List
                size=&quot;small&quot;
                dataSource={selectedTemplate.variables}
                renderItem={(variable) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      title={`${variable.name} (${variable.type})`}
                      description={variable.description}
                    /&gt;
                    {variable.required &amp;&amp; &lt;Tag color=&quot;red&quot;&gt;Required&lt;/Tag&gt;}
                  &lt;/List.Item&gt;
                )}
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/Space&gt;
      &lt;/Modal&gt;
    );
  };

  const renderPatternsList = () =&gt; (
    &lt;List
      dataSource={patterns}
      renderItem={(pattern) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Button type=&quot;link&quot; icon={&lt;InfoCircleOutlined /&gt;}&gt;
              Learn More
            &lt;/Button&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            avatar={
              &lt;Avatar&gt;
                {pattern.pattern === 'sequential'
                  ? '→'
                  : pattern.pattern === 'parallel'
                    ? '⚡'
                    : '🔀'}
              &lt;/Avatar&gt;
            }
            title={pattern.name}
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {pattern.description}
                &lt;Space&gt;
                  &lt;Tag
                    color={
                      pattern.complexity === 'simple'
                        ? 'green'
                        : pattern.complexity === 'moderate'
                          ? 'orange'
                          : 'red'
                    }
                  &gt;
                    {pattern.complexity}
                  &lt;/Tag&gt;
                  &lt;Text type=&quot;secondary&quot;&gt;Applicable to: {pattern.applicableNodes.join(', ')}&lt;/Text&gt;
                &lt;/Space&gt;
                &lt;div&gt;
                  &lt;Text strong&gt;Benefits: &lt;/Text&gt;
                  {pattern.benefits.map((benefit, index) =&gt; (
                    &lt;Tag key={index} color=&quot;blue&quot;&gt;
                      {benefit}
                    &lt;/Tag&gt;
                  ))}
                &lt;/div&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
    /&gt;
  );

  const categories: Array&lt;{ value: TemplateCategory | 'all'; label: string }&gt; = [
    { value: 'all', label: 'All Categories' },
    { value: 'communication', label: 'Communication' },
    { value: 'data-processing', label: 'Data Processing' },
    { value: 'automation', label: 'Automation' },
    { value: 'ai-ml', label: 'AI &amp; ML' },
    { value: 'business', label: 'Business' },
    { value: 'development', label: 'Development' },
    { value: 'monitoring', label: 'Monitoring' },
    { value: 'integration', label: 'Integration' },
    { value: 'social-media', label: 'Social Media' },
    { value: 'ecommerce', label: 'E-commerce' },
  ];

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;AppstoreOutlined /&gt;
          Workflow Templates
        &lt;/Space&gt;
      }
      open={visible}
      onCancel={onClose}
      width={1200}
      footer={null}
      className={cn('workflow-templates-panel')}
    &gt;
      &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;AppstoreOutlined /&gt;
              Browse Templates ({filteredTemplates.length})
            &lt;/span&gt;
          }
          key=&quot;browse&quot;
        &gt;
          &lt;Space direction=&quot;vertical&quot; size=&quot;middle&quot; style={{ width: '100%' }}&gt;
            {/* Filters and Search */}
            &lt;Row gutter={16} align=&quot;middle&quot;&gt;
              &lt;Col flex=&quot;auto&quot;&gt;
                &lt;Search
                  placeholder=&quot;Search templates...&quot;
                  value={searchQuery}
                  onChange={(e) =&gt; setSearchQuery(e.target.value)}
                  style={{ width: '100%' }}
                /&gt;
              &lt;/Col&gt;
              &lt;Col&gt;
                &lt;Select
                  value={selectedCategory}
                  onChange={setSelectedCategory}
                  style={{ width: 180 }}
                &gt;
                  {categories.map((cat) =&gt; (
                    &lt;Option key={cat.value} value={cat.value}&gt;
                      {cat.label}
                    &lt;/Option&gt;
                  ))}
                &lt;/Select&gt;
              &lt;/Col&gt;
              &lt;Col&gt;
                &lt;Select value={sortBy} onChange={setSortBy} style={{ width: 120 }}&gt;
                  &lt;Option value=&quot;rating&quot;&gt;Rating&lt;/Option&gt;
                  &lt;Option value=&quot;usage&quot;&gt;Usage&lt;/Option&gt;
                  &lt;Option value=&quot;name&quot;&gt;Name&lt;/Option&gt;
                  &lt;Option value=&quot;recent&quot;&gt;Recent&lt;/Option&gt;
                &lt;/Select&gt;
              &lt;/Col&gt;
              &lt;Col&gt;
                &lt;Button.Group&gt;
                  &lt;Button
                    icon={&lt;AppstoreOutlined /&gt;}
                    type={viewMode === 'grid' ? 'primary' : 'default'}
                    onClick={() =&gt; setViewMode('grid')}
                  /&gt;
                  &lt;Button
                    icon={&lt;OrderedListOutlined /&gt;}
                    type={viewMode === 'list' ? 'primary' : 'default'}
                    onClick={() =&gt; setViewMode('list')}
                  /&gt;
                &lt;/Button.Group&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;

            {/* Templates Grid/List */}
            {filteredTemplates.length === 0 ? (
              &lt;Empty description=&quot;No templates found&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
            ) : viewMode === 'grid' ? (
              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;
                {filteredTemplates.map(renderTemplateCard)}
              &lt;/div&gt;
            ) : (
              &lt;List
                dataSource={filteredTemplates}
                renderItem={renderTemplateCard}
                pagination={{
                  pageSize: 10,
                  showSizeChanger: false,
                }}
              /&gt;
            )}
          &lt;/Space&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;HeartOutlined /&gt;
              Favorites ({workflowTemplates.getFavoriteTemplates().length})
            &lt;/span&gt;
          }
          key=&quot;favorites&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;
            {workflowTemplates.getFavoriteTemplates().map(renderTemplateCard)}
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ClockCircleOutlined /&gt;
              Recent
            &lt;/span&gt;
          }
          key=&quot;recent&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;
            {workflowTemplates.getRecentlyUsedTemplates().map(renderTemplateCard)}
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ThunderboltOutlined /&gt;
              Patterns ({patterns.length})
            &lt;/span&gt;
          }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/UserPresenceOverlay.tsx (Line 85:4 - Line 264:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/userpresenceoverlay/UserPresenceOverlay.tsx (Line 88:4 - Line 267:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn266" onclick="toggleCodeBlock('cloneGroup266', 'expandBtn266', 'collapseBtn266')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn266" onclick="toggleCodeBlock('cloneGroup266', 'expandBtn266', 'collapseBtn266')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup266"><code class="language-javascript text-sm text-gray-800">={`cursor-${presence.userId}`}
          className=&quot;absolute pointer-events-none z-50 transition-all duration-200&quot;
          style={{
            left: screenPos.x,
            top: screenPos.y,
            transform: 'translate(-2px, -2px)',
          }}
        &gt;
          {/* Cursor pointer */}
          &lt;div
            className=&quot;relative&quot;
            style={{
              filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))',
            }}
          &gt;
            &lt;svg width=&quot;16&quot; height=&quot;20&quot; viewBox=&quot;0 0 16 20&quot; fill=&quot;none&quot; className=&quot;cursor-pointer&quot;&gt;
              &lt;path
                d=&quot;M0 0L0 16L4.5 11.5L7 16.5L9.5 15L7 10L12 10L0 0Z&quot;
                fill={userColor}
                stroke=&quot;white&quot;
                strokeWidth=&quot;1&quot;
              /&gt;
            &lt;/svg&gt;

            {/* User label */}
            &lt;div
              className=&quot;absolute top-5 left-4 px-2 py-1 rounded text-xs font-medium text-white whitespace-nowrap&quot;
              style={{
                backgroundColor: userColor,
                boxShadow: '0 2px 8px rgba(0,0,0,0.15)',
              }}
            &gt;
              {presence.user.name}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      );
    },
    [showUserCursors, workflowToScreen, getUserColor]
  );

  // Render user selection highlights
  const renderUserSelections = useCallback(
    (presence: UserPresence) =&gt; {
      if (!presence.selection?.nodeIds || !showUserSelections) return null;

      const userColor = getUserColor(presence.userId);

      return presence.selection.nodeIds
        .map((nodeId) =&gt; {
          const bounds = getNodeBounds(nodeId);
          if (!bounds) return null;

          return (
            &lt;div
              key={`selection-${presence.userId}-${nodeId}`}
              className=&quot;absolute pointer-events-none z-40 transition-all duration-200&quot;
              style={{
                left: bounds.x - 2,
                top: bounds.y - 2,
                width: bounds.width + 4,
                height: bounds.height + 4,
                border: `2px solid ${userColor}`,
                borderRadius: '8px',
                backgroundColor: `${userColor}20`,
                boxShadow: `0 0 0 1px ${userColor}40`,
              }}
            &gt;
              {/* User avatar in corner */}
              &lt;div
                className=&quot;absolute -top-3 -right-3&quot;
                style={{
                  filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.1))',
                }}
              &gt;
                &lt;Tooltip title={`${presence.user.name} selected this node`}&gt;
                  &lt;Avatar
                    size={20}
                    src={presence.user.avatar}
                    style={{
                      backgroundColor: userColor,
                      border: '2px solid white',
                      fontSize: '10px',
                    }}
                  &gt;
                    {presence.user.name.charAt(0).toUpperCase()}
                  &lt;/Avatar&gt;
                &lt;/Tooltip&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          );
        })
        .filter(Boolean);
    },
    [showUserSelections, getNodeBounds, getUserColor]
  );

  // Render viewport indicators (mini rectangles showing what other users see)
  const renderViewportIndicators = useCallback(
    (presence: UserPresence) =&gt; {
      if (!presence.viewport) return null;

      const userColor = getUserColor(presence.userId);
      const viewport = presence.viewport;

      // Calculate the viewport rectangle in screen coordinates
      const viewportWidth = 400; // Approximate viewport width
      const viewportHeight = 300; // Approximate viewport height

      const screenPos = workflowToScreen(viewport.x, viewport.y);

      return (
        &lt;div
          key={`viewport-${presence.userId}`}
          className=&quot;absolute pointer-events-none z-30 transition-all duration-500&quot;
          style={{
            left: screenPos.x,
            top: screenPos.y,
            width: viewportWidth * viewport.zoom * transform.zoom,
            height: viewportHeight * viewport.zoom * transform.zoom,
            border: `1px dashed ${userColor}60`,
            borderRadius: '4px',
          }}
        &gt;
          {/* User label for viewport */}
          &lt;div
            className=&quot;absolute -top-6 left-0 px-2 py-1 rounded text-xs text-white&quot;
            style={{
              backgroundColor: userColor,
              opacity: 0.8,
            }}
          &gt;
            {presence.user.name}'s view
          &lt;/div&gt;
        &lt;/div&gt;
      );
    },
    [workflowToScreen, getUserColor, transform.zoom]
  );

  // Don't render if container is not available
  if (!containerRef.current) return null;

  return (
    &lt;div className=&quot;absolute inset-0 pointer-events-none overflow-hidden&quot;&gt;
      {userPresences.map((presence) =&gt; (
        &lt;React.Fragment key={presence.userId}&gt;
          {renderUserCursor(presence)}
          {renderUserSelections(presence)}
          {renderViewportIndicators(presence)}
        &lt;/React.Fragment&gt;
      ))}

      {/* Connection status indicator */}
      {userPresences.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;absolute top-4 right-4 pointer-events-auto z-50&quot;&gt;
          &lt;div className=&quot;flex items-center space-x-2 bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700&quot;&gt;
            &lt;div className=&quot;flex -space-x-2&quot;&gt;
              {userPresences.slice(0, 3).map((presence) =&gt; (
                &lt;Avatar
                  key={presence.userId}
                  size={24}
                  src={presence.user.avatar}
                  style={{
                    backgroundColor: getUserColor(presence.userId),
                    border: '2px solid white',
                  }}
                  className=&quot;shadow-sm&quot;
                &gt;
                  {presence.user.name.charAt(0).toUpperCase()}
                &lt;/Avatar&gt;
              ))}
              {userPresences.length &gt; 3 &amp;&amp; (
                &lt;Avatar
                  size={24}
                  style={{
                    backgroundColor: '#f0f0f0',
                    color: '#666',
                    border: '2px solid white',
                  }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/TriggerPanel.tsx (Line 304:5 - Line 978:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 307:5 - Line 981:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn268" onclick="toggleCodeBlock('cloneGroup268', 'expandBtn268', 'collapseBtn268')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn268" onclick="toggleCodeBlock('cloneGroup268', 'expandBtn268', 'collapseBtn268')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup268"><code class="language-javascript text-sm text-gray-800">={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateTrigger}
      initialValues={{
        enabled: true,
        triggerType: 'webhook',
        rateLimitEnabled: false,
        retryEnabled: false,
        requireHttps: true,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Trigger Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;API webhook trigger&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Receives webhooks from external API&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;triggerType&quot; label=&quot;Trigger Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;webhook&quot;&gt;
            &lt;Space&gt;
              &lt;GlobalOutlined /&gt;
              Webhook
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;http_request&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              HTTP Request
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;email&quot;&gt;
            &lt;Space&gt;
              &lt;MailOutlined /&gt;
              Email
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;file_change&quot;&gt;
            &lt;Space&gt;
              &lt;FileTextOutlined /&gt;
              File Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;database_change&quot;&gt;
            &lt;Space&gt;
              &lt;DatabaseOutlined /&gt;
              Database Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;api_poll&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              API Polling
            &lt;/Space&gt;
          &lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['triggerType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const triggerType = getFieldValue('triggerType');
          return renderTriggerTypeFields(triggerType);
        }}
      &lt;/Form.Item&gt;

      &lt;Collapse ghost&gt;
        &lt;Panel header=&quot;Advanced Configuration&quot; key=&quot;advanced&quot;&gt;
          {renderAdvancedFields()}
        &lt;/Panel&gt;
      &lt;/Collapse&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingTrigger ? 'Update Trigger' : 'Create Trigger'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingTrigger(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderTriggerTypeFields = (triggerType: string) =&gt; {
    switch (triggerType) {
      case 'webhook':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;methods&quot; label=&quot;HTTP Methods&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select methods&quot;&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
                &lt;Option value=&quot;PATCH&quot;&gt;PATCH&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;contentTypes&quot; label=&quot;Content Types (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;application/json, application/xml&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;secretKey&quot; label=&quot;Secret Key (optional)&quot;&gt;
              &lt;Input.Password placeholder=&quot;For webhook signature validation&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'http_request':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;method&quot; label=&quot;HTTP Method&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeDetection&quot; label=&quot;Change Detection&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;hash&quot;&gt;Content Hash&lt;/Option&gt;
                &lt;Option value=&quot;content&quot;&gt;Full Content&lt;/Option&gt;
                &lt;Option value=&quot;headers&quot;&gt;Headers&lt;/Option&gt;
                &lt;Option value=&quot;size&quot;&gt;Content Size&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'email':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;provider&quot; label=&quot;Email Provider&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;gmail&quot;&gt;Gmail&lt;/Option&gt;
                &lt;Option value=&quot;outlook&quot;&gt;Outlook&lt;/Option&gt;
                &lt;Option value=&quot;imap&quot;&gt;IMAP&lt;/Option&gt;
                &lt;Option value=&quot;exchange&quot;&gt;Exchange&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;mailbox&quot; label=&quot;Mailbox&quot;&gt;
              &lt;Input placeholder=&quot;INBOX&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;fromEmails&quot; label=&quot;From Emails (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;user@example.com, alerts@service.com&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;subjectFilter&quot; label=&quot;Subject Filter&quot;&gt;
              &lt;Input placeholder=&quot;Alert: &quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'file_change':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;path&quot; label=&quot;Path to Monitor&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;/data/uploads&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;recursive&quot; label=&quot;Recursive&quot; valuePropName=&quot;checked&quot;&gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;events&quot; label=&quot;File Events&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select events&quot;&gt;
                &lt;Option value=&quot;created&quot;&gt;Created&lt;/Option&gt;
                &lt;Option value=&quot;modified&quot;&gt;Modified&lt;/Option&gt;
                &lt;Option value=&quot;deleted&quot;&gt;Deleted&lt;/Option&gt;
                &lt;Option value=&quot;moved&quot;&gt;Moved&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;patterns&quot; label=&quot;File Patterns (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;*.pdf, *.docx&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'database_change':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;connectionString&quot;
              label=&quot;Connection String&quot;
              rules={[{ required: true }]}
            &gt;
              &lt;Input.Password placeholder=&quot;mongodb://localhost:27017/mydb&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;database&quot; label=&quot;Database&quot;&gt;
              &lt;Input placeholder=&quot;myapp&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;table&quot; label=&quot;Table/Collection&quot;&gt;
              &lt;Input placeholder=&quot;users&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;operation&quot; label=&quot;Operation&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;insert&quot;&gt;Insert&lt;/Option&gt;
                &lt;Option value=&quot;update&quot;&gt;Update&lt;/Option&gt;
                &lt;Option value=&quot;delete&quot;&gt;Delete&lt;/Option&gt;
                &lt;Option value=&quot;any&quot;&gt;Any&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'api_poll':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;API URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/data&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;responseField&quot; label=&quot;Response Field to Monitor&quot;&gt;
              &lt;Input placeholder=&quot;data.status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeThreshold&quot; label=&quot;Change Threshold (for numbers)&quot;&gt;
              &lt;InputNumber min={0} step={0.1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderAdvancedFields = () =&gt; (
    &lt;Space direction=&quot;vertical&quot; size=&quot;middle&quot; style={{ width: '100%' }}&gt;
      &lt;Divider&gt;Rate Limiting&lt;/Divider&gt;
      &lt;Form.Item name=&quot;rateLimitEnabled&quot; label=&quot;Enable Rate Limiting&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item dependencies={['rateLimitEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('rateLimitEnabled')) return null;
          return (
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;Form.Item name=&quot;maxTriggersPerMinute&quot; label=&quot;Max/Minute&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;maxTriggersPerHour&quot; label=&quot;Max/Hour&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
            &lt;/div&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Security&lt;/Divider&gt;
      &lt;Form.Item name=&quot;requireHttps&quot; label=&quot;Require HTTPS&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;allowedIPs&quot; label=&quot;Allowed IPs (comma-separated)&quot;&gt;
        &lt;Input placeholder=&quot;192.168.1.1, 10.0.0.0/8&quot; /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;maxPayloadSize&quot; label=&quot;Max Payload Size (bytes)&quot;&gt;
        &lt;InputNumber min={1024} placeholder=&quot;1048576&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Headers&lt;/Divider&gt;
      &lt;Form.Item name=&quot;headers&quot; label=&quot;Custom Headers (key:value per line)&quot;&gt;
        &lt;TextArea
          placeholder=&quot;Authorization: Bearer token&amp;#10;Content-Type: application/json&quot;
          rows={3}
        /&gt;
      &lt;/Form.Item&gt;
    &lt;/Space&gt;
  );

  const renderTriggersList = () =&gt; (
    &lt;List
      dataSource={triggers}
      renderItem={(trigger) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={trigger.enabled}
              onChange={(checked) =&gt; handleToggleTrigger(trigger.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedTrigger(trigger);
                setTestModalVisible(true);
              }}
            &gt;
              Test
            &lt;/Button&gt;,
            trigger.triggerType === 'webhook' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={() =&gt; {
                  const config = trigger.configuration as any;
                  navigator.clipboard.writeText(config.endpoint);
                  message.success('Webhook URL copied');
                }}
              &gt;
                Copy URL
              &lt;/Button&gt;
            ),
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingTrigger(trigger.id);
                // Populate form with existing values
                form.setFieldsValue({
                  name: trigger.name,
                  description: trigger.description,
                  enabled: trigger.enabled,
                  triggerType: trigger.triggerType,
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteTrigger(trigger.id)}
            /&gt;,
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {getTriggerIcon(trigger.triggerType)}
                {trigger.name}
                &lt;Tag color={trigger.enabled ? 'green' : 'default'}&gt;{trigger.triggerType}&lt;/Tag&gt;
                &lt;Badge
                  count={trigger.triggerCount}
                  style={{ backgroundColor: colors.primary[500] }}
                /&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {trigger.description}
                &lt;Space&gt;
                  &lt;Badge status={trigger.enabled ? 'success' : 'default'} /&gt;
                  {trigger.enabled ? 'Active' : 'Inactive'}
                  {trigger.lastTriggered &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(trigger.lastTriggered).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
                {trigger.triggerType === 'webhook' &amp;&amp; (
                  &lt;Text code style={{ fontSize: '12px' }}&gt;
                    {(trigger.configuration as any).endpoint}
                  &lt;/Text&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No triggers configured' }}
    /&gt;
  );

  const renderEventsList = () =&gt; (
    &lt;Table
      dataSource={recentEvents}
      size=&quot;small&quot;
      pagination={{ pageSize: 20 }}
      columns={[
        {
          title: 'Time',
          dataIndex: 'timestamp',
          key: 'timestamp',
          width: 150,
          render: (timestamp) =&gt; new Date(timestamp).toLocaleString(),
        },
        {
          title: 'Trigger',
          dataIndex: 'triggerId',
          key: 'triggerId',
          width: 200,
          render: (triggerId) =&gt; {
            const trigger = triggers.find((t) =&gt; t.id === triggerId);
            return trigger ? trigger.name : triggerId;
          },
        },
        {
          title: 'Status',
          dataIndex: 'status',
          key: 'status',
          width: 100,
          render: (status) =&gt; &lt;Tag color={getEventStatusColor(status)}&gt;{status}&lt;/Tag&gt;,
        },
        {
          title: 'Processing Time',
          dataIndex: 'processingTimeMs',
          key: 'processingTimeMs',
          width: 120,
          render: (time) =&gt; `${time.toFixed(2)}ms`,
        },
        {
          title: 'Source',
          dataIndex: ['metadata', 'source'],
          key: 'source',
          width: 120,
        },
        {
          title: 'Actions',
          key: 'actions',
          width: 100,
          render: (_, event) =&gt; (
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                Modal.info({
                  title: 'Event Details',
                  content: (
                    &lt;div&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;ID:&lt;/Text&gt; {event.id}
                      &lt;/Paragraph&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;Raw Data:&lt;/Text&gt;
                        &lt;pre
                          style={{
                            marginTop: 8,
                            background: colors.gray[50],
                            padding: 12,
                            borderRadius: 4,
                          }}
                        &gt;
                          {JSON.stringify(event.rawData, null, 2)}
                        &lt;/pre&gt;
                      &lt;/Paragraph&gt;
                      {event.error &amp;&amp; (
                        &lt;Paragraph&gt;
                          &lt;Text strong&gt;Error:&lt;/Text&gt;
                          &lt;pre
                            style={{
                              marginTop: 8,
                              background: colors.error[50],
                              padding: 12,
                              borderRadius: 4,
                              color: colors.error[600],
                            }}
                          &gt;
                            {event.error}
                          &lt;/pre&gt;
                        &lt;/Paragraph&gt;
                      )}
                    &lt;/div&gt;
                  ),
                  width: 600,
                });
              }}
            /&gt;
          ),
        },
      ]}
    /&gt;
  );

  const renderMetrics = () =&gt; {
    if (!metrics) return &lt;div&gt;Select a trigger to view metrics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic title=&quot;Total Events&quot; value={metrics.totalEvents} /&gt;
          &lt;Statistic
            title=&quot;Processed Events&quot;
            value={metrics.processedEvents}
            valueStyle={{ color: colors.success[600] }}
          /&gt;
          &lt;Statistic
            title=&quot;Error Rate&quot;
            value={metrics.errorRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: metrics.errorRate &gt; 5 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
          &lt;Statistic
            title=&quot;Avg Processing Time&quot;
            value={metrics.averageProcessingTime}
            precision={2}
            suffix=&quot;ms&quot;
          /&gt;
        &lt;/div&gt;

        {metrics.topSources.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Top Sources&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={metrics.topSources}
              renderItem={(source) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta title={source.source} description={`${source.count} events`} /&gt;
                  &lt;Progress
                    percent={(source.count / metrics.totalEvents) * 100}
                    size=&quot;small&quot;
                    style={{ width: 100 }}
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getTriggerIcon = (triggerType: string) =&gt; {
    const iconMap = {
      webhook: &lt;GlobalOutlined /&gt;,
      http_request: &lt;ApiOutlined /&gt;,
      email: &lt;MailOutlined /&gt;,
      file_change: &lt;FileTextOutlined /&gt;,
      database_change: &lt;DatabaseOutlined /&gt;,
      api_poll: &lt;ApiOutlined /&gt;,
      calendar_event: &lt;CalendarOutlined /&gt;,
    };
    return iconMap[triggerType as keyof typeof iconMap] || &lt;SettingOutlined /&gt;;
  };

  const getEventStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'processed':
        return 'green';
      case 'failed':
        return 'red';
      case 'filtered':
        return 'orange';
      case 'rate_limited':
        return 'purple';
      default:
        return 'default';
    }
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;ThunderboltOutlined /&gt;
            Advanced Triggers
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1200}
        footer={null}
        className={cn('trigger-management-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Triggers ({triggers.length})
              &lt;/span&gt;
            }
            key=&quot;triggers&quot;
          &gt;
            &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
              &lt;Card title=&quot;Create Trigger&quot; size=&quot;small&quot;&gt;
                {renderTriggerForm()}
                {webhookUrl &amp;&amp; (
                  &lt;Alert
                    message=&quot;Webhook URL&quot;
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;Text code&gt;{webhookUrl}&lt;/Text&gt;
                        &lt;Button
                          size=&quot;small&quot;
                          icon={&lt;CopyOutlined /&gt;}
                          onClick={() =&gt; {
                            navigator.clipboard.writeText(webhookUrl);
                            message.success('URL copied');
                          }}
                        &gt;
                          Copy URL
                        &lt;/Button&gt;
                      &lt;/Space&gt;
                    }
                    type=&quot;success&quot;
                    style={{ marginTop: 16 }}
                  /&gt;
                )}
              &lt;/Card&gt;
              &lt;Card title=&quot;Active Triggers&quot; size=&quot;small&quot;&gt;
                {renderTriggersList()}
              &lt;/Card&gt;
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CheckCircleOutlined /&gt;
                Events
              &lt;/span&gt;
            }
            key=&quot;events&quot;
          &gt;
            {renderEventsList()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;div&gt;📊&lt;/div&gt;
                Metrics
              &lt;/span&gt;
            }
            key=&quot;metrics&quot;
          &gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;Select
                placeholder=&quot;Select a trigger to view metrics&quot;
                value={selectedTrigger?.id}
                onChange={(triggerId) =&gt; {
                  const trigger = triggers.find((t) =&gt; t.id === triggerId);
                  setSelectedTrigger(trigger || null);
                }}
                style={{ width: 300 }}
              &gt;
                {triggers.map((trigger) =&gt; (
                  &lt;Option key={trigger.id} value={trigger.id}&gt;
                    {trigger.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/div&gt;
            {renderMetrics()}
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Modal&gt;

      &lt;Modal
        title=&quot;Test Trigger&quot;
        open={testModalVisible}
        onCancel={() =&gt; setTestModalVisible(false)}
        onOk={() =&gt; {
          if (selectedTrigger) {
            handleTestTrigger(selectedTrigger.id);
          }
        }}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Test Data (JSON)&quot;&gt;
            &lt;TextArea
              rows={8}
              placeholder={JSON.stringify(
                { test: true, timestamp: new Date().toISOString() },
                null,
                2
              )}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/SchedulingPanel.tsx (Line 244:5 - Line 711:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/schedulingpanel/SchedulingPanel.tsx (Line 248:5 - Line 715:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn270" onclick="toggleCodeBlock('cloneGroup270', 'expandBtn270', 'collapseBtn270')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn270" onclick="toggleCodeBlock('cloneGroup270', 'expandBtn270', 'collapseBtn270')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup270"><code class="language-javascript text-sm text-gray-800">={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateSchedule}
      initialValues={{
        enabled: true,
        scheduleType: 'cron',
        timezone: 'UTC',
        retryEnabled: false,
        maxAttempts: 3,
        backoffStrategy: 'exponential',
        maxConcurrent: 1,
        queueStrategy: 'fifo',
        skipIfRunning: false,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Schedule Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;Daily data sync&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Optional description of what this schedule does&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;scheduleType&quot; label=&quot;Schedule Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;cron&quot;&gt;Cron Expression&lt;/Option&gt;
          &lt;Option value=&quot;interval&quot;&gt;Fixed Interval&lt;/Option&gt;
          &lt;Option value=&quot;once&quot;&gt;One Time&lt;/Option&gt;
          &lt;Option value=&quot;event-driven&quot;&gt;Event Driven&lt;/Option&gt;
          &lt;Option value=&quot;conditional&quot;&gt;Conditional&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['scheduleType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const scheduleType = getFieldValue('scheduleType');
          return renderScheduleTypeFields(scheduleType);
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

      &lt;Form.Item name=&quot;timezone&quot; label=&quot;Timezone&quot;&gt;
        &lt;Select showSearch&gt;
          &lt;Option value=&quot;UTC&quot;&gt;UTC&lt;/Option&gt;
          &lt;Option value=&quot;America/New_York&quot;&gt;America/New_York&lt;/Option&gt;
          &lt;Option value=&quot;America/Los_Angeles&quot;&gt;America/Los_Angeles&lt;/Option&gt;
          &lt;Option value=&quot;Europe/London&quot;&gt;Europe/London&lt;/Option&gt;
          &lt;Option value=&quot;Asia/Tokyo&quot;&gt;Asia/Tokyo&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;maxConcurrent&quot; label=&quot;Max Concurrent Executions&quot;&gt;
        &lt;InputNumber min={1} max={10} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;queueStrategy&quot; label=&quot;Queue Strategy&quot;&gt;
        &lt;Select&gt;
          &lt;Option value=&quot;fifo&quot;&gt;First In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;lifo&quot;&gt;Last In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;priority&quot;&gt;Priority Based&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;skipIfRunning&quot; label=&quot;Skip If Already Running&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Retry Policy&lt;/Divider&gt;

      &lt;Form.Item name=&quot;retryEnabled&quot; label=&quot;Enable Retries&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['retryEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('retryEnabled')) return null;
          return (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxAttempts&quot; label=&quot;Max Retry Attempts&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;backoffStrategy&quot; label=&quot;Backoff Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Option value=&quot;linear&quot;&gt;Linear&lt;/Option&gt;
                  &lt;Option value=&quot;exponential&quot;&gt;Exponential&lt;/Option&gt;
                  &lt;Option value=&quot;fixed&quot;&gt;Fixed&lt;/Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;initialDelay&quot; label=&quot;Initial Delay (ms)&quot;&gt;
                &lt;InputNumber min={100} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingSchedule ? 'Update Schedule' : 'Create Schedule'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingSchedule(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderScheduleTypeFields = (scheduleType: string) =&gt; {
    switch (scheduleType) {
      case 'cron':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;cronExpression&quot;
              label={
                &lt;Space&gt;
                  Cron Expression
                  &lt;Tooltip title=&quot;Format: second minute hour day month weekday&quot;&gt;
                    &lt;InfoCircleOutlined /&gt;
                  &lt;/Tooltip&gt;
                &lt;/Space&gt;
              }
              rules={[{ required: true, message: 'Please enter a cron expression' }]}
            &gt;
              &lt;Input placeholder=&quot;0 0 9 * * *&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;cronDescription&quot; label=&quot;Description&quot;&gt;
              &lt;Input placeholder=&quot;Every day at 9:00 AM&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'interval':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;intervalMs&quot; label=&quot;Interval (milliseconds)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;maxExecutions&quot; label=&quot;Max Executions (optional)&quot;&gt;
              &lt;InputNumber min={1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'once':
        return (
          &lt;Form.Item name=&quot;executeAt&quot; label=&quot;Execute At&quot;&gt;
            &lt;DatePicker showTime /&gt;
          &lt;/Form.Item&gt;
        );
      case 'event-driven':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;eventType&quot; label=&quot;Event Type&quot;&gt;
              &lt;Input placeholder=&quot;webhook&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;eventSource&quot; label=&quot;Event Source&quot;&gt;
              &lt;Input placeholder=&quot;api.example.com&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'conditional':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;condition&quot; label=&quot;JavaScript Condition&quot;&gt;
              &lt;TextArea placeholder=&quot;return data.status === 'ready'&quot; rows={3} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;checkIntervalMs&quot; label=&quot;Check Interval (ms)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;60000&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderSchedulesList = () =&gt; (
    &lt;List
      dataSource={schedules}
      renderItem={(schedule) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={schedule.enabled}
              onChange={(checked) =&gt; handleToggleSchedule(schedule.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; handleTriggerSchedule(schedule.id)}
              disabled={!schedule.enabled}
            &gt;
              Trigger
            &lt;/Button&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingSchedule(schedule.id);
                form.setFieldsValue({
                  name: schedule.name,
                  description: schedule.description,
                  enabled: schedule.enabled,
                  scheduleType: schedule.scheduleType,
                  // Add other fields based on schedule type
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteSchedule(schedule.id)}
            /&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {schedule.name}
                &lt;Tag color={schedule.enabled ? 'green' : 'default'}&gt;{schedule.scheduleType}&lt;/Tag&gt;
                {schedule.nextExecution &amp;&amp; (
                  &lt;Tag color=&quot;blue&quot;&gt;Next: {new Date(schedule.nextExecution).toLocaleString()}&lt;/Tag&gt;
                )}
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {schedule.description}
                &lt;Space&gt;
                  &lt;Badge status={schedule.enabled ? 'success' : 'default'} /&gt;
                  {schedule.enabled ? 'Active' : 'Inactive'}
                  {schedule.lastExecuted &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(schedule.lastExecuted).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No schedules configured' }}
    /&gt;
  );

  const renderExecutionsList = () =&gt; (
    &lt;List
      dataSource={activeExecutions}
      renderItem={(execution) =&gt; (
        &lt;List.Item
          actions={[
            execution.status === 'running' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                danger
                icon={&lt;PauseCircleOutlined /&gt;}
                onClick={() =&gt; handleCancelExecution(execution.id)}
              &gt;
                Cancel
              &lt;/Button&gt;
            ),
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                Execution {execution.id.split('_')[1]}
                &lt;Tag color={getExecutionStatusColor(execution.status)}&gt;{execution.status}&lt;/Tag&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                &lt;div&gt;Scheduled: {new Date(execution.scheduledAt).toLocaleString()}&lt;/div&gt;
                {execution.startedAt &amp;&amp; (
                  &lt;div&gt;Started: {new Date(execution.startedAt).toLocaleString()}&lt;/div&gt;
                )}
                {execution.duration &amp;&amp; (
                  &lt;div&gt;Duration: {(execution.duration / 1000).toFixed(2)}s&lt;/div&gt;
                )}
                {execution.error &amp;&amp; (
                  &lt;div style={{ color: colors.error[500] }}&gt;Error: {execution.error}&lt;/div&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No active executions' }}
    /&gt;
  );

  const renderAnalytics = () =&gt; {
    if (!analytics) return &lt;div&gt;Select a schedule to view analytics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic
            title=&quot;Success Rate&quot;
            value={analytics.successRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: analytics.successRate &gt; 90 ? colors.success[600] : colors.warning[600],
            }}
          /&gt;
          &lt;Statistic title=&quot;Total Executions&quot; value={analytics.totalExecutions} /&gt;
          &lt;Statistic
            title=&quot;Average Duration&quot;
            value={analytics.averageDuration / 1000}
            precision={2}
            suffix=&quot;s&quot;
          /&gt;
          &lt;Statistic
            title=&quot;Failed Executions&quot;
            value={analytics.failedExecutions}
            valueStyle={{
              color: analytics.failedExecutions &gt; 0 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
        &lt;/div&gt;

        {analytics.recommendations.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Recommendations&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={analytics.recommendations}
              renderItem={(rec) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta
                    title={
                      &lt;Space&gt;
                        {rec.description}
                        &lt;Tag
                          color={
                            rec.priority === 'high'
                              ? 'red'
                              : rec.priority === 'medium'
                                ? 'orange'
                                : 'green'
                          }
                        &gt;
                          {rec.priority}
                        &lt;/Tag&gt;
                      &lt;/Space&gt;
                    }
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Implementation:&lt;/strong&gt; {rec.implementation}
                        &lt;/div&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Impact:&lt;/strong&gt; {rec.estimatedImpact}
                        &lt;/div&gt;
                      &lt;/Space&gt;
                    }
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getExecutionStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'running':
        return 'blue';
      case 'completed':
        return 'green';
      case 'failed':
        return 'red';
      case 'cancelled':
        return 'orange';
      case 'skipped':
        return 'default';
      default:
        return 'default';
    }
  };

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;ClockCircleOutlined /&gt;
          Workflow Scheduling
        &lt;/Space&gt;
      }
      open={visible}
      onCancel={onClose}
      width={1000}
      footer={null}
      className={cn('workflow-scheduling-panel')}
    &gt;
      &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;CalendarOutlined /&gt;
              Schedules ({schedules.length})
            &lt;/span&gt;
          }
          key=&quot;schedules&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
            &lt;Card title=&quot;Create Schedule&quot; size=&quot;small&quot;&gt;
              {renderScheduleForm()}
            &lt;/Card&gt;
            &lt;Card title=&quot;Active Schedules&quot; size=&quot;small&quot;&gt;
              {renderSchedulesList()}
            &lt;/Card&gt;
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ThunderboltOutlined /&gt;
              Executions ({activeExecutions.length})
            &lt;/span&gt;
          }
          key=&quot;executions&quot;
        &gt;
          {renderExecutionsList()}
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Analytics
            &lt;/span&gt;
          }
          key=&quot;analytics&quot;
        &gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;Select
              placeholder=&quot;Select a schedule to view analytics&quot;
              value={selectedSchedule?.id}
              onChange={(scheduleId) =&gt; {
                const schedule = schedules.find((s) =&gt; s.id === scheduleId);
                setSelectedSchedule(schedule || null);
              }}
              style={{ width: 300 }}
            &gt;
              {schedules.map((schedule) =&gt; (
                &lt;Option key={schedule.id} value={schedule.id}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodePropertyPanel.tsx (Line 342:8 - Line 534:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/nodepropertypanel/NodePropertyPanel.tsx (Line 352:8 - Line 544:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn272" onclick="toggleCodeBlock('cloneGroup272', 'expandBtn272', 'collapseBtn272')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn272" onclick="toggleCodeBlock('cloneGroup272', 'expandBtn272', 'collapseBtn272')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup272"><code class="language-javascript text-sm text-gray-800">={onClose}
            className=&quot;text-gray-400 hover:text-white transition-colors flex items-center space-x-2&quot;
          &gt;
            &lt;span&gt;←&lt;/span&gt;
            &lt;span&gt;Back to canvas&lt;/span&gt;
          &lt;/button&gt;
          &lt;div className=&quot;flex items-center space-x-2 text-sm text-gray-400&quot;&gt;
            &lt;span&gt;/&lt;/span&gt;
            &lt;span&gt;{nodeDefinition.displayName}&lt;/span&gt;
            &lt;span className=&quot;text-xs px-2 py-1 bg-gray-700 rounded&quot;&gt;{currentNode.type}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
          &lt;button
            onClick={handleSaveWorkflow}
            disabled={isSaving || !currentWorkflow}
            className=&quot;flex items-center space-x-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-sm rounded transition-colors&quot;
            title=&quot;Save workflow without closing modal&quot;
          &gt;
            &lt;SaveOutlined className={isSaving ? 'animate-spin' : ''} /&gt;
            &lt;span&gt;{isSaving ? 'Saving...' : 'Save'}&lt;/span&gt;
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex flex-1 overflow-hidden&quot;&gt;
        {/* Left Column: Input Data */}
        &lt;div
          className=&quot;bg-gray-900 border-r border-gray-600 flex flex-col&quot;
          style={{ width: `${leftWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
              INPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {(enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail')) &amp;&amp;
            testResults?.data &amp;&amp;
            Array.isArray(testResults.data) &amp;&amp;
            testResults.data.length &gt; 0 ? (
              &lt;EmailInputPanel
                emails={testResults.data}
                selectedEmailId={selectedEmail?.id}
                onEmailSelect={setSelectedEmail}
              /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent input data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'condition' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Condition input data would appear here&lt;/div&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={inputData}
                title=&quot;Input Data&quot;
                description=&quot;Data from connected nodes&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Middle Column: Parameters &amp; Settings */}
        &lt;div
          className=&quot;bg-gray-800 flex flex-col border-l border-r border-gray-600&quot;
          style={{ width: `${middleWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-700 flex items-center justify-between flex-shrink-0&quot;&gt;
            &lt;div
              className=&quot;cursor-col-resize p-2 hover:bg-gray-600 rounded mr-2 flex items-center&quot;
              onMouseDown={handleMouseDown}
              title=&quot;Drag to resize column width&quot;
            &gt;
              &lt;div className=&quot;text-gray-300 text-xs font-mono&quot;&gt;⋮⋮&lt;/div&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;h2 className=&quot;text-lg font-semibold text-white&quot;&gt;{nodeDefinition.displayName}&lt;/h2&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button
                onClick={handleTestNode}
                disabled={isTestingNode}
                className={`px-3 py-1 rounded text-sm transition-colors ${
                  isTestingNode
                    ? 'bg-yellow-600 text-white cursor-wait'
                    : 'bg-green-600 hover:bg-green-700 text-white'
                }`}
              &gt;
                {isTestingNode ? '⏳ Testing...' : '🧪 Test step'}
              &lt;/button&gt;

              {/* Debug: Test credential modal button */}
              &lt;button
                onClick={() =&gt; {
                  handleCreateCredential('gmailOAuth2');
                }}
                className=&quot;px-2 py-1 rounded text-xs bg-purple-600 hover:bg-purple-700 text-white transition-colors&quot;
              &gt;
                🔧 Test Modal
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 p-6 overflow-y-auto&quot;&gt;
            {/* Use enhanced property rendering for Transform nodes and other enhanced types */}
            {currentNode?.type === 'transform' || enhancedNodeType?.id ? (
              &lt;PropertyGroupRenderer
                properties={
                  registryProperties as Array&lt;
                    INodeProperty &amp; { displayOptions?: EnhancedDisplayOptions }
                  &gt;
                }
                values={formState}
                onChange={handleParameterChange}
                evaluationContext={{
                  $json: inputData,
                  $node: {},
                  $vars: {},
                  $parameters: formState,
                }}
                context={evaluationContext}
              /&gt;
            ) : (
              &lt;DynamicPropertyRenderer
                properties={registryProperties as INodeProperty[]}
                formState={formState}
                onChange={handleParameterChange}
                context={evaluationContext}
              /&gt;
            )}

            {/* Display test results */}
            {testResults &amp;&amp; (
              &lt;div className=&quot;mt-6 p-4 rounded border-l-4 border-l-blue-500 bg-gray-700&quot;&gt;
                &lt;h4 className=&quot;text-white font-medium mb-2&quot;&gt;Test Results&lt;/h4&gt;
                &lt;div
                  className={`text-sm ${testResults.success ? 'text-green-400' : 'text-red-400'}`}
                &gt;
                  {testResults.message}
                &lt;/div&gt;
                {testResults.data &amp;&amp; (
                  &lt;div className=&quot;mt-2 text-xs text-gray-300&quot;&gt;
                    {Array.isArray(testResults.data)
                      ? `Found ${testResults.data.length} items`
                      : 'Data received'}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Column: Output Data */}
        &lt;div
          className=&quot;bg-gray-900 border-l border-gray-600 flex flex-col&quot;
          style={{ width: rightWidth, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
              OUTPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail') ? (
              &lt;EmailOutputPanel selectedEmail={selectedEmail} /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent output data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'transform' ? (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Transform Output&quot;
                description=&quot;Transformed data output&quot;
              /&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Output Data&quot;
                description=&quot;Output from node execution&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Credential Modal */}
      &lt;CredentialModal
        isOpen={isCredentialModalOpen}
        onClose={() =&gt; {
          setIsCredentialModalOpen(false);
        }}
        credentialType={currentCredentialType}
        onSave={handleSaveCredential}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionToolbar.tsx (Line 211:5 - Line 280:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executiontoolbar/ExecutionToolbar.tsx (Line 212:5 - Line 281:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn274" onclick="toggleCodeBlock('cloneGroup274', 'expandBtn274', 'collapseBtn274')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn274" onclick="toggleCodeBlock('cloneGroup274', 'expandBtn274', 'collapseBtn274')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup274"><code class="language-javascript text-sm text-gray-800">={&lt;StopOutlined /&gt;} onClick={handleStop} size=&quot;small&quot;&gt;
              Stop
            &lt;/Button&gt;
          ) : (
            &lt;Dropdown
              menu={{ items: runMenuItems }}
              trigger={['click']}
              disabled={nodes.length === 0}
            &gt;
              &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} loading={testing} size=&quot;small&quot;&gt;
                Run &lt;DownOutlined /&gt;
              &lt;/Button&gt;
            &lt;/Dropdown&gt;
          )}

          {/* Test button */}
          &lt;Button
            icon={&lt;BugOutlined /&gt;}
            onClick={handleTest}
            disabled={nodes.length === 0}
            size=&quot;small&quot;
          &gt;
            Test
          &lt;/Button&gt;

          {/* Execution status */}
          {currentExecution &amp;&amp; (
            &lt;Badge
              status={
                currentExecution.status === 'running'
                  ? 'processing'
                  : currentExecution.status === 'completed'
                    ? 'success'
                    : currentExecution.status === 'failed'
                      ? 'error'
                      : 'default'
              }
              text={
                &lt;span className=&quot;text-sm&quot;&gt;
                  {currentExecution.status === 'running'
                    ? `Running (${(currentExecution as any).progress?.completedNodes?.length || 0}/${(currentExecution as any).progress?.totalNodes || 0})`
                    : `${currentExecution.status} - ${Math.round((currentExecution.duration || 0) / 1000)}s`}
                &lt;/span&gt;
              }
            /&gt;
          )}
        &lt;/Space&gt;

        &lt;Space&gt;
          {/* Workflow info */}
          &lt;span className=&quot;text-sm text-gray-500&quot;&gt;
            {nodes.length} nodes • {edges.length} connections
          &lt;/span&gt;

          {/* More actions */}
          &lt;Dropdown menu={{ items: moreMenuItems }} trigger={['click']}&gt;
            &lt;Button icon={&lt;SettingOutlined /&gt;} size=&quot;small&quot;&gt;
              &lt;DownOutlined /&gt;
            &lt;/Button&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Workflow Tester Modal */}
      {showTester &amp;&amp; (
        &lt;WorkflowTester nodes={nodes} edges={edges} onClose={() =&gt; setShowTester(false)} /&gt;
      )}

      {/* Execution History Modal */}
      {showHistory &amp;&amp; &lt;ExecutionHistory onClose={() =&gt; setShowHistory(false)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionPanel.tsx (Line 131:8 - Line 377:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executionpanel/ExecutionPanel.tsx (Line 135:8 - Line 381:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn276" onclick="toggleCodeBlock('cloneGroup276', 'expandBtn276', 'collapseBtn276')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn276" onclick="toggleCodeBlock('cloneGroup276', 'expandBtn276', 'collapseBtn276')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup276"><code class="language-javascript text-sm text-gray-800">={() =&gt; setAutoScroll(!autoScroll)}
              className={cn(
                'text-xs px-2 py-1 rounded',
                autoScroll ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300'
              )}
            &gt;
              Auto-scroll
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; {
                // Clear logs implementation
              }}
              className=&quot;text-xs px-2 py-1 rounded bg-gray-700 text-gray-300 hover:bg-gray-600&quot;
            &gt;
              Clear
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div
          ref={consoleRef}
          className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto text-xs font-mono&quot;
        &gt;
          {logs.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No logs yet. Execute a workflow to see real-time logs.
            &lt;/div&gt;
          ) : (
            logs.map((log, index) =&gt; (
              &lt;div
                key={index}
                className={cn(
                  'mb-1 p-1 rounded',
                  log.level === 'error' &amp;&amp; 'bg-red-900 text-red-200',
                  log.level === 'warn' &amp;&amp; 'bg-yellow-900 text-yellow-200',
                  log.level === 'info' &amp;&amp; 'text-gray-300',
                  log.level === 'debug' &amp;&amp; 'text-gray-500'
                )}
              &gt;
                &lt;span className=&quot;text-gray-500&quot;&gt;
                  [{new Date(log.timestamp).toLocaleTimeString()}]
                &lt;/span&gt;
                &lt;span className=&quot;ml-2 text-blue-400&quot;&gt;[{log.nodeId}]&lt;/span&gt;
                &lt;span className=&quot;ml-2&quot;&gt;{log.message}&lt;/span&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderVariablesTab = () =&gt; {
    const variables = getExecutionVariables();

    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Variables&lt;/h3&gt;
        &lt;div className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto&quot;&gt;
          {Object.keys(variables).length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No variables available. Execute nodes to see output data.
            &lt;/div&gt;
          ) : (
            Object.entries(variables).map(([key, value]) =&gt; (
              &lt;div key={key} className=&quot;mb-3 p-2 bg-gray-800 rounded&quot;&gt;
                &lt;div className=&quot;text-blue-400 text-xs font-mono mb-1&quot;&gt;{key}&lt;/div&gt;
                &lt;div className=&quot;text-gray-300 text-xs break-all&quot;&gt;
                  &lt;pre className=&quot;whitespace-pre-wrap&quot;&gt;
                    {typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value)}
                  &lt;/pre&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderMetricsTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Performance Metrics&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-3&quot;&gt;
          {/* Execution time metrics */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Node Execution Times&lt;/h4&gt;
            {performanceMetrics.nodeExecutionTimes.size === 0 ? (
              &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;No timing data available&lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {Array.from(performanceMetrics.nodeExecutionTimes.entries()).map(
                  ([nodeId, time]) =&gt; (
                    &lt;div key={nodeId} className=&quot;flex justify-between text-xs&quot;&gt;
                      &lt;span className=&quot;text-blue-400&quot;&gt;{nodeId}&lt;/span&gt;
                      &lt;span className=&quot;text-gray-300&quot;&gt;
                        {time &lt; 1000 ? `${time}ms` : `${(time / 1000).toFixed(2)}s`}
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;

          {/* Resource usage */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Resource Usage&lt;/h4&gt;
            &lt;div className=&quot;space-y-1 text-xs&quot;&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Peak Memory:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.peakMemory
                    ? `${(performanceMetrics.resourceUsage.peakMemory / 1024 / 1024).toFixed(1)} MB`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;CPU Time:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.totalCpuTime
                    ? `${performanceMetrics.resourceUsage.totalCpuTime}ms`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Network Requests:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.networkRequests || 0}
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderHistoryTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Execution History&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-2 overflow-y-auto&quot;&gt;
          {executionHistory.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;No execution history&lt;/div&gt;
          ) : (
            executionHistory.slice(0, 10).map((execution) =&gt; (
              &lt;div
                key={execution.id}
                className=&quot;bg-gray-900 rounded border border-gray-700 p-2 hover:bg-gray-800 cursor-pointer&quot;
              &gt;
                &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                  &lt;div className=&quot;flex-1&quot;&gt;
                    &lt;div
                      className={cn(
                        'text-xs font-medium',
                        execution.status === 'completed' &amp;&amp; 'text-green-400',
                        execution.status === 'failed' &amp;&amp; 'text-red-400',
                        execution.status === 'running' &amp;&amp; 'text-blue-400'
                      )}
                    &gt;
                      {execution.status.toUpperCase()}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;
                      {execution.startTime &amp;&amp; new Date(execution.startTime).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                    {execution.duration &amp;&amp; `${(execution.duration / 1000).toFixed(1)}s`}
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!isVisible) {
    return (
      &lt;button
        onClick={onToggle}
        className={cn(
          'fixed z-40 bg-gray-800 text-white p-2 rounded-l shadow-lg hover:bg-gray-700 transition-colors',
          position === 'right'
            ? 'right-0 top-1/2 -translate-y-1/2'
            : 'bottom-0 left-1/2 -translate-x-1/2 rounded-t'
        )}
        title=&quot;Show execution panel&quot;
      &gt;
        {position === 'right' ? '←' : '↑'} Execution
      &lt;/button&gt;
    );
  }

  return (
    &lt;div
      className={cn(
        'fixed z-30 bg-gray-800 border-l border-gray-700 shadow-xl',
        position === 'right' ? 'right-0 top-0 h-full w-80' : 'bottom-0 left-0 right-0 h-80 border-t'
      )}
    &gt;
      {/* Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;h2 className=&quot;text-sm font-semibold text-white&quot;&gt;Execution Monitor&lt;/h2&gt;
          &lt;div
            className={cn('w-2 h-2 rounded-full', isConnected ? 'bg-green-500' : 'bg-red-500')}
            title={isConnected ? 'Connected' : 'Disconnected'}
          /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;button
            onClick={() =&gt; setDebugMode(!debugMode)}
            className={cn(
              'text-xs px-2 py-1 rounded',
              debugMode ? 'bg-yellow-600 text-white' : 'bg-gray-700 text-gray-300'
            )}
          &gt;
            Debug
          &lt;/button&gt;
          &lt;button onClick={onToggle} className=&quot;text-gray-400 hover:text-white&quot;&gt;
            ✕
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Progress bar */}
      {currentExecution &amp;&amp; (
        &lt;div className=&quot;p-3 border-b border-gray-700&quot;&gt;{renderProgressBar()}&lt;/div&gt;
      )}

      {/* Tabs */}
      &lt;div className=&quot;flex border-b border-gray-700&quot;&gt;
        {(['console', 'variables', 'metrics', 'history'] as const).map((tab) =&gt; (
          &lt;button
            key={tab}
            onClick={() =&gt; setActiveTab(tab)}
            className={cn(
              'px-3 py-2 text-xs font-medium border-b-2 transition-colors',
              activeTab === tab
                ? 'border-blue-500 text-blue-400'
                : 'border-transparent text-gray-400 hover:text-gray-200'
            )}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EnhancedPropertyRenderer.tsx (Line 76:6 - Line 477:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 80:6 - Line 481:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn278" onclick="toggleCodeBlock('cloneGroup278', 'expandBtn278', 'collapseBtn278')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn278" onclick="toggleCodeBlock('cloneGroup278', 'expandBtn278', 'collapseBtn278')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup278"><code class="language-javascript text-sm text-gray-800">={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            value={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            rows={4}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'boolean':
        return &lt;Switch checked={value || false} onChange={onChange} disabled={disabled} /&gt;;

      case 'select':
        return (
          &lt;Select
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
        return (
          &lt;Select
            mode=&quot;multiple&quot;
            value={value || []}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            showTime
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={value}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={disabled}
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            beforeUpload={() =&gt; false}
            onChange={(info) =&gt; {
              if (info.file) {
                onChange(info.file);
              }
            }}
            disabled={disabled}
          &gt;
            &lt;Button icon={&lt;PlusOutlined /&gt;} disabled={disabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={typeof value === 'string' ? value : JSON.stringify(value, null, 2)}
              onChange={(e) =&gt; {
                try {
                  const parsed = JSON.parse(e.target.value);
                  onChange(parsed);
                } catch {
                  onChange(e.target.value);
                }
              }}
              placeholder={property.placeholder}
              disabled={disabled}
              rows={6}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            {value &amp;&amp; typeof value === 'object' &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;Button size=&quot;small&quot; onClick={() =&gt; setIsExpanded(!isExpanded)} type=&quot;text&quot;&gt;
                  {isExpanded ? 'Collapse' : 'Expand'} JSON
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      case 'expression':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={value || ''}
              onChange={(e) =&gt; onChange(e.target.value)}
              placeholder={property.placeholder || 'Enter JavaScript expression...'}
              disabled={disabled}
              rows={3}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
              Use $input to reference input data, e.g., $input.user.name
            &lt;/div&gt;
          &lt;/div&gt;
        );

      case 'collection':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {(value || []).map((item: any, index: number) =&gt; (
              &lt;Card
                key={index}
                size=&quot;small&quot;
                className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
                title={`Item ${index + 1}`}
                extra={
                  &lt;Button
                    type=&quot;text&quot;
                    danger
                    size=&quot;small&quot;
                    icon={&lt;DeleteOutlined /&gt;}
                    onClick={() =&gt; {
                      const newValue = [...(value || [])];
                      newValue.splice(index, 1);
                      onChange(newValue);
                    }}
                    disabled={disabled}
                  /&gt;
                }
              &gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {property.collectionSchema?.map((field: any) =&gt; (
                    &lt;div key={field.name}&gt;
                      &lt;label className=&quot;text-sm font-medium text-gray-300&quot;&gt;
                        {field.label || field.name}
                      &lt;/label&gt;
                      &lt;PropertyField
                        property={field}
                        value={item[field.name]}
                        onChange={(fieldValue) =&gt; {
                          const newValue = [...(value || [])];
                          newValue[index] = { ...newValue[index], [field.name]: fieldValue };
                          onChange(newValue);
                        }}
                        disabled={disabled}
                        theme={theme}
                      /&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/Card&gt;
            ))}
            &lt;Button
              type=&quot;dashed&quot;
              onClick={() =&gt; {
                const newValue = [...(value || []), {}];
                onChange(newValue);
              }}
              disabled={disabled}
              className=&quot;w-full&quot;
            &gt;
              &lt;PlusOutlined /&gt; Add Item
            &lt;/Button&gt;
          &lt;/div&gt;
        );

      case 'credentialsSelect':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;Select
              value={value?.credentialId}
              onChange={(credentialId) =&gt; onChange({ ...value, credentialId })}
              placeholder=&quot;Select credential&quot;
              disabled={disabled}
              className=&quot;w-full&quot;
              style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
            &gt;
              {/* This would be populated with available credentials */}
              &lt;Option value=&quot;gmail-oauth&quot;&gt;Gmail OAuth&lt;/Option&gt;
              &lt;Option value=&quot;openai-api&quot;&gt;OpenAI API Key&lt;/Option&gt;
            &lt;/Select&gt;
            {value?.credentialId &amp;&amp; (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Tag color=&quot;green&quot;&gt;Connected&lt;/Tag&gt;
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Test Connection
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      default:
        return (
          &lt;Alert message={`Unsupported property type: ${property.type}`} type=&quot;warning&quot; showIcon /&gt;
        );
    }
  };

  return (
    &lt;div className=&quot;space-y-1&quot;&gt;
      {renderField()}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-500 flex items-center gap-1&quot;&gt;
          &lt;InfoCircleOutlined /&gt;
          {property.description}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export const EnhancedPropertyRenderer: React.FC&lt;EnhancedPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  onValidationChange,
  theme = 'dark',
  disabled = false,
}) =&gt; {
  const [validationErrors, setValidationErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const validateProperty = useCallback((property: INodeProperty, value: any): string | null =&gt; {
    // Required validation
    if (property.required &amp;&amp; (!value || value === '')) {
      return `${property.label || property.name} is required`;
    }

    // Type-specific validation
    switch (property.type) {
      case 'string':
      case 'text':
        if (property.maxLength &amp;&amp; value &amp;&amp; value.length &gt; property.maxLength) {
          return `Maximum length is ${property.maxLength} characters`;
        }
        if (property.minLength &amp;&amp; value &amp;&amp; value.length &lt; property.minLength) {
          return `Minimum length is ${property.minLength} characters`;
        }
        if (property.pattern &amp;&amp; value &amp;&amp; !new RegExp(property.pattern).test(value)) {
          return `Value must match pattern: ${property.pattern}`;
        }
        break;

      case 'number':
        if (property.min !== undefined &amp;&amp; value &lt; property.min) {
          return `Minimum value is ${property.min}`;
        }
        if (property.max !== undefined &amp;&amp; value &gt; property.max) {
          return `Maximum value is ${property.max}`;
        }
        break;

      case 'json':
        if (value &amp;&amp; typeof value === 'string') {
          try {
            JSON.parse(value);
          } catch {
            return 'Invalid JSON format';
          }
        }
        break;
    }

    return null;
  }, []);

  const validateAll = useCallback(() =&gt; {
    const errors = new Map&lt;string, string&gt;();

    properties.forEach((property) =&gt; {
      const value = formState[property.name];
      const error = validateProperty(property, value);
      if (error) {
        errors.set(property.name, error);
      }
    });

    setValidationErrors(errors);
    onValidationChange?.({
      isValid: errors.size === 0,
      errors,
    });

    return errors.size === 0;
  }, [properties, formState, validateProperty, onValidationChange]);

  // Validate on form state change
  React.useEffect(() =&gt; {
    validateAll();
  }, [validateAll]);

  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      onChange(name, value);
    },
    [onChange]
  );

  const visibleProperties = useMemo(() =&gt; {
    return properties.filter((property) =&gt; {
      // Simple visibility logic - can be enhanced with complex conditions
      if (property.displayOptions?.show) {
        const conditions = property.displayOptions.show;
        return Object.entries(conditions).every(([key, values]) =&gt; {
          const formValue = formState[key];
          return (values as any[]).includes(formValue);
        });
      }
      return true;
    });
  }, [properties, formState]);

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {visibleProperties.map((property) =&gt; {
        const error = validationErrors.get(property.name);
        const value = formState[property.name];

        return (
          &lt;div key={property.name} className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;label className=&quot;text-sm font-medium text-gray-300 flex items-center gap-2&quot;&gt;
                {property.label || property.name}
                {property.required &amp;&amp; &lt;span className=&quot;text-red-400&quot;&gt;*&lt;/span&gt;}
                {property.description &amp;&amp; (
                  &lt;Tooltip title={property.description}&gt;
                    &lt;InfoCircleOutlined className=&quot;text-gray-500&quot; /&gt;
                  &lt;/Tooltip&gt;
                )}
              &lt;/label&gt;
              {error &amp;&amp; (
                &lt;Tooltip title={error}&gt;
                  &lt;ExclamationCircleOutlined className=&quot;text-red-400&quot; /&gt;
                &lt;/Tooltip&gt;
              )}
            &lt;/div&gt;

            &lt;PropertyField
              property={property}
              value={value}
              onChange={(newValue) =&gt; handlePropertyChange(property.name, newValue)}
              disabled={disabled}
              theme={theme}
            /&gt;

            {error &amp;&amp; &lt;Alert message={error}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailOutputPanel.tsx (Line 93:4 - Line 306:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 95:4 - Line 213:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn280" onclick="toggleCodeBlock('cloneGroup280', 'expandBtn280', 'collapseBtn280')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn280" onclick="toggleCodeBlock('cloneGroup280', 'expandBtn280', 'collapseBtn280')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup280"><code class="language-javascript text-sm text-gray-800">={path} className=&quot;border-b border-gray-700 last:border-b-0&quot;&gt;
        &lt;div
          className={`flex items-center py-2 px-3 hover:bg-gray-700 transition-colors ${nestLevel &gt; 0 ? 'pl-8' : ''}`}
          style={{ paddingLeft: `${nestLevel * 24 + 12}px` }}
        &gt;
          {/* Toggle button for expandable items */}
          {hasChildren &amp;&amp; (
            &lt;button
              onClick={() =&gt; toggleExpanded(path)}
              className=&quot;mr-2 p-1 hover:bg-gray-600 rounded&quot;
            &gt;
              {isExpanded ? (
                &lt;ChevronDown className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              ) : (
                &lt;ChevronRight className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              )}
            &lt;/button&gt;
          )}
          {!hasChildren &amp;&amp; &lt;div className=&quot;w-6 mr-2&quot; /&gt;}

          {/* Property name pill */}
          &lt;div className=&quot;flex items-center bg-gray-600 rounded px-2 py-1 mr-3 min-w-0&quot;&gt;
            &lt;div className=&quot;mr-2 flex-shrink-0&quot;&gt;{getTypeIcon(value)}&lt;/div&gt;
            &lt;span className=&quot;text-sm font-medium text-white truncate&quot;&gt;
              {Array.isArray(value) ? `${key}` : key}
            &lt;/span&gt;
          &lt;/div&gt;

          {/* Value display */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            {!hasChildren ? (
              &lt;span className=&quot;text-sm text-gray-300 break-all&quot;&gt;
                {typeof value === 'string' &amp;&amp; value.includes('\n') ? (
                  &lt;div className=&quot;whitespace-pre-wrap&quot;&gt;{value}&lt;/div&gt;
                ) : (
                  String(value)
                )}
              &lt;/span&gt;
            ) : (
              &lt;span className=&quot;text-sm text-gray-400&quot;&gt;
                {Array.isArray(value) ? `Array (${value.length} items)` : 'Object'}
              &lt;/span&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Render children if expanded */}
        {hasChildren &amp;&amp; isExpanded &amp;&amp; (
          &lt;div&gt;
            {Array.isArray(value)
              ? value.map((item, index) =&gt;
                  renderSchemaItem(`[${index}]`, item, `${path}[${index}]`, nestLevel + 1)
                )
              : Object.entries(value).map(([childKey, childValue]) =&gt;
                  renderSchemaItem(childKey, childValue, `${path}.${childKey}`, nestLevel + 1)
                )}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    );
  };

  // Render table view
  const renderTableView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    const flattenObject = (obj: any, prefix = ''): Record&lt;string, any&gt; =&gt; {
      const result: Record&lt;string, any&gt; = {};

      for (const [key, value] of Object.entries(obj)) {
        const newKey = prefix ? `${prefix}.${key}` : key;

        if (Array.isArray(value)) {
          result[newKey] = value.join(', ');
        } else if (typeof value === 'object' &amp;&amp; value !== null) {
          // For nested objects, show a preview
          result[newKey] = `Object (${Object.keys(value).length} properties)`;
        } else {
          result[newKey] = value;
        }
      }

      return result;
    };

    const flatData = flattenObject(selectedEmail);

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;table className=&quot;w-full text-sm&quot;&gt;
          &lt;thead&gt;
            &lt;tr className=&quot;border-b border-gray-600&quot;&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Property&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Value&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Type&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            {Object.entries(flatData).map(([key, value]) =&gt; (
              &lt;tr key={key} className=&quot;border-b border-gray-700 hover:bg-gray-700&quot;&gt;
                &lt;td className=&quot;py-2 px-3 text-blue-300 font-mono text-xs&quot;&gt;{key}&lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-300 break-all&quot;&gt;
                  {typeof value === 'string' &amp;&amp; value.length &gt; 100
                    ? `${value.substring(0, 100)}...`
                    : String(value)}
                &lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-400 text-xs&quot;&gt;{typeof value}&lt;/td&gt;
              &lt;/tr&gt;
            ))}
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    );
  };

  // Render JSON view
  const renderJsonView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;pre className=&quot;text-sm text-gray-300 whitespace-pre-wrap p-4 bg-gray-900 rounded border border-gray-600 font-mono&quot;&gt;
          {JSON.stringify(filteredData || selectedEmail, null, 2)}
        &lt;/pre&gt;
      &lt;/div&gt;
    );
  };

  const renderContent = () =&gt; {
    if (!selectedEmail) {
      return (
        &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
              &lt;span className=&quot;text-2xl&quot;&gt;📧&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;p className=&quot;mb-2&quot;&gt;Select an email from the input column&lt;/p&gt;
          &lt;p className=&quot;text-gray-400&quot;&gt;to view its detailed structure&lt;/p&gt;
        &lt;/div&gt;
      );
    }

    switch (displayMode) {
      case 'schema':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            {filteredData ? (
              Object.entries(filteredData).map(([key, value]) =&gt; renderSchemaItem(key, value, key))
            ) : (
              &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No matching data found&lt;/div&gt;
            )}
          &lt;/div&gt;
        );
      case 'table':
        return renderTableView();
      case 'json':
        return renderJsonView();
      default:
        return null;
    }
  };

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
            OUTPUT
            {selectedEmail &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Email selected&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {selectedEmail &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search email data&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailInputPanel.tsx (Line 112:6 - Line 236:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailinputpanel/EmailInputPanel.tsx (Line 113:6 - Line 237:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn282" onclick="toggleCodeBlock('cloneGroup282', 'expandBtn282', 'collapseBtn282')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn282" onclick="toggleCodeBlock('cloneGroup282', 'expandBtn282', 'collapseBtn282')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup282"><code class="language-javascript text-sm text-gray-800">={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              placeholder=&quot;Search emails...&quot;
              className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
            /&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Email List */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;
        {emails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
                &lt;Mail className=&quot;w-8 h-8 text-gray-400&quot; /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;p className=&quot;mb-2&quot;&gt;No emails loaded&lt;/p&gt;
            &lt;p className=&quot;text-gray-400&quot;&gt;Test the Gmail trigger to see emails&lt;/p&gt;
          &lt;/div&gt;
        ) : filteredEmails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;p&gt;No emails match your search&lt;/p&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-1 p-2&quot;&gt;
            {filteredEmails.map((email, index) =&gt; {
              const isSelected = selectedEmailId === email.id;
              const senderName = getSenderName(email.from);
              const avatarColor = getAvatarColor(email.from);

              return (
                &lt;div
                  key={email.id || index}
                  onClick={() =&gt; onEmailSelect(email)}
                  className={`p-3 rounded-lg cursor-pointer transition-all duration-200 border ${
                    isSelected
                      ? 'bg-blue-600 border-blue-500 text-white'
                      : 'bg-gray-800 border-gray-700 hover:bg-gray-700 hover:border-gray-600 text-gray-100'
                  }`}
                &gt;
                  &lt;div className=&quot;flex items-start space-x-3&quot;&gt;
                    {/* Avatar */}
                    &lt;div
                      className={`w-8 h-8 rounded-full ${avatarColor} flex items-center justify-center flex-shrink-0 text-white text-sm font-medium`}
                    &gt;
                      {senderName.charAt(0).toUpperCase()}
                    &lt;/div&gt;

                    {/* Email Content */}
                    &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
                      {/* Header */}
                      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
                        &lt;div className=&quot;flex items-center space-x-2 min-w-0&quot;&gt;
                          &lt;span
                            className={`font-medium text-sm truncate ${
                              isSelected ? 'text-white' : 'text-gray-200'
                            }`}
                          &gt;
                            {senderName}
                          &lt;/span&gt;

                          {/* Indicators */}
                          &lt;div className=&quot;flex items-center space-x-1 flex-shrink-0&quot;&gt;
                            {email.hasAttachments &amp;&amp; (
                              &lt;Paperclip className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                            )}
                            {email.isUnread &amp;&amp; (
                              &lt;div className=&quot;w-2 h-2 bg-blue-400 rounded-full&quot;&gt;&lt;/div&gt;
                            )}
                            {email.labels?.includes('STARRED') &amp;&amp; (
                              &lt;Star className=&quot;w-3 h-3 text-yellow-400 fill-current&quot; /&gt;
                            )}
                          &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div className=&quot;flex items-center space-x-2 flex-shrink-0&quot;&gt;
                          &lt;Clock className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                          &lt;span
                            className={`text-xs ${isSelected ? 'text-blue-100' : 'text-gray-400'}`}
                          &gt;
                            {formatDate(email.date)}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      {/* Subject */}
                      &lt;div
                        className={`text-sm font-medium mb-1 truncate ${
                          isSelected ? 'text-white' : 'text-gray-100'
                        }`}
                      &gt;
                        {email.subject || '(No subject)'}
                      &lt;/div&gt;

                      {/* Snippet */}
                      &lt;div
                        className={`text-xs leading-relaxed line-clamp-2 ${
                          isSelected ? 'text-blue-100' : 'text-gray-400'
                        }`}
                      &gt;
                        {email.snippet || email.body || 'No content preview available'}
                      &lt;/div&gt;

                      {/* Labels */}
                      {email.labels &amp;&amp; email.labels.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;flex flex-wrap gap-1 mt-2&quot;&gt;
                          {email.labels.slice(0, 3).map((label: string) =&gt; (
                            &lt;span
                              key={label}
                              className={`px-2 py-1 text-xs rounded-full ${
                                isSelected
                                  ? 'bg-blue-700 text-blue-100'
                                  : 'bg-gray-700 text-gray-300'
                              }`}
                            &gt;
                              {label}
                            &lt;/span&gt;
                          ))}
                          {email.labels.length &gt; 3 &amp;&amp; (
                            &lt;span
                              className={`text-xs ${
                                isSelected ? 'text-blue-200' : 'text-gray-400'
                              }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DynamicPropertyRenderer.tsx (Line 167:6 - Line 751:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 172:6 - Line 756:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn284" onclick="toggleCodeBlock('cloneGroup284', 'expandBtn284', 'collapseBtn284')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn284" onclick="toggleCodeBlock('cloneGroup284', 'expandBtn284', 'collapseBtn284')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup284"><code class="language-javascript text-sm text-gray-800">={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={property.rows || 4}
            autoSize={{ minRows: property.rows || 4, maxRows: 10 }}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            value={value as number}
            onChange={(val) =&gt; onChange(val)}
            min={property.min}
            max={property.max}
            step={property.step || 1}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch checked={(value as boolean) || false} onChange={onChange} disabled={isDisabled} /&gt;
        );

      case 'select':
        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={onChange}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={(value as string[]) || []}
            onChange={onChange}
            className=&quot;ant-select-multiple&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            tagRender={(props) =&gt; {
              const { label, closable, onClose } = props;
              return (
                &lt;span
                  style={{
                    backgroundColor: '#1f2937',
                    border: '1px solid #4b5563',
                    color: '#ffffff',
                    borderRadius: '4px',
                    padding: '2px 8px',
                    margin: '2px',
                    display: 'inline-flex',
                    alignItems: 'center',
                    fontSize: '12px',
                  }}
                &gt;
                  {label}
                  {closable &amp;&amp; (
                    &lt;span
                      onClick={onClose}
                      style={{
                        marginLeft: '4px',
                        cursor: 'pointer',
                        color: '#9ca3af',
                      }}
                      onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ffffff')}
                      onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#9ca3af')}
                    &gt;
                      ×
                    &lt;/span&gt;
                  )}
                &lt;/span&gt;
              );
            }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'credentialsSelect': {
        // Get available credentials from context (registry system)
        const credentialTypes = property.credentialTypes || [];
        const availableCredentials =
          context.credentials?.filter(
            (cred: any) =&gt; credentialTypes.length === 0 || credentialTypes.includes(cred.type)
          ) || [];

        // Debug logging for credential filtering
        if (property.name === 'credential' &amp;&amp; credentialTypes.includes('gmailOAuth2')) {
        }

        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={(selectedValue) =&gt; {
              onChange(selectedValue);

              // Sync with the other credential field
              if (context.onCredentialChange) {
                context.onCredentialChange(selectedValue);
              }

              // Trigger auto-population if a credential is selected
              if (selectedValue &amp;&amp; context.onCredentialSelect) {
                const selectedCredential = availableCredentials.find(
                  (cred: any) =&gt; cred.id === selectedValue
                );
                if (selectedCredential) {
                  context.onCredentialSelect(selectedCredential);
                }
              }
            }}
            placeholder=&quot;Select a credential...&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            dropdownRender={(menu) =&gt; (
              &lt;div&gt;
                {menu}
                {credentialTypes.length &gt; 0 &amp;&amp; (
                  &lt;div
                    style={{
                      padding: '8px',
                      borderTop: '1px solid #6b7280',
                      backgroundColor: '#374151',
                    }}
                  &gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      onClick={() =&gt; {
                        // Trigger credential creation modal
                        if (context.onCreateCredential) {
                          context.onCreateCredential(credentialTypes[0]);
                        } else {
                        }
                      }}
                      style={{
                        color: '#3b82f6',
                        padding: '2px 8px',
                        height: 'auto',
                      }}
                    &gt;
                      + Create New Credential
                    &lt;/Button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &gt;
            &lt;Option value=&quot;&quot; style={{ backgroundColor: '#374151', color: '#ffffff' }}&gt;
              No credential selected
            &lt;/Option&gt;
            {availableCredentials.map((credential: any) =&gt; {
              const credTypeDef = context.credentialTypes?.find(
                (ct: any) =&gt; ct.name === credential.type
              );
              const icon =
                credTypeDef?.icon &amp;&amp; typeof credTypeDef.icon === 'string'
                  ? credTypeDef.icon
                  : getCredentialIcon(credential.type);
              const displayName =
                credential.name || `${credTypeDef?.displayName || credential.type} Credential`;

              return (
                &lt;Option
                  key={credential.id}
                  value={credential.id}
                  style={{ backgroundColor: '#374151', color: '#ffffff' }}
                &gt;
                  &lt;div
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '8px',
                    }}
                  &gt;
                    &lt;span style={{ fontSize: '14px' }}&gt;{icon}&lt;/span&gt;
                    &lt;div style={{ flex: 1 }}&gt;
                      &lt;div style={{ fontWeight: 500 }}&gt;{displayName}&lt;/div&gt;
                      &lt;div style={{ fontSize: '11px', color: '#9ca3af' }}&gt;
                        {credential.testedAt
                          ? credential.isValid
                            ? '✓ Tested'
                            : '⚠ Test failed'
                          : 'Not tested'}
                        {credential.updatedAt &amp;&amp; (
                          &lt;span style={{ marginLeft: '8px' }}&gt;
                            {new Date(credential.updatedAt).toLocaleDateString()}
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div style={{ display: 'flex', gap: '4px' }}&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onEditCredential) {
                            context.onEditCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#3b82f6')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Edit credential&quot;
                      &gt;
                        ✏️
                      &lt;/button&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onDeleteCredential &amp;&amp; confirm(`Delete &quot;${displayName}&quot;?`)) {
                            context.onDeleteCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ef4444')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Delete credential&quot;
                      &gt;
                        🗑️
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Option&gt;
              );
            })}
          &lt;/Select&gt;
        );
      }

      case 'dateTime':
        return (
          &lt;DatePicker
            {...commonProps}
            showTime
            value={value ? new Date(value as string) : null}
            onChange={(date) =&gt; onChange(date?.toISOString() || null)}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={(value as string) || '#000000'}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={isDisabled}
          /&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || '{}'}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={6}
            placeholder=&quot;Enter valid JSON...&quot;
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            {...commonProps}
            onChange={(info) =&gt; {
              if (info.file.status === 'done') {
                onChange(info.file.response?.url || info.file.name);
              }
            }}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;} disabled={isDisabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      default:
        return (
          &lt;Input
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const collectionValue = (value as any[]) || [];
    const isMultiple = property.typeOptions?.multipleValues;

    if (!isMultiple) {
      // Single collection item
      const itemValue = collectionValue[0] || {};
      return (
        &lt;Card
          size=&quot;small&quot;
          style={{
            marginBottom: 8,
            backgroundColor: themeStyles.backgroundColor,
            borderColor: themeStyles.borderColor,
            color: themeStyles.color,
          }}
        &gt;
          {property.values?.map((valueProperty: any) =&gt; (
            &lt;PropertyField
              key={valueProperty.name}
              property={valueProperty as INodeProperty}
              value={itemValue[valueProperty.name]}
              onChange={(newValue) =&gt; {
                const newItem = {
                  ...itemValue,
                  [valueProperty.name]: newValue,
                };
                onChange([newItem]);
              }}
              context={context}
              disabled={isDisabled}
              theme={theme}
            /&gt;
          ))}
        &lt;/Card&gt;
      );
    }

    // Multiple collection items
    return (
      &lt;div&gt;
        {collectionValue.map((item, index) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: 8,
              backgroundColor: themeStyles.backgroundColor,
              borderColor: themeStyles.borderColor,
              color: themeStyles.color,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;DeleteOutlined /&gt;}
                onClick={() =&gt; {
                  const newValue = collectionValue.filter((_, i) =&gt; i !== index);
                  onChange(newValue);
                }}
                disabled={isDisabled}
              /&gt;
            }
          &gt;
            {property.values?.map((valueProperty: any) =&gt; (
              &lt;PropertyField
                key={`${index}-${valueProperty.name}`}
                property={valueProperty as INodeProperty}
                value={item[valueProperty.name]}
                onChange={(newValue) =&gt; {
                  const newItems = [...collectionValue];
                  newItems[index] = {
                    ...newItems[index],
                    [valueProperty.name]: newValue,
                  };
                  onChange(newItems);
                }}
                context={context}
                disabled={isDisabled}
                theme={theme}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const defaultItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((valueProperty: any) =&gt; {
              defaultItem[valueProperty.name] =
                valueProperty.default !== undefined ? valueProperty.default : '';
            });
            onChange([...collectionValue, defaultItem]);
          }}
          disabled={isDisabled}
          block
          style={{
            backgroundColor: '#4b5563', // Darker background
            borderColor: '#6b7280', // Lighter border
            color: '#ffffff', // Pure white text
          }}
        &gt;
          {property.typeOptions?.multipleValueButtonText || `Add ${property.displayName}`}
        &lt;/Button&gt;
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    if (property.type === 'collection' || property.type === 'fixedCollection') {
      return renderCollectionField();
    }
    return renderBasicField();
  };

  return (
    &lt;div className=&quot;mb-4&quot;&gt;
      {/* Custom label for dark theme */}
      &lt;label className=&quot;block text-sm font-medium text-gray-100 mb-2&quot;&gt;
        {property.displayName}
        {evaluation.required &amp;&amp; &lt;span className=&quot;text-red-400 ml-1&quot;&gt;*&lt;/span&gt;}
      &lt;/label&gt;

      {/* Form field */}
      {renderField()}

      {/* Description */}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-300 mt-1&quot;&gt;{property.description}&lt;/div&gt;
      )}

      {/* Error messages */}
      {hasErrors &amp;&amp; (
        &lt;div className=&quot;mt-1&quot;&gt;
          &lt;div className=&quot;text-xs text-red-300&quot;&gt;Validation error occurred&lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

const DynamicPropertyRenderer: React.FC&lt;DynamicPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  context = {},
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const credentialProp = properties.find((p) =&gt; p.name === 'credential');
  if (credentialProp) {
  }

  const [localFormState, setLocalFormState] = useState&lt;PropertyFormState&gt;(formState);

  // Update local state when props change
  useEffect(() =&gt; {
    setLocalFormState(formState);
  }, [formState]);

  const evaluationContext: PropertyEvaluationContext = {
    formState: localFormState,
    nodeData: context.nodeData,
    credentials: context.credentials,
    workflow: context.workflow,
  };

  const handleChange = useCallback(
    (name: string, value: PropertyValue) =&gt; {
      const newFormState = { ...localFormState, [name]: value };
      setLocalFormState(newFormState);
      onChange(name, value);
    },
    [localFormState, onChange]
  );

  // Group properties if they have grouping information
  const groupedProperties = properties.reduce(
    (groups, property) =&gt; {
      const groupName = 'default'; // Can be extended to support property groups
      if (!groups[groupName]) {
        groups[groupName] = [];
      }
      groups[groupName].push(property);
      return groups;
    },
    {} as Record&lt;string, INodeProperty[]&gt;
  );

  return (
    &lt;div className=&quot;dynamic-property-renderer&quot;&gt;
      {Object.entries(groupedProperties).map(([groupName, groupProperties]) =&gt; (
        &lt;div key={groupName}&gt;
          {(groupProperties as INodeProperty[]).map((property: any, index: number) =&gt; (
            &lt;PropertyField
              key={`${property.name}-${index}`}
              property={property}
              value={localFormState[property.name]}
              onChange={(value) =&gt; handleChange(property.name, value)}
              context={evaluationContext}
              disabled={disabled}
              theme={theme}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DebugPanel.tsx (Line 235:6 - Line 786:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/debugpanel/DebugPanel.tsx (Line 240:6 - Line 791:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn286" onclick="toggleCodeBlock('cloneGroup286', 'expandBtn286', 'collapseBtn286')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn286" onclick="toggleCodeBlock('cloneGroup286', 'expandBtn286', 'collapseBtn286')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup286"><code class="language-javascript text-sm text-gray-800">={5} className=&quot;text-white mb-0&quot;&gt;
              Debug Controls
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Badge
              status={getStatusColor() as any}
              text={getStatusText()}
              className=&quot;text-gray-300&quot;
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          {!isDebugging ? (
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={startDebugging}
              disabled={!workflowId || !executionId}
            &gt;
              Start Debugging
            &lt;/Button&gt;
          ) : (
            &lt;&gt;
              {isPaused ? (
                &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} onClick={resumeExecution}&gt;
                  Resume
                &lt;/Button&gt;
              ) : (
                &lt;Button icon={&lt;PauseCircleOutlined /&gt;} onClick={pauseExecution}&gt;
                  Pause
                &lt;/Button&gt;
              )}

              &lt;Button
                icon={&lt;StepForwardOutlined /&gt;}
                onClick={stepOver}
                disabled={!isPaused}
                title=&quot;Step Over&quot;
              /&gt;

              &lt;Button
                icon={&lt;StepBackwardOutlined /&gt;}
                onClick={stepInto}
                disabled={!isPaused}
                title=&quot;Step Into&quot;
              /&gt;

              &lt;Button
                icon={&lt;StopOutlined /&gt;}
                onClick={stepOut}
                disabled={!isPaused}
                title=&quot;Step Out&quot;
              /&gt;

              &lt;Button danger icon={&lt;StopOutlined /&gt;} onClick={stopDebugging}&gt;
                Stop
              &lt;/Button&gt;
            &lt;/&gt;
          )}
        &lt;/div&gt;

        {session &amp;&amp; (
          &lt;div className=&quot;grid grid-cols-2 gap-4 text-sm&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Session ID:&lt;/Text&gt;
              &lt;div className=&quot;text-white font-mono&quot;&gt;{session.id}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Step Count:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.stepCount}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Duration:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;
                {Math.round((Date.now() - session.startTime) / 1000)}s
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Current Node:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.currentNodeId || 'None'}&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderBreakpoints = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Breakpoints
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsBreakpointModalOpen(true)}
        &gt;
          Add Breakpoint
        &lt;/Button&gt;
      &lt;/div&gt;

      {session &amp;&amp; session.breakpoints.size === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;BugOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No breakpoints set&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add breakpoints to pause execution at specific nodes&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Array.from(session?.breakpoints.entries() || []).map(([nodeId, breakpoints]) =&gt;
            breakpoints.map((breakpoint) =&gt; (
              &lt;Card key={breakpoint.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                    &lt;Switch
                      size=&quot;small&quot;
                      checked={breakpoint.enabled}
                      onChange={() =&gt; toggleBreakpoint(nodeId, breakpoint.id)}
                    /&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-white text-sm font-medium&quot;&gt;Node: {nodeId}&lt;/div&gt;
                      {breakpoint.condition &amp;&amp; (
                        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                          Condition: {breakpoint.condition}
                        &lt;/div&gt;
                      )}
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;Hits: {breakpoint.hitCount}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Badge
                      count={breakpoint.hitCount}
                      size=&quot;small&quot;
                      style={{ backgroundColor: '#1890ff' }}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;DeleteOutlined /&gt;}
                      onClick={() =&gt; removeBreakpoint(nodeId, breakpoint.id)}
                      className=&quot;text-red-400 hover:text-red-300&quot;
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            ))
          )}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderWatchExpressions = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Watch Expressions
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsWatchModalOpen(true)}
        &gt;
          Add Watch
        &lt;/Button&gt;
      &lt;/div&gt;

      {watchExpressions.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;EyeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No watch expressions&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add expressions to monitor variable values&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {watchExpressions.map((watch) =&gt; (
            &lt;Card key={watch.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;flex-1&quot;&gt;
                  &lt;div className=&quot;text-white text-sm font-mono&quot;&gt;{watch.expression}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs mt-1&quot;&gt;
                    {watch.error ? (
                      &lt;span className=&quot;text-red-400&quot;&gt;Error: {watch.error}&lt;/span&gt;
                    ) : (
                      &lt;&gt;
                        &lt;span className=&quot;text-green-400&quot;&gt;Value: &lt;/span&gt;
                        &lt;span className=&quot;font-mono&quot;&gt;
                          {typeof watch.value === 'object'
                            ? JSON.stringify(watch.value)
                            : String(watch.value)}
                        &lt;/span&gt;
                        &lt;span className=&quot;text-gray-500 ml-2&quot;&gt;({watch.type})&lt;/span&gt;
                      &lt;/&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; removeWatchExpression(watch.id)}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderCallStack = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Call Stack
      &lt;/Title&gt;

      {callStack.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;CodeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;Call stack is empty&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see the call stack&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={callStack.map((frame, index) =&gt; ({
            color: index === callStack.length - 1 ? 'blue' : 'gray',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{frame.nodeName}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;{frame.nodeType}&lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(frame.timestamp).toLocaleTimeString()}
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderVariables = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Variables
      &lt;/Title&gt;

      {Object.keys(variables).length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;InfoCircleOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No variables available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Variables will appear during execution&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(variables).map(([key, value]) =&gt; (
            &lt;Card key={key} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{key}&lt;/div&gt;
                &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1} maxHeight=&quot;200px&quot; /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderExecutionHistory = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Execution History
      &lt;/Title&gt;

      {executionHistory.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;HistoryOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No execution history&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Execution steps will appear here&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={executionHistory.map((step) =&gt; ({
            color:
              step.action === 'error' ? 'red' : step.action === 'breakpoint' ? 'orange' : 'blue',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-white font-medium&quot;&gt;{step.nodeId}&lt;/span&gt;
                  &lt;Tag
                    color={
                      step.action === 'error'
                        ? 'red'
                        : step.action === 'breakpoint'
                          ? 'orange'
                          : step.action === 'start'
                            ? 'blue'
                            : 'green'
                    }
                  &gt;
                    {step.action}
                  &lt;/Tag&gt;
                &lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(step.timestamp).toLocaleTimeString()}
                  {step.duration &amp;&amp; ` (${step.duration}ms)`}
                &lt;/div&gt;
                {step.error &amp;&amp; (
                  &lt;div className=&quot;text-red-400 text-xs&quot;&gt;Error: {step.error.message}&lt;/div&gt;
                )}
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderMetrics = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Debug Metrics
      &lt;/Title&gt;

      {!metrics ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;SettingOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No metrics available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see performance metrics&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{metrics.totalSteps}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Steps&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{metrics.breakpointHits}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Breakpoint Hits&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-red-400&quot;&gt;{metrics.errors}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Errors&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;
                {Math.round(metrics.averageStepTime)}ms
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Avg Step Time&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{metrics.callStackDepth}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Call Stack Depth&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-yellow-400&quot;&gt;
                {Math.round(metrics.memoryUsage)}MB
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Memory Usage&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;BugOutlined className=&quot;text-red-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Debug Panel
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced debugging tools for workflow execution
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        {renderDebugControls()}

        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;debug-tabs&quot;
          items={[
            {
              key: 'breakpoints',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Breakpoints
                  {session &amp;&amp; session.breakpoints.size &gt; 0 &amp;&amp; (
                    &lt;Badge
                      count={Array.from(session.breakpoints.values()).flat().length}
                      size=&quot;small&quot;
                      className=&quot;ml-2&quot;
                    /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderBreakpoints(),
            },
            {
              key: 'watch',
              label: (
                &lt;span&gt;
                  &lt;EyeOutlined className=&quot;mr-1&quot; /&gt;
                  Watch
                  {watchExpressions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={watchExpressions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderWatchExpressions(),
            },
            {
              key: 'callstack',
              label: (
                &lt;span&gt;
                  &lt;CodeOutlined className=&quot;mr-1&quot; /&gt;
                  Call Stack
                  {callStack.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={callStack.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderCallStack(),
            },
            {
              key: 'variables',
              label: (
                &lt;span&gt;
                  &lt;InfoCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Variables
                  {Object.keys(variables).length &gt; 0 &amp;&amp; (
                    &lt;Badge count={Object.keys(variables).length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderVariables(),
            },
            {
              key: 'history',
              label: (
                &lt;span&gt;
                  &lt;HistoryOutlined className=&quot;mr-1&quot; /&gt;
                  History
                  {executionHistory.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={executionHistory.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderExecutionHistory(),
            },
            {
              key: 'metrics',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Metrics
                &lt;/span&gt;
              ),
              children: renderMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Add Breakpoint Modal */}
      &lt;Modal
        title=&quot;Add Breakpoint&quot;
        open={isBreakpointModalOpen}
        onCancel={() =&gt; setIsBreakpointModalOpen(false)}
        onOk={() =&gt; {
          if (selectedNodeId) {
            addBreakpoint(selectedNodeId);
            setIsBreakpointModalOpen(false);
            setSelectedNodeId('');
          }
        }}
        width={400}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Node ID&quot; required&gt;
            &lt;Input
              value={selectedNodeId}
              onChange={(e) =&gt; setSelectedNodeId(e.target.value)}
              placeholder=&quot;Enter node ID&quot;
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Add Watch Expression Modal */}
      &lt;Modal
        title=&quot;Add Watch Expression&quot;
        open={isWatchModalOpen}
        onCancel={() =&gt; setIsWatchModalOpen(false)}
        onOk={addWatchExpression}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Expression&quot; required&gt;
            &lt;Input
              value={newWatchExpression}
              onChange={(e) =&gt; setNewWatchExpression(e.target.value)}
              placeholder=&quot;e.g., $input.user.name, variables.count, $output.result&quot;
            /&gt;
          &lt;/Form.Item&gt;
          &lt;Alert
            message=&quot;Expression Examples&quot;
            description={
              &lt;ul className=&quot;mt-2 text-sm&quot;&gt;
                &lt;li&gt;
                  &lt;code&gt;$input.user.name&lt;/code&gt; - Access input data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;$output.result&lt;/code&gt; - Access output data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;variables.count&lt;/code&gt; - Access workflow variables
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;JSON.stringify($input)&lt;/code&gt; - Convert to JSON
                &lt;/li&gt;
              &lt;/ul&gt;
            }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DataInspector.tsx (Line 138:4 - Line 595:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/datainspector/DataInspector.tsx (Line 141:4 - Line 598:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn288" onclick="toggleCodeBlock('cloneGroup288', 'expandBtn288', 'collapseBtn288')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn288" onclick="toggleCodeBlock('cloneGroup288', 'expandBtn288', 'collapseBtn288')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup288"><code class="language-javascript text-sm text-gray-800">={node.key}
        title={
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;span className=&quot;text-white&quot;&gt;{node.title}&lt;/span&gt;
            &lt;Tag color={getTypeColor(node.type)}&gt;{node.type}&lt;/Tag&gt;
            &lt;span className=&quot;text-gray-400 text-xs&quot;&gt;{formatSize(node.size)}&lt;/span&gt;
          &lt;/div&gt;
        }
        isLeaf={node.isLeaf}
      &gt;
        {node.children &amp;&amp; renderTreeNodes(node.children)}
      &lt;/TreeNode&gt;
    ));
  }, []);

  const renderDataTable = useCallback(() =&gt; {
    if (!Array.isArray(selectedData)) {
      return &lt;Alert message=&quot;Table view only available for arrays&quot; type=&quot;info&quot; showIcon /&gt;;
    }

    const columns = getTableColumns(selectedData);
    const tableData = selectedData.map((item, index) =&gt; ({
      key: index,
      index,
      ...item,
    }));

    return (
      &lt;Table
        columns={columns}
        dataSource={tableData}
        pagination={{ pageSize: 10 }}
        size=&quot;small&quot;
        className=&quot;bg-gray-800&quot;
        scroll={{ x: 'max-content' }}
      /&gt;
    );
  }, [selectedData]);

  const renderDataAnalysis = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white&quot;&gt;
        Data Analysis
      &lt;/Title&gt;

      &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{dataStats.totalSize}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Size&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;{dataStats.depth}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Max Depth&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{dataStats.keyCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Keys&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{dataStats.arrayCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Arrays&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      &lt;/div&gt;

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
          Type Distribution
        &lt;/Title&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(dataStats.typeDistribution).map(([type, count]) =&gt; (
            &lt;div key={type} className=&quot;flex items-center justify-between&quot;&gt;
              &lt;span className=&quot;text-gray-300&quot;&gt;{type}&lt;/span&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Progress
                  percent={(count / dataStats.keyCount) * 100}
                  strokeColor={getTypeColor(type)}
                  showInfo={false}
                  size=&quot;small&quot;
                  className=&quot;flex-1&quot;
                /&gt;
                &lt;span className=&quot;text-gray-400 text-sm w-8&quot;&gt;{count}&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const content = (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;EyeOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
            &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
              Data Inspector
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={isFullscreen ? &lt;CompressOutlined /&gt; : &lt;ExpandOutlined /&gt;}
              onClick={() =&gt; setIsFullscreen(!isFullscreen)}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
            {onClose &amp;&amp; (
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                onClick={onClose}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              &gt;
                Close
              &lt;/Button&gt;
            )}
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-4 text-sm&quot;&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Node:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{nodeId}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Type:&lt;/Text&gt;
            &lt;Tag color={getTypeColor(type)} className=&quot;ml-1&quot;&gt;
              {type}
            &lt;/Tag&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Size:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{formatSize(dataStats.totalSize)}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;div className=&quot;flex items-center gap-4 mb-4&quot;&gt;
          &lt;Search
            placeholder=&quot;Search data...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;flex-1&quot;
            prefix={&lt;SearchOutlined className=&quot;text-gray-400&quot; /&gt;}
          /&gt;

          &lt;Select value={filterType} onChange={setFilterType} className=&quot;w-32&quot;&gt;
            &lt;Option value=&quot;all&quot;&gt;All Types&lt;/Option&gt;
            &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
            &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
            &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
            &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
            &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select value={viewMode} onChange={setViewMode} className=&quot;w-24&quot;&gt;
            &lt;Option value=&quot;tree&quot;&gt;Tree&lt;/Option&gt;
            &lt;Option value=&quot;json&quot;&gt;JSON&lt;/Option&gt;
            &lt;Option value=&quot;table&quot;&gt;Table&lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Selected Path:&lt;/Text&gt;
            &lt;Text className=&quot;text-white font-mono text-sm&quot;&gt;{selectedPath || 'root'}&lt;/Text&gt;
          &lt;/div&gt;

          &lt;Space&gt;
            &lt;Tooltip title=&quot;Copy Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={handleCopyData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
            &lt;Tooltip title=&quot;Export Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;DownloadOutlined /&gt;}
                onClick={handleExportData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Tabs
          activeKey={viewMode}
          onChange={(key) =&gt; setViewMode(key as 'tree' | 'json' | 'table')}
          items={[
            {
              key: 'tree',
              label: 'Tree View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto border border-gray-600 rounded bg-gray-800&quot;&gt;
                  &lt;Tree
                    showLine
                    defaultExpandAll={false}
                    expandedKeys={expandedKeys}
                    selectedKeys={selectedPath ? [selectedPath] : []}
                    onSelect={handleTreeSelect}
                    onExpand={handleExpand}
                    className=&quot;p-4&quot;
                  &gt;
                    {renderTreeNodes(filteredTree)}
                  &lt;/Tree&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'json',
              label: 'JSON View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto&quot;&gt;
                  &lt;JsonViewer
                    data={selectedData}
                    theme=&quot;dark&quot;
                    collapsed={2}
                    maxHeight=&quot;100%&quot;
                    enableClipboard
                  /&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'table',
              label: 'Table View',
              children: &lt;div className=&quot;h-96 overflow-auto&quot;&gt;{renderDataTable()}&lt;/div&gt;,
            },
          ]}
        /&gt;

        &lt;Divider className=&quot;my-4&quot; /&gt;

        {renderDataAnalysis()}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  if (isFullscreen) {
    return (
      &lt;Modal
        title=&quot;Data Inspector - Fullscreen&quot;
        open={isFullscreen}
        onCancel={() =&gt; setIsFullscreen(false)}
        footer={null}
        width=&quot;90vw&quot;
        style={{ top: 20 }}
        bodyStyle={{ height: '80vh', padding: 0 }}
      &gt;
        {content}
      &lt;/Modal&gt;
    );
  }

  return content;
};

// Helper functions

function convertToTree(data: any, path: string, _key: string): DataNode[] {
  if (data === null || data === undefined) {
    return [
      {
        key: path || 'root',
        title: 'null',
        value: data,
        type: 'null',
        size: 0,
        path: path || 'root',
        isLeaf: true,
      },
    ];
  }

  if (Array.isArray(data)) {
    return [
      {
        key: path || 'root',
        title: `Array (${data.length} items)`,
        value: data,
        type: 'array',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: data.flatMap((item, index) =&gt;
          convertToTree(item, `${path}[${index}]`, `[${index}]`)
        ),
      },
    ];
  }

  if (typeof data === 'object') {
    const entries = Object.entries(data);
    return [
      {
        key: path || 'root',
        title: `Object (${entries.length} properties)`,
        value: data,
        type: 'object',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: entries.flatMap(([key, value]) =&gt;
          convertToTree(value, path ? `${path}.${key}` : key, key)
        ),
      },
    ];
  }

  return [
    {
      key: path || 'root',
      title: String(data),
      value: data,
      type: typeof data,
      size: JSON.stringify(data).length,
      path: path || 'root',
      isLeaf: true,
    },
  ];
}

function filterTree(nodes: DataNode[], searchTerm: string, filterType: string): DataNode[] {
  if (!searchTerm &amp;&amp; filterType === 'all') return nodes;

  return nodes
    .filter((node) =&gt; {
      const matchesSearch =
        !searchTerm ||
        node.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        node.path.toLowerCase().includes(searchTerm.toLowerCase());

      const matchesType = filterType === 'all' || node.type === filterType;

      return matchesSearch &amp;&amp; matchesType;
    })
    .map((node) =&gt; ({
      ...node,
      children: node.children ? filterTree(node.children, searchTerm, filterType) : undefined,
    }));
}

function getDataByPath(data: any, path: string): any {
  if (path === 'root' || !path) return data;

  try {
    return path.split('.').reduce((obj, key) =&gt; {
      if (key.includes('[') &amp;&amp; key.includes(']')) {
        const arrayKey = key.substring(0, key.indexOf('['));
        const index = parseInt(key.substring(key.indexOf('[') + 1, key.indexOf(']')), 10);
        return obj[arrayKey][index];
      }
      return obj[key];
    }, data);
  } catch (_error) {
    return undefined;
  }
}

function analyzeData(data: any): {
  totalSize: number;
  depth: number;
  keyCount: number;
  arrayCount: number;
  typeDistribution: Record&lt;string, number&gt;;
} {
  const stats = {
    totalSize: JSON.stringify(data).length,
    depth: 0,
    keyCount: 0,
    arrayCount: 0,
    typeDistribution: {} as Record&lt;string, number&gt;,
  };

  function analyze(obj: any, currentDepth: number = 0) {
    stats.depth = Math.max(stats.depth, currentDepth);

    if (Array.isArray(obj)) {
      stats.arrayCount++;
      stats.typeDistribution.array = (stats.typeDistribution.array || 0) + 1;
      obj.forEach((item) =&gt; analyze(item, currentDepth + 1));
    } else if (obj !== null &amp;&amp; typeof obj === 'object') {
      stats.typeDistribution.object = (stats.typeDistribution.object || 0) + 1;
      Object.entries(obj).forEach(([_key, value]) =&gt; {
        stats.keyCount++;
        analyze(value, currentDepth + 1);
      });
    } else {
      const type = typeof obj;
      stats.typeDistribution[type] = (stats.typeDistribution[type] || 0) + 1;
    }
  }

  analyze(data);
  return stats;
}

function getTypeColor(type: string): string {
  switch (type) {
    case 'string':
      return 'green';
    case 'number':
      return 'blue';
    case 'boolean':
      return 'orange';
    case 'object':
      return 'purple';
    case 'array':
      return 'cyan';
    case 'null':
      return 'gray';
    case 'undefined':
      return 'red';
    default:
      return 'default';
  }
}

function formatSize(bytes: number): string {
  if (bytes &lt; 1024) return `${bytes} B`;
  if (bytes &lt; 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}

function getTableColumns(data: any[]): any[] {
  if (data.length === 0) return [];

  const sample = data[0];
  if (typeof sample !== 'object' || Array.isArray(sample)) {
    return [
      { title: 'Index', dataIndex: 'index', key: 'index' },
      { title: 'Value', dataIndex: '0', key: 'value' },
    ];
  }

  return Object.keys(sample).map((key) =&gt; ({
    title: key,
    dataIndex: key,
    key,
    render: (value: any) =&gt; {
      if (typeof value === 'object') {
        return &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CustomEdge.tsx (Line 198:10 - Line 290:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 207:10 - Line 299:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn290" onclick="toggleCodeBlock('cloneGroup290', 'expandBtn290', 'collapseBtn290')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn290" onclick="toggleCodeBlock('cloneGroup290', 'expandBtn290', 'collapseBtn290')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup290"><code class="language-javascript text-sm text-gray-800">={bringToFront ? 'bring-to-front' : ''}
      style={{ zIndex: bringToFront ? 1 : 0 }}
    &gt;
      {/* Arrow marker definition */}
      &lt;defs&gt;
        &lt;marker
          id={`arrowhead-${id}`}
          markerWidth=&quot;10&quot;
          markerHeight=&quot;7&quot;
          refX=&quot;9&quot;
          refY=&quot;3.5&quot;
          orient=&quot;auto&quot;
        &gt;
          &lt;polygon
            points=&quot;0 0, 10 3.5, 0 7&quot;
            fill={delayedHovered || isHovered ? '#3b82f6' : getEdgeColor()}
            style={{
              transition: 'fill 0.3s ease',
            }}
          /&gt;
        &lt;/marker&gt;
      &lt;/defs&gt;
      {segments.map((segment, index) =&gt; (
        &lt;React.Fragment key={`${id}-${index}`}&gt;
          {/* Invisible wider path for easier hover detection */}
          &lt;path
            d={segment[0]}
            style={{
              stroke: 'transparent',
              strokeWidth: 40,
              fill: 'none',
            }}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          /&gt;

          {/* Visible edge path */}
          &lt;path
            d={segment[0]}
            style={getEdgeStyle()}
            className={`react-flow__edge-path ${isHovered || delayedHovered ? 'hovered' : ''}`}
            markerEnd={`url(#arrowhead-${id})`}
            pointerEvents=&quot;none&quot;
          /&gt;
        &lt;/React.Fragment&gt;
      ))}

      &lt;EdgeLabelRenderer&gt;
        {/* Toolbar with delete button */}
        {renderToolbar &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1]}px)`,
              pointerEvents: 'all',
              zIndex: delayedHovered || isHovered ? 1 : 0,
            }}
            className=&quot;nodrag nopan&quot;
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          &gt;
            &lt;button
              onMouseDown={handleDelete}
              className=&quot;bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg transition-all duration-200 border-2 border-white hover:scale-110&quot;
              title=&quot;Delete connection&quot;
              style={{
                cursor: 'pointer',
                fontSize: '20px',
                fontWeight: 'bold',
              }}
            &gt;
              ×
            &lt;/button&gt;
          &lt;/div&gt;
        )}

        {/* Connection status indicator */}
        {status &amp;&amp; status !== 'success' &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1] - (isConnectorStraight ? 20 : 0)}px)`,
              pointerEvents: 'none',
              zIndex: 999,
            }}
          &gt;
            &lt;div
              className={`
              w-2 h-2 rounded-full
              ${status === 'error' ? 'bg-red-500' : ''}
              ${status === 'running' ? 'bg-yellow-500 animate-pulse' : ''}
              ${status === 'pinned' ? 'bg-purple-500' : ''}
            `}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ContainerNodePanel.tsx (Line 147:10 - Line 357:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/containernodepanel/ContainerNodePanel.tsx (Line 149:10 - Line 359:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn293" onclick="toggleCodeBlock('cloneGroup293', 'expandBtn293', 'collapseBtn293')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn293" onclick="toggleCodeBlock('cloneGroup293', 'expandBtn293', 'collapseBtn293')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup293"><code class="language-javascript text-sm text-gray-800">={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Container Nodes
          &lt;/Title&gt;
          &lt;Tooltip title=&quot;Add custom container&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;PlusOutlined /&gt;}
              onClick={() =&gt; {
                // Open custom container creation
              }}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced workflow structures for complex automation patterns
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4 space-y-4&quot;&gt;
        &lt;Collapse ghost defaultActiveKey={['containers']} className=&quot;bg-transparent&quot;&gt;
          &lt;Panel
            header={
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;span className=&quot;text-white font-medium&quot;&gt;Container Types&lt;/span&gt;
                &lt;Badge count={containerTemplates.length} size=&quot;small&quot; /&gt;
              &lt;/div&gt;
            }
            key=&quot;containers&quot;
            className=&quot;bg-gray-800&quot;
          &gt;
            &lt;div className=&quot;space-y-2&quot;&gt;
              {containerTemplates.map((template) =&gt; (
                &lt;Card
                  key={template.id}
                  size=&quot;small&quot;
                  className=&quot;bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors cursor-pointer&quot;
                  draggable
                  onDragStart={(e) =&gt; handleDragStart(e, template)}
                  onClick={() =&gt; openCreateModal(template)}
                &gt;
                  &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                    &lt;div
                      className=&quot;w-8 h-8 rounded-lg flex items-center justify-center text-lg&quot;
                      style={{ backgroundColor: `${template.color}20` }}
                    &gt;
                      {template.icon}
                    &lt;/div&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;div className=&quot;text-white font-medium text-sm&quot;&gt;{template.name}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{template.description}&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;flex gap-1&quot;&gt;
                      &lt;Tooltip title=&quot;Drag to canvas&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;ReloadOutlined /&gt;}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                      &lt;Tooltip title=&quot;Create directly&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;PlusOutlined /&gt;}
                          onClick={(e) =&gt; {
                            e.stopPropagation();
                            openCreateModal(template);
                          }}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              ))}
            &lt;/div&gt;
          &lt;/Panel&gt;
        &lt;/Collapse&gt;

        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-2&quot;&gt;
            Quick Actions
          &lt;/Title&gt;

          &lt;Space direction=&quot;vertical&quot; className=&quot;w-full&quot;&gt;
            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple loop container
                const container = createLoopContainer(`loop_${Date.now()}`, 'Quick Loop', {
                  x: 200,
                  y: 200,
                });
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ReloadOutlined className=&quot;text-blue-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Loop&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;10 iterations, 1s delay&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple parallel container
                const container = createParallelContainer(
                  `parallel_${Date.now()}`,
                  'Quick Parallel',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ThunderboltOutlined className=&quot;text-green-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Parallel&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;5 concurrent executions&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple conditional container
                const container = createConditionalContainer(
                  `conditional_${Date.now()}`,
                  'Quick Conditional',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;QuestionCircleOutlined className=&quot;text-yellow-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Conditional&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Basic if-then logic&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;pt-4 border-t border-gray-700&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 text-gray-400 text-xs&quot;&gt;
            &lt;InfoCircleOutlined /&gt;
            &lt;span&gt;Drag containers to canvas or click to create directly&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Create Container Modal */}
      &lt;Modal
        title={`Create ${selectedTemplate?.name || 'Container'}`}
        open={isCreateModalOpen}
        onCancel={() =&gt; {
          setIsCreateModalOpen(false);
          setSelectedTemplate(null);
        }}
        onOk={() =&gt; createForm.submit()}
        width={500}
      &gt;
        &lt;Form form={createForm} layout=&quot;vertical&quot; onFinish={handleCreateContainer}&gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Container Name&quot;
            rules={[{ required: true, message: 'Please enter a container name' }]}
          &gt;
            &lt;Input placeholder=&quot;Enter container name&quot; /&gt;
          &lt;/Form.Item&gt;

          {selectedTemplate &amp;&amp; (
            &lt;div className=&quot;mb-4 p-3 bg-gray-50 rounded-lg&quot;&gt;
              &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                &lt;span className=&quot;text-lg&quot;&gt;{selectedTemplate.icon}&lt;/span&gt;
                &lt;span className=&quot;font-medium&quot;&gt;{selectedTemplate.name}&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{selectedTemplate.description}&lt;/div&gt;
            &lt;/div&gt;
          )}

          {selectedTemplate?.id === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot; initialValue={10}&gt;
                &lt;InputNumber min={1} max={1000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot; initialValue={1000}&gt;
                &lt;InputNumber min={0} max={10000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {selectedTemplate?.id === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot; initialValue={5}&gt;
                &lt;InputNumber min={1} max={20}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionalBranchingPanel.tsx (Line 344:5 - Line 732:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditionalbranchingpanel/ConditionalBranchingPanel.tsx (Line 348:5 - Line 736:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn297" onclick="toggleCodeBlock('cloneGroup297', 'expandBtn297', 'collapseBtn297')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn297" onclick="toggleCodeBlock('cloneGroup297', 'expandBtn297', 'collapseBtn297')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup297"><code class="language-javascript text-sm text-gray-800">={form}
          layout=&quot;vertical&quot;
          onFinish={handleCreateBranch}
          initialValues={{
            logicalOperator: 'AND',
            defaultBranch: false,
            priority: 1,
            conditions: [],
          }}
        &gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Branch Name&quot;
            rules={[{ required: true, message: 'Please enter a branch name' }]}
          &gt;
            &lt;Input placeholder=&quot;Success path&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
            &lt;TextArea placeholder=&quot;Handles successful API responses&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;sourceNodeId&quot;
            label=&quot;Source Node&quot;
            rules={[{ required: true, message: 'Please select a source node' }]}
          &gt;
            &lt;Select placeholder=&quot;Select node to branch from&quot;&gt;
              {nodes.map((node) =&gt; (
                &lt;Option key={node.id} value={node.id}&gt;
                  {node.parameters?.name || node.name || node.id}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;logicalOperator&quot; label=&quot;Condition Logic&quot;&gt;
            &lt;Radio.Group&gt;
              &lt;Radio value=&quot;AND&quot;&gt;ALL conditions must be true (AND)&lt;/Radio&gt;
              &lt;Radio value=&quot;OR&quot;&gt;ANY condition must be true (OR)&lt;/Radio&gt;
            &lt;/Radio.Group&gt;
          &lt;/Form.Item&gt;

          &lt;Divider&gt;Conditions&lt;/Divider&gt;

          &lt;Form.Item dependencies={['conditions']} noStyle&gt;
            {({ getFieldValue }) =&gt; {
              const conditions: BranchCondition[] = getFieldValue('conditions') || [];
              return (
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {conditions.map((condition) =&gt; (
                    &lt;Card key={condition.id} size=&quot;small&quot; className=&quot;border-l-4 border-l-blue-500&quot;&gt;
                      &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                            &lt;Text strong&gt;{condition.field}&lt;/Text&gt;
                            &lt;Tag color=&quot;blue&quot;&gt;{condition.operator}&lt;/Tag&gt;
                            &lt;Text code&gt;{JSON.stringify(condition.value)}&lt;/Text&gt;
                            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NEGATED&lt;/Tag&gt;}
                          &lt;/Space&gt;
                        &lt;/div&gt;
                        &lt;Button
                          type=&quot;link&quot;
                          danger
                          icon={&lt;DeleteOutlined /&gt;}
                          onClick={() =&gt; handleRemoveCondition(condition.id)}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Card&gt;
                  ))}
                  {conditions.length === 0 &amp;&amp; (
                    &lt;Alert
                      message=&quot;No conditions defined&quot;
                      description=&quot;Add conditions to control when this branch should be taken&quot;
                      type=&quot;info&quot;
                      showIcon
                    /&gt;
                  )}
                &lt;/div&gt;
              );
            }}
          &lt;/Form.Item&gt;

          &lt;Card title=&quot;Add Condition&quot; size=&quot;small&quot; className=&quot;mt-4&quot;&gt;
            &lt;Form form={conditionForm} layout=&quot;vertical&quot; onFinish={handleAddCondition}&gt;
              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;field&quot; label=&quot;Field Path&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;data.status&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;dataType&quot; label=&quot;Data Type&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
                      &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
                      &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
                      &lt;Option value=&quot;date&quot;&gt;Date&lt;/Option&gt;
                      &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
                      &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;operator&quot; label=&quot;Operator&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;equals&quot;&gt;Equals (=)&lt;/Option&gt;
                      &lt;Option value=&quot;not_equals&quot;&gt;Not Equals (≠)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_than&quot;&gt;Greater Than (&amp;gt;)&lt;/Option&gt;
                      &lt;Option value=&quot;less_than&quot;&gt;Less Than (&amp;lt;)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_equal&quot;&gt;Greater Equal (≥)&lt;/Option&gt;
                      &lt;Option value=&quot;less_equal&quot;&gt;Less Equal (≤)&lt;/Option&gt;
                      &lt;Option value=&quot;contains&quot;&gt;Contains&lt;/Option&gt;
                      &lt;Option value=&quot;starts_with&quot;&gt;Starts With&lt;/Option&gt;
                      &lt;Option value=&quot;ends_with&quot;&gt;Ends With&lt;/Option&gt;
                      &lt;Option value=&quot;regex&quot;&gt;Regex Match&lt;/Option&gt;
                      &lt;Option value=&quot;in_array&quot;&gt;In Array&lt;/Option&gt;
                      &lt;Option value=&quot;is_empty&quot;&gt;Is Empty&lt;/Option&gt;
                      &lt;Option value=&quot;is_not_empty&quot;&gt;Is Not Empty&lt;/Option&gt;
                      &lt;Option value=&quot;exists&quot;&gt;Exists&lt;/Option&gt;
                      &lt;Option value=&quot;not_exists&quot;&gt;Not Exists&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;value&quot; label=&quot;Value&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;success&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;negate&quot; valuePropName=&quot;checked&quot;&gt;
                    &lt;Switch checkedChildren=&quot;Negate&quot; unCheckedChildren=&quot;Normal&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;caseSensitive&quot; valuePropName=&quot;checked&quot; initialValue={true}&gt;
                    &lt;Switch checkedChildren=&quot;Case Sensitive&quot; unCheckedChildren=&quot;Ignore Case&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Form.Item&gt;
                &lt;Button type=&quot;dashed&quot; htmlType=&quot;submit&quot; icon={&lt;PlusOutlined /&gt;} block&gt;
                  Add Condition
                &lt;/Button&gt;
              &lt;/Form.Item&gt;
            &lt;/Form&gt;
          &lt;/Card&gt;

          &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

          &lt;Row gutter={16}&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;priority&quot; label=&quot;Priority&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;defaultBranch&quot; label=&quot;Default Branch&quot; valuePropName=&quot;checked&quot;&gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
                {editingBranch ? 'Update Branch' : 'Create Branch'}
              &lt;/Button&gt;
              &lt;Button
                onClick={() =&gt; {
                  form.resetFields();
                  setEditingBranch(null);
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
            &lt;/Space&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Card&gt;

      &lt;Card title=&quot;Existing Branches&quot; size=&quot;small&quot;&gt;
        &lt;List
          dataSource={branches}
          renderItem={(branch) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;PlayCircleOutlined /&gt;}
                  onClick={() =&gt; {
                    setSelectedBranch(branch);
                    setTestModalVisible(true);
                  }}
                &gt;
                  Test
                &lt;/Button&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;EditOutlined /&gt;}
                  onClick={() =&gt; {
                    setEditingBranch(branch.id);
                    form.setFieldsValue(branch);
                  }}
                /&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  danger
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; {
                    setBranches((prev) =&gt; prev.filter((b) =&gt; b.id !== branch.id));
                    message.success('Branch deleted');
                  }}
                /&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                title={
                  &lt;Space&gt;
                    &lt;BranchesOutlined /&gt;
                    {branch.name}
                    &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
                      {branch.logicalOperator}
                    &lt;/Tag&gt;
                    {branch.defaultBranch &amp;&amp; &lt;Tag color=&quot;gold&quot;&gt;DEFAULT&lt;/Tag&gt;}
                  &lt;/Space&gt;
                }
                description={
                  &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                    {branch.description}
                    &lt;Text type=&quot;secondary&quot;&gt;
                      {branch.conditions.length} condition(s) • Priority: {branch.priority}
                    &lt;/Text&gt;
                    &lt;div&gt;
                      {branch.conditions.map((condition) =&gt; (
                        &lt;Tag key={condition.id} color=&quot;geekblue&quot; style={{ marginBottom: 4 }}&gt;
                          {condition.field} {condition.operator} {JSON.stringify(condition.value)}
                        &lt;/Tag&gt;
                      ))}
                    &lt;/div&gt;
                  &lt;/Space&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
          locale={{ emptyText: 'No branches configured' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderExpressionBuilder = () =&gt; (
    &lt;Card title=&quot;JavaScript Expression Builder&quot; size=&quot;small&quot;&gt;
      &lt;Alert
        message=&quot;Advanced Expression Mode&quot;
        description=&quot;Write custom JavaScript expressions for complex conditional logic. Use 'data' object to access workflow data.&quot;
        type=&quot;info&quot;
        showIcon
        style={{ marginBottom: 16 }}
      /&gt;

      &lt;Form layout=&quot;vertical&quot;&gt;
        &lt;Form.Item label=&quot;Expression&quot;&gt;
          &lt;TextArea
            rows={10}
            placeholder={`// Example expressions:
return data.status === 'success' &amp;&amp; data.count &gt; 10;

// Multi-line logic
if (data.user &amp;&amp; data.user.role === 'admin') {
  return data.permissions.includes('write');
}
return false;

// Array operations
return data.items.filter(item =&gt; item.active).length &gt; 0;

// Date comparisons
const today = new Date();
const itemDate = new Date(data.createdAt);
return (today.getTime() - itemDate.getTime()) &lt; (24 * 60 * 60 * 1000);`}
            style={{ fontFamily: 'monospace' }}
          /&gt;
        &lt;/Form.Item&gt;

        &lt;Form.Item&gt;
          &lt;Space&gt;
            &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;}&gt;
              Test Expression
            &lt;/Button&gt;
            &lt;Button icon={&lt;CodeOutlined /&gt;}&gt;Validate Syntax&lt;/Button&gt;
            &lt;Button&gt;Save as Template&lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/Form.Item&gt;
      &lt;/Form&gt;
    &lt;/Card&gt;
  );

  const renderVisualFlowChart = () =&gt; {
    const treeData = branches.map((branch) =&gt; ({
      title: (
        &lt;Space&gt;
          &lt;BranchesOutlined /&gt;
          {branch.name}
          &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
            {branch.conditions.length} conditions
          &lt;/Tag&gt;
        &lt;/Space&gt;
      ),
      key: branch.id,
      children: branch.conditions.map((condition) =&gt; ({
        title: (
          &lt;Space&gt;
            &lt;QuestionCircleOutlined /&gt;
            {condition.field} {condition.operator} {JSON.stringify(condition.value)}
            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NOT&lt;/Tag&gt;}
          &lt;/Space&gt;
        ),
        key: condition.id,
        icon: condition.negate ? &lt;CloseCircleOutlined /&gt; : &lt;CheckCircleOutlined /&gt;,
      })),
    }));

    return (
      &lt;Card title=&quot;Branch Flow Visualization&quot; size=&quot;small&quot;&gt;
        &lt;Tree
          showIcon
          defaultExpandAll
          treeData={treeData}
          style={{ background: colors.gray[50], padding: 16, borderRadius: 8 }}
        /&gt;
      &lt;/Card&gt;
    );
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;BranchesOutlined /&gt;
            Conditional Branching
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1400}
        footer={null}
        className={cn('conditional-branching-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Branch Builder
              &lt;/span&gt;
            }
            key=&quot;builder&quot;
          &gt;
            {renderBranchBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CodeOutlined /&gt;
                Expression Builder
              &lt;/span&gt;
            }
            key=&quot;expression&quot;
          &gt;
            {renderExpressionBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;BranchesOutlined /&gt;
                Flow Visualization
              &lt;/span&gt;
            }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionInputPanel.tsx (Line 67:20 - Line 508:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 69:20 - Line 510:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn299" onclick="toggleCodeBlock('cloneGroup299', 'expandBtn299', 'collapseBtn299')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn299" onclick="toggleCodeBlock('cloneGroup299', 'expandBtn299', 'collapseBtn299')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup299"><code class="language-javascript text-sm text-gray-800">={connectedInputNodes}
            onFieldSelect={setSelectedField}
          /&gt;
        &lt;/div&gt;
      )}

      {/* === CONNECTED INPUT NODES === */}
      &lt;div className=&quot;space-y-3&quot;&gt;
        &lt;div className=&quot;text-sm font-semibold text-gray-100 flex items-center space-x-2&quot;&gt;
          &lt;span&gt;📥&lt;/span&gt;
          &lt;span&gt;Input Data Sources&lt;/span&gt;
        &lt;/div&gt;

        {connectedInputNodes.map((node, index) =&gt; {
          // More robust data detection
          const outputData = node?.data?.outputData;
          const testResultsData = node?.data?.testResults?.data;
          const hasOutputData = outputData || testResultsData;

          // Prefer outputData over testResults, but use either if available
          let nodeData = null;
          if (outputData) {
            nodeData = outputData;
          } else if (testResultsData) {
            nodeData = testResultsData;
          }

          const isExpanded = expandedNode === node?.id;

          return (
            &lt;div
              key={node?.id || index}
              className=&quot;bg-gray-800 rounded-lg border border-gray-600 overflow-hidden&quot;
            &gt;
              {/* === NODE HEADER === */}
              &lt;div
                className=&quot;p-3 border-b border-gray-600 bg-gray-750 cursor-pointer hover:bg-gray-700 transition-colors&quot;
                onClick={() =&gt; setExpandedNode(isExpanded ? null : node?.id)}
              &gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                    &lt;span className=&quot;text-xl&quot; title={node?.data?.label || 'Node Icon'}&gt;
                      {getNodeIcon(node)}
                    &lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;
                        {node?.data?.label || 'Unnamed Node'}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{getNodeTypeDisplay(node)}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    {hasOutputData ? (
                      &lt;span className=&quot;px-2 py-1 bg-green-800 text-green-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;✓&lt;/span&gt;
                        &lt;span&gt;Data Available&lt;/span&gt;
                      &lt;/span&gt;
                    ) : (
                      &lt;span className=&quot;px-2 py-1 bg-yellow-800 text-yellow-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;⏳&lt;/span&gt;
                        &lt;span&gt;No Data&lt;/span&gt;
                      &lt;/span&gt;
                    )}
                    &lt;span
                      className={`transform transition-transform text-gray-400 ${isExpanded ? 'rotate-180' : ''}`}
                    &gt;
                      ▼
                    &lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* === EXPANDABLE DATA CONTENT === */}
              {isExpanded &amp;&amp; (
                &lt;div className=&quot;p-3&quot;&gt;
                  {hasOutputData ? (
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      {/* Enhanced JSON viewer for raw data */}
                      &lt;JsonViewer data={nodeData} maxHeight=&quot;400px&quot; enableClipboard={true} /&gt;

                      {/* Then show the formatted renderer */}
                      &lt;ConditionDataRenderer
                        data={nodeData}
                        nodeType={getNodeType(node)}
                        selectedField={selectedField}
                        onFieldSelect={setSelectedField}
                      /&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;
                      &lt;div className=&quot;text-sm&quot;&gt;No output data available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-1&quot;&gt;Test the connected node to generate data&lt;/div&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          );
        })}
      &lt;/div&gt;

      {/* === CONDITION EVALUATION TIPS === */}
      &lt;div className=&quot;mt-6 p-3 bg-gray-800 rounded-lg border border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-2 mb-2&quot;&gt;
          &lt;span className=&quot;text-lg&quot;&gt;💡&lt;/span&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Condition Tips&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;space-y-2 text-xs text-gray-400&quot;&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Reference data fields directly in conditions (e.g.,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;subject&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;priority&lt;/code&gt;)
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Use comparison operators:{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;==&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;!=&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;gt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;lt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;contains&lt;/code&gt;
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Combine conditions with{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;&amp;&lt;/code&gt; (and) or{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;||&lt;/code&gt; (or)
            &lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Component to show summary of all available data fields
const DataFieldsSummary: React.FC&lt;{
  connectedInputNodes: any[];
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ connectedInputNodes, onFieldSelect }) =&gt; {
  const allFields = new Set&lt;string&gt;();

  // Collect all unique fields from connected nodes
  connectedInputNodes.forEach((node, _index) =&gt; {
    const outputData = node?.data?.outputData;
    const testResultsData = node?.data?.testResults?.data;
    const data = outputData || testResultsData;

    if (data &amp;&amp; typeof data === 'object') {
      if (Array.isArray(data)) {
        // Handle arrays (like emails)
        if (data.length &gt; 0 &amp;&amp; typeof data[0] === 'object') {
          Object.keys(data[0]).forEach((key) =&gt; allFields.add(key));
        }
      } else {
        // Handle objects
        Object.keys(data).forEach((key) =&gt; allFields.add(key));
      }
    }
  });

  const fieldsArray = Array.from(allFields).sort();

  if (fieldsArray.length === 0) {
    return (
      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
        No structured fields available. Test connected nodes to analyze data fields.
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
      {fieldsArray.map((field) =&gt; (
        &lt;button
          key={field}
          onClick={() =&gt; onFieldSelect(field)}
          className=&quot;px-2 py-1 bg-purple-800 hover:bg-purple-700 text-purple-200 rounded text-xs transition-colors&quot;
          title={`Click to highlight ${field} in data`}
        &gt;
          {field}
        &lt;/button&gt;
      ))}
    &lt;/div&gt;
  );
};

// Component to render data specifically for condition evaluation
const ConditionDataRenderer: React.FC&lt;{
  data: any;
  nodeType: string;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, nodeType, selectedField, onFieldSelect }) =&gt; {
  if (!data) {
    return &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;No data available&lt;/div&gt;;
  }

  // Handle different data structures

  // Check if it's an array (like emails)
  if (Array.isArray(data)) {
    if (data.length &gt; 0) {
      const firstItem = data[0];
      if (nodeType === 'gmail' || nodeType === 'gmail-trigger') {
        return (
          &lt;EmailConditionView
            email={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      } else {
        // Generic array handling - show first item
        return (
          &lt;GenericConditionView
            data={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      }
    }
  }

  // Handle email data (from Gmail triggers)
  if ((nodeType === 'gmail' || nodeType === 'gmail-trigger') &amp;&amp; typeof data === 'object') {
    return (
      &lt;EmailConditionView
        email={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle transformed data
  if (nodeType === 'transform' &amp;&amp; typeof data === 'object') {
    return (
      &lt;TransformConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle AI Agent data
  if (nodeType === 'ai-agent' &amp;&amp; typeof data === 'object') {
    return (
      &lt;AIConditionView data={data} selectedField={selectedField} onFieldSelect={onFieldSelect} /&gt;
    );
  }

  // Generic structured data
  if (typeof data === 'object' &amp;&amp; data !== null) {
    return (
      &lt;GenericConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;text-xs text-yellow-400&quot;&gt;Debug: {nodeType} node data (fallback renderer)&lt;/div&gt;
      &lt;div className=&quot;bg-gray-900 p-3 rounded border border-gray-600&quot;&gt;
        &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;
          Type: {typeof data} {Array.isArray(data) &amp;&amp; `(array with ${data.length} items)`}
        &lt;/div&gt;
        &lt;div className=&quot;font-mono text-xs text-gray-200 max-h-40 overflow-y-auto&quot;&gt;
          {typeof data === 'string' ? data : JSON.stringify(data, null, 2)}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Email-specific condition view
const EmailConditionView: React.FC&lt;{
  email: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ email, selectedField, onFieldSelect }) =&gt; {
  const emailFields = [
    { key: 'from', label: 'From', value: email.from },
    { key: 'subject', label: 'Subject', value: email.subject },
    { key: 'body', label: 'Body', value: email.body },
    { key: 'isUnread', label: 'Unread', value: email.isUnread },
    {
      key: 'hasAttachments',
      label: 'Has Attachments',
      value: email.hasAttachments,
    },
    { key: 'labels', label: 'Labels', value: email.labels },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-blue-400 mb-2&quot;&gt;📧 Email fields available for conditions:&lt;/div&gt;
      {emailFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Transform data condition view
const TransformConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-green-400 mb-2&quot;&gt;
        🔄 Transformed fields available for conditions:
      &lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// AI Agent data condition view
const AIConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const aiFields = [
    { key: 'output', label: 'AI Output', value: data.output },
    { key: 'provider', label: 'Provider', value: data.provider },
    { key: 'model', label: 'Model', value: data.model },
    { key: 'usage', label: 'Token Usage', value: data.usage },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-orange-400 mb-2&quot;&gt;
        🤖 AI response fields available for conditions:
      &lt;/div&gt;
      {aiFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Generic data condition view
const GenericConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;📊 Data fields available for conditions:&lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Reusable field row component
const FieldRow: React.FC&lt;{
  fieldKey: string;
  label: string;
  value: any;
  isSelected: boolean;
  onSelect: (field: string) =&gt; void;
}&gt; = ({ fieldKey, label, value, isSelected, onSelect }) =&gt; {
  const displayValue =
    typeof value === 'string' &amp;&amp; value.length &gt; 100 ? `${value.substring(0, 100)}...` : value;

  return (
    &lt;div
      className={`p-3 rounded border cursor-pointer transition-all ${
        isSelected
          ? 'border-purple-500 bg-purple-900/20'
          : 'border-gray-600 hover:border-gray-500 bg-gray-750'
      }`}
      onClick={() =&gt; onSelect(fieldKey)}
    &gt;
      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
        &lt;span className={`text-sm font-medium ${isSelected ? 'text-purple-200' : 'text-gray-200'}`}&gt;
          {label}
        &lt;/span&gt;
        &lt;code
          className={`text-xs px-2 py-1 rounded ${
            isSelected ? 'bg-purple-800 text-purple-200' : 'bg-gray-700 text-gray-300'
          }`}
        &gt;
          {fieldKey}
        &lt;/code&gt;
      &lt;/div&gt;
      &lt;div className={`text-xs ${isSelected ? 'text-purple-300' : 'text-gray-400'}`}&gt;
        Type: {typeof value} {Array.isArray(value) &amp;&amp; '(array)'}
      &lt;/div&gt;
      &lt;div className={`text-sm mt-2 ${isSelected ? 'text-purple-100' : 'text-gray-300'}`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CommentAnnotations.tsx (Line 157:10 - Line 422:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 164:10 - Line 429:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn301" onclick="toggleCodeBlock('cloneGroup301', 'expandBtn301', 'collapseBtn301')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn301" onclick="toggleCodeBlock('cloneGroup301', 'expandBtn301', 'collapseBtn301')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup301"><code class="language-javascript text-sm text-gray-800">={{ padding: 12 }}&gt;
        &lt;div className=&quot;space-y-3&quot;&gt;
          {/* Comment header */}
          &lt;div className=&quot;flex items-start justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar size={24} src={comment.author.avatar} style={{ backgroundColor: userColor }}&gt;
                {comment.author.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div&gt;
                &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                  {comment.author.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(comment.timestamp).toLocaleString()}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckOutlined /&gt;}
              onClick={(e) =&gt; {
                e.stopPropagation();
                onResolve();
              }}
              className=&quot;text-green-600 hover:bg-green-50&quot;
            &gt;
              Resolve
            &lt;/Button&gt;
          &lt;/div&gt;

          {/* Comment content */}
          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;{comment.content}&lt;/div&gt;

          {/* Replies */}
          {comment.replies.length &gt; 0 &amp;&amp; (
            &lt;div className=&quot;space-y-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700&quot;&gt;
              {comment.replies.map((reply) =&gt; (
                &lt;div key={reply.id} className=&quot;space-y-1&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={16}
                      src={reply.author.avatar}
                      style={{ backgroundColor: getUserColor(reply.author.id) }}
                    &gt;
                      {reply.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                      {reply.author.name}
                    &lt;/span&gt;
                    &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                      {new Date(reply.timestamp).toLocaleString()}
                    &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 pl-6&quot;&gt;
                    {reply.content}
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          )}

          {/* Reply input */}
          &lt;div className=&quot;pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
            &lt;div className=&quot;flex space-x-2&quot;&gt;
              &lt;Input
                size=&quot;small&quot;
                placeholder=&quot;Reply...&quot;
                value={replyContents[comment.id] || ''}
                onChange={(e) =&gt;
                  setReplyContents({
                    ...replyContents,
                    [comment.id]: e.target.value,
                  })
                }
                onPressEnter={() =&gt; handleReplyToComment(comment.id)}
              /&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={() =&gt; handleReplyToComment(comment.id)}
                disabled={!replyContents[comment.id]?.trim()}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/Card&gt;
    );

    return (
      &lt;Popover
        content={commentThread}
        title={null}
        trigger=&quot;click&quot;
        placement=&quot;topLeft&quot;
        overlayClassName=&quot;comment-thread-popover&quot;
      &gt;
        &lt;div
          className={`absolute cursor-pointer transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200 z-40 ${
            isSelected ? 'scale-110' : 'scale-100'
          }`}
          style={{
            left: screenPosition.x,
            top: screenPosition.y,
          }}
          onClick={onClick}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
        &gt;
          {/* Comment pin */}
          &lt;div
            className={`relative w-8 h-8 rounded-full border-2 border-white shadow-lg flex items-center justify-center ${
              isSelected || isHovered ? 'transform scale-110' : ''
            }`}
            style={{
              backgroundColor: userColor,
              boxShadow: isSelected ? `0 0 0 3px ${userColor}40` : '0 2px 8px rgba(0,0,0,0.15)',
            }}
          &gt;
            &lt;CommentOutlined className=&quot;text-white text-sm&quot; /&gt;

            {/* Unread replies indicator */}
            {comment.replies.length &gt; 0 &amp;&amp; (
              &lt;Badge
                count={comment.replies.length}
                size=&quot;small&quot;
                className=&quot;absolute -top-1 -right-1&quot;
              /&gt;
            )}
          &lt;/div&gt;

          {/* Connection line to author avatar */}
          {(isSelected || isHovered) &amp;&amp; (
            &lt;div className=&quot;absolute top-10 left-1/2 transform -translate-x-1/2&quot;&gt;
              &lt;div className=&quot;bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-md border border-gray-200 dark:border-gray-700&quot;&gt;
                &lt;div className=&quot;flex items-center space-x-1&quot;&gt;
                  &lt;Avatar
                    size={16}
                    src={comment.author.avatar}
                    style={{ backgroundColor: userColor }}
                  &gt;
                    {comment.author.name.charAt(0).toUpperCase()}
                  &lt;/Avatar&gt;
                  &lt;span className=&quot;text-xs font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                    {comment.author.name}
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/Popover&gt;
    );
  };

  // Pending comment input
  const PendingCommentInput: React.FC&lt;{ position: { x: number; y: number } }&gt; = ({ position }) =&gt; {
    const screenPos = workflowToScreen(position.x, position.y);

    return (
      &lt;div
        className=&quot;absolute z-50&quot;
        style={{
          left: screenPos.x + 20,
          top: screenPos.y,
        }}
      &gt;
        &lt;Card size=&quot;small&quot; className=&quot;w-80 shadow-lg&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar
                size={24}
                src={currentUser?.avatar}
                style={{
                  backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
                }}
              &gt;
                {currentUser?.name.charAt(0).toUpperCase() || '?'}
              &lt;/Avatar&gt;
              &lt;span className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                Add a comment
              &lt;/span&gt;
            &lt;/div&gt;

            &lt;TextArea
              rows={3}
              placeholder=&quot;What do you think about this?&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
              autoFocus
            /&gt;

            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; {
                  setPendingCommentPosition(null);
                  setNewCommentContent('');
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim()}
              &gt;
                Post
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {/* Pin indicator */}
        &lt;div
          className=&quot;absolute w-6 h-6 rounded-full border-2 border-white shadow-lg flex items-center justify-center&quot;
          style={{
            left: -20,
            top: 20,
            backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
          }}
        &gt;
          &lt;CommentOutlined className=&quot;text-white text-xs&quot; /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!showComments || !containerRef.current) return null;

  return (
    &lt;&gt;
      {/* Canvas click handler for comment mode */}
      {commentMode &amp;&amp; (
        &lt;div
          className=&quot;absolute inset-0 z-30 cursor-crosshair&quot;
          onClick={handleCanvasClick}
          style={{
            background: commentMode
              ? 'linear-gradient(45deg, transparent 40%, rgba(24, 144, 255, 0.1) 50%, transparent 60%)'
              : 'transparent',
          }}
        /&gt;
      )}

      {/* Existing comments */}
      {activeComments.map((comment) =&gt; {
        const screenPos = workflowToScreen(comment.position.x, comment.position.y);

        return (
          &lt;CommentPin
            key={comment.id}
            comment={comment}
            screenPosition={screenPos}
            isSelected={selectedCommentId === comment.id}
            onClick={() =&gt; selectComment(comment.id)}
            onResolve={() =&gt; resolveComment(comment.id)}
          /&gt;
        );
      })}

      {/* Pending comment input */}
      {pendingCommentPosition &amp;&amp; &lt;PendingCommentInput position={pendingCommentPosition}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CollaborationPanel.tsx (Line 157:7 - Line 655:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 161:7 - Line 659:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn303" onclick="toggleCodeBlock('cloneGroup303', 'expandBtn303', 'collapseBtn303')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn303" onclick="toggleCodeBlock('cloneGroup303', 'expandBtn303', 'collapseBtn303')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup303"><code class="language-javascript text-sm text-gray-800">={isConnected ? 'processing' : 'error'}
          text={connectionStatus}
          className=&quot;capitalize&quot;
        /&gt;
      &lt;/div&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        {/* Current user */}
        {currentUser &amp;&amp; (
          &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={currentUser.avatar}
                style={{ backgroundColor: getUserColor(currentUser.id) }}
              &gt;
                {currentUser.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {currentUser.name} (You)
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;{currentUser.email}&lt;/div&gt;
              &lt;/div&gt;
              &lt;Badge status=&quot;processing&quot; /&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        )}

        {/* Other users */}
        {userPresences.map((presence) =&gt; (
          &lt;Card key={presence.userId} size=&quot;small&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={presence.user.avatar}
                style={{ backgroundColor: getUserColor(presence.userId) }}
              &gt;
                {presence.user.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {presence.user.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
                  {presence.user.email}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex flex-col items-end&quot;&gt;
                &lt;Badge
                  status={presence.user.status === 'online' ? 'success' : 'default'}
                  text={presence.user.status}
                /&gt;
                {presence.cursor &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                    Cursor: {Math.round(presence.cursor.x)}, {Math.round(presence.cursor.y)}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        ))}
      &lt;/div&gt;

      {userPresences.length === 0 &amp;&amp; !currentUser &amp;&amp; (
        &lt;Empty description=&quot;No active users&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}

      &lt;Divider /&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;h4 className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;Presence Settings&lt;/h4&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Cursors&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserCursors} onChange={toggleUserCursors} /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Selections&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserSelections} onChange={toggleUserSelections} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Comments Tab
  const CommentsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Comments ({activeComments.length})
        &lt;/h3&gt;
        &lt;div className=&quot;flex space-x-2&quot;&gt;
          &lt;Button
            size=&quot;small&quot;
            type={commentMode ? 'primary' : 'default'}
            icon={&lt;CommentOutlined /&gt;}
            onClick={toggleCommentMode}
          &gt;
            {commentMode ? 'Cancel' : 'Add Comment'}
          &lt;/Button&gt;
          &lt;Switch
            size=&quot;small&quot;
            checked={showComments}
            onChange={toggleComments}
            checkedChildren=&quot;Show&quot;
            unCheckedChildren=&quot;Hide&quot;
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {commentMode &amp;&amp; (
        &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
              Click on the canvas to place a comment, or add a general comment below.
            &lt;/div&gt;
            &lt;TextArea
              rows={3}
              placeholder=&quot;Add your comment...&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
            /&gt;
            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; setNewCommentPosition({ x: 100, y: 100 })}
                disabled={!newCommentContent.trim()}
              &gt;
                Add General Comment
              &lt;/Button&gt;
              &lt;Button
                size=&quot;small&quot;
                type=&quot;primary&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim() || !newCommentPosition}
              &gt;
                Post Comment
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      )}

      &lt;div className=&quot;space-y-3&quot;&gt;
        {activeComments.length === 0 ? (
          &lt;Empty description=&quot;No active comments&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
        ) : (
          activeComments.map((comment) =&gt; (
            &lt;Card
              key={comment.id}
              size=&quot;small&quot;
              className={selectedCommentId === comment.id ? 'border-blue-500 shadow-md' : ''}
              onClick={() =&gt; selectComment(comment.id)}
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                {/* Comment header */}
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={24}
                      src={comment.author.avatar}
                      style={{ backgroundColor: getUserColor(comment.author.id) }}
                    &gt;
                      {comment.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                        {comment.author.name}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                        {new Date(comment.timestamp).toLocaleString()}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex space-x-1&quot;&gt;
                    {comment.nodeId &amp;&amp; &lt;Tag color=&quot;blue&quot;&gt;Node Comment&lt;/Tag&gt;}
                    &lt;Tooltip title=&quot;Resolve Comment&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;CheckOutlined /&gt;}
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          resolveComment(comment.id);
                        }}
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Comment content */}
                &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 ml-8&quot;&gt;
                  {comment.content}
                &lt;/div&gt;

                {/* Replies */}
                {comment.replies.length &gt; 0 &amp;&amp; (
                  &lt;div className=&quot;ml-8 space-y-2 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                    {comment.replies.map((reply) =&gt; (
                      &lt;div key={reply.id} className=&quot;flex space-x-2&quot;&gt;
                        &lt;Avatar
                          size={20}
                          src={reply.author.avatar}
                          style={{ backgroundColor: getUserColor(reply.author.id) }}
                        &gt;
                          {reply.author.name.charAt(0).toUpperCase()}
                        &lt;/Avatar&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                              {reply.author.name}
                            &lt;/span&gt;
                            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                              {new Date(reply.timestamp).toLocaleString()}
                            &lt;/span&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                            {reply.content}
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                )}

                {/* Reply input */}
                &lt;div className=&quot;ml-8 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                  &lt;div className=&quot;flex space-x-2&quot;&gt;
                    &lt;Input
                      size=&quot;small&quot;
                      placeholder=&quot;Reply...&quot;
                      value={replyContents[comment.id] || ''}
                      onChange={(e) =&gt;
                        setReplyContents({
                          ...replyContents,
                          [comment.id]: e.target.value,
                        })
                      }
                      onPressEnter={() =&gt; handleReplyToComment(comment.id)}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;SendOutlined /&gt;}
                      onClick={() =&gt; handleReplyToComment(comment.id)}
                      disabled={!replyContents[comment.id]?.trim()}
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Conflicts Tab
  const ConflictsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Conflicts ({activeConflicts.length})
        &lt;/h3&gt;
        {activeConflicts.length &gt; 0 &amp;&amp; &lt;Badge count={activeConflicts.length} status=&quot;error&quot; /&gt;}
      &lt;/div&gt;

      {activeConflicts.length === 0 ? (
        &lt;div className=&quot;text-center py-8&quot;&gt;
          &lt;CheckOutlined className=&quot;text-4xl text-green-500 mb-2&quot; /&gt;
          &lt;div className=&quot;text-gray-600 dark:text-gray-400&quot;&gt;No conflicts detected&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-3&quot;&gt;
          {activeConflicts.map((conflict) =&gt; (
            &lt;Card
              key={conflict.id}
              size=&quot;small&quot;
              className=&quot;border-red-200 bg-red-50 dark:bg-red-900/20&quot;
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                      &lt;ExclamationCircleOutlined className=&quot;text-red-500&quot; /&gt;
                      &lt;span className=&quot;font-medium text-red-700 dark:text-red-300&quot;&gt;
                        {conflict.type.replace('_', ' ').toUpperCase()}
                      &lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400 mt-1&quot;&gt;
                      Affected nodes: {conflict.affectedNodes.join(', ')}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                      {new Date(conflict.timestamp).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;primary&quot;
                    danger
                    onClick={() =&gt; {
                      setSelectedConflict(conflict);
                      setConflictModalVisible(true);
                    }}
                  &gt;
                    Resolve
                  &lt;/Button&gt;
                &lt;/div&gt;

                &lt;div className=&quot;pl-6&quot;&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                    {conflict.operations.length} conflicting operations
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  // Activity Tab
  const ActivityTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;Recent Activity&lt;/h3&gt;

      &lt;Timeline className=&quot;mt-4&quot;&gt;
        {operationHistory
          .slice(-10)
          .reverse()
          .map((operation) =&gt; (
            &lt;Timeline.Item
              key={operation.id}
              dot={
                &lt;Avatar size={20} style={{ backgroundColor: getUserColor(operation.userId) }}&gt;
                  {operation.userId.charAt(0).toUpperCase()}
                &lt;/Avatar&gt;
              }
            &gt;
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {operation.type.replace('_', ' ')}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(operation.timestamp).toLocaleString()}
                &lt;/div&gt;
                {operation.data?.nodeId &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-600 dark:text-gray-400&quot;&gt;
                    Node: {operation.data.nodeId}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          ))}
      &lt;/Timeline&gt;

      {operationHistory.length === 0 &amp;&amp; (
        &lt;Empty description=&quot;No recent activity&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;&gt;
      &lt;Drawer
        title=&quot;Collaboration&quot;
        placement=&quot;right&quot;
        onClose={onToggle}
        open={isVisible}
        width={400}
        className=&quot;collaboration-drawer&quot;
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab} className=&quot;h-full&quot;&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;TeamOutlined /&gt;
                Users
              &lt;/span&gt;
            }
            key=&quot;users&quot;
          &gt;
            &lt;UsersTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CommentOutlined /&gt;
                Comments
                {activeComments.length &gt; 0 &amp;&amp; (
                  &lt;Badge count={activeComments.length} size=&quot;small&quot; style={{ marginLeft: 4 }} /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;comments&quot;
          &gt;
            &lt;CommentsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;WarningOutlined /&gt;
                Conflicts
                {activeConflicts.length &gt; 0 &amp;&amp; (
                  &lt;Badge
                    count={activeConflicts.length}
                    size=&quot;small&quot;
                    status=&quot;error&quot;
                    style={{ marginLeft: 4 }}
                  /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;conflicts&quot;
          &gt;
            &lt;ConflictsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;ClockCircleOutlined /&gt;
                Activity
              &lt;/span&gt;
            }
            key=&quot;activity&quot;
          &gt;
            &lt;ActivityTab /&gt;
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Drawer&gt;

      {/* Conflict Resolution Modal */}
      &lt;Modal
        title=&quot;Resolve Conflict&quot;
        open={conflictModalVisible}
        onCancel={() =&gt; {
          setConflictModalVisible(false);
          setSelectedConflict(null);
        }}
        footer={null}
        width={600}
      &gt;
        {selectedConflict &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;Alert
              type=&quot;warning&quot;
              message={`${selectedConflict.type.replace('_', ' ')} Conflict`}
              description={`This conflict involves ${selectedConflict.operations.length} operations affecting ${selectedConflict.affectedNodes.length} nodes.`}
            /&gt;

            &lt;div className=&quot;space-y-3&quot;&gt;
              &lt;h4 className=&quot;font-medium&quot;&gt;Choose Resolution Strategy:&lt;/h4&gt;

              &lt;Radio.Group className=&quot;w-full&quot; size=&quot;small&quot;&gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  &lt;Radio value=&quot;last_write_wins&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Last Write Wins&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Keep the most recent changes and discard older ones
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;merge&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Smart Merge&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Attempt to automatically merge compatible changes
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;manual&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Manual Resolution&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Review each change individually and decide
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                &lt;/div&gt;
              &lt;/Radio.Group&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex justify-end space-x-2 pt-4 border-t&quot;&gt;
              &lt;Button onClick={() =&gt; setConflictModalVisible(false)}&gt;Cancel&lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt;
                  handleResolveConflict(selectedConflict, {
                    strategy: 'last_write_wins',
                  })
                }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AnalyticsDashboard.tsx (Line 128:7 - Line 742:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 131:7 - Line 745:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn305" onclick="toggleCodeBlock('cloneGroup305', 'expandBtn305', 'collapseBtn305')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn305" onclick="toggleCodeBlock('cloneGroup305', 'expandBtn305', 'collapseBtn305')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup305"><code class="language-javascript text-sm text-gray-800">={[16, 16]}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Executions&quot;
              value={executionSummary?.totalExecutions || 0}
              prefix={&lt;ThunderboltOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Success Rate&quot;
              value={executionSummary?.successRate || 0}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;CheckCircleOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.successRate || 0) &gt;= 95 ? '#3f8600' : '#cf1322',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Avg Duration&quot;
              value={formatDuration(executionSummary?.avgDuration || 0)}
              prefix={&lt;ClockCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Efficiency Score&quot;
              value={executionSummary?.efficiency || 0}
              suffix=&quot;/100&quot;
              precision={0}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.efficiency || 0) &gt;= 80 ? '#3f8600' : '#faad14',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Performance Trend Chart */}
      &lt;Card title=&quot;Performance Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={performanceHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Duration']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.primary}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Alerts and Insights Row */}
      &lt;Row gutter={[16, 16]}&gt;
        {/* Top Bottlenecks */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Top Performance Issues&quot; size=&quot;small&quot;&gt;
            {topBottlenecks.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={topBottlenecks}
                renderItem={(bottleneck) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={
                        &lt;Badge status={bottleneck.severity === 'critical' ? 'error' : 'warning'} /&gt;
                      }
                      title={
                        &lt;span&gt;
                          {bottleneck.description}
                          &lt;Tag
                            color={
                              bottleneck.severity === 'critical'
                                ? 'red'
                                : bottleneck.severity === 'high'
                                  ? 'orange'
                                  : 'yellow'
                            }
                            className=&quot;ml-2&quot;
                          &gt;
                            {bottleneck.severity}
                          &lt;/Tag&gt;
                        &lt;/span&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;{bottleneck.impact}&lt;/div&gt;
                          &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No performance issues detected&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;

        {/* Predictive Insights */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;AI Predictions&quot; size=&quot;small&quot;&gt;
            {predictiveInsights.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={predictiveInsights}
                renderItem={(insight) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={&lt;RobotOutlined className=&quot;text-blue-500&quot; /&gt;}
                      title={
                        &lt;div className=&quot;flex items-center&quot;&gt;
                          &lt;span&gt;{insight.description}&lt;/span&gt;
                          &lt;Tag color=&quot;blue&quot; className=&quot;ml-2&quot;&gt;
                            {Math.round(insight.confidence * 100)}% confidence
                          &lt;/Tag&gt;
                        &lt;/div&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;Impact: {insight.predictedImpact}&lt;/div&gt;
                          &lt;div className=&quot;text-green-600 mt-1&quot;&gt;Timeframe: {insight.timeframe}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No predictions available&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  // Performance Tab Component
  const PerformanceTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Performance Charts Row */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Execution Performance&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;AreaChart data={performanceHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Performance']}
                /&gt;
                &lt;Area
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.primary}
                  fill={chartColors.primary}
                  fillOpacity={0.6}
                /&gt;
              &lt;/AreaChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;

        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Reliability Trend&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;LineChart data={reliabilityHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis domain={[0, 100]} /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(1)}%`, 'Success Rate']}
                /&gt;
                &lt;Line
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.success}
                  strokeWidth={2}
                  dot={false}
                /&gt;
              &lt;/LineChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Node Performance Table */}
      &lt;Card title=&quot;Node Performance Analysis&quot; size=&quot;small&quot;&gt;
        &lt;Table
          size=&quot;small&quot;
          dataSource={currentAnalytics?.nodePerformance || []}
          rowKey=&quot;nodeId&quot;
          pagination={{ pageSize: 10 }}
          columns={[
            {
              title: 'Node',
              dataIndex: 'nodeName',
              key: 'nodeName',
              render: (name: string, record: NodePerformanceStats) =&gt; (
                &lt;div&gt;
                  &lt;div className=&quot;font-medium&quot;&gt;{name}&lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;{record.nodeType}&lt;/div&gt;
                &lt;/div&gt;
              ),
            },
            {
              title: 'Executions',
              dataIndex: 'executionCount',
              key: 'executionCount',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.executionCount - b.executionCount,
            },
            {
              title: 'Avg Duration',
              dataIndex: 'averageDuration',
              key: 'averageDuration',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.averageDuration - b.averageDuration,
              render: (duration: number) =&gt; formatDuration(duration),
            },
            {
              title: 'Success Rate',
              dataIndex: 'failureRate',
              key: 'failureRate',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.failureRate - b.failureRate,
              render: (failureRate: number) =&gt; (
                &lt;span style={{ color: failureRate &gt; 0.1 ? '#ff4d4f' : '#52c41a' }}&gt;
                  {((1 - failureRate) * 100).toFixed(1)}%
                &lt;/span&gt;
              ),
            },
            {
              title: 'Trend',
              dataIndex: 'trend',
              key: 'trend',
              render: (trend: string) =&gt; (
                &lt;Tag
                  color={trend === 'improving' ? 'green' : trend === 'degrading' ? 'red' : 'blue'}
                &gt;
                  {trend}
                &lt;/Tag&gt;
              ),
            },
            {
              title: 'Actions',
              key: 'actions',
              render: (_, record: NodePerformanceStats) =&gt; (
                &lt;Button type=&quot;link&quot; size=&quot;small&quot; onClick={() =&gt; setSelectedNode(record.nodeId)}&gt;
                  Analyze
                &lt;/Button&gt;
              ),
            },
          ]}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Cost Tab Component
  const CostTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Cost Overview */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Current Period Cost&quot;
              value={costOptimization?.currentCost || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;DollarCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Potential Savings&quot;
              value={costOptimization?.savings || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;RiseOutlined /&gt;}
              valueStyle={{ color: '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Cost Trend&quot;
              value={costTrend}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{ color: costTrend &gt; 0 ? '#cf1322' : '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Cost Chart */}
      &lt;Card title=&quot;Cost Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={costHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis tickFormatter={(value) =&gt; formatCurrency(value)} /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [formatCurrency(value), 'Cost']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.warning}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Cost Optimization Recommendations */}
      {costOptimization &amp;&amp; (
        &lt;Card title=&quot;Optimization Recommendations&quot; size=&quot;small&quot;&gt;
          &lt;List
            dataSource={costOptimization.recommendations}
            renderItem={(recommendation) =&gt; (
              &lt;List.Item&gt;
                &lt;List.Item.Meta
                  avatar={&lt;DollarCircleOutlined className=&quot;text-green-500&quot; /&gt;}
                  title={
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;span&gt;{recommendation.description}&lt;/span&gt;
                      &lt;Tag color=&quot;green&quot;&gt;
                        Save {formatCurrency(recommendation.estimatedSavings)}
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                  description={
                    &lt;div className=&quot;text-sm&quot;&gt;
                      &lt;div className=&quot;text-gray-600&quot;&gt;{recommendation.implementation}&lt;/div&gt;
                      &lt;Tag
                        color={
                          recommendation.impact === 'high'
                            ? 'red'
                            : recommendation.impact === 'medium'
                              ? 'orange'
                              : 'blue'
                        }
                        className=&quot;mt-1&quot;
                      &gt;
                        {recommendation.impact} impact
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                /&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        &lt;/Card&gt;
      )}
    &lt;/div&gt;
  );

  // Insights Tab Component
  const InsightsTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Predictive Insights */}
      &lt;Card title=&quot;Predictive Analytics&quot; size=&quot;small&quot;&gt;
        {predictiveInsights.length &gt; 0 ? (
          &lt;List
            dataSource={predictiveInsights}
            renderItem={(insight) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;RobotOutlined className=&quot;text-blue-500 mr-2&quot; /&gt;
                        {insight.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag color=&quot;blue&quot;&gt;{Math.round(insight.confidence * 100)}% confidence&lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{insight.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Timeframe:&lt;/span&gt;
                        &lt;div&gt;{insight.timeframe}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Expected Impact:&lt;/span&gt;
                        &lt;div&gt;{insight.predictedImpact}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommended Actions:&lt;/span&gt;
                      &lt;ul className=&quot;mt-2 space-y-1&quot;&gt;
                        {insight.recommendedActions.map((action, index) =&gt; (
                          &lt;li key={index} className=&quot;text-sm text-green-600&quot;&gt;
                            • {action}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                      Based on: {insight.basedOn.join(', ')}
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No predictive insights available&quot; /&gt;
        )}
      &lt;/Card&gt;

      {/* Bottleneck Analysis */}
      &lt;Card title=&quot;Bottleneck Analysis&quot; size=&quot;small&quot;&gt;
        {bottlenecks.length &gt; 0 ? (
          &lt;List
            dataSource={bottlenecks}
            renderItem={(bottleneck) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;WarningOutlined
                          className={`mr-2 ${
                            bottleneck.severity === 'critical'
                              ? 'text-red-500'
                              : bottleneck.severity === 'high'
                                ? 'text-orange-500'
                                : 'text-yellow-500'
                          }`}
                        /&gt;
                        {bottleneck.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag
                        color={
                          bottleneck.severity === 'critical'
                            ? 'red'
                            : bottleneck.severity === 'high'
                              ? 'orange'
                              : 'yellow'
                        }
                      &gt;
                        {bottleneck.severity}
                      &lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{bottleneck.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Impact:&lt;/span&gt;
                        &lt;div&gt;{bottleneck.impact}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Improvement:&lt;/span&gt;
                        &lt;div className=&quot;text-green-600&quot;&gt;{bottleneck.estimatedImprovement}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommendation:&lt;/span&gt;
                      &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No bottlenecks detected&quot; /&gt;
        )}
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Settings and Controls
  const AnalyticsHeader: React.FC = () =&gt; (
    &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
      &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
        &lt;Select value={analyticsPeriod} onChange={setAnalyticsPeriod} style={{ width: 120 }}&gt;
          &lt;Option value={1}&gt;Last 24h&lt;/Option&gt;
          &lt;Option value={7}&gt;Last 7 days&lt;/Option&gt;
          &lt;Option value={30}&gt;Last 30 days&lt;/Option&gt;
          &lt;Option value={90}&gt;Last 90 days&lt;/Option&gt;
        &lt;/Select&gt;

        &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Auto-refresh:&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={autoRefresh} onChange={toggleAutoRefresh} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
        {lastUpdated &amp;&amp; (
          &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
            Updated: {new Date(lastUpdated).toLocaleTimeString()}
          &lt;/span&gt;
        )}

        &lt;Button
          type=&quot;text&quot;
          icon={&lt;ReloadOutlined /&gt;}
          onClick={refreshAnalytics}
          loading={isLoading}
        &gt;
          Refresh
        &lt;/Button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  return (
    &lt;Modal
      title=&quot;Workflow Analytics Dashboard&quot;
      open={isOpen}
      onCancel={onClose}
      width={1200}
      footer={null}
      className=&quot;analytics-dashboard-modal&quot;
    &gt;
      &lt;AnalyticsHeader /&gt;

      &lt;Tabs
        activeKey={selectedTab}
        onChange={(key) =&gt; setSelectedTab(key as any)}
        className=&quot;analytics-tabs&quot;
      &gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DashboardOutlined /&gt;
              Overview
            &lt;/span&gt;
          }
          key=&quot;overview&quot;
        &gt;
          &lt;OverviewTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Performance
            &lt;/span&gt;
          }
          key=&quot;performance&quot;
        &gt;
          &lt;PerformanceTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DollarCircleOutlined /&gt;
              Costs
            &lt;/span&gt;
          }
          key=&quot;costs&quot;
        &gt;
          &lt;CostTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BulbOutlined /&gt;
              Insights
            &lt;/span&gt;
          }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedPropertyPanel.tsx (Line 100:6 - Line 481:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancedpropertypanel/AdvancedPropertyPanel.tsx (Line 110:6 - Line 491:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn307" onclick="toggleCodeBlock('cloneGroup307', 'expandBtn307', 'collapseBtn307')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn307" onclick="toggleCodeBlock('cloneGroup307', 'expandBtn307', 'collapseBtn307')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup307"><code class="language-javascript text-sm text-gray-800">={{ width }}&gt;
      {/* Panel Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700 bg-gray-900&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;h3 className=&quot;text-sm font-semibold text-white&quot;&gt;{title}&lt;/h3&gt;
          {badge &amp;&amp; (
            &lt;Badge count={badge} className=&quot;text-xs&quot; style={{ backgroundColor: '#1890ff' }} /&gt;
          )}
        &lt;/div&gt;
        {actions &amp;&amp; &lt;Space size=&quot;small&quot;&gt;{actions}&lt;/Space&gt;}
      &lt;/div&gt;

      {/* Panel Content */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;{children}&lt;/div&gt;

      {/* Resize Handle */}
      {onResize &amp;&amp; (
        &lt;div
          className={cn(
            'absolute top-0 right-0 w-1 h-full cursor-col-resize bg-transparent hover:bg-blue-500 transition-colors',
            isResizing &amp;&amp; 'bg-blue-500'
          )}
          onMouseDown={handleMouseDown}
        /&gt;
      )}
    &lt;/div&gt;
  );
};

const InputDataPanel: React.FC&lt;{
  nodeId: string;
  width: number;
  onResize: (width: number) =&gt; void;
}&gt; = ({ nodeId, width, onResize }) =&gt; {
  const { edges } = useLeanWorkflowStore();
  const { getNodeState } = useEnhancedExecutionStore();

  // Find incoming connections to this node
  const incomingData = useMemo(() =&gt; {
    const incomingEdges = edges.filter((edge) =&gt; edge.target === nodeId);
    const data: Record&lt;string, any&gt; = {};

    incomingEdges.forEach((edge) =&gt; {
      const sourceNodeState = getNodeState(edge.source);
      if (sourceNodeState?.outputData) {
        data[edge.source] = sourceNodeState.outputData;
      }
    });

    return data;
  }, [edges, nodeId, getNodeState]);

  const actions = [
    &lt;Tooltip key=&quot;refresh&quot; title=&quot;Refresh data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;SyncOutlined /&gt;}
        onClick={() =&gt; {
          // Refresh input data
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          navigator.clipboard.writeText(JSON.stringify(incomingData, null, 2));
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  return (
    &lt;ResizablePanel
      title=&quot;Input Data&quot;
      width={width}
      onResize={onResize}
      actions={actions}
      badge={Object.keys(incomingData).length || undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {Object.keys(incomingData).length === 0 ? (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📥&lt;/div&gt;
            &lt;div&gt;No input data available&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;
              Connect nodes or execute the workflow to see input data
            &lt;/div&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-4&quot;&gt;
            {Object.entries(incomingData).map(([sourceNodeId, data]) =&gt; (
              &lt;Card
                key={sourceNodeId}
                size=&quot;small&quot;
                title={`From: ${sourceNodeId}`}
                className=&quot;bg-gray-900 border-gray-600&quot;
              &gt;
                &lt;JsonViewer data={data} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
              &lt;/Card&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

const ConfigurationPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeById, updateNodeParameters } = useLeanWorkflowStore();
  const [activeTab, setActiveTab] = useState('properties');
  const [formState, setFormState] = useState&lt;PropertyFormState&gt;({});
  const [isValid, setIsValid] = useState(true);
  const [errors, setErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const node = getNodeById(nodeId);
  const nodeDefinition = node ? nodeRegistry.getNodeTypeDescription(node.type) : null;

  // Get enhanced properties for this node
  const enhancedProperties = useMemo(() =&gt; {
    if (!nodeDefinition) return [];

    // Use basic properties for now, can be enhanced later
    return nodeDefinition.properties || [];
  }, [nodeDefinition]);

  // Initialize form state from node parameters
  React.useEffect(() =&gt; {
    if (node) {
      setFormState(node.parameters || {});
    }
  }, [node]);

  // Property change handlers
  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      const newFormState = { ...formState, [name]: value };
      setFormState(newFormState);
      updateNodeParameters(nodeId, { [name]: value });
    },
    [formState, nodeId, updateNodeParameters]
  );

  const handleValidationChange = useCallback((result: PropertyValidationResult) =&gt; {
    setIsValid(result.isValid);
    setErrors(result.errors);
  }, []);

  const handleTest = useCallback(async () =&gt; {}, []);

  const handleSave = useCallback(async () =&gt; {}, []);

  const actions = [
    &lt;Tooltip key=&quot;test&quot; title=&quot;Test node&quot;&gt;
      &lt;Button
        type=&quot;primary&quot;
        size=&quot;small&quot;
        icon={&lt;PlayCircleOutlined /&gt;}
        onClick={handleTest}
        disabled={!isValid}
      &gt;
        Test
      &lt;/Button&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;debug&quot; title=&quot;Debug mode&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;BugOutlined /&gt;}
        onClick={() =&gt; {
          // Toggle debug mode for this node
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;save&quot; title=&quot;Save configuration&quot;&gt;
      &lt;Button type=&quot;text&quot; size=&quot;small&quot; icon={&lt;SaveOutlined /&gt;} onClick={handleSave} /&gt;
    &lt;/Tooltip&gt;,
  ];

  const tabItems = [
    {
      key: 'properties',
      label: (
        &lt;span&gt;
          Properties
          {errors.size &gt; 0 &amp;&amp; (
            &lt;Badge
              count={errors.size}
              size=&quot;small&quot;
              style={{ backgroundColor: '#ff4d4f', marginLeft: 8 }}
            /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          {enhancedProperties.length === 0 ? (
            &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
              &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
              &lt;div&gt;No properties available&lt;/div&gt;
              &lt;div className=&quot;text-xs mt-2&quot;&gt;
                This node type doesn't have configurable properties
              &lt;/div&gt;
            &lt;/div&gt;
          ) : (
            &lt;EnhancedPropertyRenderer
              properties={enhancedProperties}
              formState={formState}
              onChange={handlePropertyChange}
              onValidationChange={handleValidationChange}
              theme=&quot;dark&quot;
            /&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'credentials',
      label: 'Credentials',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;🔐&lt;/div&gt;
            &lt;div&gt;Credential management&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Configure authentication for this node&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'settings',
      label: 'Settings',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
            &lt;div&gt;Node settings&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Advanced configuration options&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;ResizablePanel title=&quot;Configuration&quot; width={550} actions={actions}&gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabItems}
        className=&quot;h-full&quot;
        tabBarStyle={{ margin: 0, paddingLeft: 16, paddingRight: 16 }}
      /&gt;
    &lt;/ResizablePanel&gt;
  );
};

const OutputPreviewPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeState } = useEnhancedExecutionStore();
  const nodeState = getNodeState(nodeId);

  const actions = [
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy output&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          if (nodeState?.outputData) {
            navigator.clipboard.writeText(JSON.stringify(nodeState.outputData, null, 2));
          }
        }}
        disabled={!nodeState?.outputData}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;fullscreen&quot; title=&quot;Fullscreen view&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;FullscreenOutlined /&gt;}
        onClick={() =&gt; {
          // Open fullscreen view
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  const hasOutput = nodeState?.outputData;
  const hasError = nodeState?.error;

  return (
    &lt;ResizablePanel
      title=&quot;Output Preview&quot;
      width={400}
      actions={actions}
      badge={hasOutput ? '✓' : hasError ? '✗' : undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {hasError &amp;&amp; nodeState?.error ? (
          &lt;Card className=&quot;bg-red-900 border-red-600&quot; title=&quot;Execution Error&quot; size=&quot;small&quot;&gt;
            &lt;div className=&quot;text-red-200 text-sm&quot;&gt;
              &lt;div className=&quot;font-semibold mb-2&quot;&gt;{nodeState.error.message}&lt;/div&gt;
              {nodeState.error.stack &amp;&amp; (
                &lt;details className=&quot;mt-2&quot;&gt;
                  &lt;summary className=&quot;cursor-pointer&quot;&gt;Stack Trace&lt;/summary&gt;
                  &lt;pre className=&quot;text-xs mt-2 overflow-x-auto&quot;&gt;{nodeState.error.stack}&lt;/pre&gt;
                &lt;/details&gt;
              )}
            &lt;/div&gt;
          &lt;/Card&gt;
        ) : hasOutput ? (
          &lt;div&gt;
            &lt;div className=&quot;flex items-center justify-between mb-3&quot;&gt;
              &lt;span className=&quot;text-sm font-medium text-green-400&quot;&gt;Output Data&lt;/span&gt;
              {nodeState.duration &amp;&amp; (
                &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                  {nodeState.duration &lt; 1000
                    ? `${nodeState.duration}ms`
                    : `${(nodeState.duration / 1000).toFixed(2)}s`}
                &lt;/span&gt;
              )}
            &lt;/div&gt;
            &lt;JsonViewer data={nodeState.outputData} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📤&lt;/div&gt;
            &lt;div&gt;No output data&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Execute this node to see output data&lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

export const AdvancedPropertyPanel: React.FC&lt;AdvancedPropertyPanelProps&gt; = ({
  isOpen,
  onClose,
  nodeId,
}) =&gt; {
  const [inputPanelWidth, setInputPanelWidth] = useState(700);
  const { getNodeById } = useLeanWorkflowStore();

  const node = nodeId ? getNodeById(nodeId) : null;

  if (!isOpen || !nodeId || !node) {
    return null;
  }

  return (
    &lt;Drawer
      title={
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
            &lt;SettingOutlined /&gt;
            &lt;span&gt;{node.name || node.type}&lt;/span&gt;
            &lt;Badge status=&quot;processing&quot; text={node.type} /&gt;
          &lt;/div&gt;
          &lt;Button type=&quot;text&quot; icon={&lt;CloseOutlined /&gt;} onClick={onClose} size=&quot;small&quot; /&gt;
        &lt;/div&gt;
      }
      placement=&quot;bottom&quot;
      height=&quot;80vh&quot;
      open={isOpen}
      onClose={onClose}
      closable={false}
      className=&quot;advanced-property-panel&quot;
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;div className=&quot;flex h-full bg-gray-800&quot;&gt;
        {/* INPUT Column */}
        &lt;InputDataPanel nodeId={nodeId} width={inputPanelWidth} onResize={setInputPanelWidth} /&gt;

        {/* CONFIGURATION Column */}
        &lt;ConfigurationPanel nodeId={nodeId} /&gt;

        {/* OUTPUT Column */}
        &lt;OutputPreviewPanel nodeId={nodeId}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedNodePanel.tsx (Line 302:4 - Line 466:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancednodepanel/AdvancedNodePanel.tsx (Line 307:4 - Line 471:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn309" onclick="toggleCodeBlock('cloneGroup309', 'expandBtn309', 'collapseBtn309')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn309" onclick="toggleCodeBlock('cloneGroup309', 'expandBtn309', 'collapseBtn309')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup309"><code class="language-javascript text-sm text-gray-800">={suggestion.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, suggestion);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAISuggestionAdd(suggestion);
        }}
        className=&quot;group p-2.5 border border-blue-200 bg-blue-50 rounded-md cursor-move hover:bg-blue-100 hover:border-blue-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm bg-blue-500&quot;&gt;
            {suggestion.icon}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-blue-900 truncate&quot;&gt;{suggestion.displayName}&lt;/p&gt;
              &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-1.5 py-0.5 rounded-full font-medium&quot;&gt;
                AI
              &lt;/span&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-blue-700 truncate mt-0.5 leading-tight&quot;&gt;
              {suggestion.description}
            &lt;/p&gt;
            {suggestion.aiSuggestion &amp;&amp; (
              &lt;div className=&quot;mt-1&quot;&gt;
                &lt;p className=&quot;text-xs text-blue-600 italic&quot;&gt;
                  💡 {suggestion.aiSuggestion.reasoning}
                &lt;/p&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-700 text-xs px-1.5 py-0.5 rounded mt-1 inline-block&quot;&gt;
                  Confidence: {Math.round(suggestion.aiSuggestion.confidence * 100)}%
                &lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAISuggestionAdd]
  );

  // Render function for node items in virtualized list
  const renderNodeItem = useCallback(
    (node: (typeof allAvailableNodes)[0], _index: number) =&gt; (
      &lt;div
        key={node.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, node);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAddNode(node);
        }}
        className=&quot;group p-2.5 border border-gray-200 rounded-md cursor-move hover:bg-gray-50 hover:border-gray-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div
            className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm&quot;
            style={{ backgroundColor: node.color }}
          &gt;
            {node.icon || node.displayName.charAt(0)}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-gray-900 truncate&quot;&gt;{node.displayName}&lt;/p&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-gray-500 truncate mt-0.5 leading-tight&quot;&gt;
              {node.description}
            &lt;/p&gt;
            &lt;div className=&quot;mt-1.5&quot;&gt;
              &lt;span className=&quot;bg-gray-100 text-gray-600 text-xs px-1.5 py-0.5 rounded&quot;&gt;
                {getCategoryMetadata(node.category || '')?.icon || ''} {node.category}
              &lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAddNode]
  );

  return (
    &lt;div
      className={`${isCollapsed ? 'w-16' : 'w-80'} h-full bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ease-in-out`}
    &gt;
      {/* Toggle Button */}
      &lt;div className=&quot;flex justify-end p-4&quot;&gt;
        &lt;button
          onClick={onToggle}
          className=&quot;p-2 rounded-lg hover:bg-gray-100 transition-colors&quot;
          title={isCollapsed ? 'Expand node panel' : 'Collapse node panel'}
        &gt;
          &lt;span className=&quot;text-lg&quot;&gt;{isCollapsed ? '→' : '←'}&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;px-4 pb-4 border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-semibold text-gray-900&quot;&gt;Nodes&lt;/h2&gt;
            &lt;span className=&quot;bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
              {allAvailableNodes.length}
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;p className=&quot;text-sm text-gray-600&quot;&gt;Drag to add to workflow&lt;/p&gt;
        &lt;/div&gt;
      )}

      {/* Search and Filter */}
      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;p-4 border-b border-gray-200 space-y-3&quot;&gt;
          &lt;input
            type=&quot;text&quot;
            placeholder=&quot;Search nodes...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          /&gt;

          &lt;select
            value={selectedCategory}
            onChange={(e) =&gt; setSelectedCategory(e.target.value)}
            aria-label=&quot;Select category&quot;
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          &gt;
            {categories.map((category) =&gt; {
              const metadata = category !== 'all' ? getCategoryMetadata(category) : null;
              return (
                &lt;option key={category} value={category}&gt;
                  {category === 'all' ? 'All Categories' : `${metadata?.icon || ''} ${category}`}
                &lt;/option&gt;
              );
            })}
          &lt;/select&gt;
        &lt;/div&gt;
      )}

      {/* AI Suggestions Section */}
      {!isCollapsed &amp;&amp; isAIEnabled &amp;&amp; aiSuggestedNodes.length &gt; 0 &amp;&amp; showAISuggestions &amp;&amp; (
        &lt;div className=&quot;border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;px-4 py-3 bg-blue-50&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                &lt;div className=&quot;w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center&quot;&gt;
                  &lt;span className=&quot;text-white text-xs&quot;&gt;🤖&lt;/span&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-sm font-medium text-blue-900&quot;&gt;AI Suggestions&lt;/h3&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                  {aiSuggestedNodes.length}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;button
                onClick={() =&gt; setShowAISuggestions(false)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAssistantPanel.tsx (Line 210:4 - Line 542:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/aiassistantpanel/AIAssistantPanel.tsx (Line 213:4 - Line 545:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn315" onclick="toggleCodeBlock('cloneGroup315', 'expandBtn315', 'collapseBtn315')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn315" onclick="toggleCodeBlock('cloneGroup315', 'expandBtn315', 'collapseBtn315')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup315"><code class="language-javascript text-sm text-gray-800">={suggestion.id}
      size=&quot;small&quot;
      className=&quot;mb-3 bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors&quot;
      actions={[
        &lt;Tooltip key=&quot;details&quot; title=&quot;View Details&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;InfoCircleOutlined /&gt;}
            onClick={() =&gt; handleViewSuggestionDetails(suggestion)}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
        &lt;Tooltip key=&quot;apply&quot; title=&quot;Apply Suggestion&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;CheckCircleOutlined /&gt;}
            onClick={() =&gt; handleApplySuggestion(suggestion)}
            className=&quot;text-green-400 hover:text-green-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
      ]}
    &gt;
      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            {getTypeIcon(suggestion.type)}
            &lt;span className=&quot;text-white font-medium text-sm&quot;&gt;{suggestion.title}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-1&quot;&gt;
            &lt;Tag color={getImpactColor(suggestion.impact)}&gt;{suggestion.impact}&lt;/Tag&gt;
            &lt;Badge
              count={`${(suggestion.confidence * 100).toFixed(0)}%`}
              style={{ backgroundColor: '#1890ff' }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;{suggestion.description}&lt;/Text&gt;

        &lt;div className=&quot;flex items-center gap-2 text-xs text-gray-500&quot;&gt;
          &lt;span&gt;Category: {suggestion.category}&lt;/span&gt;
          {suggestion.estimatedBenefit.performance &amp;&amp; (
            &lt;span&gt;Performance: +{(suggestion.estimatedBenefit.performance * 100).toFixed(0)}%&lt;/span&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderAnalysisMetrics = () =&gt; {
    if (!analysis) return null;

    return (
      &lt;div className=&quot;space-y-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
            Workflow Analysis
          &lt;/Title&gt;

          &lt;div className=&quot;space-y-3&quot;&gt;
            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Complexity&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;{(analysis.complexity * 100).toFixed(0)}%&lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.complexity * 100}
                strokeColor=&quot;#3b82f6&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Performance&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.performance.estimatedImprovement * 100).toFixed(0)}% improvement
                  possible
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.performance.estimatedImprovement * 100}
                strokeColor=&quot;#22c55e&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Maintainability&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.maintainability.codeQuality * 100).toFixed(0)}%
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.maintainability.codeQuality * 100}
                strokeColor=&quot;#f59e0b&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {analysis.performance.bottlenecks.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Performance Bottlenecks Detected&quot;
            description={
              &lt;ul className=&quot;mt-2&quot;&gt;
                {analysis.performance.bottlenecks.map((bottleneck, index) =&gt; (
                  &lt;li key={index} className=&quot;text-sm&quot;&gt;
                    {bottleneck}
                  &lt;/li&gt;
                ))}
              &lt;/ul&gt;
            }
            type=&quot;warning&quot;
            showIcon
            className=&quot;bg-yellow-900 border-yellow-600&quot;
          /&gt;
        )}

        {analysis.reliability.missingErrorHandling.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Missing Error Handling&quot;
            description={`${analysis.reliability.missingErrorHandling.length} nodes need error handling`}
            type=&quot;error&quot;
            showIcon
            className=&quot;bg-red-900 border-red-600&quot;
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;RobotOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            AI Assistant
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Intelligent workflow optimization and generation
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;ai-assistant-tabs&quot;
          items={[
            {
              key: 'suggestions',
              label: (
                &lt;span&gt;
                  &lt;BulbOutlined className=&quot;mr-1&quot; /&gt;
                  Suggestions
                  {suggestions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={suggestions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  {suggestions.length === 0 ? (
                    &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
                      &lt;BulbOutlined className=&quot;text-4xl mb-2&quot; /&gt;
                      &lt;div&gt;No suggestions available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-2&quot;&gt;
                        {workflow
                          ? 'Workflow analysis in progress...'
                          : 'Load a workflow to get AI suggestions'}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div&gt;{suggestions.map(renderSuggestionCard)}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              ),
            },
            {
              key: 'generate',
              label: (
                &lt;span&gt;
                  &lt;SendOutlined className=&quot;mr-1&quot; /&gt;
                  Generate
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Natural Language to Workflow
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      &lt;TextArea
                        value={naturalLanguageInput}
                        onChange={(e) =&gt; setNaturalLanguageInput(e.target.value)}
                        placeholder=&quot;Describe your workflow in natural language...&amp;#10;&amp;#10;Example: 'Send an email notification when a new order is received, then update the inventory database'&quot;
                        rows={4}
                        className=&quot;bg-gray-700 border-gray-600 text-white&quot;
                      /&gt;
                      &lt;Button
                        type=&quot;primary&quot;
                        icon={&lt;SendOutlined /&gt;}
                        onClick={handleGenerateWorkflow}
                        loading={isGenerating}
                        disabled={!naturalLanguageInput.trim()}
                        className=&quot;w-full&quot;
                      &gt;
                        Generate Workflow
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;

                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Quick Templates
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-2&quot;&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Send email notification when form is submitted')
                        }
                      &gt;
                        📧 Email Notification
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Process uploaded files and save to database')
                        }
                      &gt;
                        📁 File Processing
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Sync data between two APIs every hour')
                        }
                      &gt;
                        🔄 Data Synchronization
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'analysis',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Analysis
                &lt;/span&gt;
              ),
              children: renderAnalysisMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Suggestion Details Modal */}
      &lt;Modal
        title={selectedSuggestion?.title}
        open={isDetailModalOpen}
        onCancel={() =&gt; setIsDetailModalOpen(false)}
        footer={[
          &lt;Button key=&quot;cancel&quot; onClick={() =&gt; setIsDetailModalOpen(false)}&gt;
            Close
          &lt;/Button&gt;,
          &lt;Button
            key=&quot;apply&quot;
            type=&quot;primary&quot;
            onClick={() =&gt; {
              if (selectedSuggestion) {
                handleApplySuggestion(selectedSuggestion);
                setIsDetailModalOpen(false);
              }
            }}
          &gt;
            Apply Suggestion
          &lt;/Button&gt;,
        ]}
        width={600}
      &gt;
        {selectedSuggestion &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.description}&lt;/Text&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Title level={5}&gt;Reasoning&lt;/Title&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.reasoning}&lt;/Text&gt;
            &lt;/div&gt;

            {selectedSuggestion.suggestedChanges.length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}&gt;Suggested Changes&lt;/Title&gt;
                &lt;List
                  size=&quot;small&quot;
                  dataSource={selectedSuggestion.suggestedChanges}
                  renderItem={(change) =&gt; (
                    &lt;List.Item&gt;
                      &lt;div className=&quot;space-y-1&quot;&gt;
                        &lt;div className=&quot;font-medium&quot;&gt;{change.type}&lt;/div&gt;
                        &lt;div className=&quot;text-sm text-gray-600&quot;&gt;{change.reason}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/List.Item&gt;
                  )}
                /&gt;
              &lt;/div&gt;
            )}

            {Object.keys(selectedSuggestion.estimatedBenefit).length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/UserManagementPanel.tsx (Line 467:5 - Line 971:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/usermanagementpanel/UserManagementPanel.tsx (Line 470:5 - Line 974:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn322" onclick="toggleCodeBlock('cloneGroup322', 'expandBtn322', 'collapseBtn322')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn322" onclick="toggleCodeBlock('cloneGroup322', 'expandBtn322', 'collapseBtn322')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup322"><code class="language-javascript text-sm text-gray-800">={&lt;UserOutlined /&gt;} /&gt;
          &lt;div&gt;
            &lt;div className=&quot;text-white font-medium&quot;&gt;{record.name}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.email}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Role',
      key: 'role',
      render: (record: User) =&gt; &lt;Tag color={getRoleColor(record.role.id)}&gt;{record.role.name}&lt;/Tag&gt;,
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: User) =&gt; &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;,
    },
    {
      title: 'MFA',
      key: 'mfa',
      render: (record: User) =&gt; (
        &lt;Badge
          status={record.mfaEnabled ? 'success' : 'default'}
          text={record.mfaEnabled ? 'Enabled' : 'Disabled'}
        /&gt;
      ),
    },
    {
      title: 'Last Login',
      key: 'lastLogin',
      render: (record: User) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {record.lastLoginAt ? new Date(record.lastLoginAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: User) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;Edit User&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedUser(record);
                setIsUserModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Manage MFA&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckCircleOutlined /&gt;}
              onClick={() =&gt; {
                // Handle MFA management
              }}
              className=&quot;text-purple-400 hover:text-purple-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Dropdown
            menu={{
              items: [
                {
                  key: 'suspend',
                  label: record.status === 'active' ? 'Suspend User' : 'Activate User',
                  icon: record.status === 'active' ? &lt;LockOutlined /&gt; : &lt;UnlockOutlined /&gt;,
                },
                {
                  key: 'delete',
                  label: 'Delete User',
                  icon: &lt;DeleteOutlined /&gt;,
                  danger: true,
                },
              ],
            }}
            trigger={['click']}
          &gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;MoreOutlined /&gt;}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const apiKeyColumns = [
    {
      title: 'Name',
      key: 'name',
      render: (_record: APIKey) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{_record.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.metadata.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Key',
      key: 'key',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;font-mono text-xs text-gray-300&quot;&gt;{_record.key.substring(0, 12)}...&lt;/div&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (_record: APIKey) =&gt; (
        &lt;Tag color={_record.status === 'active' ? 'green' : 'red'}&gt;{_record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Expires',
      key: 'expires',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.expiresAt ? new Date(_record.expiresAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Last Used',
      key: 'lastUsed',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.lastUsedAt ? new Date(_record.lastUsedAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: APIKey) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Revoke Key&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;DeleteOutlined /&gt;}
              className=&quot;text-red-400 hover:text-red-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderUserStats = () =&gt; (
    &lt;div className=&quot;grid grid-cols-4 gap-4 mb-6&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic title=&quot;Total Users&quot; value={users.length} valueStyle={{ color: '#3b82f6' }} /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Active Users&quot;
          value={users.filter((u) =&gt; u.status === 'active').length}
          valueStyle={{ color: '#22c55e' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Pending Invitations&quot;
          value={invitations.filter((i) =&gt; i.status === 'pending').length}
          valueStyle={{ color: '#f59e0b' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;MFA Enabled&quot;
          value={users.filter((u) =&gt; u.mfaEnabled).length}
          valueStyle={{ color: '#8b5cf6' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderUsersTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {renderUserStats()}

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Users
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Search
              placeholder=&quot;Search users...&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              className=&quot;w-64&quot;
            /&gt;
            &lt;Select value={selectedRole} onChange={setSelectedRole} className=&quot;w-32&quot;&gt;
              &lt;Option value=&quot;all&quot;&gt;All Roles&lt;/Option&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;UserAddOutlined /&gt;}
              onClick={() =&gt; setIsInviteModalOpen(true)}
            &gt;
              Invite User
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={userColumns}
          dataSource={filteredUsers}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderAPIKeysTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            API Keys
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsAPIKeyModalOpen(true)}&gt;
            Create API Key
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={apiKeyColumns}
          dataSource={apiKeys}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderInvitationsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Pending Invitations
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;MailOutlined /&gt;} onClick={() =&gt; setIsInviteModalOpen(true)}&gt;
            Send Invitation
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;List
          dataSource={invitations.filter((i) =&gt; i.status === 'pending')}
          renderItem={(invitation) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button key=&quot;resend&quot; type=&quot;text&quot; size=&quot;small&quot;&gt;
                  Resend
                &lt;/Button&gt;,
                &lt;Button key=&quot;revoke&quot; type=&quot;text&quot; size=&quot;small&quot; danger&gt;
                  Revoke
                &lt;/Button&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                avatar={&lt;Avatar icon={&lt;MailOutlined /&gt;} /&gt;}
                title={invitation.email}
                description={
                  &lt;div&gt;
                    &lt;div&gt;Role: {invitation.role}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                      Expires: {new Date(invitation.expiresAt).toLocaleDateString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSSOTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-4&quot;&gt;
          SSO Providers
        &lt;/Title&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {ssoProviders.map((provider) =&gt; (
            &lt;div
              key={provider.id}
              className=&quot;flex items-center justify-between p-3 bg-gray-700 rounded border border-gray-600&quot;
            &gt;
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;img src={provider.metadata.logo} alt={provider.name} className=&quot;w-8 h-8 rounded&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{provider.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{provider.metadata.description}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Switch
                  checked={provider.enabled}
                  onChange={(_checked) =&gt; {
                    // Handle SSO provider toggle
                  }}
                /&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;SettingOutlined /&gt;}
                  onClick={() =&gt; {
                    // Handle SSO configuration
                  }}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;TeamOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            User Management
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Manage users, roles, permissions, and authentication
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;user-management-tabs&quot;
          items={[
            {
              key: 'users',
              label: (
                &lt;span&gt;
                  &lt;UserOutlined className=&quot;mr-1&quot; /&gt;
                  Users
                  &lt;Badge count={users.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderUsersTab(),
            },
            {
              key: 'apikeys',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  API Keys
                  &lt;Badge count={apiKeys.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAPIKeysTab(),
            },
            {
              key: 'invitations',
              label: (
                &lt;span&gt;
                  &lt;MailOutlined className=&quot;mr-1&quot; /&gt;
                  Invitations
                  &lt;Badge
                    count={invitations.filter((i) =&gt; i.status === 'pending').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderInvitationsTab(),
            },
            {
              key: 'sso',
              label: (
                &lt;span&gt;
                  &lt;LockOutlined className=&quot;mr-1&quot; /&gt;
                  SSO
                  &lt;Badge
                    count={ssoProviders.filter((p) =&gt; p.enabled).length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderSSOTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* User Edit Modal */}
      &lt;Modal
        title=&quot;Edit User&quot;
        open={isUserModalOpen}
        onCancel={() =&gt; setIsUserModalOpen(false)}
        onOk={() =&gt; setIsUserModalOpen(false)}
        width={600}
      &gt;
        {selectedUser &amp;&amp; (
          &lt;Form layout=&quot;vertical&quot;&gt;
            &lt;Form.Item label=&quot;Name&quot;&gt;
              &lt;Input value={selectedUser.name} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Email&quot;&gt;
              &lt;Input value={selectedUser.email} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Role&quot;&gt;
              &lt;Select value={selectedUser.role.id}&gt;
                {roles.map((role) =&gt; (
                  &lt;Option key={role.id} value={role.id}&gt;
                    {role.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Status&quot;&gt;
              &lt;Select value={selectedUser.status}&gt;
                &lt;Option value=&quot;active&quot;&gt;Active&lt;/Option&gt;
                &lt;Option value=&quot;inactive&quot;&gt;Inactive&lt;/Option&gt;
                &lt;Option value=&quot;suspended&quot;&gt;Suspended&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        )}
      &lt;/Modal&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={isInviteModalOpen}
        onCancel={() =&gt; setIsInviteModalOpen(false)}
        onOk={() =&gt; setIsInviteModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Email&quot; required&gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Role&quot; required&gt;
            &lt;Select placeholder=&quot;Select role&quot;&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Message&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Welcome message (optional)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create API Key Modal */}
      &lt;Modal
        title=&quot;Create API Key&quot;
        open={isAPIKeyModalOpen}
        onCancel={() =&gt; setIsAPIKeyModalOpen(false)}
        onOk={() =&gt; setIsAPIKeyModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;API Key Name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Description (optional)&quot; rows={2}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/SecurityDashboard.tsx (Line 186:6 - Line 892:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/securitydashboard/SecurityDashboard.tsx (Line 189:6 - Line 895:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn324" onclick="toggleCodeBlock('cloneGroup324', 'expandBtn324', 'collapseBtn324')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn324" onclick="toggleCodeBlock('cloneGroup324', 'expandBtn324', 'collapseBtn324')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup324"><code class="language-javascript text-sm text-gray-800">={getSeverityColor(_record.severity)}&gt;{_record.action.type}&lt;/Tag&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Resource',
      key: 'resource',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.resource.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.resource.type}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (_record: AuditLog) =&gt; (
        &lt;Tag color={getSeverityColor(_record.severity)}&gt;{_record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'IP Address',
      key: 'ipAddress',
      render: (_record: AuditLog) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs font-mono&quot;&gt;{_record.ipAddress}&lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: AuditLog) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                // Show audit log details
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const incidentColumns = [
    {
      title: 'Title',
      key: 'title',
      render: (record: SecurityIncident) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{record.title}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getSeverityColor(record.severity)}&gt;{record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Category',
      key: 'category',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs capitalize&quot;&gt;{record.category.replace('_', ' ')}&lt;/div&gt;
      ),
    },
    {
      title: 'Created',
      key: 'createdAt',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {new Date(record.createdAt).toLocaleDateString()}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: SecurityIncident) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedIncident(record);
                setIsIncidentModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Update Status&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;SettingOutlined /&gt;}
              onClick={() =&gt; {
                // Update incident status
              }}
              className=&quot;text-green-400 hover:text-green-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderOverviewTab = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Security Metrics */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Security Score&quot;
              value={metrics?.securityScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#22c55e' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Open Incidents&quot;
              value={metrics?.openIncidents || 0}
              valueStyle={{ color: '#ef4444' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Critical Incidents&quot;
              value={metrics?.criticalIncidents || 0}
              valueStyle={{ color: '#dc2626' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Compliance Score&quot;
              value={metrics?.complianceScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#3b82f6' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Recent Security Events */}
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Recent Security Events
          &lt;/Title&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;ReloadOutlined /&gt;}
            onClick={loadSecurityData}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/div&gt;

        &lt;Timeline
          items={auditLogs.slice(0, 5).map((log) =&gt; ({
            color: getSeverityColor(log.severity),
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white text-sm&quot;&gt;{log.action.description}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                  {log.userEmail} • {new Date(log.timestamp).toLocaleString()}
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Tag color={getSeverityColor(log.severity)}&gt;{log.severity}&lt;/Tag&gt;
                  &lt;Tag&gt;{log.category}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      &lt;/Card&gt;

      {/* Security Alerts */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Security Alerts
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {incidents.slice(0, 3).map((incident) =&gt; (
                &lt;Alert
                  key={incident.id}
                  message={incident.title}
                  description={incident.description}
                  type={incident.severity === 'critical' ? 'error' : 'warning'}
                  showIcon
                  className=&quot;bg-red-900 border-red-600&quot;
                /&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Vulnerability Summary
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {vulnerabilityScans.slice(0, 3).map((scan) =&gt; (
                &lt;div
                  key={scan.id}
                  className=&quot;flex items-center justify-between p-2 bg-gray-700 rounded&quot;
                &gt;
                  &lt;div&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.target}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-right&quot;&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;findings&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  const renderAuditLogsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Audit Logs
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Select
              value={filters.severity}
              onChange={(value) =&gt; setFilters({ ...filters, severity: value })}
              className=&quot;w-32&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Severity&lt;/Option&gt;
              &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
              &lt;Option value=&quot;error&quot;&gt;Error&lt;/Option&gt;
              &lt;Option value=&quot;warning&quot;&gt;Warning&lt;/Option&gt;
              &lt;Option value=&quot;info&quot;&gt;Info&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;Select
              value={filters.category}
              onChange={(value) =&gt; setFilters({ ...filters, category: value })}
              className=&quot;w-40&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Categories&lt;/Option&gt;
              &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
              &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
              &lt;Option value=&quot;data_access&quot;&gt;Data Access&lt;/Option&gt;
              &lt;Option value=&quot;security_event&quot;&gt;Security Event&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;RangePicker
              value={[filters.startDate, filters.endDate]}
              onChange={(dates) =&gt;
                setFilters({
                  ...filters,
                  startDate: dates?.[0],
                  endDate: dates?.[1],
                })
              }
              className=&quot;w-64&quot;
            /&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;DownloadOutlined /&gt;}
              onClick={() =&gt; {
                // Export audit logs
              }}
            &gt;
              Export
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={auditLogColumns}
          dataSource={filteredAuditLogs}
          loading={isLoading}
          pagination={{ pageSize: 20 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
          scroll={{ x: 'max-content' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderIncidentsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Security Incidents
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AlertOutlined /&gt;}
            onClick={() =&gt; setIsIncidentModalOpen(true)}
          &gt;
            Create Incident
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={incidentColumns}
          dataSource={incidents}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderVulnerabilitiesTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Vulnerability Scans
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;SecurityScanOutlined /&gt;}
            onClick={() =&gt; setIsScanModalOpen(true)}
          &gt;
            Start Scan
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {vulnerabilityScans.map((scan) =&gt; (
            &lt;Card key={scan.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{scan.target}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Total&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-red-400 text-lg font-bold&quot;&gt;{scan.summary.critical}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Critical&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-orange-400 text-lg font-bold&quot;&gt;{scan.summary.high}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;High&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={scan.status === 'completed' ? 'green' : 'orange'}&gt;{scan.status}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderComplianceTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Compliance Reports
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AuditOutlined /&gt;}
            onClick={() =&gt; {
              // Generate compliance report
            }}
          &gt;
            Generate Report
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {complianceReports.map((report) =&gt; (
            &lt;Card key={report.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{report.standard} Compliance Report&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                    Generated: {new Date(report.generatedAt).toLocaleDateString()}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.score}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Score&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.findings.length}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Findings&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={report.status === 'completed' ? 'green' : 'orange'}&gt;
                    {report.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSecretsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Secrets Management
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsSecretModalOpen(true)}&gt;
            Create Secret
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {secrets.map((secret) =&gt; (
            &lt;Card key={secret.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{secret.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{secret.type}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;
                      {secret.metadata?.accessCount || 0}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Access Count&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{secret.keyVersion}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Key Version&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Space&gt;
                    &lt;Tooltip title=&quot;Rotate Secret&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;ReloadOutlined /&gt;}
                        className=&quot;text-blue-400 hover:text-blue-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                    &lt;Tooltip title=&quot;View Details&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;EyeOutlined /&gt;}
                        className=&quot;text-green-400 hover:text-green-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/Space&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;CheckCircleOutlined className=&quot;text-green-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Security Dashboard
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Enterprise security monitoring and compliance management
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;security-dashboard-tabs&quot;
          items={[
            {
              key: 'overview',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Overview
                &lt;/span&gt;
              ),
              children: renderOverviewTab(),
            },
            {
              key: 'audit',
              label: (
                &lt;span&gt;
                  &lt;AuditOutlined className=&quot;mr-1&quot; /&gt;
                  Audit Logs
                  &lt;Badge count={auditLogs.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAuditLogsTab(),
            },
            {
              key: 'incidents',
              label: (
                &lt;span&gt;
                  &lt;AlertOutlined className=&quot;mr-1&quot; /&gt;
                  Incidents
                  &lt;Badge
                    count={incidents.filter((i) =&gt; i.status === 'open').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderIncidentsTab(),
            },
            {
              key: 'vulnerabilities',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Vulnerabilities
                  &lt;Badge count={vulnerabilityScans.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderVulnerabilitiesTab(),
            },
            {
              key: 'compliance',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Compliance
                  &lt;Badge count={complianceReports.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderComplianceTab(),
            },
            {
              key: 'secrets',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  Secrets
                  &lt;Badge count={secrets.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderSecretsTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Incident Details Modal */}
      &lt;Modal
        title=&quot;Security Incident Details&quot;
        open={isIncidentModalOpen}
        onCancel={() =&gt; setIsIncidentModalOpen(false)}
        footer={null}
        width={800}
      &gt;
        {selectedIncident &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Title&lt;/Text&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{selectedIncident.title}&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Severity&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getSeverityColor(selectedIncident.severity)}&gt;
                    {selectedIncident.severity}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Status&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getStatusColor(selectedIncident.status)}&gt;
                    {selectedIncident.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Category&lt;/Text&gt;
                &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.category}&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Description&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.description}&lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Timeline&lt;/Text&gt;
              &lt;Timeline
                items={selectedIncident.timeline.map((event) =&gt; ({
                  color: 'blue',
                  children: (
                    &lt;div className=&quot;space-y-1&quot;&gt;
                      &lt;div className=&quot;text-white text-sm&quot;&gt;{event.description}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                        {new Date(event.timestamp).toLocaleString()} • {event.actor}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                }))}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;

      {/* Start Vulnerability Scan Modal */}
      &lt;Modal
        title=&quot;Start Vulnerability Scan&quot;
        open={isScanModalOpen}
        onCancel={() =&gt; setIsScanModalOpen(false)}
        onOk={() =&gt; setIsScanModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Scan Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select scan type&quot;&gt;
              &lt;Option value=&quot;dependency&quot;&gt;Dependency Scan&lt;/Option&gt;
              &lt;Option value=&quot;container&quot;&gt;Container Scan&lt;/Option&gt;
              &lt;Option value=&quot;infrastructure&quot;&gt;Infrastructure Scan&lt;/Option&gt;
              &lt;Option value=&quot;code&quot;&gt;Code Scan&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Target&quot; required&gt;
            &lt;Input placeholder=&quot;Enter target (URL, path, etc.)&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Options&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Additional scan options (JSON)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create Secret Modal */}
      &lt;Modal
        title=&quot;Create Secret&quot;
        open={isSecretModalOpen}
        onCancel={() =&gt; setIsSecretModalOpen(false)}
        onOk={() =&gt; setIsSecretModalOpen(false)}
        width={600}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;Secret name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select secret type&quot;&gt;
              &lt;Option value=&quot;api_key&quot;&gt;API Key&lt;/Option&gt;
              &lt;Option value=&quot;password&quot;&gt;Password&lt;/Option&gt;
              &lt;Option value=&quot;certificate&quot;&gt;Certificate&lt;/Option&gt;
              &lt;Option value=&quot;token&quot;&gt;Token&lt;/Option&gt;
              &lt;Option value=&quot;database_credential&quot;&gt;Database Credential&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Value&quot; required&gt;
            &lt;Input.TextArea placeholder=&quot;Secret value&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Secret description&quot; rows={2}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/OrganizationSettings.tsx (Line 172:6 - Line 557:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/organizationsettings/OrganizationSettings.tsx (Line 176:6 - Line 561:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn326" onclick="toggleCodeBlock('cloneGroup326', 'expandBtn326', 'collapseBtn326')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn326" onclick="toggleCodeBlock('cloneGroup326', 'expandBtn326', 'collapseBtn326')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup326"><code class="language-javascript text-sm text-gray-800">={role}
          onChange={(newRole) =&gt; handleUpdateUserRole(record.userId, newRole)}
          disabled={!canManageUsers() || record.role === 'owner'}
          style={{ width: 120 }}
        &gt;
          &lt;Option value=&quot;owner&quot;&gt;Owner&lt;/Option&gt;
          &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
          &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
          &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
        &lt;/Select&gt;
      ),
    },
    {
      title: 'Joined',
      dataIndex: 'joinedAt',
      key: 'joinedAt',
      render: (date: Date) =&gt; new Date(date).toLocaleDateString(),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_: unknown, record: OrganizationMember) =&gt; (
        &lt;Space&gt;
          {canManageUsers() &amp;&amp; record.role !== 'owner' &amp;&amp; (
            &lt;Button
              type=&quot;link&quot;
              danger
              size=&quot;small&quot;
              onClick={() =&gt; handleRemoveUser(record.userId, record.userId)}
            &gt;
              Remove
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const tabs = [
    {
      key: 'general',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          General
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Form.Item
              name=&quot;name&quot;
              label=&quot;Organization Name&quot;
              rules={[{ required: true, message: 'Please enter organization name' }]}
            &gt;
              &lt;Input placeholder=&quot;Enter organization name&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
              &lt;TextArea rows={3} placeholder=&quot;Enter organization description&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;domain&quot; label=&quot;Domain&quot;&gt;
              &lt;Input placeholder=&quot;company.com&quot; addonBefore=&quot;@&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Workflow Settings&lt;/Divider&gt;

            &lt;Form.Item
              name=&quot;allowPublicWorkflows&quot;
              label=&quot;Allow Public Workflows&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;requireApprovalForExecution&quot;
              label=&quot;Require Approval for Execution&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxWorkflowsPerUser&quot; label=&quot;Max Workflows per User&quot;&gt;
              &lt;InputNumber min={1} max={1000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxExecutionsPerMonth&quot; label=&quot;Max Executions per Month&quot;&gt;
              &lt;InputNumber min={100} max={1000000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Space&gt;
                &lt;Button
                  type=&quot;primary&quot;
                  htmlType=&quot;submit&quot;
                  loading={loading || isLoading}
                  disabled={!canManageOrganization()}
                &gt;
                  Save Settings
                &lt;/Button&gt;
                &lt;Button type=&quot;link&quot; onClick={() =&gt; setShowAdvancedSettings(!showAdvancedSettings)}&gt;
                  {showAdvancedSettings ? 'Hide' : 'Show'} Advanced Settings
                &lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Alert
              message=&quot;Security Settings&quot;
              description=&quot;Configure security policies and access controls for your organization.&quot;
              type=&quot;info&quot;
              showIcon
              style={{ marginBottom: 24 }}
            /&gt;

            &lt;Form.Item
              name=&quot;enableAuditLogging&quot;
              label=&quot;Enable Audit Logging&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;enableSSOIntegration&quot;
              label=&quot;Enable SSO Integration&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;allowedDomains&quot; label=&quot;Allowed Domains&quot;&gt;
              &lt;Input
                placeholder=&quot;domain1.com, domain2.com&quot;
                addonAfter={
                  &lt;Tooltip title=&quot;Comma-separated list of allowed email domains&quot;&gt;
                    &lt;GlobalOutlined /&gt;
                  &lt;/Tooltip&gt;
                }
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;sessionTimeout&quot; label=&quot;Session Timeout (minutes)&quot;&gt;
              &lt;InputNumber
                min={5}
                max={1440}
                style={{ width: '100%' }}
                addonAfter={&lt;ClockCircleOutlined /&gt;}
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Password Policy&lt;/Divider&gt;

            &lt;Form.Item name=&quot;passwordMinLength&quot; label=&quot;Minimum Length&quot;&gt;
              &lt;InputNumber min={6} max={32} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;Form.Item
                name=&quot;passwordRequireUppercase&quot;
                label=&quot;Require Uppercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireLowercase&quot;
                label=&quot;Require Lowercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireNumbers&quot;
                label=&quot;Require Numbers&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireSymbols&quot;
                label=&quot;Require Symbols&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Space&gt;

            &lt;Form.Item
              name=&quot;passwordPreventReuse&quot;
              label=&quot;Prevent Password Reuse (last N passwords)&quot;
            &gt;
              &lt;InputNumber min={0} max={10} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;passwordMaxAge&quot; label=&quot;Password Expiry (days)&quot;&gt;
              &lt;InputNumber min={30} max={365} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Button
                type=&quot;primary&quot;
                htmlType=&quot;submit&quot;
                loading={loading || isLoading}
                disabled={!canManageOrganization()}
                icon={&lt;CheckOutlined /&gt;}
              &gt;
                Update Security Settings
              &lt;/Button&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'members',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Members ({organization.members.length})
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;div style={{ marginBottom: 16 }}&gt;
            &lt;Space&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt; setInviteModalVisible(true)}
                disabled={!canManageUsers()}
                icon={&lt;TeamOutlined /&gt;}
              &gt;
                Invite User
              &lt;/Button&gt;
              &lt;Text type=&quot;secondary&quot;&gt;Manage organization members and their roles&lt;/Text&gt;
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;Table
            dataSource={organization.members}
            columns={memberColumns}
            rowKey=&quot;userId&quot;
            pagination={{ pageSize: 10 }}
            loading={isLoading}
          /&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'audit',
      label: (
        &lt;span&gt;
          &lt;AuditOutlined /&gt;
          Audit &amp; Compliance
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Alert
            message=&quot;Audit &amp; Compliance&quot;
            description=&quot;Track all actions performed within your organization for security and compliance purposes.&quot;
            type=&quot;info&quot;
            showIcon
            style={{ marginBottom: 24 }}
          /&gt;

          &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;large&quot;&gt;
            &lt;Card size=&quot;small&quot; title=&quot;Data Retention&quot;&gt;
              &lt;Paragraph&gt;
                Audit logs are retained for 90 days. Execution logs are retained for 30 days.
                Contact support for longer retention periods.
              &lt;/Paragraph&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Compliance Standards&quot;&gt;
              &lt;Space wrap&gt;
                &lt;Tag color=&quot;green&quot;&gt;SOC 2 Type II&lt;/Tag&gt;
                &lt;Tag color=&quot;blue&quot;&gt;GDPR Compliant&lt;/Tag&gt;
                &lt;Tag color=&quot;purple&quot;&gt;ISO 27001&lt;/Tag&gt;
                &lt;Tag color=&quot;orange&quot;&gt;HIPAA Ready&lt;/Tag&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Data Export&quot;&gt;
              &lt;Space&gt;
                &lt;Button&gt;Export Audit Logs&lt;/Button&gt;
                &lt;Button&gt;Export User Data&lt;/Button&gt;
                &lt;Button&gt;Export Workflow Data&lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;
          &lt;/Space&gt;
        &lt;/Card&gt;
      ),
    },
  ];

  return (
    &lt;div&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;SettingOutlined /&gt; Organization Settings
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;
          Manage your organization's settings, security policies, and members
        &lt;/Text&gt;
      &lt;/div&gt;

      {error &amp;&amp; (
        &lt;Alert
          message=&quot;Error&quot;
          description={error}
          type=&quot;error&quot;
          closable
          style={{ marginBottom: 16 }}
        /&gt;
      )}

      &lt;Tabs items={tabs} /&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={inviteModalVisible}
        onCancel={() =&gt; setInviteModalVisible(false)}
        footer={null}
        width={500}
      &gt;
        &lt;Form form={inviteForm} layout=&quot;vertical&quot; onFinish={handleInviteUser}&gt;
          &lt;Form.Item
            name=&quot;email&quot;
            label=&quot;Email Address&quot;
            rules={[
              { required: true, message: 'Please enter email address' },
              { type: 'email', message: 'Please enter a valid email address' },
            ]}
          &gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;role&quot;
            label=&quot;Role&quot;
            rules={[{ required: true, message: 'Please select a role' }]}
            initialValue=&quot;member&quot;
          &gt;
            &lt;Select&gt;
              &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
              &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
              &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={isLoading}&gt;
                Send Invitation
              &lt;/Button&gt;
              &lt;Button onClick={() =&gt; setInviteModalVisible(false)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/PricingSection.tsx (Line 210:8 - Line 500:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/pricingsection/PricingSection.tsx (Line 212:8 - Line 502:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn332" onclick="toggleCodeBlock('cloneGroup332', 'expandBtn332', 'collapseBtn332')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn332" onclick="toggleCodeBlock('cloneGroup332', 'expandBtn332', 'collapseBtn332')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup332"><code class="language-javascript text-sm text-gray-800">={() =&gt; setBillingPeriod('monthly')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'monthly'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Monthly
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; setBillingPeriod('annually')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'annually'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Annually
              &lt;span className=&quot;ml-2 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full&quot;&gt;
                Save 20%
              &lt;/span&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Pricing Cards */}
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8 mb-20&quot;&gt;
          {plans.map((plan, index) =&gt; {
            const Icon = plan.icon;
            const price = plan.price[billingPeriod];

            return (
              &lt;div
                key={index}
                className={`relative rounded-2xl border-2 p-8 transition-all duration-300 ${
                  plan.popular
                    ? 'border-blue-500 shadow-xl shadow-blue-500/10 scale-105'
                    : 'border-gray-200 hover:border-gray-300 hover:shadow-lg'
                }`}
              &gt;
                {/* Popular Badge */}
                {plan.popular &amp;&amp; (
                  &lt;div className=&quot;absolute -top-4 left-1/2 transform -translate-x-1/2&quot;&gt;
                    &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium&quot;&gt;
                      Most Popular
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Plan Header */}
                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;div
                    className={`w-16 h-16 rounded-xl bg-gradient-to-r ${plan.gradient} flex items-center justify-center mx-auto mb-4`}
                  &gt;
                    &lt;Icon className=&quot;w-8 h-8 text-white&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{plan.description}&lt;/p&gt;

                  {/* Price */}
                  &lt;div className=&quot;mb-6&quot;&gt;
                    {typeof price === 'number' ? (
                      &lt;&gt;
                        &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;
                          ${price}
                          {price &gt; 0 &amp;&amp; &lt;span className=&quot;text-lg text-gray-600&quot;&gt;/user/month&lt;/span&gt;}
                        &lt;/div&gt;
                        {billingPeriod === 'annually' &amp;&amp; price &gt; 0 &amp;&amp; (
                          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;
                            Billed annually (${price * 12}/user/year)
                          &lt;/div&gt;
                        )}
                      &lt;/&gt;
                    ) : (
                      &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;{price}&lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Features */}
                &lt;div className=&quot;mb-8&quot;&gt;
                  &lt;ul className=&quot;space-y-3&quot;&gt;
                    {plan.features.map((feature, featureIndex) =&gt; (
                      &lt;li key={featureIndex} className=&quot;flex items-start gap-3&quot;&gt;
                        &lt;Check className=&quot;w-5 h-5 text-green-500 mt-0.5 flex-shrink-0&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;{feature}&lt;/span&gt;
                      &lt;/li&gt;
                    ))}
                  &lt;/ul&gt;

                  {/* Limitations */}
                  {plan.limitations.length &gt; 0 &amp;&amp; (
                    &lt;div className=&quot;mt-6 pt-6 border-t border-gray-100&quot;&gt;
                      &lt;p className=&quot;text-sm text-gray-500 mb-2&quot;&gt;Limitations:&lt;/p&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {plan.limitations.map((limitation, limitIndex) =&gt; (
                          &lt;li
                            key={limitIndex}
                            className=&quot;text-sm text-gray-500 flex items-start gap-2&quot;
                          &gt;
                            &lt;div className=&quot;w-1 h-1 rounded-full bg-gray-400 mt-2 flex-shrink-0&quot; /&gt;
                            {limitation}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;

                {/* CTA Button */}
                &lt;button
                  onClick={() =&gt; handlePlanClick(plan.name)}
                  className={`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center gap-2 ${
                    plan.popular
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:scale-105 hover:shadow-lg'
                      : 'bg-gray-100 text-gray-900 hover:bg-gray-200'
                  }`}
                &gt;
                  {plan.cta}
                  &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Feature Comparison Table */}
        &lt;div className=&quot;bg-gray-50 rounded-2xl p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;Feature Comparison&lt;/h3&gt;

          &lt;div className=&quot;overflow-x-auto&quot;&gt;
            &lt;table className=&quot;w-full&quot;&gt;
              &lt;thead&gt;
                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                  &lt;th className=&quot;text-left py-4 pr-6 font-semibold text-gray-900&quot;&gt;Features&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Community&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;
                    Professional
                  &lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Enterprise&lt;/th&gt;
                &lt;/tr&gt;
              &lt;/thead&gt;
              &lt;tbody&gt;
                {comparisonFeatures.map((category, categoryIndex) =&gt; (
                  &lt;React.Fragment key={categoryIndex}&gt;
                    &lt;tr&gt;
                      &lt;td
                        colSpan={4}
                        className=&quot;py-4 pr-6 font-semibold text-gray-800 bg-gray-100/50&quot;
                      &gt;
                        {category.category}
                      &lt;/td&gt;
                    &lt;/tr&gt;
                    {category.features.map((feature, featureIndex) =&gt; (
                      &lt;tr key={featureIndex} className=&quot;border-b border-gray-100&quot;&gt;
                        &lt;td className=&quot;py-3 pr-6 text-gray-700&quot;&gt;{feature.name}&lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.community === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.community === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.community}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.pro === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.pro === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.pro}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.enterprise === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.enterprise === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.enterprise}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                      &lt;/tr&gt;
                    ))}
                  &lt;/React.Fragment&gt;
                ))}
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Competitive Pricing Comparison */}
        &lt;div className=&quot;mt-16 bg-white rounded-2xl border border-gray-200 p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;
            How We Compare on{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Pricing
            &lt;/span&gt;
          &lt;/h3&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6&quot;&gt;
            {/* Reporunner */}
            &lt;div className=&quot;bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Reporunner&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-blue-600 mb-2&quot;&gt;$49/user&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Self-hosted + Pro features&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Unlimited executions&lt;/div&gt;
                  &lt;div&gt;✅ All enterprise features&lt;/div&gt;
                  &lt;div&gt;✅ No hidden costs&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Zapier */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Zapier&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$19.99+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud only&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited tasks/month&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Expensive at scale&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Make.com */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Make.com&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$9+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, operations-based&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited operations&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Costs add up quickly&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* n8n */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;n8n&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$20+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Self-hosting option&lt;/div&gt;
                  &lt;div&gt;❌ Limited AI features&lt;/div&gt;
                  &lt;div&gt;❌ Basic collaboration&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* SIM */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;SIM&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;Custom&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Enterprise pricing&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ AI features&lt;/div&gt;
                  &lt;div&gt;❌ Limited self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Higher enterprise cost&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;div className=&quot;mt-6 text-center&quot;&gt;
            &lt;p className=&quot;text-sm text-gray-600&quot;&gt;
              💡 &lt;strong&gt;Reporunner advantage:&lt;/strong&gt; Enterprise features at mid-market pricing
              with complete self-hosting control
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Enterprise CTA */}
        &lt;div className=&quot;mt-16 text-center&quot;&gt;
          &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Need a custom solution for your enterprise?&lt;/h3&gt;
            &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
              We offer custom deployment options, dedicated support, and tailored features for large
              organizations with specific requirements.
            &lt;/p&gt;
            &lt;button
              onClick={() =&gt; navigate('/contact')}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/IntegrationEcosystem.tsx (Line 156:4 - Line 225:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/integrationecosystem/IntegrationEcosystem.tsx (Line 157:4 - Line 226:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn334" onclick="toggleCodeBlock('cloneGroup334', 'expandBtn334', 'collapseBtn334')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn334" onclick="toggleCodeBlock('cloneGroup334', 'expandBtn334', 'collapseBtn334')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup334"><code class="language-javascript text-sm text-gray-800">={index}
                className=&quot;bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-lg transition-all hover:-translate-y-1&quot;
              &gt;
                &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 w-12 h-12 rounded-lg flex items-center justify-center mb-4&quot;&gt;
                  &lt;Icon className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;{feature.title}&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{feature.description}&lt;/p&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Integration Browser */}
        &lt;div className=&quot;bg-white rounded-2xl border border-gray-200 shadow-lg overflow-hidden&quot;&gt;
          {/* Browser Header */}
          &lt;div className=&quot;bg-gray-50 border-b border-gray-200 p-6&quot;&gt;
            &lt;div className=&quot;flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4&quot;&gt;
              &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Integration Library&lt;/h3&gt;

              {/* Search Bar */}
              &lt;div className=&quot;relative&quot;&gt;
                &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400&quot; /&gt;
                &lt;input
                  type=&quot;text&quot;
                  placeholder=&quot;Search integrations...&quot;
                  className=&quot;pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Category Tabs */}
            &lt;div className=&quot;flex flex-wrap gap-2 mt-6&quot;&gt;
              {categories.map((category) =&gt; (
                &lt;button
                  key={category.id}
                  onClick={() =&gt; setActiveCategory(category.id)}
                  className={`px-4 py-2 rounded-lg font-medium transition-all ${
                    activeCategory === category.id
                      ? 'bg-blue-600 text-white shadow-lg'
                      : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'
                  }`}
                &gt;
                  {category.name}
                  &lt;span className=&quot;ml-2 text-sm opacity-75&quot;&gt;({category.count})&lt;/span&gt;
                &lt;/button&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Integration Grid */}
          &lt;div className=&quot;p-6&quot;&gt;
            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4&quot;&gt;
              {filteredIntegrations.map((integration, index) =&gt; {
                const Icon = integration.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;group relative bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer&quot;
                  &gt;
                    {/* Popular Badge */}
                    {integration.popular &amp;&amp; (
                      &lt;div className=&quot;absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                        Popular
                      &lt;/div&gt;
                    )}

                    {/* Icon */}
                    &lt;div
                      className={`w-12 h-12 rounded-lg bg-gradient-to-r ${integration.gradient} flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/Header.tsx (Line 180:10 - Line 352:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/header/Header.tsx (Line 187:10 - Line 359:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn337" onclick="toggleCodeBlock('cloneGroup337', 'expandBtn337', 'collapseBtn337')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn337" onclick="toggleCodeBlock('cloneGroup337', 'expandBtn337', 'collapseBtn337')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup337"><code class="language-javascript text-sm text-gray-800">={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${
        isScrolled
          ? 'bg-white/95 backdrop-blur-md shadow-lg border-b border-gray-200/50'
          : 'bg-white/80 backdrop-blur-sm'
      }`}
    &gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between h-16&quot;&gt;
          {/* Logo */}
          &lt;Link to=&quot;/&quot; className=&quot;flex items-center gap-3 group&quot;&gt;
            &lt;div className=&quot;w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center&quot;&gt;
              &lt;Zap className=&quot;w-5 h-5 text-white&quot; /&gt;
            &lt;/div&gt;
            &lt;span className=&quot;text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Reporunner
            &lt;/span&gt;
          &lt;/Link&gt;

          {/* Desktop Navigation */}
          &lt;nav className=&quot;hidden lg:flex items-center space-x-8&quot;&gt;
            {menuItems.map((menu, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;relative group&quot;
                onMouseEnter={() =&gt; setActiveDropdown(menu.label)}
                onMouseLeave={() =&gt; setActiveDropdown(null)}
              &gt;
                &lt;button className=&quot;flex items-center gap-1 text-gray-700 hover:text-blue-600 font-medium transition-colors py-2&quot;&gt;
                  {menu.label}
                  &lt;ChevronDown className=&quot;w-4 h-4&quot; /&gt;
                &lt;/button&gt;

                {/* Dropdown */}
                {activeDropdown === menu.label &amp;&amp; (
                  &lt;div className=&quot;absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-200 py-4 z-50&quot;&gt;
                    &lt;div className=&quot;px-4 pb-2 mb-2 border-b border-gray-100&quot;&gt;
                      &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{menu.label}&lt;/h3&gt;
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className=&quot;flex items-start gap-3 px-4 py-3 hover:bg-gray-50 transition-colors group&quot;
                      &gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-gray-900 group-hover:text-blue-600&quot;&gt;
                              {item.name}
                            &lt;/span&gt;
                            {item.external &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3 text-gray-400&quot; /&gt;}
                          &lt;/div&gt;
                          &lt;p className=&quot;text-sm text-gray-500 mt-1&quot;&gt;{item.description}&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;ArrowRight className=&quot;w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity mt-1&quot; /&gt;
                      &lt;/Link&gt;
                    ))}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            ))}
          &lt;/nav&gt;

          {/* Auth Buttons */}
          &lt;div className=&quot;hidden lg:flex items-center gap-3&quot;&gt;
            {isAuthenticated ? (
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/dashboard')}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;User className=&quot;w-4 h-4&quot; /&gt;
                  Dashboard
                &lt;/button&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/settings')}
                  className=&quot;p-2 text-gray-500 hover:text-gray-700 transition-colors&quot;
                  title=&quot;Settings&quot;
                &gt;
                  &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            ) : (
              &lt;&gt;
                &lt;button
                  onClick={handleAuth}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;LogIn className=&quot;w-4 h-4&quot; /&gt;
                  Sign In
                &lt;/button&gt;
                &lt;button
                  onClick={handleGetStarted}
                  className=&quot;flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all hover:scale-105&quot;
                &gt;
                  &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                  Get Started
                &lt;/button&gt;
              &lt;/&gt;
            )}
          &lt;/div&gt;

          {/* Mobile Menu Button */}
          &lt;button
            onClick={() =&gt; setIsMobileMenuOpen(!isMobileMenuOpen)}
            className=&quot;lg:hidden p-2 text-gray-700 hover:text-blue-600 transition-colors&quot;
          &gt;
            {isMobileMenuOpen ? &lt;X className=&quot;w-6 h-6&quot; /&gt; : &lt;Menu className=&quot;w-6 h-6&quot; /&gt;}
          &lt;/button&gt;
        &lt;/div&gt;

        {/* Mobile Menu */}
        {isMobileMenuOpen &amp;&amp; (
          &lt;div className=&quot;lg:hidden border-t border-gray-200 bg-white/95 backdrop-blur-md&quot;&gt;
            &lt;div className=&quot;py-4&quot;&gt;
              {/* Auth Section */}
              &lt;div className=&quot;px-4 py-4 border-b border-gray-200&quot;&gt;
                {isAuthenticated ? (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/dashboard')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;User className=&quot;w-5 h-5&quot; /&gt;
                      Dashboard
                    &lt;/button&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/settings')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                      Settings
                    &lt;/button&gt;
                  &lt;/div&gt;
                ) : (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={handleAuth}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;LogIn className=&quot;w-5 h-5&quot; /&gt;
                      Sign In
                    &lt;/button&gt;
                    &lt;button
                      onClick={handleGetStarted}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all&quot;
                    &gt;
                      &lt;Play className=&quot;w-5 h-5&quot; /&gt;
                      Get Started
                    &lt;/button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;

              {/* Navigation Menu */}
              &lt;div className=&quot;space-y-1 px-4 pt-4&quot;&gt;
                {menuItems.map((menu, index) =&gt; (
                  &lt;div key={index} className=&quot;space-y-1&quot;&gt;
                    &lt;div className=&quot;px-4 py-2 font-semibold text-gray-900 text-sm uppercase tracking-wide&quot;&gt;
                      {menu.label}
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className={`block px-4 py-3 rounded-lg transition-colors ${
                          isActivePage(item.href)
                            ? 'bg-blue-50 text-blue-600 font-medium'
                            : 'text-gray-700 hover:bg-gray-50'
                        }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/FeatureShowcase.tsx (Line 195:4 - Line 365:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/featureshowcase/FeatureShowcase.tsx (Line 196:4 - Line 366:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn340" onclick="toggleCodeBlock('cloneGroup340', 'expandBtn340', 'collapseBtn340')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn340" onclick="toggleCodeBlock('cloneGroup340', 'expandBtn340', 'collapseBtn340')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup340"><code class="language-javascript text-sm text-gray-800">={feature.id}
                    className={`cursor-pointer transition-all duration-300 rounded-xl p-6 border-2 ${
                      isActive
                        ? 'border-blue-500 bg-white shadow-lg shadow-blue-500/10'
                        : 'border-gray-200 bg-white/50 hover:border-gray-300 hover:bg-white'
                    }`}
                    onClick={() =&gt; setActiveFeature(index)}
                  &gt;
                    &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                      {/* Icon */}
                      &lt;div
                        className={`w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 ${
                          isActive
                            ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white'
                            : 'bg-gray-100 text-gray-600'
                        }`}
                      &gt;
                        &lt;Icon className=&quot;w-6 h-6&quot; /&gt;
                      &lt;/div&gt;

                      {/* Content */}
                      &lt;div className=&quot;flex-1&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                          &lt;h3
                            className={`text-xl font-bold transition-colors ${
                              isActive ? 'text-blue-600' : 'text-gray-900'
                            }`}
                          &gt;
                            {feature.title}
                          &lt;/h3&gt;
                          {isActive &amp;&amp; (
                            &lt;div className=&quot;flex items-center gap-1 text-sm text-blue-600 font-medium&quot;&gt;
                              &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                              Live Demo
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;

                        &lt;p className=&quot;text-sm text-gray-500 mb-3&quot;&gt;{feature.subtitle}&lt;/p&gt;
                        &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;

                        {/* Highlights */}
                        &lt;div className=&quot;grid grid-cols-2 gap-2&quot;&gt;
                          {feature.highlights.map((highlight, i) =&gt; (
                            &lt;div key={i} className=&quot;flex items-center gap-2 text-sm text-gray-600&quot;&gt;
                              &lt;div
                                className={`w-1.5 h-1.5 rounded-full ${
                                  isActive ? 'bg-blue-500' : 'bg-gray-400'
                                }`}
                              /&gt;
                              {highlight}
                            &lt;/div&gt;
                          ))}
                        &lt;/div&gt;

                        {/* Try It Button */}
                        {isActive &amp;&amp; (
                          &lt;div className=&quot;mt-4 pt-4 border-t border-gray-100&quot;&gt;
                            &lt;button className=&quot;group flex items-center gap-2 text-blue-600 font-medium text-sm hover:text-blue-700 transition-colors&quot;&gt;
                              Try this feature
                              &lt;ArrowRight className=&quot;w-4 h-4 transition-transform group-hover:translate-x-1&quot; /&gt;
                            &lt;/button&gt;
                          &lt;/div&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;

            {/* Interactive Demo Area */}
            &lt;div className=&quot;bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden&quot;&gt;
              {/* Demo Header */}
              &lt;div className=&quot;bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                  &lt;div className=&quot;flex gap-2&quot;&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-red-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-yellow-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-green-400&quot; /&gt;
                  &lt;/div&gt;
                  &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;
                    {currentFeature.title} Demo
                  &lt;/span&gt;
                  &lt;div className=&quot;ml-auto flex items-center gap-2 text-xs text-gray-500&quot;&gt;
                    &lt;div className=&quot;w-2 h-2 rounded-full bg-green-500 animate-pulse&quot; /&gt;
                    Live Demo
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Demo Content */}
              &lt;div className=&quot;relative h-96 bg-gradient-to-br from-slate-50 to-blue-50 p-6&quot;&gt;
                {/* Render demo elements based on feature type */}
                {currentFeature.id === 0 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* Workflow nodes */}
                    {currentFeature.demoElements?.map((element, i) =&gt; {
                      if (element.type === 'node') {
                        return (
                          &lt;div
                            key={i}
                            className={`absolute w-24 h-16 ${element.color} rounded-lg flex items-center justify-center text-white text-xs font-medium shadow-lg transform transition-all duration-1000 hover:scale-110`}
                            style={{
                              left: `${element.x}px`,
                              top: `${element.y}px`,
                              animationDelay: `${i * 200}ms`,
                            }}
                          &gt;
                            {element.label}
                          &lt;/div&gt;
                        );
                      }
                      return null;
                    })}

                    {/* Connections */}
                    &lt;svg className=&quot;absolute inset-0 w-full h-full pointer-events-none&quot;&gt;
                      &lt;defs&gt;
                        &lt;marker
                          id=&quot;arrowhead&quot;
                          markerWidth=&quot;10&quot;
                          markerHeight=&quot;7&quot;
                          refX=&quot;9&quot;
                          refY=&quot;3.5&quot;
                          orient=&quot;auto&quot;
                        &gt;
                          &lt;polygon points=&quot;0 0, 10 3.5, 0 7&quot; fill=&quot;#6366f1&quot; /&gt;
                        &lt;/marker&gt;
                      &lt;/defs&gt;
                      &lt;path
                        d=&quot;M 150 167 Q 200 167 250 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                      /&gt;
                      &lt;path
                        d=&quot;M 350 167 Q 400 167 450 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                        style={{ animationDelay: '500ms' }}
                      /&gt;
                    &lt;/svg&gt;
                  &lt;/div&gt;
                )}

                {/* AI Feature Demo */}
                {currentFeature.id === 1 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    &lt;div className=&quot;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2&quot;&gt;
                      &lt;div className=&quot;w-32 h-32 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center shadow-xl animate-pulse&quot;&gt;
                        &lt;Brain className=&quot;w-16 h-16 text-white&quot; /&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    {/* AI Insights */}
                    &lt;div className=&quot;absolute top-12 right-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-2 text-sm&quot;&gt;
                        &lt;Zap className=&quot;w-4 h-4 text-yellow-500&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;Performance optimized&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div
                      className=&quot;absolute bottom-12 left-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;
                      style={{ animationDelay: '1s' }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/ComparisonTable.tsx (Line 310:10 - Line 416:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/comparisontable/ComparisonTable.tsx (Line 310:10 - Line 416:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn343" onclick="toggleCodeBlock('cloneGroup343', 'expandBtn343', 'collapseBtn343')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn343" onclick="toggleCodeBlock('cloneGroup343', 'expandBtn343', 'collapseBtn343')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup343"><code class="language-javascript text-sm text-gray-800">={`w-5 h-5 mx-auto ${isReporunner ? 'text-blue-600' : 'text-green-500'}`} /&gt;
      ) : (
        &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
      );
    }

    if (typeof value === 'string') {
      if (value === 'Enterprise' || value === 'Paid' || value === 'Basic') {
        return (
          &lt;span
            className={`text-xs px-2 py-1 rounded-full ${
              value === 'Enterprise'
                ? 'bg-purple-100 text-purple-700'
                : value === 'Paid'
                  ? 'bg-yellow-100 text-yellow-700'
                  : 'bg-gray-100 text-gray-700'
            }`}
          &gt;
            {value}
          &lt;/span&gt;
        );
      }
      return (
        &lt;span className={`text-sm font-medium ${isReporunner ? 'text-blue-600' : 'text-gray-700'}`}&gt;
          {value}
        &lt;/span&gt;
      );
    }

    return null;
  };

  return (
    &lt;section className=&quot;py-20 bg-white&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            How Reporunner{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Stacks Up
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            See how Reporunner compares to leading automation platforms including Zapier, Make.com,
            n8n, and SIM. We combine enterprise-grade features with self-hosting flexibility and
            competitive pricing.
          &lt;/p&gt;
        &lt;/div&gt;

        {/* Platform Headers */}
        &lt;div className=&quot;grid grid-cols-6 gap-2 mb-8&quot;&gt;
          &lt;div className=&quot;p-3&quot;&gt;
            &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Features&lt;/h3&gt;
          &lt;/div&gt;
          {platforms.map((platform, index) =&gt; {
            const Icon = platform.icon;
            return (
              &lt;div
                key={index}
                className={`p-3 rounded-xl border-2 text-center ${
                  index === 0
                    ? 'border-blue-500 bg-gradient-to-br from-blue-50 to-purple-50'
                    : 'border-gray-200 bg-gray-50'
                }`}
              &gt;
                &lt;div
                  className={`w-10 h-10 rounded-lg bg-gradient-to-r ${platform.gradient} flex items-center justify-center mx-auto mb-2`}
                &gt;
                  &lt;Icon className=&quot;w-5 h-5 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-bold text-gray-900 mb-1 text-sm&quot;&gt;{platform.name}&lt;/h3&gt;
                &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;{platform.tagline}&lt;/p&gt;
                &lt;div
                  className={`inline-block px-1 py-0.5 rounded-full text-xs font-medium ${
                    index === 0 ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700'
                  }`}
                &gt;
                  {platform.highlight}
                &lt;/div&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Comparison Table */}
        &lt;div className=&quot;bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-lg&quot;&gt;
          {features.map((category, categoryIndex) =&gt; (
            &lt;div key={categoryIndex}&gt;
              {/* Category Header */}
              &lt;div className=&quot;bg-gray-50 border-b border-gray-200&quot;&gt;
                &lt;div className=&quot;grid grid-cols-6 gap-2&quot;&gt;
                  &lt;div className=&quot;p-3&quot;&gt;
                    &lt;h4 className=&quot;font-bold text-gray-900 text-sm&quot;&gt;{category.category}&lt;/h4&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Feature Rows */}
              {category.items.map((item, itemIndex) =&gt; (
                &lt;div
                  key={itemIndex}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/ExecutionHistory.tsx (Line 149:6 - Line 384:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/executionhistory/ExecutionHistory.tsx (Line 152:6 - Line 387:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn345" onclick="toggleCodeBlock('cloneGroup345', 'expandBtn345', 'collapseBtn345')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn345" onclick="toggleCodeBlock('cloneGroup345', 'expandBtn345', 'collapseBtn345')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup345"><code class="language-javascript text-sm text-gray-800">={getStatusColor(status)}&gt;{status.toUpperCase()}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Progress',
      key: 'progress',
      width: 120,
      render: (record: WorkflowExecution) =&gt; (
        &lt;div className=&quot;text-xs&quot;&gt;
          {record.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length ||
            0}{' '}
          / {record.nodeExecutions?.length || 0} nodes
        &lt;/div&gt;
      ),
    },
    {
      title: 'Started',
      dataIndex: 'startedAt',
      key: 'startedAt',
      width: 150,
      render: (date: string) =&gt; new Date(date).toLocaleString(),
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (record: WorkflowExecution) =&gt; formatDuration(record.duration),
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 150,
      render: (record: WorkflowExecution) =&gt; (
        &lt;Space&gt;
          &lt;Button size=&quot;small&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; showExecutionDetails(record)}&gt;
            Details
          &lt;/Button&gt;
          {record.status === 'running' &amp;&amp; (
            &lt;Button
              size=&quot;small&quot;
              danger
              icon={&lt;StopOutlined /&gt;}
              onClick={() =&gt; handleStopExecution(record.id)}
            &gt;
              Stop
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const content = (
    &lt;div className=&quot;execution-history&quot;&gt;
      &lt;div className=&quot;mb-4&quot;&gt;
        &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
          &lt;Col span={6}&gt;
            &lt;Search
              placeholder=&quot;Search executions...&quot;
              onSearch={(value) =&gt; setFilter({ ...filter, workflowId: value || workflowId })}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={6}&gt;
            &lt;Select
              placeholder=&quot;Filter by status&quot;
              allowClear
              style={{ width: '100%' }}
              onChange={(value) =&gt; setFilter({ ...filter, status: value })}
            &gt;
              &lt;Option value=&quot;pending&quot;&gt;Pending&lt;/Option&gt;
              &lt;Option value=&quot;running&quot;&gt;Running&lt;/Option&gt;
              &lt;Option value=&quot;completed&quot;&gt;Completed&lt;/Option&gt;
              &lt;Option value=&quot;failed&quot;&gt;Failed&lt;/Option&gt;
              &lt;Option value=&quot;cancelled&quot;&gt;Cancelled&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Col&gt;
          &lt;Col span={8}&gt;
            &lt;RangePicker
              placeholder={['Start date', 'End date']}
              onChange={(dates) =&gt; {
                if (dates) {
                  setFilter({
                    ...filter,
                    startDate: dates[0]?.toISOString(),
                    endDate: dates[1]?.toISOString(),
                  });
                } else {
                  setFilter({
                    ...filter,
                    startDate: undefined,
                    endDate: undefined,
                  });
                }
              }}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={4}&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadExecutions} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Col&gt;
        &lt;/Row&gt;
      &lt;/div&gt;

      &lt;Table
        columns={columns}
        dataSource={executions}
        rowKey=&quot;id&quot;
        loading={loading}
        pagination={{
          current: Math.floor((filter.offset || 0) / (filter.limit || 20)) + 1,
          pageSize: filter.limit || 20,
          total,
          onChange: (page, pageSize) =&gt; {
            setFilter({
              ...filter,
              offset: (page - 1) * (pageSize || 20),
              limit: pageSize,
            });
          },
        }}
      /&gt;

      &lt;Modal
        title=&quot;Execution Details&quot;
        open={detailsVisible}
        onCancel={() =&gt; setDetailsVisible(false)}
        width={800}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={() =&gt; setDetailsVisible(false)}&gt;
            Close
          &lt;/Button&gt;,
        ]}
      &gt;
        {selectedExecution &amp;&amp; (
          &lt;div&gt;
            &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Status&quot;
                  value={selectedExecution.status.toUpperCase()}
                  valueStyle={{
                    color: getStatusColor(selectedExecution.status),
                  }}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic title=&quot;Duration&quot; value={formatDuration(selectedExecution.duration)} /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Nodes Completed&quot;
                  value={`${selectedExecution.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length || 0} / ${selectedExecution.nodeExecutions?.length || 0}`}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Success Rate&quot;
                  value={(() =&gt; {
                    const results = getExecutionResults(selectedExecution);
                    const successCount = results.filter((r) =&gt; r.status === 'success').length;
                    const total = results.length;
                    return total &gt; 0 ? Math.round((successCount / total) * 100) : 0;
                  })()}
                  suffix=&quot;%&quot;
                /&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;

            &lt;Card title=&quot;Node Execution Results&quot; className=&quot;mb-4&quot;&gt;
              &lt;Timeline&gt;
                {getExecutionResults(selectedExecution).map((result) =&gt; (
                  &lt;Timeline.Item
                    key={result.nodeId}
                    color={
                      result.status === 'success'
                        ? 'green'
                        : result.status === 'error'
                          ? 'red'
                          : 'gray'
                    }
                  &gt;
                    &lt;div&gt;
                      &lt;strong&gt;{result.nodeName}&lt;/strong&gt;
                      &lt;Tag color={result.status === 'success' ? 'green' : 'red'} className=&quot;ml-2&quot;&gt;
                        {result.status}
                      &lt;/Tag&gt;
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                        {new Date(result.executedAt).toLocaleString()} •{' '}
                        {formatDuration(result.duration)}
                      &lt;/div&gt;
                      {result.error &amp;&amp; (
                        &lt;div className=&quot;text-red-500 text-sm mt-1&quot;&gt;{result.error}&lt;/div&gt;
                      )}
                      {result.output &amp;&amp; (
                        &lt;details className=&quot;mt-1&quot;&gt;
                          &lt;summary className=&quot;text-blue-500 cursor-pointer text-sm&quot;&gt;
                            View Output
                          &lt;/summary&gt;
                          &lt;pre className=&quot;bg-gray-100 p-2 rounded mt-1 text-xs overflow-auto max-h-32&quot;&gt;
                            {JSON.stringify(result.output, null, 2)}
                          &lt;/pre&gt;
                        &lt;/details&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/Timeline.Item&gt;
                ))}
              &lt;/Timeline&gt;
            &lt;/Card&gt;

            {selectedExecution.error &amp;&amp; (
              &lt;Card title=&quot;Execution Error&quot; className=&quot;border-red-200&quot;&gt;
                &lt;div className=&quot;text-red-600&quot;&gt;
                  &lt;div className=&quot;font-semibold&quot;&gt;{selectedExecution.error}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            )}
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/div&gt;
  );

  // If onClose is provided, wrap in a modal
  if (onClose) {
    return (
      &lt;Modal
        title=&quot;Execution History&quot;
        open={true}
        onCancel={onClose}
        width={1200}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;,
        ]}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/EnterpriseDashboard.tsx (Line 349:7 - Line 918:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/enterprisedashboard/EnterpriseDashboard.tsx (Line 352:7 - Line 921:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn347" onclick="toggleCodeBlock('cloneGroup347', 'expandBtn347', 'collapseBtn347')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn347" onclick="toggleCodeBlock('cloneGroup347', 'expandBtn347', 'collapseBtn347')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup347"><code class="language-javascript text-sm text-gray-800">={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Total Organizations&quot;
                  value={metrics?.organizations.total}
                  prefix={&lt;TeamOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.organizations.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Users&quot;
                  value={metrics?.users.active}
                  prefix={&lt;UserOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.users.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Workflow Executions&quot;
                  value={metrics?.workflows.executions}
                  prefix={&lt;ThunderboltOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px' }}&gt;
                      {metrics?.workflows.successRate}% success
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;System Uptime&quot;
                  value={metrics?.performance.systemUptime}
                  precision={2}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{ color: '#52c41a' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {/* Charts */}
          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;Execution Trends&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Line
                  data={executionTrendData}
                  xField=&quot;date&quot;
                  yField=&quot;executions&quot;
                  height={300}
                  smooth
                  point={{ size: 5, shape: 'circle' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;User Growth&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Column
                  data={userGrowthData}
                  xField=&quot;month&quot;
                  yField=&quot;total&quot;
                  height={300}
                  columnStyle={{ fill: '#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'performance',
      label: (
        &lt;span&gt;
          &lt;RiseOutlined /&gt;
          Performance
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Avg Execution Time&quot;
                  value={metrics?.performance.avgExecutionTime}
                  precision={1}
                  suffix=&quot;s&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Error Rate&quot;
                  value={metrics?.performance.errorRate ?? 0}
                  precision={1}
                  suffix=&quot;%&quot;
                  prefix={&lt;BugOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.performance.errorRate ?? 0) &gt; 2 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Throughput&quot;
                  value={metrics?.performance.throughput}
                  suffix=&quot;/hour&quot;
                  prefix={&lt;ApiOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Monthly Spend&quot;
                  value={metrics?.costs.monthlySpend}
                  prefix=&quot;$&quot;
                  suffix={
                    &lt;span
                      style={{
                        fontSize: '14px',
                        color: (metrics?.costs.growth ?? 0) &lt; 0 ? '#52c41a' : '#cf1322',
                      }}
                    &gt;
                      {(metrics?.costs.growth ?? 0) &lt; 0 ? &lt;FallOutlined /&gt; : &lt;RiseOutlined /&gt;}{' '}
                      {Math.abs(metrics?.costs.growth ?? 0)}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={16}&gt;
              &lt;Card
                title=&quot;System Performance (24h)&quot;
                extra={
                  &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                    Refresh
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Area
                  data={performanceData}
                  xField=&quot;time&quot;
                  yField=&quot;cpu&quot;
                  height={300}
                  // @ts-expect-error Area config shape may differ by version
                  areaStyle={{ fill: 'l(270) 0:#ffffff 0.5:#7ec2f3 1:#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Card title=&quot;Workflow Categories&quot;&gt;
                &lt;Pie
                  data={workflowCategoriesData}
                  angleField=&quot;value&quot;
                  colorField=&quot;type&quot;
                  height={300}
                  radius={0.8}
                  label={{
                    type: 'spider',
                    content: '{name}\n{percentage}',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
          {metrics?.security &amp;&amp; metrics.security.alerts &gt; 0 &amp;&amp; (
            &lt;Badge count={metrics.security.alerts} style={{ marginLeft: 8 }} /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Threats&quot;
                  value={metrics?.security.threats ?? 0}
                  prefix={&lt;WarningOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.threats ?? 0) &gt; 0 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Security Alerts&quot;
                  value={metrics?.security.alerts ?? 0}
                  prefix={&lt;SecurityScanOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.alerts ?? 0) &gt; 5 ? '#fa8c16' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Compliance Score&quot;
                  value={metrics?.security.complianceScore ?? 0}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security?.complianceScore ?? 0) &gt;= 90 ? '#52c41a' : '#fa8c16',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Last Incident&quot;
                  value={
                    metrics?.security.lastIncident
                      ? Math.floor(
                          (Date.now() - metrics.security.lastIncident.getTime()) /
                            (24 * 60 * 60 * 1000)
                        )
                      : 0
                  }
                  suffix=&quot; days ago&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {(metrics?.security.alerts ?? 0) &gt; 0 &amp;&amp; (
            &lt;Alert
              message=&quot;Security Alerts Require Attention&quot;
              description={`There are ${metrics?.security.alerts ?? 0} active security alerts that need investigation.`}
              type=&quot;warning&quot;
              showIcon
              style={{ marginBottom: 24 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;primary&quot;&gt;
                  View All Alerts
                &lt;/Button&gt;
              }
            /&gt;
          )}

          &lt;Card title=&quot;Security Overview&quot;&gt;
            &lt;Row gutter={16}&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Threat Detection&lt;/Text&gt;
                  &lt;Progress percent={85} status=&quot;active&quot; strokeColor=&quot;#52c41a&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Access Control&lt;/Text&gt;
                  &lt;Progress percent={92} status=&quot;active&quot; strokeColor=&quot;#1890ff&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Data Encryption&lt;/Text&gt;
                  &lt;Progress percent={98} status=&quot;active&quot; strokeColor=&quot;#722ed1&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Audit Coverage&lt;/Text&gt;
                  &lt;Progress percent={94} status=&quot;active&quot; strokeColor=&quot;#fa8c16&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Vulnerability Management&lt;/Text&gt;
                  &lt;Progress percent={88} status=&quot;active&quot; strokeColor=&quot;#13c2c2&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Incident Response&lt;/Text&gt;
                  &lt;Progress percent={90} status=&quot;active&quot; strokeColor=&quot;#eb2f96&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'organizations',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Organizations
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Top Organizations&quot;
            extra={
              &lt;Space&gt;
                &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                  Export
                &lt;/Button&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Table
              dataSource={topOrganizationsData}
              pagination={false}
              columns={[
                {
                  title: 'Organization',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; style={{ backgroundColor: '#1890ff', marginRight: 8 }}&gt;
                        {name.charAt(0)}
                      &lt;/Avatar&gt;
                      &lt;Text strong&gt;{name}&lt;/Text&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Users',
                  dataIndex: 'users',
                  key: 'users',
                  render: (users: number) =&gt; &lt;Statistic value={users} /&gt;,
                },
                {
                  title: 'Workflows',
                  dataIndex: 'workflows',
                  key: 'workflows',
                  render: (workflows: number) =&gt; &lt;Statistic value={workflows} /&gt;,
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Growth',
                  dataIndex: 'growth',
                  key: 'growth',
                  render: (growth: number) =&gt; (
                    &lt;span style={{ color: growth &gt;= 0 ? '#52c41a' : '#cf1322' }}&gt;
                      {growth &gt;= 0 ? &lt;RiseOutlined /&gt; : &lt;FallOutlined /&gt;} {Math.abs(growth)}%
                    &lt;/span&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;

          &lt;Card title=&quot;Top Users&quot; style={{ marginTop: 16 }}&gt;
            &lt;Table
              dataSource={topUsersData}
              pagination={false}
              columns={[
                {
                  title: 'User',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string, record: any) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; icon={&lt;UserOutlined /&gt;} style={{ marginRight: 8 }} /&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;{name}&lt;/Text&gt;
                        &lt;br /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;{record.organization}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Success Rate',
                  dataIndex: 'successRate',
                  key: 'successRate',
                  render: (rate: number) =&gt; (
                    &lt;Progress
                      percent={rate}
                      size=&quot;small&quot;
                      status={rate &gt;= 95 ? 'success' : rate &gt;= 90 ? 'normal' : 'exception'}
                    /&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'activity',
      label: (
        &lt;span&gt;
          &lt;ClockCircleOutlined /&gt;
          Activity
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Recent Activity&quot;
            extra={
              &lt;Space&gt;
                &lt;Select defaultValue=&quot;all&quot; style={{ width: 120 }}&gt;
                  &lt;Option value=&quot;all&quot;&gt;All Events&lt;/Option&gt;
                  &lt;Option value=&quot;security&quot;&gt;Security&lt;/Option&gt;
                  &lt;Option value=&quot;workflow&quot;&gt;Workflows&lt;/Option&gt;
                  &lt;Option value=&quot;user&quot;&gt;Users&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Timeline&gt;
              {activities.map((activity) =&gt; (
                &lt;Timeline.Item
                  key={activity.id}
                  dot={
                    &lt;Avatar
                      size=&quot;small&quot;
                      style={{
                        backgroundColor: getSeverityColor(activity.severity),
                      }}
                      icon={getActivityIcon(activity.type)}
                    /&gt;
                  }
                &gt;
                  &lt;div&gt;
                    &lt;div
                      style={{
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                      }}
                    &gt;
                      &lt;Text strong&gt;{activity.title}&lt;/Text&gt;
                      &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                        {activity.timestamp.toLocaleTimeString()}
                      &lt;/Text&gt;
                    &lt;/div&gt;
                    &lt;div style={{ marginTop: 4 }}&gt;
                      &lt;Text&gt;{activity.description}&lt;/Text&gt;
                    &lt;/div&gt;
                    {(activity.user || activity.organization) &amp;&amp; (
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {activity.user &amp;&amp; (
                          &lt;Tag icon={&lt;UserOutlined /&gt;} color=&quot;blue&quot;&gt;
                            {activity.user}
                          &lt;/Tag&gt;
                        )}
                        {activity.organization &amp;&amp; (
                          &lt;Tag icon={&lt;TeamOutlined /&gt;} color=&quot;green&quot;&gt;
                            {activity.organization}
                          &lt;/Tag&gt;
                        )}
                        &lt;Tag color={getSeverityColor(activity.severity)}&gt;{activity.severity}&lt;/Tag&gt;
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/Timeline.Item&gt;
              ))}
            &lt;/Timeline&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  if (!metrics) {
    return &lt;div&gt;Loading...&lt;/div&gt;;
  }

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
          }}
        &gt;
          &lt;div&gt;
            &lt;Title level={2}&gt;
              &lt;DashboardOutlined /&gt; Enterprise Dashboard
            &lt;/Title&gt;
            &lt;Text type=&quot;secondary&quot;&gt;
              Comprehensive overview of your organization's automation platform
            &lt;/Text&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;RangePicker value={dateRange} onChange={setDateRange} style={{ width: 300 }} /&gt;
            {canManageOrganization() &amp;&amp; (
              &lt;Select
                value={selectedOrganization}
                onChange={setSelectedOrganization}
                style={{ width: 200 }}
              &gt;
                &lt;Option value=&quot;all&quot;&gt;All Organizations&lt;/Option&gt;
                {organizations.map((org) =&gt; (
                  &lt;Option key={org.id} value={org.id}&gt;
                    {org.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            )}
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadDashboardData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;Tabs items={tabs}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/AuditDashboard.tsx (Line 317:6 - Line 692:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/auditdashboard/AuditDashboard.tsx (Line 319:6 - Line 694:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn350" onclick="toggleCodeBlock('cloneGroup350', 'expandBtn350', 'collapseBtn350')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn350" onclick="toggleCodeBlock('cloneGroup350', 'expandBtn350', 'collapseBtn350')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup350"><code class="language-javascript text-sm text-gray-800">={{ fontSize: '12px' }}&gt;
            {record.ipAddress}
          &lt;/Text&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Action',
      dataIndex: 'action',
      key: 'action',
      width: 120,
      render: (action: string) =&gt; &lt;Tag color=&quot;blue&quot;&gt;{action}&lt;/Tag&gt;,
    },
    {
      title: 'Resource',
      dataIndex: 'resource',
      key: 'resource',
      width: 120,
      render: (resource: string, record: AuditEvent) =&gt; (
        &lt;div&gt;
          &lt;Tag color=&quot;purple&quot;&gt;{resource}&lt;/Tag&gt;
          {record.resourceId &amp;&amp; (
            &lt;div&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                ID: {record.resourceId}
              &lt;/Text&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Result',
      dataIndex: 'result',
      key: 'result',
      width: 100,
      render: (result: string) =&gt; &lt;Tag color={getResultColor(result)}&gt;{result}&lt;/Tag&gt;,
    },
    {
      title: 'Severity',
      dataIndex: 'severity',
      key: 'severity',
      width: 100,
      render: (severity: string) =&gt; &lt;Tag color={getSeverityColor(severity)}&gt;{severity}&lt;/Tag&gt;,
    },
    {
      title: 'Category',
      dataIndex: 'category',
      key: 'category',
      width: 120,
      render: (category: string) =&gt; &lt;Tag&gt;{category}&lt;/Tag&gt;,
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 100,
      render: (_: unknown, record: AuditEvent) =&gt; (
        &lt;Button type=&quot;link&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; setSelectedEvent(record)}&gt;
          View
        &lt;/Button&gt;
      ),
    },
  ];

  const uniqueUsers = Array.from(new Set(events.map((e) =&gt; e.userName)));
  const uniqueActions = Array.from(new Set(events.map((e) =&gt; e.action)));
  const uniqueResources = Array.from(new Set(events.map((e) =&gt; e.resource)));

  const securityMetrics = {
    totalEvents: filteredEvents.length,
    securityEvents: filteredEvents.filter(
      (e) =&gt;
        e.category === 'authentication' ||
        e.category === 'authorization' ||
        e.severity === 'high' ||
        e.severity === 'critical'
    ).length,
    failedLogins: filteredEvents.filter((e) =&gt; e.action === 'login' &amp;&amp; e.result === 'failure')
      .length,
    criticalEvents: filteredEvents.filter((e) =&gt; e.severity === 'critical').length,
  };

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;AuditOutlined /&gt; Audit &amp; Security Dashboard
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;Monitor security events, audit trails, and compliance status&lt;/Text&gt;
      &lt;/div&gt;

      {/* Security Metrics */}
      &lt;Row gutter={16} style={{ marginBottom: 24 }}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Events&quot;
              value={securityMetrics.totalEvents}
              prefix={&lt;AuditOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Security Events&quot;
              value={securityMetrics.securityEvents}
              prefix={&lt;SecurityScanOutlined /&gt;}
              valueStyle={{ color: '#faad14' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Failed Logins&quot;
              value={securityMetrics.failedLogins}
              prefix={&lt;WarningOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Critical Events&quot;
              value={securityMetrics.criticalEvents}
              prefix={&lt;AlertOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Security Alerts */}
      {securityAlerts.length &gt; 0 &amp;&amp; (
        &lt;Card
          title={
            &lt;span&gt;
              &lt;AlertOutlined /&gt; Active Security Alerts
            &lt;/span&gt;
          }
          style={{ marginBottom: 24 }}
        &gt;
          {securityAlerts.map((alert) =&gt; (
            &lt;Alert
              key={alert.id}
              message={alert.title}
              description={alert.description}
              type={
                alert.severity === 'critical'
                  ? 'error'
                  : alert.severity === 'high'
                    ? 'warning'
                    : 'info'
              }
              showIcon
              style={{ marginBottom: 8 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Investigate
                &lt;/Button&gt;
              }
            /&gt;
          ))}
        &lt;/Card&gt;
      )}

      {/* Filters */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;FilterOutlined /&gt; Filters &amp; Search
          &lt;/span&gt;
        }
        style={{ marginBottom: 24 }}
        extra={
          &lt;Space&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadAuditData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
            &lt;Button icon={&lt;ExportOutlined /&gt;} onClick={() =&gt; setExportModalVisible(true)}&gt;
              Export
            &lt;/Button&gt;
            &lt;Button icon={&lt;CheckCircleOutlined /&gt;} onClick={generateComplianceReport}&gt;
              Generate Report
            &lt;/Button&gt;
          &lt;/Space&gt;
        }
      &gt;
        &lt;Space wrap style={{ marginBottom: 16 }}&gt;
          &lt;RangePicker
            value={dateRange}
            onChange={setDateRange}
            showTime
            format=&quot;YYYY-MM-DD HH:mm&quot;
            placeholder={['Start Date', 'End Date']}
          /&gt;

          &lt;Select
            placeholder=&quot;Select User&quot;
            value={selectedUser}
            onChange={setSelectedUser}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueUsers.map((user) =&gt; (
              &lt;Option key={user} value={user}&gt;
                {user}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Action&quot;
            value={selectedAction}
            onChange={setSelectedAction}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueActions.map((action) =&gt; (
              &lt;Option key={action} value={action}&gt;
                {action}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Resource&quot;
            value={selectedResource}
            onChange={setSelectedResource}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueResources.map((resource) =&gt; (
              &lt;Option key={resource} value={resource}&gt;
                {resource}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Severity&quot;
            value={selectedSeverity}
            onChange={setSelectedSeverity}
            allowClear
            style={{ width: 120 }}
          &gt;
            &lt;Option value=&quot;low&quot;&gt;Low&lt;/Option&gt;
            &lt;Option value=&quot;medium&quot;&gt;Medium&lt;/Option&gt;
            &lt;Option value=&quot;high&quot;&gt;High&lt;/Option&gt;
            &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Category&quot;
            value={selectedCategory}
            onChange={setSelectedCategory}
            allowClear
            style={{ width: 150 }}
          &gt;
            &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
            &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
            &lt;Option value=&quot;workflow&quot;&gt;Workflow&lt;/Option&gt;
            &lt;Option value=&quot;credential&quot;&gt;Credential&lt;/Option&gt;
            &lt;Option value=&quot;organization&quot;&gt;Organization&lt;/Option&gt;
            &lt;Option value=&quot;user_management&quot;&gt;User Management&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Button onClick={clearFilters}&gt;Clear Filters&lt;/Button&gt;
        &lt;/Space&gt;

        &lt;Search
          placeholder=&quot;Search events...&quot;
          value={searchTerm}
          onChange={(e) =&gt; setSearchTerm(e.target.value)}
          style={{ width: 300 }}
        /&gt;
      &lt;/Card&gt;

      {/* Audit Events Table */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;AuditOutlined /&gt; Audit Events ({filteredEvents.length})
          &lt;/span&gt;
        }
      &gt;
        &lt;Table
          dataSource={filteredEvents}
          columns={columns}
          rowKey=&quot;id&quot;
          loading={loading}
          pagination={{
            pageSize: 50,
            showSizeChanger: true,
            showQuickJumper: true,
            showTotal: (total, range) =&gt; `${range[0]}-${range[1]} of ${total} events`,
          }}
          scroll={{ x: 1200 }}
        /&gt;
      &lt;/Card&gt;

      {/* Event Details Modal */}
      &lt;Modal
        title=&quot;Event Details&quot;
        open={!!selectedEvent}
        onCancel={() =&gt; setSelectedEvent(null)}
        footer={null}
        width={800}
      &gt;
        {selectedEvent &amp;&amp; (
          &lt;Descriptions column={2} bordered&gt;
            &lt;Descriptions.Item label=&quot;Timestamp&quot;&gt;
              {selectedEvent.timestamp.toLocaleString()}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User&quot;&gt;
              {selectedEvent.userName} ({selectedEvent.userId})
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Action&quot;&gt;
              &lt;Tag color=&quot;blue&quot;&gt;{selectedEvent.action}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Resource&quot;&gt;
              &lt;Tag color=&quot;purple&quot;&gt;{selectedEvent.resource}&lt;/Tag&gt;
              {selectedEvent.resourceId &amp;&amp; ` (${selectedEvent.resourceId})`}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Result&quot;&gt;
              &lt;Tag color={getResultColor(selectedEvent.result)}&gt;{selectedEvent.result}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Severity&quot;&gt;
              &lt;Tag color={getSeverityColor(selectedEvent.severity)}&gt;{selectedEvent.severity}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Category&quot;&gt;
              &lt;Tag&gt;{selectedEvent.category}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;IP Address&quot;&gt;
              &lt;GlobalOutlined /&gt; {selectedEvent.ipAddress}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Organization&quot; span={2}&gt;
              {selectedEvent.organizationId || 'N/A'}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Details&quot; span={2}&gt;
              &lt;pre
                style={{
                  fontSize: '12px',
                  background: '#f5f5f5',
                  padding: '8px',
                  borderRadius: '4px',
                }}
              &gt;
                {JSON.stringify(selectedEvent.details, null, 2)}
              &lt;/pre&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User Agent&quot; span={2}&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                {selectedEvent.userAgent}
              &lt;/Text&gt;
            &lt;/Descriptions.Item&gt;
          &lt;/Descriptions&gt;
        )}
      &lt;/Modal&gt;

      {/* Export Modal */}
      &lt;Modal
        title=&quot;Export Audit Data&quot;
        open={exportModalVisible}
        onCancel={() =&gt; setExportModalVisible(false)}
        footer={null}
      &gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
          &lt;Text&gt;Select export format:&lt;/Text&gt;
          &lt;Space&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('json')} type=&quot;primary&quot;&gt;
              Export as JSON
            &lt;/Button&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('csv')}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/AIWorkflowStudio.tsx (Line 228:6 - Line 755:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/aiworkflowstudio/AIWorkflowStudio.tsx (Line 230:6 - Line 757:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn353" onclick="toggleCodeBlock('cloneGroup353', 'expandBtn353', 'collapseBtn353')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn353" onclick="toggleCodeBlock('cloneGroup353', 'expandBtn353', 'collapseBtn353')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup353"><code class="language-javascript text-sm text-gray-800">={color}&gt;{status}&lt;/Tag&gt;;
      },
    },
    {
      title: 'Quality',
      dataIndex: 'qualityScore',
      key: 'qualityScore',
      width: 100,
      render: (score: number) =&gt; (
        &lt;Progress
          percent={Math.round(score * 100)}
          size=&quot;small&quot;
          status={score &gt;= 0.8 ? 'success' : score &gt;= 0.6 ? 'normal' : 'exception'}
        /&gt;
      ),
    },
    {
      title: 'Cost',
      dataIndex: 'totalCost',
      key: 'totalCost',
      width: 80,
      render: (cost: number) =&gt; &lt;Text&gt;${cost.toFixed(4)}&lt;/Text&gt;,
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (_: unknown, record: AIWorkflowExecution) =&gt; {
        if (!record.endTime) return '-';
        const duration = record.endTime.getTime() - record.startTime.getTime();
        return &lt;Text&gt;{(duration / 1000).toFixed(1)}s&lt;/Text&gt;;
      },
    },
  ];

  const tabs = [
    {
      key: 'builder',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          AI Builder
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Row gutter={[24, 24]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card title=&quot;AI Model Configuration&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Select AI Model&lt;/Text&gt;
                    &lt;Select
                      value={selectedModel}
                      onChange={setSelectedModel}
                      style={{ width: '100%', marginTop: 8 }}
                      placeholder=&quot;Choose an AI model&quot;
                    &gt;
                      {availableModels.map((model) =&gt; (
                        &lt;Option key={model.id} value={model.id}&gt;
                          &lt;div
                            style={{
                              display: 'flex',
                              alignItems: 'center',
                              justifyContent: 'space-between',
                            }}
                          &gt;
                            &lt;span&gt;
                              {getModelIcon(model)} {model.name}
                            &lt;/span&gt;
                            &lt;div&gt;
                              &lt;Tag&gt;{model.provider}&lt;/Tag&gt;
                              &lt;Tag color=&quot;blue&quot;&gt;${model.costPer1kTokens}/1k&lt;/Tag&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/Option&gt;
                      ))}
                    &lt;/Select&gt;
                  &lt;/div&gt;

                  {selectedModel &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      return (
                        &lt;div&gt;
                          &lt;Divider style={{ margin: '16px 0' }} /&gt;
                          &lt;div style={{ marginBottom: 16 }}&gt;
                            &lt;Text strong&gt;Model Details&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              &lt;div&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Type:&lt;/Text&gt; &lt;Tag&gt;{model.type}&lt;/Tag&gt;
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Input:&lt;/Text&gt;
                                {model.inputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Output:&lt;/Text&gt;
                                {model.outputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Context Window:&lt;/Text&gt;{' '}
                                &lt;Text&gt;{model.contextWindow.toLocaleString()} tokens&lt;/Text&gt;
                              &lt;/div&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;

                          &lt;div&gt;
                            &lt;Text strong&gt;Capabilities&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              {model.capabilities.map((cap) =&gt; (
                                &lt;Tag key={cap.name} color=&quot;purple&quot;&gt;
                                  {cap.name} ({cap.proficiency}/5)
                                &lt;/Tag&gt;
                              ))}
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      );
                    })()}

                  &lt;Divider /&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;Main Prompt&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.prompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          prompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter your main prompt here...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;System Prompt (Optional)&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.systemPrompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          systemPrompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter system instructions...&quot;
                      rows={3}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;Row gutter={16}&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Temperature&lt;/Text&gt;
                        &lt;Slider
                          min={0}
                          max={2}
                          step={0.1}
                          value={nodeConfig.temperature}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              temperature: value,
                            }))
                          }
                          style={{ marginTop: 8 }}
                        /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;Current: {nodeConfig.temperature}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Max Tokens&lt;/Text&gt;
                        &lt;InputNumber
                          min={1}
                          max={
                            selectedModel
                              ? availableModels.find((m) =&gt; m.id === selectedModel)?.maxTokens
                              : 4096
                          }
                          value={nodeConfig.maxTokens}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              maxTokens: value || 1000,
                            }))
                          }
                          style={{ width: '100%', marginTop: 8 }}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;

            &lt;Col span={12}&gt;
              &lt;Card title=&quot;Multi-Modal Inputs&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Text Input&lt;/Text&gt;
                    &lt;TextArea
                      value={workflowInputs.text || ''}
                      onChange={(e) =&gt;
                        setWorkflowInputs((prev) =&gt; ({
                          ...prev,
                          text: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter text input for the AI model...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;File Uploads&lt;/Text&gt;
                    &lt;Dragger
                      multiple
                      beforeUpload={handleFileUpload}
                      showUploadList={false}
                      style={{ marginTop: 8 }}
                    &gt;
                      &lt;p className=&quot;ant-upload-drag-icon&quot;&gt;
                        &lt;CloudUploadOutlined /&gt;
                      &lt;/p&gt;
                      &lt;p className=&quot;ant-upload-text&quot;&gt;Click or drag files to upload&lt;/p&gt;
                      &lt;p className=&quot;ant-upload-hint&quot;&gt;
                        Support for images, audio, video, and documents
                      &lt;/p&gt;
                    &lt;/Dragger&gt;
                  &lt;/div&gt;

                  {uploadedFiles.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      &lt;Text strong&gt;Uploaded Files&lt;/Text&gt;
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {uploadedFiles.map((file, index) =&gt; (
                          &lt;Tag
                            key={index}
                            icon={getModalityIcon(file.type.split('/')[0])}
                            style={{ marginBottom: 4, marginRight: 4 }}
                          &gt;
                            {file.name}
                          &lt;/Tag&gt;
                        ))}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  &lt;Divider /&gt;

                  &lt;Button
                    type=&quot;primary&quot;
                    size=&quot;large&quot;
                    onClick={handleExecuteWorkflow}
                    loading={isExecuting}
                    disabled={!selectedModel || !nodeConfig.prompt}
                    icon={&lt;PlayCircleOutlined /&gt;}
                    style={{ width: '100%' }}
                  &gt;
                    {isExecuting ? 'Executing...' : 'Execute AI Workflow'}
                  &lt;/Button&gt;

                  {selectedModel &amp;&amp;
                    nodeConfig.prompt &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      const estimatedTokens = Math.ceil((nodeConfig.prompt?.length || 0) / 4);
                      const estimatedCost = (estimatedTokens / 1000) * model.costPer1kTokens;

                      return (
                        &lt;Alert
                          message=&quot;Execution Estimate&quot;
                          description={
                            &lt;div&gt;
                              &lt;div&gt;Estimated tokens: ~{estimatedTokens}&lt;/div&gt;
                              &lt;div&gt;Estimated cost: ${estimatedCost.toFixed(4)}&lt;/div&gt;
                            &lt;/div&gt;
                          }
                          type=&quot;info&quot;
                          showIcon
                        /&gt;
                      );
                    })()}
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'execution',
      label: (
        &lt;span&gt;
          &lt;PlayCircleOutlined /&gt;
          Execution Results
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          {currentExecution ? (
            &lt;Row gutter={[24, 24]}&gt;
              &lt;Col span={24}&gt;
                &lt;Card title={`Execution ${currentExecution.id.slice(-8)}`} size=&quot;small&quot;&gt;
                  &lt;Row gutter={16}&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Status&quot;
                        value={currentExecution.status}
                        valueStyle={{
                          color: currentExecution.status === 'completed' ? '#3f8600' : '#cf1322',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Quality Score&quot;
                        value={Math.round(currentExecution.qualityScore * 100)}
                        suffix=&quot;%&quot;
                        valueStyle={{
                          color: currentExecution.qualityScore &gt;= 0.8 ? '#3f8600' : '#fa8c16',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Total Cost&quot;
                        value={currentExecution.totalCost}
                        prefix=&quot;$&quot;
                        precision={4}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic title=&quot;Tokens Used&quot; value={currentExecution.totalTokens} /&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Node Executions&quot; size=&quot;small&quot;&gt;
                  &lt;Timeline&gt;
                    {currentExecution.nodeExecutions.map((nodeExec, index) =&gt; (
                      &lt;Timeline.Item
                        key={index}
                        color={
                          nodeExec.status === 'completed'
                            ? 'green'
                            : nodeExec.status === 'failed'
                              ? 'red'
                              : 'blue'
                        }
                      &gt;
                        &lt;div&gt;
                          &lt;Text strong&gt;Node {nodeExec.nodeId}&lt;/Text&gt;
                          &lt;div style={{ marginTop: 4 }}&gt;
                            &lt;Tag color={nodeExec.status === 'completed' ? 'green' : 'red'}&gt;
                              {nodeExec.status}
                            &lt;/Tag&gt;
                            &lt;Text type=&quot;secondary&quot;&gt;
                              {nodeExec.endTime
                                ? `${((nodeExec.endTime.getTime() - nodeExec.startTime.getTime()) / 1000).toFixed(1)}s`
                                : 'Running...'}
                            &lt;/Text&gt;
                          &lt;/div&gt;
                          {nodeExec.outputs.length &gt; 0 &amp;&amp; (
                            &lt;div
                              style={{
                                marginTop: 8,
                                padding: 8,
                                background: '#f5f5f5',
                                borderRadius: 4,
                              }}
                            &gt;
                              &lt;Text style={{ fontSize: '12px' }}&gt;
                                {typeof nodeExec.outputs[0].content === 'string'
                                  ? nodeExec.outputs[0].content.slice(0, 200) +
                                    (nodeExec.outputs[0].content.length &gt; 200 ? '...' : '')
                                  : JSON.stringify(nodeExec.outputs[0].content).slice(0, 200)}
                              &lt;/Text&gt;
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;
                      &lt;/Timeline.Item&gt;
                    ))}
                  &lt;/Timeline&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Quality Metrics&quot; size=&quot;small&quot;&gt;
                  {currentExecution.nodeExecutions.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      {Object.entries(currentExecution.nodeExecutions[0].qualityMetrics).map(
                        ([metric, value]) =&gt; (
                          &lt;div key={metric} style={{ marginBottom: 8 }}&gt;
                            &lt;div
                              style={{
                                display: 'flex',
                                justifyContent: 'space-between',
                                marginBottom: 4,
                              }}
                            &gt;
                              &lt;Text&gt;{metric.charAt(0).toUpperCase() + metric.slice(1)}&lt;/Text&gt;
                              &lt;Text&gt;{Math.round(value * 100)}%&lt;/Text&gt;
                            &lt;/div&gt;
                            &lt;Progress
                              percent={Math.round(value * 100)}
                              size=&quot;small&quot;
                              status={
                                value &gt;= 0.8 ? 'success' : value &gt;= 0.6 ? 'normal' : 'exception'
                              }
                              showInfo={false}
                            /&gt;
                          &lt;/div&gt;
                        )
                      )}
                    &lt;/div&gt;
                  )}
                &lt;/Card&gt;

                {currentExecution.insights.length &gt; 0 &amp;&amp; (
                  &lt;Card title=&quot;AI Insights&quot; size=&quot;small&quot; style={{ marginTop: 16 }}&gt;
                    &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                      {currentExecution.insights.map((insight, index) =&gt; (
                        &lt;Alert
                          key={index}
                          message={insight.message}
                          description={insight.recommendation}
                          type={insight.impact === 'high' ? 'warning' : 'info'}
                          showIcon
                          style={{ fontSize: '12px' }}
                        /&gt;
                      ))}
                    &lt;/Space&gt;
                  &lt;/Card&gt;
                )}
              &lt;/Col&gt;
            &lt;/Row&gt;
          ) : (
            &lt;div style={{ textAlign: 'center', padding: '48px' }}&gt;
              &lt;ExperimentOutlined style={{ fontSize: '48px', color: '#d9d9d9' }} /&gt;
              &lt;Title level={4} type=&quot;secondary&quot;&gt;
                No execution results yet
              &lt;/Title&gt;
              &lt;Paragraph type=&quot;secondary&quot;&gt;
                Execute a workflow from the AI Builder tab to see results here
              &lt;/Paragraph&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'history',
      label: (
        &lt;span&gt;
          &lt;BarChartOutlined /&gt;
          Execution History
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Card title=&quot;Execution History&quot; size=&quot;small&quot;&gt;
            &lt;Table
              dataSource={executionHistory}
              columns={executionColumns}
              rowKey=&quot;id&quot;
              pagination={{ pageSize: 10 }}
              onRow={(record) =&gt; ({
                onClick: () =&gt; setCurrentExecution(record),
              })}
              style={{ cursor: 'pointer' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;Modal
      title={
        &lt;div style={{ display: 'flex', alignItems: 'center' }}&gt;
          &lt;ExperimentOutlined style={{ marginRight: 8 }} /&gt;
          AI Workflow Studio
          &lt;Badge count=&quot;Beta&quot; style={{ marginLeft: 8 }} /&gt;
        &lt;/div&gt;
      }
      open={visible}
      onCancel={onClose}
      footer={null}
      width=&quot;90%&quot;
      style={{ top: 20 }}
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabs}
        style={{ minHeight: '70vh' }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Settings.tsx (Line 137:4 - Line 421:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/settings/Settings.tsx (Line 140:4 - Line 424:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn477" onclick="toggleCodeBlock('cloneGroup477', 'expandBtn477', 'collapseBtn477')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn477" onclick="toggleCodeBlock('cloneGroup477', 'expandBtn477', 'collapseBtn477')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup477"><code class="language-javascript text-sm text-gray-800">={tab.id}
                onClick={() =&gt; setActiveTab(tab.id as any)}
                className={`w-full flex items-center px-4 py-3 text-left rounded-lg transition-all duration-300 ${
                  activeTab === tab.id
                    ? 'bg-white/20 text-blue-300 backdrop-blur-sm border border-white/30'
                    : 'text-slate-300 hover:bg-white/10 hover:text-white'
                }`}
              &gt;
                &lt;span className=&quot;mr-3 text-lg&quot;&gt;{tab.icon}&lt;/span&gt;
                {tab.name}
              &lt;/button&gt;
            ))}
          &lt;/nav&gt;
        &lt;/div&gt;

        {/* Content */}
        &lt;div className=&quot;flex-1&quot;&gt;
          &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
            {/* Profile Tab */}
            {activeTab === 'profile' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Profile Information&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Full Name
                    &lt;/label&gt;
                    &lt;input
                      aria-label=&quot;Profile Name&quot;
                      type=&quot;text&quot;
                      value={settings.profile.name}
                      onChange={(e) =&gt; updateSetting('profile', 'name', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Email Address
                    &lt;/label&gt;
                    &lt;input
                      aria-label=&quot;email&quot;
                      type=&quot;email&quot;
                      value={settings.profile.email}
                      onChange={(e) =&gt; updateSetting('profile', 'email', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Timezone
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;timezone&quot;
                      value={settings.profile.timezone}
                      onChange={(e) =&gt; updateSetting('profile', 'timezone', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;UTC-8&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC-8 (Pacific)
                      &lt;/option&gt;
                      &lt;option value=&quot;UTC-5&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC-5 (Eastern)
                      &lt;/option&gt;
                      &lt;option value=&quot;UTC+0&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC+0 (GMT)
                      &lt;/option&gt;
                      &lt;option value=&quot;UTC+1&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC+1 (Central European)
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Notifications Tab */}
            {activeTab === 'notifications' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Notification Preferences&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  {[
                    {
                      key: 'emailNotifications',
                      label: 'Email Notifications',
                      description: 'Receive notifications via email',
                    },
                    {
                      key: 'workflowFailures',
                      label: 'Workflow Failures',
                      description: 'Get notified when workflows fail',
                    },
                    {
                      key: 'weeklyReports',
                      label: 'Weekly Reports',
                      description: 'Receive weekly summary reports',
                    },
                    {
                      key: 'maintenanceUpdates',
                      label: 'Maintenance Updates',
                      description: 'System maintenance notifications',
                    },
                  ].map((item) =&gt; (
                    &lt;div key={item.key} className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;div&gt;
                        &lt;h3 className=&quot;text-sm font-medium text-white&quot;&gt;{item.label}&lt;/h3&gt;
                        &lt;p className=&quot;text-sm text-slate-300&quot;&gt;{item.description}&lt;/p&gt;
                      &lt;/div&gt;
                      &lt;label className=&quot;relative inline-flex items-center cursor-pointer&quot;&gt;
                        &lt;input
                          aria-label=&quot;notifications&quot;
                          type=&quot;checkbox&quot;
                          checked={
                            settings.notifications[item.key as keyof typeof settings.notifications]
                          }
                          onChange={(e) =&gt;
                            updateSetting('notifications', item.key, e.target.checked)
                          }
                          className=&quot;sr-only peer&quot;
                        /&gt;
                        &lt;div className=&quot;w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-400/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/30 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500&quot;&gt;&lt;/div&gt;
                      &lt;/label&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Security Tab */}
            {activeTab === 'security' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Security Settings&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                    &lt;div&gt;
                      &lt;h3 className=&quot;text-sm font-medium text-white&quot;&gt;Two-Factor Authentication&lt;/h3&gt;
                      &lt;p className=&quot;text-sm text-slate-300&quot;&gt;
                        Add an extra layer of security to your account
                      &lt;/p&gt;
                    &lt;/div&gt;
                    &lt;label className=&quot;relative inline-flex items-center cursor-pointer&quot;&gt;
                      &lt;input
                        aria-label=&quot;security&quot;
                        type=&quot;checkbox&quot;
                        checked={settings.security.twoFactorAuth}
                        onChange={(e) =&gt;
                          updateSetting('security', 'twoFactorAuth', e.target.checked)
                        }
                        className=&quot;sr-only peer&quot;
                      /&gt;
                      &lt;div className=&quot;w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-400/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/30 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500&quot;&gt;&lt;/div&gt;
                    &lt;/label&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Session Timeout (minutes)
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;security-session time out&quot;
                      value={settings.security.sessionTimeout}
                      onChange={(e) =&gt;
                        updateSetting('security', 'sessionTimeout', parseInt(e.target.value, 10))
                      }
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value={30} className=&quot;bg-slate-800 text-white&quot;&gt;
                        30 minutes
                      &lt;/option&gt;
                      &lt;option value={60} className=&quot;bg-slate-800 text-white&quot;&gt;
                        1 hour
                      &lt;/option&gt;
                      &lt;option value={120} className=&quot;bg-slate-800 text-white&quot;&gt;
                        2 hours
                      &lt;/option&gt;
                      &lt;option value={480} className=&quot;bg-slate-800 text-white&quot;&gt;
                        8 hours
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                    &lt;div&gt;
                      &lt;h3 className=&quot;text-sm font-medium text-white&quot;&gt;API Access&lt;/h3&gt;
                      &lt;p className=&quot;text-sm text-slate-300&quot;&gt;Allow API access to your account&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;label className=&quot;relative inline-flex items-center cursor-pointer&quot;&gt;
                      &lt;input
                        aria-label=&quot;api access&quot;
                        type=&quot;checkbox&quot;
                        checked={settings.security.apiAccess}
                        onChange={(e) =&gt; updateSetting('security', 'apiAccess', e.target.checked)}
                        className=&quot;sr-only peer&quot;
                      /&gt;
                      &lt;div className=&quot;w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-400/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/30 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500&quot;&gt;&lt;/div&gt;
                    &lt;/label&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Preferences Tab */}
            {activeTab === 'preferences' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Application Preferences&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;Theme&lt;/label&gt;
                    &lt;select
                      aria-label=&quot;performance&quot;
                      value={settings.preferences.theme}
                      onChange={(e) =&gt; updateSetting('preferences', 'theme', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;light&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Light
                      &lt;/option&gt;
                      &lt;option value=&quot;dark&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Dark
                      &lt;/option&gt;
                      &lt;option value=&quot;auto&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Auto
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Language
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;language&quot;
                      value={settings.preferences.language}
                      onChange={(e) =&gt; updateSetting('preferences', 'language', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;en&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        English
                      &lt;/option&gt;
                      &lt;option value=&quot;es&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Spanish
                      &lt;/option&gt;
                      &lt;option value=&quot;fr&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        French
                      &lt;/option&gt;
                      &lt;option value=&quot;de&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        German
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Default Workflow Privacy
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;preferences&quot;
                      value={settings.preferences.defaultWorkflowPrivacy}
                      onChange={(e) =&gt;
                        updateSetting('preferences', 'defaultWorkflowPrivacy', e.target.value)
                      }
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;private&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Private
                      &lt;/option&gt;
                      &lt;option value=&quot;team&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Team
                      &lt;/option&gt;
                      &lt;option value=&quot;public&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Public
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Save Button */}
            &lt;div className=&quot;px-6 py-4 bg-white/5 border-t border-white/20 rounded-b-lg backdrop-blur-sm&quot;&gt;
              &lt;div className=&quot;flex justify-end space-x-3&quot;&gt;
                &lt;button
                  onClick={() =&gt; window.location.reload()}
                  className=&quot;px-4 py-2 text-sm font-medium text-slate-300 bg-white/10 border border-white/30 rounded-lg hover:bg-white/20 hover:text-white transition-all duration-300 backdrop-blur-sm&quot;
                &gt;
                  Reset
                &lt;/button&gt;
                &lt;button
                  onClick={handleSave}
                  disabled={isSaving}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/SelfHosted.tsx (Line 280:4 - Line 567:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/selfhosted/SelfHosted.tsx (Line 281:4 - Line 568:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn479" onclick="toggleCodeBlock('cloneGroup479', 'expandBtn479', 'collapseBtn479')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn479" onclick="toggleCodeBlock('cloneGroup479', 'expandBtn479', 'collapseBtn479')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup479"><code class="language-javascript text-sm text-gray-800">={option.id}
                  onClick={() =&gt; setActiveDeployment(option.id)}
                  className={`p-6 rounded-xl transition-all duration-300 ${
                    activeDeployment === option.id
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white scale-105 shadow-xl'
                      : 'bg-white border border-gray-200 text-gray-700 hover:border-blue-300 hover:shadow-lg'
                  }`}
                &gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;Icon
                      className={`w-8 h-8 mx-auto mb-3 ${
                        activeDeployment === option.id ? 'text-white' : 'text-blue-600'
                      }`}
                    /&gt;
                    &lt;h3 className=&quot;font-semibold text-lg mb-2&quot;&gt;{option.name}&lt;/h3&gt;
                    &lt;p
                      className={`text-sm mb-3 ${
                        activeDeployment === option.id ? 'text-blue-100' : 'text-gray-500'
                      }`}
                    &gt;
                      {option.description}
                    &lt;/p&gt;

                    &lt;div className=&quot;space-y-1 text-sm&quot;&gt;
                      &lt;div
                        className={
                          activeDeployment === option.id ? 'text-blue-100' : 'text-gray-600'
                        }
                      &gt;
                        &lt;strong&gt;Difficulty:&lt;/strong&gt; {option.difficulty}
                      &lt;/div&gt;
                      &lt;div
                        className={
                          activeDeployment === option.id ? 'text-blue-100' : 'text-gray-600'
                        }
                      &gt;
                        &lt;strong&gt;Setup:&lt;/strong&gt; {option.setupTime}
                      &lt;/div&gt;
                      &lt;div
                        className={
                          activeDeployment === option.id ? 'text-blue-100' : 'text-gray-600'
                        }
                      &gt;
                        &lt;strong&gt;Best for:&lt;/strong&gt; {option.suitable}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/button&gt;
              );
            })}
          &lt;/div&gt;

          {/* Command Instructions */}
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;bg-gray-900 rounded-xl p-6&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between mb-6&quot;&gt;
                &lt;h3 className=&quot;text-xl font-semibold text-white&quot;&gt;
                  {commands[activeDeployment as keyof typeof commands].title}
                &lt;/h3&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Terminal className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                  &lt;span className=&quot;text-gray-400 text-sm&quot;&gt;Terminal&lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div className=&quot;space-y-6&quot;&gt;
                {commands[activeDeployment as keyof typeof commands].steps.map((step, index) =&gt; (
                  &lt;div key={index} className=&quot;space-y-2&quot;&gt;
                    &lt;div className=&quot;text-gray-300 text-sm&quot;&gt;
                      {index + 1}. {step.description}
                    &lt;/div&gt;
                    &lt;div className=&quot;relative&quot;&gt;
                      &lt;pre className=&quot;bg-black rounded-lg p-4 text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                        &lt;code&gt;{step.command}&lt;/code&gt;
                      &lt;/pre&gt;
                      &lt;button
                        onClick={() =&gt; copyToClipboard(step.command)}
                        className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                        title=&quot;Copy to clipboard&quot;
                      &gt;
                        {copiedCommand === step.command ? (
                          &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                        ) : (
                          &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                        )}
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;

              &lt;div className=&quot;mt-6 p-4 bg-blue-900/30 border border-blue-700 rounded-lg&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2 text-blue-300 mb-2&quot;&gt;
                  &lt;ExternalLink className=&quot;w-4 h-4&quot; /&gt;
                  &lt;span className=&quot;font-medium&quot;&gt;Need Help?&lt;/span&gt;
                &lt;/div&gt;
                &lt;p className=&quot;text-blue-200 text-sm&quot;&gt;
                  Check out our comprehensive{' '}
                  &lt;a href=&quot;#&quot; className=&quot;underline hover:text-white&quot;&gt;
                    deployment guide
                  &lt;/a&gt;{' '}
                  or join our{' '}
                  &lt;a href=&quot;#&quot; className=&quot;underline hover:text-white&quot;&gt;
                    community forum
                  &lt;/a&gt;{' '}
                  for support.
                &lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* System Requirements */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;System Requirements&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Hardware and software requirements for different deployment scenarios
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              {Object.entries(systemRequirements).map(([tier, requirements]) =&gt; (
                &lt;div
                  key={tier}
                  className={`rounded-xl p-6 ${
                    tier === 'recommended'
                      ? 'bg-gradient-to-b from-blue-50 to-purple-50 border-2 border-blue-200 shadow-xl'
                      : 'bg-white border border-gray-200 shadow-lg'
                  }`}
                &gt;
                  &lt;div className=&quot;text-center mb-6&quot;&gt;
                    &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2 capitalize&quot;&gt;
                      {tier} Configuration
                    &lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600&quot;&gt;
                      {tier === 'minimum' &amp;&amp; 'For testing and small deployments'}
                      {tier === 'recommended' &amp;&amp; 'For production workloads'}
                      {tier === 'enterprise' &amp;&amp; 'For high-scale enterprise deployments'}
                    &lt;/p&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;space-y-4&quot;&gt;
                    {requirements.map((req, idx) =&gt; {
                      const Icon = req.icon;
                      return (
                        &lt;div key={idx} className=&quot;flex items-center gap-4&quot;&gt;
                          &lt;div className=&quot;bg-gray-100 p-2 rounded-lg&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5 text-gray-600&quot; /&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;flex-1&quot;&gt;
                            &lt;div className=&quot;font-medium text-gray-900&quot;&gt;{req.component}&lt;/div&gt;
                            &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{req.requirement}&lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      );
                    })}
                  &lt;/div&gt;

                  {tier === 'recommended' &amp;&amp; (
                    &lt;div className=&quot;mt-6 text-center&quot;&gt;
                      &lt;span className=&quot;bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium&quot;&gt;
                        Recommended
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              ))}
            &lt;/div&gt;

            &lt;div className=&quot;mt-12 bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
              &lt;h3 className=&quot;text-xl font-semibold text-gray-900 mb-4&quot;&gt;Software Dependencies&lt;/h3&gt;
              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6&quot;&gt;
                {[
                  { name: 'Node.js', version: '20+', icon: '🟢' },
                  { name: 'Docker', version: '24+', icon: '🐳' },
                  { name: 'MongoDB', version: '7+', icon: '🍃' },
                  { name: 'PostgreSQL', version: '15+', icon: '🐘' },
                ].map((dep, index) =&gt; (
                  &lt;div key={index} className=&quot;flex items-center gap-3&quot;&gt;
                    &lt;span className=&quot;text-2xl&quot;&gt;{dep.icon}&lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-gray-900&quot;&gt;{dep.name}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;Version {dep.version}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Self-Hosted Features */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Why Self-Host?&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Complete control, security, and customization for your workflow automation needs
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
            {features.map((feature, index) =&gt; {
              const Icon = feature.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-xl transition-all duration-300 hover:-translate-y-1&quot;
                &gt;
                  &lt;div className=&quot;mb-4&quot;&gt;
                    &lt;Icon className=&quot;w-8 h-8 text-blue-600 group-hover:text-blue-700 transition-colors mb-4&quot; /&gt;
                    &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                      {feature.title}
                    &lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;
                  &lt;/div&gt;

                  &lt;ul className=&quot;space-y-2&quot;&gt;
                    {feature.benefits.map((benefit, idx) =&gt; (
                      &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                        &lt;CheckCircle className=&quot;w-4 h-4 text-green-500 flex-shrink-0&quot; /&gt;
                        &lt;span className=&quot;text-gray-700 text-sm&quot;&gt;{benefit}&lt;/span&gt;
                      &lt;/li&gt;
                    ))}
                  &lt;/ul&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Migration Section */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Migration Made Easy&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Seamlessly migrate from existing workflow platforms to your self-hosted Reporunner
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            &lt;div className=&quot;bg-white rounded-xl p-8 shadow-lg&quot;&gt;
              &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-6&quot;&gt;Supported Migrations&lt;/h3&gt;
              &lt;div className=&quot;space-y-4&quot;&gt;
                {[
                  { platform: 'n8n', difficulty: 'Easy', time: '1-2 hours' },
                  {
                    platform: 'Zapier',
                    difficulty: 'Medium',
                    time: '2-4 hours',
                  },
                  {
                    platform: 'Make (Integromat)',
                    difficulty: 'Medium',
                    time: '2-4 hours',
                  },
                  {
                    platform: 'Microsoft Power Automate',
                    difficulty: 'Hard',
                    time: '4-8 hours',
                  },
                ].map((migration, index) =&gt; (
                  &lt;div
                    key={index}
                    className=&quot;flex items-center justify-between p-4 bg-gray-50 rounded-lg&quot;
                  &gt;
                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;div className=&quot;w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center&quot;&gt;
                        &lt;ArrowRight className=&quot;w-4 h-4 text-blue-600&quot; /&gt;
                      &lt;/div&gt;
                      &lt;span className=&quot;font-medium text-gray-900&quot;&gt;{migration.platform}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-right&quot;&gt;
                      &lt;div
                        className={`text-sm font-medium ${
                          migration.difficulty === 'Easy'
                            ? 'text-green-600'
                            : migration.difficulty === 'Medium'
                              ? 'text-yellow-600'
                              : 'text-red-600'
                        }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Roadmap.tsx (Line 326:4 - Line 536:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/roadmap/Roadmap.tsx (Line 327:4 - Line 537:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn481" onclick="toggleCodeBlock('cloneGroup481', 'expandBtn481', 'collapseBtn481')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn481" onclick="toggleCodeBlock('cloneGroup481', 'expandBtn481', 'collapseBtn481')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup481"><code class="language-javascript text-sm text-gray-800">={category.id}
                    onClick={() =&gt; setSelectedCategory(category.id)}
                    className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${
                      selectedCategory === category.id
                        ? 'bg-blue-600 text-white'
                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                    }`}
                  &gt;
                    &lt;Icon className=&quot;w-4 h-4&quot; /&gt;
                    {category.name}
                  &lt;/button&gt;
                );
              })}
            &lt;/div&gt;

            {/* Timeframe Filter */}
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-gray-700 font-medium&quot;&gt;Timeframe:&lt;/span&gt;
              &lt;select
                value={timeframe}
                onChange={(e) =&gt; setTimeframe(e.target.value)}
                className=&quot;px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
              &gt;
                &lt;option value=&quot;2024&quot;&gt;2024&lt;/option&gt;
                &lt;option value=&quot;2025&quot;&gt;2025&lt;/option&gt;
                &lt;option value=&quot;2026&quot;&gt;2026+&lt;/option&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Roadmap Items */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            {filteredItems.length &gt; 0 ? (
              &lt;div className=&quot;space-y-6&quot;&gt;
                {filteredItems.map((item) =&gt; {
                  const statusInfo = statusConfig[item.status as keyof typeof statusConfig];
                  const priorityInfo = priorityConfig[item.priority as keyof typeof priorityConfig];
                  const StatusIcon = statusInfo.icon;

                  return (
                    &lt;div
                      key={item.id}
                      className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                    &gt;
                      &lt;div className=&quot;flex flex-col lg:flex-row lg:items-center gap-6&quot;&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-start gap-4 mb-4&quot;&gt;
                            &lt;div className={`p-2 rounded-lg ${statusInfo.bg}`}&gt;
                              &lt;StatusIcon className={`w-6 h-6 ${statusInfo.color}`} /&gt;
                            &lt;/div&gt;

                            &lt;div className=&quot;flex-1&quot;&gt;
                              &lt;div className=&quot;flex items-center gap-3 mb-2&quot;&gt;
                                &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;{item.title}&lt;/h3&gt;
                                &lt;span
                                  className={`px-2 py-1 text-xs font-medium rounded-full ${statusInfo.bg} ${statusInfo.color}`}
                                &gt;
                                  {statusInfo.label}
                                &lt;/span&gt;
                                &lt;span
                                  className={`px-2 py-1 text-xs font-medium rounded-full ${priorityInfo.bg} ${priorityInfo.color}`}
                                &gt;
                                  {item.priority} priority
                                &lt;/span&gt;
                              &lt;/div&gt;

                              &lt;p className=&quot;text-gray-600 mb-3&quot;&gt;{item.description}&lt;/p&gt;

                              &lt;div className=&quot;flex items-center gap-6 text-sm text-gray-500&quot;&gt;
                                &lt;span className=&quot;flex items-center gap-1&quot;&gt;
                                  &lt;Calendar className=&quot;w-4 h-4&quot; /&gt;
                                  {item.quarter} {timeframe}
                                &lt;/span&gt;
                                &lt;span className=&quot;flex items-center gap-1&quot;&gt;
                                  &lt;TrendingUp className=&quot;w-4 h-4&quot; /&gt;
                                  {item.impact} Impact
                                &lt;/span&gt;
                                &lt;span className=&quot;capitalize&quot;&gt;
                                  {item.category.replace('-', ' &amp; ')}
                                &lt;/span&gt;
                              &lt;/div&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                          {/* Voting */}
                          &lt;div className=&quot;flex items-center gap-2 bg-gray-50 rounded-lg p-3&quot;&gt;
                            &lt;button className=&quot;flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors&quot;&gt;
                              &lt;ThumbsUp className=&quot;w-5 h-5&quot; /&gt;
                              &lt;span className=&quot;font-medium&quot;&gt;{item.votes}&lt;/span&gt;
                            &lt;/button&gt;
                          &lt;/div&gt;

                          {/* View Details */}
                          &lt;button className=&quot;flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors&quot;&gt;
                            &lt;Eye className=&quot;w-4 h-4&quot; /&gt;
                            Details
                          &lt;/button&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  );
                })}
              &lt;/div&gt;
            ) : (
              &lt;div className=&quot;text-center py-12&quot;&gt;
                &lt;div className=&quot;text-6xl mb-4&quot;&gt;🔍&lt;/div&gt;
                &lt;h3 className=&quot;text-xl font-semibold text-gray-900 mb-2&quot;&gt;No features found&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                  Try adjusting your category or timeframe filter.
                &lt;/p&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Feature Request Section */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;bg-white rounded-2xl p-8 shadow-xl&quot;&gt;
              &lt;div className=&quot;text-center mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-gray-900 mb-4&quot;&gt;Help Shape Our Roadmap&lt;/h2&gt;
                &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                  Your feedback drives our development. Vote on existing features or request new
                  ones.
                &lt;/p&gt;
              &lt;/div&gt;

              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-6 mb-8&quot;&gt;
                &lt;div className=&quot;text-center p-6 border border-gray-200 rounded-xl&quot;&gt;
                  &lt;div className=&quot;bg-blue-100 p-3 rounded-lg w-fit mx-auto mb-4&quot;&gt;
                    &lt;ThumbsUp className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Vote on Features&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                    Help us prioritize features by voting on what matters most to you
                  &lt;/p&gt;
                &lt;/div&gt;

                &lt;div className=&quot;text-center p-6 border border-gray-200 rounded-xl&quot;&gt;
                  &lt;div className=&quot;bg-green-100 p-3 rounded-lg w-fit mx-auto mb-4&quot;&gt;
                    &lt;MessageSquare className=&quot;w-6 h-6 text-green-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Request Features&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                    Submit new feature ideas and discuss them with the community
                  &lt;/p&gt;
                &lt;/div&gt;

                &lt;div className=&quot;text-center p-6 border border-gray-200 rounded-xl&quot;&gt;
                  &lt;div className=&quot;bg-purple-100 p-3 rounded-lg w-fit mx-auto mb-4&quot;&gt;
                    &lt;Code className=&quot;w-6 h-6 text-purple-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Contribute&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                    Join our open-source community and contribute to development
                  &lt;/p&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
                  &lt;button className=&quot;px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all flex items-center gap-2 justify-center&quot;&gt;
                    &lt;MessageSquare className=&quot;w-5 h-5&quot; /&gt;
                    Request Feature
                  &lt;/button&gt;
                  &lt;button className=&quot;px-8 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 justify-center&quot;&gt;
                    &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
                    Join Discussion
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Quarterly Highlights */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Recent Highlights&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Major features and improvements delivered in recent quarters
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
            {roadmapItems['2024']
              .filter((item) =&gt; item.status === 'completed')
              .slice(0, 3)
              .map((item) =&gt; {
                const categoryIcon = {
                  'ai-ml': Brain,
                  enterprise: Shield,
                  platform: Settings,
                  developer: Code,
                  integrations: Webhook,
                };
                const Icon = categoryIcon[item.category as keyof typeof categoryIcon] || Settings;

                return (
                  &lt;div
                    key={item.id}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Register.tsx (Line 157:10 - Line 459:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 161:10 - Line 463:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn483" onclick="toggleCodeBlock('cloneGroup483', 'expandBtn483', 'collapseBtn483')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn483" onclick="toggleCodeBlock('cloneGroup483', 'expandBtn483', 'collapseBtn483')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup483"><code class="language-javascript text-sm text-gray-800">={`transition-all duration-1000 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Logo */}
            &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 mb-8 group&quot;&gt;
              &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
              &lt;/div&gt;
              &lt;span className=&quot;text-3xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
            &lt;/Link&gt;

            &lt;h1 className=&quot;text-5xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Join the{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                enterprise
              &lt;/span&gt;{' '}
              automation revolution
            &lt;/h1&gt;

            &lt;p className=&quot;text-xl text-slate-200 mb-8 leading-relaxed max-w-lg&quot;&gt;
              Start building powerful workflows with enterprise-grade security, AI intelligence, and
              complete data sovereignty. Join thousands of organizations already automating with
              Reporunner.
            &lt;/p&gt;

            {/* Benefits */}
            &lt;div className=&quot;space-y-4&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-green-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;CheckCircle className=&quot;w-5 h-5 text-green-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Free forever plan available&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-blue-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Shield className=&quot;w-5 h-5 text-blue-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Enterprise security from day one&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-purple-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Zap className=&quot;w-5 h-5 text-purple-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Setup in under 5 minutes&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Side - Registration Form */}
        &lt;div className=&quot;w-full lg:w-1/2 flex items-center justify-center px-6 py-12&quot;&gt;
          &lt;div
            className={`w-full max-w-md transition-all duration-1000 delay-300 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Mobile Logo */}
            &lt;div className=&quot;lg:hidden text-center mb-8&quot;&gt;
              &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 group&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                  &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;span className=&quot;text-2xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
              &lt;/Link&gt;
            &lt;/div&gt;

            {/* Form Card */}
            &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-8 shadow-2xl&quot;&gt;
              &lt;div className=&quot;text-center mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-white mb-2&quot;&gt;Create your account&lt;/h2&gt;
                &lt;p className=&quot;text-slate-300&quot;&gt;Start automating your workflows today&lt;/p&gt;
              &lt;/div&gt;

              &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
                {/* Global Error */}
                {error &amp;&amp; (
                  &lt;div className=&quot;rounded-lg bg-red-500/20 border border-red-500/30 p-4&quot;&gt;
                    &lt;div className=&quot;text-sm text-red-200&quot;&gt;{error}&lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Name Fields */}
                &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;firstName&quot;
                      className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                    &gt;
                      First name
                    &lt;/label&gt;
                    &lt;div className=&quot;relative&quot;&gt;
                      &lt;User className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                      &lt;input
                        id=&quot;firstName&quot;
                        name=&quot;firstName&quot;
                        type=&quot;text&quot;
                        autoComplete=&quot;given-name&quot;
                        required
                        value={formData.firstName}
                        onChange={handleChange}
                        className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                          formErrors.firstName ? 'border-red-500/50' : 'border-white/20'
                        }`}
                        placeholder=&quot;First name&quot;
                      /&gt;
                    &lt;/div&gt;
                    {formErrors.firstName &amp;&amp; (
                      &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.firstName}&lt;/p&gt;
                    )}
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;lastName&quot;
                      className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                    &gt;
                      Last name
                    &lt;/label&gt;
                    &lt;div className=&quot;relative&quot;&gt;
                      &lt;User className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                      &lt;input
                        id=&quot;lastName&quot;
                        name=&quot;lastName&quot;
                        type=&quot;text&quot;
                        autoComplete=&quot;family-name&quot;
                        required
                        value={formData.lastName}
                        onChange={handleChange}
                        className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                          formErrors.lastName ? 'border-red-500/50' : 'border-white/20'
                        }`}
                        placeholder=&quot;Last name&quot;
                      /&gt;
                    &lt;/div&gt;
                    {formErrors.lastName &amp;&amp; (
                      &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.lastName}&lt;/p&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Email Field */}
                &lt;div&gt;
                  &lt;label htmlFor=&quot;email&quot; className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;&gt;
                    Email address
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Mail className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;email&quot;
                      name=&quot;email&quot;
                      type=&quot;email&quot;
                      autoComplete=&quot;email&quot;
                      required
                      value={formData.email}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.email ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your email&quot;
                    /&gt;
                  &lt;/div&gt;
                  {formErrors.email &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.email}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;password&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;password&quot;
                      name=&quot;password&quot;
                      type={showPassword ? 'text' : 'password'}
                      autoComplete=&quot;new-password&quot;
                      required
                      value={formData.password}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-12 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.password ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Create a password&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowPassword(!showPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showPassword ? &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt; : &lt;Eye className=&quot;w-5 h-5&quot; /&gt;}
                    &lt;/button&gt;
                  &lt;/div&gt;

                  {/* Password Strength Indicator */}
                  {formData.password &amp;&amp; (
                    &lt;div className=&quot;mt-2&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                        &lt;div className=&quot;flex-1 bg-white/20 rounded-full h-2&quot;&gt;
                          &lt;div
                            className={`h-full rounded-full transition-all duration-300 ${
                              passwordStrength.score &lt;= 2
                                ? 'bg-red-500'
                                : passwordStrength.score &lt;= 3
                                  ? 'bg-yellow-500'
                                  : passwordStrength.score &lt;= 4
                                    ? 'bg-blue-500'
                                    : 'bg-green-500'
                            }`}
                            style={{
                              width: `${(passwordStrength.score / 5) * 100}%`,
                            }}
                          /&gt;
                        &lt;/div&gt;
                        &lt;span className={`text-sm ${passwordStrength.color}`}&gt;
                          {passwordStrength.text}
                        &lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {formErrors.password &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.password}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Confirm Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;confirmPassword&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Confirm password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;confirmPassword&quot;
                      name=&quot;confirmPassword&quot;
                      type={showConfirmPassword ? 'text' : 'password'}
                      autoComplete=&quot;new-password&quot;
                      required
                      value={formData.confirmPassword}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-12 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.confirmPassword ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Confirm your password&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowConfirmPassword(!showConfirmPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showConfirmPassword ? (
                        &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt;
                      ) : (
                        &lt;Eye className=&quot;w-5 h-5&quot; /&gt;
                      )}
                    &lt;/button&gt;
                  &lt;/div&gt;
                  {formErrors.confirmPassword &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.confirmPassword}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Terms Acceptance */}
                &lt;div&gt;
                  &lt;label className=&quot;flex items-start gap-3&quot;&gt;
                    &lt;input
                      type=&quot;checkbox&quot;
                      name=&quot;acceptTerms&quot;
                      checked={formData.acceptTerms}
                      onChange={handleChange}
                      className=&quot;w-4 h-4 mt-1 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500 focus:ring-2&quot;
                    /&gt;
                    &lt;span className=&quot;text-sm text-slate-300 leading-relaxed&quot;&gt;
                      I agree to the{' '}
                      &lt;Link
                        to=&quot;/terms&quot;
                        className=&quot;text-blue-400 hover:text-blue-300 transition-colors underline&quot;
                      &gt;
                        Terms of Service
                      &lt;/Link&gt;{' '}
                      and{' '}
                      &lt;Link
                        to=&quot;/privacy&quot;
                        className=&quot;text-blue-400 hover:text-blue-300 transition-colors underline&quot;
                      &gt;
                        Privacy Policy
                      &lt;/Link&gt;
                    &lt;/span&gt;
                  &lt;/label&gt;
                  {formErrors.acceptTerms &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.acceptTerms}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Submit Button */}
                &lt;button
                  type=&quot;submit&quot;
                  disabled={isLoading}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/PricingPage.tsx (Line 383:10 - Line 652:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/pricingpage/PricingPage.tsx (Line 384:10 - Line 653:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn487" onclick="toggleCodeBlock('cloneGroup487', 'expandBtn487', 'collapseBtn487')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn487" onclick="toggleCodeBlock('cloneGroup487', 'expandBtn487', 'collapseBtn487')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup487"><code class="language-javascript text-sm text-gray-800">={`text-lg ${billingCycle === 'monthly' ? 'text-white font-semibold' : 'text-slate-300'}`}
              &gt;
                Monthly
              &lt;/span&gt;
              &lt;button
                onClick={() =&gt; setBillingCycle(billingCycle === 'monthly' ? 'yearly' : 'monthly')}
                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                  billingCycle === 'yearly' ? 'bg-blue-600' : 'bg-gray-600'
                }`}
              &gt;
                &lt;span
                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                    billingCycle === 'yearly' ? 'translate-x-6' : 'translate-x-1'
                  }`}
                /&gt;
              &lt;/button&gt;
              &lt;span
                className={`text-lg ${billingCycle === 'yearly' ? 'text-white font-semibold' : 'text-slate-300'}`}
              &gt;
                Yearly
              &lt;/span&gt;
              {billingCycle === 'yearly' &amp;&amp; (
                &lt;span className=&quot;ml-2 px-3 py-1 bg-green-500 text-white text-sm font-semibold rounded-full&quot;&gt;
                  Save 20%
                &lt;/span&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Pricing Cards */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto&quot;&gt;
            {plans.map((plan, index) =&gt; (
              &lt;div
                key={index}
                className={`relative rounded-2xl p-8 ${
                  plan.popular
                    ? 'bg-gradient-to-b from-blue-50 to-purple-50 border-2 border-blue-200 shadow-xl scale-105'
                    : 'bg-white border border-gray-200 shadow-lg'
                } hover:shadow-xl transition-all duration-300`}
              &gt;
                {plan.popular &amp;&amp; (
                  &lt;div className=&quot;absolute -top-4 left-1/2 transform -translate-x-1/2&quot;&gt;
                    &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold flex items-center gap-2&quot;&gt;
                      &lt;Star className=&quot;w-4 h-4 fill-current&quot; /&gt;
                      Most Popular
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;{plan.description}&lt;/p&gt;

                  &lt;div className=&quot;mb-6&quot;&gt;
                    {typeof plan.price[billingCycle] === 'number' ? (
                      &lt;&gt;
                        &lt;div className=&quot;text-5xl font-bold text-gray-900 mb-2&quot;&gt;
                          ${plan.price[billingCycle]}
                          {plan.price[billingCycle] &gt; 0 &amp;&amp; (
                            &lt;span className=&quot;text-lg font-medium text-gray-600&quot;&gt;
                              /{billingCycle === 'monthly' ? 'mo' : 'yr'}
                            &lt;/span&gt;
                          )}
                        &lt;/div&gt;
                        {billingCycle === 'yearly' &amp;&amp;
                          typeof plan.price.monthly === 'number' &amp;&amp;
                          plan.price.monthly &gt; 0 &amp;&amp; (
                            &lt;div className=&quot;text-sm text-gray-500&quot;&gt;
                              ${plan.price.monthly}/mo billed monthly
                            &lt;/div&gt;
                          )}
                      &lt;/&gt;
                    ) : (
                      &lt;div className=&quot;text-4xl font-bold text-gray-900 mb-2&quot;&gt;
                        {plan.price[billingCycle]}
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;

                  &lt;button
                    className={`w-full py-3 px-6 font-semibold rounded-lg transition-colors ${
                      plan.ctaStyle === 'primary'
                        ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700'
                        : 'bg-gray-900 text-white hover:bg-gray-800'
                    }`}
                  &gt;
                    {plan.cta}
                  &lt;/button&gt;
                &lt;/div&gt;

                {/* Features */}
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div&gt;
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Included:&lt;/h4&gt;
                    &lt;ul className=&quot;space-y-2&quot;&gt;
                      {plan.features.core.map((feature, idx) =&gt; (
                        &lt;li key={idx} className=&quot;flex items-center gap-3&quot;&gt;
                          &lt;Check className=&quot;w-5 h-5 text-green-500 flex-shrink-0&quot; /&gt;
                          &lt;span className=&quot;text-gray-700&quot;&gt;{feature}&lt;/span&gt;
                        &lt;/li&gt;
                      ))}
                    &lt;/ul&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Limits:&lt;/h4&gt;
                    &lt;ul className=&quot;space-y-2&quot;&gt;
                      {plan.features.limits.map((limit, idx) =&gt; (
                        &lt;li key={idx} className=&quot;flex items-center gap-3&quot;&gt;
                          &lt;div className=&quot;w-5 h-5 flex-shrink-0 flex items-center justify-center&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 bg-blue-500 rounded-full&quot; /&gt;
                          &lt;/div&gt;
                          &lt;span className=&quot;text-gray-700&quot;&gt;{limit}&lt;/span&gt;
                        &lt;/li&gt;
                      ))}
                    &lt;/ul&gt;
                  &lt;/div&gt;

                  {plan.features.notIncluded.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Not included:&lt;/h4&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {plan.features.notIncluded.map((feature, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;X className=&quot;w-5 h-5 text-gray-400 flex-shrink-0&quot; /&gt;
                            &lt;span className=&quot;text-gray-500&quot;&gt;{feature}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Add-ons */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Add-ons &amp; Services&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Extend your Reporunner experience with additional services
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto&quot;&gt;
            {addOns.map((addon, index) =&gt; {
              const Icon = addon.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                    &lt;div className=&quot;bg-blue-100 p-3 rounded-lg&quot;&gt;
                      &lt;Icon className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;h3 className=&quot;font-semibold text-lg text-gray-900 mb-2&quot;&gt;{addon.name}&lt;/h3&gt;
                      &lt;p className=&quot;text-gray-600 mb-3&quot;&gt;{addon.description}&lt;/p&gt;
                      &lt;div className=&quot;font-semibold text-blue-600&quot;&gt;{addon.price}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Feature Comparison */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Detailed Comparison&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Compare all features across our plans&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;overflow-x-auto&quot;&gt;
              &lt;table className=&quot;w-full bg-white rounded-xl shadow-xl&quot;&gt;
                &lt;thead&gt;
                  &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                    &lt;th className=&quot;text-left p-6 font-semibold text-gray-900 min-w-[300px]&quot;&gt;
                      Features
                    &lt;/th&gt;
                    &lt;th className=&quot;text-center p-6 font-semibold text-gray-900 min-w-[150px]&quot;&gt;
                      Community
                    &lt;/th&gt;
                    &lt;th className=&quot;text-center p-6 font-semibold text-blue-900 min-w-[150px] bg-blue-50&quot;&gt;
                      Professional
                    &lt;/th&gt;
                    &lt;th className=&quot;text-center p-6 font-semibold text-gray-900 min-w-[150px]&quot;&gt;
                      Enterprise
                    &lt;/th&gt;
                  &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                  {comparisonFeatures.map((category, categoryIndex) =&gt; (
                    &lt;React.Fragment key={categoryIndex}&gt;
                      &lt;tr className=&quot;bg-gray-50&quot;&gt;
                        &lt;td
                          className=&quot;p-6 font-semibold text-gray-900 border-b border-gray-200&quot;
                          colSpan={4}
                        &gt;
                          {category.category}
                        &lt;/td&gt;
                      &lt;/tr&gt;
                      {category.features.map((feature, featureIndex) =&gt; (
                        &lt;tr
                          key={featureIndex}
                          className=&quot;border-b border-gray-100 hover:bg-gray-50&quot;
                        &gt;
                          &lt;td className=&quot;p-4 text-gray-700&quot;&gt;{feature.name}&lt;/td&gt;
                          &lt;td className=&quot;p-4 text-center&quot;&gt;
                            {feature.community ? (
                              &lt;Check className=&quot;w-5 h-5 text-green-600 mx-auto&quot; /&gt;
                            ) : (
                              &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
                            )}
                          &lt;/td&gt;
                          &lt;td className=&quot;p-4 text-center bg-blue-50&quot;&gt;
                            {feature.professional ? (
                              &lt;Check className=&quot;w-5 h-5 text-green-600 mx-auto&quot; /&gt;
                            ) : (
                              &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
                            )}
                          &lt;/td&gt;
                          &lt;td className=&quot;p-4 text-center&quot;&gt;
                            {feature.enterprise ? (
                              &lt;Check className=&quot;w-5 h-5 text-green-600 mx-auto&quot; /&gt;
                            ) : (
                              &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
                            )}
                          &lt;/td&gt;
                        &lt;/tr&gt;
                      ))}
                    &lt;/React.Fragment&gt;
                  ))}
                &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* FAQ */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-3xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Frequently Asked Questions&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Everything you need to know about our pricing&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;space-y-4&quot;&gt;
              {faqs.map((faq, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-lg overflow-hidden&quot;
                &gt;
                  &lt;button
                    onClick={() =&gt; setExpandedFaq(expandedFaq === index ? null : index)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Login.tsx (Line 103:10 - Line 265:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 107:10 - Line 269:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn489" onclick="toggleCodeBlock('cloneGroup489', 'expandBtn489', 'collapseBtn489')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn489" onclick="toggleCodeBlock('cloneGroup489', 'expandBtn489', 'collapseBtn489')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup489"><code class="language-javascript text-sm text-gray-800">={`transition-all duration-1000 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Logo */}
            &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 mb-8 group&quot;&gt;
              &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
              &lt;/div&gt;
              &lt;span className=&quot;text-3xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
            &lt;/Link&gt;

            &lt;h1 className=&quot;text-5xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Welcome back to the{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                future
              &lt;/span&gt;{' '}
              of automation
            &lt;/h1&gt;

            &lt;p className=&quot;text-xl text-slate-200 mb-8 leading-relaxed max-w-lg&quot;&gt;
              Continue building powerful workflows with enterprise-grade security, AI intelligence,
              and complete data sovereignty.
            &lt;/p&gt;

            {/* Feature highlights */}
            &lt;div className=&quot;space-y-4&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-green-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Shield className=&quot;w-5 h-5 text-green-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Enterprise-grade security&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-blue-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Zap className=&quot;w-5 h-5 text-blue-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;AI-powered workflows&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-purple-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Crown className=&quot;w-5 h-5 text-purple-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Complete data sovereignty&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Side - Login Form */}
        &lt;div className=&quot;w-full lg:w-1/2 flex items-center justify-center px-6 py-12&quot;&gt;
          &lt;div
            className={`w-full max-w-md transition-all duration-1000 delay-300 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Mobile Logo */}
            &lt;div className=&quot;lg:hidden text-center mb-8&quot;&gt;
              &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 group&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                  &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;span className=&quot;text-2xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
              &lt;/Link&gt;
            &lt;/div&gt;

            {/* Form Card */}
            &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-8 shadow-2xl&quot;&gt;
              &lt;div className=&quot;text-center mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-white mb-2&quot;&gt;Welcome back&lt;/h2&gt;
                &lt;p className=&quot;text-slate-300&quot;&gt;Sign in to your workflow automation account&lt;/p&gt;
              &lt;/div&gt;

              &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
                {/* Global Error */}
                {error &amp;&amp; (
                  &lt;div className=&quot;rounded-lg bg-red-500/20 border border-red-500/30 p-4&quot;&gt;
                    &lt;div className=&quot;text-sm text-red-200&quot;&gt;{error}&lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Email Field */}
                &lt;div&gt;
                  &lt;label htmlFor=&quot;email&quot; className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;&gt;
                    Email address
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Mail className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;email&quot;
                      name=&quot;email&quot;
                      type=&quot;email&quot;
                      autoComplete=&quot;email&quot;
                      required
                      value={formData.email}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.email ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your email&quot;
                    /&gt;
                  &lt;/div&gt;
                  {formErrors.email &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.email}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;password&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;password&quot;
                      name=&quot;password&quot;
                      type={showPassword ? 'text' : 'password'}
                      autoComplete=&quot;current-password&quot;
                      required
                      value={formData.password}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-12 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.password ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your password&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowPassword(!showPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showPassword ? &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt; : &lt;Eye className=&quot;w-5 h-5&quot; /&gt;}
                    &lt;/button&gt;
                  &lt;/div&gt;
                  {formErrors.password &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.password}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Remember Me &amp; Forgot Password */}
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;label className=&quot;flex items-center&quot;&gt;
                    &lt;input
                      type=&quot;checkbox&quot;
                      name=&quot;rememberMe&quot;
                      checked={formData.rememberMe}
                      onChange={handleChange}
                      className=&quot;w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500 focus:ring-2&quot;
                    /&gt;
                    &lt;span className=&quot;ml-2 text-sm text-slate-300&quot;&gt;Remember me&lt;/span&gt;
                  &lt;/label&gt;
                  &lt;Link
                    to=&quot;/forgot-password&quot;
                    className=&quot;text-sm text-blue-400 hover:text-blue-300 transition-colors&quot;
                  &gt;
                    Forgot password?
                  &lt;/Link&gt;
                &lt;/div&gt;

                {/* Submit Button */}
                &lt;button
                  type=&quot;submit&quot;
                  disabled={isLoading}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/IntegrationsPage.tsx (Line 333:4 - Line 511:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/integrationspage/IntegrationsPage.tsx (Line 335:4 - Line 513:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn492" onclick="toggleCodeBlock('cloneGroup492', 'expandBtn492', 'collapseBtn492')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn492" onclick="toggleCodeBlock('cloneGroup492', 'expandBtn492', 'collapseBtn492')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup492"><code class="language-javascript text-sm text-gray-800">={integration.id}
                className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-xl transition-all duration-300 hover:-translate-y-1&quot;
              &gt;
                &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
                  &lt;div className=&quot;text-3xl&quot;&gt;{integration.logo}&lt;/div&gt;
                  &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Star className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                    &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;{integration.rating}&lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;h3 className=&quot;font-semibold text-lg text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                  {integration.name}
                &lt;/h3&gt;

                &lt;p className=&quot;text-gray-600 text-sm mb-4 line-clamp-2&quot;&gt;{integration.description}&lt;/p&gt;

                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;span
                    className={`px-2 py-1 text-xs font-medium rounded-full ${
                      integration.status === 'stable'
                        ? 'bg-green-100 text-green-700'
                        : 'bg-orange-100 text-orange-700'
                    }`}
                  &gt;
                    {integration.status}
                  &lt;/span&gt;

                  &lt;button className=&quot;text-blue-600 font-medium text-sm hover:text-blue-700 transition-colors&quot;&gt;
                    Learn more
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* All Integrations */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;
            {/* Sidebar */}
            &lt;div className=&quot;lg:w-1/4&quot;&gt;
              &lt;div className=&quot;bg-white rounded-xl shadow-lg p-6 sticky top-6&quot;&gt;
                {/* Search */}
                &lt;div className=&quot;mb-6&quot;&gt;
                  &lt;label className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;&gt;
                    Search Integrations
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Search className=&quot;w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400&quot; /&gt;
                    &lt;input
                      type=&quot;text&quot;
                      value={searchTerm}
                      onChange={(e) =&gt; setSearchTerm(e.target.value)}
                      placeholder=&quot;Search integrations...&quot;
                      className=&quot;w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Categories */}
                &lt;div&gt;
                  &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4&quot;&gt;Categories&lt;/h3&gt;
                  &lt;div className=&quot;space-y-2&quot;&gt;
                    {categories.map((category) =&gt; {
                      const Icon = category.icon;
                      return (
                        &lt;button
                          key={category.id}
                          onClick={() =&gt; setSelectedCategory(category.id)}
                          className={`w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors ${
                            selectedCategory === category.id
                              ? 'bg-blue-50 text-blue-700 border border-blue-200'
                              : 'text-gray-700 hover:bg-gray-50'
                          }`}
                        &gt;
                          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                          &lt;/div&gt;
                          &lt;span
                            className={`text-xs px-2 py-1 rounded-full ${
                              selectedCategory === category.id
                                ? 'bg-blue-100 text-blue-600'
                                : 'bg-gray-100 text-gray-500'
                            }`}
                          &gt;
                            {category.count}
                          &lt;/span&gt;
                        &lt;/button&gt;
                      );
                    })}
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Integration Grid */}
            &lt;div className=&quot;lg:w-3/4&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between mb-8&quot;&gt;
                &lt;div&gt;
                  &lt;h2 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;
                    {selectedCategory === 'all'
                      ? 'All Integrations'
                      : categories.find((c) =&gt; c.id === selectedCategory)?.name}
                  &lt;/h2&gt;
                  &lt;p className=&quot;text-gray-600&quot;&gt;
                    {filteredIntegrations.length} integration
                    {filteredIntegrations.length !== 1 ? 's' : ''} found
                  &lt;/p&gt;
                &lt;/div&gt;

                &lt;button
                  onClick={() =&gt; setShowFilters(!showFilters)}
                  className=&quot;flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors&quot;
                &gt;
                  &lt;Filter className=&quot;w-4 h-4&quot; /&gt;
                  Filters
                  &lt;ChevronDown
                    className={`w-4 h-4 transition-transform ${showFilters ? 'rotate-180' : ''}`}
                  /&gt;
                &lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                {filteredIntegrations.map((integration) =&gt; (
                  &lt;div
                    key={integration.id}
                    className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                  &gt;
                    &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                        &lt;div className=&quot;text-3xl&quot;&gt;{integration.logo}&lt;/div&gt;
                        &lt;div&gt;
                          &lt;h3 className=&quot;font-semibold text-lg text-gray-900 group-hover:text-blue-900 transition-colors&quot;&gt;
                            {integration.name}
                          &lt;/h3&gt;
                          &lt;div className=&quot;flex items-center gap-2 mt-1&quot;&gt;
                            &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                              &lt;Star className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                              &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{integration.rating}&lt;/span&gt;
                            &lt;/div&gt;
                            &lt;span className=&quot;text-gray-400&quot;&gt;•&lt;/span&gt;
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;
                              {integration.reviews} reviews
                            &lt;/span&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                        {integration.premium &amp;&amp; (
                          &lt;span className=&quot;px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full&quot;&gt;
                            Premium
                          &lt;/span&gt;
                        )}
                        &lt;span
                          className={`px-2 py-1 text-xs font-medium rounded-full ${
                            integration.status === 'stable'
                              ? 'bg-green-100 text-green-700'
                              : 'bg-orange-100 text-orange-700'
                          }`}
                        &gt;
                          {integration.status}
                        &lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;p className=&quot;text-gray-600 mb-4 line-clamp-2&quot;&gt;{integration.description}&lt;/p&gt;

                    {/* Node Types */}
                    &lt;div className=&quot;mb-4&quot;&gt;
                      &lt;div className=&quot;text-sm font-medium text-gray-700 mb-2&quot;&gt;Available Nodes:&lt;/div&gt;
                      &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
                        {integration.nodes.slice(0, 3).map((node, index) =&gt; (
                          &lt;span
                            key={index}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Integrations.tsx (Line 118:6 - Line 213:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/integrations/Integrations.tsx (Line 121:6 - Line 216:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn494" onclick="toggleCodeBlock('cloneGroup494', 'expandBtn494', 'collapseBtn494')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn494" onclick="toggleCodeBlock('cloneGroup494', 'expandBtn494', 'collapseBtn494')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup494"><code class="language-javascript text-sm text-gray-800">={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                className=&quot;border border-gray-300 rounded-lg px-4 py-4 mb-4 w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex flex-wrap items-center space-x-2 space-y-2 justify-between&quot;&gt;
              {categories.map((category) =&gt; (
                &lt;button
                  key={category}
                  onClick={() =&gt; {
                    setSelectedCategory(category || '');
                    setSearchTerm(''); // Clear search when switching categories
                  }}
                  className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                    selectedCategory === category
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                  }`}
                &gt;
                  {category}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Integrations Grid */}
      &lt;div className=&quot;bg-white rounded-lg shadow&quot;&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-gray-600&quot;&gt;Loading integrations...&lt;/p&gt;
            &lt;/div&gt;
          ) : (
            &lt;div
              className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;
              key={`${selectedCategory}-${searchTerm}`}
            &gt;
              {filteredIntegrations.map((integration) =&gt; (
                &lt;div
                  key={`${selectedCategory}-${integration.id}`}
                  className=&quot;border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow&quot;
                &gt;
                  &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                    &lt;div className=&quot;flex items-center&quot;&gt;
                      &lt;div className=&quot;text-3xl mr-3&quot;&gt;{integration.icon}&lt;/div&gt;
                      &lt;div&gt;
                        &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{integration.name}&lt;/h3&gt;
                        &lt;p className=&quot;text-sm text-gray-500&quot;&gt;{integration.category}&lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                    {integration.isConnected &amp;&amp; (
                      &lt;span className=&quot;bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full&quot;&gt;
                        Connected
                      &lt;/span&gt;
                    )}
                  &lt;/div&gt;

                  &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;{integration.description}&lt;/p&gt;

                  &lt;div className=&quot;mb-4&quot;&gt;
                    &lt;p className=&quot;text-xs text-gray-500 mb-2&quot;&gt;
                      {integration.nodeTypes.length} node type
                      {integration.nodeTypes.length !== 1 ? 's' : ''} available
                    &lt;/p&gt;
                    &lt;div className=&quot;flex flex-wrap gap-1&quot;&gt;
                      {integration.nodeTypes.slice(0, 3).map((nodeType: any) =&gt; (
                        &lt;span
                          key={nodeType.id}
                          className=&quot;bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded&quot;
                        &gt;
                          {nodeType.name}
                        &lt;/span&gt;
                      ))}
                      {integration.nodeTypes.length &gt; 3 &amp;&amp; (
                        &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                          +{integration.nodeTypes.length - 3} more
                        &lt;/span&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;flex justify-end&quot;&gt;
                    {integration.isConnected ? (
                      &lt;button
                        onClick={() =&gt; handleDisconnect(integration.id)}
                        className=&quot;bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm&quot;
                      &gt;
                        Disconnect
                      &lt;/button&gt;
                    ) : (
                      &lt;button
                        onClick={() =&gt; handleConnect(integration)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Features.tsx (Line 344:4 - Line 496:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/features/Features.tsx (Line 345:4 - Line 497:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn496" onclick="toggleCodeBlock('cloneGroup496', 'expandBtn496', 'collapseBtn496')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn496" onclick="toggleCodeBlock('cloneGroup496', 'expandBtn496', 'collapseBtn496')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup496"><code class="language-javascript text-sm text-gray-800">={category.id}
                  onClick={() =&gt; setActiveCategory(category.id)}
                  className={`group p-6 rounded-xl transition-all duration-300 ${
                    activeCategory === category.id
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white scale-105 shadow-xl'
                      : 'bg-white border border-gray-200 text-gray-700 hover:border-blue-300 hover:shadow-lg'
                  }`}
                &gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;Icon
                      className={`w-8 h-8 mx-auto mb-3 ${
                        activeCategory === category.id
                          ? 'text-white'
                          : 'text-blue-600 group-hover:text-blue-700'
                      }`}
                    /&gt;
                    &lt;h3 className=&quot;font-semibold text-lg mb-2&quot;&gt;{category.name}&lt;/h3&gt;
                    &lt;p
                      className={`text-sm ${
                        activeCategory === category.id ? 'text-blue-100' : 'text-gray-500'
                      }`}
                    &gt;
                      {category.description}
                    &lt;/p&gt;
                  &lt;/div&gt;
                &lt;/button&gt;
              );
            })}
          &lt;/div&gt;

          {/* Feature Grid */}
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
            {features[activeCategory as keyof typeof features]?.map((feature, index) =&gt; {
              const Icon = feature.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-xl transition-all duration-300 hover:-translate-y-1&quot;
                &gt;
                  &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                    &lt;Icon className=&quot;w-8 h-8 text-blue-600 group-hover:text-blue-700 transition-colors&quot; /&gt;
                    &lt;div className=&quot;flex gap-2&quot;&gt;
                      {feature.demo &amp;&amp; (
                        &lt;span className=&quot;px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full&quot;&gt;
                          Demo
                        &lt;/span&gt;
                      )}
                      {feature.enterprise &amp;&amp; (
                        &lt;span className=&quot;px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full&quot;&gt;
                          Enterprise
                        &lt;/span&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;

                  &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-3 group-hover:text-blue-900 transition-colors&quot;&gt;
                    {feature.name}
                  &lt;/h3&gt;

                  &lt;p className=&quot;text-gray-600 leading-relaxed mb-4&quot;&gt;{feature.description}&lt;/p&gt;

                  &lt;div className=&quot;flex items-center text-blue-600 font-medium group-hover:text-blue-700 transition-colors&quot;&gt;
                    &lt;span className=&quot;text-sm&quot;&gt;Learn more&lt;/span&gt;
                    &lt;ChevronRight className=&quot;w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform&quot; /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Comparison Section */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-16&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Why Choose Reporunner?&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              See how Reporunner compares to other workflow automation platforms
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;overflow-x-auto&quot;&gt;
            &lt;table className=&quot;w-full bg-white rounded-xl shadow-xl&quot;&gt;
              &lt;thead&gt;
                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                  &lt;th className=&quot;text-left p-6 font-semibold text-gray-900&quot;&gt;Feature&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-blue-900&quot;&gt;Reporunner&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-gray-700&quot;&gt;n8n&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-gray-700&quot;&gt;Zapier&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-gray-700&quot;&gt;Make&lt;/th&gt;
                &lt;/tr&gt;
              &lt;/thead&gt;
              &lt;tbody&gt;
                {[
                  {
                    feature: 'AI-Powered Automation',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Self-Hosted',
                    reporunner: true,
                    n8n: true,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Vector Database',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Enterprise SSO',
                    reporunner: true,
                    n8n: false,
                    zapier: true,
                    make: true,
                  },
                  {
                    feature: 'Custom Nodes SDK',
                    reporunner: true,
                    n8n: true,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Real-time Collaboration',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: true,
                  },
                  {
                    feature: 'Multi-Database Support',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Air-Gap Deployment',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                ].map((row, index) =&gt; (
                  &lt;tr key={index}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Executions.tsx (Line 142:4 - Line 257:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/executions/Executions.tsx (Line 145:4 - Line 260:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn498" onclick="toggleCodeBlock('cloneGroup498', 'expandBtn498', 'collapseBtn498')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn498" onclick="toggleCodeBlock('cloneGroup498', 'expandBtn498', 'collapseBtn498')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup498"><code class="language-javascript text-sm text-gray-800">={stat.name}
            className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;
          &gt;
            &lt;div className=&quot;flex items-center&quot;&gt;
              &lt;div className=&quot;text-2xl mr-4&quot;&gt;{stat.icon}&lt;/div&gt;
              &lt;div&gt;
                &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;{stat.name}&lt;/p&gt;
                &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{stat.value}&lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;

      {/* Filters */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg mb-6&quot;&gt;
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;flex space-x-4&quot;&gt;
            {[
              { key: 'all', label: 'All' },
              { key: 'pending', label: 'Pending' },
              { key: 'running', label: 'Running' },
              { key: 'success', label: 'Success' },
              { key: 'error', label: 'Failed' },
              { key: 'cancelled', label: 'Cancelled' },
            ].map((filterOption) =&gt; (
              &lt;button
                key={filterOption.key}
                onClick={() =&gt; setFilter(filterOption.key as any)}
                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${
                  filter === filterOption.key
                    ? 'bg-white/20 text-blue-300 backdrop-blur-sm border border-white/30'
                    : 'text-slate-300 hover:bg-white/10 hover:text-white'
                }`}
              &gt;
                {filterOption.label}
              &lt;/button&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Executions List */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading executions...&lt;/p&gt;
            &lt;/div&gt;
          ) : executions.length === 0 ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;p className=&quot;text-slate-300&quot;&gt;No executions found&lt;/p&gt;
            &lt;/div&gt;
          ) : (
            &lt;div className=&quot;space-y-4&quot;&gt;
              {executions.map((execution) =&gt; (
                &lt;div
                  key={execution.id}
                  className=&quot;bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/10 transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                        &lt;h3 className=&quot;font-medium text-white&quot;&gt;
                          Workflow ID: {execution.workflowId}
                        &lt;/h3&gt;
                        &lt;span
                          className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(execution.status)}`}
                        &gt;
                          {execution.status}
                        &lt;/span&gt;
                      &lt;/div&gt;
                      &lt;div className=&quot;mt-2 flex items-center space-x-6 text-sm text-slate-300&quot;&gt;
                        &lt;span&gt;
                          Started:{' '}
                          {execution.startTime
                            ? new Date(execution.startTime).toLocaleString()
                            : 'N/A'}
                        &lt;/span&gt;
                        &lt;span&gt;Duration: {formatDuration(execution)}&lt;/span&gt;
                        &lt;span&gt;Triggered by: {execution.triggerType}&lt;/span&gt;
                      &lt;/div&gt;
                      {execution.nodeExecutions &amp;&amp; execution.nodeExecutions.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;mt-3&quot;&gt;
                          &lt;details className=&quot;group&quot;&gt;
                            &lt;summary className=&quot;cursor-pointer text-sm text-blue-300 hover:text-blue-200 transition-colors&quot;&gt;
                              View Node Results ({execution.nodeExecutions.length} nodes)
                            &lt;/summary&gt;
                            &lt;div className=&quot;mt-2 bg-white/10 backdrop-blur-sm rounded p-3 text-sm border border-white/20&quot;&gt;
                              {execution.nodeExecutions.map((nodeExec, index) =&gt; (
                                &lt;div key={index} className=&quot;text-slate-300 mb-1&quot;&gt;
                                  &lt;span className=&quot;font-medium text-white&quot;&gt;
                                    {nodeExec.nodeName || nodeExec.nodeId}:
                                  &lt;/span&gt;
                                  &lt;span
                                    className={`ml-2 ${nodeExec.status === 'completed' ? 'text-green-300' : nodeExec.status === 'failed' ? 'text-red-300' : 'text-blue-300'}`}
                                  &gt;
                                    {nodeExec.status}
                                  &lt;/span&gt;
                                  {nodeExec.duration &amp;&amp; (
                                    &lt;span className=&quot;ml-2 text-slate-400&quot;&gt;
                                      ({nodeExec.duration}ms)
                                    &lt;/span&gt;
                                  )}
                                &lt;/div&gt;
                              ))}
                            &lt;/div&gt;
                          &lt;/details&gt;
                        &lt;/div&gt;
                      )}
                    &lt;/div&gt;
                    &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                      {(execution.status === 'running' || execution.status === 'pending') &amp;&amp; (
                        &lt;button
                          onClick={() =&gt; handleStopExecution(execution.id)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Enterprise.tsx (Line 280:4 - Line 538:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/enterprise/Enterprise.tsx (Line 283:4 - Line 541:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn500" onclick="toggleCodeBlock('cloneGroup500', 'expandBtn500', 'collapseBtn500')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn500" onclick="toggleCodeBlock('cloneGroup500', 'expandBtn500', 'collapseBtn500')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup500"><code class="language-javascript text-sm text-gray-800">={index}
                            className=&quot;bg-white/10 rounded-lg p-3 text-center text-white&quot;
                          &gt;
                            {company}
                          &lt;/div&gt;
                        )
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;border-t border-white/20 pt-6&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between text-white&quot;&gt;
                      &lt;span&gt;Enterprise Satisfaction&lt;/span&gt;
                      &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                        {[...Array(5)].map((_, i) =&gt; (
                          &lt;Star key={i} className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                        ))}
                        &lt;span className=&quot;ml-2 font-semibold&quot;&gt;4.9/5&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Enterprise Features Tabs */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Enterprise-Grade Capabilities&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Everything your enterprise needs for secure, scalable workflow automation
            &lt;/p&gt;
          &lt;/div&gt;

          {/* Tab Navigation */}
          &lt;div className=&quot;flex justify-center mb-12&quot;&gt;
            &lt;div className=&quot;bg-gray-100 rounded-lg p-1 flex&quot;&gt;
              {[
                { id: 'security', name: 'Security &amp; Compliance', icon: Shield },
                { id: 'deployment', name: 'Deployment &amp; Scale', icon: Cloud },
                {
                  id: 'governance',
                  name: 'Governance &amp; Control',
                  icon: Settings,
                },
              ].map((tab) =&gt; {
                const Icon = tab.icon;
                return (
                  &lt;button
                    key={tab.id}
                    onClick={() =&gt; setActiveTab(tab.id)}
                    className={`flex items-center gap-2 px-6 py-3 rounded-md font-medium transition-colors ${
                      activeTab === tab.id
                        ? 'bg-white text-blue-600 shadow-sm'
                        : 'text-gray-600 hover:text-gray-900'
                    }`}
                  &gt;
                    &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                    {tab.name}
                  &lt;/button&gt;
                );
              })}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Tab Content */}
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            {enterpriseFeatures[activeTab as keyof typeof enterpriseFeatures]?.map(
              (feature, index) =&gt; {
                const Icon = feature.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                  &gt;
                    &lt;div className=&quot;flex items-start gap-4 mb-4&quot;&gt;
                      &lt;div className=&quot;bg-blue-100 p-3 rounded-lg group-hover:bg-blue-600 transition-colors&quot;&gt;
                        &lt;Icon className=&quot;w-6 h-6 text-blue-600 group-hover:text-white transition-colors&quot; /&gt;
                      &lt;/div&gt;
                      &lt;div className=&quot;flex-1&quot;&gt;
                        &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                          {feature.title}
                        &lt;/h3&gt;
                        &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;ml-16&quot;&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {feature.benefits.map((benefit, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;CheckCircle className=&quot;w-4 h-4 text-green-500&quot; /&gt;
                            &lt;span className=&quot;text-gray-700 text-sm&quot;&gt;{benefit}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              }
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Use Cases */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Industry Solutions&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Proven solutions for the most regulated and demanding industries
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            {useCases.map((useCase, index) =&gt; {
              const Icon = useCase.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow&quot;
                &gt;
                  &lt;div className=&quot;flex items-center gap-4 mb-6&quot;&gt;
                    &lt;div className=&quot;bg-blue-100 p-3 rounded-lg&quot;&gt;
                      &lt;Icon className=&quot;w-8 h-8 text-blue-600&quot; /&gt;
                    &lt;/div&gt;
                    &lt;div&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;{useCase.title}&lt;/h3&gt;
                      &lt;p className=&quot;text-gray-600&quot;&gt;{useCase.description}&lt;/p&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;space-y-6&quot;&gt;
                    &lt;div&gt;
                      &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Challenges:&lt;/h4&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {useCase.challenges.map((challenge, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 bg-red-400 rounded-full&quot; /&gt;
                            &lt;span className=&quot;text-gray-700&quot;&gt;{challenge}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Solutions:&lt;/h4&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {useCase.solutions.map((solution, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;CheckCircle className=&quot;w-4 h-4 text-green-500&quot; /&gt;
                            &lt;span className=&quot;text-gray-700&quot;&gt;{solution}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;bg-blue-50 p-4 rounded-lg&quot;&gt;
                      &lt;h4 className=&quot;font-semibold text-blue-900 mb-2&quot;&gt;Results:&lt;/h4&gt;
                      &lt;p className=&quot;text-blue-800&quot;&gt;{useCase.results}&lt;/p&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Testimonials */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;What Enterprise Leaders Say&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Trusted by the world's most demanding organizations
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
            {testimonials.map((testimonial, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow&quot;
              &gt;
                &lt;div className=&quot;flex items-center gap-2 mb-4&quot;&gt;
                  {[...Array(5)].map((_, i) =&gt; (
                    &lt;Star key={i} className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                  ))}
                &lt;/div&gt;

                &lt;blockquote className=&quot;text-gray-700 mb-6 italic&quot;&gt;&quot;{testimonial.quote}&quot;&lt;/blockquote&gt;

                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-3xl&quot;&gt;{testimonial.logo}&lt;/div&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{testimonial.author}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{testimonial.title}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-500 text-sm&quot;&gt;{testimonial.company}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Enterprise Pricing */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Enterprise Pricing&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Flexible pricing that scales with your organization
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto&quot;&gt;
            {Object.entries(pricing).map(([key, plan]) =&gt; (
              &lt;div
                key={key}
                className={`rounded-2xl p-8 ${
                  key === 'growth'
                    ? 'bg-gradient-to-b from-blue-50 to-purple-50 border-2 border-blue-200 shadow-xl scale-105'
                    : 'bg-white border border-gray-200 shadow-lg'
                } hover:shadow-xl transition-all duration-300`}
              &gt;
                {key === 'growth' &amp;&amp; (
                  &lt;div className=&quot;text-center mb-4&quot;&gt;
                    &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold&quot;&gt;
                      Most Popular
                    &lt;/span&gt;
                  &lt;/div&gt;
                )}

                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{plan.description}&lt;/p&gt;

                  &lt;div className=&quot;text-4xl font-bold text-gray-900 mb-2&quot;&gt;{plan.price}&lt;/div&gt;

                  &lt;button
                    className={`w-full py-3 px-6 font-semibold rounded-lg transition-colors ${
                      key === 'growth'
                        ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700'
                        : 'bg-gray-900 text-white hover:bg-gray-800'
                    }`}
                  &gt;
                    {key === 'scale' ? 'Contact Sales' : 'Start Trial'}
                  &lt;/button&gt;
                &lt;/div&gt;

                &lt;ul className=&quot;space-y-3&quot;&gt;
                  {plan.features.map((feature, idx) =&gt; (
                    &lt;li key={idx}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Documentation.tsx (Line 318:6 - Line 552:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/documentation/Documentation.tsx (Line 319:6 - Line 553:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn502" onclick="toggleCodeBlock('cloneGroup502', 'expandBtn502', 'collapseBtn502')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn502" onclick="toggleCodeBlock('cloneGroup502', 'expandBtn502', 'collapseBtn502')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup502"><code class="language-javascript text-sm text-gray-800">={searchQuery}
                  onChange={(e) =&gt; setSearchQuery(e.target.value)}
                  placeholder=&quot;Search documentation...&quot;
                  className=&quot;w-full pl-12 pr-4 py-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Quick Stats */}
            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-2&quot;&gt;50+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Guides&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-green-300 mb-2&quot;&gt;25+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Tutorials&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-purple-300 mb-2&quot;&gt;15+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Video Guides&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-orange-300 mb-2&quot;&gt;100+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Code Examples&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Quick Links */}
      &lt;section className=&quot;py-8 bg-white border-b border-gray-200&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-wrap justify-center gap-4&quot;&gt;
            {quickLinks.map((link, index) =&gt; {
              const Icon = link.icon;
              return (
                &lt;a
                  key={index}
                  href={link.url}
                  className=&quot;flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-700 hover:text-gray-900&quot;
                &gt;
                  &lt;Icon className=&quot;w-4 h-4&quot; /&gt;
                  &lt;span className=&quot;font-medium&quot;&gt;{link.title}&lt;/span&gt;
                  {link.url.startsWith('http') &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;}
                &lt;/a&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Documentation Content */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;
            {/* Sidebar */}
            &lt;div className=&quot;lg:w-1/4&quot;&gt;
              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6 sticky top-6&quot;&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-4&quot;&gt;Categories&lt;/h3&gt;
                &lt;nav className=&quot;space-y-2&quot;&gt;
                  {categories.map((category) =&gt; {
                    const Icon = category.icon;
                    return (
                      &lt;button
                        key={category.id}
                        onClick={() =&gt; setSelectedCategory(category.id)}
                        className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${
                          selectedCategory === category.id
                            ? 'bg-blue-50 text-blue-700 border border-blue-200'
                            : 'text-gray-700 hover:bg-gray-50'
                        }`}
                      &gt;
                        &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                        &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                      &lt;/button&gt;
                    );
                  })}
                &lt;/nav&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Main Content */}
            &lt;div className=&quot;lg:w-3/4&quot;&gt;
              &lt;div className=&quot;mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-gray-900 mb-2&quot;&gt;
                  {categories.find((c) =&gt; c.id === selectedCategory)?.name}
                &lt;/h2&gt;
                &lt;p className=&quot;text-gray-600&quot;&gt;
                  {filteredDocs.length} article
                  {filteredDocs.length !== 1 ? 's' : ''} found
                &lt;/p&gt;
              &lt;/div&gt;

              {/* Documentation Grid */}
              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                {filteredDocs.map((doc, index) =&gt; {
                  const TypeIcon = getTypeIcon(doc.type);
                  return (
                    &lt;div
                      key={index}
                      className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300 cursor-pointer&quot;
                    &gt;
                      &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                          &lt;div className=&quot;bg-blue-100 p-2 rounded-lg group-hover:bg-blue-600 transition-colors&quot;&gt;
                            &lt;TypeIcon className=&quot;w-5 h-5 text-blue-600 group-hover:text-white transition-colors&quot; /&gt;
                          &lt;/div&gt;
                          {doc.popular &amp;&amp; (
                            &lt;div className=&quot;flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium&quot;&gt;
                              &lt;Star className=&quot;w-3 h-3 fill-current&quot; /&gt;
                              Popular
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;
                        &lt;ChevronRight className=&quot;w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors&quot; /&gt;
                      &lt;/div&gt;

                      &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                        {doc.title}
                      &lt;/h3&gt;

                      &lt;p className=&quot;text-gray-600 mb-4 line-clamp-2&quot;&gt;{doc.description}&lt;/p&gt;

                      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-1 text-sm text-gray-500&quot;&gt;
                            &lt;Clock className=&quot;w-4 h-4&quot; /&gt;
                            {doc.readTime}
                          &lt;/div&gt;
                          &lt;span
                            className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(doc.difficulty)}`}
                          &gt;
                            {doc.difficulty}
                          &lt;/span&gt;
                        &lt;/div&gt;
                        &lt;span className=&quot;text-xs text-gray-400&quot;&gt;Updated {doc.lastUpdated}&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  );
                })}
              &lt;/div&gt;

              {filteredDocs.length === 0 &amp;&amp; (
                &lt;div className=&quot;text-center py-12&quot;&gt;
                  &lt;div className=&quot;text-6xl mb-4&quot;&gt;📚&lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-semibold text-gray-900 mb-2&quot;&gt;
                    No documentation found
                  &lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                    Try adjusting your search or browse a different category.
                  &lt;/p&gt;
                  &lt;button
                    onClick={() =&gt; setSearchQuery('')}
                    className=&quot;px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors&quot;
                  &gt;
                    Clear Search
                  &lt;/button&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Featured Tutorials */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Featured Tutorials&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Step-by-step guides to get you started with advanced features
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
            {[
              {
                title: 'Building an AI-Powered Customer Service Bot',
                description: 'Create an intelligent chatbot using AI agents and vector search',
                duration: '45 min',
                level: 'Intermediate',
                thumbnail: '🤖',
                tags: ['AI', 'Customer Service', 'Vector Search'],
              },
              {
                title: 'Enterprise Data Pipeline',
                description:
                  'Build a scalable data processing pipeline with MongoDB and PostgreSQL',
                duration: '60 min',
                level: 'Advanced',
                thumbnail: '🏢',
                tags: ['Enterprise', 'Database', 'Pipeline'],
              },
              {
                title: 'Multi-Cloud Deployment',
                description: 'Deploy Reporunner across AWS, Azure, and GCP with Kubernetes',
                duration: '90 min',
                level: 'Advanced',
                thumbnail: '☁️',
                tags: ['Cloud', 'Kubernetes', 'DevOps'],
              },
            ].map((tutorial, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer group&quot;
              &gt;
                &lt;div className=&quot;text-4xl mb-4&quot;&gt;{tutorial.thumbnail}&lt;/div&gt;

                &lt;h3 className=&quot;font-bold text-lg text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                  {tutorial.title}
                &lt;/h3&gt;

                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{tutorial.description}&lt;/p&gt;

                &lt;div className=&quot;flex flex-wrap gap-2 mb-4&quot;&gt;
                  {tutorial.tags.map((tag, tagIndex) =&gt; (
                    &lt;span
                      key={tagIndex}
                      className=&quot;px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full&quot;
                    &gt;
                      {tag}
                    &lt;/span&gt;
                  ))}
                &lt;/div&gt;

                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                    &lt;span className=&quot;flex items-center gap-1 text-sm text-gray-500&quot;&gt;
                      &lt;Clock className=&quot;w-4 h-4&quot; /&gt;
                      {tutorial.duration}
                    &lt;/span&gt;
                    &lt;span
                      className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(tutorial.level)}`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Dashboard.tsx (Line 149:4 - Line 308:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/dashboard/Dashboard.tsx (Line 154:4 - Line 313:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn504" onclick="toggleCodeBlock('cloneGroup504', 'expandBtn504', 'collapseBtn504')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn504" onclick="toggleCodeBlock('cloneGroup504', 'expandBtn504', 'collapseBtn504')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup504"><code class="language-javascript text-sm text-gray-800">={workflow.id}
        className=&quot;bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/10 transition-all duration-300 mb-4 shadow-lg&quot;
      &gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex-1&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;h3 className=&quot;font-medium text-white&quot;&gt;{workflow.name}&lt;/h3&gt;
              &lt;span
                className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                  workflow.status === 'active' || workflow.isActive
                    ? 'bg-green-500/20 text-green-300 border border-green-500/30'
                    : workflow.status === 'error'
                      ? 'bg-red-500/20 text-red-300 border border-red-500/30'
                      : 'bg-slate-500/20 text-slate-300 border border-slate-500/30'
                }`}
              &gt;
                {workflow.status === 'active' || workflow.isActive
                  ? 'active'
                  : workflow.status || 'inactive'}
              &lt;/span&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-sm text-slate-300 mt-1&quot;&gt;
              {workflow.description || 'No description'}
            &lt;/p&gt;
            &lt;div className=&quot;flex items-center mt-2 space-x-4&quot;&gt;
              &lt;span className=&quot;text-xs text-slate-400&quot;&gt;{workflow.nodes?.length || 0} nodes&lt;/span&gt;
              &lt;span className=&quot;text-xs text-slate-400&quot;&gt;
                Updated{' '}
                {workflow.updatedAt ? new Date(workflow.updatedAt).toLocaleDateString() : 'N/A'}
              &lt;/span&gt;
              {workflow.lastRun &amp;&amp; (
                &lt;span className=&quot;text-xs text-slate-400&quot;&gt;
                  Last run {new Date(workflow.lastRun).toLocaleDateString()}
                &lt;/span&gt;
              )}
              {!workflow.lastRun &amp;&amp; &lt;span className=&quot;text-xs text-slate-400&quot;&gt;Never executed&lt;/span&gt;}
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
            &lt;Link
              to={`/workflow/${workflow.id}`}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 text-sm shadow-lg&quot;
            &gt;
              Edit
            &lt;/Link&gt;
            &lt;button
              onClick={() =&gt; handleDeleteWorkflow(workflow.id, workflow.name)}
              className=&quot;text-slate-400 hover:text-red-300 px-2 py-2 rounded hover:bg-red-500/20 transition-all duration-300 text-sm backdrop-blur-sm&quot;
            &gt;
              🗑️
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [handleDeleteWorkflow]
  );

  const dashboardStats = [
    { name: 'Total Workflows', value: workflows.length, icon: '🔄' },
    {
      name: 'Active Workflows',
      value: workflows.filter((w) =&gt; w.isActive || w.status === 'active').length,
      icon: '✅',
    },
    {
      name: 'Total Executions',
      value: statsLoading ? '...' : (stats?.totalExecutions ?? 0),
      icon: '▶️',
    },
    {
      name: 'Success Rate',
      value: statsLoading
        ? '...'
        : stats?.successRate !== undefined
          ? `${Math.round(stats.successRate)}%`
          : stats?.totalExecutions &amp;&amp; stats.totalExecutions &gt; 0
            ? `${Math.round(((stats.successfulExecutions || 0) / stats.totalExecutions) * 100)}%`
            : 'N/A',
      icon: '📈',
    },
  ];

  return (
    &lt;div className=&quot;p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-8&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-white&quot;&gt;Workflows&lt;/h1&gt;
        &lt;p className=&quot;text-slate-300&quot;&gt;Create and manage your automation workflows&lt;/p&gt;
      &lt;/div&gt;

      {/* Stats */}
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8&quot;&gt;
        {dashboardStats.map((stat) =&gt; (
          &lt;div
            key={stat.name}
            className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;
          &gt;
            &lt;div className=&quot;flex items-center&quot;&gt;
              &lt;div className=&quot;text-2xl mr-4&quot;&gt;{stat.icon}&lt;/div&gt;
              &lt;div&gt;
                &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;{stat.name}&lt;/p&gt;
                &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{stat.value}&lt;/p&gt;
                {statsLoading &amp;&amp; &lt;p className=&quot;text-xs text-slate-400 mt-1&quot;&gt;Loading...&lt;/p&gt;}
                {!statsLoading &amp;&amp;
                  stats &amp;&amp;
                  stat.name === 'Total Executions' &amp;&amp;
                  stats.totalExecutions === 0 &amp;&amp; (
                    &lt;p className=&quot;text-xs text-slate-400 mt-1&quot;&gt;No executions yet&lt;/p&gt;
                  )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;

      {/* Workflows */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
        &lt;div className=&quot;p-6 border-b border-white/20&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-medium text-white&quot;&gt;Your Workflows&lt;/h2&gt;
            &lt;button
              onClick={handleCreateWorkflow}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
            &gt;
              Create New
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading workflows...&lt;/p&gt;
            &lt;/div&gt;
          ) : workflows.length === 0 ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;p className=&quot;text-slate-300 mb-4&quot;&gt;No workflows yet&lt;/p&gt;
              &lt;button
                onClick={handleCreateWorkflow}
                className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
              &gt;
                Create Your First Workflow
              &lt;/button&gt;
            &lt;/div&gt;
          ) : (
            &lt;VirtualizedList
              items={workflows}
              renderItem={renderWorkflowItem}
              height={600} // Fixed height for virtualization
              estimateSize={120} // Estimated height per workflow item
              getItemKey={(workflow) =&gt; workflow.id}
              gap={0}
              className=&quot;workflow-list&quot;
              emptyState={
                &lt;div className=&quot;text-center py-8&quot;&gt;
                  &lt;p className=&quot;text-slate-300 mb-4&quot;&gt;No workflows found&lt;/p&gt;
                  &lt;button
                    onClick={handleCreateWorkflow}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Credentials.tsx (Line 144:6 - Line 406:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/credentials/Credentials.tsx (Line 147:6 - Line 409:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn507" onclick="toggleCodeBlock('cloneGroup507', 'expandBtn507', 'collapseBtn507')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn507" onclick="toggleCodeBlock('cloneGroup507', 'expandBtn507', 'collapseBtn507')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup507"><code class="language-javascript text-sm text-gray-800">={String(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, e.target.value)}
            placeholder={property.placeholder}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          /&gt;
        );

      case 'password':
        return (
          &lt;input
            type=&quot;password&quot;
            value={String(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, e.target.value)}
            placeholder={property.placeholder}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          /&gt;
        );

      case 'number':
        return (
          &lt;input
            type=&quot;number&quot;
            value={Number(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, Number(e.target.value))}
            placeholder={property.placeholder}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          /&gt;
        );

      case 'boolean':
        return (
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;input
              aria-label=&quot;Select an option&quot;
              type=&quot;checkbox&quot;
              checked={Boolean(value)}
              onChange={(e) =&gt; handleFieldChange(property.name, e.target.checked)}
              className=&quot;h-4 w-4 text-blue-400 focus:ring-blue-400 bg-white/10 border-white/30 rounded&quot;
            /&gt;
            &lt;span className=&quot;ml-2 text-sm text-slate-300&quot;&gt;{property.description}&lt;/span&gt;
          &lt;/div&gt;
        );

      case 'options':
        return (
          &lt;select
            aria-label=&quot;Select an option&quot;
            value={String(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, e.target.value)}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;option key={option.value} value={option.value} className=&quot;bg-slate-800 text-white&quot;&gt;
                {option.name}
              &lt;/option&gt;
            ))}
          &lt;/select&gt;
        );

      default:
        return null;
    }
  };

  return (
    &lt;div className=&quot;p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-8&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-white&quot;&gt;Credentials&lt;/h1&gt;
        &lt;p className=&quot;text-slate-300&quot;&gt;Manage authentication credentials for your integrations&lt;/p&gt;
      &lt;/div&gt;

      {/* Stats */}
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-6 mb-8&quot;&gt;
        &lt;div className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;🔐&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;Total Credentials&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{credentials.length}&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;✅&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;Verified&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;
                {credentials.filter((c) =&gt; c.isValid).length}
              &lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;🔗&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;Types Available&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{credentialTypes.length}&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Existing Credentials */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
        &lt;div className=&quot;p-6 border-b border-white/20&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-semibold text-white&quot;&gt;Your Credentials&lt;/h2&gt;
            &lt;button
              onClick={() =&gt; setShowCreateForm(true)}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
            &gt;
              Create New
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading credentials...&lt;/p&gt;
            &lt;/div&gt;
          ) : credentials.length === 0 ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;p className=&quot;text-slate-300 mb-4&quot;&gt;No credentials configured&lt;/p&gt;
              &lt;button
                onClick={() =&gt; setShowCreateForm(true)}
                className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
              &gt;
                Create Your First Credential
              &lt;/button&gt;
            &lt;/div&gt;
          ) : (
            &lt;div className=&quot;space-y-4&quot;&gt;
              {credentials.map((credential) =&gt; {
                const type = credentialTypes.find((t) =&gt; t.name === credential.type);
                return (
                  &lt;div
                    key={credential.id}
                    className=&quot;bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/10 transition-all duration-300&quot;
                  &gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                        &lt;span className=&quot;text-2xl&quot;&gt;{type?.icon || '🔐'}&lt;/span&gt;
                        &lt;div&gt;
                          &lt;h3 className=&quot;font-medium text-white&quot;&gt;{credential.name}&lt;/h3&gt;
                          &lt;p className=&quot;text-sm text-slate-300&quot;&gt;{type?.displayName}&lt;/p&gt;
                        &lt;/div&gt;
                        {credential.isValid &amp;&amp; (
                          &lt;span className=&quot;bg-green-500/20 text-green-300 border border-green-500/30 text-xs font-medium px-2.5 py-0.5 rounded-full&quot;&gt;
                            Verified
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;

                      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                        &lt;button
                          onClick={() =&gt; handleTest(credential.id)}
                          disabled={testingCredential === credential.id}
                          className=&quot;text-blue-300 hover:text-blue-200 text-sm disabled:opacity-50 transition-colors&quot;
                        &gt;
                          {testingCredential === credential.id ? 'Testing...' : 'Test'}
                        &lt;/button&gt;
                        {credential.type !== 'gmailOAuth2' &amp;&amp; (
                          &lt;button
                            onClick={() =&gt; handleEdit(credential)}
                            className=&quot;text-slate-300 hover:text-white text-sm transition-colors&quot;
                          &gt;
                            Edit
                          &lt;/button&gt;
                        )}
                        {credential.type === 'gmailOAuth2' ||
                        credential?.integration === 'gmailOAuth2' ? (
                          &lt;button
                            onClick={() =&gt; handleRevokeGmail(credential.id, credential.name)}
                            className=&quot;text-red-300 hover:text-red-200 text-sm font-medium transition-colors&quot;
                          &gt;
                            🔐 Revoke Access
                          &lt;/button&gt;
                        ) : (
                          &lt;button
                            onClick={() =&gt; handleDelete(credential.id, credential.name)}
                            className=&quot;text-red-300 hover:text-red-200 text-sm transition-colors&quot;
                          &gt;
                            Delete
                          &lt;/button&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;mt-2 text-xs text-slate-400&quot;&gt;
                      Created: {new Date(credential.createdAt).toLocaleDateString()}
                      {credential.lastTestedAt &amp;&amp; (
                        &lt;span className=&quot;ml-4&quot;&gt;
                          Last tested: {new Date(credential.lastTestedAt).toLocaleDateString()}
                        &lt;/span&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Create/Edit Form Modal */}
      {showCreateForm &amp;&amp; selectedType &amp;&amp; (
        &lt;div className=&quot;fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 backdrop-blur-sm&quot;&gt;
          &lt;div className=&quot;bg-white/10 backdrop-blur-md border border-white/20 rounded-lg shadow-xl max-w-md w-full max-h-96 overflow-y-auto&quot;&gt;
            &lt;div className=&quot;p-6&quot;&gt;
              &lt;h2 className=&quot;text-lg font-semibold text-white mb-4&quot;&gt;
                {editingCredential ? 'Edit' : 'Create'} {selectedType.displayName} Credential
              &lt;/h2&gt;

              {/* Credential Name */}
              &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-1&quot;&gt;
                  Credential Name
                &lt;/label&gt;
                &lt;input
                  type=&quot;text&quot;
                  value={credentialName}
                  onChange={(e) =&gt; setCredentialName(e.target.value)}
                  placeholder=&quot;e.g., Personal Gmail, Company SMTP&quot;
                  className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                /&gt;
              &lt;/div&gt;

              {/* Dynamic Fields */}
              &lt;div className=&quot;space-y-4&quot;&gt;
                {selectedType.properties?.map((property) =&gt; (
                  &lt;div key={property.name}&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-1&quot;&gt;
                      {property.displayName}
                      {property.required &amp;&amp; &lt;span className=&quot;text-red-400 ml-1&quot;&gt;*&lt;/span&gt;}
                    &lt;/label&gt;
                    {renderField(property)}
                    {property.description &amp;&amp; (
                      &lt;p className=&quot;text-xs text-slate-400 mt-1&quot;&gt;{property.description}&lt;/p&gt;
                    )}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;

              {/* Actions */}
              &lt;div className=&quot;flex space-x-3 mt-6&quot;&gt;
                &lt;button
                  onClick={handleSave}
                  disabled={!credentialName.trim()}
                  className=&quot;flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 shadow-lg&quot;
                &gt;
                  {selectedType.name === 'gmailOAuth2' &amp;&amp; !editingCredential
                    ? 'Connect with Google'
                    : editingCredential
                      ? 'Update'
                      : 'Create'}{' '}
                  Credential
                &lt;/button&gt;
                &lt;button
                  onClick={() =&gt; setShowCreateForm(false)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Contact.tsx (Line 254:4 - Line 555:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/contact/Contact.tsx (Line 255:4 - Line 556:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn509" onclick="toggleCodeBlock('cloneGroup509', 'expandBtn509', 'collapseBtn509')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn509" onclick="toggleCodeBlock('cloneGroup509', 'expandBtn509', 'collapseBtn509')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup509"><code class="language-javascript text-sm text-gray-800">={index}
                    className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                  &gt;
                    &lt;div className={`bg-${method.color}-100 p-3 rounded-lg w-fit mb-4`}&gt;
                      &lt;Icon className={`w-8 h-8 text-${method.color}-600`} /&gt;
                    &lt;/div&gt;
                    &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-2&quot;&gt;{method.type}&lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;{method.description}&lt;/p&gt;

                    &lt;div className=&quot;space-y-3&quot;&gt;
                      {method.methods.map((contact, contactIndex) =&gt; {
                        const ContactIcon = contact.icon;
                        return (
                          &lt;div key={contactIndex} className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;ContactIcon className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                            &lt;span className=&quot;text-gray-700&quot;&gt;{contact.value}&lt;/span&gt;
                            {contact.type === 'email' &amp;&amp; (
                              &lt;ExternalLink className=&quot;w-4 h-4 text-gray-400&quot; /&gt;
                            )}
                          &lt;/div&gt;
                        );
                      })}
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Contact Form */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Send Us a Message&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Fill out the form below and we'll get back to you within 24 hours
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;bg-white rounded-2xl shadow-xl p-8&quot;&gt;
              {isSubmitted ? (
                &lt;div className=&quot;text-center py-12&quot;&gt;
                  &lt;CheckCircle className=&quot;w-16 h-16 text-green-500 mx-auto mb-4&quot; /&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;Thank You!&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;
                    Your message has been sent successfully. We'll get back to you soon.
                  &lt;/p&gt;
                  &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Redirecting to home page...&lt;/div&gt;
                &lt;/div&gt;
              ) : (
                &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
                  {/* Inquiry Type */}
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-gray-700 mb-3&quot;&gt;
                      What can we help you with?
                    &lt;/label&gt;
                    &lt;div className=&quot;grid grid-cols-2 md:grid-cols-3 gap-3&quot;&gt;
                      {inquiryTypes.map((type) =&gt; {
                        const Icon = type.icon;
                        return (
                          &lt;label
                            key={type.value}
                            className={`relative flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${
                              formData.inquiry === type.value
                                ? 'border-blue-500 bg-blue-50'
                                : 'border-gray-200 hover:border-gray-300'
                            }`}
                          &gt;
                            &lt;input
                              type=&quot;radio&quot;
                              name=&quot;inquiry&quot;
                              value={type.value}
                              checked={formData.inquiry === type.value}
                              onChange={handleInputChange}
                              className=&quot;sr-only&quot;
                            /&gt;
                            &lt;Icon className=&quot;w-5 h-5 text-gray-600&quot; /&gt;
                            &lt;span className=&quot;text-sm font-medium text-gray-700&quot;&gt;{type.label}&lt;/span&gt;
                          &lt;/label&gt;
                        );
                      })}
                    &lt;/div&gt;
                  &lt;/div&gt;

                  {/* Name and Email */}
                  &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;name&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Full Name *
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        id=&quot;name&quot;
                        name=&quot;name&quot;
                        value={formData.name}
                        onChange={handleInputChange}
                        required
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;John Doe&quot;
                      /&gt;
                    &lt;/div&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;email&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Email Address *
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;email&quot;
                        id=&quot;email&quot;
                        name=&quot;email&quot;
                        value={formData.email}
                        onChange={handleInputChange}
                        required
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;john@company.com&quot;
                      /&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;

                  {/* Company and Role */}
                  &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;company&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Company
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        id=&quot;company&quot;
                        name=&quot;company&quot;
                        value={formData.company}
                        onChange={handleInputChange}
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;Your Company&quot;
                      /&gt;
                    &lt;/div&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;role&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Role
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        id=&quot;role&quot;
                        name=&quot;role&quot;
                        value={formData.role}
                        onChange={handleInputChange}
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;Software Engineer&quot;
                      /&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;

                  {/* Subject */}
                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;subject&quot;
                      className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                    &gt;
                      Subject *
                    &lt;/label&gt;
                    &lt;input
                      type=&quot;text&quot;
                      id=&quot;subject&quot;
                      name=&quot;subject&quot;
                      value={formData.subject}
                      onChange={handleInputChange}
                      required
                      className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                      placeholder=&quot;How can we help you?&quot;
                    /&gt;
                  &lt;/div&gt;

                  {/* Message */}
                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;message&quot;
                      className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                    &gt;
                      Message *
                    &lt;/label&gt;
                    &lt;textarea
                      id=&quot;message&quot;
                      name=&quot;message&quot;
                      value={formData.message}
                      onChange={handleInputChange}
                      required
                      rows={6}
                      className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                      placeholder=&quot;Tell us more about your needs, use case, or question...&quot;
                    /&gt;
                  &lt;/div&gt;

                  {/* Newsletter Checkbox */}
                  &lt;div className=&quot;flex items-center&quot;&gt;
                    &lt;input
                      type=&quot;checkbox&quot;
                      id=&quot;newsletter&quot;
                      name=&quot;newsletter&quot;
                      checked={formData.newsletter}
                      onChange={handleInputChange}
                      className=&quot;h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded&quot;
                    /&gt;
                    &lt;label htmlFor=&quot;newsletter&quot; className=&quot;ml-3 text-sm text-gray-600&quot;&gt;
                      Subscribe to our newsletter for product updates and automation tips
                    &lt;/label&gt;
                  &lt;/div&gt;

                  {/* Submit Button */}
                  &lt;div className=&quot;pt-4&quot;&gt;
                    &lt;button
                      type=&quot;submit&quot;
                      className=&quot;w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-3 px-8 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-colors flex items-center justify-center gap-2&quot;
                    &gt;
                      &lt;Send className=&quot;w-5 h-5&quot; /&gt;
                      Send Message
                    &lt;/button&gt;
                  &lt;/div&gt;
                &lt;/form&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Office Locations */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Our Offices&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Visit us around the world&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              {offices.map((office, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;text-center mb-6&quot;&gt;
                    &lt;div className=&quot;text-4xl mb-2&quot;&gt;{office.flag}&lt;/div&gt;
                    &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;
                      {office.city}, {office.country}
                    &lt;/h3&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-start gap-3&quot;&gt;
                      &lt;MapPin className=&quot;w-5 h-5 text-gray-400 mt-0.5&quot; /&gt;
                      &lt;div&gt;
                        &lt;div className=&quot;text-gray-900 font-medium&quot;&gt;{office.address}&lt;/div&gt;
                        &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{office.postal}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;Phone className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{office.phone}&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;Mail className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{office.email}&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;Clock className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{office.hours}&lt;/span&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* FAQ */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-3xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Frequently Asked Questions&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Quick answers to common questions&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;space-y-6&quot;&gt;
              {faqs.map((faq, index) =&gt; (
                &lt;div key={index}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/APIReference.tsx (Line 428:8 - Line 775:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/apireference/APIReference.tsx (Line 429:8 - Line 776:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn512" onclick="toggleCodeBlock('cloneGroup512', 'expandBtn512', 'collapseBtn512')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn512" onclick="toggleCodeBlock('cloneGroup512', 'expandBtn512', 'collapseBtn512')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup512"><code class="language-javascript text-sm text-gray-800">={() =&gt; copyToClipboard(authenticationExample)}
                    className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                  &gt;
                    {copiedCode === authenticationExample ? (
                      &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                    ) : (
                      &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                    )}
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* SDK Usage */}
              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3 mb-4&quot;&gt;
                  &lt;div className=&quot;bg-purple-100 p-2 rounded-lg&quot;&gt;
                    &lt;Code className=&quot;w-6 h-6 text-purple-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;SDK Usage&lt;/h3&gt;
                &lt;/div&gt;

                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;
                  Use our official SDKs for easier integration. Available for Node.js, Python, PHP,
                  Go, and more.
                &lt;/p&gt;

                &lt;div className=&quot;relative&quot;&gt;
                  &lt;pre className=&quot;bg-gray-900 rounded-lg p-4 text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                    &lt;code&gt;{sdkExample}&lt;/code&gt;
                  &lt;/pre&gt;
                  &lt;button
                    onClick={() =&gt; copyToClipboard(sdkExample)}
                    className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                  &gt;
                    {copiedCode === sdkExample ? (
                      &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                    ) : (
                      &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                    )}
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* API Endpoints */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-7xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;API Endpoints&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Complete reference for all available endpoints
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;
              {/* Sidebar */}
              &lt;div className=&quot;lg:w-1/4&quot;&gt;
                &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6 sticky top-6&quot;&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-4&quot;&gt;Endpoints&lt;/h3&gt;
                  &lt;nav className=&quot;space-y-2&quot;&gt;
                    {endpointCategories.map((category) =&gt; {
                      const Icon = category.icon;
                      return (
                        &lt;button
                          key={category.id}
                          onClick={() =&gt; setActiveEndpoint(category.id)}
                          className={`w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors ${
                            activeEndpoint === category.id
                              ? 'bg-blue-50 text-blue-700 border border-blue-200'
                              : 'text-gray-700 hover:bg-gray-50'
                          }`}
                        &gt;
                          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                          &lt;/div&gt;
                          &lt;span className=&quot;text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full&quot;&gt;
                            {category.count}
                          &lt;/span&gt;
                        &lt;/button&gt;
                      );
                    })}
                  &lt;/nav&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Endpoint Details */}
              &lt;div className=&quot;lg:w-3/4&quot;&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  {endpoints[activeEndpoint as keyof typeof endpoints]?.map((endpoint, index) =&gt; (
                    &lt;div key={index} className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                      &lt;div className=&quot;flex items-start gap-4 mb-4&quot;&gt;
                        &lt;span
                          className={`px-3 py-1 text-sm font-bold rounded-full ${getMethodColor(endpoint.method)}`}
                        &gt;
                          {endpoint.method}
                        &lt;/span&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-2&quot;&gt;{endpoint.title}&lt;/h3&gt;
                          &lt;code className=&quot;text-gray-600 bg-gray-100 px-2 py-1 rounded text-sm&quot;&gt;
                            {endpoint.path}
                          &lt;/code&gt;
                          &lt;p className=&quot;text-gray-600 mt-2&quot;&gt;{endpoint.description}&lt;/p&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      {/* Parameters */}
                      {endpoint.parameters &amp;&amp; endpoint.parameters.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;mb-6&quot;&gt;
                          &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Parameters&lt;/h4&gt;
                          &lt;div className=&quot;overflow-x-auto&quot;&gt;
                            &lt;table className=&quot;w-full text-sm&quot;&gt;
                              &lt;thead&gt;
                                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;Name&lt;/th&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;Type&lt;/th&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;
                                    Required
                                  &lt;/th&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;
                                    Description
                                  &lt;/th&gt;
                                &lt;/tr&gt;
                              &lt;/thead&gt;
                              &lt;tbody&gt;
                                {endpoint.parameters.map((param, paramIndex) =&gt; (
                                  &lt;tr key={paramIndex} className=&quot;border-b border-gray-100&quot;&gt;
                                    &lt;td className=&quot;p-2 font-mono text-blue-600&quot;&gt;{param.name}&lt;/td&gt;
                                    &lt;td className=&quot;p-2 text-gray-600&quot;&gt;{param.type}&lt;/td&gt;
                                    &lt;td className=&quot;p-2&quot;&gt;
                                      {param.required ? (
                                        &lt;span className=&quot;text-red-600 font-medium&quot;&gt;Yes&lt;/span&gt;
                                      ) : (
                                        &lt;span className=&quot;text-gray-500&quot;&gt;No&lt;/span&gt;
                                      )}
                                    &lt;/td&gt;
                                    &lt;td className=&quot;p-2 text-gray-600&quot;&gt;{param.description}&lt;/td&gt;
                                  &lt;/tr&gt;
                                ))}
                              &lt;/tbody&gt;
                            &lt;/table&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      )}

                      {/* Response */}
                      &lt;div&gt;
                        &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Response&lt;/h4&gt;
                        &lt;div className=&quot;bg-gray-900 rounded-lg p-4 relative&quot;&gt;
                          &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
                            &lt;span className=&quot;text-green-400 text-sm font-medium&quot;&gt;
                              HTTP {endpoint.response.status}
                            &lt;/span&gt;
                            &lt;button
                              onClick={() =&gt; copyToClipboard(endpoint.response.body)}
                              className=&quot;p-1 text-gray-400 hover:text-white transition-colors&quot;
                            &gt;
                              {copiedCode === endpoint.response.body ? (
                                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                              ) : (
                                &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                              )}
                            &lt;/button&gt;
                          &lt;/div&gt;
                          &lt;pre className=&quot;text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                            &lt;code&gt;{endpoint.response.body}&lt;/code&gt;
                          &lt;/pre&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Webhooks */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Webhooks&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Receive real-time notifications about workflow events
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-8&quot;&gt;
              &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-8&quot;&gt;
                &lt;div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-4&quot;&gt;Webhook Events&lt;/h3&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    {[
                      {
                        event: 'workflow.created',
                        description: 'New workflow created',
                      },
                      {
                        event: 'workflow.updated',
                        description: 'Workflow modified',
                      },
                      {
                        event: 'workflow.deleted',
                        description: 'Workflow deleted',
                      },
                      {
                        event: 'execution.started',
                        description: 'Workflow execution started',
                      },
                      {
                        event: 'execution.completed',
                        description: 'Workflow execution completed',
                      },
                      {
                        event: 'execution.failed',
                        description: 'Workflow execution failed',
                      },
                    ].map((webhook, index) =&gt; (
                      &lt;div
                        key={index}
                        className=&quot;flex items-center gap-3 p-3 bg-gray-50 rounded-lg&quot;
                      &gt;
                        &lt;Webhook className=&quot;w-5 h-5 text-blue-600&quot; /&gt;
                        &lt;div&gt;
                          &lt;code className=&quot;text-sm font-mono text-blue-600&quot;&gt;{webhook.event}&lt;/code&gt;
                          &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{webhook.description}&lt;/p&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-4&quot;&gt;Example Configuration&lt;/h3&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;pre className=&quot;bg-gray-900 rounded-lg p-4 text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                      &lt;code&gt;{webhookExample}&lt;/code&gt;
                    &lt;/pre&gt;
                    &lt;button
                      onClick={() =&gt; copyToClipboard(webhookExample)}
                      className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                    &gt;
                      {copiedCode === webhookExample ? (
                        &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                      ) : (
                        &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                      )}
                    &lt;/button&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Rate Limits &amp; SDKs */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8&quot;&gt;
            {/* Rate Limits */}
            &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-8&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 mb-6&quot;&gt;
                &lt;div className=&quot;bg-orange-100 p-3 rounded-lg&quot;&gt;
                  &lt;Clock className=&quot;w-6 h-6 text-orange-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Rate Limits&lt;/h3&gt;
              &lt;/div&gt;

              &lt;div className=&quot;space-y-4&quot;&gt;
                {[
                  {
                    tier: 'Free',
                    limit: '1,000 requests/hour',
                    burst: '100 requests/minute',
                  },
                  {
                    tier: 'Professional',
                    limit: '10,000 requests/hour',
                    burst: '500 requests/minute',
                  },
                  {
                    tier: 'Enterprise',
                    limit: '100,000 requests/hour',
                    burst: '1,000 requests/minute',
                  },
                ].map((tier, index) =&gt; (
                  &lt;div
                    key={index}
                    className=&quot;flex items-center justify-between p-4 bg-gray-50 rounded-lg&quot;
                  &gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{tier.tier}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{tier.limit}&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-right&quot;&gt;
                      &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;Burst: {tier.burst}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;

            {/* SDKs */}
            &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-8&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 mb-6&quot;&gt;
                &lt;div className=&quot;bg-blue-100 p-3 rounded-lg&quot;&gt;
                  &lt;Code className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Official SDKs&lt;/h3&gt;
              &lt;/div&gt;

              &lt;div className=&quot;space-y-4&quot;&gt;
                {[
                  {
                    language: 'Node.js',
                    package: '@reporunner/node-sdk',
                    version: 'v2.1.0',
                  },
                  {
                    language: 'Python',
                    package: 'reporunner-python',
                    version: 'v1.8.0',
                  },
                  {
                    language: 'PHP',
                    package: 'reporunner/php-sdk',
                    version: 'v1.5.0',
                  },
                  {
                    language: 'Go',
                    package: 'github.com/reporunner/go-sdk',
                    version: 'v1.3.0',
                  },
                  {
                    language: 'Ruby',
                    package: 'reporunner-ruby',
                    version: 'v1.2.0',
                  },
                ].map((sdk, index) =&gt; (
                  &lt;div
                    key={index}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 62:10 - Line 224:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 68:10 - Line 230:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn514" onclick="toggleCodeBlock('cloneGroup514', 'expandBtn514', 'collapseBtn514')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn514" onclick="toggleCodeBlock('cloneGroup514', 'expandBtn514', 'collapseBtn514')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup514"><code class="language-javascript text-sm text-gray-800">={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* True Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#22c55e', // green for true
                width: 10,
                height: 10,
                right: -5,
                top: '35%',
              }}
            /&gt;

            {/* False Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_1&quot;
              style={{
                background: '#ef4444', // red for false
                width: 10,
                height: 10,
                right: -5,
                top: '65%',
              }}
            /&gt;

            {/* Condition Icon */}
            &lt;NodeIcon icon={icon} displayName={displayName} size=&quot;md&quot; /&gt;

            {/* Output Labels */}
            &lt;div
              className=&quot;absolute right-0 text-xs text-white px-1 py-0.5 rounded-l pointer-events-none z-10&quot;
              style={{
                top: '35%',
                backgroundColor: '#22c55e',
                transform: 'translateY(-50%)',
                marginRight: '-1px',
                fontSize: '10px',
              }}
            &gt;
              T
            &lt;/div&gt;
            &lt;div
              className=&quot;absolute right-0 text-xs text-white px-1 py-0.5 rounded-l pointer-events-none z-10&quot;
              style={{
                top: '65%',
                backgroundColor: '#ef4444',
                transform: 'translateY(-50%)',
                marginRight: '-1px',
                fontSize: '10px',
              }}
            &gt;
              F
            &lt;/div&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badges */}
            {nodeData.disabled &amp;&amp; &lt;StatusBadge type=&quot;disabled&quot; position=&quot;top-right&quot; /&gt;}
            {mode === 'rules' &amp;&amp; rules.length &gt; 0 &amp;&amp; (
              &lt;StatusBadge type=&quot;count&quot; content={rules.length} position=&quot;top-left&quot; color=&quot;yellow&quot; /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Node Label */}
      &lt;NodeLabel displayName={displayName} subtitle={getSubtitle()} maxWidth={150}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 53:10 - Line 214:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 59:10 - Line 220:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn516" onclick="toggleCodeBlock('cloneGroup516', 'expandBtn516', 'collapseBtn516')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn516" onclick="toggleCodeBlock('cloneGroup516', 'expandBtn516', 'collapseBtn516')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup516"><code class="language-javascript text-sm text-gray-800">={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Standard Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
                top: '25%',
              }}
            /&gt;

            {/* AI Language Model Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;ai_languageModel&quot;
              style={{
                background: '#8b5cf6',
                width: 8,
                height: 8,
                left: -4,
                top: '45%',
              }}
            /&gt;

            {/* AI Memory Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;ai_memory&quot;
              style={{
                background: '#f59e0b',
                width: 8,
                height: 8,
                left: -4,
                top: '65%',
              }}
            /&gt;

            {/* AI Tool Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;ai_tool&quot;
              style={{
                background: '#ef4444',
                width: 8,
                height: 8,
                left: -4,
                top: '85%',
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* AI Agent Icon */}
            &lt;NodeIcon icon={icon} displayName={displayName} size=&quot;md&quot; /&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badge */}
            {nodeData.disabled &amp;&amp; &lt;StatusBadge type=&quot;disabled&quot; position=&quot;top-right&quot; /&gt;}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Node Label */}
      &lt;NodeLabel displayName={displayName} subtitle={provider} maxWidth={150}</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="tsx-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">tsx</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 374:54 - Line 406:66), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 326:47 - Line 358:119)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup1"><code class="language-tsx text-sm text-gray-800">}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (AI Agent only) */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 421:23 - Line 452:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 326:47 - Line 358:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup2"><code class="language-tsx text-sm text-gray-800">}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}
    &lt;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode/ContainerNode.tsx (Line 1:1 - Line 381:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode/containernode/ContainerNode.tsx (Line 6:1 - Line 386:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup4"><code class="language-tsx text-sm text-gray-800">/**
 * Container Node Component
 *
 * Supports multiple container types:
 * - Loop containers for iteration workflows
 * - Parallel containers for concurrent execution
 * - Conditional containers for branching logic
 * - Subflow containers for nested workflows
 */

import type React from 'react';
import { useCallback, useMemo, useState } from 'react';
import type { Node } from 'reactflow';
import { Handle, Position, useReactFlow } from 'reactflow';
import { useLeanWorkflowStore } from '@/core/stores/leanWorkflowStore';
import { cn } from '@/design-system/utils';

export type ContainerType = 'loop' | 'parallel' | 'conditional' | 'subflow';

export interface ContainerNodeData {
  label: string;
  containerType: ContainerType;
  children: Node[];
  config: {
    // Loop configuration
    loopMode?: 'forEach' | 'while' | 'count';
    loopCondition?: string;
    loopCount?: number;
    loopVariable?: string;

    // Parallel configuration
    parallelMode?: 'all' | 'first' | 'race';
    maxConcurrency?: number;

    // Conditional configuration
    conditions?: Array&lt;{
      id: string;
      condition: string;
      label: string;
    }&gt;;

    // Subflow configuration
    subflowId?: string;
    passthrough?: boolean;
  };

  // Container visual properties
  dimensions: {
    width: number;
    height: number;
    minWidth: number;
    minHeight: number;
  };

  // Auto-resize settings
  autoResize: boolean;
  padding: number;

  // Container state
  isExpanded: boolean;
  isCollapsed: boolean;
}

interface ContainerNodeProps {
  id: string;
  data: ContainerNodeData;
  selected?: boolean;
}

const getContainerStyles = (containerType: ContainerType, selected: boolean) =&gt; {
  const baseStyles = 'relative border-2 border-dashed rounded-lg transition-all duration-200';

  const typeStyles = {
    loop: 'border-purple-400 bg-purple-900/10',
    parallel: 'border-blue-400 bg-blue-900/10',
    conditional: 'border-yellow-400 bg-yellow-900/10',
    subflow: 'border-green-400 bg-green-900/10',
  };

  const selectedStyles = selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-blue-400' : '';

  return cn(baseStyles, typeStyles[containerType], selectedStyles);
};

const getContainerIcon = (containerType: ContainerType) =&gt; {
  const icons = {
    loop: '🔄',
    parallel: '⚡',
    conditional: '🔀',
    subflow: '📦',
  };
  return icons[containerType];
};

const ContainerHeader: React.FC&lt;{
  containerType: ContainerType;
  label: string;
  isExpanded: boolean;
  onToggleExpanded: () =&gt; void;
  onEdit: () =&gt; void;
}&gt; = ({ containerType, label, isExpanded, onToggleExpanded, onEdit }) =&gt; (
  &lt;div className=&quot;flex items-center justify-between p-2 bg-gray-800 rounded-t border-b border-gray-600&quot;&gt;
    &lt;div className=&quot;flex items-center gap-2&quot;&gt;
      &lt;span className=&quot;text-lg&quot;&gt;{getContainerIcon(containerType)}&lt;/span&gt;
      &lt;span className=&quot;text-sm font-medium text-white capitalize&quot;&gt;{label || containerType}&lt;/span&gt;
    &lt;/div&gt;

    &lt;div className=&quot;flex items-center gap-1&quot;&gt;
      &lt;button
        onClick={onEdit}
        className=&quot;p-1 text-gray-400 hover:text-white transition-colors&quot;
        title=&quot;Edit container&quot;
      &gt;
        ⚙️
      &lt;/button&gt;
      &lt;button
        onClick={onToggleExpanded}
        className=&quot;p-1 text-gray-400 hover:text-white transition-colors&quot;
        title={isExpanded ? 'Collapse' : 'Expand'}
      &gt;
        {isExpanded ? '▼' : '▶'}
      &lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
);

const DropZone: React.FC&lt;{
  containerType: ContainerType;
  onDrop: (event: React.DragEvent) =&gt; void;
  onDragOver: (event: React.DragEvent) =&gt; void;
  hasChildren: boolean;
}&gt; = ({ containerType, onDrop, onDragOver, hasChildren }) =&gt; (
  &lt;div
    className={cn(
      'flex-1 flex items-center justify-center transition-all duration-200',
      'border-2 border-dashed border-gray-600 rounded m-2',
      'hover:border-gray-400 hover:bg-gray-800/20'
    )}
    onDrop={onDrop}
    onDragOver={onDragOver}
  &gt;
    {!hasChildren ? (
      &lt;div className=&quot;text-center p-8&quot;&gt;
        &lt;div className=&quot;text-3xl mb-2&quot;&gt;{getContainerIcon(containerType)}&lt;/div&gt;
        &lt;div className=&quot;text-sm text-gray-400&quot;&gt;
          Drop nodes here to add them to this {containerType}
        &lt;/div&gt;
        {containerType === 'loop' &amp;&amp; (
          &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;Nodes will be executed repeatedly&lt;/div&gt;
        )}
        {containerType === 'parallel' &amp;&amp; (
          &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;Nodes will be executed concurrently&lt;/div&gt;
        )}
      &lt;/div&gt;
    ) : (
      &lt;div className=&quot;w-full h-full min-h-[200px] p-2&quot;&gt;
        {/* Child nodes will be rendered here */}
        &lt;div className=&quot;text-xs text-gray-500 text-center&quot;&gt;Container content ({containerType})&lt;/div&gt;
      &lt;/div&gt;
    )}
  &lt;/div&gt;
);

export const ContainerNode: React.FC&lt;ContainerNodeProps&gt; = ({ id, data, selected = false }) =&gt; {
  const { setNodes } = useReactFlow();
  const { addNode } = useLeanWorkflowStore();
  const [isDragOver, setIsDragOver] = useState(false);

  const { containerType, children, dimensions, isExpanded, config } = data;

  const handleToggleExpanded = useCallback(() =&gt; {
    // Update node data to toggle expanded state
    setNodes((nodes) =&gt;
      nodes.map((node) =&gt;
        node.id === id
          ? {
              ...node,
              data: {
                ...node.data,
                isExpanded: !node.data.isExpanded,
              },
            }
          : node
      )
    );
  }, [id, setNodes]);

  const handleEdit = useCallback(() =&gt; {}, []);

  const handleDrop = useCallback(
    (event: React.DragEvent) =&gt; {
      event.preventDefault();
      setIsDragOver(false);

      try {
        const data = event.dataTransfer.getData('application/reactflow');
        if (!data) return;

        const { type, nodeTypeData, integrationData } = JSON.parse(data);

        // Calculate position within container
        const containerRect = event.currentTarget.getBoundingClientRect();
        const relativeX = event.clientX - containerRect.left;
        const relativeY = event.clientY - containerRect.top;

        // Create new node within container
        const newNodeId = `node-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        const newNode = {
          id: newNodeId,
          type: type,
          position: { x: relativeX - 50, y: relativeY - 25 }, // Center on drop point
          parameters: {},
          data: {
            label: nodeTypeData?.displayName || nodeTypeData?.name || type,
            integration: integrationData?.id,
            nodeType: nodeTypeData?.name || nodeTypeData?.id,
            configuration: {},
            credentials: [],
            // Mark this node as belonging to the container
            parentContainer: id,
            containerType: containerType,
          },
        };

        addNode(newNode);

        // Update container to include this child
        setNodes((nodes) =&gt;
          nodes.map((node) =&gt;
            node.id === id
              ? {
                  ...node,
                  data: {
                    ...node.data,
                    children: [...(node.data.children || []), newNode],
                  },
                }
              : node
          )
        );
      } catch (_error) {}
    },
    [id, containerType, addNode, setNodes]
  );

  const handleDragOver = useCallback((event: React.DragEvent) =&gt; {
    event.preventDefault();
    event.dataTransfer.dropEffect = 'move';
    setIsDragOver(true);
  }, []);

  const handleDragLeave = useCallback((event: React.DragEvent) =&gt; {
    // Only hide if leaving the container entirely
    if (!event.currentTarget.contains(event.relatedTarget as HTMLElement)) {
      setIsDragOver(false);
    }
  }, []);

  // Calculate container handles based on type
  const containerHandles = useMemo(() =&gt; {
    switch (containerType) {
      case 'loop':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs: [
            { id: 'loop-start', position: Position.Right, label: 'Loop Start' },
            { id: 'loop-end', position: Position.Bottom, label: 'Loop End' },
          ],
        };
      case 'parallel':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs: [
            {
              id: 'parallel-branch',
              position: Position.Right,
              label: 'Branch',
            },
            {
              id: 'parallel-complete',
              position: Position.Bottom,
              label: 'Complete',
            },
          ],
        };
      case 'conditional':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs:
            config.conditions?.map((condition, index) =&gt; ({
              id: condition.id,
              position: Position.Right,
              label: condition.label,
              style: { top: `${20 + index * 30}%` },
            })) || [],
        };
      case 'subflow':
        return {
          inputs: [{ id: 'input', position: Position.Left }],
          outputs: [{ id: 'output', position: Position.Right }],
        };
      default:
        return { inputs: [], outputs: [] };
    }
  }, [containerType, config.conditions]);

  return (
    &lt;div
      className={cn(
        getContainerStyles(containerType, selected),
        isDragOver &amp;&amp; 'ring-2 ring-blue-400 ring-opacity-50',
        'min-w-[300px] min-h-[200px]'
      )}
      style={{
        width: dimensions.width,
        height: isExpanded ? dimensions.height : 'auto',
      }}
      onDragLeave={handleDragLeave}
    &gt;
      {/* Container Handles */}
      {containerHandles.inputs.map((handle) =&gt; (
        &lt;Handle
          key={handle.id}
          type=&quot;target&quot;
          position={handle.position}
          id={handle.id}
          className=&quot;!bg-gray-600 !border-2 !border-gray-400&quot;
        /&gt;
      ))}

      {containerHandles.outputs.map((handle) =&gt; (
        &lt;Handle
          key={handle.id}
          type=&quot;source&quot;
          position={handle.position}
          id={handle.id}
          className=&quot;!bg-gray-600 !border-2 !border-gray-400&quot;
          style={'style' in handle ? handle.style : undefined}
        &gt;
          {'label' in handle &amp;&amp; handle.label &amp;&amp; (
            &lt;div className=&quot;absolute top-0 left-full ml-2 text-xs text-gray-400 whitespace-nowrap&quot;&gt;
              {handle.label}
            &lt;/div&gt;
          )}
        &lt;/Handle&gt;
      ))}

      {/* Container Header */}
      &lt;ContainerHeader
        containerType={containerType}
        label={data.label}
        isExpanded={isExpanded}
        onToggleExpanded={handleToggleExpanded}
        onEdit={handleEdit}
      /&gt;

      {/* Container Content */}
      {isExpanded &amp;&amp; (
        &lt;DropZone
          containerType={containerType}
          onDrop={handleDrop}
          onDragOver={handleDragOver}
          hasChildren={children.length &gt; 0}
        /&gt;
      )}

      {/* Container Footer with Stats */}
      &lt;div className=&quot;px-2 py-1 bg-gray-800 rounded-b border-t border-gray-600&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center text-xs text-gray-400&quot;&gt;
          &lt;span&gt;{children.length} nodes&lt;/span&gt;
          {containerType === 'parallel' &amp;&amp; config.maxConcurrency &amp;&amp; (
            &lt;span&gt;Max: {config.maxConcurrency}&lt;/span&gt;
          )}
          {containerType === 'loop' &amp;&amp; config.loopMode &amp;&amp; &lt;span&gt;{config.loopMode}&lt;/span&gt;}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default ContainerNode;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/index.tsx (Line 4:30 - Line 342:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/index/index.tsx (Line 10:19 - Line 348:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup6"><code class="language-tsx text-sm text-gray-800">;
import NodeHandles from './NodeHandles';
import NodeMenu from './NodeMenu';
import NodeToolbar from './NodeToolbar';

// Base props interface that all nodes extend
export interface BaseNodeData {
  label: string;
  integration?: string;
  integrationData?: {
    id: string;
    name: string;
    icon: string;
    category: string;
  };
  nodeTypeData?:
    | IntegrationNodeType
    | {
        id: string;
        name: string;
        type: string;
        description: string;
      };
  config?: Record&lt;string, unknown&gt;;
  parameters?: Record&lt;string, unknown&gt;;
  icon?: string;
  name?: string;
  description?: string;
  onDelete?: (nodeId: string) =&gt; void;
  onConnect?: (sourceNodeId: string) =&gt; void;
  onOpenProperties?: (nodeId: string) =&gt; void;
  hasOutgoingConnection?: boolean;
  isSelected?: boolean;
  // For AI agents, track connections to specific handles
  edges?: Array&lt;{
    source: string;
    sourceHandle?: string;
    target: string;
    targetHandle?: string;
  }&gt;;
  // Condition node specific properties
  outputs?: Array&lt;{
    id: string;
    label: string;
    position: { top: string };
    color: string;
    condition?: string;
  }&gt;;
  nodeSize?: {
    width: number;
    height: number;
  };
  conditionRules?: any[];
}

export interface BaseNodeProps {
  id?: string;
  data: BaseNodeData;
  selected?: boolean;
}

// Handle configuration for different node types
export interface HandleConfig {
  input?: {
    show: boolean;
    position?: { top?: string; left?: string };
  };
  outputs?: Array&lt;{
    id: string;
    position: { top?: string; right?: string };
    color?: string;
    label?: string;
    removable?: boolean;
  }&gt;;
  dynamicOutputs?: boolean;
  maxOutputs?: number;
  hasAIHandles?: boolean; // Flag to indicate AI-specific handles needed
}

// Visual configuration for different node types
export interface VisualConfig {
  shape: string; // CSS classes for border-radius
  defaultIcon: string | React.ReactNode; // Fallback icon
  selectionRingColor: string; // CSS class for selection ring
  dimensions: {
    minWidth: string;
    maxWidth?: string;
    minHeight?: string;
    // Support for dynamic inline styles
    style?: React.CSSProperties;
  };
}

export interface BaseNodeConfig {
  handles: HandleConfig;
  visual: VisualConfig;
}

interface BaseNodeComponentProps extends BaseNodeProps {
  config: BaseNodeConfig;
  children?: React.ReactNode;
}

const BaseNode: React.FC&lt;BaseNodeComponentProps&gt; = ({ id, data, selected, config, children }) =&gt; {
  const isSelected = data.isSelected || selected;
  const displayName = data.name || data.label;
  const integration = data.integrationData;

  // Determine node type based on available data
  const nodeType = React.useMemo(() =&gt; {
    // Check if this is a condition node based on having conditionRules
    if (data.conditionRules || config.handles.dynamicOutputs) {
      return 'condition';
    }
    // Check if this is an AI agent
    if (integration?.id === 'ai-agent' || config.handles.hasAIHandles) {
      return 'ai-agent';
    }
    // Default to action
    return 'action';
  }, [
    data.conditionRules,
    config.handles.dynamicOutputs,
    config.handles.hasAIHandles,
    integration?.id,
  ]);

  // For AI agents, calculate which handles have incoming connections
  const aiHandleConnections = React.useMemo(() =&gt; {
    if (!config.handles.hasAIHandles || !data.edges || !id) {
      return {};
    }

    const connections = {
      ai_languageModel: false,
      ai_memory: false,
      ai_tool: false,
    };

    // Check for incoming connections to each AI handle
    data.edges.forEach((edge) =&gt; {
      if (edge.target === id) {
        switch (edge.targetHandle) {
          case 'ai_languageModel':
          case 'plus-ai_languageModel':
            connections.ai_languageModel = true;
            break;
          case 'ai_memory':
          case 'plus-ai_memory':
            connections.ai_memory = true;
            break;
          case 'ai_tool':
          case 'plus-ai_tool':
            connections.ai_tool = true;
            break;
        }
      }
    });

    return connections;
  }, [config.handles.hasAIHandles, data.edges, id]);

  // Common state
  const [isHovered, setIsHovered] = useState(false);
  const [showThreeDotMenu, setShowThreeDotMenu] = useState(false);
  const [toolbarVisible, setToolbarVisible] = useState(false);
  const hideTimeoutRef = React.useRef&lt;NodeJS.Timeout | null&gt;(null);

  // Common handlers
  const handleDelete = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    if (id &amp;&amp; data.onDelete) {
      data.onDelete(id);
    }
  };

  const handlePlay = () =&gt; {};

  const handleStop = () =&gt; {};

  const handleOpen = () =&gt; {
    if (id &amp;&amp; data.onOpenProperties) {
      data.onOpenProperties(id);
    }
  };

  const handleTest = () =&gt; {};

  const handleRename = () =&gt; {};

  const handleDeactivate = () =&gt; {};

  const handleCopy = () =&gt; {};

  const handleDuplicate = () =&gt; {};

  const handleSelectAll = () =&gt; {};

  const handleClearSelection = () =&gt; {};

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    // Only handle double-click if it's on the node itself, not on toolbar buttons
    event.stopPropagation();
    if (id &amp;&amp; data.onOpenProperties) {
      data.onOpenProperties(id);
    }
  };

  const handleMouseEnter = () =&gt; {
    if (hideTimeoutRef.current) {
      clearTimeout(hideTimeoutRef.current);
      hideTimeoutRef.current = null;
    }
    setIsHovered(true);
    setToolbarVisible(true);
  };

  const handleMouseLeave = () =&gt; {
    setIsHovered(false);
    hideTimeoutRef.current = setTimeout(() =&gt; {
      setToolbarVisible(false);
    }, 1000);
  };

  // Render icon
  const renderIcon = () =&gt; {
    if (data.icon || integration?.icon) {
      const iconSrc = data.icon || integration?.icon;
      if (typeof iconSrc === 'string' &amp;&amp; (iconSrc.startsWith('http') || iconSrc.startsWith('/'))) {
        return (
          &lt;img
            src={iconSrc}
            alt={displayName}
            className=&quot;w-6 h-6&quot;
            onError={(e) =&gt; {
              const target = e.target as HTMLImageElement;
              target.style.display = 'none';
              target.nextElementSibling?.classList.remove('hidden');
            }}
          /&gt;
        );
      }
      return &lt;span className=&quot;text-xl&quot;&gt;{iconSrc}&lt;/span&gt;;
    }

    // Fallback to default icon
    const defaultIcon = config.visual.defaultIcon;
    if (typeof defaultIcon === 'string') {
      // Handle special default icon types
      switch (defaultIcon) {
        case 'trigger-default':
          return &lt;div className=&quot;w-4 h-4 bg-green-500 rounded&quot;&gt;&lt;/div&gt;;
        case 'action-default':
          return &lt;div className=&quot;w-4 h-4 bg-blue-500 rounded&quot;&gt;&lt;/div&gt;;
        case 'condition-default':
          return &lt;div className=&quot;w-4 h-4 bg-yellow-500 rounded&quot;&gt;&lt;/div&gt;;
        default:
          return &lt;span className=&quot;text-xl&quot;&gt;{defaultIcon}&lt;/span&gt;;
      }
    }
    return defaultIcon;
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        {' '}
        {/* This container holds both the node and plus icons */}
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              ${config.visual.shape}
              ${config.visual.dimensions.minWidth}
              ${config.visual.dimensions.maxWidth ? config.visual.dimensions.maxWidth : ''}
              ${config.visual.dimensions.minHeight ? config.visual.dimensions.minHeight : ''}
              ${isSelected ? `ring-2 ring-offset-2 ring-offset-gray-900 ${config.visual.selectionRingColor}` : ''}
              ${isHovered ? `hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ${config.visual.selectionRingColor}` : ''}
            `}
            style={config.visual.dimensions.style}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Use NodeHandles for all node types to ensure consistent UX */}
            &lt;NodeHandles
              config={config.handles}
              integration={data.integrationData?.id || data.integration}
              nodeType={nodeType}
              aiHandleConnections={aiHandleConnections}
              hasOutgoingConnection={data.hasOutgoingConnection}
            /&gt;

            {/* Execution State Overlay */}
            {id &amp;&amp; &lt;ExecutionStateOverlay nodeId={id} /&gt;}

            {/* Node Icon */}
            &lt;div className=&quot;flex items-center justify-center&quot;&gt;{renderIcon()}&lt;/div&gt;

            {/* Node Toolbar */}
            &lt;NodeToolbar
              visible={toolbarVisible}
              onPlay={handlePlay}
              onStop={handleStop}
              onDelete={handleDelete}
              onMenuToggle={() =&gt; setShowThreeDotMenu(!showThreeDotMenu)}
            /&gt;

            {/* Three Dot Menu */}
            &lt;NodeMenu
              visible={showThreeDotMenu}
              onClose={() =&gt; setShowThreeDotMenu(false)}
              onOpen={handleOpen}
              onTest={handleTest}
              onRename={handleRename}
              onDeactivate={handleDeactivate}
              onCopy={handleCopy}
              onDuplicate={handleDuplicate}
              onSelectAll={handleSelectAll}
              onClearSelection={handleClearSelection}
            /&gt;

            {/* Custom children for node-specific content */}
            {children}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Only show label below node if it's not using AI handles (AI agents show label inside) */}
      {!config.handles.hasAIHandles &amp;&amp; (
        &lt;div className=&quot;mt-2 text-white text-sm font-medium ps-5 max-w-[100px] truncate&quot;&gt;
          {displayName}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default BaseNode;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 1:1 - Line 456:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/nodehandles/NodeHandles.tsx (Line 1:1 - Line 456:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup8"><code class="language-tsx text-sm text-gray-800">import React from 'react';
import { Handle, Position } from 'reactflow';
import type { HandleConfig } from './index';

interface NodeHandlesProps {
  config: HandleConfig;
  nodeType?: string;
  integration?: string;
  // Connection information for AI handles
  aiHandleConnections?: {
    ai_languageModel?: boolean;
    ai_memory?: boolean;
    ai_tool?: boolean;
  };
  // Connection state for output handles
  hasOutgoingConnection?: boolean;
}

// Handle styling based on connection type and node type
const getHandleStyle = (handleId: string, nodeType?: string) =&gt; {
  // AI-specific handle styling
  switch (handleId) {
    case 'ai_languageModel':
      return 'w-3 h-3 bg-blue-400 border-2 border-white rounded-full hover:bg-blue-300 transition-colors';
    case 'ai_embedding':
      return 'w-3 h-3 bg-indigo-400 border-2 border-white rounded-full hover:bg-indigo-300 transition-colors';
    case 'ai_vectorStore':
      return 'w-3 h-3 bg-purple-400 border-2 border-white rounded-full hover:bg-purple-300 transition-colors';
    case 'ai_tool':
      return 'w-3 h-3 bg-teal-400 border-2 border-white rounded-full hover:bg-teal-300 transition-colors';
    case 'ai_memory':
      return 'w-3 h-3 bg-orange-400 border-2 border-white rounded-full hover:bg-orange-300 transition-colors';
    default:
      // Condition node handles get different styling
      if (nodeType === 'condition') {
        if (handleId === 'default') {
          return 'w-3 h-3 bg-gray-500 border-2 border-gray-700 rounded-full hover:bg-gray-400 transition-colors';
        }
        return 'w-3 h-3 bg-green-500 border-2 border-green-700 rounded-full hover:bg-green-400 transition-colors';
      }
      // Default handle styling
      return 'w-3 h-3 bg-gray-600 border-2 border-gray-800 rounded-full hover:bg-gray-500 transition-colors';
  }
};

const NodeHandles: React.FC&lt;NodeHandlesProps&gt; = ({
  config,
  integration,
  aiHandleConnections = {},
  hasOutgoingConnection,
  nodeType,
}) =&gt; {
  // Determine if this node should have AI handles based on integration
  const isAIAgent = integration === 'ai-agent';
  // Determine if this node should have plus icons for outputs
  // Show for all node types

  return (
    &lt;&gt;
      {/* Standard Input Handle - positioned properly for AI agents */}
      {config.input?.show &amp;&amp; (
        &lt;Handle
          type=&quot;target&quot;
          position={Position.Left}
          id=&quot;main&quot;
          className=&quot;w-3 h-3 bg-gray-600 border-2 border-gray-800 hover:bg-gray-500 transition-colors&quot;
          style={{ left: '-6px', top: isAIAgent ? '50%' : '50%' }}
        /&gt;
      )}

      {/* AI-specific handles for AI Agent nodes - positioned at bottom with vertical connection lines */}
      {isAIAgent &amp;&amp; (
        &lt;&gt;
          {/* Vertical connection lines for AI handles - only show if not connected */}
          {!aiHandleConnections.ai_languageModel &amp;&amp; (
            &lt;div
              className=&quot;absolute w-px h-14 bg-gray-400&quot;
              style={{
                bottom: '-56px',
                left: '25%',
                transform: 'translateX(-50%)',
                zIndex: -1,
              }}
            /&gt;
          )}
          {!aiHandleConnections.ai_memory &amp;&amp; (
            &lt;div
              className=&quot;absolute w-px h-14 bg-gray-400&quot;
              style={{
                bottom: '-56px',
                left: '50%',
                transform: 'translateX(-50%)',
                zIndex: -1,
              }}
            /&gt;
          )}
          {!aiHandleConnections.ai_tool &amp;&amp; (
            &lt;div
              className=&quot;absolute w-px h-14 bg-gray-400&quot;
              style={{
                bottom: '-56px',
                left: '75%',
                transform: 'translateX(-50%)',
                zIndex: -1,
              }}
            /&gt;
          )}

          {/* Plus Icons for AI handles - positioned below the node - only show if not connected */}
          {!aiHandleConnections.ai_languageModel &amp;&amp; (
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Bottom}
              id=&quot;plus-ai_languageModel&quot;
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                bottom: '-58px',
                left: '25%',
                transform: 'translateX(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-blue-400 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          )}

          {!aiHandleConnections.ai_memory &amp;&amp; (
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Bottom}
              id=&quot;plus-ai_memory&quot;
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                bottom: '-58px',
                left: '50%',
                transform: 'translateX(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-orange-400 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          )}

          {!aiHandleConnections.ai_tool &amp;&amp; (
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Bottom}
              id=&quot;plus-ai_tool&quot;
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                bottom: '-58px',
                left: '75%',
                transform: 'translateX(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-teal-400 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          )}

          {/* Actual functional AI handles (visible at bottom edge of node) */}
          &lt;Handle
            type=&quot;target&quot;
            position={Position.Bottom}
            id=&quot;ai_languageModel&quot;
            className={getHandleStyle('ai_languageModel', nodeType)}
            style={{
              bottom: '-6px',
              left: '25%',
              transform: 'translateX(-50%)',
            }}
          /&gt;
          &lt;Handle
            type=&quot;target&quot;
            position={Position.Bottom}
            id=&quot;ai_memory&quot;
            className={getHandleStyle('ai_memory', nodeType)}
            style={{
              bottom: '-6px',
              left: '50%',
              transform: 'translateX(-50%)',
            }}
          /&gt;
          &lt;Handle
            type=&quot;target&quot;
            position={Position.Bottom}
            id=&quot;ai_tool&quot;
            className={getHandleStyle('ai_tool', nodeType)}
            style={{
              bottom: '-6px',
              left: '75%',
              transform: 'translateX(-50%)',
            }}
          /&gt;

          {/* Labels for bottom handles - positioned below plus icons */}
          &lt;div
            className=&quot;absolute text-xs text-blue-400 font-medium pointer-events-none&quot;
            style={{
              bottom: '-75px',
              left: '25%',
              transform: 'translateX(-50%)',
              whiteSpace: 'nowrap',
            }}
          &gt;
            LLM
          &lt;/div&gt;
          &lt;div
            className=&quot;absolute text-xs text-orange-400 font-medium pointer-events-none&quot;
            style={{
              bottom: '-75px',
              left: '50%',
              transform: 'translateX(-50%)',
              whiteSpace: 'nowrap',
            }}
          &gt;
            Mem
          &lt;/div&gt;
          &lt;div
            className=&quot;absolute text-xs text-teal-400 font-medium pointer-events-none&quot;
            style={{
              bottom: '-75px',
              left: '75%',
              transform: 'translateX(-50%)',
              whiteSpace: 'nowrap',
            }}
          &gt;
            Tool
          &lt;/div&gt;
        &lt;/&gt;
      )}

      {/* Output Handles with Plus Icons and Connection Lines */}
      {config.outputs?.map((output) =&gt; {
        return (
          &lt;React.Fragment key={output.id}&gt;
            {/* Actual Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={output.id}
              className={getHandleStyle(output.id, nodeType)}
              style={{
                right: '-6px',
                top: output.position.top || '50%',
                transform: 'translateY(-50%)',
                zIndex: 10, // Ensure handles are above other elements
              }}
            /&gt;

            {/* Output Label */}
            {output.label &amp;&amp; (
              &lt;div
                className=&quot;absolute text-xs text-gray-400 font-medium pointer-events-none&quot;
                style={{
                  right: '-60px',
                  top: output.position.top || '40%',
                  transform: 'translateY(-50%)',
                  whiteSpace: 'nowrap',
                }}
              &gt;
                {output.label}
              &lt;/div&gt;
            )}
          &lt;/React.Fragment&gt;
        );
      })}

      {/* Condition node specific connection lines and draggable plus icons */}
      {nodeType === 'condition' &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`condition-plus-${output.id}`}&gt;
            {/* Connection Line for Condition Output */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Draggable Plus Icon Handle for Condition */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (All node types except AI Agent and Condition - they have their own) */}
      {!isAIAgent &amp;&amp;
        nodeType !== 'condition' &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`plus-${output.id}`}&gt;
            {/* Connection Line for Standard Outputs */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Draggable Plus Icon Handle for Standard Outputs */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (AI Agent only) */}
      {isAIAgent &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`plus-${output.id}`}&gt;
            {/* Connection Line for Output */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Plus Icon Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}
    &lt;/&gt;
  );
};

export default NodeHandles;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/GmailTriggerNodeBody.tsx (Line 1:1 - Line 20:4), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/gmailtriggernodebody/GmailTriggerNodeBody.tsx (Line 1:1 - Line 16:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup14"><code class="language-tsx text-sm text-gray-800">import {
  CheckCircleOutlined,
  ClockCircleOutlined,
  EditOutlined,
  ExclamationCircleOutlined,
  FilterOutlined,
  MailOutlined,
  SettingOutlined,
} from '@ant-design/icons';
import { Avatar, Badge, Button, Card, Tag, Tooltip } from 'antd';
import type React from 'react';
import { Handle, Position } from 'reactflow';
import type { CustomNodeBodyProps } from '../../../../app/node-extensions/types';
import { gmailTheme } from '../../../themes/gmailTheme';
import EnhancedNodeToolbar from '../../common/EnhancedNodeToolbar';

/**
 * Gmail Trigger Node Body Component
 * Specialized UI for Gmail trigger nodes with connection status, polling indicators, and email statistics
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/GmailTriggerNodeBody.tsx (Line 15:35 - Line 359:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/gmailtriggernodebody/GmailTriggerNodeBody.tsx (Line 18:19 - Line 362:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup15"><code class="language-tsx text-sm text-gray-800">;

/**
 * Gmail Trigger Node Body Component
 * Specialized UI for Gmail trigger nodes with connection status, polling indicators, and email statistics
 */
const GmailTriggerNodeBody: React.FC&lt;CustomNodeBodyProps&gt; = ({
  nodeId,
  nodeData,
  selected,
  isHovered,
  onMouseEnter,
  onMouseLeave,
  onDelete: _onDelete,
  onEdit,
  onOpenProperties,
}) =&gt; {
  // Extract Gmail-specific configuration
  const filters = nodeData.parameters?.filters || {};
  const pollTimes = nodeData.parameters?.pollTimes || { mode: 'everyMinute' };
  const options = nodeData.parameters?.options || {};
  const simplify = nodeData.parameters?.simplify !== false;
  const credential = nodeData.parameters?.credential;

  // Mock connection status - in real implementation, this would come from credential store
  const isConnected = Boolean(credential);
  const lastSync = nodeData.lastSync || new Date().toISOString();
  const emailCount = nodeData.emailCount || 0;
  const unreadCount = nodeData.unreadCount || 0;

  // Get polling frequency display
  const getPollFrequencyDisplay = (pollTimes: any) =&gt; {
    const mode = pollTimes.mode || 'everyMinute';
    switch (mode) {
      case 'everyMinute':
        return 'Every Minute';
      case 'everyHour':
        return `Every Hour (${pollTimes.minute || 0}m)`;
      case 'everyDay':
        return `Daily ${pollTimes.hour || 9}:${String(pollTimes.minute || 0).padStart(2, '0')}`;
      case 'everyWeek':
        return `Weekly ${['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][pollTimes.weekday || 1]}`;
      case 'everyMonth':
        return `Monthly (Day ${pollTimes.dayOfMonth || 1})`;
      case 'customInterval':
        return `Every ${pollTimes.intervalMinutes || 5}m`;
      case 'customCron':
        return 'Custom Cron';
      default:
        return 'Every Minute';
    }
  };

  // Get active filters count
  const getActiveFiltersCount = (filters: any) =&gt; {
    let count = 0;
    if (filters.search) count++;
    if (filters.senderFilter) count++;
    if (filters.subjectFilter) count++;
    if (filters.labelNamesOrIds?.length &gt; 0) count++;
    if (filters.readStatus &amp;&amp; filters.readStatus !== 'all') count++;
    if (filters.hasAttachment &amp;&amp; filters.hasAttachment !== 'any') count++;
    if (filters.dateRange?.enabled) count++;
    return count;
  };

  const activeFilters = getActiveFiltersCount(filters);
  const pollFrequency = getPollFrequencyDisplay(pollTimes);

  // Enhanced toolbar actions for Gmail
  const toolbarActions = [
    {
      id: 'test-connection',
      icon: 'SyncOutlined',
      label: 'Test Connection',
      action: 'testConnection',
    },
    {
      id: 'view-emails',
      icon: 'EyeOutlined',
      label: 'Preview Emails',
      action: 'previewEmails',
    },
    {
      id: 'configure-filters',
      icon: 'FilterOutlined',
      label: 'Configure Filters',
      action: 'configureFilters',
    },
  ];

  const handleToolbarAction = (action: string) =&gt; {
    switch (action) {
      case 'testConnection':
        // TODO: Implement connection test
        break;
      case 'previewEmails':
        // TODO: Implement email preview
        break;
      case 'configureFilters':
        onOpenProperties?.();
        break;
    }
  };

  // Event handlers with debug logging
  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  const handleEditClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onEdit?.();
  };

  const handleSettingsClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;relative&quot; onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}&gt;
      {/* Enhanced Node Toolbar */}
      &lt;EnhancedNodeToolbar
        visible={isHovered &amp;&amp; selected}
        nodeId={nodeId}
        actions={toolbarActions}
        onActionClick={(actionId) =&gt; handleToolbarAction(actionId)}
        theme={gmailTheme}
      /&gt;

      {/* Gmail Trigger Input Handle (Hidden - triggers don't have inputs) */}

      {/* Output Handle */}
      &lt;Handle
        type=&quot;source&quot;
        position={Position.Right}
        id=&quot;output_0&quot;
        style={{
          background: '#ea4335',
          width: 12,
          height: 12,
          top: '50%',
          border: '2px solid #fff',
          boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
        }}
      /&gt;

      &lt;Card
        size=&quot;small&quot;
        variant=&quot;outlined&quot;
        onDoubleClick={handleDoubleClick}
        className={`
          gmail-trigger-node
          ${selected ? 'node-selected' : ''}
          ${isConnected ? 'node-connected' : 'node-disconnected'}
          transition-all duration-200 hover:shadow-md cursor-pointer
        `}
        style={{
          minWidth: 280,
          maxWidth: 320,
          borderColor: selected ? '#ea4335' : isConnected ? '#34a853' : '#fbbc04',
          borderWidth: selected ? 2 : 1,
          backgroundColor: nodeData.disabled ? '#f8f9fa' : '#fff',
          boxShadow: selected ? '0 4px 12px rgba(234, 67, 53, 0.15)' : undefined,
        }}
        styles={{ body: { padding: '16px' } }}
      &gt;
        {/* Header Section */}
        &lt;div className=&quot;flex items-start gap-3 mb-3&quot;&gt;
          {/* Gmail Logo Avatar */}
          &lt;Avatar
            size={36}
            style={{
              backgroundColor: '#ea4335',
              flexShrink: 0,
            }}
          &gt;
            &lt;MailOutlined style={{ fontSize: '20px', color: '#fff' }} /&gt;
          &lt;/Avatar&gt;

          {/* Node Info */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2 mb-1&quot;&gt;
              &lt;div className=&quot;font-semibold text-sm truncate flex-1&quot;&gt;
                {nodeData.name || 'Gmail Trigger'}
              &lt;/div&gt;
              {isConnected ? (
                &lt;CheckCircleOutlined className=&quot;text-green-500 text-xs&quot; /&gt;
              ) : (
                &lt;ExclamationCircleOutlined className=&quot;text-yellow-500 text-xs&quot; /&gt;
              )}

              {/* Standard Edit/Settings Buttons */}
              &lt;div className=&quot;flex gap-1 ml-2&quot;&gt;
                &lt;Tooltip title=&quot;Edit&quot;&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    icon={&lt;EditOutlined /&gt;}
                    onClick={handleEditClick}
                    className=&quot;text-gray-500 hover:text-gray-700&quot;
                  /&gt;
                &lt;/Tooltip&gt;
                &lt;Tooltip title=&quot;Settings&quot;&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    icon={&lt;SettingOutlined /&gt;}
                    onClick={handleSettingsClick}
                    className=&quot;text-gray-500 hover:text-gray-700&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div className=&quot;text-xs text-gray-500 mb-2&quot;&gt;
              {isConnected ? 'Connected to Gmail' : 'Not connected'}
            &lt;/div&gt;

            {/* Connection Status */}
            &lt;div className=&quot;flex gap-1 mb-2&quot;&gt;
              &lt;Tag color={isConnected ? 'green' : 'orange'} style={{ margin: 0, fontSize: '10px' }}&gt;
                {isConnected ? 'Connected' : 'Setup Required'}
              &lt;/Tag&gt;
              {isConnected &amp;&amp; (
                &lt;Tag color=&quot;blue&quot; style={{ margin: 0, fontSize: '10px' }}&gt;
                  &lt;ClockCircleOutlined style={{ marginRight: '2px' }} /&gt;
                  {pollFrequency}
                &lt;/Tag&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Email Statistics */}
        {isConnected &amp;&amp; (
          &lt;div className=&quot;bg-gray-50 rounded-lg p-3 mb-3&quot;&gt;
            &lt;div className=&quot;grid grid-cols-3 gap-2 text-center&quot;&gt;
              &lt;div&gt;
                &lt;div className=&quot;text-lg font-semibold text-blue-600&quot;&gt;{emailCount}&lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Recent&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;div className=&quot;text-lg font-semibold text-red-600&quot;&gt;{unreadCount}&lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Unread&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;div className=&quot;text-lg font-semibold text-green-600&quot;&gt;{activeFilters}&lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Filters&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Configuration Summary */}
        &lt;div className=&quot;space-y-2&quot;&gt;
          {/* Filters Summary */}
          {activeFilters &gt; 0 &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;FilterOutlined className=&quot;text-blue-500 text-xs&quot; /&gt;
              &lt;span className=&quot;text-xs text-gray-600&quot;&gt;
                {activeFilters} filter{activeFilters !== 1 ? 's' : ''} active
              &lt;/span&gt;
            &lt;/div&gt;
          )}

          {/* Output Format */}
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;Output:&lt;/span&gt;
            &lt;Badge
              count={simplify ? 'Simplified' : 'Full'}
              style={{
                backgroundColor: simplify ? '#52c41a' : '#1890ff',
                fontSize: '9px',
                height: '16px',
                lineHeight: '14px',
              }}
            /&gt;
          &lt;/div&gt;

          {/* Advanced Options */}
          {options.downloadAttachments &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-xs text-gray-500&quot;&gt;Attachments:&lt;/span&gt;
              &lt;Badge
                count=&quot;Download&quot;
                style={{
                  backgroundColor: '#fa8c16',
                  fontSize: '9px',
                  height: '16px',
                  lineHeight: '14px',
                }}
              /&gt;
            &lt;/div&gt;
          )}

          {options.markAsRead &amp;&amp; (
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-xs text-gray-500&quot;&gt;Auto-mark:&lt;/span&gt;
              &lt;Badge
                count=&quot;Read&quot;
                style={{
                  backgroundColor: '#13c2c2',
                  fontSize: '9px',
                  height: '16px',
                  lineHeight: '14px',
                }}
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;

        {/* Last Sync Info */}
        {isConnected &amp;&amp; (
          &lt;div className=&quot;mt-3 pt-2 border-t border-gray-100&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between text-xs text-gray-500&quot;&gt;
              &lt;span&gt;Last sync:&lt;/span&gt;
              &lt;span&gt;{new Date(lastSync).toLocaleTimeString()}&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Polling Status Indicator */}
        {isConnected &amp;&amp; (
          &lt;div className=&quot;absolute top-2 right-2&quot;&gt;
            &lt;Tooltip title=&quot;Polling active&quot;&gt;
              &lt;div className=&quot;w-2 h-2 rounded-full bg-green-400 animate-pulse&quot; /&gt;
            &lt;/Tooltip&gt;
          &lt;/div&gt;
        )}

        {/* Notes */}
        {nodeData.notes &amp;&amp; (
          &lt;div className=&quot;mt-3 p-2 bg-blue-50 rounded text-xs border border-blue-100&quot;&gt;
            {nodeData.notes}
          &lt;/div&gt;
        )}
      &lt;/Card&gt;
    &lt;/div&gt;
  );
};

export default GmailTriggerNodeBody;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/GmailPropertiesPanel.tsx (Line 1:1 - Line 32:6), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/gmailpropertiespanel/GmailPropertiesPanel.tsx (Line 1:1 - Line 31:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup17"><code class="language-tsx text-sm text-gray-800">import {
  CheckCircleOutlined,
  ExclamationCircleOutlined,
  ExperimentOutlined,
  ExportOutlined,
  FilterOutlined,
  MailOutlined,
  SyncOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Collapse,
  DatePicker,
  Form,
  Input,
  InputNumber,
  Select,
  Space,
  Spin,
  Switch,
  Tabs,
  Tag,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type { CustomPropertiesPanelProps } from '../../../../app/node-extensions/types';
import PropertyField from '../../common/PropertyField';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/GmailPropertiesPanel.tsx (Line 30:29 - Line 730:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/GmailNode/gmailpropertiespanel/GmailPropertiesPanel.tsx (Line 33:19 - Line 733:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup18"><code class="language-tsx text-sm text-gray-800">;

const { TabPane } = Tabs;
const { Panel } = Collapse;
const { Option } = Select;
const { RangePicker } = DatePicker;

/**
 * Gmail Properties Panel Component
 * Advanced tabbed configuration interface for Gmail trigger nodes
 */
const GmailPropertiesPanel: React.FC&lt;CustomPropertiesPanelProps&gt; = ({
  nodeId: _nodeId,
  nodeData,
  onClose,
  onTest,
}) =&gt; {
  const [form] = Form.useForm();
  const [activeTab, setActiveTab] = useState('connection');
  const [isTestingConnection, setIsTestingConnection] = useState(false);

  // Mock state for form values (to be implemented)
  const [formState] = useState&lt;Record&lt;string, any&gt;&gt;({});

  // Mock function for property changes (to be implemented)
  const handlePropertyChange = (_key: string, _value: any) =&gt; {};
  const [connectionStatus, setConnectionStatus] = useState&lt;
    'unknown' | 'connected' | 'error' | 'testing'
  &gt;('unknown');
  const [testResults, setTestResults] = useState&lt;any&gt;(null);

  // Initialize form with current values
  useEffect(() =&gt; {
    if (formState) {
      form.setFieldsValue(formState);
    }
  }, [formState, form]);

  // Handle form value changes
  const handleFormChange = (changedFields: any, _allFields: any) =&gt; {
    Object.keys(changedFields).forEach((key) =&gt; {
      handlePropertyChange(key, changedFields[key]);
    });
  };

  // Test Gmail connection
  const handleTestConnection = async () =&gt; {
    setIsTestingConnection(true);
    setConnectionStatus('testing');

    try {
      const result = await onTest?.();
      if (result?.success) {
        setConnectionStatus('connected');
        setTestResults(result);
      } else {
        setConnectionStatus('error');
        setTestResults(result);
      }
    } catch (_error) {
      setConnectionStatus('error');
      setTestResults({ success: false, message: 'Connection test failed' });
    } finally {
      setIsTestingConnection(false);
    }
  };

  // Preview emails with current configuration
  const handlePreviewEmails = async () =&gt; {
    try {
      const result = await onTest?.();
      setTestResults(result);
    } catch (_error) {}
  };

  // Polling frequency options
  const pollModeOptions = [
    { label: 'Every Minute', value: 'everyMinute' },
    { label: 'Every Hour', value: 'everyHour' },
    { label: 'Every Day', value: 'everyDay' },
    { label: 'Every Week', value: 'everyWeek' },
    { label: 'Every Month', value: 'everyMonth' },
    { label: 'Custom Interval', value: 'customInterval' },
    { label: 'Custom Cron', value: 'customCron' },
  ];

  // Gmail labels
  const gmailLabels = [
    { label: 'INBOX', value: 'INBOX' },
    { label: 'SENT', value: 'SENT' },
    { label: 'DRAFT', value: 'DRAFT' },
    { label: 'SPAM', value: 'SPAM' },
    { label: 'TRASH', value: 'TRASH' },
    { label: 'IMPORTANT', value: 'IMPORTANT' },
    { label: 'STARRED', value: 'STARRED' },
    { label: 'UNREAD', value: 'UNREAD' },
  ];

  return (
    &lt;div className=&quot;gmail-properties-panel h-full flex flex-col bg-white&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex items-center gap-3 p-4 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50&quot;&gt;
        &lt;div className=&quot;w-10 h-10 rounded-lg bg-red-500 flex items-center justify-center&quot;&gt;
          &lt;MailOutlined className=&quot;text-white text-lg&quot; /&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex-1&quot;&gt;
          &lt;h3 className=&quot;text-lg font-semibold text-gray-900&quot;&gt;Gmail Trigger Configuration&lt;/h3&gt;
          &lt;p className=&quot;text-sm text-gray-600&quot;&gt;Configure Gmail email monitoring and filtering&lt;/p&gt;
        &lt;/div&gt;
        &lt;Space&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;ExperimentOutlined /&gt;}
            onClick={handleTestConnection}
            loading={isTestingConnection}
          &gt;
            Test
          &lt;/Button&gt;
          &lt;Button type=&quot;default&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 overflow-hidden&quot;&gt;
        &lt;Form form={form} layout=&quot;vertical&quot; onValuesChange={handleFormChange} className=&quot;h-full&quot;&gt;
          &lt;Tabs
            activeKey={activeTab}
            onChange={setActiveTab}
            className=&quot;h-full gmail-tabs&quot;
            tabBarStyle={{
              paddingLeft: '16px',
              paddingRight: '16px',
              marginBottom: 0,
            }}
          &gt;
            {/* Connection Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;MailOutlined /&gt;
                  Connection
                  {connectionStatus === 'connected' &amp;&amp; (
                    &lt;CheckCircleOutlined className=&quot;text-green-500&quot; /&gt;
                  )}
                  {connectionStatus === 'error' &amp;&amp; (
                    &lt;ExclamationCircleOutlined className=&quot;text-red-500&quot; /&gt;
                  )}
                &lt;/span&gt;
              }
              key=&quot;connection&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                {/* Credential Selection */}
                &lt;PropertyField
                  property={{
                    name: 'credential',
                    displayName: 'Gmail Credential',
                    type: 'credentialsSelect',
                    description: 'Gmail OAuth2 credentials for accessing the API',
                    required: true,
                    credentialTypes: ['gmailOAuth2'],
                    default: '',
                  }}
                  value={formState?.credential}
                  context={{ nodeData, formState }}
                  onChange={(value) =&gt; handlePropertyChange('credential', value)}
                /&gt;

                {/* Connection Status */}
                {connectionStatus !== 'unknown' &amp;&amp; (
                  &lt;Alert
                    message={
                      connectionStatus === 'connected'
                        ? 'Successfully connected to Gmail'
                        : connectionStatus === 'error'
                          ? 'Failed to connect to Gmail'
                          : 'Testing connection...'
                    }
                    type={
                      connectionStatus === 'connected'
                        ? 'success'
                        : connectionStatus === 'error'
                          ? 'error'
                          : 'info'
                    }
                    showIcon
                    action={
                      connectionStatus === 'error' &amp;&amp; (
                        &lt;Button size=&quot;small&quot; onClick={handleTestConnection}&gt;
                          Retry
                        &lt;/Button&gt;
                      )
                    }
                  /&gt;
                )}

                {/* Event Type */}
                &lt;Form.Item
                  label=&quot;Trigger Event&quot;
                  name={['event']}
                  tooltip=&quot;The Gmail event that will trigger the workflow&quot;
                &gt;
                  &lt;Select placeholder=&quot;Select trigger event&quot; defaultValue=&quot;messageReceived&quot;&gt;
                    &lt;Option value=&quot;messageReceived&quot;&gt;Message Received&lt;/Option&gt;
                    &lt;Option value=&quot;messageSent&quot;&gt;Message Sent&lt;/Option&gt;
                    &lt;Option value=&quot;messageRead&quot;&gt;Message Read&lt;/Option&gt;
                    &lt;Option value=&quot;messageStarred&quot;&gt;Message Starred&lt;/Option&gt;
                    &lt;Option value=&quot;messageDeleted&quot;&gt;Message Deleted&lt;/Option&gt;
                    &lt;Option value=&quot;newThread&quot;&gt;New Thread&lt;/Option&gt;
                    &lt;Option value=&quot;labelAdded&quot;&gt;Label Added&lt;/Option&gt;
                    &lt;Option value=&quot;labelRemoved&quot;&gt;Label Removed&lt;/Option&gt;
                  &lt;/Select&gt;
                &lt;/Form.Item&gt;

                {/* Simplify Response */}
                &lt;Form.Item
                  label=&quot;Response Format&quot;
                  name={['simplify']}
                  tooltip=&quot;Choose between simplified or full email data&quot;
                  valuePropName=&quot;checked&quot;
                &gt;
                  &lt;Switch
                    checkedChildren=&quot;Simplified&quot;
                    unCheckedChildren=&quot;Full Data&quot;
                    defaultChecked={true}
                  /&gt;
                &lt;/Form.Item&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Polling Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;SyncOutlined /&gt;
                  Polling
                &lt;/span&gt;
              }
              key=&quot;polling&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;Collapse defaultActiveKey={['basic']} ghost&gt;
                  &lt;Panel header=&quot;Polling Configuration&quot; key=&quot;basic&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Polling Mode */}
                      &lt;Form.Item
                        label=&quot;Polling Frequency&quot;
                        name={['pollTimes', 'mode']}
                        tooltip=&quot;How often to check for new emails&quot;
                      &gt;
                        &lt;Select placeholder=&quot;Select frequency&quot; defaultValue=&quot;everyMinute&quot;&gt;
                          {pollModeOptions.map((option) =&gt; (
                            &lt;Option key={option.value} value={option.value}&gt;
                              {option.label}
                            &lt;/Option&gt;
                          ))}
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;

                      {/* Dynamic polling fields based on mode */}
                      &lt;Form.Item
                        noStyle
                        shouldUpdate={(prevValues, currentValues) =&gt;
                          prevValues.pollTimes?.mode !== currentValues.pollTimes?.mode
                        }
                      &gt;
                        {({ getFieldValue }) =&gt; {
                          const mode = getFieldValue(['pollTimes', 'mode']);

                          return (
                            &lt;div className=&quot;space-y-4&quot;&gt;
                              {mode === 'customInterval' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Interval (Minutes)&quot;
                                  name={['pollTimes', 'intervalMinutes']}
                                  tooltip=&quot;Check every X minutes&quot;
                                &gt;
                                  &lt;InputNumber min={1} max={1440} defaultValue={5} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {['everyHour', 'everyDay', 'everyWeek', 'everyMonth'].includes(
                                mode
                              ) &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Minute&quot;
                                  name={['pollTimes', 'minute']}
                                  tooltip=&quot;Minute of the hour (0-59)&quot;
                                &gt;
                                  &lt;InputNumber min={0} max={59} defaultValue={0} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {['everyDay', 'everyWeek', 'everyMonth'].includes(mode) &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Hour&quot;
                                  name={['pollTimes', 'hour']}
                                  tooltip=&quot;Hour of the day (0-23)&quot;
                                &gt;
                                  &lt;InputNumber min={0} max={23} defaultValue={9} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {mode === 'everyWeek' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Day of Week&quot;
                                  name={['pollTimes', 'weekday']}
                                  tooltip=&quot;Which day of the week&quot;
                                &gt;
                                  &lt;Select defaultValue={1}&gt;
                                    &lt;Option value={1}&gt;Monday&lt;/Option&gt;
                                    &lt;Option value={2}&gt;Tuesday&lt;/Option&gt;
                                    &lt;Option value={3}&gt;Wednesday&lt;/Option&gt;
                                    &lt;Option value={4}&gt;Thursday&lt;/Option&gt;
                                    &lt;Option value={5}&gt;Friday&lt;/Option&gt;
                                    &lt;Option value={6}&gt;Saturday&lt;/Option&gt;
                                    &lt;Option value={0}&gt;Sunday&lt;/Option&gt;
                                  &lt;/Select&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {mode === 'everyMonth' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Day of Month&quot;
                                  name={['pollTimes', 'dayOfMonth']}
                                  tooltip=&quot;Day of the month (1-31)&quot;
                                &gt;
                                  &lt;InputNumber min={1} max={31} defaultValue={1} /&gt;
                                &lt;/Form.Item&gt;
                              )}

                              {mode === 'customCron' &amp;&amp; (
                                &lt;Form.Item
                                  label=&quot;Cron Expression&quot;
                                  name={['pollTimes', 'cronExpression']}
                                  tooltip='Custom cron expression (e.g., &quot;0 9 * * MON&quot; for 9 AM every Monday)'
                                &gt;
                                  &lt;Input placeholder=&quot;0 9 * * MON&quot; /&gt;
                                &lt;/Form.Item&gt;
                              )}
                            &lt;/div&gt;
                          );
                        }}
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;
                &lt;/Collapse&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Filters Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;FilterOutlined /&gt;
                  Filters
                  &lt;Badge count={0} size=&quot;small&quot; /&gt;
                &lt;/span&gt;
              }
              key=&quot;filters&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;Collapse ghost&gt;
                  &lt;Panel header=&quot;Basic Filters&quot; key=&quot;basic&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Gmail Labels */}
                      &lt;Form.Item
                        label=&quot;Gmail Labels&quot;
                        name={['filters', 'labelNamesOrIds']}
                        tooltip=&quot;Filter by specific Gmail labels&quot;
                      &gt;
                        &lt;Select
                          mode=&quot;multiple&quot;
                          placeholder=&quot;Select labels&quot;
                          defaultValue={['INBOX']}
                          allowClear
                        &gt;
                          {gmailLabels.map((label) =&gt; (
                            &lt;Option key={label.value} value={label.value}&gt;
                              {label.label}
                            &lt;/Option&gt;
                          ))}
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;

                      {/* Read Status */}
                      &lt;Form.Item
                        label=&quot;Read Status&quot;
                        name={['filters', 'readStatus']}
                        tooltip=&quot;Filter by email read status&quot;
                      &gt;
                        &lt;Select placeholder=&quot;Select read status&quot; defaultValue=&quot;all&quot;&gt;
                          &lt;Option value=&quot;all&quot;&gt;All&lt;/Option&gt;
                          &lt;Option value=&quot;unread&quot;&gt;Unread Only&lt;/Option&gt;
                          &lt;Option value=&quot;read&quot;&gt;Read Only&lt;/Option&gt;
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;

                      {/* Has Attachment */}
                      &lt;Form.Item
                        label=&quot;Attachment Filter&quot;
                        name={['filters', 'hasAttachment']}
                        tooltip=&quot;Filter by attachment presence&quot;
                      &gt;
                        &lt;Select placeholder=&quot;Select attachment filter&quot; defaultValue=&quot;any&quot;&gt;
                          &lt;Option value=&quot;any&quot;&gt;Any&lt;/Option&gt;
                          &lt;Option value=&quot;true&quot;&gt;Has Attachments&lt;/Option&gt;
                          &lt;Option value=&quot;false&quot;&gt;No Attachments&lt;/Option&gt;
                        &lt;/Select&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;

                  &lt;Panel header=&quot;Advanced Filters&quot; key=&quot;advanced&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Search Query */}
                      &lt;Form.Item
                        label=&quot;Gmail Search Query&quot;
                        name={['filters', 'search']}
                        tooltip='Gmail search query (e.g., &quot;has:attachment from:support@company.com&quot;)'
                      &gt;
                        &lt;Input.TextArea
                          rows={3}
                          placeholder='has:attachment from:user@example.com subject:&quot;urgent&quot;'
                        /&gt;
                      &lt;/Form.Item&gt;

                      {/* Sender Filter */}
                      &lt;Form.Item
                        label=&quot;Sender Filter&quot;
                        name={['filters', 'senderFilter']}
                        tooltip=&quot;Filter by sender email or name (supports wildcards)&quot;
                      &gt;
                        &lt;Input placeholder=&quot;support@example.com or *@company.com&quot; /&gt;
                      &lt;/Form.Item&gt;

                      {/* Subject Filter */}
                      &lt;Form.Item
                        label=&quot;Subject Filter&quot;
                        name={['filters', 'subjectFilter']}
                        tooltip=&quot;Filter by email subject (case-insensitive)&quot;
                      &gt;
                        &lt;Input placeholder=&quot;Contains this text in subject&quot; /&gt;
                      &lt;/Form.Item&gt;

                      {/* Date Range */}
                      &lt;Form.Item label=&quot;Date Range Filter&quot; tooltip=&quot;Filter emails by date range&quot;&gt;
                        &lt;div className=&quot;space-y-2&quot;&gt;
                          &lt;Form.Item
                            name={['filters', 'dateRange', 'enabled']}
                            valuePropName=&quot;checked&quot;
                            style={{ marginBottom: 8 }}
                          &gt;
                            &lt;Switch size=&quot;small&quot; /&gt;
                          &lt;/Form.Item&gt;

                          &lt;Form.Item
                            noStyle
                            shouldUpdate={(prevValues, currentValues) =&gt;
                              prevValues.filters?.dateRange?.enabled !==
                              currentValues.filters?.dateRange?.enabled
                            }
                          &gt;
                            {({ getFieldValue }) =&gt; {
                              const enabled = getFieldValue(['filters', 'dateRange', 'enabled']);

                              return enabled ? (
                                &lt;Form.Item
                                  name={['filters', 'dateRange', 'range']}
                                  style={{ marginBottom: 0 }}
                                &gt;
                                  &lt;RangePicker showTime /&gt;
                                &lt;/Form.Item&gt;
                              ) : null;
                            }}
                          &lt;/Form.Item&gt;
                        &lt;/div&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;

                  &lt;Panel header=&quot;Inclusion Options&quot; key=&quot;inclusion&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Include Spam and Trash */}
                      &lt;Form.Item
                        label=&quot;Include Spam and Trash&quot;
                        name={['filters', 'includeSpamTrash']}
                        tooltip=&quot;Include emails from spam and trash folders&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;

                      {/* Include Drafts */}
                      &lt;Form.Item
                        label=&quot;Include Drafts&quot;
                        name={['filters', 'includeDrafts']}
                        tooltip=&quot;Include draft emails&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;
                &lt;/Collapse&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Output Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;ExportOutlined /&gt;
                  Output
                &lt;/span&gt;
              }
              key=&quot;output&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;Collapse defaultActiveKey={['processing']} ghost&gt;
                  &lt;Panel header=&quot;Email Processing&quot; key=&quot;processing&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Max Results */}
                      &lt;Form.Item
                        label=&quot;Max Results&quot;
                        name={['options', 'maxResults']}
                        tooltip=&quot;Maximum number of emails to process per poll&quot;
                      &gt;
                        &lt;InputNumber min={1} max={500} defaultValue={1} /&gt;
                      &lt;/Form.Item&gt;

                      {/* Mark as Read */}
                      &lt;Form.Item
                        label=&quot;Mark as Read&quot;
                        name={['options', 'markAsRead']}
                        tooltip=&quot;Automatically mark processed emails as read&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;

                      {/* Add Label */}
                      &lt;Form.Item
                        label=&quot;Add Label&quot;
                        name={['options', 'addLabel']}
                        tooltip=&quot;Label to add to processed emails&quot;
                      &gt;
                        &lt;Input placeholder=&quot;processed&quot; /&gt;
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;

                  &lt;Panel header=&quot;Attachment Handling&quot; key=&quot;attachments&quot;&gt;
                    &lt;div className=&quot;space-y-4&quot;&gt;
                      {/* Download Attachments */}
                      &lt;Form.Item
                        label=&quot;Download Attachments&quot;
                        name={['options', 'downloadAttachments']}
                        tooltip=&quot;Automatically download email attachments&quot;
                        valuePropName=&quot;checked&quot;
                      &gt;
                        &lt;Switch /&gt;
                      &lt;/Form.Item&gt;

                      &lt;Form.Item
                        noStyle
                        shouldUpdate={(prevValues, currentValues) =&gt;
                          prevValues.options?.downloadAttachments !==
                          currentValues.options?.downloadAttachments
                        }
                      &gt;
                        {({ getFieldValue }) =&gt; {
                          const downloadAttachments = getFieldValue([
                            'options',
                            'downloadAttachments',
                          ]);

                          return downloadAttachments ? (
                            &lt;div className=&quot;space-y-4&quot;&gt;
                              {/* Attachment Prefix */}
                              &lt;Form.Item
                                label=&quot;Attachment Prefix&quot;
                                name={['options', 'attachmentPrefix']}
                                tooltip=&quot;Prefix to add to downloaded attachment filenames&quot;
                              &gt;
                                &lt;Input placeholder=&quot;gmail_&quot; /&gt;
                              &lt;/Form.Item&gt;

                              {/* Max Attachment Size */}
                              &lt;Form.Item
                                label=&quot;Max Attachment Size (MB)&quot;
                                name={['options', 'maxAttachmentSize']}
                                tooltip=&quot;Maximum size of attachments to download (in MB)&quot;
                              &gt;
                                &lt;InputNumber min={1} max={25} defaultValue={10} /&gt;
                              &lt;/Form.Item&gt;
                            &lt;/div&gt;
                          ) : null;
                        }}
                      &lt;/Form.Item&gt;
                    &lt;/div&gt;
                  &lt;/Panel&gt;
                &lt;/Collapse&gt;
              &lt;/div&gt;
            &lt;/TabPane&gt;

            {/* Test Tab */}
            &lt;TabPane
              tab={
                &lt;span className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;ExperimentOutlined /&gt;
                  Test
                &lt;/span&gt;
              }
              key=&quot;test&quot;
            &gt;
              &lt;div className=&quot;p-4 space-y-6&quot;&gt;
                &lt;div className=&quot;text-center&quot;&gt;
                  &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot;&gt;
                    &lt;Button
                      type=&quot;primary&quot;
                      size=&quot;large&quot;
                      icon={&lt;ExperimentOutlined /&gt;}
                      onClick={handleTestConnection}
                      loading={isTestingConnection}
                    &gt;
                      Test Gmail Connection
                    &lt;/Button&gt;

                    &lt;Button
                      type=&quot;default&quot;
                      size=&quot;large&quot;
                      icon={&lt;MailOutlined /&gt;}
                      onClick={handlePreviewEmails}
                      disabled={connectionStatus !== 'connected'}
                    &gt;
                      Preview Emails
                    &lt;/Button&gt;
                  &lt;/Space&gt;
                &lt;/div&gt;

                {/* Test Results */}
                {testResults &amp;&amp; (
                  &lt;Card title=&quot;Test Results&quot; size=&quot;small&quot; variant=&quot;outlined&quot;&gt;
                    {isTestingConnection ? (
                      &lt;div className=&quot;text-center&quot;&gt;
                        &lt;Spin size=&quot;large&quot; /&gt;
                        &lt;p className=&quot;mt-4 text-gray-600&quot;&gt;Testing connection...&lt;/p&gt;
                      &lt;/div&gt;
                    ) : (
                      &lt;div className=&quot;space-y-3&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                          &lt;span className=&quot;font-medium&quot;&gt;Status:&lt;/span&gt;
                          &lt;Tag color={testResults.success ? 'green' : 'red'}&gt;
                            {testResults.success ? 'Success' : 'Failed'}
                          &lt;/Tag&gt;
                        &lt;/div&gt;

                        {testResults.message &amp;&amp; (
                          &lt;div&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;Message:&lt;/span&gt;
                            &lt;p className=&quot;mt-1 text-gray-600&quot;&gt;{testResults.message}&lt;/p&gt;
                          &lt;/div&gt;
                        )}

                        {testResults.data &amp;&amp; Array.isArray(testResults.data) &amp;&amp; (
                          &lt;div&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;Emails Found:&lt;/span&gt;
                            &lt;p className=&quot;mt-1 text-gray-600&quot;&gt;{testResults.data.length} emails&lt;/p&gt;

                            {testResults.data.slice(0, 3).map((email: any, index: number) =&gt; (
                              &lt;div key={index} className=&quot;mt-2 p-2 bg-gray-50 rounded text-sm&quot;&gt;
                                &lt;div&gt;
                                  &lt;strong&gt;From:&lt;/strong&gt; {email.from || 'N/A'}
                                &lt;/div&gt;
                                &lt;div&gt;
                                  &lt;strong&gt;Subject:&lt;/strong&gt; {email.subject || 'N/A'}
                                &lt;/div&gt;
                                &lt;div&gt;
                                  &lt;strong&gt;Date:&lt;/strong&gt; {email.date || 'N/A'}
                                &lt;/div&gt;
                              &lt;/div&gt;
                            ))}
                          &lt;/div&gt;
                        )}
                      &lt;/div&gt;
                    )}
                  &lt;/Card&gt;
                )}
              &lt;/div&gt;
            &lt;/TabPane&gt;
          &lt;/Tabs&gt;
        &lt;/Form&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default GmailPropertiesPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/DatabaseNode/DatabaseNodeBody.tsx (Line 1:1 - Line 355:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/nodes/DatabaseNode/databasenodebody/DatabaseNodeBody.tsx (Line 5:1 - Line 359:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup20"><code class="language-tsx text-sm text-gray-800">/**
 * Database Node Body Component
 * Specialized UI for database operation nodes with connection status and query visualization
 */

import {
  CheckCircleOutlined,
  DatabaseOutlined,
  DisconnectOutlined,
  ExclamationCircleOutlined,
  SyncOutlined,
} from '@ant-design/icons';
import { Avatar, Badge, Card, Progress, Tag } from 'antd';
import type React from 'react';
import { useState } from 'react';
import { Handle, Position } from 'reactflow';
import { useNodeTheme } from '../../../../app/node-extensions/themes';
import type { CustomNodeBodyProps } from '../../../../app/node-extensions/types';
import { createStatusBadge, createTextBadge, EnhancedNodeToolbar } from '../../common';

const DatabaseNodeBody: React.FC&lt;CustomNodeBodyProps&gt; = ({
  nodeId,
  nodeData,
  selected,
  isHovered,
  onMouseEnter,
  onMouseLeave,
  onDelete,
  onOpenProperties: _onOpenProperties,
  theme: propTheme,
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [connectionStatus, setConnectionStatus] = useState&lt;
    'connected' | 'connecting' | 'disconnected' | 'error'
  &gt;('disconnected');

  // Extract database-specific configuration
  const operation = nodeData.parameters?.operation || 'select';
  const database = nodeData.parameters?.database || 'PostgreSQL';
  const table = nodeData.parameters?.table || 'users';
  const queryLimit = nodeData.parameters?.limit || 100;
  const connectionString = nodeData.parameters?.connection;

  // Database type styling
  const getDatabaseInfo = () =&gt; {
    const dbType = database.toLowerCase();
    if (dbType.includes('postgres')) {
      return { color: '#336791', icon: '🐘', name: 'PostgreSQL' };
    } else if (dbType.includes('mysql')) {
      return { color: '#4479A1', icon: '🐬', name: 'MySQL' };
    } else if (dbType.includes('mongo')) {
      return { color: '#47A248', icon: '🍃', name: 'MongoDB' };
    } else if (dbType.includes('redis')) {
      return { color: '#DC382D', icon: '📦', name: 'Redis' };
    } else if (dbType.includes('sqlite')) {
      return { color: '#003B57', icon: '💾', name: 'SQLite' };
    } else {
      return { color: '#4169E1', icon: '🗃️', name: 'Database' };
    }
  };

  const dbInfo = getDatabaseInfo();

  // Connection status styling
  const getConnectionStatusInfo = () =&gt; {
    switch (connectionStatus) {
      case 'connected':
        return {
          icon: &lt;CheckCircleOutlined /&gt;,
          color: theme.colors.success,
          text: 'Connected',
        };
      case 'connecting':
        return {
          icon: &lt;SyncOutlined spin /&gt;,
          color: theme.colors.info,
          text: 'Connecting',
        };
      case 'error':
        return {
          icon: &lt;ExclamationCircleOutlined /&gt;,
          color: theme.colors.error,
          text: 'Error',
        };
      default:
        return {
          icon: &lt;DisconnectOutlined /&gt;,
          color: theme.colors.textSecondary,
          text: 'Disconnected',
        };
    }
  };

  const statusInfo = getConnectionStatusInfo();

  // Operation type styling
  const getOperationColor = () =&gt; {
    switch (operation.toLowerCase()) {
      case 'select':
      case 'find':
      case 'get':
        return theme.colors.info;
      case 'insert':
      case 'create':
        return theme.colors.success;
      case 'update':
      case 'modify':
        return theme.colors.warning;
      case 'delete':
      case 'remove':
        return theme.colors.error;
      default:
        return theme.colors.primary;
    }
  };

  // Toolbar handlers
  const handlePlay = () =&gt; {
    setConnectionStatus('connecting');
    // Simulate connection process
    setTimeout(() =&gt; {
      setConnectionStatus(Math.random() &gt; 0.2 ? 'connected' : 'error');
    }, 2000);
  };

  const handleStop = () =&gt; {
    setConnectionStatus('disconnected');
  };

  const handleDelete = () =&gt; {
    onDelete?.();
  };

  const handleMenuToggle = (_nodeId: string) =&gt; {};

  // Generate badges
  const badges = [
    createStatusBadge(
      connectionStatus === 'connected'
        ? 'success'
        : connectionStatus === 'error'
          ? 'error'
          : 'info',
      'top-right'
    ),
    createTextBadge(operation.toUpperCase(), 'top-left', '#ffffff', getOperationColor()),
  ];

  if (queryLimit &gt; 1000) {
    badges.push(createTextBadge('LARGE', 'bottom-right', '#ffffff', theme.colors.warning));
  }

  return (
    &lt;div className=&quot;relative&quot; onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}&gt;
      {/* Enhanced Node Toolbar */}
      &lt;EnhancedNodeToolbar
        nodeId={nodeId}
        visible={isHovered &amp;&amp; selected}
        onActionClick={(actionId, nodeId) =&gt; {
          switch (actionId) {
            case 'play':
              handlePlay();
              break;
            case 'stop':
              handleStop();
              break;
            case 'delete':
              handleDelete();
              break;
            default:
              handleMenuToggle(nodeId);
          }
        }}
        theme={theme}
      /&gt;

      {/* Badges */}
      {badges.map((badge) =&gt; (
        &lt;div
          key={badge.id}
          className=&quot;absolute z-10&quot;
          style={{
            ...{
              'top-left': { top: '-6px', left: '-6px' },
              'top-right': { top: '-6px', right: '-6px' },
              'bottom-left': { bottom: '-6px', left: '-6px' },
              'bottom-right': { bottom: '-6px', right: '-6px' },
            }[badge.position],
          }}
        &gt;
          &lt;div
            style={{
              backgroundColor: badge.backgroundColor,
              color: badge.color,
              fontSize: theme.typography.fontSize.xs,
              fontWeight: theme.typography.fontWeight.medium,
              borderRadius: theme.borderRadius.sm,
              padding: '2px 6px',
              minWidth: '18px',
              height: '18px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              boxShadow: theme.shadows.sm,
            }}
          &gt;
            {badge.icon &amp;&amp; (
              &lt;span style={{ marginRight: badge.text ? '2px' : '0' }}&gt;{badge.icon}&lt;/span&gt;
            )}
            {badge.text &amp;&amp; &lt;span&gt;{badge.text}&lt;/span&gt;}
          &lt;/div&gt;
        &lt;/div&gt;
      ))}

      {/* Input Handle */}
      &lt;Handle
        type=&quot;target&quot;
        position={Position.Left}
        id=&quot;input_0&quot;
        style={{
          background: theme.colors.border,
          width: 10,
          height: 10,
          top: '50%',
        }}
      /&gt;

      {/* Output Handle */}
      &lt;Handle
        type=&quot;source&quot;
        position={Position.Right}
        id=&quot;output_0&quot;
        style={{
          background: dbInfo.color,
          width: 10,
          height: 10,
          top: '50%',
        }}
      /&gt;

      &lt;Card
        size=&quot;small&quot;
        bordered
        style={{
          minWidth: 220,
          maxWidth: 350,
          borderColor: selected ? dbInfo.color : theme.colors.border,
          borderWidth: selected ? 2 : 1,
          backgroundColor: nodeData.disabled ? theme.colors.background : '#fff',
        }}
        bodyStyle={{ padding: '12px 16px' }}
      &gt;
        &lt;div className=&quot;flex items-start gap-3&quot;&gt;
          {/* Database Avatar */}
          &lt;Avatar
            size={36}
            style={{
              backgroundColor: dbInfo.color,
              fontSize: '20px',
              flexShrink: 0,
            }}
          &gt;
            {dbInfo.icon}
          &lt;/Avatar&gt;

          {/* Node Content */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2 mb-1&quot;&gt;
              &lt;div className=&quot;font-semibold text-sm truncate&quot;&gt;{nodeData.name || 'Database'}&lt;/div&gt;
              &lt;DatabaseOutlined className=&quot;text-blue-500 text-xs&quot; /&gt;
            &lt;/div&gt;

            &lt;div className=&quot;text-xs text-gray-500 mb-2&quot;&gt;
              {dbInfo.name} • {operation}
            &lt;/div&gt;

            {/* Connection Status */}
            &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
              &lt;span style={{ color: statusInfo.color, fontSize: '12px' }}&gt;{statusInfo.icon}&lt;/span&gt;
              &lt;span style={{ fontSize: '11px', color: statusInfo.color }}&gt;{statusInfo.text}&lt;/span&gt;
            &lt;/div&gt;

            {/* Database Details */}
            &lt;div className=&quot;space-y-1&quot;&gt;
              {table &amp;&amp; (
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-xs text-gray-600&quot;&gt;Table:&lt;/span&gt;
                  &lt;Tag color=&quot;blue&quot;&gt;{table}&lt;/Tag&gt;
                &lt;/div&gt;
              )}

              {queryLimit &amp;&amp; (
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-xs text-gray-600&quot;&gt;Limit:&lt;/span&gt;
                  &lt;Tag color={queryLimit &gt; 1000 ? 'orange' : 'green'}&gt;
                    {queryLimit.toLocaleString()}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;

            {/* Connection Progress (when connecting) */}
            {connectionStatus === 'connecting' &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;Progress
                  percent={60}
                  size=&quot;small&quot;
                  status=&quot;active&quot;
                  showInfo={false}
                  strokeColor={theme.colors.info}
                /&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Execution Settings Indicators */}
        &lt;div className=&quot;mt-3 flex gap-1 flex-wrap&quot;&gt;
          {nodeData.retryOnFail &amp;&amp; (
            &lt;Badge
              count={`Retry ${nodeData.maxTries || 3}x`}
              style={{ backgroundColor: theme.colors.info, fontSize: '10px' }}
            /&gt;
          )}
          {nodeData.continueOnFail &amp;&amp; (
            &lt;Badge
              count=&quot;Continue on fail&quot;
              style={{
                backgroundColor: theme.colors.warning,
                fontSize: '10px',
              }}
            /&gt;
          )}
          {connectionString &amp;&amp; (
            &lt;Badge
              count=&quot;SSL&quot;
              style={{
                backgroundColor: theme.colors.success,
                fontSize: '10px',
              }}
            /&gt;
          )}
        &lt;/div&gt;

        {/* Notes */}
        {nodeData.notes &amp;&amp; (
          &lt;div className=&quot;mt-3 p-2 bg-yellow-50 rounded text-xs&quot;&gt;{nodeData.notes}&lt;/div&gt;
        )}
      &lt;/Card&gt;
    &lt;/div&gt;
  );
};

export default DatabaseNodeBody;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/schemaview/SchemaView.tsx (Line 77:1 - Line 83:31), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/tableview/TableView.tsx (Line 31:1 - Line 37:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup22"><code class="language-tsx text-sm text-gray-800">const inferType = (value: any): string =&gt; {
  if (value === null) return 'null';
  if (value === undefined) return 'undefined';
  if (Array.isArray(value)) return 'array';
  if (typeof value === 'object') return 'object';
  if (typeof value === 'string') {
    // Check if it's a date string</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/aiagentpropertiespanel/AIAgentPropertiesPanel.tsx (Line 314:19 - Line 324:23), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/aiagentpropertiespanel/AIAgentPropertiesPanel.tsx (Line 268:9 - Line 278:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup24"><code class="language-tsx text-sm text-gray-800">const shouldShow =
                    !property.displayOptions?.show ||
                    Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
                      values?.includes(formValues[key])
                    );

                  if (!shouldShow) return null;

                  return (
                    &lt;PropertyField
                      </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 106:17 - Line 116:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 307:19 - Line 317:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup26"><code class="language-tsx text-sm text-gray-800">className=&quot;w-6 h-6&quot;
                onError={(e) =&gt; {
                  const target = e.target as HTMLImageElement;
                  target.style.display = 'none';
                  const fallback = target.nextElementSibling;
                  if (fallback) {
                    fallback.classList.remove('hidden');
                  }
                }}
              /&gt;
              &lt;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 184:2 - Line 209:38), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 145:7 - Line 170:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup27"><code class="language-tsx text-sm text-gray-800">
        value={currentValues}
        onChange={onChange}
        placeholder={property.placeholder || `Select ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
        allowClear
      &gt;
        {options.map((option) =&gt; (
          &lt;Option key={String(option.value)} value={option.value} title={option.description}&gt;
            &lt;div&gt;
              &lt;div className=&quot;text-gray-200&quot;&gt;{option.name}&lt;/div&gt;
              {option.description &amp;&amp; (
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{option.description}&lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 6. Text/TextArea Property Renderer</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 259:14 - Line 268:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 236:17 - Line 245:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup28"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 628:2 - Line 636:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 574:2 - Line 582:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup29"><code class="language-tsx text-sm text-gray-800">|| [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Filter</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 664:2 - Line 683:48), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 607:2 - Line 626:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup30"><code class="language-tsx text-sm text-gray-800">
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;Button
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 16-22. Additional Complex Property Renderers</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 684:19 - Line 693:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 236:17 - Line 245:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup31"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;TextArea</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 709:25 - Line 718:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 236:17 - Line 245:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup32"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 734:21 - Line 746:12), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 236:17 - Line 721:16)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup33"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder=&quot;Select node</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 759:26 - Line 768:15), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 236:17 - Line 268:28)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup34"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div className=&quot;flex space-x-2</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyfield/PropertyField.tsx (Line 5:1 - Line 34:12), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 4:1 - Line 33:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup36"><code class="language-tsx text-sm text-gray-800">/**
 * PropertyField Component
 * Dynamic form field renderer for node properties with advanced features
 */

import {
  EyeInvisibleOutlined,
  EyeOutlined,
  InfoCircleOutlined,
  MinusOutlined,
  PlusOutlined,
  UploadOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Tooltip,
  Upload,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import { useNodeTheme } from '../themes'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyfield/PropertyField.tsx (Line 35:11 - Line 459:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 34:37 - Line 457:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup37"><code class="language-tsx text-sm text-gray-800">;

const { Option } = Select;
const { TextArea } = Input;

interface PropertyFieldProps {
  property: INodeProperty;
  value: any;
  onChange: (value: any) =&gt; void;
  disabled?: boolean;
  theme?: NodeTheme;
  context?: Record&lt;string, any&gt;;
  errors?: string[];
}

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  disabled = false,
  theme: propTheme,

  errors = [],
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [internalValue, setInternalValue] = useState(value);
  const [showPassword, setShowPassword] = useState(false);
  const [validationError, setValidationError] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    setInternalValue(value);
  }, [value]);

  const handleChange = (newValue: any) =&gt; {
    setInternalValue(newValue);

    // Validate the new value
    const error = validateValue(newValue);
    setValidationError(error);

    // Only call onChange if validation passes
    if (!error) {
      onChange(newValue);
    }
  };

  const validateValue = (val: any): string | null =&gt; {
    if (property.required &amp;&amp; (val === undefined || val === null || val === '')) {
      return `${property.displayName} is required`;
    }

    if (property.type === 'string' || property.type === 'text') {
      if (property.typeOptions?.minValue &amp;&amp; val.length &lt; property.typeOptions.minValue) {
        return `${property.displayName} must be at least ${property.typeOptions.minValue} characters`;
      }
      if (property.typeOptions?.maxValue &amp;&amp; val.length &gt; property.typeOptions.maxValue) {
        return `${property.displayName} must be no more than ${property.typeOptions.maxValue} characters`;
      }
    }

    if (property.type === 'number') {
      if (property.min !== undefined &amp;&amp; val &lt; property.min) {
        return `${property.displayName} must be at least ${property.min}`;
      }
      if (property.max !== undefined &amp;&amp; val &gt; property.max) {
        return `${property.displayName} must be no more than ${property.max}`;
      }
    }

    return null;
  };

  const renderLabel = () =&gt; {
    return (
      &lt;div
        style={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={String(cred.value)} value={cred.value}&gt;
            {cred.name}
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
    );
  };

  return (
    &lt;div style={{ marginBottom: theme.spacing.md }}&gt;
      {renderLabel()}
      {renderField()}
      {renderError()}
    &lt;/div&gt;
  );
};

export default PropertyField;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/enhancedtransformpropertypanel/EnhancedTransformPropertyPanel.tsx (Line 134:5 - Line 141:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/transformassignmentcollection/TransformAssignmentCollection.tsx (Line 299:5 - Line 306:61)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup38"><code class="language-tsx text-sm text-gray-800">const fieldNames = new Set&lt;string&gt;();
    inputData.forEach((item) =&gt; {
      if (item.json &amp;&amp; typeof item.json === 'object') {
        Object.keys(item.json).forEach((key) =&gt; fieldNames.add(key));
      }
    });

    return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 1:1 - Line 26:12), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 1:1 - Line 26:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup40"><code class="language-tsx text-sm text-gray-800">import { useEnter } from './hooks/useEnter';
import { useEnterDelay } from './hooks/useEnterDelay';
import { useEvent } from './hooks/useEvent';
import { useLeave } from './hooks/useLeave';
import { useNodeTheme } from './hooks/useNodeTheme';
import { useRef } from './hooks/useRef';
import { useState } from './hooks/useState';
/**
 * Enhanced Node Toolbar
 * Advanced toolbar with customizable actions, themes, and interactions
 */

import {
  BugOutlined,
  CopyOutlined,
  DeleteOutlined,
  EditOutlined,
  MoreOutlined,
  PlayCircleOutlined,
  ReloadOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import { Dropdown, Menu, Tooltip } from 'antd';
import React, { useRef, useState } from 'react';
import { useNodeTheme } from '../themes'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 27:11 - Line 161:41), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 27:37 - Line 161:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup41"><code class="language-tsx text-sm text-gray-800">;

interface EnhancedNodeToolbarProps {
  nodeId: string;
  visible: boolean;
  actions?: ToolbarAction[];
  theme?: NodeTheme;
  onActionClick: (actionId: string, nodeId: string) =&gt; void;
  position?: 'top' | 'bottom' | 'left' | 'right';
  size?: 'small' | 'medium' | 'large';
  variant?: 'default' | 'compact' | 'floating';
}

const EnhancedNodeToolbar: React.FC&lt;EnhancedNodeToolbarProps&gt; = ({
  nodeId,
  visible,
  actions = [],
  theme: propTheme,
  onActionClick,
  position = 'top',
  size = 'medium',
  variant = 'default',
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [hoveredAction, setHoveredAction] = useState&lt;string | null&gt;(null);
  const toolbarRef = useRef&lt;HTMLDivElement&gt;(null);

  // Default actions if none provided
  const defaultActions: ToolbarAction[] = [
    {
      id: 'play',
      icon: 'PlayCircleOutlined',
      label: 'Run Node',
      action: 'execute',
      shortcut: 'Ctrl+R',
    },
    {
      id: 'stop',
      icon: 'StopOutlined',
      label: 'Stop Execution',
      action: 'stop',
    },
    {
      id: 'copy',
      icon: 'CopyOutlined',
      label: 'Duplicate Node',
      action: 'duplicate',
      shortcut: 'Ctrl+D',
    },
    {
      id: 'edit',
      icon: 'EditOutlined',
      label: 'Edit Node',
      action: 'edit',
      shortcut: 'Enter',
    },
    {
      id: 'delete',
      icon: 'DeleteOutlined',
      label: 'Delete Node',
      action: 'delete',
      shortcut: 'Del',
    },
    {
      id: 'more',
      icon: 'MoreOutlined',
      label: 'More Actions',
      action: 'menu',
    },
  ];

  const finalActions = actions.length &gt; 0 ? actions : defaultActions;

  const getPositionStyles = (): React.CSSProperties =&gt; {
    const offset = variant === 'floating' ? 12 : 8;
    const baseStyles: React.CSSProperties = {
      position: 'absolute',
      zIndex: 9999,
    };

    switch (position) {
      case 'top':
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'bottom':
        return {
          ...baseStyles,
          bottom: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'left':
        return {
          ...baseStyles,
          left: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      case 'right':
        return {
          ...baseStyles,
          right: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      default:
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
    }
  };

  const getSizeConfig = () =&gt; {
    switch (size) {
      case 'small':
        return { buttonSize: 24, iconSize: 12, padding: '4px' };
      case 'large':
        return { buttonSize: 36, iconSize: 16, padding: '8px' };
      default:
        return { buttonSize: 28, iconSize: 14, padding: '6px' };
    }
  };

  const getVariantStyles = (): React.CSSProperties =&gt; {
    const { padding } = getSizeConfig();

    // Defensive theme access with fallbacks</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 197:33 - Line 374:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 192:3 - Line 369:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup42"><code class="language-tsx text-sm text-gray-800">,
        };
    }
  };

  const getIconComponent = (iconName: string) =&gt; {
    const iconMap: Record&lt;string, React.ComponentType&lt;any&gt;&gt; = {
      PlayCircleOutlined,
      StopOutlined,
      DeleteOutlined,
      MoreOutlined,
      CopyOutlined,
      EditOutlined,
      SettingOutlined,
      BugOutlined,
      ReloadOutlined,
    };

    const IconComponent = iconMap[iconName] || MoreOutlined;
    return IconComponent;
  };

  const handleActionClick = (action: ToolbarAction, e: React.MouseEvent) =&gt; {
    e.stopPropagation();

    // Special handling for menu action
    if (action.id === 'more') {
      // Show additional actions menu
      return;
    }

    onActionClick(action.id, nodeId);
  };

  const getButtonStyles = (actionId: string): React.CSSProperties =&gt; {
    const { buttonSize, iconSize } = getSizeConfig();
    const isHovered = hoveredAction === actionId;

    const buttonColor = getActionColor(actionId);

    return {
      width: buttonSize,
      height: buttonSize,
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      borderRadius: theme.borderRadius.sm,
      background: isHovered ? buttonColor : 'transparent',
      color: isHovered ? theme.colors.background : getActionTextColor(actionId),
      border: 'none',
      cursor: 'pointer',
      transition: `all ${theme.animations.duration.fast} ${theme.animations.easing.easeOut}`,
      fontSize: iconSize,
      transform: isHovered ? 'scale(1.1)' : 'scale(1)',
    };
  };

  const getActionColor = (actionId: string): string =&gt; {
    switch (actionId) {
      case 'play':
        return theme.colors.success;
      case 'stop':
        return theme.colors.error;
      case 'delete':
        return theme.colors.error;
      case 'copy':
        return theme.colors.info;
      case 'edit':
        return theme.colors.primary;
      default:
        return theme.colors.textSecondary;
    }
  };

  const getActionTextColor = (actionId: string): string =&gt; {
    if (variant === 'floating') {
      return getActionColor(actionId);
    }
    return theme.colors.background;
  };

  const renderMoreMenu = () =&gt; {
    const moreActions: ToolbarAction[] = [
      {
        id: 'settings',
        icon: 'SettingOutlined',
        label: 'Node Settings',
        action: 'settings',
      },
      {
        id: 'debug',
        icon: 'BugOutlined',
        label: 'Debug Node',
        action: 'debug',
      },
      {
        id: 'reload',
        icon: 'ReloadOutlined',
        label: 'Reload Node',
        action: 'reload',
      },
    ];

    const menuItems = moreActions.map((action) =&gt; ({
      key: action.id,
      label: (
        &lt;div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}
              &gt;
                {React.createElement(getIconComponent(action.icon))}
              &lt;/button&gt;
            &lt;/Tooltip&gt;
          );
        })}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EnhancedNodeToolbar;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/conditionalpropertyrenderer/ConditionalPropertyRenderer.tsx (Line 483:5 - Line 491:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/conditionalpropertyrenderer/ConditionalPropertyRenderer.tsx (Line 312:5 - Line 320:36)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup43"><code class="language-tsx text-sm text-gray-800">if (displayOptions.show) {
      Object.keys(displayOptions.show).forEach((field) =&gt; dependencies.add(field));
    }

    if (displayOptions.hide) {
      Object.keys(displayOptions.hide).forEach((field) =&gt; dependencies.add(field));
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/conditionalpropertyrenderer/ConditionalPropertyRenderer.tsx (Line 491:5 - Line 499:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/conditionalpropertyrenderer/ConditionalPropertyRenderer.tsx (Line 321:5 - Line 329:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup44"><code class="language-tsx text-sm text-gray-800">if (displayOptions.showIf) {
      displayOptions.showIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    if (displayOptions.hideIf) {
      displayOptions.hideIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/workflowtester/WorkflowTester.tsx (Line 79:9 - Line 104:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/workflowtester/WorkflowTester.tsx (Line 49:9 - Line 74:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup45"><code class="language-tsx text-sm text-gray-800">// Convert BackendWorkflow to WorkflowDefinition format
        const workflowDefinition = {
          name: `Test Workflow ${Date.now()}`,
          version: 1,
          nodes: workflowJson.nodes.map((node) =&gt; ({
            id: node.id,
            type: node.type,
            position: { x: node.position[0], y: node.position[1] },
            data: {
              label: node.name,
              parameters: node.parameters,
              credentials:
                typeof node.credentials === 'object' &amp;&amp; node.credentials
                  ? Object.keys(node.credentials)[0] || undefined
                  : (node.credentials as string | undefined),
              disabled: node.disabled,
              notes: node.notes,
            },
          })),
          edges: [], // Convert connections to edges if needed
          tags: ['test'],
          isActive: true,
        };
        const result = await workflowApiService.testWorkflow(workflowDefinition);
        setTestResult({
          type: 'dry_run'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 435:7 - Line 440:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 412:2 - Line 417:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup46"><code class="language-tsx text-sm text-gray-800">&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
              &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executiontoolbar/ExecutionToolbar.tsx (Line 113:29 - Line 130:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/workflowtester/WorkflowTester.tsx (Line 52:2 - Line 69:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup47"><code class="language-tsx text-sm text-gray-800">,
        nodes: workflowJson.nodes.map((node) =&gt; ({
          id: node.id,
          type: node.type,
          position: { x: node.position[0], y: node.position[1] },
          data: {
            label: node.name,
            parameters: node.parameters,
            credentials:
              typeof node.credentials === 'object' &amp;&amp; node.credentials
                ? Object.keys(node.credentials)[0] || undefined
                : (node.credentials as string | undefined),
            disabled: node.disabled,
            notes: node.notes,
          },
        })),
        edges: [], // Convert connections to edges if needed
        version</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 136:2 - Line 152:11), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 117:7 - Line 133:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup48"><code class="language-tsx text-sm text-gray-800">
            value={value || []}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 260:5 - Line 268:3), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/datavisualizationpanel/DataVisualizationPanel.tsx (Line 165:2 - Line 173:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup50"><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📤</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 289:18 - Line 317:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/datavisualizationpanel/DataVisualizationPanel.tsx (Line 194:19 - Line 223:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup51"><code class="language-tsx text-sm text-gray-800">&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}
                &gt;
                  {label}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;

            {/* Action buttons */}
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailinputpanel/EmailInputPanel.tsx (Line 89:3 - Line 100:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 258:3 - Line 174:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup52"><code class="language-tsx text-sm text-gray-800">};

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
            INPUT</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 52:5 - Line 61:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 40:6 - Line 49:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup54"><code class="language-tsx text-sm text-gray-800">(([key, values]) =&gt; {
      const currentValue = formState[key];
      return (
        Array.isArray(values) &amp;&amp;
        currentValue !== undefined &amp;&amp;
        currentValue !== null &amp;&amp;
        values.includes(currentValue as string | number | boolean)
      );
    });
    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 463:19 - Line 474:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 442:17 - Line 453:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup55"><code class="language-tsx text-sm text-gray-800">(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ef4444'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 484:21 - Line 499:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 404:21 - Line 419:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup56"><code class="language-tsx text-sm text-gray-800">&lt;div className=&quot;bg-blue-900/20 border border-blue-600/30 rounded p-4&quot;&gt;
                      &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
                        &lt;svg
                          className=&quot;w-5 h-5 text-blue-400 mt-0.5&quot;
                          fill=&quot;currentColor&quot;
                          viewBox=&quot;0 0 20 20&quot;
                        &gt;
                          &lt;path
                            fillRule=&quot;evenodd&quot;
                            d=&quot;M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z&quot;
                            clipRule=&quot;evenodd&quot;
                          /&gt;
                        &lt;/svg&gt;
                        &lt;div&gt;
                          &lt;p className=&quot;text-sm text-blue-300&quot;&gt;
                            &lt;strong&gt;{</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 507:21 - Line 517:23), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 454:21 - Line 463:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup57"><code class="language-tsx text-sm text-gray-800">&lt;div&gt;
                      &lt;label className=&quot;block text-sm font-medium text-gray-300 mb-2&quot;&gt;
                        Credential Name &lt;span className=&quot;text-red-400&quot;&gt;*&lt;/span&gt;
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        value={credentialName}
                        onChange={(e) =&gt; setCredentialName(e.target.value)}
                        className=&quot;w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500&quot;
                        placeholder={`e.g., ${credentialTypeDef.name} Account`}
                      </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 711:22 - Line 727:11), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 403:41 - Line 419:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup58"><code class="language-tsx text-sm text-gray-800">}
                    &lt;div className=&quot;bg-blue-900/20 border border-blue-600/30 rounded p-4&quot;&gt;
                      &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
                        &lt;svg
                          className=&quot;w-5 h-5 text-blue-400 mt-0.5&quot;
                          fill=&quot;currentColor&quot;
                          viewBox=&quot;0 0 20 20&quot;
                        &gt;
                          &lt;path
                            fillRule=&quot;evenodd&quot;
                            d=&quot;M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z&quot;
                            clipRule=&quot;evenodd&quot;
                          /&gt;
                        &lt;/svg&gt;
                        &lt;div&gt;
                          &lt;p className=&quot;text-sm text-blue-300&quot;&gt;
                            Enterprise</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/containernodepanel/ContainerNodePanel.tsx (Line 361:4 - Line 370:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/containernode/ContainerNode.tsx (Line 399:19 - Line 409:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup59"><code class="language-tsx text-sm text-gray-800">&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}
        &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 451:21 - Line 460:27), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 392:23 - Line 401:28)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup61"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 66:5 - Line 77:54), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/userpresenceoverlay/UserPresenceOverlay.tsx (Line 50:2 - Line 61:36)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup62"><code class="language-tsx text-sm text-gray-800">);

  // Convert workflow coordinates to screen coordinates
  const workflowToScreen = useCallback(
    (x: number, y: number) =&gt; ({
      x: (x + transform.x) * transform.zoom,
      y: (y + transform.y) * transform.zoom,
    }),
    [transform]
  );

  // Convert screen coordinates to workflow coordinates</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 87:3 - Line 104:40), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/userpresenceoverlay/UserPresenceOverlay.tsx (Line 35:3 - Line 52:54)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup63"><code class="language-tsx text-sm text-gray-800">const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Handle canvas click for new comments</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 91:3 - Line 108:27), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/userpresenceoverlay/UserPresenceOverlay.tsx (Line 35:3 - Line 52:54)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup65"><code class="language-tsx text-sm text-gray-800">const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Handle adding a comment</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 128:3 - Line 141:30), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 139:3 - Line 152:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup66"><code class="language-tsx text-sm text-gray-800">const handleReplyToComment = useCallback(
    async (commentId: string) =&gt; {
      const content = replyContents[commentId];
      if (!content?.trim()) return;

      try {
        await replyToComment(commentId, content);
        setReplyContents({ ...replyContents, [commentId]: '' });
      } catch (_error) {}
    },
    [replyContents, replyToComment]
  );

  // Handle conflict resolution</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 326:21 - Line 338:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 169:2 - Line 181:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup67"><code class="language-tsx text-sm text-gray-800">&gt;
                      {comment.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                        {comment.author.name}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                        {new Date(comment.timestamp).toLocaleString()}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 372:2 - Line 380:41), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 210:7 - Line 218:46)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup68"><code class="language-tsx text-sm text-gray-800">&gt;
                            &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                              {reply.author.name}
                            &lt;/span&gt;
                            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                              {new Date(reply.timestamp).toLocaleString()}
                            &lt;/span&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/RegistryNode.tsx (Line 1:1 - Line 10:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 1:1 - Line 9:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup71"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { memo, useMemo, useRef, useState } from 'react';
import type { NodeProps } from 'reactflow';
import { Handle, Position } from 'reactflow';
import { getCustomBodyComponent } from '@/app/node-extensions/nodeUiRegistry';
import { nodeRegistry, type WorkflowNodeInstance } from '@/core';
import { useSmartMenuPosition } from '../../../hooks/useSmartMenuPosition';
import NodeToolbar from './BaseNode/NodeToolbar';

interface</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/RegistryNode.tsx (Line 8:25 - Line 342:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 15:19 - Line 349:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup72"><code class="language-tsx text-sm text-gray-800">;

interface RegistryNodeData extends WorkflowNodeInstance {
  onDelete?: () =&gt; void;
  onEdit?: () =&gt; void;
  onOpenProperties?: () =&gt; void;
}

interface RegistryNodeProps extends NodeProps&lt;RegistryNodeData&gt; {}

/**
 * RegistryNode - A React Flow node component that uses the Node Registry
 * This component looks up node definitions from the registry to render nodes
 */
const RegistryNode: React.FC&lt;RegistryNodeProps&gt; = ({ data, selected, id }) =&gt; {
  // Hover state for custom toolbar
  const [isHovered, setIsHovered] = useState(false);
  // Menu state for NodeMenu
  const [showMenu, setShowMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showMenu,
    triggerRef: menuTriggerRef as React.RefObject&lt;HTMLElement&gt;,
    menuRef: menuRef as React.RefObject&lt;HTMLElement&gt;,
    offset: 4,
    onClose: () =&gt; setShowMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook
  // Look up the node definition from the registry
  const nodeDefinition = useMemo(() =&gt; {
    return nodeRegistry.getNodeTypeDescription(data.type);
  }, [data.type]);

  // Get visual configuration
  const { icon, displayName, subtitle } = useMemo(() =&gt; {
    if (!nodeDefinition) {
      return {
        icon: '❓',
        displayName: data.type,
        color: '#666',
        subtitle: 'Unknown node type',
      };
    }

    // Build subtitle from parameters if template exists
    let subtitle = nodeDefinition.subtitle || '';
    if (subtitle &amp;&amp; data.parameters) {
      subtitle = subtitle.replace(/\{\{[^}]+\}\}/g, (match) =&gt; {
        const paramPath = match.replace('{{$parameter[&quot;', '').replace('&quot;]}}', '');
        return data.parameters[paramPath] || '';
      });
    }

    return {
      icon: nodeDefinition.icon || nodeDefinition.iconUrl || '📦',
      displayName: data.name || nodeDefinition.displayName,
      color: nodeDefinition.defaults?.color || '#1890ff',
      subtitle,
    };
  }, [nodeDefinition, data.name, data.parameters, data.type]);

  // Determine node status

  // Render handles based on node definition
  const renderHandles = () =&gt; {
    if (!nodeDefinition) return null;

    const handles = [];

    // Input handles
    if (nodeDefinition.inputs?.length &gt; 0) {
      handles.push(
        &lt;Handle
          key=&quot;input-main&quot;
          type=&quot;target&quot;
          position={Position.Left}
          id=&quot;input_0&quot;
          style={{
            background: '#555',
            width: 10,
            height: 10,
            // No top property - handle will be vertically centered by default
          }}
        /&gt;
      );
    }

    // Output handles
    if (nodeDefinition.outputs?.length &gt; 0) {
      nodeDefinition.outputs.forEach((_, index) =&gt; {
        // For single output, don't set top (centers by default)
        // For multiple outputs, calculate vertical distribution
        const handleStyle: React.CSSProperties = {
          background: '#555',
          width: 10,
          height: 10,
        };

        if (nodeDefinition.outputs.length &gt; 1) {
          handleStyle.top = `${((index + 1) / (nodeDefinition.outputs.length + 1)) * 100}%`;
        }
        // No top property for single output - centers by default

        handles.push(
          &lt;Handle
            key={`output-${index}`}
            type=&quot;source&quot;
            position={Position.Right}
            id={`output_${index}`}
            style={handleStyle}
          /&gt;
        );
      });
    }

    return handles;
  };

  // Simple status indicator logic - integrated into main template

  // Toolbar handlers
  const handlePlay = (_nodeId: string) =&gt; {
    // TODO: Implement play functionality
  };

  const handleStop = (_nodeId: string) =&gt; {
    // TODO: Implement stop functionality
  };

  const handleDelete = (_nodeId: string) =&gt; {
    data.onDelete?.();
  };

  const handleMenuToggle = () =&gt; {
    setShowMenu(!showMenu);
  };

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    // Handle double-click to open properties panel
    event.stopPropagation();
    data.onOpenProperties?.();
  };

  // Render shared node toolbar and menu
  const renderToolbarAndMenu = () =&gt; {
    const toolbarVisible = isHovered; // Show on hover only, not requiring selection

    return (
      &lt;&gt;
        &lt;NodeToolbar
          visible={toolbarVisible}
          onPlay={() =&gt; handlePlay(id)}
          onStop={() =&gt; handleStop(id)}
          onDelete={(e) =&gt; {
            e.stopPropagation();
            handleDelete(id);
          }}
          onMenuToggle={handleMenuToggle}
          menuTriggerRef={menuTriggerRef as React.RefObject&lt;HTMLButtonElement&gt;}
        /&gt;
        {/* Custom dark-themed menu with smart positioning */}
        {showMenu &amp;&amp; (
          &lt;div
            ref={menuRef}
            className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
            style={positionStyles}
            onClick={(e) =&gt; e.stopPropagation()}
          &gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                data.onOpenProperties?.();
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📂&lt;/span&gt; Open
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement test functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🧪&lt;/span&gt; Test
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement copy functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📄&lt;/span&gt; Copy
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement duplicate functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📋&lt;/span&gt; Duplicate
            &lt;/button&gt;
            &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                handleDelete(id);
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🗑️&lt;/span&gt; Delete
            &lt;/button&gt;
          &lt;/div&gt;
        )}
      &lt;/&gt;
    );
  };

  // Check for custom body component
  const CustomBodyComponent = useMemo(() =&gt; {
    if (!nodeDefinition?.customBodyComponent) return null;
    return getCustomBodyComponent(nodeDefinition.customBodyComponent);
  }, [nodeDefinition]);

  // If custom body component exists, use it instead of default rendering
  if (CustomBodyComponent) {
    return (
      &lt;div
        className={`registry-node ${selected ? 'selected' : ''} relative`}
        style={{
          opacity: data.disabled ? 0.5 : 1,
        }}
        onMouseEnter={() =&gt; setIsHovered(true)}
        onMouseLeave={() =&gt; setIsHovered(false)}
        onDoubleClick={handleDoubleClick}
      &gt;
        {/* Custom body components handle their own handles and toolbars internally */}
        &lt;CustomBodyComponent
          nodeId={id}
          nodeData={data}
          selected={selected}
          isHovered={isHovered}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
          onDelete={data.onDelete}
          onEdit={data.onEdit}
          onOpenProperties={data.onOpenProperties}
        /&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div
      className={`registry-node ${selected ? 'selected' : ''} relative`}
      style={{
        opacity: data.disabled ? 0.5 : 1,
      }}
      onMouseEnter={() =&gt; setIsHovered(true)}
      onMouseLeave={() =&gt; setIsHovered(false)}
      onDoubleClick={handleDoubleClick}
    &gt;
      {renderHandles()}
      {renderToolbarAndMenu()}

      {/* Gmail-style Base Template for All Nodes */}
      &lt;div className=&quot;flex flex-col&quot;&gt;
        &lt;div className=&quot;relative&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
            `}
          &gt;
            {/* Dynamic Node Icon */}
            &lt;div className=&quot;flex items-center justify-center&quot;&gt;
              {icon.startsWith('http') || icon.startsWith('/') ? (
                &lt;img
                  src={icon}
                  alt={displayName}
                  className=&quot;w-6 h-6&quot;
                  onError={(e) =&gt; {
                    const target = e.target as HTMLImageElement;
                    target.style.display = 'none';
                    const fallback = target.nextElementSibling;
                    if (fallback) {
                      fallback.classList.remove('hidden');
                    }
                  }}
                /&gt;
              ) : (
                &lt;span className=&quot;text-2xl&quot;&gt;{icon}&lt;/span&gt;
              )}
              {/* Fallback icon for broken images */}
              &lt;span className=&quot;hidden text-xl&quot;&gt;📦&lt;/span&gt;
            &lt;/div&gt;

            {/* Status Indicators */}
            {(data.disabled || data.retryOnFail || data.continueOnFail) &amp;&amp; (
              &lt;div className=&quot;absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center&quot;&gt;
                &lt;span className=&quot;text-white text-xs&quot;&gt;
                  {data.disabled ? '!' : data.retryOnFail ? 'R' : 'C'}
                &lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Node Label - Below the node */}
        &lt;div className=&quot;mt-2 text-white text-sm font-medium text-center max-w-[150px] truncate&quot;&gt;
          {displayName}
        &lt;/div&gt;

        {/* Subtitle if exists */}
        {subtitle &amp;&amp; (
          &lt;div className=&quot;text-xs text-gray-400 text-center max-w-[150px] truncate&quot;&gt;{subtitle}&lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default memo(RegistryNode);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode.tsx (Line 1:1 - Line 453:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/containernode/ContainerNode.tsx (Line 10:1 - Line 462:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup74"><code class="language-tsx text-sm text-gray-800">/**
 * Container Node Component
 *
 * Advanced container nodes that can hold other nodes and provide
 * complex execution patterns like loops, parallel processing, and conditionals.
 */

import {
  CompressOutlined,
  DeleteOutlined,
  ExpandOutlined,
  MoreOutlined,
  PauseCircleOutlined,
  PlayCircleOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Dropdown,
  Form,
  Input,
  InputNumber,
  Modal,
  Select,
  Space,
  Tooltip,
} from 'antd';
import type React from 'react';
import { useCallback, useRef, useState } from 'react';
import { Handle, type NodeProps, Position } from 'reactflow';
import type {
  ContainerDropEvent,
  ContainerExecutionState,
  ContainerNodeConfig,
  ContainerResizeEvent,
} from '@/core/types/containerNodes';
import { cn } from '@/design-system/utils';

interface ContainerNodeProps extends NodeProps {
  data: {
    config: ContainerNodeConfig;
    state: ContainerExecutionState;
    onResize?: (event: ContainerResizeEvent) =&gt; void;
    onDrop?: (event: ContainerDropEvent) =&gt; void;
    onConfigChange?: (config: ContainerNodeConfig) =&gt; void;
    onExecute?: (containerId: string) =&gt; void;
    onStop?: (containerId: string) =&gt; void;
  };
}

const ContainerNode: React.FC&lt;ContainerNodeProps&gt; = ({ data, selected }) =&gt; {
  const { config, state, onResize, onDrop, onConfigChange, onExecute, onStop } = data;
  const [isResizing, setIsResizing] = useState(false);
  const [isConfigModalOpen, setIsConfigModalOpen] = useState(false);
  const [configForm] = Form.useForm();
  const resizeRef = useRef&lt;HTMLDivElement&gt;(null);

  const handleMouseDown = useCallback(
    (e: React.MouseEvent) =&gt; {
      if (e.target !== resizeRef.current) return;

      e.preventDefault();
      setIsResizing(true);

      const startX = e.clientX;
      const startY = e.clientY;
      const startWidth = config.dimensions.width;
      const startHeight = config.dimensions.height;

      const handleMouseMove = (e: MouseEvent) =&gt; {
        const deltaX = e.clientX - startX;
        const deltaY = e.clientY - startY;

        const newWidth = Math.max(200, startWidth + deltaX);
        const newHeight = Math.max(150, startHeight + deltaY);

        onResize?.({
          containerId: config.id,
          newDimensions: { width: newWidth, height: newHeight },
          childrenPositions: [], // Would be calculated based on children
        });
      };

      const handleMouseUp = () =&gt; {
        setIsResizing(false);
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };

      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
    },
    [config, onResize]
  );

  const handleDrop = useCallback(
    (e: React.DragEvent) =&gt; {
      e.preventDefault();

      const nodeData = e.dataTransfer.getData('application/reactflow');
      if (!nodeData) return;

      const nodeInfo = JSON.parse(nodeData);
      const rect = e.currentTarget.getBoundingClientRect();
      const position = {
        x: e.clientX - rect.left,
        y: e.clientY - rect.top,
      };

      onDrop?.({
        containerId: config.id,
        nodeId: nodeInfo.id,
        position,
      });
    },
    [config.id, onDrop]
  );

  const handleExecute = useCallback(() =&gt; {
    onExecute?.(config.id);
  }, [config.id, onExecute]);

  const handleStop = useCallback(() =&gt; {
    onStop?.(config.id);
  }, [config.id, onStop]);

  const handleConfigChange = useCallback(
    (values: any) =&gt; {
      const newConfig = {
        ...config,
        executionConfig: { ...config.executionConfig, ...values },
      };
      onConfigChange?.(newConfig);
      setIsConfigModalOpen(false);
    },
    [config, onConfigChange]
  );

  const getStatusIcon = () =&gt; {
    switch (state.status) {
      case 'running':
        return &lt;PlayCircleOutlined className=&quot;text-green-500&quot; /&gt;;
      case 'completed':
        return &lt;PlayCircleOutlined className=&quot;text-blue-500&quot; /&gt;;
      case 'failed':
        return &lt;StopOutlined className=&quot;text-red-500&quot; /&gt;;
      case 'paused':
        return &lt;PauseCircleOutlined className=&quot;text-yellow-500&quot; /&gt;;
      default:
        return &lt;PlayCircleOutlined className=&quot;text-gray-500&quot; /&gt;;
    }
  };

  const getContainerIcon = () =&gt; {
    switch (config.type) {
      case 'loop':
        return '🔄';
      case 'parallel':
        return '⚡';
      case 'conditional':
        return '❓';
      case 'try-catch':
        return '🛡️';
      case 'batch':
        return '📦';
      default:
        return '📁';
    }
  };

  const menuItems = [
    {
      key: 'config',
      label: 'Configure',
      icon: &lt;SettingOutlined /&gt;,
      onClick: () =&gt; setIsConfigModalOpen(true),
    },
    {
      key: 'expand',
      label: 'Expand',
      icon: &lt;ExpandOutlined /&gt;,
      onClick: () =&gt; {
        onResize?.({
          containerId: config.id,
          newDimensions: { width: 600, height: 500 },
          childrenPositions: [],
        });
      },
    },
    {
      key: 'compress',
      label: 'Compress',
      icon: &lt;CompressOutlined /&gt;,
      onClick: () =&gt; {
        onResize?.({
          containerId: config.id,
          newDimensions: { width: 300, height: 200 },
          childrenPositions: [],
        });
      },
    },
    {
      type: 'divider' as const,
    },
    {
      key: 'delete',
      label: 'Delete Container',
      icon: &lt;DeleteOutlined /&gt;,
      danger: true,
      onClick: () =&gt; {
        // Handle container deletion
      },
    },
  ];

  return (
    &lt;&gt;
      &lt;div
        className={cn(
          'relative border-2 rounded-lg transition-all duration-200',
          selected &amp;&amp; 'ring-2 ring-blue-500 ring-opacity-50',
          isResizing &amp;&amp; 'cursor-nw-resize'
        )}
        style={{
          width: config.dimensions.width,
          height: config.dimensions.height,
          backgroundColor: config.style.backgroundColor,
          borderColor: config.style.borderColor,
          borderWidth: config.style.borderWidth,
          borderRadius: config.style.borderRadius,
          opacity: config.style.opacity,
          zIndex: config.style.zIndex,
        }}
        onDrop={handleDrop}
        onDragOver={(e) =&gt; e.preventDefault()}
      &gt;
        {/* Container Header */}
        &lt;div className=&quot;absolute top-0 left-0 right-0 p-2 bg-gray-900 bg-opacity-80 rounded-t-lg&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-lg&quot;&gt;{getContainerIcon()}&lt;/span&gt;
              &lt;span className=&quot;text-sm font-semibold text-white&quot;&gt;{config.name}&lt;/span&gt;
              &lt;Badge
                count={config.children.length}
                size=&quot;small&quot;
                style={{ backgroundColor: '#1890ff' }}
              /&gt;
            &lt;/div&gt;

            &lt;Space size=&quot;small&quot;&gt;
              {state.status === 'running' ? (
                &lt;Tooltip title=&quot;Stop execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;StopOutlined /&gt;}
                    onClick={handleStop}
                    className=&quot;text-red-400 hover:text-red-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              ) : (
                &lt;Tooltip title=&quot;Start execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;PlayCircleOutlined /&gt;}
                    onClick={handleExecute}
                    className=&quot;text-green-400 hover:text-green-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}

              &lt;Dropdown menu={{ items: menuItems }} trigger={['click']} placement=&quot;bottomRight&quot;&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;MoreOutlined /&gt;}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/Dropdown&gt;
            &lt;/Space&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Status */}
        &lt;div className=&quot;absolute top-8 left-2 right-2&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between text-xs&quot;&gt;
            &lt;div className=&quot;flex items-center gap-1&quot;&gt;
              {getStatusIcon()}
              &lt;span className=&quot;text-gray-300 capitalize&quot;&gt;{state.status}&lt;/span&gt;
            &lt;/div&gt;

            {state.currentIteration !== undefined &amp;&amp; (
              &lt;div className=&quot;text-gray-400&quot;&gt;
                {state.currentIteration}/{state.totalIterations || '∞'}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Content Area */}
        &lt;div className=&quot;absolute top-16 left-2 right-2 bottom-2 bg-gray-800 bg-opacity-50 rounded border border-gray-600&quot;&gt;
          &lt;div className=&quot;p-2 h-full overflow-auto&quot;&gt;
            {config.children.length === 0 ? (
              &lt;div className=&quot;flex items-center justify-center h-full text-gray-500&quot;&gt;
                &lt;div className=&quot;text-center&quot;&gt;
                  &lt;div className=&quot;text-2xl mb-2&quot;&gt;📁&lt;/div&gt;
                  &lt;div className=&quot;text-sm&quot;&gt;Drop nodes here&lt;/div&gt;
                  &lt;div className=&quot;text-xs&quot;&gt;to add them to this container&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {config.children.map((childId) =&gt; (
                  &lt;div key={childId} className=&quot;p-1 bg-gray-700 rounded text-xs text-gray-300&quot;&gt;
                    {childId}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Resize Handle */}
        &lt;div
          ref={resizeRef}
          className=&quot;absolute bottom-0 right-0 w-3 h-3 cursor-nw-resize bg-blue-500 opacity-0 hover:opacity-100 transition-opacity&quot;
          onMouseDown={handleMouseDown}
        /&gt;

        {/* Input Handle */}
        &lt;Handle
          type=&quot;target&quot;
          position={Position.Left}
          id=&quot;input&quot;
          className=&quot;w-3 h-3 bg-blue-500 border-2 border-white&quot;
        /&gt;

        {/* Output Handles */}
        &lt;Handle
          type=&quot;source&quot;
          position={Position.Right}
          id=&quot;output&quot;
          className=&quot;w-3 h-3 bg-green-500 border-2 border-white&quot;
        /&gt;
      &lt;/div&gt;

      {/* Configuration Modal */}
      &lt;Modal
        title={`Configure ${config.name}`}
        open={isConfigModalOpen}
        onCancel={() =&gt; setIsConfigModalOpen(false)}
        onOk={() =&gt; configForm.submit()}
        width={600}
      &gt;
        &lt;Form
          form={configForm}
          layout=&quot;vertical&quot;
          initialValues={config.executionConfig}
          onFinish={handleConfigChange}
        &gt;
          {config.type === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopType&quot; label=&quot;Loop Type&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;for&quot;&gt;For Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;while&quot;&gt;While Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;foreach&quot;&gt;For Each&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot;&gt;
                &lt;InputNumber min={1} max={1000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot;&gt;
                &lt;InputNumber min={1} max={20} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;parallelStrategy&quot; label=&quot;Execution Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'conditional' &amp;&amp; (
            &lt;Form.Item name=&quot;conditionExpression&quot; label=&quot;Condition Expression&quot;&gt;
              &lt;Input.TextArea
                placeholder=&quot;Enter JavaScript expression, e.g., $input.value &gt; 10&quot;
                rows={3}
              /&gt;
            &lt;/Form.Item&gt;
          )}

          {config.type === 'try-catch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;retryAttempts&quot; label=&quot;Retry Attempts&quot;&gt;
                &lt;InputNumber min={0} max={10} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;retryDelay&quot; label=&quot;Retry Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;errorHandling&quot; label=&quot;Error Handling&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;stop&quot;&gt;Stop on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;continue&quot;&gt;Continue on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;retry&quot;&gt;Retry on Error&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'batch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;batchSize&quot; label=&quot;Batch Size&quot;&gt;
                &lt;InputNumber min={1} max={100} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;batchDelay&quot; label=&quot;Batch Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;batchStrategy&quot; label=&quot;Batch Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;sequential&quot;&gt;Sequential&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;parallel&quot;&gt;Parallel&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};

export default ContainerNode;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/comparisontable/ComparisonTable.tsx (Line 405:2 - Line 410:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/comparisontable/ComparisonTable.tsx (Line 403:3 - Line 409:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup75"><code class="language-tsx text-sm text-gray-800">&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/PropertyField.tsx (Line 1:1 - Line 454:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/propertyfield/PropertyField.tsx (Line 4:1 - Line 457:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup102"><code class="language-tsx text-sm text-gray-800">/**
 * PropertyField Component
 * Dynamic form field renderer for node properties with advanced features
 */

import {
  EyeInvisibleOutlined,
  EyeOutlined,
  InfoCircleOutlined,
  MinusOutlined,
  PlusOutlined,
  UploadOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Tooltip,
  Upload,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import { useNodeTheme } from '../../../app/node-extensions/themes';
import type { NodeTheme } from '../../../app/node-extensions/types';

const { Option } = Select;
const { TextArea } = Input;

interface PropertyFieldProps {
  property: INodeProperty;
  value: any;
  onChange: (value: any) =&gt; void;
  disabled?: boolean;
  theme?: NodeTheme;
  context?: Record&lt;string, any&gt;;
  errors?: string[];
}

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  disabled = false,
  theme: propTheme,
  errors = [],
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [internalValue, setInternalValue] = useState(value);
  const [showPassword, setShowPassword] = useState(false);
  const [validationError, setValidationError] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    setInternalValue(value);
  }, [value]);

  const handleChange = (newValue: any) =&gt; {
    setInternalValue(newValue);

    // Validate the new value
    const error = validateValue(newValue);
    setValidationError(error);

    // Only call onChange if validation passes
    if (!error) {
      onChange(newValue);
    }
  };

  const validateValue = (val: any): string | null =&gt; {
    if (property.required &amp;&amp; (val === undefined || val === null || val === '')) {
      return `${property.displayName} is required`;
    }

    if (property.type === 'string' || property.type === 'text') {
      if (property.typeOptions?.minValue &amp;&amp; val.length &lt; property.typeOptions.minValue) {
        return `${property.displayName} must be at least ${property.typeOptions.minValue} characters`;
      }
      if (property.typeOptions?.maxValue &amp;&amp; val.length &gt; property.typeOptions.maxValue) {
        return `${property.displayName} must be no more than ${property.typeOptions.maxValue} characters`;
      }
    }

    if (property.type === 'number') {
      if (property.min !== undefined &amp;&amp; val &lt; property.min) {
        return `${property.displayName} must be at least ${property.min}`;
      }
      if (property.max !== undefined &amp;&amp; val &gt; property.max) {
        return `${property.displayName} must be no more than ${property.max}`;
      }
    }

    return null;
  };

  const renderLabel = () =&gt; {
    return (
      &lt;div
        style={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={cred.value} value={cred.value}&gt;
            {cred.name}
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
    );
  };

  return (
    &lt;div style={{ marginBottom: theme.spacing.md }}&gt;
      {renderLabel()}
      {renderField()}
      {renderError()}
    &lt;/div&gt;
  );
};

export default PropertyField;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/EnhancedNodeToolbar.tsx (Line 1:1 - Line 362:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 8:1 - Line 369:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup104"><code class="language-tsx text-sm text-gray-800">/**
 * Enhanced Node Toolbar
 * Advanced toolbar with customizable actions, themes, and interactions
 */

import {
  BugOutlined,
  CopyOutlined,
  DeleteOutlined,
  EditOutlined,
  MoreOutlined,
  PlayCircleOutlined,
  ReloadOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import { Dropdown, Menu, Tooltip } from 'antd';
import React, { useRef, useState } from 'react';
import { useNodeTheme } from '../../../app/node-extensions/themes';
import type { NodeTheme, ToolbarAction } from '../../../app/node-extensions/types';

interface EnhancedNodeToolbarProps {
  nodeId: string;
  visible: boolean;
  actions?: ToolbarAction[];
  theme?: NodeTheme;
  onActionClick: (actionId: string, nodeId: string) =&gt; void;
  position?: 'top' | 'bottom' | 'left' | 'right';
  size?: 'small' | 'medium' | 'large';
  variant?: 'default' | 'compact' | 'floating';
}

const EnhancedNodeToolbar: React.FC&lt;EnhancedNodeToolbarProps&gt; = ({
  nodeId,
  visible,
  actions = [],
  theme: propTheme,
  onActionClick,
  position = 'top',
  size = 'medium',
  variant = 'default',
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [hoveredAction, setHoveredAction] = useState&lt;string | null&gt;(null);
  const toolbarRef = useRef&lt;HTMLDivElement&gt;(null);

  // Default actions if none provided
  const defaultActions: ToolbarAction[] = [
    {
      id: 'play',
      icon: 'PlayCircleOutlined',
      label: 'Run Node',
      action: 'execute',
      shortcut: 'Ctrl+R',
    },
    {
      id: 'stop',
      icon: 'StopOutlined',
      label: 'Stop Execution',
      action: 'stop',
    },
    {
      id: 'copy',
      icon: 'CopyOutlined',
      label: 'Duplicate Node',
      action: 'duplicate',
      shortcut: 'Ctrl+D',
    },
    {
      id: 'edit',
      icon: 'EditOutlined',
      label: 'Edit Node',
      action: 'edit',
      shortcut: 'Enter',
    },
    {
      id: 'delete',
      icon: 'DeleteOutlined',
      label: 'Delete Node',
      action: 'delete',
      shortcut: 'Del',
    },
    {
      id: 'more',
      icon: 'MoreOutlined',
      label: 'More Actions',
      action: 'menu',
    },
  ];

  const finalActions = actions.length &gt; 0 ? actions : defaultActions;

  const getPositionStyles = (): React.CSSProperties =&gt; {
    const offset = variant === 'floating' ? 12 : 8;
    const baseStyles: React.CSSProperties = {
      position: 'absolute',
      zIndex: 9999,
    };

    switch (position) {
      case 'top':
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'bottom':
        return {
          ...baseStyles,
          bottom: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'left':
        return {
          ...baseStyles,
          left: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      case 'right':
        return {
          ...baseStyles,
          right: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      default:
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
    }
  };

  const getSizeConfig = () =&gt; {
    switch (size) {
      case 'small':
        return { buttonSize: 24, iconSize: 12, padding: '4px' };
      case 'large':
        return { buttonSize: 36, iconSize: 16, padding: '8px' };
      default:
        return { buttonSize: 28, iconSize: 14, padding: '6px' };
    }
  };

  const getVariantStyles = (): React.CSSProperties =&gt; {
    const { padding } = getSizeConfig();

    const baseStyles: React.CSSProperties = {
      display: 'flex',
      alignItems: 'center',
      gap: '2px',
      borderRadius: theme.borderRadius.md,
      transition: `all ${theme.animations.duration.normal} ${theme.animations.easing.easeOut}`,
      opacity: visible ? 1 : 0,
      transform: visible ? 'scale(1)' : 'scale(0.9)',
      padding,
    };

    switch (variant) {
      case 'compact':
        return {
          ...baseStyles,
          background: 'rgba(0, 0, 0, 0.8)',
          backdropFilter: 'blur(8px)',
          border: `1px solid ${theme.colors.border}40`,
        };
      case 'floating':
        return {
          ...baseStyles,
          background: theme.colors.background,
          border: `1px solid ${theme.colors.border}`,
          boxShadow: theme.shadows.lg,
        };
      default:
        return {
          ...baseStyles,
          background: 'rgba(0, 0, 0, 0.9)',
          border: `1px solid ${theme.colors.border}60`,
          boxShadow: theme.shadows.md,
        };
    }
  };

  const getIconComponent = (iconName: string) =&gt; {
    const iconMap: Record&lt;string, React.ComponentType&lt;any&gt;&gt; = {
      PlayCircleOutlined,
      StopOutlined,
      DeleteOutlined,
      MoreOutlined,
      CopyOutlined,
      EditOutlined,
      SettingOutlined,
      BugOutlined,
      ReloadOutlined,
    };

    const IconComponent = iconMap[iconName] || MoreOutlined;
    return IconComponent;
  };

  const handleActionClick = (action: ToolbarAction, e: React.MouseEvent) =&gt; {
    e.stopPropagation();

    // Special handling for menu action
    if (action.id === 'more') {
      // Show additional actions menu
      return;
    }

    onActionClick(action.id, nodeId);
  };

  const getButtonStyles = (actionId: string): React.CSSProperties =&gt; {
    const { buttonSize, iconSize } = getSizeConfig();
    const isHovered = hoveredAction === actionId;

    const buttonColor = getActionColor(actionId);

    return {
      width: buttonSize,
      height: buttonSize,
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      borderRadius: theme.borderRadius.sm,
      background: isHovered ? buttonColor : 'transparent',
      color: isHovered ? theme.colors.background : getActionTextColor(actionId),
      border: 'none',
      cursor: 'pointer',
      transition: `all ${theme.animations.duration.fast} ${theme.animations.easing.easeOut}`,
      fontSize: iconSize,
      transform: isHovered ? 'scale(1.1)' : 'scale(1)',
    };
  };

  const getActionColor = (actionId: string): string =&gt; {
    switch (actionId) {
      case 'play':
        return theme.colors.success;
      case 'stop':
        return theme.colors.error;
      case 'delete':
        return theme.colors.error;
      case 'copy':
        return theme.colors.info;
      case 'edit':
        return theme.colors.primary;
      default:
        return theme.colors.textSecondary;
    }
  };

  const getActionTextColor = (actionId: string): string =&gt; {
    if (variant === 'floating') {
      return getActionColor(actionId);
    }
    return theme.colors.background;
  };

  const renderMoreMenu = () =&gt; {
    const moreActions: ToolbarAction[] = [
      {
        id: 'settings',
        icon: 'SettingOutlined',
        label: 'Node Settings',
        action: 'settings',
      },
      {
        id: 'debug',
        icon: 'BugOutlined',
        label: 'Debug Node',
        action: 'debug',
      },
      {
        id: 'reload',
        icon: 'ReloadOutlined',
        label: 'Reload Node',
        action: 'reload',
      },
    ];

    const menuItems = moreActions.map((action) =&gt; ({
      key: action.id,
      label: (
        &lt;div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}
              &gt;
                {React.createElement(getIconComponent(action.icon))}
              &lt;/button&gt;
            &lt;/Tooltip&gt;
          );
        })}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EnhancedNodeToolbar;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/TableView.tsx (Line 1:1 - Line 329:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/tableview/TableView.tsx (Line 3:1 - Line 331:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup106"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { CopyOutlined, EditOutlined, EyeOutlined, FilterOutlined } from '@ant-design/icons';
import { Button, Input, Select, Space, Table, Tag, Tooltip, Typography } from 'antd';
import type React from 'react';
import { useMemo, useState } from 'react';

const { Text } = Typography;
const { Option } = Select;

interface TableViewProps {
  data: any;
  onFieldClick?: (fieldPath: string) =&gt; void;
  onDataTransform?: (transformedData: any) =&gt; void;
  compact?: boolean;
}

interface TableRow {
  key: string;
  field: string;
  type: string;
  value: any;
  displayValue: string;
  path: string;
  nullable: boolean;
  size?: number;
}

const inferType = (value: any): string =&gt; {
  if (value === null) return 'null';
  if (value === undefined) return 'undefined';
  if (Array.isArray(value)) return 'array';
  if (typeof value === 'object') return 'object';
  if (typeof value === 'string') {
    if (/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(value)) return 'date';
    if (/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) return 'email';
    if (/^https?:\/\//.test(value)) return 'url';
    return 'string';
  }
  return typeof value;
};

const getTypeColor = (type: string) =&gt; {
  const colors = {
    string: 'green',
    number: 'blue',
    boolean: 'purple',
    date: 'orange',
    email: 'cyan',
    url: 'magenta',
    array: 'red',
    object: 'yellow',
    null: 'gray',
    undefined: 'gray',
  };
  return colors[type as keyof typeof colors] || 'default';
};

const formatDisplayValue = (value: any, type: string): string =&gt; {
  if (value === null) return 'null';
  if (value === undefined) return 'undefined';

  switch (type) {
    case 'string':
      return value.length &gt; 100 ? `${value.substring(0, 97)}...` : value;
    case 'array':
      return `Array(${value.length})`;
    case 'object':
      return `Object(${Object.keys(value).length} keys)`;
    case 'date':
      return new Date(value).toLocaleString();
    case 'boolean':
      return value ? 'true' : 'false';
    case 'number':
      return value.toLocaleString();
    default:
      return String(value);
  }
};

const flattenObject = (obj: any, prefix: string = ''): TableRow[] =&gt; {
  const rows: TableRow[] = [];

  if (!obj || typeof obj !== 'object') return rows;

  Object.entries(obj).forEach(([key, value]) =&gt; {
    const path = prefix ? `${prefix}.${key}` : key;
    const type = inferType(value);
    const displayValue = formatDisplayValue(value, type);
    const nullable = value === null || value === undefined;

    const row: TableRow = {
      key: path,
      field: key,
      type,
      value,
      displayValue,
      path,
      nullable,
      size: typeof value === 'string' ? value.length : undefined,
    };

    rows.push(row);

    // Recursively add nested object properties
    if (type === 'object' &amp;&amp; value &amp;&amp; Object.keys(value).length &gt; 0) {
      rows.push(...flattenObject(value, path));
    }

    // For arrays, show the first item's structure if it's an object
    if (type === 'array' &amp;&amp; Array.isArray(value) &amp;&amp; value.length &gt; 0) {
      const firstItem = value[0];
      if (firstItem &amp;&amp; typeof firstItem === 'object') {
        rows.push(...flattenObject(firstItem, `${path}[0]`));
      }
    }
  });

  return rows;
};

const TableView: React.FC&lt;TableViewProps&gt; = ({
  data,
  onFieldClick,
  onDataTransform,
  compact = false,
}) =&gt; {
  const [filterType, setFilterType] = useState&lt;string&gt;('all');
  const [searchText, setSearchText] = useState('');

  const tableData = useMemo(() =&gt; {
    return flattenObject(data);
  }, [data]);

  const filteredData = useMemo(() =&gt; {
    let filtered = tableData;

    // Filter by type
    if (filterType !== 'all') {
      filtered = filtered.filter((row) =&gt; row.type === filterType);
    }

    // Filter by search text
    if (searchText) {
      const search = searchText.toLowerCase();
      filtered = filtered.filter(
        (row) =&gt;
          row.field.toLowerCase().includes(search) ||
          row.path.toLowerCase().includes(search) ||
          String(row.displayValue).toLowerCase().includes(search)
      );
    }

    return filtered;
  }, [tableData, filterType, searchText]);

  const typeOptions = useMemo(() =&gt; {
    const types = new Set(tableData.map((row) =&gt; row.type));
    return Array.from(types).sort();
  }, [tableData]);

  const copyValue = (value: any) =&gt; {
    const text = typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value);
    navigator.clipboard.writeText(text);
  };

  const viewFullValue = (row: TableRow) =&gt; {
    onFieldClick?.(row.path);
  };

  const columns = [
    {
      title: 'Field',
      dataIndex: 'field',
      key: 'field',
      width: compact ? 120 : 200,
      render: (text: string, record: TableRow) =&gt; (
        &lt;div&gt;
          &lt;Text className=&quot;text-white font-medium&quot;&gt;{text}&lt;/Text&gt;
          {!compact &amp;&amp; &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;{record.path}&lt;/div&gt;}
        &lt;/div&gt;
      ),
      sorter: (a: TableRow, b: TableRow) =&gt; a.field.localeCompare(b.field),
    },
    {
      title: 'Type',
      dataIndex: 'type',
      key: 'type',
      width: 80,
      render: (type: string, record: TableRow) =&gt; (
        &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
          &lt;Tag color={getTypeColor(type)}&gt;{type}&lt;/Tag&gt;
          {record.nullable &amp;&amp; &lt;Tag color=&quot;red&quot;&gt;nullable&lt;/Tag&gt;}
        &lt;/Space&gt;
      ),
      filters: typeOptions.map((type) =&gt; ({ text: type, value: type })),
      onFilter: (value: any, record: TableRow) =&gt; record.type === value,
    },
    {
      title: 'Value',
      dataIndex: 'displayValue',
      key: 'value',
      ellipsis: true,
      render: (displayValue: string, record: TableRow) =&gt; {
        const isLongValue = record.type === 'string' &amp;&amp; record.size &amp;&amp; record.size &gt; 100;
        const isComplexValue = record.type === 'object' || record.type === 'array';

        return (
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;Text
              className={`${record.nullable ? 'text-gray-500 italic' : 'text-gray-300'}`}
              style={{ maxWidth: compact ? 150 : 300 }}
            &gt;
              {displayValue}
            &lt;/Text&gt;
            &lt;Space size=&quot;small&quot;&gt;
              {(isLongValue || isComplexValue) &amp;&amp; (
                &lt;Tooltip title=&quot;View full value&quot;&gt;
                  &lt;Button
                    icon={&lt;EyeOutlined /&gt;}
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    onClick={() =&gt; viewFullValue(record)}
                    className=&quot;text-gray-400 hover:text-white&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}
              &lt;Tooltip title=&quot;Copy value&quot;&gt;
                &lt;Button
                  icon={&lt;CopyOutlined /&gt;}
                  size=&quot;small&quot;
                  type=&quot;text&quot;
                  onClick={() =&gt; copyValue(record.value)}
                  className=&quot;text-gray-400 hover:text-white&quot;
                /&gt;
              &lt;/Tooltip&gt;
              {onDataTransform &amp;&amp; (
                &lt;Tooltip title=&quot;Use in transform&quot;&gt;
                  &lt;Button
                    icon={&lt;EditOutlined /&gt;}
                    size=&quot;small&quot;
                    type=&quot;text&quot;
                    onClick={() =&gt; onDataTransform({ [record.field]: record.value })}
                    className=&quot;text-gray-400 hover:text-white&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}
            &lt;/Space&gt;
          &lt;/div&gt;
        );
      },
    },
  ];

  if (compact) {
    // Remove the path display and reduce column widths for compact mode
    columns[0].width = 100;
    columns[2].render = (displayValue: string, record: TableRow) =&gt; (
      &lt;Text
        className={`${record.nullable ? 'text-gray-500 italic' : 'text-gray-300'}`}
        ellipsis={{ tooltip: displayValue }}
        style={{ maxWidth: 120 }}
      &gt;
        {displayValue}
      &lt;/Text&gt;
    );
  }

  if (!data) {
    return (
      &lt;div className=&quot;p-8 text-center text-gray-400&quot;&gt;
        &lt;FilterOutlined className=&quot;text-4xl mb-2&quot; /&gt;
        &lt;div&gt;No data to display&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 overflow-hidden h-full flex flex-col&quot;&gt;
      {/* Filters and Controls */}
      &lt;div
        className={`${compact ? 'p-2' : 'p-3'} border-b border-gray-700 bg-gray-800 flex-shrink-0`}
      &gt;
        &lt;Space wrap size={compact ? 'small' : 'middle'}&gt;
          &lt;Input.Search
            placeholder=&quot;Search fields and values...&quot;
            value={searchText}
            onChange={(e) =&gt; setSearchText(e.target.value)}
            style={{ width: compact ? 150 : 200 }}
          /&gt;
          &lt;Select
            value={filterType}
            onChange={setFilterType}
            style={{ width: compact ? 100 : 120 }}
          &gt;
            &lt;Option value=&quot;all&quot;&gt;All Types&lt;/Option&gt;
            {typeOptions.map((type) =&gt; (
              &lt;Option key={type} value={type}&gt;
                &lt;Tag color={getTypeColor(type)}&gt;{type}&lt;/Tag&gt;
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
          &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
            {filteredData.length} of {tableData.length} fields
          &lt;/Text&gt;
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Data Table */}
      &lt;div className=&quot;flex-1 overflow-hidden&quot;&gt;
        &lt;Table
          dataSource={filteredData}
          columns={columns}
          pagination={{
            pageSize: compact ? 8 : 15,
            showSizeChanger: !compact,
            showQuickJumper: !compact,
            showTotal: (total, range) =&gt; `${range[0]}-${range[1]} of ${total} fields`,
            size: compact ? 'small' : 'default',
          }}
          className=&quot;dark-table ps-4&quot;
          scroll={{ y: 'calc(100vh - 300px)' }}
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default TableView;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/SchemaView.tsx (Line 1:1 - Line 244:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/schemaview/SchemaView.tsx (Line 2:1 - Line 245:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup108"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import {
  BranchesOutlined,
  CalendarOutlined,
  CheckSquareOutlined,
  DatabaseOutlined,
  FileTextOutlined,
  NumberOutlined,
  TableOutlined,
} from '@ant-design/icons';
import { Space, Tag, Tree, Typography } from 'antd';
import type React from 'react';
import { useMemo } from 'react';

const { Text } = Typography;

interface SchemaNode {
  key: string;
  title: React.ReactNode;
  children?: SchemaNode[];
  isLeaf?: boolean;
  type: string;
  nullable: boolean;
  path: string;
}

interface SchemaViewProps {
  data: any;
  onFieldClick?: (fieldPath: string) =&gt; void;
  compact?: boolean;
}

const getTypeIcon = (type: string) =&gt; {
  switch (type) {
    case 'string':
      return &lt;FileTextOutlined className=&quot;text-green-400&quot; /&gt;;
    case 'number':
      return &lt;NumberOutlined className=&quot;text-blue-400&quot; /&gt;;
    case 'boolean':
      return &lt;CheckSquareOutlined className=&quot;text-purple-400&quot; /&gt;;
    case 'date':
      return &lt;CalendarOutlined className=&quot;text-orange-400&quot; /&gt;;
    case 'array':
      return &lt;TableOutlined className=&quot;text-red-400&quot; /&gt;;
    case 'object':
      return &lt;BranchesOutlined className=&quot;text-yellow-400&quot; /&gt;;
    case 'null':
      return &lt;DatabaseOutlined className=&quot;text-gray-400&quot; /&gt;;
    default:
      return &lt;FileTextOutlined className=&quot;text-gray-400&quot; /&gt;;
  }
};

const getTypeColor = (type: string) =&gt; {
  switch (type) {
    case 'string':
      return 'green';
    case 'number':
      return 'blue';
    case 'boolean':
      return 'purple';
    case 'date':
      return 'orange';
    case 'array':
      return 'red';
    case 'object':
      return 'yellow';
    case 'null':
      return 'gray';
    default:
      return 'default';
  }
};

const inferType = (value: any): string =&gt; {
  if (value === null) return 'null';
  if (value === undefined) return 'undefined';
  if (Array.isArray(value)) return 'array';
  if (typeof value === 'object') return 'object';
  if (typeof value === 'string') {
    // Check if it's a date string
    if (/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(value)) {
      return 'date';
    }
    // Check if it's an email
    if (/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
      return 'email';
    }
    // Check if it's a URL
    if (/^https?:\/\//.test(value)) {
      return 'url';
    }
    return 'string';
  }
  return typeof value;
};

const getValuePreview = (value: any, type: string): string =&gt; {
  if (value === null || value === undefined) return '';

  switch (type) {
    case 'string':
      return value.length &gt; 50 ? `&quot;${value.substring(0, 47)}...&quot;` : `&quot;${value}&quot;`;
    case 'array':
      return `[${value.length} items]`;
    case 'object':
      return `{${Object.keys(value).length} fields}`;
    case 'date':
      return new Date(value).toLocaleDateString();
    default:
      return String(value);
  }
};

const buildSchemaTree = (
  obj: any,
  path: string = '',
  onFieldClick?: (fieldPath: string) =&gt; void
): SchemaNode[] =&gt; {
  if (!obj || typeof obj !== 'object') return [];

  return Object.entries(obj).map(([key, value]) =&gt; {
    const currentPath = path ? `${path}.${key}` : key;
    const type = inferType(value);
    const nullable = value === null || value === undefined;
    const preview = getValuePreview(value, type);

    const nodeTitle = (
      &lt;div
        className=&quot;flex items-center justify-between cursor-pointer hover:bg-gray-700 px-2 py-1 rounded&quot;
        onClick={() =&gt; onFieldClick?.(currentPath)}
      &gt;
        &lt;Space size=&quot;small&quot;&gt;
          {getTypeIcon(type)}
          &lt;Text className=&quot;text-white font-medium&quot;&gt;{key}&lt;/Text&gt;
          &lt;Tag color={getTypeColor(type)}&gt;{type}&lt;/Tag&gt;
          {nullable &amp;&amp; &lt;Tag color=&quot;red&quot;&gt;nullable&lt;/Tag&gt;}
        &lt;/Space&gt;
        {preview &amp;&amp; &lt;Text className=&quot;text-gray-400 text-xs ml-2 max-w-xs truncate&quot;&gt;{preview}&lt;/Text&gt;}
      &lt;/div&gt;
    );

    const node: SchemaNode = {
      key: currentPath,
      title: nodeTitle,
      type,
      nullable,
      path: currentPath,
      isLeaf: type !== 'object' &amp;&amp; type !== 'array',
    };

    // Add children for objects and arrays
    if (type === 'object' &amp;&amp; value &amp;&amp; Object.keys(value).length &gt; 0) {
      node.children = buildSchemaTree(value, currentPath, onFieldClick);
    } else if (type === 'array' &amp;&amp; Array.isArray(value) &amp;&amp; value.length &gt; 0) {
      // For arrays, show the schema of the first item
      const firstItem = value[0];
      if (firstItem &amp;&amp; typeof firstItem === 'object') {
        node.children = buildSchemaTree(firstItem, `${currentPath}[0]`, onFieldClick);
      }
    }

    return node;
  });
};

const SchemaView: React.FC&lt;SchemaViewProps&gt; = ({ data, onFieldClick, compact = false }) =&gt; {
  const schemaTree = useMemo(() =&gt; {
    return buildSchemaTree(data, '', onFieldClick);
  }, [data, onFieldClick]);

  const schemaStats = useMemo(() =&gt; {
    const countTypes = (nodes: SchemaNode[]): Record&lt;string, number&gt; =&gt; {
      const counts: Record&lt;string, number&gt; = {};

      const traverse = (nodeList: SchemaNode[]) =&gt; {
        nodeList.forEach((node) =&gt; {
          counts[node.type] = (counts[node.type] || 0) + 1;
          if (node.children) {
            traverse(node.children);
          }
        });
      };

      traverse(nodes);
      return counts;
    };

    return countTypes(schemaTree);
  }, [schemaTree]);

  if (!data) {
    return (
      &lt;div className=&quot;p-8 text-center text-gray-400&quot;&gt;
        &lt;DatabaseOutlined className=&quot;text-4xl mb-2&quot; /&gt;
        &lt;div&gt;No data to analyze&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 overflow-hidden h-full flex flex-col&quot;&gt;
      {/* Schema Statistics Header */}
      {(compact || !compact) &amp;&amp; (
        &lt;div
          className={`${compact ? 'p-2' : 'p-3'} border-b border-gray-700 bg-gray-800 flex-shrink-0`}
        &gt;
          &lt;Text
            className={`text-gray-300 ${compact ? 'text-xs' : 'text-sm'} font-medium mb-2 block`}
          &gt;
            Type Distribution
          &lt;/Text&gt;
          &lt;div className=&quot;flex flex-wrap gap-1&quot;&gt;
            {Object.entries(schemaStats).map(([type, count]) =&gt; (
              &lt;div key={type} className=&quot;flex items-center gap-1&quot;&gt;
                {compact ? null : getTypeIcon(type)}
                &lt;Tag
                  color={getTypeColor(type)}
                  // size={compact ? 'small' : 'default'}
                &gt;
                  {type} ({count})
                &lt;/Tag&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Schema Tree */}
      &lt;div className={`${compact ? 'p-2' : 'p-4'} flex-1 overflow-hidden bg-gray-900`}&gt;
        &lt;Tree
          treeData={schemaTree}
          defaultExpandAll={!compact}
          showLine
          showIcon={false}
          className=&quot;bg-gray-900&quot;
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default SchemaView;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/JsonView.tsx (Line 1:1 - Line 438:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/jsonview/JsonView.tsx (Line 3:1 - Line 440:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup110"><code class="language-tsx text-sm text-gray-800">// /* eslint-disable @typescript-eslint/no-explicit-any */
// import React, { useState, useMemo } from 'react'
// import { Button, Space, Typography, Tooltip, Input, Switch } from 'antd'
// import {
//   CopyOutlined,
//   CompressOutlined,
//   ExpandOutlined,
//   FormatPainterOutlined,
//   SearchOutlined
// } from '@ant-design/icons'

// const { Text } = Typography

// interface JsonViewProps {
//   data: any
//   onFieldClick?: (fieldPath: string) =&gt; void
//   compact?: boolean
//   highlightPath?: string
// }

// interface JsonLineProps {
//   line: string
//   lineNumber: number
//   isHighlighted: boolean
//   onFieldClick?: (fieldPath: string) =&gt; void
// }

// const JsonLine: React.FC&lt;JsonLineProps&gt; = ({
//   line,
//   lineNumber,
//   isHighlighted,
//   onFieldClick
// }) =&gt; {
//   const handleClick = () =&gt; {
//     // Extract field path from JSON line (simplified)
//     const fieldMatch = line.match(/&quot;([^&quot;]+)&quot;:\s*/)
//     if (fieldMatch &amp;&amp; onFieldClick) {
//       onFieldClick(fieldMatch[1])
//     }
//   }

//   return (
//     &lt;div
//       className={`flex items-start hover:bg-gray-700 ${isHighlighted ? 'bg-yellow-900' : ''}`}
//       onClick={handleClick}
//     &gt;
//       &lt;span className=&quot;text-gray-500 text-xs mr-4 select-none w-8 text-right&quot;&gt;
//         {lineNumber}
//       &lt;/span&gt;
//       &lt;pre className=&quot;text-sm text-gray-300 font-mono flex-1 whitespace-pre-wrap cursor-pointer&quot;&gt;
//         &lt;code dangerouslySetInnerHTML={{ __html: syntaxHighlight(line) }} /&gt;
//       &lt;/pre&gt;
//     &lt;/div&gt;
//   )
// }

// const syntaxHighlight = (json: string): string =&gt; {
//   return json
//     .replace(/&amp;/g, &quot;&amp;amp;&quot;)
//     .replace(/&lt;/g, &quot;&amp;lt;&quot;)
//     .replace(/&gt;/g, &quot;&amp;gt;&quot;)
//     .replace(/(&quot;(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\&quot;])*&quot;(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,
//       function (match) {
//         let cls = 'text-yellow-400' // numbers
//         if (/^&quot;/.test(match)) {
//           if (/:$/.test(match)) {
//             cls = 'text-blue-400' // keys
//           } else {
//             cls = 'text-green-400' // strings
//           }
//         } else if (/true|false/.test(match)) {
//           cls = 'text-purple-400' // booleans
//         } else if (/null/.test(match)) {
//           cls = 'text-red-400' // null
//         }
//         return `&lt;span class=&quot;${cls}&quot;&gt;${match}&lt;/span&gt;`
//       }
//     )
// }

// const JsonView: React.FC&lt;JsonViewProps&gt; = ({
//   data,
//   onFieldClick,
//   compact = false,
//   highlightPath
// }) =&gt; {
//   const [collapsed, setCollapsed] = useState(compact)
//   const [searchTerm, setSearchTerm] = useState('')
//   const [showLineNumbers, setShowLineNumbers] = useState(true)

//   const formattedJson = useMemo(() =&gt; {
//     if (!data) return ''
//     return JSON.stringify(data, null, collapsed ? 0 : 2)
//   }, [data, collapsed])

//   const jsonLines = useMemo(() =&gt; {
//     return formattedJson.split('\n')
//   }, [formattedJson])

//   const filteredLines = useMemo(() =&gt; {
//     if (!searchTerm) return jsonLines

//     return jsonLines
//       .map((line, index) =&gt; ({ line, index }))
//       .filter(({ line }) =&gt;
//         line.toLowerCase().includes(searchTerm.toLowerCase())
//       )
//   }, [jsonLines, searchTerm])

//   const handleCopy = () =&gt; {
//     navigator.clipboard.writeText(formattedJson)
//   }

//   const handleFormat = () =&gt; {
//     setCollapsed(!collapsed)
//   }

//   if (!data) {
//     return (
//       &lt;div className=&quot;p-8 text-center text-gray-400&quot;&gt;
//         &lt;FormatPainterOutlined className=&quot;text-4xl mb-2&quot; /&gt;
//         &lt;div&gt;No JSON data to display&lt;/div&gt;
//       &lt;/div&gt;
//     )
//   }

//   return (
//     &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 overflow-hidden h-full flex flex-col&quot;&gt;
//       {/* Header Controls */}
//       &lt;div className={`${compact ? 'p-2' : 'p-3'} border-b border-gray-700 bg-gray-800 flex-shrink-0`}&gt;
//         &lt;div className=&quot;flex items-center justify-between&quot;&gt;
//           &lt;Space size={compact ? 'small' : 'middle'}&gt;
//             &lt;Input
//               placeholder=&quot;Search JSON...&quot;
//               value={searchTerm}
//               onChange={(e) =&gt; setSearchTerm(e.target.value)}
//               style={{ width: compact ? 150 : 200 }}
//               size=&quot;small&quot;
//               prefix={&lt;SearchOutlined /&gt;}
//             /&gt;
//             {!compact &amp;&amp; (
//               &lt;&gt;
//                 &lt;Switch
//                   checked={showLineNumbers}
//                   onChange={setShowLineNumbers}
//                   size=&quot;small&quot;
//                 /&gt;
//                 &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;Line numbers&lt;/Text&gt;
//               &lt;/&gt;
//             )}
//           &lt;/Space&gt;

//           &lt;Space size=&quot;small&quot;&gt;
//             &lt;Tooltip title={collapsed ? &quot;Expand JSON&quot; : &quot;Collapse JSON&quot;}&gt;
//               &lt;Button
//                 icon={collapsed ? &lt;ExpandOutlined /&gt; : &lt;CompressOutlined /&gt;}
//                 size=&quot;small&quot;
//                 onClick={handleFormat}
//                 className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
//               /&gt;
//             &lt;/Tooltip&gt;
//             &lt;Tooltip title=&quot;Copy JSON&quot;&gt;
//               &lt;Button
//                 icon={&lt;CopyOutlined /&gt;}
//                 size=&quot;small&quot;
//                 onClick={handleCopy}
//                 className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
//               /&gt;
//             &lt;/Tooltip&gt;
//           &lt;/Space&gt;
//         &lt;/div&gt;

//         {searchTerm &amp;&amp; (
//           &lt;div className=&quot;mt-2&quot;&gt;
//             &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;
//               {filteredLines.length} matches found
//             &lt;/Text&gt;
//           &lt;/div&gt;
//         )}
//       &lt;/div&gt;

//       {/* JSON Content */}
//       &lt;div className=&quot;p-2 overflow-auto flex-1&quot;&gt;
//         {searchTerm ? (
//           // Filtered view
//           &lt;div className=&quot;space-y-1&quot;&gt;
//             {filteredLines.map(({ line, index }) =&gt; (
//               &lt;JsonLine
//                 key={index}
//                 line={line}
//                 lineNumber={showLineNumbers ? index + 1 : 0}
//                 isHighlighted={highlightPath ? line.includes(highlightPath) : false}
//                 onFieldClick={onFieldClick}
//               /&gt;
//             ))}
//           &lt;/div&gt;
//         ) : (
//           // Full JSON view
//           &lt;div className=&quot;space-y-1&quot;&gt;
//             {jsonLines.map((line, index) =&gt; (
//               &lt;JsonLine
//                 key={index}
//                 line={line}
//                 lineNumber={showLineNumbers ? index + 1 : 0}
//                 isHighlighted={highlightPath ? line.includes(highlightPath) : false}
//                 onFieldClick={onFieldClick}
//               /&gt;
//             ))}
//           &lt;/div&gt;
//         )}
//       &lt;/div&gt;

//       {/* Footer Stats - hide in compact mode */}
//       {!compact &amp;&amp; (
//         &lt;div className=&quot;p-2 border-t border-gray-700 bg-gray-800 flex-shrink-0&quot;&gt;
//           &lt;div className=&quot;flex justify-between text-xs text-gray-400&quot;&gt;
//             &lt;span&gt;{jsonLines.length} lines&lt;/span&gt;
//             &lt;span&gt;{(formattedJson.length / 1024).toFixed(1)} KB&lt;/span&gt;
//             &lt;span&gt;{Object.keys(data || {}).length} top-level fields&lt;/span&gt;
//           &lt;/div&gt;
//         &lt;/div&gt;
//       )}
//     &lt;/div&gt;
//   )
// }

// export default JsonView

import {
  CompressOutlined,
  CopyOutlined,
  ExpandOutlined,
  FormatPainterOutlined,
  SearchOutlined,
} from '@ant-design/icons';
import { Button, Input, Space, Switch, Tooltip, Typography } from 'antd';
/* eslint-disable @typescript-eslint/no-explicit-any */
import type React from 'react';
import { useMemo, useState } from 'react';

const { Text } = Typography;

interface JsonViewProps {
  data: any;
  onFieldClick?: (fieldPath: string) =&gt; void;
  compact?: boolean;
  highlightPath?: string;
}

interface JsonLineProps {
  line: string;
  lineNumber: number;
  isHighlighted: boolean;
  onFieldClick?: (fieldPath: string) =&gt; void;
}

interface LineWithIndex {
  line: string;
  index: number;
}

const JsonLine: React.FC&lt;JsonLineProps&gt; = ({ line, lineNumber, isHighlighted, onFieldClick }) =&gt; {
  const handleClick = () =&gt; {
    // Extract field path from JSON line (simplified)
    const fieldMatch = line.match(/&quot;([^&quot;]+)&quot;:\s*/);
    if (fieldMatch &amp;&amp; onFieldClick) {
      onFieldClick(fieldMatch[1]);
    }
  };

  return (
    &lt;div
      className={`flex items-start hover:bg-gray-700 ${isHighlighted ? 'bg-yellow-900' : ''}`}
      onClick={handleClick}
    &gt;
      &lt;span className=&quot;text-gray-500 text-xs mr-4 select-none w-8 text-right&quot;&gt;{lineNumber}&lt;/span&gt;
      &lt;pre className=&quot;text-sm text-gray-300 font-mono flex-1 whitespace-pre-wrap cursor-pointer&quot;&gt;
        &lt;code dangerouslySetInnerHTML={{ __html: syntaxHighlight(line) }} /&gt;
      &lt;/pre&gt;
    &lt;/div&gt;
  );
};

const syntaxHighlight = (json: string): string =&gt; {
  return json
    .replace(/&amp;/g, '&amp;amp;')
    .replace(/&lt;/g, '&amp;lt;')
    .replace(/&gt;/g, '&amp;gt;')
    .replace(
      /(&quot;(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\&quot;])*&quot;(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,
      (match) =&gt; {
        let cls = 'text-yellow-400'; // numbers
        if (/^&quot;/.test(match)) {
          if (/:$/.test(match)) {
            cls = 'text-blue-400'; // keys
          } else {
            cls = 'text-green-400'; // strings
          }
        } else if (/true|false/.test(match)) {
          cls = 'text-purple-400'; // booleans
        } else if (/null/.test(match)) {
          cls = 'text-red-400'; // null
        }
        return `&lt;span class=&quot;${cls}&quot;&gt;${match}&lt;/span&gt;`;
      }
    );
};

const JsonView: React.FC&lt;JsonViewProps&gt; = ({
  data,
  onFieldClick,
  compact = false,
  highlightPath,
}) =&gt; {
  const [collapsed, setCollapsed] = useState(compact);
  const [searchTerm, setSearchTerm] = useState('');
  const [showLineNumbers, setShowLineNumbers] = useState(true);

  const formattedJson = useMemo(() =&gt; {
    if (!data) return '';
    return JSON.stringify(data, null, collapsed ? 0 : 2);
  }, [data, collapsed]);

  const jsonLines = useMemo(() =&gt; {
    return formattedJson.split('\n');
  }, [formattedJson]);

  // Fix: Always return the same type structure
  const filteredLines = useMemo((): LineWithIndex[] =&gt; {
    const linesWithIndex = jsonLines.map((line, index) =&gt; ({ line, index }));

    if (!searchTerm) {
      return linesWithIndex;
    }

    return linesWithIndex.filter(({ line }) =&gt;
      line.toLowerCase().includes(searchTerm.toLowerCase())
    );
  }, [jsonLines, searchTerm]);

  const handleCopy = () =&gt; {
    navigator.clipboard.writeText(formattedJson);
  };

  const handleFormat = () =&gt; {
    setCollapsed(!collapsed);
  };

  if (!data) {
    return (
      &lt;div className=&quot;p-8 text-center text-gray-400&quot;&gt;
        &lt;FormatPainterOutlined className=&quot;text-4xl mb-2&quot; /&gt;
        &lt;div&gt;No JSON data to display&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 overflow-hidden h-full flex flex-col&quot;&gt;
      {/* Header Controls */}
      &lt;div
        className={`${compact ? 'p-2' : 'p-3'} border-b border-gray-700 bg-gray-800 flex-shrink-0`}
      &gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;Space size={compact ? 'small' : 'middle'}&gt;
            &lt;Input
              placeholder=&quot;Search JSON...&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              style={{ width: compact ? 150 : 200 }}
              size=&quot;small&quot;
              prefix={&lt;SearchOutlined /&gt;}
            /&gt;
            {!compact &amp;&amp; (
              &lt;&gt;
                &lt;Switch checked={showLineNumbers} onChange={setShowLineNumbers} size=&quot;small&quot; /&gt;
                &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;Line numbers&lt;/Text&gt;
              &lt;/&gt;
            )}
          &lt;/Space&gt;

          &lt;Space size=&quot;small&quot;&gt;
            &lt;Tooltip title={collapsed ? 'Expand JSON' : 'Collapse JSON'}&gt;
              &lt;Button
                icon={collapsed ? &lt;ExpandOutlined /&gt; : &lt;CompressOutlined /&gt;}
                size=&quot;small&quot;
                onClick={handleFormat}
                className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
              /&gt;
            &lt;/Tooltip&gt;
            &lt;Tooltip title=&quot;Copy JSON&quot;&gt;
              &lt;Button
                icon={&lt;CopyOutlined /&gt;}
                size=&quot;small&quot;
                onClick={handleCopy}
                className=&quot;bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600&quot;
              /&gt;
            &lt;/Tooltip&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        {searchTerm &amp;&amp; (
          &lt;div className=&quot;mt-2&quot;&gt;
            &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;{filteredLines.length} matches found&lt;/Text&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* JSON Content */}
      &lt;div className=&quot;p-2 overflow-auto flex-1&quot;&gt;
        &lt;div className=&quot;space-y-1&quot;&gt;
          {filteredLines.map(({ line, index }) =&gt; (
            &lt;JsonLine
              key={index}
              line={line}
              lineNumber={showLineNumbers ? index + 1 : 0}
              isHighlighted={highlightPath ? line.includes(highlightPath) : false}
              onFieldClick={onFieldClick}
            /&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Footer Stats - hide in compact mode */}
      {!compact &amp;&amp; (
        &lt;div className=&quot;p-2 border-t border-gray-700 bg-gray-800 flex-shrink-0&quot;&gt;
          &lt;div className=&quot;flex justify-between text-xs text-gray-400&quot;&gt;
            &lt;span&gt;{jsonLines.length} lines&lt;/span&gt;
            &lt;span&gt;{(formattedJson.length / 1024).toFixed(1)} KB&lt;/span&gt;
            &lt;span&gt;{Object.keys(data || {}).length} top-level fields&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default JsonView;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/DataVisualizationPanel.tsx (Line 1:1 - Line 274:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/datavisualizationpanel/DataVisualizationPanel.tsx (Line 3:1 - Line 276:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup112"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { CopyOutlined, DownloadOutlined } from '@ant-design/icons';
import { Modal } from 'antd';
import { CheckCircle, Search } from 'lucide-react';
import type React from 'react';
import { useMemo, useState } from 'react';
import JsonView from './JsonView';
import SchemaView from './SchemaView';
import TableView from './TableView';

type DisplayMode = 'schema' | 'table' | 'json';

interface DataVisualizationPanelProps {
  data: any;
  title?: string;
  description?: string;
  nodeId?: string;
  nodeType?: string;
  onDataTransform?: (transformedData: any) =&gt; void;
  compact?: boolean;
}

const DataVisualizationPanel: React.FC&lt;DataVisualizationPanelProps&gt; = ({
  data,
  title = 'Input Data',
  nodeId,
  onDataTransform,
  compact = false,
}) =&gt; {
  const [displayMode, setDisplayMode] = useState&lt;DisplayMode&gt;('schema');
  const [searchTerm, setSearchTerm] = useState('');
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [selectedField, setSelectedField] = useState&lt;string | null&gt;(null);

  // Filter data based on search term
  const filteredData = useMemo(() =&gt; {
    if (!searchTerm || !data) return data;

    const filterObject = (obj: any, term: string): any =&gt; {
      if (typeof obj === 'string') {
        return obj.toLowerCase().includes(term.toLowerCase()) ? obj : null;
      }

      if (Array.isArray(obj)) {
        return obj.map((item) =&gt; filterObject(item, term)).filter((item) =&gt; item !== null);
      }

      if (typeof obj === 'object' &amp;&amp; obj !== null) {
        const filtered: any = {};
        for (const [key, value] of Object.entries(obj)) {
          if (key.toLowerCase().includes(term.toLowerCase())) {
            filtered[key] = value;
          } else {
            const filteredValue = filterObject(value, term);
            if (filteredValue !== null) {
              filtered[key] = filteredValue;
            }
          }
        }
        return Object.keys(filtered).length &gt; 0 ? filtered : null;
      }

      return obj;
    };

    return filterObject(data, searchTerm);
  }, [data, searchTerm]);

  // Data statistics
  const dataStats = useMemo(() =&gt; {
    if (!data) return null;

    const countFields = (obj: any): number =&gt; {
      if (typeof obj !== 'object' || obj === null) return 0;

      let count = 0;
      for (const [value] of Object.entries(obj)) {
        count++;
        if (typeof value === 'object' &amp;&amp; value !== null &amp;&amp; !Array.isArray(value)) {
          count += countFields(value);
        }
      }
      return count;
    };

    return {
      totalFields: countFields(data),
      topLevelFields: Object.keys(data || {}).length,
      hasArrays: JSON.stringify(data).includes('['),
      hasNested: JSON.stringify(data).includes('{', 1),
      dataSize: JSON.stringify(data).length,
    };
  }, [data]);

  const handleCopyData = () =&gt; {
    navigator.clipboard.writeText(JSON.stringify(data, null, 2));
  };

  const handleDownloadData = () =&gt; {
    const blob = new Blob([JSON.stringify(data, null, 2)], {
      type: 'application/json',
    });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${nodeId || 'data'}-output.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };

  const showFieldDetails = (fieldPath: string) =&gt; {
    setSelectedField(fieldPath);
    setIsModalVisible(true);
  };

  const renderContent = () =&gt; {
    if (!data) {
      return (
        &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
              &lt;span className=&quot;text-2xl&quot;&gt;📊&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;p className=&quot;mb-2&quot;&gt;No input data available&lt;/p&gt;
          &lt;p className=&quot;text-gray-400&quot;&gt;
            Connect this node to a data source to see input data visualization
          &lt;/p&gt;
        &lt;/div&gt;
      );
    }

    switch (displayMode) {
      case 'schema':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            &lt;SchemaView data={filteredData} onFieldClick={showFieldDetails} compact={compact} /&gt;
          &lt;/div&gt;
        );
      case 'table':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            &lt;TableView
              data={filteredData}
              onFieldClick={showFieldDetails}
              onDataTransform={onDataTransform}
              compact={compact}
            /&gt;
          &lt;/div&gt;
        );
      case 'json':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            &lt;JsonView data={filteredData} onFieldClick={showFieldDetails} compact={compact} /&gt;
          &lt;/div&gt;
        );
      default:
        return null;
    }
  };

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
            {title}
            {data &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Data loaded&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {data &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search data fields&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}
                &gt;
                  {label}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;

            {/* Action buttons */}
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button
                onClick={handleCopyData}
                className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;
                title=&quot;Copy JSON&quot;
              &gt;
                &lt;CopyOutlined className=&quot;w-4 h-4&quot; /&gt;
              &lt;/button&gt;
              &lt;button
                onClick={handleDownloadData}
                className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;
                title=&quot;Download JSON&quot;
              &gt;
                &lt;DownloadOutlined className=&quot;w-4 h-4&quot; /&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Data info */}
        {data &amp;&amp; dataStats &amp;&amp; (
          &lt;div className=&quot;mt-3 flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;Fields:&lt;/span&gt; {dataStats.totalFields}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;Size:&lt;/span&gt; {(dataStats.dataSize / 1024).toFixed(1)}
              KB
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 overflow-hidden&quot;&gt;{renderContent()}&lt;/div&gt;

      {/* Field Details Modal */}
      &lt;Modal
        title={`Field Details: ${selectedField}`}
        open={isModalVisible}
        onCancel={() =&gt; setIsModalVisible(false)}
        footer={null}
        width={800}
        className=&quot;dark-modal&quot;
      &gt;
        {selectedField &amp;&amp; (
          &lt;div className=&quot;bg-gray-900 p-4 rounded&quot;&gt;
            &lt;JsonView data={filteredData} highlightPath={selectedField} compact={false} /&gt;
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default DataVisualizationPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/selfhosted/SelfHosted.tsx (Line 206:2 - Line 220:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 69:2 - Line 83:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn192" onclick="toggleCodeBlock('cloneGroup192', 'expandBtn192', 'collapseBtn192')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn192" onclick="toggleCodeBlock('cloneGroup192', 'expandBtn192', 'collapseBtn192')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup192"><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/roadmap/Roadmap.tsx (Line 259:3 - Line 273:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/selfhosted/SelfHosted.tsx (Line 206:3 - Line 83:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn193" onclick="toggleCodeBlock('cloneGroup193', 'expandBtn193', 'collapseBtn193')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn193" onclick="toggleCodeBlock('cloneGroup193', 'expandBtn193', 'collapseBtn193')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup193"><code class="language-tsx text-sm text-gray-800">};

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Product</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/privacy/Privacy.tsx (Line 81:15 - Line 98:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 67:108 - Line 221:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn194" onclick="toggleCodeBlock('cloneGroup194', 'expandBtn194', 'collapseBtn194')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn194" onclick="toggleCodeBlock('cloneGroup194', 'expandBtn194', 'collapseBtn194')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup194"><code class="language-tsx text-sm text-gray-800">,
    },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Privacy</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/pricingpage/PricingPage.tsx (Line 353:172 - Line 369:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 67:108 - Line 83:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn195" onclick="toggleCodeBlock('cloneGroup195', 'expandBtn195', 'collapseBtn195')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn195" onclick="toggleCodeBlock('cloneGroup195', 'expandBtn195', 'collapseBtn195')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup195"><code class="language-tsx text-sm text-gray-800">,
    },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Simple</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/pricingpage/PricingPage.tsx (Line 670:13 - Line 680:5), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 493:13 - Line 503:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn196" onclick="toggleCodeBlock('cloneGroup196', 'expandBtn196', 'collapseBtn196')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn196" onclick="toggleCodeBlock('cloneGroup196', 'expandBtn196', 'collapseBtn196')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup196"><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Get Started?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Join</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 1:2 - Line 13:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 12:1 - Line 24:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn198" onclick="toggleCodeBlock('cloneGroup198', 'expandBtn198', 'collapseBtn198')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn198" onclick="toggleCodeBlock('cloneGroup198', 'expandBtn198', 'collapseBtn198')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup198"><code class="language-tsx text-sm text-gray-800">} from 'lucide-react';
import type React from 'react';
import { useEffect, useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useAuthStore } from '@/core/stores/authStore';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';
import { useAuthStore } from './hooks/useAuthStore';
import { useEffect } from './hooks/useEffect';
import { useNavigate } from './hooks/useNavigate';
import { useState } from './hooks/useState';

const Login</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 24:16 - Line 47:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 39:23 - Line 62:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn199" onclick="toggleCodeBlock('cloneGroup199', 'expandBtn199', 'collapseBtn199')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn199" onclick="toggleCodeBlock('cloneGroup199', 'expandBtn199', 'collapseBtn199')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup199"><code class="language-tsx text-sm text-gray-800">] = useState(false);
  const [isVisible, setIsVisible] = useState(false);

  // Animation trigger
  useEffect(() =&gt; {
    setIsVisible(true);
  }, []);

  // Redirect if already authenticated
  useEffect(() =&gt; {
    if (isAuthenticated) {
      navigate('/app/dashboard');
    }
  }, [isAuthenticated, navigate]);

  // Clear errors when component mounts
  useEffect(() =&gt; {
    clearError();
  }, [clearError]);

  const validateForm = () =&gt; {
    const errors: Record&lt;string, string&gt; = {};

    if (!formData.email</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 47:5 - Line 57:14), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 70:5 - Line 78:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn200" onclick="toggleCodeBlock('cloneGroup200', 'expandBtn200', 'collapseBtn200')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn200" onclick="toggleCodeBlock('cloneGroup200', 'expandBtn200', 'collapseBtn200')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup200"><code class="language-tsx text-sm text-gray-800">if (!formData.email) {
      errors.email = 'Email is required';
    } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
      errors.email = 'Email is invalid';
    }

    if (!formData.password) {
      errors.password = 'Password is required';
    }

    setFormErrors</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 54:23 - Line 69:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 89:43 - Line 104:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn201" onclick="toggleCodeBlock('cloneGroup201', 'expandBtn201', 'collapseBtn201')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn201" onclick="toggleCodeBlock('cloneGroup201', 'expandBtn201', 'collapseBtn201')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup201"><code class="language-tsx text-sm text-gray-800">;
    }

    setFormErrors(errors);
    return Object.keys(errors).length === 0;
  };

  const handleSubmit = async (e: React.FormEvent) =&gt; {
    e.preventDefault();

    if (!validateForm()) {
      return;
    }

    try {
      await</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 69:9 - Line 87:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 105:13 - Line 123:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn202" onclick="toggleCodeBlock('cloneGroup202', 'expandBtn202', 'collapseBtn202')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn202" onclick="toggleCodeBlock('cloneGroup202', 'expandBtn202', 'collapseBtn202')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup202"><code class="language-tsx text-sm text-gray-800">);
      navigate('/app/dashboard');
    } catch (_error) {}
  };

  const handleChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const { name, value, type, checked } = e.target;
    setFormData((prev) =&gt; ({
      ...prev,
      [name]: type === 'checkbox' ? checked : value,
    }));

    // Clear field error when user starts typing
    if (formErrors[name]) {
      setFormErrors((prev) =&gt; ({ ...prev, [name]: '' }));
    }
  };

  return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 85:2 - Line 118:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 139:2 - Line 172:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn203" onclick="toggleCodeBlock('cloneGroup203', 'expandBtn203', 'collapseBtn203')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn203" onclick="toggleCodeBlock('cloneGroup203', 'expandBtn203', 'collapseBtn203')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup203"><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className=&quot;min-h-screen relative overflow-hidden&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Background Elements - matching landing page */}
      &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
      &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

      {/* Animated Background Orbs */}
      &lt;div className=&quot;absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse&quot; /&gt;
      &lt;div className=&quot;absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000&quot; /&gt;

      {/* Floating Elements */}
      &lt;div className=&quot;absolute top-20 right-20 w-20 h-20 bg-blue-500/20 rounded-lg backdrop-blur-sm animate-float hidden lg:block&quot; /&gt;
      &lt;div className=&quot;absolute bottom-20 left-20 w-16 h-16 bg-purple-500/20 rounded-full backdrop-blur-sm animate-float delay-1000 hidden lg:block&quot; /&gt;

      &lt;div className=&quot;relative z-10 min-h-screen flex&quot;&gt;
        {/* Left Side - Branding */}
        &lt;div className=&quot;hidden lg:flex lg:w-1/2 flex-col justify-center px-12&quot;&gt;
          &lt;div
            className={`transition-all duration-1000 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Logo */}
            &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 mb-8 group&quot;&gt;
              &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
              &lt;/div&gt;
              &lt;span className=&quot;text-3xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
            &lt;/Link&gt;

            &lt;h1 className=&quot;text-5xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Welcome</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 154:30 - Line 172:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 209:37 - Line 227:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn204" onclick="toggleCodeBlock('cloneGroup204', 'expandBtn204', 'collapseBtn204')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn204" onclick="toggleCodeBlock('cloneGroup204', 'expandBtn204', 'collapseBtn204')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup204"><code class="language-tsx text-sm text-gray-800">}
        &lt;div className=&quot;w-full lg:w-1/2 flex items-center justify-center px-6 py-12&quot;&gt;
          &lt;div
            className={`w-full max-w-md transition-all duration-1000 delay-300 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Mobile Logo */}
            &lt;div className=&quot;lg:hidden text-center mb-8&quot;&gt;
              &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 group&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                  &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;span className=&quot;text-2xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
              &lt;/Link&gt;
            &lt;/div&gt;

            {/* Form Card */}
            &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-8 shadow-2xl&quot;&gt;
              &lt;div className=&quot;text-center mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-white mb-2&quot;&gt;Welcome</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 173:8 - Line 184:18), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 228:6 - Line 239:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn205" onclick="toggleCodeBlock('cloneGroup205', 'expandBtn205', 'collapseBtn205')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn205" onclick="toggleCodeBlock('cloneGroup205', 'expandBtn205', 'collapseBtn205')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup205"><code class="language-tsx text-sm text-gray-800">&lt;/p&gt;
              &lt;/div&gt;

              &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
                {/* Global Error */}
                {error &amp;&amp; (
                  &lt;div className=&quot;rounded-lg bg-red-500/20 border border-red-500/30 p-4&quot;&gt;
                    &lt;div className=&quot;text-sm text-red-200&quot;&gt;{error}&lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Email Field */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 184:17 - Line 224:17), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 298:17 - Line 338:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn206" onclick="toggleCodeBlock('cloneGroup206', 'expandBtn206', 'collapseBtn206')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn206" onclick="toggleCodeBlock('cloneGroup206', 'expandBtn206', 'collapseBtn206')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup206"><code class="language-tsx text-sm text-gray-800">{/* Email Field */}
                &lt;div&gt;
                  &lt;label htmlFor=&quot;email&quot; className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;&gt;
                    Email address
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Mail className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;email&quot;
                      name=&quot;email&quot;
                      type=&quot;email&quot;
                      autoComplete=&quot;email&quot;
                      required
                      value={formData.email}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.email ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your email&quot;
                    /&gt;
                  &lt;/div&gt;
                  {formErrors.email &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.email}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;password&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;password&quot;
                      name=&quot;password&quot;
                      type={showPassword ? 'text' : 'password'}
                      autoComplete=&quot;current-password</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 231:20 - Line 241:11), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 345:18 - Line 356:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn207" onclick="toggleCodeBlock('cloneGroup207', 'expandBtn207', 'collapseBtn207')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn207" onclick="toggleCodeBlock('cloneGroup207', 'expandBtn207', 'collapseBtn207')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup207"><code class="language-tsx text-sm text-gray-800">&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowPassword(!showPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showPassword ? &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt; : &lt;Eye className=&quot;w-5 h-5&quot; /&gt;}
                    &lt;/button&gt;
                  &lt;/div&gt;
                  {formErrors</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 287:20 - Line 294:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 481:17 - Line 489:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn208" onclick="toggleCodeBlock('cloneGroup208', 'expandBtn208', 'collapseBtn208')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn208" onclick="toggleCodeBlock('cloneGroup208', 'expandBtn208', 'collapseBtn208')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup208"><code class="language-tsx text-sm text-gray-800">}
              &lt;div className=&quot;mt-8&quot;&gt;
                &lt;div className=&quot;relative&quot;&gt;
                  &lt;div className=&quot;absolute inset-0 flex items-center&quot;&gt;
                    &lt;div className=&quot;w-full border-t border-white/20&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;relative flex justify-center text-sm&quot;&gt;
                    &lt;span className=&quot;px-4 bg-transparent text-slate-400&quot;&gt;New</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 303:2 - Line 329:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 499:2 - Line 525:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn209" onclick="toggleCodeBlock('cloneGroup209', 'expandBtn209', 'collapseBtn209')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn209" onclick="toggleCodeBlock('cloneGroup209', 'expandBtn209', 'collapseBtn209')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup209"><code class="language-tsx text-sm text-gray-800">account
                    &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
                  &lt;/Link&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Back to home link */}
              &lt;div className=&quot;mt-6 text-center&quot;&gt;
                &lt;Link
                  to=&quot;/&quot;
                  className=&quot;text-sm text-slate-400 hover:text-slate-200 transition-colors inline-flex items-center gap-1&quot;
                &gt;
                  ← Back to home
                &lt;/Link&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Login</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/integrationspage/IntegrationsPage.tsx (Line 262:2 - Line 277:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 69:2 - Line 221:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn210" onclick="toggleCodeBlock('cloneGroup210', 'expandBtn210', 'collapseBtn210')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn210" onclick="toggleCodeBlock('cloneGroup210', 'expandBtn210', 'collapseBtn210')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup210"><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                150</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/features/Features.tsx (Line 296:2 - Line 311:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/roadmap/Roadmap.tsx (Line 258:2 - Line 83:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn211" onclick="toggleCodeBlock('cloneGroup211', 'expandBtn211', 'collapseBtn211')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn211" onclick="toggleCodeBlock('cloneGroup211', 'expandBtn211', 'collapseBtn211')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup211"><code class="language-tsx text-sm text-gray-800">,
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Features</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/enterprise/Enterprise.tsx (Line 220:2 - Line 233:18), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/roadmap/Roadmap.tsx (Line 258:2 - Line 81:30)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn212" onclick="toggleCodeBlock('cloneGroup212', 'expandBtn212', 'collapseBtn212')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn212" onclick="toggleCodeBlock('cloneGroup212', 'expandBtn212', 'collapseBtn212')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup212"><code class="language-tsx text-sm text-gray-800">,
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/documentation/Documentation.tsx (Line 289:3 - Line 304:14), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/selfhosted/SelfHosted.tsx (Line 206:3 - Line 221:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn213" onclick="toggleCodeBlock('cloneGroup213', 'expandBtn213', 'collapseBtn213')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn213" onclick="toggleCodeBlock('cloneGroup213', 'expandBtn213', 'collapseBtn213')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup213"><code class="language-tsx text-sm text-gray-800">};

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Documentation</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/documentation/Documentation.tsx (Line 606:17 - Line 616:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 491:17 - Line 501:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn214" onclick="toggleCodeBlock('cloneGroup214', 'expandBtn214', 'collapseBtn214')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn214" onclick="toggleCodeBlock('cloneGroup214', 'expandBtn214', 'collapseBtn214')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup214"><code class="language-tsx text-sm text-gray-800">&lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Start</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/dashboard/Dashboard.tsx (Line 247:15 - Line 257:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/executions/Executions.tsx (Line 143:2 - Line 153:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn215" onclick="toggleCodeBlock('cloneGroup215', 'expandBtn215', 'collapseBtn215')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn215" onclick="toggleCodeBlock('cloneGroup215', 'expandBtn215', 'collapseBtn215')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup215"><code class="language-tsx text-sm text-gray-800">.map((stat) =&gt; (
          &lt;div
            key={stat.name}
            className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;
          &gt;
            &lt;div className=&quot;flex items-center&quot;&gt;
              &lt;div className=&quot;text-2xl mr-4&quot;&gt;{stat.icon}&lt;/div&gt;
              &lt;div&gt;
                &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;{stat.name}&lt;/p&gt;
                &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{stat.value}&lt;/p&gt;
                {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/credentials/Credentials.tsx (Line 256:12 - Line 269:12), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/dashboard/Dashboard.tsx (Line 274:10 - Line 288:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn216" onclick="toggleCodeBlock('cloneGroup216', 'expandBtn216', 'collapseBtn216')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn216" onclick="toggleCodeBlock('cloneGroup216', 'expandBtn216', 'collapseBtn216')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup216"><code class="language-tsx text-sm text-gray-800">&lt;/h2&gt;
            &lt;button
              onClick={() =&gt; setShowCreateForm(true)}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
            &gt;
              Create New
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading credentials</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/contact/Contact.tsx (Line 181:5 - Line 196:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/selfhosted/SelfHosted.tsx (Line 205:5 - Line 83:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn217" onclick="toggleCodeBlock('cloneGroup217', 'expandBtn217', 'collapseBtn217')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn217" onclick="toggleCodeBlock('cloneGroup217', 'expandBtn217', 'collapseBtn217')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup217"><code class="language-tsx text-sm text-gray-800">);
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Get</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/contact/Contact.tsx (Line 540:13 - Line 550:38), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/pricingpage/PricingPage.tsx (Line 632:13 - Line 642:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn218" onclick="toggleCodeBlock('cloneGroup218', 'expandBtn218', 'collapseBtn218')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn218" onclick="toggleCodeBlock('cloneGroup218', 'expandBtn218', 'collapseBtn218')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup218"><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* FAQ */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-3xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/contact/Contact.tsx (Line 567:7 - Line 578:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 492:4 - Line 503:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn219" onclick="toggleCodeBlock('cloneGroup219', 'expandBtn219', 'collapseBtn219')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn219" onclick="toggleCodeBlock('cloneGroup219', 'expandBtn219', 'collapseBtn219')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup219"><code class="language-tsx text-sm text-gray-800">&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Get Started?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Don't</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/apireference/APIReference.tsx (Line 338:28 - Line 355:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/documentation/Documentation.tsx (Line 287:9 - Line 221:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn220" onclick="toggleCodeBlock('cloneGroup220', 'expandBtn220', 'collapseBtn220')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn220" onclick="toggleCodeBlock('cloneGroup220', 'expandBtn220', 'collapseBtn220')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup220"><code class="language-tsx text-sm text-gray-800">;
    }
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                API</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/apireference/APIReference.tsx (Line 493:19 - Line 509:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/integrationspage/IntegrationsPage.tsx (Line 401:11 - Line 418:29)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn221" onclick="toggleCodeBlock('cloneGroup221', 'expandBtn221', 'collapseBtn221')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn221" onclick="toggleCodeBlock('cloneGroup221', 'expandBtn221', 'collapseBtn221')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup221"><code class="language-tsx text-sm text-gray-800">.map((category) =&gt; {
                      const Icon = category.icon;
                      return (
                        &lt;button
                          key={category.id}
                          onClick={() =&gt; setActiveEndpoint(category.id)}
                          className={`w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors ${
                            activeEndpoint === category.id
                              ? 'bg-blue-50 text-blue-700 border border-blue-200'
                              : 'text-gray-700 hover:bg-gray-50'
                          }`}
                        &gt;
                          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                          &lt;/div&gt;
                          &lt;span </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/apireference/APIReference.tsx (Line 789:15 - Line 800:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/documentation/Documentation.tsx (Line 607:15 - Line 618:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn222" onclick="toggleCodeBlock('cloneGroup222', 'expandBtn222', 'collapseBtn222')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn222" onclick="toggleCodeBlock('cloneGroup222', 'expandBtn222', 'collapseBtn222')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup222"><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Start Building?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Get</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/about/About.tsx (Line 170:2 - Line 185:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 68:5 - Line 83:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn223" onclick="toggleCodeBlock('cloneGroup223', 'expandBtn223', 'collapseBtn223')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn223" onclick="toggleCodeBlock('cloneGroup223', 'expandBtn223', 'collapseBtn223')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup223"><code class="language-tsx text-sm text-gray-800">},
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Building</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/NodeIcon.tsx (Line 35:13 - Line 44:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 308:19 - Line 116:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn225" onclick="toggleCodeBlock('cloneGroup225', 'expandBtn225', 'collapseBtn225')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn225" onclick="toggleCodeBlock('cloneGroup225', 'expandBtn225', 'collapseBtn225')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup225"><code class="language-tsx text-sm text-gray-800">onError={(e) =&gt; {
              const target = e.target as HTMLImageElement;
              target.style.display = 'none';
              const fallback = target.nextElementSibling;
              if (fallback) {
                fallback.classList.remove('hidden');
              }
            }}
          /&gt;
          &lt;span className={`hidden ${sizeClasses[size].split(' ')[2]}`}&gt;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 56:9 - Line 63:484), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 35:5 - Line 42:119)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn226" onclick="toggleCodeBlock('cloneGroup226', 'expandBtn226', 'collapseBtn226')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn226" onclick="toggleCodeBlock('cloneGroup226', 'expandBtn226', 'collapseBtn226')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup226"><code class="language-tsx text-sm text-gray-800">&quot;
        &gt;
          &lt;svg className=&quot;w-4 h-4&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
            &lt;path
              strokeLinecap=&quot;round&quot;
              strokeLinejoin=&quot;round&quot;
              strokeWidth={2}
              d=&quot;M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 88:7 - Line 95:125), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 35:5 - Line 42:119)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn227" onclick="toggleCodeBlock('cloneGroup227', 'expandBtn227', 'collapseBtn227')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn227" onclick="toggleCodeBlock('cloneGroup227', 'expandBtn227', 'collapseBtn227')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup227"><code class="language-tsx text-sm text-gray-800">&quot;
        &gt;
          &lt;svg className=&quot;w-4 h-4&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
            &lt;path
              strokeLinecap=&quot;round&quot;
              strokeLinejoin=&quot;round&quot;
              strokeWidth={2}
              d=&quot;M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/AIAgentPropertiesPanel.tsx (Line 1:1 - Line 545:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/aiagentpropertiespanel/AIAgentPropertiesPanel.tsx (Line 3:1 - Line 547:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn229" onclick="toggleCodeBlock('cloneGroup229', 'expandBtn229', 'collapseBtn229')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn229" onclick="toggleCodeBlock('cloneGroup229', 'expandBtn229', 'collapseBtn229')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup229"><code class="language-tsx text-sm text-gray-800">/**
 * AI Agent Properties Panel
 * Advanced properties panel for AI Agent nodes with dynamic forms and real-time validation
 */

import {
  BugOutlined,
  ExperimentOutlined,
  InfoCircleOutlined,
  PlayCircleOutlined,
  SettingOutlined,
} from '@ant-design/icons';
import { Alert, Badge, Button, Card, Collapse, Space, Tabs, Tooltip } from 'antd';
import type React from 'react';
import { useState } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import { PropertyField } from '../components';
import { useNodeTheme } from '../themes';
import type { CustomPropertiesPanelProps } from '../types';

const { TabPane } = Tabs;

const AIAgentPropertiesPanel: React.FC&lt;CustomPropertiesPanelProps&gt; = ({
  nodeData,
  onChange,
  onClose,
  theme: propTheme,
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [activeTab, setActiveTab] = useState('configuration');
  const [formValues, setFormValues] = useState(nodeData.parameters || {});
  const [errors, setErrors] = useState&lt;Record&lt;string, string[]&gt;&gt;({});
  const [isTestMode, setIsTestMode] = useState(false);

  // AI Agent specific properties
  const aiAgentProperties: INodeProperty[] = [
    {
      displayName: 'AI Provider',
      name: 'provider',
      type: 'select',
      required: true,
      description: 'Choose the AI service provider',
      default: 'openai',
      options: [
        { name: 'OpenAI', value: 'openai' },
        { name: 'Anthropic Claude', value: 'anthropic' },
        { name: 'Google Gemini', value: 'google' },
        { name: 'Ollama (Local)', value: 'ollama' },
        { name: 'Azure OpenAI', value: 'azure_openai' },
      ],
    },
    {
      displayName: 'Model',
      name: 'model',
      type: 'select',
      required: true,
      description: 'AI model to use',
      default: 'gpt-4',
      options: getModelOptionsForProvider(formValues.provider || 'openai'),
      displayOptions: {
        show: {
          provider: ['openai', 'anthropic', 'google', 'azure_openai'],
        },
      },
    },
    {
      displayName: 'Local Model Name',
      name: 'ollamaModel',
      type: 'string',
      required: true,
      description: 'Ollama model name (e.g., llama3.2, mistral)',
      default: 'llama3.2',
      placeholder: 'llama3.2',
      displayOptions: {
        show: {
          provider: ['ollama'],
        },
      },
    },
    {
      displayName: 'System Prompt',
      name: 'systemPrompt',
      type: 'text',
      description: 'System prompt to define AI behavior',
      placeholder: 'You are a helpful assistant...',
      rows: 4,
    },
    {
      displayName: 'User Prompt',
      name: 'userPrompt',
      type: 'text',
      required: true,
      description: 'Main prompt for the AI. Use {{input}} for dynamic data',
      placeholder: 'Analyze the following data: {{input}}',
      rows: 6,
    },
    {
      displayName: 'Temperature',
      name: 'temperature',
      type: 'number',
      description: 'Controls randomness (0.0 = deterministic, 2.0 = very random)',
      default: 0.7,
      min: 0,
      max: 2,
      step: 0.1,
    },
    {
      displayName: 'Max Tokens',
      name: 'maxTokens',
      type: 'number',
      description: 'Maximum tokens in response',
      default: 1000,
      min: 1,
      max: 4000,
    },
    {
      displayName: 'Response Format',
      name: 'responseFormat',
      type: 'select',
      description: 'Expected response format',
      default: 'text',
      options: [
        { name: 'Plain Text', value: 'text' },
        { name: 'JSON', value: 'json' },
        { name: 'Markdown', value: 'markdown' },
        { name: 'HTML', value: 'html' },
      ],
    },
  ];

  // Performance and advanced properties
  const advancedProperties: INodeProperty[] = [
    {
      displayName: 'Enable Streaming',
      name: 'streaming',
      type: 'boolean',
      description: 'Stream response in real-time',
      default: false,
    },
    {
      displayName: 'Top P',
      name: 'topP',
      type: 'number',
      description: 'Nucleus sampling parameter',
      default: 1.0,
      min: 0.1,
      max: 1.0,
      step: 0.1,
    },
    {
      displayName: 'Frequency Penalty',
      name: 'frequencyPenalty',
      type: 'number',
      description: 'Reduce repetition (OpenAI only)',
      default: 0,
      min: -2.0,
      max: 2.0,
      step: 0.1,
      displayOptions: {
        show: {
          provider: ['openai', 'azure_openai'],
        },
      },
    },
    {
      displayName: 'Presence Penalty',
      name: 'presencePenalty',
      type: 'number',
      description: 'Encourage new topics (OpenAI only)',
      default: 0,
      min: -2.0,
      max: 2.0,
      step: 0.1,
      displayOptions: {
        show: {
          provider: ['openai', 'azure_openai'],
        },
      },
    },
  ];

  function getModelOptionsForProvider(provider: string) {
    const modelMap: Record&lt;string, Array&lt;{ name: string; value: string }&gt;&gt; = {
      openai: [
        { name: 'GPT-4o', value: 'gpt-4o' },
        { name: 'GPT-4 Turbo', value: 'gpt-4-turbo' },
        { name: 'GPT-4', value: 'gpt-4' },
        { name: 'GPT-3.5 Turbo', value: 'gpt-3.5-turbo' },
      ],
      anthropic: [
        { name: 'Claude 3.5 Sonnet', value: 'claude-3-5-sonnet-20241022' },
        { name: 'Claude 3.5 Haiku', value: 'claude-3-5-haiku-20241022' },
        { name: 'Claude 3 Opus', value: 'claude-3-opus-20240229' },
      ],
      google: [
        { name: 'Gemini 2.0 Flash', value: 'gemini-2.0-flash-exp' },
        { name: 'Gemini 1.5 Pro', value: 'gemini-1.5-pro' },
        { name: 'Gemini 1.5 Flash', value: 'gemini-1.5-flash' },
      ],
      azure_openai: [
        { name: 'GPT-4', value: 'gpt-4' },
        { name: 'GPT-3.5 Turbo', value: 'gpt-3.5-turbo' },
      ],
    };

    return modelMap[provider] || [];
  }

  const handleFieldChange = (fieldName: string, value: any) =&gt; {
    const newValues = { ...formValues, [fieldName]: value };
    setFormValues(newValues);

    // Clear errors for this field
    if (errors[fieldName]) {
      const newErrors = { ...errors };
      delete newErrors[fieldName];
      setErrors(newErrors);
    }

    // Update parent immediately for real-time updates
    onChange({ ...nodeData, parameters: newValues });
  };

  const handleTest = async () =&gt; {
    setIsTestMode(true);
    // Simulate API call
    setTimeout(() =&gt; {
      setIsTestMode(false);
      // Could show test results here
    }, 2000);
  };

  const validateForm = () =&gt; {
    const newErrors: Record&lt;string, string[]&gt; = {};

    // Required field validation
    if (!formValues.provider) {
      newErrors.provider = ['Provider is required'];
    }
    if (!formValues.userPrompt) {
      newErrors.userPrompt = ['User prompt is required'];
    }

    // Provider-specific validation
    if (formValues.provider === 'ollama' &amp;&amp; !formValues.ollamaModel) {
      newErrors.ollamaModel = ['Model name is required for Ollama'];
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const renderConfigurationTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;AI Agent Configuration&quot;
        description=&quot;Configure your AI agent settings. Changes are applied in real-time.&quot;
        type=&quot;info&quot;
        showIcon
        style={{ marginBottom: '16px' }}
      /&gt;

      {aiAgentProperties.map((property) =&gt; {
        // Check display conditions
        const shouldShow =
          !property.displayOptions?.show ||
          Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
            values?.includes(formValues[key])
          );

        if (!shouldShow) return null;

        return (
          &lt;PropertyField
            key={property.name}
            property={property}
            value={formValues[property.name]}
            onChange={(value) =&gt; handleFieldChange(property.name, value)}
            errors={errors[property.name]}
            theme={theme}
            context={formValues}
          /&gt;
        );
      })}
    &lt;/div&gt;
  );

  const renderAdvancedTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Advanced Settings&quot;
        description=&quot;Fine-tune AI model behavior and performance parameters.&quot;
        type=&quot;warning&quot;
        showIcon
        style={{ marginBottom: '16px' }}
      /&gt;

      &lt;Collapse
        items={[
          {
            key: 'performance',
            label: (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ExperimentOutlined /&gt;
                &lt;span&gt;Performance &amp; Sampling&lt;/span&gt;
              &lt;/div&gt;
            ),
            children: (
              &lt;div className=&quot;space-y-4&quot;&gt;
                {advancedProperties.map((property) =&gt; {
                  const shouldShow =
                    !property.displayOptions?.show ||
                    Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
                      values?.includes(formValues[key])
                    );

                  if (!shouldShow) return null;

                  return (
                    &lt;PropertyField
                      key={property.name}
                      property={property}
                      value={formValues[property.name]}
                      onChange={(value) =&gt; handleFieldChange(property.name, value)}
                      errors={errors[property.name]}
                      theme={theme}
                      context={formValues}
                    /&gt;
                  );
                })}
              &lt;/div&gt;
            ),
          },
        ]}
      /&gt;
    &lt;/div&gt;
  );

  const renderTestingTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Test Your AI Agent&quot;
        description=&quot;Test your AI agent configuration with sample data.&quot;
        type=&quot;success&quot;
        showIcon
      /&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Quick Test&quot;&gt;
        &lt;div className=&quot;space-y-4&quot;&gt;
          &lt;PropertyField
            property={{
              displayName: 'Test Input',
              name: 'testInput',
              type: 'text',
              description: 'Sample data to test with',
              placeholder: 'Enter test data here...',
              rows: 4,
            }}
            value={formValues.testInput || ''}
            onChange={(value) =&gt; handleFieldChange('testInput', value)}
            theme={theme}
          /&gt;

          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;PlayCircleOutlined /&gt;}
            loading={isTestMode}
            onClick={handleTest}
            block
          &gt;
            {isTestMode ? 'Testing...' : 'Test AI Agent'}
          &lt;/Button&gt;

          {isTestMode &amp;&amp; (
            &lt;Card size=&quot;small&quot; loading&gt;
              &lt;div&gt;Running test with current configuration...&lt;/div&gt;
            &lt;/Card&gt;
          )}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderDebugTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Debug Information&quot;
        description=&quot;View current configuration and troubleshooting information.&quot;
        type=&quot;info&quot;
        showIcon
      /&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Current Configuration&quot;&gt;
        &lt;pre
          style={{
            fontSize: '11px',
            background: '#f5f5f5',
            padding: '12px',
            borderRadius: '4px',
            overflow: 'auto',
            maxHeight: '300px',
          }}
        &gt;
          {JSON.stringify(formValues, null, 2)}
        &lt;/pre&gt;
      &lt;/Card&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Provider Information&quot;&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;div&gt;
            &lt;strong&gt;Provider:&lt;/strong&gt; {formValues.provider || 'Not selected'}
          &lt;/div&gt;
          &lt;div&gt;
            &lt;strong&gt;Model:&lt;/strong&gt; {formValues.model || formValues.ollamaModel || 'Not selected'}
          &lt;/div&gt;
          &lt;div&gt;
            &lt;strong&gt;Token Limit:&lt;/strong&gt; {formValues.maxTokens || 1000}
          &lt;/div&gt;
          &lt;div&gt;
            &lt;strong&gt;Temperature:&lt;/strong&gt; {formValues.temperature || 0.7}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div style={{ height: '100%', display: 'flex', flexDirection: 'column' }}&gt;
      {/* Header */}
      &lt;div
        style={{
          padding: '16px',
          borderBottom: `1px solid ${theme.colors.border}`,
          backgroundColor: theme.colors.background,
        }}
      &gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;SettingOutlined style={{ color: theme.colors.primary }} /&gt;
            &lt;span
              style={{
                fontSize: theme.typography.fontSize.lg,
                fontWeight: theme.typography.fontWeight.semibold,
                color: theme.colors.text,
              }}
            &gt;
              AI Agent Properties
            &lt;/span&gt;
            &lt;Badge count={Object.keys(errors).length} showZero={false} /&gt;
          &lt;/div&gt;
          &lt;Button size=&quot;small&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Content */}
      &lt;div style={{ flex: 1, overflow: 'hidden' }}&gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab} style={{ height: '100%' }}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Configuration
              &lt;/span&gt;
            }
            key=&quot;configuration&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderConfigurationTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;ExperimentOutlined /&gt;
                Advanced
              &lt;/span&gt;
            }
            key=&quot;advanced&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderAdvancedTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;PlayCircleOutlined /&gt;
                Testing
              &lt;/span&gt;
            }
            key=&quot;testing&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderTestingTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;BugOutlined /&gt;
                Debug
              &lt;/span&gt;
            }
            key=&quot;debug&quot;
          &gt;
            &lt;div style={{ padding: '16px', height: '100%', overflow: 'auto' }}&gt;
              {renderDebugTab()}
            &lt;/div&gt;
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/div&gt;

      {/* Footer */}
      &lt;div
        style={{
          padding: '12px 16px',
          borderTop: `1px solid ${theme.colors.border}`,
          backgroundColor: theme.colors.background,
        }}
      &gt;
        &lt;Space&gt;
          &lt;Button size=&quot;small&quot; onClick={validateForm}&gt;
            Validate
          &lt;/Button&gt;
          &lt;Button size=&quot;small&quot; type=&quot;primary&quot; onClick={() =&gt; onChange(nodeData)}&gt;
            Apply Changes
          &lt;/Button&gt;
          &lt;Tooltip title=&quot;Get help with AI Agent configuration&quot;&gt;
            &lt;Button size=&quot;small&quot; icon={&lt;InfoCircleOutlined /&gt;}&gt;
              Help
            &lt;/Button&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default AIAgentPropertiesPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 6:20 - Line 203:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 12:19 - Line 209:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn231" onclick="toggleCodeBlock('cloneGroup231', 'expandBtn231', 'collapseBtn231')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn231" onclick="toggleCodeBlock('cloneGroup231', 'expandBtn231', 'collapseBtn231')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup231"><code class="language-tsx text-sm text-gray-800">;

interface GmailNodeBodyProps extends CustomNodeBodyProps {
  nodeData: any;
  selected: boolean;
  isHovered: boolean;
  onMouseEnter: () =&gt; void;
  onMouseLeave: () =&gt; void;
  onDelete?: () =&gt; void;
  onOpenProperties?: () =&gt; void;
}

/**
 * Custom Gmail Node Body Component
 * Replicates the old UI style with small, rounded design
 */
const GmailNodeBody: React.FC&lt;GmailNodeBodyProps&gt; = ({
  nodeData,
  selected,
  isHovered = false,
  onMouseEnter,
  onMouseLeave,
  onDelete,
  onOpenProperties,
}) =&gt; {
  const displayName = nodeData.name || nodeData.label || 'Gmail';
  const icon = 'https://upload.wikimedia.org/wikipedia/commons/7/7e/Gmail_icon_%282020%29.svg';

  // Menu state for NodeToolbar
  const [showLocalMenu, setShowLocalMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showLocalMenu,
    triggerRef: menuTriggerRef,
    menuRef,
    offset: 4,
    onClose: () =&gt; setShowLocalMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* Gmail Icon */}
            &lt;div className=&quot;flex items-center justify-center&quot;&gt;
              &lt;img
                src={icon}
                alt=&quot;Gmail&quot;
                className=&quot;w-6 h-6&quot;
                onError={(e) =&gt; {
                  const target = e.target as HTMLImageElement;
                  target.style.display = 'none';
                  const fallback = target.nextElementSibling;
                  if (fallback) {
                    fallback.classList.remove('hidden');
                  }
                }}
              /&gt;
              &lt;span className=&quot;hidden text-xl&quot;&gt;📧&lt;/span&gt;
            &lt;/div&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Indicators */}
            {nodeData.disabled &amp;&amp; (
              &lt;div className=&quot;absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center&quot;&gt;
                &lt;span className=&quot;text-white text-xs&quot;&gt;!&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Node Label - Below the node */}
      &lt;div className=&quot;mt-2 text-white text-sm font-medium text-center max-w-[100px] truncate&quot;&gt;
        {displayName}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default GmailNodeBody;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 31:2 - Line 41:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 38:80 - Line 48:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn235" onclick="toggleCodeBlock('cloneGroup235', 'expandBtn235', 'collapseBtn235')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn235" onclick="toggleCodeBlock('cloneGroup235', 'expandBtn235', 'collapseBtn235')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup235"><code class="language-tsx text-sm text-gray-800">;

  // Menu state for NodeToolbar
  const [showLocalMenu, setShowLocalMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showLocalMenu,
    triggerRef: menuTriggerRef,
    menuRef:</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 58:3 - Line 91:25), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 55:3 - Line 88:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn236" onclick="toggleCodeBlock('cloneGroup236', 'expandBtn236', 'collapseBtn236')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn236" onclick="toggleCodeBlock('cloneGroup236', 'expandBtn236', 'collapseBtn236')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup236"><code class="language-tsx text-sm text-gray-800">const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* True Output Handle */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/TransformAssignmentCollection.tsx (Line 1:1 - Line 475:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/transformassignmentcollection/TransformAssignmentCollection.tsx (Line 6:1 - Line 480:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn239" onclick="toggleCodeBlock('cloneGroup239', 'expandBtn239', 'collapseBtn239')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn239" onclick="toggleCodeBlock('cloneGroup239', 'expandBtn239', 'collapseBtn239')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup239"><code class="language-tsx text-sm text-gray-800">/**
 * Enhanced Assignment Collection Component for Transform Node
 * Provides drag &amp; drop reordering and bulk operations similar to n8n's EditFields
 */

import {
  AppstoreAddOutlined,
  ClearOutlined,
  DeleteOutlined,
  DragOutlined,
  PlusOutlined,
} from '@ant-design/icons';
import {
  closestCenter,
  DndContext,
  KeyboardSensor,
  PointerSensor,
  useSensor,
  useSensors,
} from '@dnd-kit/core';
import {
  arrayMove,
  SortableContext,
  sortableKeyboardCoordinates,
  useSortable,
  verticalListSortingStrategy,
} from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { Button, Card, Input, Select, Space, Switch, Tooltip, Typography } from 'antd';
import type React from 'react';
import { useCallback, useMemo } from 'react';

const { Text, Title } = Typography;
const { Option } = Select;

interface FieldAssignment {
  id: string;
  name: string;
  type: 'stringValue' | 'numberValue' | 'booleanValue' | 'arrayValue' | 'objectValue';
  value: any;
}

interface TransformAssignmentCollectionProps {
  assignments: FieldAssignment[];
  onChange: (assignments: FieldAssignment[]) =&gt; void;
  inputData?: any[]; // Sample input data for &quot;Add All Fields&quot; functionality
  disabled?: boolean;
}

// Sortable Assignment Item Component
const SortableAssignmentItem: React.FC&lt;{
  assignment: FieldAssignment;
  onUpdate: (id: string, updates: Partial&lt;FieldAssignment&gt;) =&gt; void;
  onDelete: (id: string) =&gt; void;
  disabled?: boolean;
}&gt; = ({ assignment, onUpdate, onDelete, disabled }) =&gt; {
  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({
    id: assignment.id,
  });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
    opacity: isDragging ? 0.5 : 1,
  };

  const handleFieldChange = useCallback(
    (field: keyof FieldAssignment, value: any) =&gt; {
      onUpdate(assignment.id, { [field]: value });
    },
    [assignment.id, onUpdate]
  );

  const renderValueInput = () =&gt; {
    switch (assignment.type) {
      case 'stringValue':
        return (
          &lt;Input
            placeholder=&quot;String value (supports expressions)&quot;
            value={assignment.value || ''}
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            disabled={disabled}
          /&gt;
        );
      case 'numberValue':
        return (
          &lt;Input
            type=&quot;number&quot;
            placeholder=&quot;Numeric value&quot;
            value={assignment.value ?? ''}
            onChange={(e) =&gt; handleFieldChange('value', Number(e.target.value) || 0)}
            disabled={disabled}
          /&gt;
        );
      case 'booleanValue':
        return (
          &lt;Switch
            checked={assignment.value ?? false}
            onChange={(value) =&gt; handleFieldChange('value', value)}
            disabled={disabled}
          /&gt;
        );
      case 'arrayValue':
        return (
          &lt;Input.TextArea
            placeholder='[&quot;item1&quot;, &quot;item2&quot;] or JSON array'
            value={
              typeof assignment.value === 'string'
                ? assignment.value
                : JSON.stringify(assignment.value || [])
            }
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            rows={2}
            disabled={disabled}
          /&gt;
        );
      case 'objectValue':
        return (
          &lt;Input.TextArea
            placeholder='{&quot;key&quot;: &quot;value&quot;} or JSON object'
            value={
              typeof assignment.value === 'string'
                ? assignment.value
                : JSON.stringify(assignment.value || {})
            }
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            rows={2}
            disabled={disabled}
          /&gt;
        );
      default:
        return (
          &lt;Input
            placeholder=&quot;Value&quot;
            value={assignment.value || ''}
            onChange={(e) =&gt; handleFieldChange('value', e.target.value)}
            disabled={disabled}
          /&gt;
        );
    }
  };

  return (
    &lt;Card
      ref={setNodeRef}
      style={style}
      size=&quot;small&quot;
      className={`assignment-item ${isDragging ? 'dragging' : ''}`}
      bodyStyle={{ padding: '12px' }}
    &gt;
      &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;small&quot;&gt;
        {/* Header with drag handle and delete button */}
        &lt;div
          style={{
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
          }}
        &gt;
          &lt;div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
            &lt;div {...attributes} {...listeners} style={{ cursor: 'grab', color: '#8c8c8c' }}&gt;
              &lt;DragOutlined /&gt;
            &lt;/div&gt;
            &lt;Text strong style={{ fontSize: '12px' }}&gt;
              Assignment {assignment.id.slice(-3)}
            &lt;/Text&gt;
          &lt;/div&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;DeleteOutlined /&gt;}
            onClick={() =&gt; onDelete(assignment.id)}
            disabled={disabled}
            danger
            style={{ minWidth: 'auto', padding: '4px' }}
          /&gt;
        &lt;/div&gt;

        {/* Field Name */}
        &lt;div&gt;
          &lt;Text
            type=&quot;secondary&quot;
            style={{ fontSize: '11px', marginBottom: '4px', display: 'block' }}
          &gt;
            Field Name
          &lt;/Text&gt;
          &lt;Input
            placeholder=&quot;e.g. user.name or address.city&quot;
            value={assignment.name}
            onChange={(e) =&gt; handleFieldChange('name', e.target.value)}
            size=&quot;small&quot;
            disabled={disabled}
          /&gt;
        &lt;/div&gt;

        {/* Field Type */}
        &lt;div&gt;
          &lt;Text
            type=&quot;secondary&quot;
            style={{ fontSize: '11px', marginBottom: '4px', display: 'block' }}
          &gt;
            Field Type
          &lt;/Text&gt;
          &lt;Select
            value={assignment.type}
            onChange={(value) =&gt; handleFieldChange('type', value)}
            size=&quot;small&quot;
            style={{ width: '100%' }}
            disabled={disabled}
          &gt;
            &lt;Option value=&quot;stringValue&quot;&gt;String&lt;/Option&gt;
            &lt;Option value=&quot;numberValue&quot;&gt;Number&lt;/Option&gt;
            &lt;Option value=&quot;booleanValue&quot;&gt;Boolean&lt;/Option&gt;
            &lt;Option value=&quot;arrayValue&quot;&gt;Array&lt;/Option&gt;
            &lt;Option value=&quot;objectValue&quot;&gt;Object&lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;

        {/* Field Value */}
        &lt;div&gt;
          &lt;Text
            type=&quot;secondary&quot;
            style={{ fontSize: '11px', marginBottom: '4px', display: 'block' }}
          &gt;
            Value
          &lt;/Text&gt;
          {renderValueInput()}
        &lt;/div&gt;
      &lt;/Space&gt;
    &lt;/Card&gt;
  );
};

// Main Transform Assignment Collection Component
const TransformAssignmentCollection: React.FC&lt;TransformAssignmentCollectionProps&gt; = ({
  assignments,
  onChange,
  inputData,
  disabled,
}) =&gt; {
  const sensors = useSensors(
    useSensor(PointerSensor),
    useSensor(KeyboardSensor, {
      coordinateGetter: sortableKeyboardCoordinates,
    })
  );

  // Generate unique ID for new assignments
  const generateId = useCallback(() =&gt; {
    return `assignment-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }, []);

  // Add new assignment
  const handleAddAssignment = useCallback(() =&gt; {
    const newAssignment: FieldAssignment = {
      id: generateId(),
      name: '',
      type: 'stringValue',
      value: '',
    };
    onChange([...assignments, newAssignment]);
  }, [assignments, generateId, onChange]);

  // Update assignment
  const handleUpdateAssignment = useCallback(
    (id: string, updates: Partial&lt;FieldAssignment&gt;) =&gt; {
      const updatedAssignments = assignments.map((assignment) =&gt;
        assignment.id === id ? { ...assignment, ...updates } : assignment
      );
      onChange(updatedAssignments);
    },
    [assignments, onChange]
  );

  // Delete assignment
  const handleDeleteAssignment = useCallback(
    (id: string) =&gt; {
      const filteredAssignments = assignments.filter((assignment) =&gt; assignment.id !== id);
      onChange(filteredAssignments);
    },
    [assignments, onChange]
  );

  // Clear all assignments
  const handleClearAll = useCallback(() =&gt; {
    onChange([]);
  }, [onChange]);

  // Add all fields from input data
  const handleAddAllFields = useCallback(() =&gt; {
    if (!inputData || !inputData.length) return;

    // Get all unique field names from input data
    const fieldNames = new Set&lt;string&gt;();
    inputData.forEach((item) =&gt; {
      if (item.json &amp;&amp; typeof item.json === 'object') {
        Object.keys(item.json).forEach((key) =&gt; fieldNames.add(key));
      }
    });

    // Create assignments for each field with auto-detected type
    const newAssignments = Array.from(fieldNames).map((fieldName) =&gt; {
      // Auto-detect type from first occurrence
      let detectedType: FieldAssignment['type'] = 'stringValue';
      for (const item of inputData) {
        if (item.json &amp;&amp; item.json[fieldName] !== undefined) {
          const value = item.json[fieldName];
          if (typeof value === 'number') detectedType = 'numberValue';
          else if (typeof value === 'boolean') detectedType = 'booleanValue';
          else if (Array.isArray(value)) detectedType = 'arrayValue';
          else if (typeof value === 'object' &amp;&amp; value !== null) detectedType = 'objectValue';
          break;
        }
      }

      return {
        id: generateId(),
        name: fieldName,
        type: detectedType,
        value: '', // Start with empty value for user to configure
      };
    });

    // Merge with existing assignments (avoid duplicates)
    const existingNames = new Set(assignments.map((a) =&gt; a.name));
    const filteredNewAssignments = newAssignments.filter((a) =&gt; !existingNames.has(a.name));

    onChange([...assignments, ...filteredNewAssignments]);
  }, [inputData, assignments, generateId, onChange]);

  // Handle drag and drop reordering
  const handleDragEnd = useCallback(
    (event: any) =&gt; {
      const { active, over } = event;

      if (active.id !== over?.id) {
        const oldIndex = assignments.findIndex((item) =&gt; item.id === active.id);
        const newIndex = assignments.findIndex((item) =&gt; item.id === over.id);
        const reorderedAssignments = arrayMove(assignments, oldIndex, newIndex);
        onChange(reorderedAssignments);
      }
    },
    [assignments, onChange]
  );

  // Memoize assignment items for performance
  const assignmentItems = useMemo(() =&gt; {
    return assignments.map((assignment) =&gt; (
      &lt;SortableAssignmentItem
        key={assignment.id}
        assignment={assignment}
        onUpdate={handleUpdateAssignment}
        onDelete={handleDeleteAssignment}
        disabled={disabled}
      /&gt;
    ));
  }, [assignments, handleUpdateAssignment, handleDeleteAssignment, disabled]);

  return (
    &lt;div className=&quot;transform-assignment-collection&quot;&gt;
      &lt;style&gt;{`
        .transform-assignment-collection {
          max-width: 100%;
        }
        .assignment-item.dragging {
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .bulk-operations {
          margin-bottom: 16px;
          padding: 12px;
          background: #fafafa;
          border-radius: 6px;
          border: 1px solid #d9d9d9;
        }
      `}&lt;/style&gt;

      {/* Header and Bulk Operations */}
      &lt;div className=&quot;bulk-operations&quot;&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginBottom: '8px',
          }}
        &gt;
          &lt;Title level={5} style={{ margin: 0 }}&gt;
            Field Assignments ({assignments.length})
          &lt;/Title&gt;
          &lt;Space size=&quot;small&quot;&gt;
            {inputData &amp;&amp; inputData.length &gt; 0 &amp;&amp; (
              &lt;Tooltip title=&quot;Add all fields from input data&quot;&gt;
                &lt;Button
                  type=&quot;dashed&quot;
                  size=&quot;small&quot;
                  icon={&lt;AppstoreAddOutlined /&gt;}
                  onClick={handleAddAllFields}
                  disabled={disabled}
                &gt;
                  Add All
                &lt;/Button&gt;
              &lt;/Tooltip&gt;
            )}
            {assignments.length &gt; 0 &amp;&amp; (
              &lt;Tooltip title=&quot;Clear all assignments&quot;&gt;
                &lt;Button
                  type=&quot;dashed&quot;
                  size=&quot;small&quot;
                  icon={&lt;ClearOutlined /&gt;}
                  onClick={handleClearAll}
                  disabled={disabled}
                  danger
                &gt;
                  Clear
                &lt;/Button&gt;
              &lt;/Tooltip&gt;
            )}
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
          Configure field assignments with type validation. Drag to reorder.
        &lt;/Text&gt;
      &lt;/div&gt;

      {/* Assignment Items with Drag &amp; Drop */}
      &lt;DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}&gt;
        &lt;SortableContext
          items={assignments.map((a) =&gt; a.id)}
          strategy={verticalListSortingStrategy}
        &gt;
          &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;small&quot;&gt;
            {assignmentItems}
          &lt;/Space&gt;
        &lt;/SortableContext&gt;
      &lt;/DndContext&gt;

      {/* Add Assignment Button */}
      &lt;div style={{ marginTop: assignments.length &gt; 0 ? '16px' : '0' }}&gt;
        &lt;Button
          type=&quot;dashed&quot;
          onClick={handleAddAssignment}
          icon={&lt;PlusOutlined /&gt;}
          style={{ width: '100%' }}
          disabled={disabled}
        &gt;
          Add Assignment
        &lt;/Button&gt;
      &lt;/div&gt;

      {/* Empty State */}
      {assignments.length === 0 &amp;&amp; (
        &lt;div
          style={{
            textAlign: 'center',
            padding: '24px',
            color: '#8c8c8c',
            backgroundColor: '#fafafa',
            borderRadius: '6px',
            border: '1px dashed #d9d9d9',
            marginTop: '8px',
          }}
        &gt;
          &lt;Text type=&quot;secondary&quot;&gt;No field assignments configured&lt;/Text&gt;
          &lt;br /&gt;
          &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
            Click &quot;Add Assignment&quot; or &quot;Add All&quot; to get started
          &lt;/Text&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default TransformAssignmentCollection;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 1:1 - Line 882:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyrenderers/PropertyRenderers.tsx (Line 4:1 - Line 885:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn241" onclick="toggleCodeBlock('cloneGroup241', 'expandBtn241', 'collapseBtn241')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn241" onclick="toggleCodeBlock('cloneGroup241', 'expandBtn241', 'collapseBtn241')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup241"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */
/**
 * Complete Property Renderers for all 22 n8n Property Types
 * Comprehensive implementation matching n8n's exact functionality
 */

import { DeleteOutlined, FilterOutlined, PlusOutlined } from '@ant-design/icons';
import { Button, Collapse, DatePicker, Input, Select, Switch, Tag, Upload } from 'antd';
import type React from 'react';
import { useCallback, useMemo, useState } from 'react';
// Simplified version without drag-and-drop for now
// TODO: Add back @dnd-kit when needed for advanced assignment collection
import type { INodePropertyTypeOptions, NodePropertyType } from '@/core/nodes/types';

// Define interfaces locally to avoid circular imports

import {
  type IExpressionContext as CoreExpressionContext,
  ExpressionEvaluator,
  ExpressionUtils,
} from '@/core/utils/expressionEvaluator';
import { cn } from '@/design-system/utils';

const { TextArea } = Input;
const { Option } = Select;
const { Panel } = Collapse;

// Property Renderer Props Interface
export interface PropertyRendererProps {
  property: {
    displayName: string;
    name: string;
    type: NodePropertyType;
    description?: string;
    placeholder?: string;
    default?: any;
    required?: boolean;
    options?: Array&lt;{
      name: string;
      value?: string | number | boolean | undefined;
      description?: string;
    }&gt;;
    typeOptions?: INodePropertyTypeOptions;
    displayOptions?: {
      show?: Record&lt;string, any[]&gt;;
      hide?: Record&lt;string, any[]&gt;;
    };
  };
  value: any;
  onChange: (value: any) =&gt; void;
  context?: CoreExpressionContext;
  disabled?: boolean;
  nodeValues?: Record&lt;string, any&gt;;
}

// 1. String Property Renderer
export const StringRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const isExpression = ExpressionUtils.hasExpressions(value);

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;flex justify-between items-center&quot;&gt;
        &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
        {isExpression &amp;&amp; &lt;Tag color=&quot;blue&quot;&gt;Expression&lt;/Tag&gt;}
      &lt;/div&gt;
      &lt;Input
        value={value || ''}
        onChange={(e) =&gt; onChange(e.target.value)}
        placeholder={property.placeholder || `Enter ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 2. Number Property Renderer
export const NumberRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const typeOptions = property.typeOptions?.numberOptions;

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Input
        type=&quot;number&quot;
        value={value ?? ''}
        onChange={(e) =&gt; onChange(e.target.value ? Number(e.target.value) : undefined)}
        placeholder={property.placeholder}
        disabled={disabled}
        min={typeOptions?.minValue}
        max={typeOptions?.maxValue}
        step={typeOptions?.numberStepSize || 1}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 3. Boolean Property Renderer
export const BooleanRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;label className=&quot;text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
        &lt;Switch checked={Boolean(value)} onChange={onChange} disabled={disabled} /&gt;
      &lt;/div&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 4. Options/Select Property Renderer
export const OptionsRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const options = property.options || [];
  const typeOptions = property.typeOptions;

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder={property.placeholder || `Select ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch={typeOptions?.searchable !== false}
        allowClear={!property.required}
      &gt;
        {options.map((option) =&gt; (
          &lt;Option key={String(option.value)} value={option.value} title={option.description}&gt;
            &lt;div&gt;
              &lt;div className=&quot;text-gray-200&quot;&gt;{option.name}&lt;/div&gt;
              {option.description &amp;&amp; (
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{option.description}&lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 5. Multi-Options Property Renderer
export const MultiOptionsRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const options = property.options || [];
  const currentValues = Array.isArray(value) ? value : [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        mode=&quot;multiple&quot;
        value={currentValues}
        onChange={onChange}
        placeholder={property.placeholder || `Select ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
        allowClear
      &gt;
        {options.map((option) =&gt; (
          &lt;Option key={String(option.value)} value={option.value} title={option.description}&gt;
            &lt;div&gt;
              &lt;div className=&quot;text-gray-200&quot;&gt;{option.name}&lt;/div&gt;
              {option.description &amp;&amp; (
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{option.description}&lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 6. Text/TextArea Property Renderer
export const TextRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const typeOptions = property.typeOptions?.textAreaOptions;
  const rows = typeOptions?.rows || 4;

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;TextArea
        value={value || ''}
        onChange={(e) =&gt; onChange(e.target.value)}
        placeholder={property.placeholder || `Enter ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        rows={rows}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 7. DateTime Property Renderer
export const DateTimeRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;DatePicker
        value={value ? new Date(value) : null}
        onChange={(date) =&gt; onChange(date?.toISOString())}
        showTime
        placeholder={property.placeholder}
        disabled={disabled}
        className=&quot;w-full bg-gray-800 border-gray-600&quot;
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 8. Color Property Renderer
export const ColorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
        &lt;input
          type=&quot;color&quot;
          value={value || '#000000'}
          onChange={(e) =&gt; onChange(e.target.value)}
          disabled={disabled}
          className=&quot;w-12 h-8 rounded border-2 border-gray-600 cursor-pointer disabled:cursor-not-allowed&quot;
        /&gt;
        &lt;Input
          value={value || ''}
          onChange={(e) =&gt; onChange(e.target.value)}
          placeholder=&quot;#000000&quot;
          disabled={disabled}
          className=&quot;flex-1 bg-gray-800 border-gray-600 text-gray-200&quot;
        /&gt;
      &lt;/div&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 9. File Property Renderer
export const FileRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const handleUpload = (file: File) =&gt; {
    const reader = new FileReader();
    reader.onload = (e) =&gt; {
      onChange({
        name: file.name,
        type: file.type,
        size: file.size,
        content: e.target?.result,
      });
    };
    reader.readAsDataURL(file);
    return false; // Prevent automatic upload
  };

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Upload beforeUpload={handleUpload} maxCount={1} disabled={disabled} className=&quot;w-full&quot;&gt;
        &lt;Button
          icon={&lt;PlusOutlined /&gt;}
          disabled={disabled}
          className=&quot;w-full bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600&quot;
        &gt;
          {value ? 'Replace File' : 'Upload File'}
        &lt;/Button&gt;
      &lt;/Upload&gt;
      {value &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
          Selected: {value.name} ({Math.round(value.size / 1024)}KB)
        &lt;/div&gt;
      )}
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 10. JSON Property Renderer
export const JsonRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const [jsonString, setJsonString] = useState(() =&gt; {
    try {
      return typeof value === 'string' ? value : JSON.stringify(value, null, 2);
    } catch {
      return value || '';
    }
  });

  const [isValid, setIsValid] = useState(true);

  const handleChange = useCallback(
    (newValue: string) =&gt; {
      setJsonString(newValue);

      try {
        const parsed = JSON.parse(newValue);
        setIsValid(true);
        onChange(parsed);
      } catch (_error) {
        setIsValid(false);
        // Still update the string value for live editing
        onChange(newValue);
      }
    },
    [onChange]
  );

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;flex justify-between items-center&quot;&gt;
        &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
        &lt;Tag color={isValid ? 'green' : 'red'}&gt;{isValid ? 'Valid JSON' : 'Invalid JSON'}&lt;/Tag&gt;
      &lt;/div&gt;
      &lt;TextArea
        value={jsonString}
        onChange={(e) =&gt; handleChange(e.target.value)}
        placeholder={property.placeholder || 'Enter valid JSON'}
        disabled={disabled}
        rows={6}
        className={cn(
          'bg-gray-800 border-gray-600 text-gray-200 font-mono',
          !isValid &amp;&amp; 'border-red-500'
        )}
      /&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 11. Expression Property Renderer
export const ExpressionRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  context,
  disabled,
}) =&gt; {
  const [showExpressionMode, setShowExpressionMode] = useState(
    ExpressionUtils.hasExpressions(value)
  );

  const evaluator = useMemo(() =&gt; (context ? new ExpressionEvaluator(context) : null), [context]);

  const [previewValue, setPreviewValue] = useState&lt;any&gt;(null);

  const handleEvaluatePreview = useCallback(() =&gt; {
    if (evaluator &amp;&amp; ExpressionUtils.hasExpressions(value)) {
      try {
        const result = evaluator.evaluate(value);
        setPreviewValue(result);
      } catch (error) {
        if (error instanceof Error) {
          setPreviewValue(`Error: ${error.message}`);
        } else {
          setPreviewValue(`Error: ${String(error)}`);
        }
      }
    }
  }, [evaluator, value]);

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;flex justify-between items-center&quot;&gt;
        &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
        &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
          &lt;Button
            size=&quot;small&quot;
            type={showExpressionMode ? 'primary' : 'default'}
            onClick={() =&gt; setShowExpressionMode(!showExpressionMode)}
            className=&quot;text-xs&quot;
          &gt;
            {`{{}}`}
          &lt;/Button&gt;
          {showExpressionMode &amp;&amp; (
            &lt;Button
              size=&quot;small&quot;
              onClick={handleEvaluatePreview}
              disabled={!context}
              className=&quot;text-xs&quot;
            &gt;
              Preview
            &lt;/Button&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;

      {showExpressionMode ? (
        &lt;TextArea
          value={value || ''}
          onChange={(e) =&gt; onChange(e.target.value)}
          placeholder=&quot;{{ $json.field }}&quot;
          disabled={disabled}
          rows={3}
          className=&quot;bg-gray-800 border-gray-600 text-gray-200 font-mono&quot;
        /&gt;
      ) : (
        &lt;Input
          value={value || ''}
          onChange={(e) =&gt; onChange(e.target.value)}
          placeholder={property.placeholder}
          disabled={disabled}
          className=&quot;bg-gray-800 border-gray-600 text-gray-200&quot;
        /&gt;
      )}

      {previewValue !== null &amp;&amp; (
        &lt;div className=&quot;text-xs bg-gray-700 p-2 rounded border border-gray-600&quot;&gt;
          &lt;div className=&quot;text-gray-400 mb-1&quot;&gt;Preview:&lt;/div&gt;
          &lt;div className=&quot;text-gray-200 font-mono&quot;&gt;
            {typeof previewValue === 'object'
              ? JSON.stringify(previewValue, null, 2)
              : String(previewValue)}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 12. Resource Locator Property Renderer
export const ResourceLocatorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  const [mode, setMode] = useState(value?.mode || 'list');
  const currentValue = value || { mode: 'list', value: '' };

  const handleModeChange = (newMode: string) =&gt; {
    setMode(newMode);
    onChange({ ...currentValue, mode: newMode, value: '' });
  };

  const handleValueChange = (newValue: any) =&gt; {
    onChange({ ...currentValue, value: newValue });
  };

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;flex space-x-2&quot;&gt;
        &lt;Select
          value={mode}
          onChange={handleModeChange}
          disabled={disabled}
          className=&quot;w-32 [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        &gt;
          &lt;Option value=&quot;list&quot;&gt;List&lt;/Option&gt;
          &lt;Option value=&quot;id&quot;&gt;ID&lt;/Option&gt;
          &lt;Option value=&quot;url&quot;&gt;URL&lt;/Option&gt;
        &lt;/Select&gt;

        {mode === 'list' ? (
          &lt;Select
            value={currentValue.value}
            onChange={handleValueChange}
            placeholder=&quot;Select resource&quot;
            disabled={disabled}
            className=&quot;flex-1 [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
            showSearch
          &gt;
            {/* Dynamic options based on resource type */}
            &lt;Option value=&quot;resource1&quot;&gt;Resource 1&lt;/Option&gt;
            &lt;Option value=&quot;resource2&quot;&gt;Resource 2&lt;/Option&gt;
          &lt;/Select&gt;
        ) : (
          &lt;Input
            value={currentValue.value}
            onChange={(e) =&gt; handleValueChange(e.target.value)}
            placeholder={mode === 'id' ? 'Enter resource ID' : 'Enter resource URL'}
            disabled={disabled}
            className=&quot;flex-1 bg-gray-800 border-gray-600 text-gray-200&quot;
          /&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 13. Assignment Collection Property Renderer
export const AssignmentCollectionRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
}) =&gt; {
  const assignments = value?.values || [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      {/* Import the AdvancedAssignmentCollection component we created */}
      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;text-sm text-gray-400 mb-2&quot;&gt;
          Assignment collection component would be rendered here
        &lt;/div&gt;
        &lt;div className=&quot;text-xs text-gray-500&quot;&gt;Current assignments: {assignments.length}&lt;/div&gt;
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 14. Resource Mapper Property Renderer
export const ResourceMapperRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  disabled,
}) =&gt; {
  const mappings = value?.mappings || [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Field Mappings&lt;/div&gt;
          &lt;Button
            size=&quot;small&quot;
            icon={&lt;PlusOutlined /&gt;}
            disabled={disabled}
            className=&quot;bg-gray-700 border-gray-600 text-gray-200&quot;
          &gt;
            Add Mapping
          &lt;/Button&gt;
        &lt;/div&gt;

        {mappings.length === 0 ? (
          &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;No field mappings configured&lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {mappings.map((mapping: any, index: number) =&gt; (
              &lt;div key={index} className=&quot;flex items-center space-x-2 p-2 bg-gray-700 rounded&quot;&gt;
                &lt;Input
                  placeholder=&quot;Source field&quot;
                  value={mapping.source}
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;div className=&quot;text-gray-400&quot;&gt;→&lt;/div&gt;
                &lt;Input
                  placeholder=&quot;Target field&quot;
                  value={mapping.target}
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;Button
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 15. Filter Property Renderer
export const FilterRenderer: React.FC&lt;PropertyRendererProps&gt; = ({ property, value, disabled }) =&gt; {
  const conditions = value?.conditions || [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Filter Conditions&lt;/div&gt;
          &lt;Button
            size=&quot;small&quot;
            icon={&lt;FilterOutlined /&gt;}
            disabled={disabled}
            className=&quot;bg-gray-700 border-gray-600 text-gray-200&quot;
          &gt;
            Add Condition
          &lt;/Button&gt;
        &lt;/div&gt;

        {conditions.length === 0 ? (
          &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;No filter conditions set&lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {conditions.map((condition: any, index: number) =&gt; (
              &lt;div key={index} className=&quot;flex items-center space-x-2 p-2 bg-gray-700 rounded&quot;&gt;
                &lt;Select value={condition.field} className=&quot;w-32&quot;&gt;
                  &lt;Option value=&quot;field1&quot;&gt;Field 1&lt;/Option&gt;
                  &lt;Option value=&quot;field2&quot;&gt;Field 2&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Select value={condition.operator} className=&quot;w-24&quot;&gt;
                  &lt;Option value=&quot;equals&quot;&gt;Equals&lt;/Option&gt;
                  &lt;Option value=&quot;contains&quot;&gt;Contains&lt;/Option&gt;
                  &lt;Option value=&quot;gt&quot;&gt;Greater than&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Input
                  value={condition.value}
                  placeholder=&quot;Value&quot;
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;Button
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 16-22. Additional Complex Property Renderers
export const CurlImportRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;TextArea
        value={value || ''}
        onChange={(e) =&gt; onChange(e.target.value)}
        placeholder=&quot;curl -X GET https://api.example.com/data&quot;
        rows={4}
        disabled={disabled}
        className=&quot;bg-gray-800 border-gray-600 text-gray-200 font-mono&quot;
      /&gt;
      &lt;Button size=&quot;small&quot; disabled={!value || disabled}&gt;
        Import from cURL
      &lt;/Button&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const WorkflowSelectorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder=&quot;Select workflow&quot;
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
      &gt;
        &lt;Option value=&quot;workflow1&quot;&gt;Sample Workflow 1&lt;/Option&gt;
        &lt;Option value=&quot;workflow2&quot;&gt;Sample Workflow 2&lt;/Option&gt;
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const NodeSelectorRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder=&quot;Select node&quot;
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
      &gt;
        &lt;Option value=&quot;node1&quot;&gt;Transform Node&lt;/Option&gt;
        &lt;Option value=&quot;node2&quot;&gt;HTTP Request Node&lt;/Option&gt;
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const CredentialsSelectRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div className=&quot;flex space-x-2&quot;&gt;
        &lt;Select
          value={value}
          onChange={onChange}
          placeholder=&quot;Select credentials&quot;
          disabled={disabled}
          className=&quot;flex-1 [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
          showSearch
        &gt;
          &lt;Option value=&quot;cred1&quot;&gt;API Key Credentials&lt;/Option&gt;
          &lt;Option value=&quot;cred2&quot;&gt;OAuth2 Credentials&lt;/Option&gt;
        &lt;/Select&gt;
        &lt;Button
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          disabled={disabled}
          className=&quot;bg-gray-700 border-gray-600 text-gray-200&quot;
        &gt;
          New
        &lt;/Button&gt;
      &lt;/div&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

export const HiddenRenderer: React.FC&lt;PropertyRendererProps&gt; = () =&gt; null;

// Additional utility renderers for complex types
export const CollectionRenderer: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  disabled,
}) =&gt; {
  const items = Array.isArray(value) ? value : [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Collapse&gt;
        &lt;Panel header={`${items.length} items configured`} key=&quot;1&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            {items.map((_item: any, index: number) =&gt; (
              &lt;div key={index} className=&quot;p-2 bg-gray-700 rounded&quot;&gt;
                &lt;div className=&quot;text-sm text-gray-200&quot;&gt;Item {index + 1}&lt;/div&gt;
                {/* Render collection item properties */}
              &lt;/div&gt;
            ))}
            &lt;Button
              size=&quot;small&quot;
              icon={&lt;PlusOutlined /&gt;}
              disabled={disabled}
              className=&quot;bg-gray-700 border-gray-600 text-gray-200&quot;
            &gt;
              Add Item
            &lt;/Button&gt;
          &lt;/div&gt;
        &lt;/Panel&gt;
      &lt;/Collapse&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// Master Property Renderer Component
export const PropertyRenderer: React.FC&lt;PropertyRendererProps&gt; = (props) =&gt; {
  const { property } = props;

  switch (property.type) {
    case 'string':
      return &lt;StringRenderer {...props} /&gt;;
    case 'number':
      return &lt;NumberRenderer {...props} /&gt;;
    case 'boolean':
      return &lt;BooleanRenderer {...props} /&gt;;
    case 'options':
    case 'select':
      return &lt;OptionsRenderer {...props} /&gt;;
    case 'multiOptions':
    case 'multiSelect':
      return &lt;MultiOptionsRenderer {...props} /&gt;;
    case 'text':
      return &lt;TextRenderer {...props} /&gt;;
    case 'dateTime':
      return &lt;DateTimeRenderer {...props} /&gt;;
    case 'color':
      return &lt;ColorRenderer {...props} /&gt;;
    case 'file':
      return &lt;FileRenderer {...props} /&gt;;
    case 'json':
      return &lt;JsonRenderer {...props} /&gt;;
    case 'expression':
      return &lt;ExpressionRenderer {...props} /&gt;;
    case 'resourceLocator':
      return &lt;ResourceLocatorRenderer {...props} /&gt;;
    case 'assignmentCollection':
      return &lt;AssignmentCollectionRenderer {...props} /&gt;;
    case 'resourceMapper':
      return &lt;ResourceMapperRenderer {...props} /&gt;;
    case 'filter':
      return &lt;FilterRenderer {...props} /&gt;;
    case 'curlImport':
      return &lt;CurlImportRenderer {...props} /&gt;;
    case 'workflowSelector':
      return &lt;WorkflowSelectorRenderer {...props} /&gt;;
    case 'credentialsSelect':
      return &lt;CredentialsSelectRenderer {...props} /&gt;;
    case 'hidden':
      return &lt;HiddenRenderer {...props} /&gt;;
    case 'collection':
    case 'fixedCollection':
      return &lt;CollectionRenderer {...props} /&gt;;
    default:
      return &lt;StringRenderer {...props} /&gt;;
  }
};

export default PropertyRenderer;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyField.tsx (Line 1:1 - Line 456:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/propertyfield/PropertyField.tsx (Line 4:1 - Line 457:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn243" onclick="toggleCodeBlock('cloneGroup243', 'expandBtn243', 'collapseBtn243')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn243" onclick="toggleCodeBlock('cloneGroup243', 'expandBtn243', 'collapseBtn243')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup243"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */
/**
 * PropertyField Component
 * Dynamic form field renderer for node properties with advanced features
 */

import {
  EyeInvisibleOutlined,
  EyeOutlined,
  InfoCircleOutlined,
  MinusOutlined,
  PlusOutlined,
  UploadOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Tooltip,
  Upload,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import { useNodeTheme } from '../themes';
import type { NodeTheme } from '../types';

const { Option } = Select;
const { TextArea } = Input;

interface PropertyFieldProps {
  property: INodeProperty;
  value: any;
  onChange: (value: any) =&gt; void;
  disabled?: boolean;
  theme?: NodeTheme;
  context?: Record&lt;string, any&gt;;
  errors?: string[];
}

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  disabled = false,
  theme: propTheme,

  errors = [],
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [internalValue, setInternalValue] = useState(value);
  const [showPassword, setShowPassword] = useState(false);
  const [validationError, setValidationError] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    setInternalValue(value);
  }, [value]);

  const handleChange = (newValue: any) =&gt; {
    setInternalValue(newValue);

    // Validate the new value
    const error = validateValue(newValue);
    setValidationError(error);

    // Only call onChange if validation passes
    if (!error) {
      onChange(newValue);
    }
  };

  const validateValue = (val: any): string | null =&gt; {
    if (property.required &amp;&amp; (val === undefined || val === null || val === '')) {
      return `${property.displayName} is required`;
    }

    if (property.type === 'string' || property.type === 'text') {
      if (property.typeOptions?.minValue &amp;&amp; val.length &lt; property.typeOptions.minValue) {
        return `${property.displayName} must be at least ${property.typeOptions.minValue} characters`;
      }
      if (property.typeOptions?.maxValue &amp;&amp; val.length &gt; property.typeOptions.maxValue) {
        return `${property.displayName} must be no more than ${property.typeOptions.maxValue} characters`;
      }
    }

    if (property.type === 'number') {
      if (property.min !== undefined &amp;&amp; val &lt; property.min) {
        return `${property.displayName} must be at least ${property.min}`;
      }
      if (property.max !== undefined &amp;&amp; val &gt; property.max) {
        return `${property.displayName} must be no more than ${property.max}`;
      }
    }

    return null;
  };

  const renderLabel = () =&gt; {
    return (
      &lt;div
        style={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={String(cred.value)} value={cred.value}&gt;
            {cred.name}
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
    );
  };

  return (
    &lt;div style={{ marginBottom: theme.spacing.md }}&gt;
      {renderLabel()}
      {renderField()}
      {renderError()}
    &lt;/div&gt;
  );
};

export default PropertyField;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/NodeHandle.tsx (Line 1:1 - Line 283:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/nodehandle/NodeHandle.tsx (Line 6:1 - Line 288:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn245" onclick="toggleCodeBlock('cloneGroup245', 'expandBtn245', 'collapseBtn245')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn245" onclick="toggleCodeBlock('cloneGroup245', 'expandBtn245', 'collapseBtn245')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup245"><code class="language-tsx text-sm text-gray-800">/**
 * NodeHandle Component
 * Advanced handle system with custom styling and interactive features
 */

import { Tooltip } from 'antd';
import type React from 'react';
import { useState } from 'react';
import { Handle, Position } from 'reactflow';
import { useNodeTheme } from '../themes';
import type { CustomHandle, HandleStyle, NodeTheme } from '../types';

interface NodeHandleProps {
  handle: CustomHandle;
  theme?: NodeTheme;
  connected?: boolean;
  onConnect?: (handleId: string) =&gt; void;
  onDisconnect?: (handleId: string) =&gt; void;
  showTooltip?: boolean;
}

const NodeHandleComponent: React.FC&lt;NodeHandleProps&gt; = ({
  handle,
  theme: propTheme,
  connected = false,
  onConnect,
  onDisconnect,
  showTooltip = true,
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [isHovered, setIsHovered] = useState(false);

  const getHandleStyles = (): React.CSSProperties =&gt; {
    const baseSize = handle.size || 10;
    const size = isHovered ? baseSize * 1.2 : baseSize;

    const baseStyles: React.CSSProperties = {
      width: size,
      height: size,
      background: handle.color || theme.colors.border,
      border: `2px solid ${connected ? theme.colors.success : 'transparent'}`,
      transition: `all ${theme.animations.duration.fast} ${theme.animations.easing.easeOut}`,
      boxShadow: connected
        ? `0 0 0 2px ${theme.colors.success}40`
        : isHovered
          ? theme.shadows.md
          : 'none',
    };

    // Apply shape-specific styles
    switch (handle.style) {
      case 'circle':
        return {
          ...baseStyles,
          borderRadius: theme.borderRadius.full,
        };
      case 'square':
        return {
          ...baseStyles,
          borderRadius: '2px',
        };
      case 'diamond':
        return {
          ...baseStyles,
          borderRadius: '2px',
          transform: `rotate(45deg) scale(${isHovered ? 1.2 : 1})`,
        };
      case 'triangle':
        return {
          ...baseStyles,
          borderRadius: '2px',
          clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)',
        };
      default:
        return {
          ...baseStyles,
          borderRadius: theme.borderRadius.full,
        };
    }
  };

  const getPositionValue = (): Position =&gt; {
    switch (handle.position) {
      case 'top':
        return Position.Top;
      case 'right':
        return Position.Right;
      case 'bottom':
        return Position.Bottom;
      case 'left':
        return Position.Left;
      default:
        return Position.Left;
    }
  };

  const handleMouseEnter = () =&gt; {
    setIsHovered(true);
  };

  const handleMouseLeave = () =&gt; {
    setIsHovered(false);
  };

  const handleConnection = () =&gt; {
    if (connected &amp;&amp; onDisconnect) {
      onDisconnect(handle.id);
    } else if (!connected &amp;&amp; onConnect) {
      onConnect(handle.id);
    }
  };

  const renderHandle = () =&gt; (
    &lt;Handle
      type={handle.type}
      position={getPositionValue()}
      id={handle.id}
      style={getHandleStyles()}
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
      onClick={handleConnection}
    /&gt;
  );

  if (showTooltip &amp;&amp; handle.label) {
    return (
      &lt;Tooltip
        title={handle.label}
        placement={handle.position === 'left' ? 'left' : 'right'}
        mouseEnterDelay={0.5}
      &gt;
        {renderHandle()}
      &lt;/Tooltip&gt;
    );
  }

  return renderHandle();
};

/**
 * NodeHandleGroup Component
 * Manages multiple handles for a single node
 */
interface NodeHandleGroupProps {
  handles: CustomHandle[];
  nodeId: string;
  theme?: NodeTheme;
  connections?: Record&lt;string, boolean&gt;;
  onConnect?: (handleId: string, nodeId: string) =&gt; void;
  onDisconnect?: (handleId: string, nodeId: string) =&gt; void;
}

export const NodeHandleGroup: React.FC&lt;NodeHandleGroupProps&gt; = ({
  handles,
  nodeId,
  theme,
  connections = {},
  onConnect,
  onDisconnect,
}) =&gt; {
  if (!handles || handles.length === 0) return null;

  return (
    &lt;&gt;
      {handles.map((handle) =&gt; (
        &lt;NodeHandleComponent
          key={handle.id}
          handle={handle}
          theme={theme}
          connected={connections[handle.id] || false}
          onConnect={onConnect ? (handleId) =&gt; onConnect(handleId, nodeId) : undefined}
          onDisconnect={onDisconnect ? (handleId) =&gt; onDisconnect(handleId, nodeId) : undefined}
        /&gt;
      ))}
    &lt;/&gt;
  );
};

/**
 * Predefined Handle Creators
 */
export const createInputHandle = (
  id: string = 'input',
  style: HandleStyle = 'circle',
  color?: string
): CustomHandle =&gt; ({
  id,
  type: 'target',
  position: 'left',
  style,
  color: color || '#666666',
  size: 10,
});

export const createOutputHandle = (
  id: string = 'output',
  style: HandleStyle = 'circle',
  color?: string
): CustomHandle =&gt; ({
  id,
  type: 'source',
  position: 'right',
  style,
  color: color || '#666666',
  size: 10,
});

export const createAIHandle = (
  type: 'ai_languageModel' | 'ai_memory' | 'ai_tool' | 'ai_vectorStore',
  position: 'top' | 'right' | 'bottom' | 'left' = 'top'
): CustomHandle =&gt; {
  const colors = {
    ai_languageModel: '#8b5cf6',
    ai_memory: '#06b6d4',
    ai_tool: '#10b981',
    ai_vectorStore: '#f59e0b',
  };

  const labels = {
    ai_languageModel: 'Language Model',
    ai_memory: 'Memory',
    ai_tool: 'Tool',
    ai_vectorStore: 'Vector Store',
  };

  return {
    id: type,
    type: 'target',
    position,
    style: 'diamond',
    color: colors[type],
    size: 8,
    label: labels[type],
  };
};

export const createConditionHandle = (
  condition: string,
  index: number,
  color?: string
): CustomHandle =&gt; {
  const conditionColors = {
    true: '#52c41a',
    false: '#ff4d4f',
    default: '#8c8c8c',
  };

  return {
    id: `condition_${index}`,
    type: 'source',
    position: 'right',
    style: 'circle',
    color:
      color ||
      conditionColors[condition as keyof typeof conditionColors] ||
      conditionColors.default,
    size: 8,
    label: condition,
  };
};

export const createWebhookHandle = (): CustomHandle =&gt; ({
  id: 'webhook',
  type: 'target',
  position: 'left',
  style: 'square',
  color: '#722ed1',
  size: 12,
  label: 'Webhook',
});

export const createTriggerHandle = (): CustomHandle =&gt; ({
  id: 'trigger',
  type: 'source',
  position: 'right',
  style: 'triangle',
  color: '#1890ff',
  size: 10,
  label: 'Trigger',
});

export default NodeHandleComponent;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/NodeBadge.tsx (Line 1:1 - Line 204:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/nodebadge/NodeBadge.tsx (Line 5:1 - Line 208:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn247" onclick="toggleCodeBlock('cloneGroup247', 'expandBtn247', 'collapseBtn247')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn247" onclick="toggleCodeBlock('cloneGroup247', 'expandBtn247', 'collapseBtn247')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup247"><code class="language-tsx text-sm text-gray-800">/**
 * NodeBadge Component
 * Reusable badge component for displaying status, counts, and indicators on nodes
 */

import type React from 'react';
import { useNodeTheme } from '../themes';
import type { BadgePosition, NodeBadge, NodeTheme } from '../types';

interface NodeBadgeProps {
  badge: NodeBadge;
  theme?: NodeTheme;
  visible?: boolean;
  onClick?: (badgeId: string) =&gt; void;
}

const NodeBadgeComponent: React.FC&lt;NodeBadgeProps&gt; = ({
  badge,
  theme: propTheme,
  visible = true,
  onClick,
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;

  if (!visible) return null;

  const getPositionStyles = (position: BadgePosition): React.CSSProperties =&gt; {
    const baseStyles: React.CSSProperties = {
      position: 'absolute',
      zIndex: 10,
    };

    switch (position) {
      case 'top-left':
        return { ...baseStyles, top: '-6px', left: '-6px' };
      case 'top-right':
        return { ...baseStyles, top: '-6px', right: '-6px' };
      case 'bottom-left':
        return { ...baseStyles, bottom: '-6px', left: '-6px' };
      case 'bottom-right':
        return { ...baseStyles, bottom: '-6px', right: '-6px' };
      default:
        return { ...baseStyles, top: '-6px', right: '-6px' };
    }
  };

  const handleClick = (e: React.MouseEvent) =&gt; {
    e.stopPropagation();
    if (onClick) {
      onClick(badge.id);
    }
  };

  const badgeStyle: React.CSSProperties = {
    backgroundColor: badge.backgroundColor || theme.colors.primary,
    color: badge.color || theme.colors.background,
    fontSize: theme.typography.fontSize.xs,
    fontWeight: theme.typography.fontWeight.medium,
    borderRadius: theme.borderRadius.sm,
    padding: '2px 6px',
    minWidth: '18px',
    height: '18px',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    cursor: onClick ? 'pointer' : 'default',
    boxShadow: theme.shadows.sm,
    transition: `all ${theme.animations.duration.fast} ${theme.animations.easing.easeInOut}`,
    transform: 'scale(1)',
  };

  const hoverStyles: React.CSSProperties = onClick
    ? {
        transform: 'scale(1.1)',
        boxShadow: theme.shadows.md,
      }
    : {};

  return (
    &lt;div
      style={getPositionStyles(badge.position)}
      onClick={onClick ? handleClick : undefined}
      onMouseEnter={(e) =&gt; {
        if (onClick) {
          Object.assign((e.target as HTMLElement).style, hoverStyles);
        }
      }}
      onMouseLeave={(e) =&gt; {
        if (onClick) {
          Object.assign((e.target as HTMLElement).style, {
            transform: 'scale(1)',
            boxShadow: theme.shadows.sm,
          });
        }
      }}
    &gt;
      &lt;div style={badgeStyle}&gt;
        {badge.icon &amp;&amp; &lt;span style={{ marginRight: badge.text ? '2px' : '0' }}&gt;{badge.icon}&lt;/span&gt;}
        {badge.text &amp;&amp; &lt;span&gt;{badge.text}&lt;/span&gt;}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

/**
 * NodeBadgeGroup Component
 * Manages multiple badges for a single node
 */
interface NodeBadgeGroupProps {
  badges: NodeBadge[];
  nodeId: string;
  theme?: NodeTheme;
  onBadgeClick?: (badgeId: string, nodeId: string) =&gt; void;
}

export const NodeBadgeGroup: React.FC&lt;NodeBadgeGroupProps&gt; = ({
  badges,
  nodeId,
  theme,
  onBadgeClick,
}) =&gt; {
  if (!badges || badges.length === 0) return null;

  return (
    &lt;&gt;
      {badges.map((badge) =&gt; (
        &lt;NodeBadgeComponent
          key={badge.id}
          badge={badge}
          theme={theme}
          onClick={onBadgeClick ? (badgeId) =&gt; onBadgeClick(badgeId, nodeId) : undefined}
        /&gt;
      ))}
    &lt;/&gt;
  );
};

/**
 * Predefined Badge Types
 */
export const createStatusBadge = (
  status: 'success' | 'error' | 'warning' | 'info' | 'processing',
  position: BadgePosition = 'top-right'
): NodeBadge =&gt; {
  const statusConfig = {
    success: { icon: '✓', color: '#ffffff', backgroundColor: '#52c41a' },
    error: { icon: '✗', color: '#ffffff', backgroundColor: '#ff4d4f' },
    warning: { icon: '⚠', color: '#000000', backgroundColor: '#faad14' },
    info: { icon: 'ℹ', color: '#ffffff', backgroundColor: '#1890ff' },
    processing: { icon: '⟳', color: '#ffffff', backgroundColor: '#722ed1' },
  };

  const config = statusConfig[status];

  return {
    id: `status-${status}`,
    text: '',
    position,
    ...config,
  };
};

export const createCountBadge = (
  count: number,
  position: BadgePosition = 'top-right',
  color?: string,
  backgroundColor?: string
): NodeBadge =&gt; ({
  id: `count-${count}`,
  text: count.toString(),
  color: color || '#ffffff',
  backgroundColor: backgroundColor || '#ff4d4f',
  position,
});

export const createTextBadge = (
  text: string,
  position: BadgePosition = 'top-right',
  color?: string,
  backgroundColor?: string
): NodeBadge =&gt; ({
  id: `text-${text}`,
  text,
  color: color || '#ffffff',
  backgroundColor: backgroundColor || '#1890ff',
  position,
});

export const createIconBadge = (
  icon: string,
  position: BadgePosition = 'top-right',
  color?: string,
  backgroundColor?: string
): NodeBadge =&gt; ({
  id: `icon-${icon}`,
  text: '',
  icon,
  color: color || '#ffffff',
  backgroundColor: backgroundColor || '#52c41a',
  position,
});

export default NodeBadgeComponent;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedTransformPropertyPanel.tsx (Line 1:1 - Line 458:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/enhancedtransformpropertypanel/EnhancedTransformPropertyPanel.tsx (Line 4:1 - Line 461:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn249" onclick="toggleCodeBlock('cloneGroup249', 'expandBtn249', 'collapseBtn249')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn249" onclick="toggleCodeBlock('cloneGroup249', 'expandBtn249', 'collapseBtn249')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup249"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */
/**
 * Enhanced Transform Property Panel
 * Comprehensive configuration panel for the enhanced Transform node with n8n-like features
 */

import { BulbOutlined } from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Col,
  Collapse,
  Input,
  Row,
  Select,
  Space,
  Switch,
  Tag,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import TransformAssignmentCollection from './TransformAssignmentCollection';

const { Title, Text } = Typography;
const { Option } = Select;
const { TextArea } = Input;
const { Panel } = Collapse;

interface EnhancedTransformPropertyPanelProps {
  nodeData: any;
  onChange: (updates: any) =&gt; void;
  inputData?: any[];
  onTest?: () =&gt; void;
  disabled?: boolean;
}

const EnhancedTransformPropertyPanel: React.FC&lt;EnhancedTransformPropertyPanelProps&gt; = ({
  nodeData,
  onChange,
  inputData,
  onTest,
  disabled,
}) =&gt; {
  const [validationErrors, setValidationErrors] = useState&lt;string[]&gt;([]);

  // Extract current parameters
  const parameters = nodeData.parameters || {};
  const mode = parameters.mode || 'manual';
  const includeInputFields = parameters.includeInputFields || 'all';
  const selectedInputFields = parameters.selectedInputFields || '';
  const assignments = parameters.assignments?.values || [];
  const jsonObject = parameters.jsonObject || '{\n  &quot;newField&quot;: &quot;{{ $json.existingField }}&quot;\n}';
  const options = parameters.options || {};

  // Update parameter helper
  const updateParameter = useCallback(
    (key: string, value: any) =&gt; {
      const newParameters = { ...parameters, [key]: value };
      onChange({ parameters: newParameters });
    },
    [parameters, onChange]
  );

  // Update nested parameter helper
  const updateNestedParameter = useCallback(
    (path: string, value: any) =&gt; {
      const keys = path.split('.');
      const newParameters = { ...parameters };
      let current = newParameters;

      for (let i = 0; i &lt; keys.length - 1; i++) {
        if (!current[keys[i]]) current[keys[i]] = {};
        current = current[keys[i]];
      }

      current[keys[keys.length - 1]] = value;
      onChange({ parameters: newParameters });
    },
    [parameters, onChange]
  );

  // Validate configuration
  const validateConfiguration = useCallback(() =&gt; {
    const errors: string[] = [];

    if (mode === 'manual') {
      // Validate assignments
      assignments.forEach((assignment: any, index: number) =&gt; {
        if (!assignment.name?.trim()) {
          errors.push(`Assignment ${index + 1}: Field name is required`);
        }
        if (assignment.name?.includes('..')) {
          errors.push(`Assignment ${index + 1}: Invalid dot notation syntax`);
        }
      });

      // Validate selected fields if needed
      if (
        (includeInputFields === 'selected' || includeInputFields === 'except') &amp;&amp;
        !selectedInputFields.trim()
      ) {
        errors.push('Selected input fields list is required for this inclusion mode');
      }
    } else if (mode === 'json') {
      // Validate JSON syntax
      try {
        JSON.parse(jsonObject);
      } catch (error) {
        errors.push(
          'Invalid JSON syntax in JSON Object',
          error instanceof Error ? error.message : String(error)
        );
      }
    }

    setValidationErrors(errors);
    return errors.length === 0;
  }, [mode, assignments, includeInputFields, selectedInputFields, jsonObject]);

  // Validate on parameter changes
  useEffect(() =&gt; {
    validateConfiguration();
  }, [validateConfiguration]);

  // Get input field suggestions
  const getInputFieldSuggestions = useCallback(() =&gt; {
    if (!inputData || !inputData.length) return [];

    const fieldNames = new Set&lt;string&gt;();
    inputData.forEach((item) =&gt; {
      if (item.json &amp;&amp; typeof item.json === 'object') {
        Object.keys(item.json).forEach((key) =&gt; fieldNames.add(key));
      }
    });

    return Array.from(fieldNames);
  }, [inputData]);

  const inputFieldSuggestions = getInputFieldSuggestions();

  // Render mode configuration
  const renderModeConfiguration = () =&gt; {
    switch (mode) {
      case 'manual':
        return (
          &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;large&quot;&gt;
            {/* Input Field Inclusion */}
            &lt;Card size=&quot;small&quot; title=&quot;Input Field Handling&quot;&gt;
              &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                &lt;div&gt;
                  &lt;Text strong&gt;Include Input Fields&lt;/Text&gt;
                  &lt;br /&gt;
                  &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                    Choose which input fields to include in the output
                  &lt;/Text&gt;
                  &lt;Select
                    value={includeInputFields}
                    onChange={(value) =&gt; updateParameter('includeInputFields', value)}
                    style={{ width: '100%', marginTop: '8px' }}
                    disabled={disabled}
                  &gt;
                    &lt;Option value=&quot;all&quot;&gt;Include All Input Fields&lt;/Option&gt;
                    &lt;Option value=&quot;none&quot;&gt;Include No Input Fields&lt;/Option&gt;
                    &lt;Option value=&quot;selected&quot;&gt;Include Selected Input Fields&lt;/Option&gt;
                    &lt;Option value=&quot;except&quot;&gt;Include All Except Selected&lt;/Option&gt;
                  &lt;/Select&gt;
                &lt;/div&gt;

                {/* Conditional field selection */}
                {(includeInputFields === 'selected' || includeInputFields === 'except') &amp;&amp; (
                  &lt;div&gt;
                    &lt;Text strong&gt;Selected Input Fields&lt;/Text&gt;
                    &lt;br /&gt;
                    &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                      Comma-separated list of field names
                    &lt;/Text&gt;
                    &lt;Input
                      placeholder=&quot;field1, field2, field3&quot;
                      value={selectedInputFields}
                      onChange={(e) =&gt; updateParameter('selectedInputFields', e.target.value)}
                      style={{ marginTop: '8px' }}
                      disabled={disabled}
                    /&gt;
                    {inputFieldSuggestions.length &gt; 0 &amp;&amp; (
                      &lt;div style={{ marginTop: '8px' }}&gt;
                        &lt;Text type=&quot;secondary&quot; style={{ fontSize: '11px' }}&gt;
                          Available fields:{' '}
                        &lt;/Text&gt;
                        {inputFieldSuggestions.map((field: string) =&gt; (
                          &lt;Tag
                            key={field}
                            style={{ cursor: 'pointer', margin: '2px' }}
                            onClick={() =&gt; {
                              const currentFields = selectedInputFields
                                .split(',')
                                .map((f: string) =&gt; f.trim())
                                .filter((f: string) =&gt; f);
                              if (!currentFields.includes(field)) {
                                const newFields = [...currentFields, field].join(', ');
                                updateParameter('selectedInputFields', newFields);
                              }
                            }}
                          &gt;
                            {field}
                          &lt;/Tag&gt;
                        ))}
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;
                )}
              &lt;/Space&gt;
            &lt;/Card&gt;

            {/* Field Assignments */}
            &lt;Card size=&quot;small&quot; title=&quot;Field Assignments&quot;&gt;
              &lt;TransformAssignmentCollection
                assignments={assignments}
                onChange={(newAssignments) =&gt;
                  updateNestedParameter('assignments.values', newAssignments)
                }
                inputData={inputData}
                disabled={disabled}
              /&gt;
            &lt;/Card&gt;
          &lt;/Space&gt;
        );

      case 'json':
        return (
          &lt;Card size=&quot;small&quot; title=&quot;JSON Object Definition&quot;&gt;
            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;div&gt;
                &lt;Text strong&gt;JSON Object&lt;/Text&gt;
                &lt;br /&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                  Define the output object structure using JSON with expressions
                &lt;/Text&gt;
              &lt;/div&gt;
              &lt;TextArea
                value={jsonObject}
                onChange={(e) =&gt; updateParameter('jsonObject', e.target.value)}
                rows={8}
                placeholder='{\n  &quot;newField&quot;: &quot;{{ $json.existingField }}&quot;,\n  &quot;computed&quot;: &quot;{{ $json.value1 + $json.value2 }}&quot;\n}'
                disabled={disabled}
                style={{
                  fontFamily: 'Monaco, Consolas, monospace',
                  fontSize: '12px',
                }}
              /&gt;
              &lt;Alert
                message=&quot;Expression Support&quot;
                description=&quot;Use {{ expression }} syntax to access input data and perform calculations&quot;
                type=&quot;info&quot;
                showIcon
                icon={&lt;BulbOutlined /&gt;}
              /&gt;
            &lt;/Space&gt;
          &lt;/Card&gt;
        );

      default:
        return null;
    }
  };

  // Render advanced options
  const renderAdvancedOptions = () =&gt; (
    &lt;Collapse ghost&gt;
      &lt;Panel header=&quot;Advanced Options&quot; key=&quot;advanced&quot;&gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
          &lt;Row gutter={16}&gt;
            &lt;Col span={12}&gt;
              &lt;div&gt;
                &lt;Text strong&gt;Dot Notation&lt;/Text&gt;
                &lt;br /&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                  Access nested object properties
                &lt;/Text&gt;
                &lt;br /&gt;
                &lt;Switch
                  checked={options.dotNotation ?? true}
                  onChange={(value) =&gt; updateNestedParameter('options.dotNotation', value)}
                  disabled={disabled}
                  style={{ marginTop: '4px' }}
                /&gt;
              &lt;/div&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;div&gt;
                &lt;Text strong&gt;Ignore Conversion Errors&lt;/Text&gt;
                &lt;br /&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                  Continue on type conversion failures
                &lt;/Text&gt;
                &lt;br /&gt;
                &lt;Switch
                  checked={options.ignoreConversionErrors ?? false}
                  onChange={(value) =&gt;
                    updateNestedParameter('options.ignoreConversionErrors', value)
                  }
                  disabled={disabled}
                  style={{ marginTop: '4px' }}
                /&gt;
              &lt;/div&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {mode === 'manual' &amp;&amp; (
            &lt;div&gt;
              &lt;Text strong&gt;Keep Only Set Fields&lt;/Text&gt;
              &lt;br /&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                Only include explicitly set fields (overrides input field inclusion)
              &lt;/Text&gt;
              &lt;br /&gt;
              &lt;Switch
                checked={options.keepOnlySet ?? false}
                onChange={(value) =&gt; updateNestedParameter('options.keepOnlySet', value)}
                disabled={disabled}
                style={{ marginTop: '4px' }}
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/Space&gt;
      &lt;/Panel&gt;
    &lt;/Collapse&gt;
  );

  return (
    &lt;div
      className=&quot;enhanced-transform-property-panel&quot;
      style={{ height: '100%', display: 'flex', flexDirection: 'column' }}
    &gt;
      &lt;style&gt;{`
        .enhanced-transform-property-panel {
          background: #fff;
        }
        .ant-tabs-content-holder {
          overflow-y: auto;
          flex: 1;
        }
      `}&lt;/style&gt;

      {/* Header */}
      &lt;div style={{ padding: '16px 16px 0', borderBottom: '1px solid #f0f0f0' }}&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginBottom: '16px',
          }}
        &gt;
          &lt;div&gt;
            &lt;Title level={4} style={{ margin: 0 }}&gt;
              Transform Configuration
            &lt;/Title&gt;
            &lt;Text type=&quot;secondary&quot;&gt;Enhanced field transformation with type validation&lt;/Text&gt;
          &lt;/div&gt;
          {onTest &amp;&amp; (
            &lt;Button
              type=&quot;primary&quot;
              size=&quot;small&quot;
              onClick={onTest}
              disabled={disabled || validationErrors.length &gt; 0}
            &gt;
              Test
            &lt;/Button&gt;
          )}
        &lt;/div&gt;

        {/* Mode Selection */}
        &lt;div style={{ marginBottom: '16px' }}&gt;
          &lt;Text strong&gt;Transformation Mode&lt;/Text&gt;
          &lt;Select
            value={mode}
            onChange={(value) =&gt; updateParameter('mode', value)}
            style={{ width: '100%', marginTop: '8px' }}
            disabled={disabled}
          &gt;
            &lt;Option value=&quot;manual&quot;&gt;
              &lt;div&gt;
                &lt;div&gt;Manual Field Assignment&lt;/div&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '11px' }}&gt;
                  Configure individual field transformations with type validation
                &lt;/Text&gt;
              &lt;/div&gt;
            &lt;/Option&gt;
            &lt;Option value=&quot;json&quot;&gt;
              &lt;div&gt;
                &lt;div&gt;JSON Object&lt;/div&gt;
                &lt;Text type=&quot;secondary&quot; style={{ fontSize: '11px' }}&gt;
                  Define transformations using a JSON object with expressions
                &lt;/Text&gt;
              &lt;/div&gt;
            &lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Validation Errors */}
      {validationErrors.length &gt; 0 &amp;&amp; (
        &lt;div style={{ padding: '0 16px' }}&gt;
          &lt;Alert
            message=&quot;Configuration Errors&quot;
            description={
              &lt;ul style={{ margin: '8px 0', paddingLeft: '20px' }}&gt;
                {validationErrors.map((error: string, index: number) =&gt; (
                  &lt;li key={index} style={{ fontSize: '12px' }}&gt;
                    {error}
                  &lt;/li&gt;
                ))}
              &lt;/ul&gt;
            }
            type=&quot;error&quot;
            showIcon
            style={{ marginTop: '16px' }}
          /&gt;
        &lt;/div&gt;
      )}

      {/* Main Configuration */}
      &lt;div style={{ padding: '16px', flex: 1, overflowY: 'auto' }}&gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;large&quot;&gt;
          {renderModeConfiguration()}
          {renderAdvancedOptions()}
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Footer with stats */}
      &lt;div
        style={{
          padding: '12px 16px',
          borderTop: '1px solid #f0f0f0',
          backgroundColor: '#fafafa',
          fontSize: '12px',
          color: '#8c8c8c',
        }}
      &gt;
        &lt;Row&gt;
          &lt;Col span={8}&gt;
            &lt;Text type=&quot;secondary&quot;&gt;Mode: {mode}&lt;/Text&gt;
          &lt;/Col&gt;
          &lt;Col span={8}&gt;
            {mode === 'manual' &amp;&amp; &lt;Text type=&quot;secondary&quot;&gt;Assignments: {assignments.length}&lt;/Text&gt;}
          &lt;/Col&gt;
          &lt;Col span={8} style={{ textAlign: 'right' }}&gt;
            {inputData &amp;&amp; &lt;Text type=&quot;secondary&quot;&gt;Input items: {inputData.length}&lt;/Text&gt;}
          &lt;/Col&gt;
        &lt;/Row&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EnhancedTransformPropertyPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedNodeToolbar.tsx (Line 1:1 - Line 367:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/enhancednodetoolbar/EnhancedNodeToolbar.tsx (Line 8:1 - Line 369:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn251" onclick="toggleCodeBlock('cloneGroup251', 'expandBtn251', 'collapseBtn251')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn251" onclick="toggleCodeBlock('cloneGroup251', 'expandBtn251', 'collapseBtn251')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup251"><code class="language-tsx text-sm text-gray-800">/**
 * Enhanced Node Toolbar
 * Advanced toolbar with customizable actions, themes, and interactions
 */

import {
  BugOutlined,
  CopyOutlined,
  DeleteOutlined,
  EditOutlined,
  MoreOutlined,
  PlayCircleOutlined,
  ReloadOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import { Dropdown, Menu, Tooltip } from 'antd';
import React, { useRef, useState } from 'react';
import { useNodeTheme } from '../themes';
import type { NodeTheme, ToolbarAction } from '../types';

interface EnhancedNodeToolbarProps {
  nodeId: string;
  visible: boolean;
  actions?: ToolbarAction[];
  theme?: NodeTheme;
  onActionClick: (actionId: string, nodeId: string) =&gt; void;
  position?: 'top' | 'bottom' | 'left' | 'right';
  size?: 'small' | 'medium' | 'large';
  variant?: 'default' | 'compact' | 'floating';
}

const EnhancedNodeToolbar: React.FC&lt;EnhancedNodeToolbarProps&gt; = ({
  nodeId,
  visible,
  actions = [],
  theme: propTheme,
  onActionClick,
  position = 'top',
  size = 'medium',
  variant = 'default',
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [hoveredAction, setHoveredAction] = useState&lt;string | null&gt;(null);
  const toolbarRef = useRef&lt;HTMLDivElement&gt;(null);

  // Default actions if none provided
  const defaultActions: ToolbarAction[] = [
    {
      id: 'play',
      icon: 'PlayCircleOutlined',
      label: 'Run Node',
      action: 'execute',
      shortcut: 'Ctrl+R',
    },
    {
      id: 'stop',
      icon: 'StopOutlined',
      label: 'Stop Execution',
      action: 'stop',
    },
    {
      id: 'copy',
      icon: 'CopyOutlined',
      label: 'Duplicate Node',
      action: 'duplicate',
      shortcut: 'Ctrl+D',
    },
    {
      id: 'edit',
      icon: 'EditOutlined',
      label: 'Edit Node',
      action: 'edit',
      shortcut: 'Enter',
    },
    {
      id: 'delete',
      icon: 'DeleteOutlined',
      label: 'Delete Node',
      action: 'delete',
      shortcut: 'Del',
    },
    {
      id: 'more',
      icon: 'MoreOutlined',
      label: 'More Actions',
      action: 'menu',
    },
  ];

  const finalActions = actions.length &gt; 0 ? actions : defaultActions;

  const getPositionStyles = (): React.CSSProperties =&gt; {
    const offset = variant === 'floating' ? 12 : 8;
    const baseStyles: React.CSSProperties = {
      position: 'absolute',
      zIndex: 9999,
    };

    switch (position) {
      case 'top':
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'bottom':
        return {
          ...baseStyles,
          bottom: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'left':
        return {
          ...baseStyles,
          left: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      case 'right':
        return {
          ...baseStyles,
          right: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      default:
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
    }
  };

  const getSizeConfig = () =&gt; {
    switch (size) {
      case 'small':
        return { buttonSize: 24, iconSize: 12, padding: '4px' };
      case 'large':
        return { buttonSize: 36, iconSize: 16, padding: '8px' };
      default:
        return { buttonSize: 28, iconSize: 14, padding: '6px' };
    }
  };

  const getVariantStyles = (): React.CSSProperties =&gt; {
    const { padding } = getSizeConfig();

    // Defensive theme access with fallbacks
    const borderRadius = theme?.borderRadius?.md || '6px';
    const duration = theme?.animations?.duration?.normal || '150ms';
    const easing = theme?.animations?.easing?.easeOut || 'ease-out';

    const baseStyles: React.CSSProperties = {
      display: 'flex',
      alignItems: 'center',
      gap: '2px',
      borderRadius,
      transition: `all ${duration} ${easing}`,
      opacity: visible ? 1 : 0,
      transform: visible ? 'scale(1)' : 'scale(0.9)',
      padding,
    };

    switch (variant) {
      case 'compact':
        return {
          ...baseStyles,
          background: 'rgba(0, 0, 0, 0.8)',
          backdropFilter: 'blur(8px)',
          border: `1px solid ${theme?.colors?.border || '#ddd'}40`,
        };
      case 'floating':
        return {
          ...baseStyles,
          background: theme?.colors?.background || '#fff',
          border: `1px solid ${theme?.colors?.border || '#ddd'}`,
          boxShadow: theme?.shadows?.lg || '0 10px 25px rgba(0, 0, 0, 0.1)',
        };
      default:
        return {
          ...baseStyles,
          background: 'rgba(0, 0, 0, 0.9)',
          border: `1px solid ${theme?.colors?.border || '#ddd'}60`,
          boxShadow: theme?.shadows?.md || '0 4px 12px rgba(0, 0, 0, 0.05)',
        };
    }
  };

  const getIconComponent = (iconName: string) =&gt; {
    const iconMap: Record&lt;string, React.ComponentType&lt;any&gt;&gt; = {
      PlayCircleOutlined,
      StopOutlined,
      DeleteOutlined,
      MoreOutlined,
      CopyOutlined,
      EditOutlined,
      SettingOutlined,
      BugOutlined,
      ReloadOutlined,
    };

    const IconComponent = iconMap[iconName] || MoreOutlined;
    return IconComponent;
  };

  const handleActionClick = (action: ToolbarAction, e: React.MouseEvent) =&gt; {
    e.stopPropagation();

    // Special handling for menu action
    if (action.id === 'more') {
      // Show additional actions menu
      return;
    }

    onActionClick(action.id, nodeId);
  };

  const getButtonStyles = (actionId: string): React.CSSProperties =&gt; {
    const { buttonSize, iconSize } = getSizeConfig();
    const isHovered = hoveredAction === actionId;

    const buttonColor = getActionColor(actionId);

    return {
      width: buttonSize,
      height: buttonSize,
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      borderRadius: theme.borderRadius.sm,
      background: isHovered ? buttonColor : 'transparent',
      color: isHovered ? theme.colors.background : getActionTextColor(actionId),
      border: 'none',
      cursor: 'pointer',
      transition: `all ${theme.animations.duration.fast} ${theme.animations.easing.easeOut}`,
      fontSize: iconSize,
      transform: isHovered ? 'scale(1.1)' : 'scale(1)',
    };
  };

  const getActionColor = (actionId: string): string =&gt; {
    switch (actionId) {
      case 'play':
        return theme.colors.success;
      case 'stop':
        return theme.colors.error;
      case 'delete':
        return theme.colors.error;
      case 'copy':
        return theme.colors.info;
      case 'edit':
        return theme.colors.primary;
      default:
        return theme.colors.textSecondary;
    }
  };

  const getActionTextColor = (actionId: string): string =&gt; {
    if (variant === 'floating') {
      return getActionColor(actionId);
    }
    return theme.colors.background;
  };

  const renderMoreMenu = () =&gt; {
    const moreActions: ToolbarAction[] = [
      {
        id: 'settings',
        icon: 'SettingOutlined',
        label: 'Node Settings',
        action: 'settings',
      },
      {
        id: 'debug',
        icon: 'BugOutlined',
        label: 'Debug Node',
        action: 'debug',
      },
      {
        id: 'reload',
        icon: 'ReloadOutlined',
        label: 'Reload Node',
        action: 'reload',
      },
    ];

    const menuItems = moreActions.map((action) =&gt; ({
      key: action.id,
      label: (
        &lt;div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}
              &gt;
                {React.createElement(getIconComponent(action.icon))}
              &lt;/button&gt;
            &lt;/Tooltip&gt;
          );
        })}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EnhancedNodeToolbar;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/ConditionalPropertyRenderer.tsx (Line 1:1 - Line 507:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/conditionalpropertyrenderer/ConditionalPropertyRenderer.tsx (Line 3:1 - Line 509:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn253" onclick="toggleCodeBlock('cloneGroup253', 'expandBtn253', 'collapseBtn253')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn253" onclick="toggleCodeBlock('cloneGroup253', 'expandBtn253', 'collapseBtn253')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup253"><code class="language-tsx text-sm text-gray-800">/**
 * Conditional Property Rendering System
 * Advanced displayOptions evaluation matching n8n's complex conditional logic
 */

import type React from 'react';
import { useCallback, useMemo } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import type { PropertyRendererProps } from './PropertyRenderers';
import { PropertyRenderer } from './PropertyRenderers';

// Define display options interface locally
interface INodePropertyDisplayOptions {
  show?: Record&lt;string, any[]&gt;;
  hide?: Record&lt;string, any[]&gt;;
}

// Enhanced Display Options Interface
export interface EnhancedDisplayOptions extends INodePropertyDisplayOptions {
  show?: Record&lt;string, any[]&gt;;
  hide?: Record&lt;string, any[]&gt;;
  // Advanced conditional operators
  showIf?: {
    field: string;
    operator:
      | 'equals'
      | 'not_equals'
      | 'contains'
      | 'not_contains'
      | 'greater_than'
      | 'less_than'
      | 'is_empty'
      | 'is_not_empty';
    value: any;
  }[];
  hideIf?: {
    field: string;
    operator:
      | 'equals'
      | 'not_equals'
      | 'contains'
      | 'not_contains'
      | 'greater_than'
      | 'less_than'
      | 'is_empty'
      | 'is_not_empty';
    value: any;
  }[];
  // Nested conditions with AND/OR logic
  conditions?: {
    type: 'AND' | 'OR';
    rules: Array&lt;{
      field: string;
      operator: string;
      value: any;
    }&gt;;
  };
  // Resource-dependent visibility
  resourceDependent?: {
    resource: string;
    condition: (resource: any) =&gt; boolean;
  };
}

export interface ConditionalPropertyRendererProps extends Omit&lt;PropertyRendererProps, 'property'&gt; {
  property: INodeProperty &amp; {
    displayOptions?: EnhancedDisplayOptions;
  };
  nodeValues: Record&lt;string, any&gt;;
}

// Conditional Logic Evaluator
class DisplayOptionsEvaluator {
  private nodeValues: Record&lt;string, any&gt;;

  constructor(nodeValues: Record&lt;string, any&gt;) {
    this.nodeValues = nodeValues;
  }

  // Main evaluation method
  evaluateDisplayOptions(displayOptions: EnhancedDisplayOptions): {
    visible: boolean;
    disabled: boolean;
    required: boolean;
  } {
    let visible = true;
    const disabled = false;
    const required = false;

    // Basic show/hide conditions (n8n standard)
    if (displayOptions.show) {
      visible = this.evaluateShowConditions(displayOptions.show);
    }

    if (displayOptions.hide &amp;&amp; visible) {
      visible = !this.evaluateHideConditions(displayOptions.hide);
    }

    // Advanced conditional logic
    if (displayOptions.showIf &amp;&amp; visible) {
      visible = this.evaluateAdvancedConditions(displayOptions.showIf);
    }

    if (displayOptions.hideIf &amp;&amp; visible) {
      visible = !this.evaluateAdvancedConditions(displayOptions.hideIf);
    }

    // Complex nested conditions
    if (displayOptions.conditions &amp;&amp; visible) {
      visible = this.evaluateNestedConditions(displayOptions.conditions);
    }

    // Resource-dependent visibility
    if (displayOptions.resourceDependent &amp;&amp; visible) {
      visible = this.evaluateResourceDependentConditions(displayOptions.resourceDependent);
    }

    return { visible, disabled, required };
  }

  // Standard n8n show conditions
  private evaluateShowConditions(showConditions: Record&lt;string, any[]&gt;): boolean {
    return Object.entries(showConditions).every(([fieldName, expectedValues]) =&gt; {
      const currentValue = this.getFieldValue(fieldName);
      return this.matchesAnyValue(currentValue, expectedValues);
    });
  }

  // Standard n8n hide conditions
  private evaluateHideConditions(hideConditions: Record&lt;string, any[]&gt;): boolean {
    return Object.entries(hideConditions).some(([fieldName, expectedValues]) =&gt; {
      const currentValue = this.getFieldValue(fieldName);
      return this.matchesAnyValue(currentValue, expectedValues);
    });
  }

  // Advanced conditional logic with operators
  private evaluateAdvancedConditions(
    conditions: Array&lt;{
      field: string;
      operator: string;
      value: any;
    }&gt;
  ): boolean {
    return conditions.every((condition) =&gt; {
      const fieldValue = this.getFieldValue(condition.field);
      return this.evaluateCondition(fieldValue, condition.operator, condition.value);
    });
  }

  // Nested conditions with AND/OR logic
  private evaluateNestedConditions(conditions: {
    type: 'AND' | 'OR';
    rules: Array&lt;{
      field: string;
      operator: string;
      value: any;
    }&gt;;
  }): boolean {
    const results = conditions.rules.map((rule) =&gt; {
      const fieldValue = this.getFieldValue(rule.field);
      return this.evaluateCondition(fieldValue, rule.operator, rule.value);
    });

    return conditions.type === 'AND'
      ? results.every((result) =&gt; result)
      : results.some((result) =&gt; result);
  }

  // Resource-dependent conditions
  private evaluateResourceDependentConditions(resourceDependent: {
    resource: string;
    condition: (resource: any) =&gt; boolean;
  }): boolean {
    const resource = this.getFieldValue(resourceDependent.resource);
    try {
      return resourceDependent.condition(resource);
    } catch (_error) {
      return false;
    }
  }

  // Single condition evaluation with operators
  private evaluateCondition(fieldValue: any, operator: string, expectedValue: any): boolean {
    switch (operator) {
      case 'equals':
        return fieldValue === expectedValue;
      case 'not_equals':
        return fieldValue !== expectedValue;
      case 'contains':
        return this.valueContains(fieldValue, expectedValue);
      case 'not_contains':
        return !this.valueContains(fieldValue, expectedValue);
      case 'greater_than':
        return Number(fieldValue) &gt; Number(expectedValue);
      case 'less_than':
        return Number(fieldValue) &lt; Number(expectedValue);
      case 'is_empty':
        return this.isEmpty(fieldValue);
      case 'is_not_empty':
        return !this.isEmpty(fieldValue);
      case 'starts_with':
        return String(fieldValue).startsWith(String(expectedValue));
      case 'ends_with':
        return String(fieldValue).endsWith(String(expectedValue));
      case 'matches_regex':
        try {
          return new RegExp(String(expectedValue)).test(String(fieldValue));
        } catch {
          return false;
        }
      default:
        return false;
    }
  }

  // Helper: Check if value matches any of the expected values
  private matchesAnyValue(currentValue: any, expectedValues: any[]): boolean {
    return expectedValues.some((expectedValue) =&gt; {
      // Handle array values
      if (Array.isArray(currentValue)) {
        return currentValue.includes(expectedValue);
      }

      // Handle object values
      if (typeof currentValue === 'object' &amp;&amp; currentValue !== null) {
        return JSON.stringify(currentValue) === JSON.stringify(expectedValue);
      }

      // Standard equality check
      return currentValue === expectedValue;
    });
  }

  // Helper: Check if value contains expected value
  private valueContains(fieldValue: any, expectedValue: any): boolean {
    if (Array.isArray(fieldValue)) {
      return fieldValue.includes(expectedValue);
    }

    if (typeof fieldValue === 'string' &amp;&amp; typeof expectedValue === 'string') {
      return fieldValue.toLowerCase().includes(expectedValue.toLowerCase());
    }

    if (typeof fieldValue === 'object' &amp;&amp; fieldValue !== null) {
      return JSON.stringify(fieldValue).includes(String(expectedValue));
    }

    return false;
  }

  // Helper: Check if value is empty
  private isEmpty(value: any): boolean {
    if (value === null || value === undefined) return true;
    if (typeof value === 'string') return value.trim() === '';
    if (Array.isArray(value)) return value.length === 0;
    if (typeof value === 'object') return Object.keys(value).length === 0;
    return false;
  }

  // Helper: Get field value with dot notation support
  private getFieldValue(fieldPath: string): any {
    // Handle dot notation: 'operation.type' -&gt; operation.type
    const pathParts = fieldPath.split('.');
    let value = this.nodeValues;

    for (const part of pathParts) {
      if (value === null || value === undefined) {
        return undefined;
      }
      value = value[part];
    }

    return value;
  }
}

// Property Dependency Tracker
class PropertyDependencyTracker {
  private dependencies = new Map&lt;string, Set&lt;string&gt;&gt;();

  // Register that a property depends on other fields
  registerDependency(propertyName: string, dependsOn: string[]): void {
    if (!this.dependencies.has(propertyName)) {
      this.dependencies.set(propertyName, new Set());
    }

    const deps = this.dependencies.get(propertyName)!;
    dependsOn.forEach((dep) =&gt; deps.add(dep));
  }

  // Get all properties that depend on a given field
  getDependents(fieldName: string): string[] {
    const dependents: string[] = [];

    this.dependencies.forEach((deps, propertyName) =&gt; {
      if (deps.has(fieldName)) {
        dependents.push(propertyName);
      }
    });

    return dependents;
  }

  // Extract dependencies from display options
  extractDependencies(propertyName: string, displayOptions: EnhancedDisplayOptions): void {
    const dependencies = new Set&lt;string&gt;();

    // Extract from show/hide conditions
    if (displayOptions.show) {
      Object.keys(displayOptions.show).forEach((field) =&gt; dependencies.add(field));
    }

    if (displayOptions.hide) {
      Object.keys(displayOptions.hide).forEach((field) =&gt; dependencies.add(field));
    }

    // Extract from advanced conditions
    if (displayOptions.showIf) {
      displayOptions.showIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    if (displayOptions.hideIf) {
      displayOptions.hideIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    // Extract from nested conditions
    if (displayOptions.conditions) {
      displayOptions.conditions.rules.forEach((rule) =&gt; dependencies.add(rule.field));
    }

    // Extract from resource dependencies
    if (displayOptions.resourceDependent) {
      dependencies.add(displayOptions.resourceDependent.resource);
    }

    if (dependencies.size &gt; 0) {
      this.registerDependency(propertyName, Array.from(dependencies));
    }
  }
}

// Main Conditional Property Renderer Component
export const ConditionalPropertyRenderer: React.FC&lt;ConditionalPropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  nodeValues,
  disabled = false,
  context,
}) =&gt; {
  // Memoize the evaluator to prevent unnecessary re-computations
  const evaluator = useMemo(() =&gt; new DisplayOptionsEvaluator(nodeValues), [nodeValues]);

  // Evaluate display conditions
  const displayState = useMemo(() =&gt; {
    if (!property.displayOptions) {
      return {
        visible: true,
        disabled: false,
        required: property.required || false,
      };
    }

    const result = evaluator.evaluateDisplayOptions(property.displayOptions);
    return {
      ...result,
      required: result.required || property.required || false,
    };
  }, [property.displayOptions, property.required, evaluator]);

  // Handle property change with dependency tracking
  const handleChange = useCallback(
    (newValue: any) =&gt; {
      onChange(newValue);

      // Trigger re-evaluation of dependent properties
      // This would be handled by the parent form component
    },
    [onChange]
  );

  // Don't render if not visible
  if (!displayState.visible) {
    return null;
  }

  // Render with conditional state
  return (
    &lt;div className={`property-field ${displayState.disabled ? 'opacity-50' : ''}`}&gt;
      &lt;PropertyRenderer
        property={{
          ...property,
          required: displayState.required,
        }}
        value={value}
        onChange={handleChange}
        disabled={disabled || displayState.disabled}
        context={context}
        nodeValues={nodeValues}
      /&gt;
    &lt;/div&gt;
  );
};

// Property Group Renderer with Conditional Logic
export interface PropertyGroupRendererProps {
  properties: Array&lt;INodeProperty &amp; { displayOptions?: EnhancedDisplayOptions }&gt;;
  values: Record&lt;string, any&gt;;
  onChange: (field: string, value: any) =&gt; void;
  evaluationContext?: any;
  disabled?: boolean;
  context?: any;
}

export const PropertyGroupRenderer: React.FC&lt;PropertyGroupRendererProps&gt; = ({
  properties,
  values,
  onChange,
  disabled = false,
  context,
}) =&gt; {
  // Dependency tracker
  const dependencyTracker = useMemo(() =&gt; {
    const tracker = new PropertyDependencyTracker();

    // Register all dependencies
    properties.forEach((property) =&gt; {
      if (property.displayOptions) {
        tracker.extractDependencies(property.name, property.displayOptions);
      }
    });

    return tracker;
  }, [properties]);

  // Handle field changes with dependency re-evaluation
  const handleFieldChange = useCallback(
    (fieldName: string, value: any) =&gt; {
      onChange(fieldName, value);

      // Find and trigger re-evaluation of dependent properties
      const dependentProperties = dependencyTracker.getDependents(fieldName);
      if (dependentProperties.length &gt; 0) {
        // The parent component should handle this by updating its state
      }
    },
    [onChange, dependencyTracker]
  );

  return (
    &lt;div className=&quot;property-group space-y-4&quot;&gt;
      {properties.map((property) =&gt; (
        &lt;ConditionalPropertyRenderer
          key={property.name}
          property={property}
          value={values[property.name]}
          onChange={(value) =&gt; handleFieldChange(property.name, value)}
          nodeValues={values}
          disabled={disabled}
          context={context}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Export utility functions for external use
export const displayOptionsUtils = {
  evaluateDisplayOptions: (
    displayOptions: EnhancedDisplayOptions,
    nodeValues: Record&lt;string, any&gt;
  ) =&gt; {
    const evaluator = new DisplayOptionsEvaluator(nodeValues);
    return evaluator.evaluateDisplayOptions(displayOptions);
  },

  extractDependencies: (displayOptions: EnhancedDisplayOptions): string[] =&gt; {
    const dependencies = new Set&lt;string&gt;();

    if (displayOptions.show) {
      Object.keys(displayOptions.show).forEach((field) =&gt; dependencies.add(field));
    }

    if (displayOptions.hide) {
      Object.keys(displayOptions.hide).forEach((field) =&gt; dependencies.add(field));
    }

    if (displayOptions.showIf) {
      displayOptions.showIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    if (displayOptions.hideIf) {
      displayOptions.hideIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    if (displayOptions.conditions) {
      displayOptions.conditions.rules.forEach((rule) =&gt; dependencies.add(rule.field));
    }

    return Array.from(dependencies);
  },
};

export { DisplayOptionsEvaluator, PropertyDependencyTracker };

export default ConditionalPropertyRenderer;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/bodies/DatabaseNodeBody.tsx (Line 43:2 - Line 91:20), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 56:2 - Line 101:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn255" onclick="toggleCodeBlock('cloneGroup255', 'expandBtn255', 'collapseBtn255')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn255" onclick="toggleCodeBlock('cloneGroup255', 'expandBtn255', 'collapseBtn255')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup255"><code class="language-tsx text-sm text-gray-800">;

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-blue-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-blue-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* Database Icon */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 1:1 - Line 18:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 1:1 - Line 18:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn258" onclick="toggleCodeBlock('cloneGroup258', 'expandBtn258', 'collapseBtn258')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn258" onclick="toggleCodeBlock('cloneGroup258', 'expandBtn258', 'collapseBtn258')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup258"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { useRef, useState } from 'react';
import { Handle, Position } from 'reactflow';
import NodeToolbar from '../components/WorkflowEditor/NodeTypes/BaseNode/NodeToolbar';
import { useSmartMenuPosition } from '../hooks/useSmartMenuPosition';
import { useEnter } from './hooks/useEnter';
import { useEvent } from './hooks/useEvent';
import { useLeave } from './hooks/useLeave';
import { useRef } from './hooks/useRef';
import { useSmartMenuPosition } from './hooks/useSmartMenuPosition';
import { useState } from './hooks/useState';
import type { CustomNodeBodyProps } from './nodeUiRegistry';
import { NodeIcon, NodeLabel, StatusBadge } from './shared';

/**
 * Custom AI Agent Node Body Component
 * Gmail-style UI with AI-specific features and handles
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 34:3 - Line 49:18), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 40:3 - Line 47:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn259" onclick="toggleCodeBlock('cloneGroup259', 'expandBtn259', 'collapseBtn259')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn259" onclick="toggleCodeBlock('cloneGroup259', 'expandBtn259', 'collapseBtn259')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup259"><code class="language-tsx text-sm text-gray-800">// Menu state for NodeToolbar
  const [showLocalMenu, setShowLocalMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showLocalMenu,
    triggerRef: menuTriggerRef,
    menuRef: menuRef,
    offset: 4,
    onClose: () =&gt; setShowLocalMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook

  const handleDoubleClick</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 42:2 - Line 69:28), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 48:5 - Line 75:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn260" onclick="toggleCodeBlock('cloneGroup260', 'expandBtn260', 'collapseBtn260')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn260" onclick="toggleCodeBlock('cloneGroup260', 'expandBtn260', 'collapseBtn260')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup260"><code class="language-tsx text-sm text-gray-800">menuRef,
    offset: 4,
    onClose: () =&gt; setShowLocalMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Standard Input Handle */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 141:13 - Line 213:19), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/gmailnodebody/GmailNodeBody.tsx (Line 119:13 - Line 191:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn261" onclick="toggleCodeBlock('cloneGroup261', 'expandBtn261', 'collapseBtn261')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn261" onclick="toggleCodeBlock('cloneGroup261', 'expandBtn261', 'collapseBtn261')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup261"><code class="language-tsx text-sm text-gray-800">{/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badge */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/WorkflowTester.tsx (Line 1:1 - Line 401:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/workflowtester/WorkflowTester.tsx (Line 3:1 - Line 403:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn263" onclick="toggleCodeBlock('cloneGroup263', 'expandBtn263', 'collapseBtn263')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn263" onclick="toggleCodeBlock('cloneGroup263', 'expandBtn263', 'collapseBtn263')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup263"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */
// Workflow Tester Component - Test workflows before execution

import {
  BugOutlined,
  CheckCircleOutlined,
  ExclamationCircleOutlined,
  PlayCircleOutlined,
} from '@ant-design/icons';
import { Alert, Button, Card, Form, Input, Modal, Space, Spin, Steps, Tag, Timeline } from 'antd';
import type React from 'react';
import { useState } from 'react';
import { WorkflowApiService } from '@/core';

const workflowApiService = new WorkflowApiService();

import type { Edge, Node } from 'reactflow';
import { useExecutionMonitor } from '@/app/services/executionMonitor';
import type { WorkflowExecution } from '@/core/types/execution';
import { exportWorkflowToBackend } from '@/core/utils/workflowExporter';

const { TextArea } = Input;
const { Step } = Steps;

export const WorkflowTester: React.FC&lt;{
  nodes: Node[];
  edges: Edge[];
  onClose: () =&gt; void;
}&gt; = ({ nodes, edges, onClose }) =&gt; {
  const [testResult, setTestResult] = useState&lt;any&gt;(null);
  const [testing, setTesting] = useState(false);
  const [executionId, setExecutionId] = useState&lt;string | null&gt;(null);
  const [triggerData, setTriggerData] = useState('');
  const [testMode, setTestMode] = useState&lt;'validate' | 'dry_run' | 'full_test'&gt;('validate');

  const { execution, isConnected } = useExecutionMonitor(executionId);

  const runTest = async () =&gt; {
    setTesting(true);
    setTestResult(null);

    try {
      const workflowJson = exportWorkflowToBackend(nodes, edges);

      if (testMode === 'validate') {
        // Just validate the workflow structure
        // Convert BackendWorkflow to WorkflowDefinition format
        const workflowDefinition = {
          name: `Test Workflow ${Date.now()}`,
          version: 1,
          nodes: workflowJson.nodes.map((node) =&gt; ({
            id: node.id,
            type: node.type,
            position: { x: node.position[0], y: node.position[1] },
            data: {
              label: node.name,
              parameters: node.parameters,
              credentials:
                typeof node.credentials === 'object' &amp;&amp; node.credentials
                  ? Object.keys(node.credentials)[0] || undefined
                  : (node.credentials as string | undefined),
              disabled: node.disabled,
              notes: node.notes,
            },
          })),
          edges: [], // Convert connections to edges if needed
          tags: ['test'],
          isActive: true,
        };
        const result = await workflowApiService.testWorkflow(workflowDefinition);
        setTestResult({
          type: 'validation',
          ...result,
        });
      } else if (testMode === 'dry_run') {
        // Dry run - validate and simulate execution
        // Convert BackendWorkflow to WorkflowDefinition format
        const workflowDefinition = {
          name: `Test Workflow ${Date.now()}`,
          version: 1,
          nodes: workflowJson.nodes.map((node) =&gt; ({
            id: node.id,
            type: node.type,
            position: { x: node.position[0], y: node.position[1] },
            data: {
              label: node.name,
              parameters: node.parameters,
              credentials:
                typeof node.credentials === 'object' &amp;&amp; node.credentials
                  ? Object.keys(node.credentials)[0] || undefined
                  : (node.credentials as string | undefined),
              disabled: node.disabled,
              notes: node.notes,
            },
          })),
          edges: [], // Convert connections to edges if needed
          tags: ['test'],
          isActive: true,
        };
        const result = await workflowApiService.testWorkflow(workflowDefinition);
        setTestResult({
          type: 'dry_run',
          ...result,
        });
      } else {
        // Full test execution
        const triggerPayload = triggerData ? JSON.parse(triggerData) : undefined;
        const result = await workflowApiService.executeWorkflow({
          workflow: workflowJson,
          triggerData: triggerPayload,
          options: {
            timeout: 300000, // 5 minutes
          },
        });

        setExecutionId(result.id);
        setTestResult({
          type: 'full_execution',
          execution: result,
        });
      }
    } catch (error: any) {
      setTestResult({
        type: 'error',
        error: error.message || 'Test execution failed',
      });
    } finally {
      setTesting(false);
    }
  };

  const stopTest = async () =&gt; {
    if (executionId) {
      try {
        await workflowApiService.stopExecution(executionId);
      } catch (_error) {}
    }
  };

  const renderValidationResult = (result: any) =&gt; (
    &lt;div&gt;
      &lt;Alert
        type={result.isValid ? 'success' : 'error'}
        message={result.isValid ? 'Workflow is valid' : 'Workflow validation failed'}
        description={
          &lt;div&gt;
            {result.errors.length &gt; 0 &amp;&amp; (
              &lt;div className=&quot;mb-2&quot;&gt;
                &lt;strong&gt;Errors:&lt;/strong&gt;
                &lt;ul className=&quot;mt-1&quot;&gt;
                  {result.errors.map((error: string, index: number) =&gt; (
                    &lt;li key={index} className=&quot;text-red-600&quot;&gt;
                      • {error}
                    &lt;/li&gt;
                  ))}
                &lt;/ul&gt;
              &lt;/div&gt;
            )}
            {result.warnings.length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;strong&gt;Warnings:&lt;/strong&gt;
                &lt;ul className=&quot;mt-1&quot;&gt;
                  {result.warnings.map((warning: string, index: number) =&gt; (
                    &lt;li key={index} className=&quot;text-orange-600&quot;&gt;
                      • {warning}
                    &lt;/li&gt;
                  ))}
                &lt;/ul&gt;
              &lt;/div&gt;
            )}
            {result.estimatedDuration &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;strong&gt;Estimated Duration:&lt;/strong&gt; {Math.round(result.estimatedDuration / 1000)}s
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        }
      /&gt;
    &lt;/div&gt;
  );

  const renderExecutionResult = (exec: WorkflowExecution) =&gt; (
    &lt;div&gt;
      &lt;div className=&quot;mb-4&quot;&gt;
        &lt;Alert
          type={
            exec.status === 'completed' ? 'success' : exec.status === 'failed' ? 'error' : 'info'
          }
          message={`Execution ${exec.status}`}
          description={
            &lt;div&gt;
              &lt;div&gt;
                Started: {exec.startedAt ? new Date(exec.startedAt).toLocaleString() : 'N/A'}
              &lt;/div&gt;
              {exec.completedAt &amp;&amp; (
                &lt;div&gt;Completed: {new Date(exec.completedAt).toLocaleString()}&lt;/div&gt;
              )}
              {exec.duration &amp;&amp; &lt;div&gt;Duration: {Math.round(exec.duration / 1000)}s&lt;/div&gt;}
              &lt;div&gt;
                Progress: {exec.progress?.completedNodes?.length || 0} /{' '}
                {exec.progress?.totalNodes || 0} nodes
              &lt;/div&gt;
            &lt;/div&gt;
          }
        /&gt;
      &lt;/div&gt;

      &lt;Card title=&quot;Node Execution Timeline&quot; size=&quot;small&quot;&gt;
        &lt;Timeline&gt;
          {exec.results?.map((result) =&gt; (
            &lt;Timeline.Item
              key={result.nodeId}
              color={
                result.status === 'success' ? 'green' : result.status === 'error' ? 'red' : 'gray'
              }
              dot={
                result.status === 'success' ? (
                  &lt;CheckCircleOutlined /&gt;
                ) : result.status === 'error' ? (
                  &lt;ExclamationCircleOutlined /&gt;
                ) : undefined
              }
            &gt;
              &lt;div&gt;
                &lt;Space&gt;
                  &lt;strong&gt;{result.nodeName}&lt;/strong&gt;
                  &lt;Tag color={result.status === 'success' ? 'green' : 'red'}&gt;{result.status}&lt;/Tag&gt;
                  &lt;span className=&quot;text-gray-500&quot;&gt;{Math.round(result.duration)}ms&lt;/span&gt;
                &lt;/Space&gt;

                {result.error &amp;&amp; &lt;div className=&quot;text-red-500 text-sm mt-1&quot;&gt;{result.error}&lt;/div&gt;}

                {result.output &amp;&amp; Object.keys(result.output).length &gt; 0 &amp;&amp; (
                  &lt;details className=&quot;mt-1&quot;&gt;
                    &lt;summary className=&quot;text-blue-500 cursor-pointer text-sm&quot;&gt;
                      View Output ({Object.keys(result.output).length} fields)
                    &lt;/summary&gt;
                    &lt;pre className=&quot;bg-gray-100 p-2 rounded mt-1 text-xs overflow-auto max-h-32&quot;&gt;
                      {JSON.stringify(result.output, null, 2)}
                    &lt;/pre&gt;
                  &lt;/details&gt;
                )}
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          ))}

          {exec.progress?.currentNodeId &amp;&amp; exec.status === 'running' &amp;&amp; (
            &lt;Timeline.Item color=&quot;blue&quot; dot={&lt;Spin size=&quot;small&quot; /&gt;}&gt;
              &lt;div&gt;
                &lt;strong&gt;Currently executing...&lt;/strong&gt;
                &lt;div className=&quot;text-gray-500 text-sm&quot;&gt;Node: {exec.progress?.currentNodeId}&lt;/div&gt;
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          )}
        &lt;/Timeline&gt;
      &lt;/Card&gt;

      {exec.error &amp;&amp; (
        &lt;Card title=&quot;Execution Error&quot; className=&quot;mt-4 border-red-200&quot;&gt;
          &lt;Alert
            type=&quot;error&quot;
            message={exec.error.message}
            description={
              &lt;div&gt;
                {exec.error.nodeId &amp;&amp; (
                  &lt;div&gt;
                    Failed at node: &lt;code&gt;{exec.error.nodeId}&lt;/code&gt;
                  &lt;/div&gt;
                )}
                {exec.error.code &amp;&amp; (
                  &lt;div&gt;
                    Error code: &lt;code&gt;{exec.error.code}&lt;/code&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            }
          /&gt;
        &lt;/Card&gt;
      )}
    &lt;/div&gt;
  );

  const currentExecution = execution || testResult?.execution;

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;BugOutlined /&gt;
          Workflow Tester
          {!isConnected &amp;&amp; executionId &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;Disconnected&lt;/Tag&gt;}
        &lt;/Space&gt;
      }
      open={true}
      onCancel={onClose}
      width={800}
      footer={[
        &lt;Button key=&quot;close&quot; onClick={onClose}&gt;
          Close
        &lt;/Button&gt;,
        currentExecution?.status === 'running' ? (
          &lt;Button key=&quot;stop&quot; danger onClick={stopTest}&gt;
            Stop Test
          &lt;/Button&gt;
        ) : (
          &lt;Button
            key=&quot;test&quot;
            type=&quot;primary&quot;
            icon={&lt;PlayCircleOutlined /&gt;}
            loading={testing}
            onClick={runTest}
          &gt;
            Run Test
          &lt;/Button&gt;
        ),
      ]}
    &gt;
      &lt;div className=&quot;workflow-tester&quot;&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
          &lt;Steps
            current={testMode === 'validate' ? 0 : testMode === 'dry_run' ? 1 : 2}
            size=&quot;small&quot;
          &gt;
            &lt;Step
              title=&quot;Validate&quot;
              description=&quot;Check workflow structure&quot;
              onClick={() =&gt; setTestMode('validate')}
              style={{ cursor: 'pointer' }}
            /&gt;
            &lt;Step
              title=&quot;Dry Run&quot;
              description=&quot;Simulate execution&quot;
              onClick={() =&gt; setTestMode('dry_run')}
              style={{ cursor: 'pointer' }}
            /&gt;
            &lt;Step
              title=&quot;Full Test&quot;
              description=&quot;Real execution&quot;
              onClick={() =&gt; setTestMode('full_test')}
              style={{ cursor: 'pointer' }}
            /&gt;
          &lt;/Steps&gt;
        &lt;/div&gt;

        {testMode === 'full_test' &amp;&amp; (
          &lt;Card title=&quot;Test Configuration&quot; size=&quot;small&quot; className=&quot;mb-4&quot;&gt;
            &lt;Form layout=&quot;vertical&quot;&gt;
              &lt;Form.Item
                label=&quot;Trigger Data (JSON)&quot;
                help=&quot;Optional test data to trigger the workflow&quot;
              &gt;
                &lt;TextArea
                  rows={4}
                  placeholder={`{
  &quot;subject&quot;: &quot;Test email&quot;,
  &quot;from&quot;: &quot;test@example.com&quot;,
  &quot;body&quot;: &quot;This is a test customer support email about my order status.&quot;
}`}
                  value={triggerData}
                  onChange={(e) =&gt; setTriggerData(e.target.value)}
                /&gt;
              &lt;/Form.Item&gt;
            &lt;/Form&gt;
          &lt;/Card&gt;
        )}

        &lt;Card title=&quot;Test Results&quot; size=&quot;small&quot; extra={testing &amp;&amp; &lt;Spin size=&quot;small&quot; /&gt;}&gt;
          {!testResult &amp;&amp; !testing &amp;&amp; (
            &lt;div className=&quot;text-gray-500 text-center py-8&quot;&gt;
              Configure your test settings and click &quot;Run Test&quot; to begin
            &lt;/div&gt;
          )}

          {testing &amp;&amp; (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;Spin size=&quot;large&quot; /&gt;
              &lt;div className=&quot;mt-2&quot;&gt;
                {testMode === 'validate'
                  ? 'Validating workflow...'
                  : testMode === 'dry_run'
                    ? 'Running simulation...'
                    : 'Executing workflow...'}
              &lt;/div&gt;
            &lt;/div&gt;
          )}

          {testResult &amp;&amp; testResult.type === 'error' &amp;&amp; (
            &lt;Alert type=&quot;error&quot; message=&quot;Test Failed&quot; description={testResult.error} /&gt;
          )}

          {testResult &amp;&amp;
            (testResult.type === 'validation' || testResult.type === 'dry_run') &amp;&amp;
            renderValidationResult(testResult)}

          {(testResult?.type === 'full_execution' || currentExecution) &amp;&amp;
            renderExecutionResult(currentExecution)}
        &lt;/Card&gt;
      &lt;/div&gt;
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/WorkflowTemplatesPanel.tsx (Line 1:1 - Line 680:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/workflowtemplatespanel/WorkflowTemplatesPanel.tsx (Line 4:1 - Line 683:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn265" onclick="toggleCodeBlock('cloneGroup265', 'expandBtn265', 'collapseBtn265')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn265" onclick="toggleCodeBlock('cloneGroup265', 'expandBtn265', 'collapseBtn265')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup265"><code class="language-tsx text-sm text-gray-800">/**
 * Workflow Templates Panel
 *
 * Template library browser with categories, search, favorites,
 * and quick workflow creation from pre-built templates.
 */

import {
  AppstoreOutlined,
  BranchesOutlined,
  ClockCircleOutlined,
  DownloadOutlined,
  EyeOutlined,
  HeartFilled,
  HeartOutlined,
  InfoCircleOutlined,
  OrderedListOutlined,
  StarOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Avatar,
  Button,
  Card,
  Col,
  Empty,
  Input,
  List,
  Modal,
  message,
  Progress,
  Rate,
  Row,
  Select,
  Space,
  Statistic,
  Tabs,
  Tag,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  type AutomationPattern,
  type TemplateCategory,
  type WorkflowTemplate,
  workflowTemplates,
} from '@/core/services/workflowTemplates';
import { useLeanWorkflowStore } from '@/core/stores/leanWorkflowStore';
import { colors } from '@/design-system/tokens';
import { cn } from '@/design-system/utils';

const { TabPane } = Tabs;
const { Option } = Select;
const { Search } = Input;
const { Text, Title, Paragraph } = Typography;
const { Meta } = Card;

interface WorkflowTemplatesPanelProps {
  visible: boolean;
  onClose: () =&gt; void;
  onCreateFromTemplate: (templateId: string, variables?: Record&lt;string, any&gt;) =&gt; void;
}

export const WorkflowTemplatesPanel: React.FC&lt;WorkflowTemplatesPanelProps&gt; = ({
  visible,
  onClose,
  onCreateFromTemplate,
}) =&gt; {
  const { importWorkflow } = useLeanWorkflowStore();
  const [templates, setTemplates] = useState&lt;WorkflowTemplate[]&gt;([]);
  const [patterns, setPatterns] = useState&lt;AutomationPattern[]&gt;([]);
  const [filteredTemplates, setFilteredTemplates] = useState&lt;WorkflowTemplate[]&gt;([]);
  const [selectedCategory, setSelectedCategory] = useState&lt;TemplateCategory | 'all'&gt;('all');
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedTemplate, setSelectedTemplate] = useState&lt;WorkflowTemplate | null&gt;(null);
  const [templateModalVisible, setTemplateModalVisible] = useState(false);
  const [activeTab, setActiveTab] = useState('browse');
  const [viewMode, setViewMode] = useState&lt;'grid' | 'list'&gt;('grid');
  const [sortBy, setSortBy] = useState&lt;'name' | 'rating' | 'usage' | 'recent'&gt;('rating');

  useEffect(() =&gt; {
    if (visible) {
      loadTemplatesAndPatterns();
    }
  }, [visible, loadTemplatesAndPatterns]);

  useEffect(() =&gt; {
    filterTemplates();
  }, [filterTemplates]);

  const loadTemplatesAndPatterns = () =&gt; {
    const allTemplates = workflowTemplates.getAllTemplates();
    const allPatterns = workflowTemplates.getAutomationPatterns();

    setTemplates(allTemplates);
    setPatterns(allPatterns);
  };

  const filterTemplates = () =&gt; {
    let filtered = [...templates];

    // Category filter
    if (selectedCategory !== 'all') {
      filtered = filtered.filter((template) =&gt; template.category === selectedCategory);
    }

    // Search filter
    if (searchQuery) {
      filtered = workflowTemplates.searchTemplates(searchQuery);
      if (selectedCategory !== 'all') {
        filtered = filtered.filter((template) =&gt; template.category === selectedCategory);
      }
    }

    // Sort
    filtered.sort((a, b) =&gt; {
      switch (sortBy) {
        case 'name':
          return a.name.localeCompare(b.name);
        case 'rating':
          return b.metadata.rating - a.metadata.rating;
        case 'usage':
          return b.metadata.usageCount - a.metadata.usageCount;
        case 'recent':
          return (
            new Date(b.metadata.updatedAt).getTime() - new Date(a.metadata.updatedAt).getTime()
          );
        default:
          return 0;
      }
    });

    setFilteredTemplates(filtered);
  };

  const handleCreateFromTemplate = async (template: WorkflowTemplate) =&gt; {
    try {
      const result = workflowTemplates.createWorkflowFromTemplate(template.id);
      if (result) {
        importWorkflow({
          id: `template_${template.id}_${Date.now()}`,
          name: template.name,
          description: template.description,
          nodes: result.nodes,
          connections: {},
        } as any);
        onCreateFromTemplate(template.id);
        message.success(`Created workflow from &quot;${template.name}&quot; template`);
        onClose();
      }
    } catch (_error) {
      message.error('Failed to create workflow from template');
    }
  };

  const handleToggleFavorite = (templateId: string) =&gt; {
    const favorites = workflowTemplates.getFavoriteTemplates();
    const isFavorite = favorites.some((t) =&gt; t.id === templateId);

    if (isFavorite) {
      workflowTemplates.removeFromFavorites(templateId);
      message.success('Removed from favorites');
    } else {
      workflowTemplates.addToFavorites(templateId);
      message.success('Added to favorites');
    }

    loadTemplatesAndPatterns(); // Refresh to update favorites
  };

  const getCategoryIcon = (category: TemplateCategory) =&gt; {
    const iconMap = {
      communication: '💬',
      'data-processing': '📊',
      automation: '🤖',
      'ai-ml': '🧠',
      business: '💼',
      development: '⚙️',
      monitoring: '📈',
      integration: '🔗',
      'social-media': '📱',
      ecommerce: '🛒',
    };
    return iconMap[category] || '📄';
  };

  const getDifficultyColor = (difficulty: string) =&gt; {
    switch (difficulty) {
      case 'beginner':
        return 'green';
      case 'intermediate':
        return 'orange';
      case 'advanced':
        return 'red';
      default:
        return 'default';
    }
  };

  const renderTemplateCard = (template: WorkflowTemplate) =&gt; {
    const favorites = workflowTemplates.getFavoriteTemplates();
    const isFavorite = favorites.some((t) =&gt; t.id === template.id);

    if (viewMode === 'list') {
      return (
        &lt;List.Item
          key={template.id}
          actions={[
            &lt;Button
              type=&quot;link&quot;
              icon={isFavorite ? &lt;HeartFilled /&gt; : &lt;HeartOutlined /&gt;}
              onClick={() =&gt; handleToggleFavorite(template.id)}
              style={{ color: isFavorite ? colors.error[500] : undefined }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedTemplate(template);
                setTemplateModalVisible(true);
              }}
            &gt;
              Preview
            &lt;/Button&gt;,
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;DownloadOutlined /&gt;}
              onClick={() =&gt; handleCreateFromTemplate(template)}
            &gt;
              Use Template
            &lt;/Button&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            avatar={&lt;Avatar&gt;{getCategoryIcon(template.category)}&lt;/Avatar&gt;}
            title={
              &lt;Space&gt;
                {template.name}
                &lt;Tag color={getDifficultyColor(template.difficulty)}&gt;{template.difficulty}&lt;/Tag&gt;
                &lt;Rate disabled defaultValue={template.metadata.rating} /&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {template.description}
                &lt;Space&gt;
                  &lt;Tag&gt;{template.category}&lt;/Tag&gt;
                  &lt;Text type=&quot;secondary&quot;&gt;
                    &lt;ClockCircleOutlined /&gt; {template.estimatedSetupTime} min
                  &lt;/Text&gt;
                  &lt;Text type=&quot;secondary&quot;&gt;
                    &lt;EyeOutlined /&gt; {template.metadata.usageCount} uses
                  &lt;/Text&gt;
                &lt;/Space&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      );
    }

    return (
      &lt;Card
        key={template.id}
        hoverable
        className=&quot;template-card&quot;
        cover={
          &lt;div className=&quot;h-32 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center text-4xl&quot;&gt;
            {getCategoryIcon(template.category)}
          &lt;/div&gt;
        }
        actions={[
          &lt;Button
            type=&quot;link&quot;
            icon={isFavorite ? &lt;HeartFilled /&gt; : &lt;HeartOutlined /&gt;}
            onClick={() =&gt; handleToggleFavorite(template.id)}
            style={{ color: isFavorite ? colors.error[500] : undefined }}
          /&gt;,
          &lt;Button
            type=&quot;link&quot;
            icon={&lt;EyeOutlined /&gt;}
            onClick={() =&gt; {
              setSelectedTemplate(template);
              setTemplateModalVisible(true);
            }}
          /&gt;,
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;DownloadOutlined /&gt;}
            onClick={() =&gt; handleCreateFromTemplate(template)}
          /&gt;,
        ]}
      &gt;
        &lt;Meta
          title={
            &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
              &lt;Text strong&gt;{template.name}&lt;/Text&gt;
              &lt;Space&gt;
                &lt;Tag color={getDifficultyColor(template.difficulty)}&gt;{template.difficulty}&lt;/Tag&gt;
                &lt;Rate disabled defaultValue={template.metadata.rating} /&gt;
              &lt;/Space&gt;
            &lt;/Space&gt;
          }
          description={
            &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
              &lt;Text ellipsis={{ tooltip: template.description }}&gt;{template.description}&lt;/Text&gt;
              &lt;Space&gt;
                &lt;Text type=&quot;secondary&quot;&gt;
                  &lt;ClockCircleOutlined /&gt; {template.estimatedSetupTime} min
                &lt;/Text&gt;
                &lt;Text type=&quot;secondary&quot;&gt;
                  &lt;EyeOutlined /&gt; {template.metadata.usageCount}
                &lt;/Text&gt;
              &lt;/Space&gt;
            &lt;/Space&gt;
          }
        /&gt;
      &lt;/Card&gt;
    );
  };

  const renderTemplateModal = () =&gt; {
    if (!selectedTemplate) return null;

    return (
      &lt;Modal
        title={selectedTemplate.name}
        open={templateModalVisible}
        onCancel={() =&gt; setTemplateModalVisible(false)}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={() =&gt; setTemplateModalVisible(false)}&gt;
            Close
          &lt;/Button&gt;,
          &lt;Button
            key=&quot;use&quot;
            type=&quot;primary&quot;
            icon={&lt;DownloadOutlined /&gt;}
            onClick={() =&gt; {
              handleCreateFromTemplate(selectedTemplate);
              setTemplateModalVisible(false);
            }}
          &gt;
            Use This Template
          &lt;/Button&gt;,
        ]}
        width={800}
      &gt;
        &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
          &lt;div&gt;
            &lt;Paragraph&gt;{selectedTemplate.description}&lt;/Paragraph&gt;
            &lt;Space wrap&gt;
              {selectedTemplate.tags.map((tag) =&gt; (
                &lt;Tag key={tag}&gt;{tag}&lt;/Tag&gt;
              ))}
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;Row gutter={16}&gt;
            &lt;Col span={8}&gt;
              &lt;Statistic
                title=&quot;Difficulty&quot;
                value={selectedTemplate.difficulty}
                valueStyle={{
                  color: getDifficultyColor(selectedTemplate.difficulty),
                }}
              /&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Statistic
                title=&quot;Setup Time&quot;
                value={selectedTemplate.estimatedSetupTime}
                suffix=&quot;min&quot;
              /&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Statistic
                title=&quot;Rating&quot;
                value={selectedTemplate.metadata.rating}
                suffix={&lt;StarOutlined /&gt;}
              /&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;div&gt;
            &lt;Title level={5}&gt;Required Integrations&lt;/Title&gt;
            &lt;Space wrap&gt;
              {selectedTemplate.configuration.requiredIntegrations.map((integration) =&gt; (
                &lt;Tag key={integration} color=&quot;blue&quot;&gt;
                  {integration}
                &lt;/Tag&gt;
              ))}
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;div&gt;
            &lt;Title level={5}&gt;Workflow Structure&lt;/Title&gt;
            &lt;Text&gt;
              {selectedTemplate.nodes.length} nodes, {selectedTemplate.edges.length} connections
            &lt;/Text&gt;
            {selectedTemplate.configuration.conditionalBranches &gt; 0 &amp;&amp; (
              &lt;Tag color=&quot;orange&quot; style={{ marginLeft: 8 }}&gt;
                &lt;BranchesOutlined /&gt; {selectedTemplate.configuration.conditionalBranches} branches
              &lt;/Tag&gt;
            )}
            {selectedTemplate.configuration.schedulingRequired &amp;&amp; (
              &lt;Tag color=&quot;purple&quot; style={{ marginLeft: 8 }}&gt;
                &lt;ClockCircleOutlined /&gt; Scheduling
              &lt;/Tag&gt;
            )}
            {selectedTemplate.configuration.triggersRequired &amp;&amp; (
              &lt;Tag color=&quot;green&quot; style={{ marginLeft: 8 }}&gt;
                &lt;ThunderboltOutlined /&gt; Triggers
              &lt;/Tag&gt;
            )}
          &lt;/div&gt;

          &lt;div&gt;
            &lt;Title level={5}&gt;Resource Requirements&lt;/Title&gt;
            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;div&gt;
                &lt;Text&gt;Memory: &lt;/Text&gt;
                &lt;Progress
                  percent={
                    selectedTemplate.configuration.resourceRequirements.memory === 'low'
                      ? 25
                      : selectedTemplate.configuration.resourceRequirements.memory === 'medium'
                        ? 50
                        : 75
                  }
                  size=&quot;small&quot;
                  status=&quot;active&quot;
                /&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text&gt;CPU: &lt;/Text&gt;
                &lt;Progress
                  percent={
                    selectedTemplate.configuration.resourceRequirements.cpu === 'low'
                      ? 25
                      : selectedTemplate.configuration.resourceRequirements.cpu === 'medium'
                        ? 50
                        : 75
                  }
                  size=&quot;small&quot;
                  status=&quot;active&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/Space&gt;
          &lt;/div&gt;

          {selectedTemplate.variables.length &gt; 0 &amp;&amp; (
            &lt;div&gt;
              &lt;Title level={5}&gt;Configuration Variables&lt;/Title&gt;
              &lt;List
                size=&quot;small&quot;
                dataSource={selectedTemplate.variables}
                renderItem={(variable) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      title={`${variable.name} (${variable.type})`}
                      description={variable.description}
                    /&gt;
                    {variable.required &amp;&amp; &lt;Tag color=&quot;red&quot;&gt;Required&lt;/Tag&gt;}
                  &lt;/List.Item&gt;
                )}
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/Space&gt;
      &lt;/Modal&gt;
    );
  };

  const renderPatternsList = () =&gt; (
    &lt;List
      dataSource={patterns}
      renderItem={(pattern) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Button type=&quot;link&quot; icon={&lt;InfoCircleOutlined /&gt;}&gt;
              Learn More
            &lt;/Button&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            avatar={
              &lt;Avatar&gt;
                {pattern.pattern === 'sequential'
                  ? '→'
                  : pattern.pattern === 'parallel'
                    ? '⚡'
                    : '🔀'}
              &lt;/Avatar&gt;
            }
            title={pattern.name}
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {pattern.description}
                &lt;Space&gt;
                  &lt;Tag
                    color={
                      pattern.complexity === 'simple'
                        ? 'green'
                        : pattern.complexity === 'moderate'
                          ? 'orange'
                          : 'red'
                    }
                  &gt;
                    {pattern.complexity}
                  &lt;/Tag&gt;
                  &lt;Text type=&quot;secondary&quot;&gt;Applicable to: {pattern.applicableNodes.join(', ')}&lt;/Text&gt;
                &lt;/Space&gt;
                &lt;div&gt;
                  &lt;Text strong&gt;Benefits: &lt;/Text&gt;
                  {pattern.benefits.map((benefit, index) =&gt; (
                    &lt;Tag key={index} color=&quot;blue&quot;&gt;
                      {benefit}
                    &lt;/Tag&gt;
                  ))}
                &lt;/div&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
    /&gt;
  );

  const categories: Array&lt;{ value: TemplateCategory | 'all'; label: string }&gt; = [
    { value: 'all', label: 'All Categories' },
    { value: 'communication', label: 'Communication' },
    { value: 'data-processing', label: 'Data Processing' },
    { value: 'automation', label: 'Automation' },
    { value: 'ai-ml', label: 'AI &amp; ML' },
    { value: 'business', label: 'Business' },
    { value: 'development', label: 'Development' },
    { value: 'monitoring', label: 'Monitoring' },
    { value: 'integration', label: 'Integration' },
    { value: 'social-media', label: 'Social Media' },
    { value: 'ecommerce', label: 'E-commerce' },
  ];

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;AppstoreOutlined /&gt;
          Workflow Templates
        &lt;/Space&gt;
      }
      open={visible}
      onCancel={onClose}
      width={1200}
      footer={null}
      className={cn('workflow-templates-panel')}
    &gt;
      &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;AppstoreOutlined /&gt;
              Browse Templates ({filteredTemplates.length})
            &lt;/span&gt;
          }
          key=&quot;browse&quot;
        &gt;
          &lt;Space direction=&quot;vertical&quot; size=&quot;middle&quot; style={{ width: '100%' }}&gt;
            {/* Filters and Search */}
            &lt;Row gutter={16} align=&quot;middle&quot;&gt;
              &lt;Col flex=&quot;auto&quot;&gt;
                &lt;Search
                  placeholder=&quot;Search templates...&quot;
                  value={searchQuery}
                  onChange={(e) =&gt; setSearchQuery(e.target.value)}
                  style={{ width: '100%' }}
                /&gt;
              &lt;/Col&gt;
              &lt;Col&gt;
                &lt;Select
                  value={selectedCategory}
                  onChange={setSelectedCategory}
                  style={{ width: 180 }}
                &gt;
                  {categories.map((cat) =&gt; (
                    &lt;Option key={cat.value} value={cat.value}&gt;
                      {cat.label}
                    &lt;/Option&gt;
                  ))}
                &lt;/Select&gt;
              &lt;/Col&gt;
              &lt;Col&gt;
                &lt;Select value={sortBy} onChange={setSortBy} style={{ width: 120 }}&gt;
                  &lt;Option value=&quot;rating&quot;&gt;Rating&lt;/Option&gt;
                  &lt;Option value=&quot;usage&quot;&gt;Usage&lt;/Option&gt;
                  &lt;Option value=&quot;name&quot;&gt;Name&lt;/Option&gt;
                  &lt;Option value=&quot;recent&quot;&gt;Recent&lt;/Option&gt;
                &lt;/Select&gt;
              &lt;/Col&gt;
              &lt;Col&gt;
                &lt;Button.Group&gt;
                  &lt;Button
                    icon={&lt;AppstoreOutlined /&gt;}
                    type={viewMode === 'grid' ? 'primary' : 'default'}
                    onClick={() =&gt; setViewMode('grid')}
                  /&gt;
                  &lt;Button
                    icon={&lt;OrderedListOutlined /&gt;}
                    type={viewMode === 'list' ? 'primary' : 'default'}
                    onClick={() =&gt; setViewMode('list')}
                  /&gt;
                &lt;/Button.Group&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;

            {/* Templates Grid/List */}
            {filteredTemplates.length === 0 ? (
              &lt;Empty description=&quot;No templates found&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
            ) : viewMode === 'grid' ? (
              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;
                {filteredTemplates.map(renderTemplateCard)}
              &lt;/div&gt;
            ) : (
              &lt;List
                dataSource={filteredTemplates}
                renderItem={renderTemplateCard}
                pagination={{
                  pageSize: 10,
                  showSizeChanger: false,
                }}
              /&gt;
            )}
          &lt;/Space&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;HeartOutlined /&gt;
              Favorites ({workflowTemplates.getFavoriteTemplates().length})
            &lt;/span&gt;
          }
          key=&quot;favorites&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;
            {workflowTemplates.getFavoriteTemplates().map(renderTemplateCard)}
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ClockCircleOutlined /&gt;
              Recent
            &lt;/span&gt;
          }
          key=&quot;recent&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;
            {workflowTemplates.getRecentlyUsedTemplates().map(renderTemplateCard)}
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ThunderboltOutlined /&gt;
              Patterns ({patterns.length})
            &lt;/span&gt;
          }
          key=&quot;patterns&quot;
        &gt;
          {renderPatternsList()}
        &lt;/TabPane&gt;
      &lt;/Tabs&gt;

      {renderTemplateModal()}
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/UserPresenceOverlay.tsx (Line 1:1 - Line 308:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/userpresenceoverlay/UserPresenceOverlay.tsx (Line 4:1 - Line 311:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn267" onclick="toggleCodeBlock('cloneGroup267', 'expandBtn267', 'collapseBtn267')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn267" onclick="toggleCodeBlock('cloneGroup267', 'expandBtn267', 'collapseBtn267')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup267"><code class="language-tsx text-sm text-gray-800">/**
 * User Presence Overlay
 *
 * Real-time visualization of user cursors, selections, and viewport indicators.
 * Shows collaborative user activity with smooth animations and clear visual cues.
 */

import { Avatar, Tooltip } from 'antd';
import React, { useCallback } from 'react';
import type { UserPresence } from '../../../core/services/collaborationService';
import { useCollaborationStore } from '../../../core/stores/collaborationStore';
import { useLeanWorkflowStore } from '../../../core/stores/leanWorkflowStore';

interface UserPresenceOverlayProps {
  containerRef: React.RefObject&lt;HTMLDivElement&gt;;
  transform: {
    x: number;
    y: number;
    zoom: number;
  };
}

export const UserPresenceOverlay: React.FC&lt;UserPresenceOverlayProps&gt; = ({
  containerRef,
  transform,
}) =&gt; {
  const { userPresences, showUserCursors, showUserSelections } = useCollaborationStore();

  const { nodes } = useLeanWorkflowStore();

  // Generate consistent user colors
  const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Convert workflow coordinates to screen coordinates
  const workflowToScreen = useCallback(
    (x: number, y: number) =&gt; ({
      x: (x + transform.x) * transform.zoom,
      y: (y + transform.y) * transform.zoom,
    }),
    [transform]
  );

  // Get node position and dimensions
  const getNodeBounds = useCallback(
    (nodeId: string) =&gt; {
      const node = nodes.find((n) =&gt; n.id === nodeId);
      if (!node) return null;

      const screenPos = workflowToScreen(node.position.x, node.position.y);
      return {
        x: screenPos.x,
        y: screenPos.y,
        width: 240 * transform.zoom, // Standard node width
        height: 100 * transform.zoom, // Standard node height
      };
    },
    [nodes, workflowToScreen, transform.zoom]
  );

  // Render user cursor
  const renderUserCursor = useCallback(
    (presence: UserPresence) =&gt; {
      if (!presence.cursor || !showUserCursors) return null;

      const screenPos = workflowToScreen(presence.cursor.x, presence.cursor.y);
      const userColor = getUserColor(presence.userId);

      return (
        &lt;div
          key={`cursor-${presence.userId}`}
          className=&quot;absolute pointer-events-none z-50 transition-all duration-200&quot;
          style={{
            left: screenPos.x,
            top: screenPos.y,
            transform: 'translate(-2px, -2px)',
          }}
        &gt;
          {/* Cursor pointer */}
          &lt;div
            className=&quot;relative&quot;
            style={{
              filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))',
            }}
          &gt;
            &lt;svg width=&quot;16&quot; height=&quot;20&quot; viewBox=&quot;0 0 16 20&quot; fill=&quot;none&quot; className=&quot;cursor-pointer&quot;&gt;
              &lt;path
                d=&quot;M0 0L0 16L4.5 11.5L7 16.5L9.5 15L7 10L12 10L0 0Z&quot;
                fill={userColor}
                stroke=&quot;white&quot;
                strokeWidth=&quot;1&quot;
              /&gt;
            &lt;/svg&gt;

            {/* User label */}
            &lt;div
              className=&quot;absolute top-5 left-4 px-2 py-1 rounded text-xs font-medium text-white whitespace-nowrap&quot;
              style={{
                backgroundColor: userColor,
                boxShadow: '0 2px 8px rgba(0,0,0,0.15)',
              }}
            &gt;
              {presence.user.name}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      );
    },
    [showUserCursors, workflowToScreen, getUserColor]
  );

  // Render user selection highlights
  const renderUserSelections = useCallback(
    (presence: UserPresence) =&gt; {
      if (!presence.selection?.nodeIds || !showUserSelections) return null;

      const userColor = getUserColor(presence.userId);

      return presence.selection.nodeIds
        .map((nodeId) =&gt; {
          const bounds = getNodeBounds(nodeId);
          if (!bounds) return null;

          return (
            &lt;div
              key={`selection-${presence.userId}-${nodeId}`}
              className=&quot;absolute pointer-events-none z-40 transition-all duration-200&quot;
              style={{
                left: bounds.x - 2,
                top: bounds.y - 2,
                width: bounds.width + 4,
                height: bounds.height + 4,
                border: `2px solid ${userColor}`,
                borderRadius: '8px',
                backgroundColor: `${userColor}20`,
                boxShadow: `0 0 0 1px ${userColor}40`,
              }}
            &gt;
              {/* User avatar in corner */}
              &lt;div
                className=&quot;absolute -top-3 -right-3&quot;
                style={{
                  filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.1))',
                }}
              &gt;
                &lt;Tooltip title={`${presence.user.name} selected this node`}&gt;
                  &lt;Avatar
                    size={20}
                    src={presence.user.avatar}
                    style={{
                      backgroundColor: userColor,
                      border: '2px solid white',
                      fontSize: '10px',
                    }}
                  &gt;
                    {presence.user.name.charAt(0).toUpperCase()}
                  &lt;/Avatar&gt;
                &lt;/Tooltip&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          );
        })
        .filter(Boolean);
    },
    [showUserSelections, getNodeBounds, getUserColor]
  );

  // Render viewport indicators (mini rectangles showing what other users see)
  const renderViewportIndicators = useCallback(
    (presence: UserPresence) =&gt; {
      if (!presence.viewport) return null;

      const userColor = getUserColor(presence.userId);
      const viewport = presence.viewport;

      // Calculate the viewport rectangle in screen coordinates
      const viewportWidth = 400; // Approximate viewport width
      const viewportHeight = 300; // Approximate viewport height

      const screenPos = workflowToScreen(viewport.x, viewport.y);

      return (
        &lt;div
          key={`viewport-${presence.userId}`}
          className=&quot;absolute pointer-events-none z-30 transition-all duration-500&quot;
          style={{
            left: screenPos.x,
            top: screenPos.y,
            width: viewportWidth * viewport.zoom * transform.zoom,
            height: viewportHeight * viewport.zoom * transform.zoom,
            border: `1px dashed ${userColor}60`,
            borderRadius: '4px',
          }}
        &gt;
          {/* User label for viewport */}
          &lt;div
            className=&quot;absolute -top-6 left-0 px-2 py-1 rounded text-xs text-white&quot;
            style={{
              backgroundColor: userColor,
              opacity: 0.8,
            }}
          &gt;
            {presence.user.name}'s view
          &lt;/div&gt;
        &lt;/div&gt;
      );
    },
    [workflowToScreen, getUserColor, transform.zoom]
  );

  // Don't render if container is not available
  if (!containerRef.current) return null;

  return (
    &lt;div className=&quot;absolute inset-0 pointer-events-none overflow-hidden&quot;&gt;
      {userPresences.map((presence) =&gt; (
        &lt;React.Fragment key={presence.userId}&gt;
          {renderUserCursor(presence)}
          {renderUserSelections(presence)}
          {renderViewportIndicators(presence)}
        &lt;/React.Fragment&gt;
      ))}

      {/* Connection status indicator */}
      {userPresences.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;absolute top-4 right-4 pointer-events-auto z-50&quot;&gt;
          &lt;div className=&quot;flex items-center space-x-2 bg-white dark:bg-gray-800 px-3 py-2 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700&quot;&gt;
            &lt;div className=&quot;flex -space-x-2&quot;&gt;
              {userPresences.slice(0, 3).map((presence) =&gt; (
                &lt;Avatar
                  key={presence.userId}
                  size={24}
                  src={presence.user.avatar}
                  style={{
                    backgroundColor: getUserColor(presence.userId),
                    border: '2px solid white',
                  }}
                  className=&quot;shadow-sm&quot;
                &gt;
                  {presence.user.name.charAt(0).toUpperCase()}
                &lt;/Avatar&gt;
              ))}
              {userPresences.length &gt; 3 &amp;&amp; (
                &lt;Avatar
                  size={24}
                  style={{
                    backgroundColor: '#f0f0f0',
                    color: '#666',
                    border: '2px solid white',
                  }}
                  className=&quot;shadow-sm&quot;
                &gt;
                  +{userPresences.length - 3}
                &lt;/Avatar&gt;
              )}
            &lt;/div&gt;
            &lt;span className=&quot;text-sm font-medium text-gray-700 dark:text-gray-300&quot;&gt;
              {userPresences.length} other{userPresences.length !== 1 ? 's' : ''} online
            &lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

// CSS styles for smooth cursor animations
export const userPresenceStyles = `
  .cursor-pointer {
    animation: cursor-pulse 2s infinite;
  }

  @keyframes cursor-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  .user-selection-highlight {
    animation: selection-pulse 3s infinite;
  }

  @keyframes selection-pulse {
    0%, 100% {
      box-shadow: 0 0 0 0 currentColor;
    }
    50% {
      box-shadow: 0 0 0 4px currentColor;
    }
  }
`;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/TriggerPanel.tsx (Line 1:1 - Line 985:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 4:1 - Line 988:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn269" onclick="toggleCodeBlock('cloneGroup269', 'expandBtn269', 'collapseBtn269')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn269" onclick="toggleCodeBlock('cloneGroup269', 'expandBtn269', 'collapseBtn269')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup269"><code class="language-tsx text-sm text-gray-800">/**
 * Advanced Trigger Management Panel
 *
 * Comprehensive trigger configuration interface for webhooks, API polling,
 * file monitoring, email triggers, and event-driven workflow execution.
 */

import {
  ApiOutlined,
  CalendarOutlined,
  CheckCircleOutlined,
  CopyOutlined,
  DatabaseOutlined,
  DeleteOutlined,
  EditOutlined,
  EyeOutlined,
  FileTextOutlined,
  GlobalOutlined,
  MailOutlined,
  PlayCircleOutlined,
  SettingOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Collapse,
  Divider,
  Form,
  Input,
  InputNumber,
  List,
  Modal,
  message,
  Progress,
  Select,
  Space,
  Statistic,
  Switch,
  Table,
  Tabs,
  Tag,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  advancedTriggerSystem,
  type TriggerConfiguration,
  type TriggerEvent,
  type TriggerMetrics,
} from '@/core/services/advancedTriggerSystem';
import { colors } from '@/design-system/tokens';
import { cn } from '@/design-system/utils';

const { TabPane } = Tabs;
const { Option } = Select;
const { TextArea } = Input;
const { Text, Paragraph } = Typography;
const { Panel } = Collapse;

interface TriggerPanelProps {
  workflowId: string;
  visible: boolean;
  onClose: () =&gt; void;
}

export const TriggerPanel: React.FC&lt;TriggerPanelProps&gt; = ({ workflowId, visible, onClose }) =&gt; {
  const [triggers, setTriggers] = useState&lt;TriggerConfiguration[]&gt;([]);
  const [recentEvents, setRecentEvents] = useState&lt;TriggerEvent[]&gt;([]);
  const [selectedTrigger, setSelectedTrigger] = useState&lt;TriggerConfiguration | null&gt;(null);
  const [metrics, setMetrics] = useState&lt;TriggerMetrics | null&gt;(null);
  const [activeTab, setActiveTab] = useState('triggers');
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [editingTrigger, setEditingTrigger] = useState&lt;string | null&gt;(null);
  const [testModalVisible, setTestModalVisible] = useState(false);
  const [webhookUrl, setWebhookUrl] = useState('');

  useEffect(() =&gt; {
    if (visible) {
      loadTriggers();
      loadRecentEvents();
    }
  }, [visible, loadRecentEvents, loadTriggers]);

  useEffect(() =&gt; {
    if (selectedTrigger) {
      loadMetrics(selectedTrigger.id);
    }
  }, [selectedTrigger, loadMetrics]);

  const loadTriggers = () =&gt; {
    const allTriggers = advancedTriggerSystem.getAllTriggers();
    const workflowTriggers = allTriggers.filter((t) =&gt; t.workflowId === workflowId);
    setTriggers(workflowTriggers);
  };

  const loadRecentEvents = () =&gt; {
    const allTriggers = advancedTriggerSystem.getAllTriggers();
    const workflowTriggers = allTriggers.filter((t) =&gt; t.workflowId === workflowId);

    const events: TriggerEvent[] = [];
    workflowTriggers.forEach((trigger) =&gt; {
      const triggerEvents = advancedTriggerSystem.getRecentEvents(trigger.id, 50);
      events.push(...triggerEvents);
    });

    // Sort by timestamp descending
    events.sort((a, b) =&gt; new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());
    setRecentEvents(events.slice(0, 100));
  };

  const loadMetrics = (triggerId: string) =&gt; {
    try {
      const triggerMetrics = advancedTriggerSystem.getTriggerMetrics(triggerId);
      setMetrics(triggerMetrics);
    } catch (_error) {}
  };

  const handleCreateTrigger = async (values: any) =&gt; {
    setLoading(true);
    try {
      const triggerConfig = {
        workflowId,
        name: values.name,
        description: values.description,
        enabled: values.enabled ?? true,
        triggerType: values.triggerType,
        configuration: buildTriggerConfiguration(values),
        filters: values.filters || [],
        transformations: values.transformations || [],
        authentication: values.authentication,
        rateLimit: {
          enabled: values.rateLimitEnabled ?? false,
          maxTriggersPerMinute: values.maxTriggersPerMinute ?? 60,
          maxTriggersPerHour: values.maxTriggersPerHour ?? 1000,
          maxTriggersPerDay: values.maxTriggersPerDay ?? 10000,
          burstLimit: values.burstLimit ?? 10,
        },
        retryPolicy: {
          enabled: values.retryEnabled ?? false,
          maxAttempts: values.maxAttempts ?? 3,
          backoffMs: values.backoffMs ?? 1000,
          exponentialBackoff: values.exponentialBackoff ?? true,
        },
        security: {
          allowedIPs: values.allowedIPs?.split(',').map((ip: string) =&gt; ip.trim()) ?? [],
          blockedIPs: values.blockedIPs?.split(',').map((ip: string) =&gt; ip.trim()) ?? [],
          requireHttps: values.requireHttps ?? true,
          validateSignature: values.validateSignature ?? false,
          maxPayloadSize: values.maxPayloadSize ?? 1048576, // 1MB
        },
        metadata: {},
      };

      const created = advancedTriggerSystem.createTrigger(triggerConfig);

      if (created.triggerType === 'webhook') {
        const config = created.configuration as any;
        setWebhookUrl(config.endpoint);
      }

      message.success('Trigger created successfully');
      loadTriggers();
      form.resetFields();
      setEditingTrigger(null);
    } catch (_error) {
      message.error('Failed to create trigger');
    } finally {
      setLoading(false);
    }
  };

  const buildTriggerConfiguration = (values: any) =&gt; {
    switch (values.triggerType) {
      case 'webhook':
        return {
          endpoint: '', // Auto-generated
          methods: values.methods || ['POST'],
          contentTypes: values.contentTypes?.split(',').map((t: string) =&gt; t.trim()) || [
            'application/json',
          ],
          headers: parseKeyValuePairs(values.headers),
          responseTemplate: values.responseTemplate,
          secretKey: values.secretKey,
        };
      case 'http_request':
        return {
          url: values.url,
          method: values.method || 'GET',
          headers: parseKeyValuePairs(values.headers),
          body: values.body,
          pollIntervalMs: values.pollIntervalMs || 300000,
          changeDetection: values.changeDetection || 'hash',
        };
      case 'email':
        return {
          provider: values.provider || 'gmail',
          mailbox: values.mailbox || 'INBOX',
          filters: {
            from: values.fromEmails?.split(',').map((e: string) =&gt; e.trim()),
            subject: values.subjectFilter,
            body: values.bodyFilter,
            hasAttachment: values.hasAttachment,
          },
          markAsRead: values.markAsRead ?? false,
          moveToFolder: values.moveToFolder,
        };
      case 'file_change':
        return {
          path: values.path,
          recursive: values.recursive ?? true,
          events: values.events || ['created', 'modified'],
          patterns: values.patterns?.split(',').map((p: string) =&gt; p.trim()) || ['*'],
          ignorePatterns: values.ignorePatterns?.split(',').map((p: string) =&gt; p.trim()) || [],
          debounceMs: values.debounceMs || 1000,
        };
      case 'database_change':
        return {
          connectionString: values.connectionString,
          database: values.database,
          table: values.table,
          operation: values.operation || 'any',
          columns: values.columns?.split(',').map((c: string) =&gt; c.trim()),
          conditions: parseKeyValuePairs(values.conditions),
          pollIntervalMs: values.pollIntervalMs || 60000,
        };
      case 'api_poll':
        return {
          url: values.url || '',
          method: values.method || 'GET',
          headers: parseKeyValuePairs(values.headers),
          body: values.body,
          pollIntervalMs: values.pollIntervalMs || 300000,
          responseField: values.responseField,
          changeThreshold: values.changeThreshold,
        };
      default:
        // Fallback to webhook config for unknown types
        return {
          endpoint: '',
          methods: ['POST'],
          contentTypes: ['application/json'],
          headers: {},
          responseTemplate: '',
          secretKey: '',
        };
    }
  };

  const parseKeyValuePairs = (input: string): Record&lt;string, string&gt; =&gt; {
    if (!input) return {};

    const pairs: Record&lt;string, string&gt; = {};
    input.split('\n').forEach((line) =&gt; {
      const [key, ...valueParts] = line.split(':');
      if (key &amp;&amp; valueParts.length &gt; 0) {
        pairs[key.trim()] = valueParts.join(':').trim();
      }
    });
    return pairs;
  };

  const handleToggleTrigger = (triggerId: string, enabled: boolean) =&gt; {
    try {
      advancedTriggerSystem.toggleTrigger(triggerId, enabled);
      message.success(`Trigger ${enabled ? 'enabled' : 'disabled'}`);
      loadTriggers();
    } catch (_error) {
      message.error('Failed to toggle trigger');
    }
  };

  const handleDeleteTrigger = (triggerId: string) =&gt; {
    try {
      advancedTriggerSystem.deleteTrigger(triggerId);
      message.success('Trigger deleted');
      loadTriggers();
      if (selectedTrigger?.id === triggerId) {
        setSelectedTrigger(null);
        setMetrics(null);
      }
    } catch (_error) {
      message.error('Failed to delete trigger');
    }
  };

  const handleTestTrigger = async (triggerId: string, testData?: any) =&gt; {
    try {
      await advancedTriggerSystem.testTrigger(triggerId, testData);
      message.success('Trigger test completed');
      loadRecentEvents();
      setTestModalVisible(false);
    } catch (_error) {
      message.error('Trigger test failed');
    }
  };

  const renderTriggerForm = () =&gt; (
    &lt;Form
      form={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateTrigger}
      initialValues={{
        enabled: true,
        triggerType: 'webhook',
        rateLimitEnabled: false,
        retryEnabled: false,
        requireHttps: true,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Trigger Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;API webhook trigger&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Receives webhooks from external API&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;triggerType&quot; label=&quot;Trigger Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;webhook&quot;&gt;
            &lt;Space&gt;
              &lt;GlobalOutlined /&gt;
              Webhook
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;http_request&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              HTTP Request
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;email&quot;&gt;
            &lt;Space&gt;
              &lt;MailOutlined /&gt;
              Email
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;file_change&quot;&gt;
            &lt;Space&gt;
              &lt;FileTextOutlined /&gt;
              File Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;database_change&quot;&gt;
            &lt;Space&gt;
              &lt;DatabaseOutlined /&gt;
              Database Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;api_poll&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              API Polling
            &lt;/Space&gt;
          &lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['triggerType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const triggerType = getFieldValue('triggerType');
          return renderTriggerTypeFields(triggerType);
        }}
      &lt;/Form.Item&gt;

      &lt;Collapse ghost&gt;
        &lt;Panel header=&quot;Advanced Configuration&quot; key=&quot;advanced&quot;&gt;
          {renderAdvancedFields()}
        &lt;/Panel&gt;
      &lt;/Collapse&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingTrigger ? 'Update Trigger' : 'Create Trigger'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingTrigger(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderTriggerTypeFields = (triggerType: string) =&gt; {
    switch (triggerType) {
      case 'webhook':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;methods&quot; label=&quot;HTTP Methods&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select methods&quot;&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
                &lt;Option value=&quot;PATCH&quot;&gt;PATCH&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;contentTypes&quot; label=&quot;Content Types (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;application/json, application/xml&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;secretKey&quot; label=&quot;Secret Key (optional)&quot;&gt;
              &lt;Input.Password placeholder=&quot;For webhook signature validation&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'http_request':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;method&quot; label=&quot;HTTP Method&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeDetection&quot; label=&quot;Change Detection&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;hash&quot;&gt;Content Hash&lt;/Option&gt;
                &lt;Option value=&quot;content&quot;&gt;Full Content&lt;/Option&gt;
                &lt;Option value=&quot;headers&quot;&gt;Headers&lt;/Option&gt;
                &lt;Option value=&quot;size&quot;&gt;Content Size&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'email':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;provider&quot; label=&quot;Email Provider&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;gmail&quot;&gt;Gmail&lt;/Option&gt;
                &lt;Option value=&quot;outlook&quot;&gt;Outlook&lt;/Option&gt;
                &lt;Option value=&quot;imap&quot;&gt;IMAP&lt;/Option&gt;
                &lt;Option value=&quot;exchange&quot;&gt;Exchange&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;mailbox&quot; label=&quot;Mailbox&quot;&gt;
              &lt;Input placeholder=&quot;INBOX&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;fromEmails&quot; label=&quot;From Emails (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;user@example.com, alerts@service.com&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;subjectFilter&quot; label=&quot;Subject Filter&quot;&gt;
              &lt;Input placeholder=&quot;Alert: &quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'file_change':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;path&quot; label=&quot;Path to Monitor&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;/data/uploads&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;recursive&quot; label=&quot;Recursive&quot; valuePropName=&quot;checked&quot;&gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;events&quot; label=&quot;File Events&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select events&quot;&gt;
                &lt;Option value=&quot;created&quot;&gt;Created&lt;/Option&gt;
                &lt;Option value=&quot;modified&quot;&gt;Modified&lt;/Option&gt;
                &lt;Option value=&quot;deleted&quot;&gt;Deleted&lt;/Option&gt;
                &lt;Option value=&quot;moved&quot;&gt;Moved&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;patterns&quot; label=&quot;File Patterns (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;*.pdf, *.docx&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'database_change':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;connectionString&quot;
              label=&quot;Connection String&quot;
              rules={[{ required: true }]}
            &gt;
              &lt;Input.Password placeholder=&quot;mongodb://localhost:27017/mydb&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;database&quot; label=&quot;Database&quot;&gt;
              &lt;Input placeholder=&quot;myapp&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;table&quot; label=&quot;Table/Collection&quot;&gt;
              &lt;Input placeholder=&quot;users&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;operation&quot; label=&quot;Operation&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;insert&quot;&gt;Insert&lt;/Option&gt;
                &lt;Option value=&quot;update&quot;&gt;Update&lt;/Option&gt;
                &lt;Option value=&quot;delete&quot;&gt;Delete&lt;/Option&gt;
                &lt;Option value=&quot;any&quot;&gt;Any&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'api_poll':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;API URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/data&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;responseField&quot; label=&quot;Response Field to Monitor&quot;&gt;
              &lt;Input placeholder=&quot;data.status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeThreshold&quot; label=&quot;Change Threshold (for numbers)&quot;&gt;
              &lt;InputNumber min={0} step={0.1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderAdvancedFields = () =&gt; (
    &lt;Space direction=&quot;vertical&quot; size=&quot;middle&quot; style={{ width: '100%' }}&gt;
      &lt;Divider&gt;Rate Limiting&lt;/Divider&gt;
      &lt;Form.Item name=&quot;rateLimitEnabled&quot; label=&quot;Enable Rate Limiting&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item dependencies={['rateLimitEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('rateLimitEnabled')) return null;
          return (
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;Form.Item name=&quot;maxTriggersPerMinute&quot; label=&quot;Max/Minute&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;maxTriggersPerHour&quot; label=&quot;Max/Hour&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
            &lt;/div&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Security&lt;/Divider&gt;
      &lt;Form.Item name=&quot;requireHttps&quot; label=&quot;Require HTTPS&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;allowedIPs&quot; label=&quot;Allowed IPs (comma-separated)&quot;&gt;
        &lt;Input placeholder=&quot;192.168.1.1, 10.0.0.0/8&quot; /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;maxPayloadSize&quot; label=&quot;Max Payload Size (bytes)&quot;&gt;
        &lt;InputNumber min={1024} placeholder=&quot;1048576&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Headers&lt;/Divider&gt;
      &lt;Form.Item name=&quot;headers&quot; label=&quot;Custom Headers (key:value per line)&quot;&gt;
        &lt;TextArea
          placeholder=&quot;Authorization: Bearer token&amp;#10;Content-Type: application/json&quot;
          rows={3}
        /&gt;
      &lt;/Form.Item&gt;
    &lt;/Space&gt;
  );

  const renderTriggersList = () =&gt; (
    &lt;List
      dataSource={triggers}
      renderItem={(trigger) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={trigger.enabled}
              onChange={(checked) =&gt; handleToggleTrigger(trigger.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedTrigger(trigger);
                setTestModalVisible(true);
              }}
            &gt;
              Test
            &lt;/Button&gt;,
            trigger.triggerType === 'webhook' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={() =&gt; {
                  const config = trigger.configuration as any;
                  navigator.clipboard.writeText(config.endpoint);
                  message.success('Webhook URL copied');
                }}
              &gt;
                Copy URL
              &lt;/Button&gt;
            ),
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingTrigger(trigger.id);
                // Populate form with existing values
                form.setFieldsValue({
                  name: trigger.name,
                  description: trigger.description,
                  enabled: trigger.enabled,
                  triggerType: trigger.triggerType,
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteTrigger(trigger.id)}
            /&gt;,
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {getTriggerIcon(trigger.triggerType)}
                {trigger.name}
                &lt;Tag color={trigger.enabled ? 'green' : 'default'}&gt;{trigger.triggerType}&lt;/Tag&gt;
                &lt;Badge
                  count={trigger.triggerCount}
                  style={{ backgroundColor: colors.primary[500] }}
                /&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {trigger.description}
                &lt;Space&gt;
                  &lt;Badge status={trigger.enabled ? 'success' : 'default'} /&gt;
                  {trigger.enabled ? 'Active' : 'Inactive'}
                  {trigger.lastTriggered &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(trigger.lastTriggered).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
                {trigger.triggerType === 'webhook' &amp;&amp; (
                  &lt;Text code style={{ fontSize: '12px' }}&gt;
                    {(trigger.configuration as any).endpoint}
                  &lt;/Text&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No triggers configured' }}
    /&gt;
  );

  const renderEventsList = () =&gt; (
    &lt;Table
      dataSource={recentEvents}
      size=&quot;small&quot;
      pagination={{ pageSize: 20 }}
      columns={[
        {
          title: 'Time',
          dataIndex: 'timestamp',
          key: 'timestamp',
          width: 150,
          render: (timestamp) =&gt; new Date(timestamp).toLocaleString(),
        },
        {
          title: 'Trigger',
          dataIndex: 'triggerId',
          key: 'triggerId',
          width: 200,
          render: (triggerId) =&gt; {
            const trigger = triggers.find((t) =&gt; t.id === triggerId);
            return trigger ? trigger.name : triggerId;
          },
        },
        {
          title: 'Status',
          dataIndex: 'status',
          key: 'status',
          width: 100,
          render: (status) =&gt; &lt;Tag color={getEventStatusColor(status)}&gt;{status}&lt;/Tag&gt;,
        },
        {
          title: 'Processing Time',
          dataIndex: 'processingTimeMs',
          key: 'processingTimeMs',
          width: 120,
          render: (time) =&gt; `${time.toFixed(2)}ms`,
        },
        {
          title: 'Source',
          dataIndex: ['metadata', 'source'],
          key: 'source',
          width: 120,
        },
        {
          title: 'Actions',
          key: 'actions',
          width: 100,
          render: (_, event) =&gt; (
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                Modal.info({
                  title: 'Event Details',
                  content: (
                    &lt;div&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;ID:&lt;/Text&gt; {event.id}
                      &lt;/Paragraph&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;Raw Data:&lt;/Text&gt;
                        &lt;pre
                          style={{
                            marginTop: 8,
                            background: colors.gray[50],
                            padding: 12,
                            borderRadius: 4,
                          }}
                        &gt;
                          {JSON.stringify(event.rawData, null, 2)}
                        &lt;/pre&gt;
                      &lt;/Paragraph&gt;
                      {event.error &amp;&amp; (
                        &lt;Paragraph&gt;
                          &lt;Text strong&gt;Error:&lt;/Text&gt;
                          &lt;pre
                            style={{
                              marginTop: 8,
                              background: colors.error[50],
                              padding: 12,
                              borderRadius: 4,
                              color: colors.error[600],
                            }}
                          &gt;
                            {event.error}
                          &lt;/pre&gt;
                        &lt;/Paragraph&gt;
                      )}
                    &lt;/div&gt;
                  ),
                  width: 600,
                });
              }}
            /&gt;
          ),
        },
      ]}
    /&gt;
  );

  const renderMetrics = () =&gt; {
    if (!metrics) return &lt;div&gt;Select a trigger to view metrics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic title=&quot;Total Events&quot; value={metrics.totalEvents} /&gt;
          &lt;Statistic
            title=&quot;Processed Events&quot;
            value={metrics.processedEvents}
            valueStyle={{ color: colors.success[600] }}
          /&gt;
          &lt;Statistic
            title=&quot;Error Rate&quot;
            value={metrics.errorRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: metrics.errorRate &gt; 5 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
          &lt;Statistic
            title=&quot;Avg Processing Time&quot;
            value={metrics.averageProcessingTime}
            precision={2}
            suffix=&quot;ms&quot;
          /&gt;
        &lt;/div&gt;

        {metrics.topSources.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Top Sources&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={metrics.topSources}
              renderItem={(source) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta title={source.source} description={`${source.count} events`} /&gt;
                  &lt;Progress
                    percent={(source.count / metrics.totalEvents) * 100}
                    size=&quot;small&quot;
                    style={{ width: 100 }}
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getTriggerIcon = (triggerType: string) =&gt; {
    const iconMap = {
      webhook: &lt;GlobalOutlined /&gt;,
      http_request: &lt;ApiOutlined /&gt;,
      email: &lt;MailOutlined /&gt;,
      file_change: &lt;FileTextOutlined /&gt;,
      database_change: &lt;DatabaseOutlined /&gt;,
      api_poll: &lt;ApiOutlined /&gt;,
      calendar_event: &lt;CalendarOutlined /&gt;,
    };
    return iconMap[triggerType as keyof typeof iconMap] || &lt;SettingOutlined /&gt;;
  };

  const getEventStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'processed':
        return 'green';
      case 'failed':
        return 'red';
      case 'filtered':
        return 'orange';
      case 'rate_limited':
        return 'purple';
      default:
        return 'default';
    }
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;ThunderboltOutlined /&gt;
            Advanced Triggers
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1200}
        footer={null}
        className={cn('trigger-management-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Triggers ({triggers.length})
              &lt;/span&gt;
            }
            key=&quot;triggers&quot;
          &gt;
            &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
              &lt;Card title=&quot;Create Trigger&quot; size=&quot;small&quot;&gt;
                {renderTriggerForm()}
                {webhookUrl &amp;&amp; (
                  &lt;Alert
                    message=&quot;Webhook URL&quot;
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;Text code&gt;{webhookUrl}&lt;/Text&gt;
                        &lt;Button
                          size=&quot;small&quot;
                          icon={&lt;CopyOutlined /&gt;}
                          onClick={() =&gt; {
                            navigator.clipboard.writeText(webhookUrl);
                            message.success('URL copied');
                          }}
                        &gt;
                          Copy URL
                        &lt;/Button&gt;
                      &lt;/Space&gt;
                    }
                    type=&quot;success&quot;
                    style={{ marginTop: 16 }}
                  /&gt;
                )}
              &lt;/Card&gt;
              &lt;Card title=&quot;Active Triggers&quot; size=&quot;small&quot;&gt;
                {renderTriggersList()}
              &lt;/Card&gt;
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CheckCircleOutlined /&gt;
                Events
              &lt;/span&gt;
            }
            key=&quot;events&quot;
          &gt;
            {renderEventsList()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;div&gt;📊&lt;/div&gt;
                Metrics
              &lt;/span&gt;
            }
            key=&quot;metrics&quot;
          &gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;Select
                placeholder=&quot;Select a trigger to view metrics&quot;
                value={selectedTrigger?.id}
                onChange={(triggerId) =&gt; {
                  const trigger = triggers.find((t) =&gt; t.id === triggerId);
                  setSelectedTrigger(trigger || null);
                }}
                style={{ width: 300 }}
              &gt;
                {triggers.map((trigger) =&gt; (
                  &lt;Option key={trigger.id} value={trigger.id}&gt;
                    {trigger.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/div&gt;
            {renderMetrics()}
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Modal&gt;

      &lt;Modal
        title=&quot;Test Trigger&quot;
        open={testModalVisible}
        onCancel={() =&gt; setTestModalVisible(false)}
        onOk={() =&gt; {
          if (selectedTrigger) {
            handleTestTrigger(selectedTrigger.id);
          }
        }}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Test Data (JSON)&quot;&gt;
            &lt;TextArea
              rows={8}
              placeholder={JSON.stringify(
                { test: true, timestamp: new Date().toISOString() },
                null,
                2
              )}
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/SchedulingPanel.tsx (Line 1:1 - Line 722:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/schedulingpanel/SchedulingPanel.tsx (Line 5:1 - Line 726:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn271" onclick="toggleCodeBlock('cloneGroup271', 'expandBtn271', 'collapseBtn271')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn271" onclick="toggleCodeBlock('cloneGroup271', 'expandBtn271', 'collapseBtn271')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup271"><code class="language-tsx text-sm text-gray-800">/**
 * Workflow Scheduling Panel
 *
 * Provides comprehensive workflow scheduling interface with cron expressions,
 * interval scheduling, conditional execution, and advanced configuration options.
 */

import {
  BarChartOutlined,
  CalendarOutlined,
  ClockCircleOutlined,
  DeleteOutlined,
  EditOutlined,
  InfoCircleOutlined,
  PauseCircleOutlined,
  PlayCircleOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  DatePicker,
  Divider,
  Form,
  Input,
  InputNumber,
  List,
  Modal,
  message,
  Select,
  Space,
  Statistic,
  Switch,
  Tabs,
  Tag,
  Tooltip,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  type ScheduleAnalytics,
  type ScheduleConfiguration,
  type ScheduledExecution,
  workflowScheduler,
} from '@/core/services/workflowScheduler';
import { colors } from '@/design-system/tokens';
import { cn } from '@/design-system/utils';

const { TabPane } = Tabs;
const { Option } = Select;
const { TextArea } = Input;

interface SchedulingPanelProps {
  workflowId: string;
  visible: boolean;
  onClose: () =&gt; void;
}

export const SchedulingPanel: React.FC&lt;SchedulingPanelProps&gt; = ({
  workflowId,
  visible,
  onClose,
}) =&gt; {
  const [schedules, setSchedules] = useState&lt;ScheduleConfiguration[]&gt;([]);
  const [activeExecutions, setActiveExecutions] = useState&lt;ScheduledExecution[]&gt;([]);
  const [selectedSchedule, setSelectedSchedule] = useState&lt;ScheduleConfiguration | null&gt;(null);
  const [analytics, setAnalytics] = useState&lt;ScheduleAnalytics | null&gt;(null);
  const [activeTab, setActiveTab] = useState('schedules');
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [editingSchedule, setEditingSchedule] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    if (visible) {
      loadSchedules();
      loadActiveExecutions();
    }
  }, [visible, loadActiveExecutions, loadSchedules]);

  useEffect(() =&gt; {
    if (selectedSchedule) {
      loadAnalytics(selectedSchedule.id);
    }
  }, [selectedSchedule, loadAnalytics]);

  const loadSchedules = () =&gt; {
    const allSchedules = workflowScheduler.getAllSchedules();
    const workflowSchedules = allSchedules.filter((s) =&gt; s.workflowId === workflowId);
    setSchedules(workflowSchedules);
  };

  const loadActiveExecutions = () =&gt; {
    const allExecutions = workflowScheduler.getActiveExecutions();
    const workflowExecutions = allExecutions.filter((e) =&gt; e.workflowId === workflowId);
    setActiveExecutions(workflowExecutions);
  };

  const loadAnalytics = async (scheduleId: string) =&gt; {
    try {
      const analytics = await workflowScheduler.getScheduleAnalytics(scheduleId);
      setAnalytics(analytics);
    } catch (_error) {}
  };

  const handleCreateSchedule = async (values: any) =&gt; {
    setLoading(true);
    try {
      const scheduleConfig = {
        workflowId,
        name: values.name,
        description: values.description,
        enabled: values.enabled ?? true,
        scheduleType: values.scheduleType,
        configuration: buildScheduleConfiguration(values),
        timezone: values.timezone || 'UTC',
        retryPolicy: {
          enabled: values.retryEnabled ?? false,
          maxAttempts: values.maxAttempts ?? 3,
          backoffStrategy: values.backoffStrategy ?? 'exponential',
          initialDelayMs: values.initialDelay ?? 1000,
          maxDelayMs: values.maxDelay ?? 300000,
          retryConditions: values.retryConditions?.split(',').map((c: string) =&gt; c.trim()) ?? [],
        },
        concurrency: {
          maxConcurrent: values.maxConcurrent ?? 1,
          queueStrategy: values.queueStrategy ?? 'fifo',
          skipIfRunning: values.skipIfRunning ?? false,
          timeout: values.timeout ?? 3600000,
        },
        conditions: [],
        notifications: {
          onSuccess: [],
          onFailure: [],
          onSkip: [],
          onRetry: [],
        },
        metadata: {},
      };

      workflowScheduler.createSchedule(scheduleConfig);
      message.success('Schedule created successfully');
      loadSchedules();
      form.resetFields();
      setEditingSchedule(null);
    } catch (_error) {
      message.error('Failed to create schedule');
    } finally {
      setLoading(false);
    }
  };

  const buildScheduleConfiguration = (values: any) =&gt; {
    switch (values.scheduleType) {
      case 'cron':
        return {
          expression: values.cronExpression,
          description: values.cronDescription,
        };
      case 'interval':
        return {
          intervalMs: values.intervalMs,
          maxExecutions: values.maxExecutions,
          startTime: values.startTime?.toISOString(),
          endTime: values.endTime?.toISOString(),
        };
      case 'once':
        return {
          executeAt: values.executeAt?.toISOString(),
          delay: values.delay,
        };
      case 'event-driven':
        return {
          eventType: values.eventType,
          eventSource: values.eventSource,
          filters: [],
          debounceMs: values.debounceMs,
          maxEventsPerWindow: values.maxEventsPerWindow,
        };
      case 'conditional':
        return {
          condition: values.condition,
          checkIntervalMs: values.checkIntervalMs,
          maxChecks: values.maxChecks,
          dependencies: values.dependencies?.split(',').map((d: string) =&gt; d.trim()) ?? [],
        };
      default:
        return {
          eventType: '',
          eventSource: '',
          filters: [],
          debounceMs: 0,
          maxEventsPerWindow: 0,
        };
    }
  };

  const handleToggleSchedule = async (scheduleId: string, enabled: boolean) =&gt; {
    try {
      workflowScheduler.toggleSchedule(scheduleId, enabled);
      message.success(`Schedule ${enabled ? 'enabled' : 'disabled'}`);
      loadSchedules();
    } catch (_error) {
      message.error('Failed to toggle schedule');
    }
  };

  const handleDeleteSchedule = async (scheduleId: string) =&gt; {
    try {
      workflowScheduler.deleteSchedule(scheduleId);
      message.success('Schedule deleted');
      loadSchedules();
      if (selectedSchedule?.id === scheduleId) {
        setSelectedSchedule(null);
        setAnalytics(null);
      }
    } catch (_error) {
      message.error('Failed to delete schedule');
    }
  };

  const handleTriggerSchedule = async (scheduleId: string) =&gt; {
    try {
      await workflowScheduler.triggerSchedule(scheduleId, true);
      message.success('Schedule triggered successfully');
      loadActiveExecutions();
    } catch (_error) {
      message.error('Failed to trigger schedule');
    }
  };

  const handleCancelExecution = (executionId: string) =&gt; {
    try {
      workflowScheduler.cancelExecution(executionId);
      message.success('Execution cancelled');
      loadActiveExecutions();
    } catch (_error) {
      message.error('Failed to cancel execution');
    }
  };

  const renderScheduleForm = () =&gt; (
    &lt;Form
      form={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateSchedule}
      initialValues={{
        enabled: true,
        scheduleType: 'cron',
        timezone: 'UTC',
        retryEnabled: false,
        maxAttempts: 3,
        backoffStrategy: 'exponential',
        maxConcurrent: 1,
        queueStrategy: 'fifo',
        skipIfRunning: false,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Schedule Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;Daily data sync&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Optional description of what this schedule does&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;scheduleType&quot; label=&quot;Schedule Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;cron&quot;&gt;Cron Expression&lt;/Option&gt;
          &lt;Option value=&quot;interval&quot;&gt;Fixed Interval&lt;/Option&gt;
          &lt;Option value=&quot;once&quot;&gt;One Time&lt;/Option&gt;
          &lt;Option value=&quot;event-driven&quot;&gt;Event Driven&lt;/Option&gt;
          &lt;Option value=&quot;conditional&quot;&gt;Conditional&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['scheduleType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const scheduleType = getFieldValue('scheduleType');
          return renderScheduleTypeFields(scheduleType);
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

      &lt;Form.Item name=&quot;timezone&quot; label=&quot;Timezone&quot;&gt;
        &lt;Select showSearch&gt;
          &lt;Option value=&quot;UTC&quot;&gt;UTC&lt;/Option&gt;
          &lt;Option value=&quot;America/New_York&quot;&gt;America/New_York&lt;/Option&gt;
          &lt;Option value=&quot;America/Los_Angeles&quot;&gt;America/Los_Angeles&lt;/Option&gt;
          &lt;Option value=&quot;Europe/London&quot;&gt;Europe/London&lt;/Option&gt;
          &lt;Option value=&quot;Asia/Tokyo&quot;&gt;Asia/Tokyo&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;maxConcurrent&quot; label=&quot;Max Concurrent Executions&quot;&gt;
        &lt;InputNumber min={1} max={10} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;queueStrategy&quot; label=&quot;Queue Strategy&quot;&gt;
        &lt;Select&gt;
          &lt;Option value=&quot;fifo&quot;&gt;First In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;lifo&quot;&gt;Last In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;priority&quot;&gt;Priority Based&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;skipIfRunning&quot; label=&quot;Skip If Already Running&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Retry Policy&lt;/Divider&gt;

      &lt;Form.Item name=&quot;retryEnabled&quot; label=&quot;Enable Retries&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['retryEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('retryEnabled')) return null;
          return (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxAttempts&quot; label=&quot;Max Retry Attempts&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;backoffStrategy&quot; label=&quot;Backoff Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Option value=&quot;linear&quot;&gt;Linear&lt;/Option&gt;
                  &lt;Option value=&quot;exponential&quot;&gt;Exponential&lt;/Option&gt;
                  &lt;Option value=&quot;fixed&quot;&gt;Fixed&lt;/Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;initialDelay&quot; label=&quot;Initial Delay (ms)&quot;&gt;
                &lt;InputNumber min={100} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingSchedule ? 'Update Schedule' : 'Create Schedule'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingSchedule(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderScheduleTypeFields = (scheduleType: string) =&gt; {
    switch (scheduleType) {
      case 'cron':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;cronExpression&quot;
              label={
                &lt;Space&gt;
                  Cron Expression
                  &lt;Tooltip title=&quot;Format: second minute hour day month weekday&quot;&gt;
                    &lt;InfoCircleOutlined /&gt;
                  &lt;/Tooltip&gt;
                &lt;/Space&gt;
              }
              rules={[{ required: true, message: 'Please enter a cron expression' }]}
            &gt;
              &lt;Input placeholder=&quot;0 0 9 * * *&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;cronDescription&quot; label=&quot;Description&quot;&gt;
              &lt;Input placeholder=&quot;Every day at 9:00 AM&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'interval':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;intervalMs&quot; label=&quot;Interval (milliseconds)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;maxExecutions&quot; label=&quot;Max Executions (optional)&quot;&gt;
              &lt;InputNumber min={1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'once':
        return (
          &lt;Form.Item name=&quot;executeAt&quot; label=&quot;Execute At&quot;&gt;
            &lt;DatePicker showTime /&gt;
          &lt;/Form.Item&gt;
        );
      case 'event-driven':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;eventType&quot; label=&quot;Event Type&quot;&gt;
              &lt;Input placeholder=&quot;webhook&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;eventSource&quot; label=&quot;Event Source&quot;&gt;
              &lt;Input placeholder=&quot;api.example.com&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'conditional':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;condition&quot; label=&quot;JavaScript Condition&quot;&gt;
              &lt;TextArea placeholder=&quot;return data.status === 'ready'&quot; rows={3} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;checkIntervalMs&quot; label=&quot;Check Interval (ms)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;60000&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderSchedulesList = () =&gt; (
    &lt;List
      dataSource={schedules}
      renderItem={(schedule) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={schedule.enabled}
              onChange={(checked) =&gt; handleToggleSchedule(schedule.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; handleTriggerSchedule(schedule.id)}
              disabled={!schedule.enabled}
            &gt;
              Trigger
            &lt;/Button&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingSchedule(schedule.id);
                form.setFieldsValue({
                  name: schedule.name,
                  description: schedule.description,
                  enabled: schedule.enabled,
                  scheduleType: schedule.scheduleType,
                  // Add other fields based on schedule type
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteSchedule(schedule.id)}
            /&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {schedule.name}
                &lt;Tag color={schedule.enabled ? 'green' : 'default'}&gt;{schedule.scheduleType}&lt;/Tag&gt;
                {schedule.nextExecution &amp;&amp; (
                  &lt;Tag color=&quot;blue&quot;&gt;Next: {new Date(schedule.nextExecution).toLocaleString()}&lt;/Tag&gt;
                )}
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {schedule.description}
                &lt;Space&gt;
                  &lt;Badge status={schedule.enabled ? 'success' : 'default'} /&gt;
                  {schedule.enabled ? 'Active' : 'Inactive'}
                  {schedule.lastExecuted &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(schedule.lastExecuted).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No schedules configured' }}
    /&gt;
  );

  const renderExecutionsList = () =&gt; (
    &lt;List
      dataSource={activeExecutions}
      renderItem={(execution) =&gt; (
        &lt;List.Item
          actions={[
            execution.status === 'running' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                danger
                icon={&lt;PauseCircleOutlined /&gt;}
                onClick={() =&gt; handleCancelExecution(execution.id)}
              &gt;
                Cancel
              &lt;/Button&gt;
            ),
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                Execution {execution.id.split('_')[1]}
                &lt;Tag color={getExecutionStatusColor(execution.status)}&gt;{execution.status}&lt;/Tag&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                &lt;div&gt;Scheduled: {new Date(execution.scheduledAt).toLocaleString()}&lt;/div&gt;
                {execution.startedAt &amp;&amp; (
                  &lt;div&gt;Started: {new Date(execution.startedAt).toLocaleString()}&lt;/div&gt;
                )}
                {execution.duration &amp;&amp; (
                  &lt;div&gt;Duration: {(execution.duration / 1000).toFixed(2)}s&lt;/div&gt;
                )}
                {execution.error &amp;&amp; (
                  &lt;div style={{ color: colors.error[500] }}&gt;Error: {execution.error}&lt;/div&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No active executions' }}
    /&gt;
  );

  const renderAnalytics = () =&gt; {
    if (!analytics) return &lt;div&gt;Select a schedule to view analytics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic
            title=&quot;Success Rate&quot;
            value={analytics.successRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: analytics.successRate &gt; 90 ? colors.success[600] : colors.warning[600],
            }}
          /&gt;
          &lt;Statistic title=&quot;Total Executions&quot; value={analytics.totalExecutions} /&gt;
          &lt;Statistic
            title=&quot;Average Duration&quot;
            value={analytics.averageDuration / 1000}
            precision={2}
            suffix=&quot;s&quot;
          /&gt;
          &lt;Statistic
            title=&quot;Failed Executions&quot;
            value={analytics.failedExecutions}
            valueStyle={{
              color: analytics.failedExecutions &gt; 0 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
        &lt;/div&gt;

        {analytics.recommendations.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Recommendations&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={analytics.recommendations}
              renderItem={(rec) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta
                    title={
                      &lt;Space&gt;
                        {rec.description}
                        &lt;Tag
                          color={
                            rec.priority === 'high'
                              ? 'red'
                              : rec.priority === 'medium'
                                ? 'orange'
                                : 'green'
                          }
                        &gt;
                          {rec.priority}
                        &lt;/Tag&gt;
                      &lt;/Space&gt;
                    }
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Implementation:&lt;/strong&gt; {rec.implementation}
                        &lt;/div&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Impact:&lt;/strong&gt; {rec.estimatedImpact}
                        &lt;/div&gt;
                      &lt;/Space&gt;
                    }
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getExecutionStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'running':
        return 'blue';
      case 'completed':
        return 'green';
      case 'failed':
        return 'red';
      case 'cancelled':
        return 'orange';
      case 'skipped':
        return 'default';
      default:
        return 'default';
    }
  };

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;ClockCircleOutlined /&gt;
          Workflow Scheduling
        &lt;/Space&gt;
      }
      open={visible}
      onCancel={onClose}
      width={1000}
      footer={null}
      className={cn('workflow-scheduling-panel')}
    &gt;
      &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;CalendarOutlined /&gt;
              Schedules ({schedules.length})
            &lt;/span&gt;
          }
          key=&quot;schedules&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
            &lt;Card title=&quot;Create Schedule&quot; size=&quot;small&quot;&gt;
              {renderScheduleForm()}
            &lt;/Card&gt;
            &lt;Card title=&quot;Active Schedules&quot; size=&quot;small&quot;&gt;
              {renderSchedulesList()}
            &lt;/Card&gt;
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ThunderboltOutlined /&gt;
              Executions ({activeExecutions.length})
            &lt;/span&gt;
          }
          key=&quot;executions&quot;
        &gt;
          {renderExecutionsList()}
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Analytics
            &lt;/span&gt;
          }
          key=&quot;analytics&quot;
        &gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;Select
              placeholder=&quot;Select a schedule to view analytics&quot;
              value={selectedSchedule?.id}
              onChange={(scheduleId) =&gt; {
                const schedule = schedules.find((s) =&gt; s.id === scheduleId);
                setSelectedSchedule(schedule || null);
              }}
              style={{ width: 300 }}
            &gt;
              {schedules.map((schedule) =&gt; (
                &lt;Option key={schedule.id} value={schedule.id}&gt;
                  {schedule.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/div&gt;
          {renderAnalytics()}
        &lt;/TabPane&gt;
      &lt;/Tabs&gt;
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodePropertyPanel.tsx (Line 1:1 - Line 547:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/nodepropertypanel/NodePropertyPanel.tsx (Line 11:1 - Line 557:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn273" onclick="toggleCodeBlock('cloneGroup273', 'expandBtn273', 'collapseBtn273')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn273" onclick="toggleCodeBlock('cloneGroup273', 'expandBtn273', 'collapseBtn273')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup273"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { SaveOutlined } from '@ant-design/icons';
import { message } from 'antd';
import type React from 'react';
import { useCallback, useEffect, useMemo, useState } from 'react';
import type { EnhancedDisplayOptions } from '@/app/node-extensions/components/ConditionalPropertyRenderer';
import { PropertyGroupRenderer } from '@/app/node-extensions/components/ConditionalPropertyRenderer';
import { CredentialApiService, nodeRegistry, useLeanWorkflowStore } from '@/core';
import type { INodeProperty } from '@/core/nodes/types';
import { useCredentialStore } from '@/core/stores/credentialStore';
import type {
  PropertyEvaluationContext,
  PropertyFormState,
  PropertyValue,
} from '@/core/types/dynamicProperties';
import DataVisualizationPanel from '@/design-system/components/DataVisualization/DataVisualizationPanel';
import CredentialModal from './CredentialModal';
import DynamicPropertyRenderer from './DynamicPropertyRenderer';
import EmailInputPanel from './EmailInputPanel';
import EmailOutputPanel from './EmailOutputPanel';

const credentialApiService = new CredentialApiService();

import { gmailEnhancedProperties } from '@/app/data/nodes/communication/gmail/enhanced-properties';
import { nodeMigrationService } from '@/core/utils/nodeVersioning';

interface NodeConfigurationPanelProps {
  isOpen: boolean;
  onClose: () =&gt; void;
  nodeId?: string;
}

const NodeConfigurationPanel: React.FC&lt;NodeConfigurationPanelProps&gt; = ({
  isOpen,
  onClose,
  nodeId,
}) =&gt; {
  const { getNodeById, updateNodeParameters, saveWorkflow, currentWorkflow, nodes, edges } =
    useLeanWorkflowStore();
  const { credentials, loadCredentials, credentialTypes } = useCredentialStore();

  const [leftWidth, setLeftWidth] = useState(700);
  const [isDragging, setIsDragging] = useState(false);
  const [isSaving, setIsSaving] = useState(false);
  const [formState, setFormState] = useState&lt;PropertyFormState&gt;({});
  const [isTestingNode, setIsTestingNode] = useState(false);
  const [testResults, setTestResults] = useState&lt;any&gt;(null);
  const [selectedEmail, setSelectedEmail] = useState&lt;any&gt;(null);
  const [isCredentialModalOpen, setIsCredentialModalOpen] = useState(false);
  const [currentCredentialType, setCurrentCredentialType] = useState('');

  const middleWidth = 550;

  const currentNode = useMemo(() =&gt; {
    if (!nodeId) return null;
    return getNodeById(nodeId);
  }, [nodeId, getNodeById]);

  const nodeDefinition = useMemo(() =&gt; {
    if (!currentNode) return null;
    return nodeRegistry.getNodeTypeDescription(currentNode.type);
  }, [currentNode]);

  // Get enhanced node type from node data (Gmail-specific)
  const enhancedNodeType = useMemo(() =&gt; {
    if (!currentNode) return null;

    // For registry-based system, derive node type from node.type
    if (currentNode.type === 'gmail-enhanced' || currentNode.type?.includes('gmail')) {
      return { id: 'gmail-enhanced' };
    }
    if (currentNode.type === 'ai-agent') {
      return { id: 'ai-agent' };
    }

    return null;
  }, [currentNode]);

  // Get connected input nodes for display
  const connectedInputNodes = useMemo(() =&gt; {
    if (!currentNode || !Array.isArray(nodes) || !Array.isArray(edges)) return [];
    return edges
      .filter((edge) =&gt; edge.target === currentNode.id)
      .map((edge) =&gt; nodes.find((node) =&gt; node.id === edge.source))
      .filter(Boolean);
  }, [currentNode, edges, nodes]);

  // Extract input data from connected nodes
  const inputData = useMemo(() =&gt; {
    const data: any = {};
    connectedInputNodes.forEach((node: any, index) =&gt; {
      if (node?.parameters?.outputData) {
        data[`input_${index}`] = node.parameters.outputData;
      }
    });
    return data;
  }, [connectedInputNodes]);

  useEffect(() =&gt; {
    if (currentNode) {
      setFormState(currentNode.parameters || {});
    }
  }, [currentNode]);

  // Auto-select first email when Gmail test results come in
  useEffect(() =&gt; {
    if (
      testResults?.success &amp;&amp;
      (enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail')) &amp;&amp;
      testResults?.data &amp;&amp;
      Array.isArray(testResults.data) &amp;&amp;
      testResults.data.length &gt; 0
    ) {
      setSelectedEmail(testResults.data[0]);
    }
  }, [testResults, enhancedNodeType?.id, currentNode?.type]);

  // Load credentials on mount
  useEffect(() =&gt; {
    loadCredentials();
  }, [loadCredentials]);

  // Debug modal state changes
  useEffect(() =&gt; {}, []);

  const handleParameterChange = useCallback(
    (parameterName: string, value: PropertyValue) =&gt; {
      const newFormState = { ...formState, [parameterName]: value };
      setFormState(newFormState);
      if (currentNode) {
        updateNodeParameters(currentNode.id, newFormState);
      }
    },
    [formState, currentNode, updateNodeParameters]
  );

  // Gmail-specific test functionality
  const handleTestNode = useCallback(async () =&gt; {
    if (!currentNode || !nodeDefinition) return;

    setIsTestingNode(true);
    setTestResults(null);

    try {
      // Check if this is a Gmail enhanced node
      if (currentNode.type?.includes('gmail') || enhancedNodeType?.id === 'gmail-enhanced') {
        // Use the registry test method for Gmail trigger
        const result = await nodeRegistry.testNodeType(
          currentNode.type,
          formState,
          currentNode.credentials || {}
        );

        setTestResults({
          success: result.success,
          message: result.message || 'Gmail test completed',
          data: result.data,
        });
      } else {
        // Generic node testing
        const result = await nodeRegistry.testNodeType(
          currentNode.type,
          formState,
          currentNode.credentials || {}
        );

        setTestResults({
          success: result.success,
          message: result.message || 'Test completed',
          data: result.data,
        });
      }
    } catch (error: any) {
      setTestResults({
        success: false,
        message: error.message || 'Test failed',
      });
    } finally {
      setIsTestingNode(false);
    }
  }, [currentNode, nodeDefinition, formState, enhancedNodeType]);

  // Credential management handlers
  const handleCreateCredential = useCallback((type: string) =&gt; {
    setCurrentCredentialType(type);
    setIsCredentialModalOpen(true);
  }, []);

  const handleCredentialSelect = useCallback(
    (credential: any) =&gt; {
      // Handle credential selection
      const credentialId = credential.id;
      handleParameterChange('credential', credentialId);
    },
    [handleParameterChange]
  );

  const handleCredentialChange = useCallback(
    (credentialId: string) =&gt; {
      handleParameterChange('credential', credentialId);
    },
    [handleParameterChange]
  );

  const handleSaveCredential = useCallback(
    async (credentialData: any) =&gt; {
      try {
        await credentialApiService.createCredential(credentialData);
        await loadCredentials();
        setIsCredentialModalOpen(false);
        message.success('Credential saved successfully');
      } catch (error: any) {
        message.error(`Failed to save credential: ${error.message}`);
      }
    },
    [loadCredentials]
  );

  // Create evaluation context for dynamic properties
  const evaluationContext: PropertyEvaluationContext = useMemo(
    () =&gt; ({
      formState,
      nodeData: currentNode ? { ...currentNode } : undefined,
      credentials: credentials as Array&lt;Record&lt;string, unknown&gt;&gt;,
      credentialTypes: credentialTypes as unknown as Array&lt;Record&lt;string, unknown&gt;&gt;,
      onCreateCredential: handleCreateCredential,
      onCredentialSelect: handleCredentialSelect,
      onCredentialChange: handleCredentialChange,
    }),
    [
      formState,
      currentNode,
      credentials,
      credentialTypes,
      handleCreateCredential,
      handleCredentialSelect,
      handleCredentialChange,
    ]
  );

  const handleMouseDown = useCallback((e: React.MouseEvent) =&gt; {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleMouseUp = useCallback(() =&gt; {
    setIsDragging(false);
  }, []);

  const handleMouseMove = useCallback(
    (e: MouseEvent) =&gt; {
      if (!isDragging) return;
      const containerWidth = window.innerWidth;
      const minLeftWidth = 200;
      const maxLeftWidth = containerWidth - middleWidth - 200;
      setLeftWidth((prevWidth) =&gt;
        Math.max(minLeftWidth, Math.min(maxLeftWidth, prevWidth + e.movementX))
      );
    },
    [isDragging]
  );

  useEffect(() =&gt; {
    if (isDragging) {
      document.body.style.cursor = 'col-resize';
      document.body.style.userSelect = 'none';
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
      return () =&gt; {
        document.body.style.cursor = '';
        document.body.style.userSelect = '';
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };
    }
  }, [isDragging, handleMouseMove, handleMouseUp]);

  const handleSaveWorkflow = useCallback(async () =&gt; {
    if (!currentWorkflow) {
      message.error('No workflow to save');
      return;
    }
    setIsSaving(true);
    try {
      await saveWorkflow();
      message.success('Workflow saved successfully');
    } catch (error: any) {
      message.error(`Failed to save workflow: ${error.message || 'Unknown error'}`);
    } finally {
      setIsSaving(false);
    }
  }, [currentWorkflow, saveWorkflow]);

  // Enhanced property resolution with Transform node support
  const registryProperties = useMemo(() =&gt; {
    // For enhanced nodes like Gmail, get properties from enhanced node type
    if (enhancedNodeType?.id === 'gmail-enhanced') {
      // Use directly imported Gmail enhanced properties for comprehensive form
      return gmailEnhancedProperties;
    }

    // For Transform nodes, check if migration is needed and use enhanced version
    if (currentNode?.type === 'transform') {
      try {
        const currentVersion = currentNode.typeVersion || currentNode.version || 1;
        const latestVersion = nodeMigrationService.getLatestVersion('transform');

        if (currentVersion &lt; latestVersion) {
          // Migrate the node instance
          const migratedNode = nodeMigrationService.migrateNodeInstance(currentNode, latestVersion);

          // Update the node with migrated parameters
          if (migratedNode.parameters !== currentNode.parameters) {
            updateNodeParameters(currentNode.id, migratedNode.parameters);
          }
        }

        // Get the enhanced transform node properties (synchronously)
        const enhancedTransformNode = nodeRegistry.getEnhancedNodeTypeSync('transform');
        if (enhancedTransformNode?.configuration?.properties) {
          return enhancedTransformNode.configuration.properties;
        }
      } catch (_error) {}
    }

    if (!nodeDefinition?.properties) return [];
    return nodeDefinition.properties;
  }, [nodeDefinition, enhancedNodeType, currentNode, updateNodeParameters]);

  if (!isOpen || !currentNode || !nodeDefinition) {
    return null;
  }

  const rightWidth = `calc(100vw - ${leftWidth}px - ${middleWidth}px)`;

  return (
    &lt;div className=&quot;fixed inset-0 z-50 flex flex-col bg-gray-900&quot;&gt;
      &lt;div className=&quot;w-full p-4 border-b border-gray-700 bg-gray-900 flex items-center justify-between&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
          &lt;button
            onClick={onClose}
            className=&quot;text-gray-400 hover:text-white transition-colors flex items-center space-x-2&quot;
          &gt;
            &lt;span&gt;←&lt;/span&gt;
            &lt;span&gt;Back to canvas&lt;/span&gt;
          &lt;/button&gt;
          &lt;div className=&quot;flex items-center space-x-2 text-sm text-gray-400&quot;&gt;
            &lt;span&gt;/&lt;/span&gt;
            &lt;span&gt;{nodeDefinition.displayName}&lt;/span&gt;
            &lt;span className=&quot;text-xs px-2 py-1 bg-gray-700 rounded&quot;&gt;{currentNode.type}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
          &lt;button
            onClick={handleSaveWorkflow}
            disabled={isSaving || !currentWorkflow}
            className=&quot;flex items-center space-x-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-sm rounded transition-colors&quot;
            title=&quot;Save workflow without closing modal&quot;
          &gt;
            &lt;SaveOutlined className={isSaving ? 'animate-spin' : ''} /&gt;
            &lt;span&gt;{isSaving ? 'Saving...' : 'Save'}&lt;/span&gt;
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex flex-1 overflow-hidden&quot;&gt;
        {/* Left Column: Input Data */}
        &lt;div
          className=&quot;bg-gray-900 border-r border-gray-600 flex flex-col&quot;
          style={{ width: `${leftWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
              INPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {(enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail')) &amp;&amp;
            testResults?.data &amp;&amp;
            Array.isArray(testResults.data) &amp;&amp;
            testResults.data.length &gt; 0 ? (
              &lt;EmailInputPanel
                emails={testResults.data}
                selectedEmailId={selectedEmail?.id}
                onEmailSelect={setSelectedEmail}
              /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent input data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'condition' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Condition input data would appear here&lt;/div&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={inputData}
                title=&quot;Input Data&quot;
                description=&quot;Data from connected nodes&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Middle Column: Parameters &amp; Settings */}
        &lt;div
          className=&quot;bg-gray-800 flex flex-col border-l border-r border-gray-600&quot;
          style={{ width: `${middleWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-700 flex items-center justify-between flex-shrink-0&quot;&gt;
            &lt;div
              className=&quot;cursor-col-resize p-2 hover:bg-gray-600 rounded mr-2 flex items-center&quot;
              onMouseDown={handleMouseDown}
              title=&quot;Drag to resize column width&quot;
            &gt;
              &lt;div className=&quot;text-gray-300 text-xs font-mono&quot;&gt;⋮⋮&lt;/div&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;h2 className=&quot;text-lg font-semibold text-white&quot;&gt;{nodeDefinition.displayName}&lt;/h2&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button
                onClick={handleTestNode}
                disabled={isTestingNode}
                className={`px-3 py-1 rounded text-sm transition-colors ${
                  isTestingNode
                    ? 'bg-yellow-600 text-white cursor-wait'
                    : 'bg-green-600 hover:bg-green-700 text-white'
                }`}
              &gt;
                {isTestingNode ? '⏳ Testing...' : '🧪 Test step'}
              &lt;/button&gt;

              {/* Debug: Test credential modal button */}
              &lt;button
                onClick={() =&gt; {
                  handleCreateCredential('gmailOAuth2');
                }}
                className=&quot;px-2 py-1 rounded text-xs bg-purple-600 hover:bg-purple-700 text-white transition-colors&quot;
              &gt;
                🔧 Test Modal
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 p-6 overflow-y-auto&quot;&gt;
            {/* Use enhanced property rendering for Transform nodes and other enhanced types */}
            {currentNode?.type === 'transform' || enhancedNodeType?.id ? (
              &lt;PropertyGroupRenderer
                properties={
                  registryProperties as Array&lt;
                    INodeProperty &amp; { displayOptions?: EnhancedDisplayOptions }
                  &gt;
                }
                values={formState}
                onChange={handleParameterChange}
                evaluationContext={{
                  $json: inputData,
                  $node: {},
                  $vars: {},
                  $parameters: formState,
                }}
                context={evaluationContext}
              /&gt;
            ) : (
              &lt;DynamicPropertyRenderer
                properties={registryProperties as INodeProperty[]}
                formState={formState}
                onChange={handleParameterChange}
                context={evaluationContext}
              /&gt;
            )}

            {/* Display test results */}
            {testResults &amp;&amp; (
              &lt;div className=&quot;mt-6 p-4 rounded border-l-4 border-l-blue-500 bg-gray-700&quot;&gt;
                &lt;h4 className=&quot;text-white font-medium mb-2&quot;&gt;Test Results&lt;/h4&gt;
                &lt;div
                  className={`text-sm ${testResults.success ? 'text-green-400' : 'text-red-400'}`}
                &gt;
                  {testResults.message}
                &lt;/div&gt;
                {testResults.data &amp;&amp; (
                  &lt;div className=&quot;mt-2 text-xs text-gray-300&quot;&gt;
                    {Array.isArray(testResults.data)
                      ? `Found ${testResults.data.length} items`
                      : 'Data received'}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Column: Output Data */}
        &lt;div
          className=&quot;bg-gray-900 border-l border-gray-600 flex flex-col&quot;
          style={{ width: rightWidth, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
              OUTPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail') ? (
              &lt;EmailOutputPanel selectedEmail={selectedEmail} /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent output data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'transform' ? (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Transform Output&quot;
                description=&quot;Transformed data output&quot;
              /&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Output Data&quot;
                description=&quot;Output from node execution&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Credential Modal */}
      &lt;CredentialModal
        isOpen={isCredentialModalOpen}
        onClose={() =&gt; {
          setIsCredentialModalOpen(false);
        }}
        credentialType={currentCredentialType}
        onSave={handleSaveCredential}
      /&gt;

      {/* Debug info - commented out for production */}
      {/* {console.log('🔧 Modal state debug:', {
        isCredentialModalOpen,
        currentCredentialType,
        credentials: credentials?.length
      })} */}
    &lt;/div&gt;
  );
};

export default NodeConfigurationPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionToolbar.tsx (Line 1:1 - Line 283:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executiontoolbar/ExecutionToolbar.tsx (Line 2:1 - Line 284:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn275" onclick="toggleCodeBlock('cloneGroup275', 'expandBtn275', 'collapseBtn275')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn275" onclick="toggleCodeBlock('cloneGroup275', 'expandBtn275', 'collapseBtn275')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup275"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */
// Execution Toolbar Component - Controls for running workflows

import {
  BugOutlined,
  DownOutlined,
  ExportOutlined,
  HistoryOutlined,
  PlayCircleOutlined,
  SaveOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import { Badge, Button, Dropdown, message, Space } from 'antd';
import type React from 'react';
import { useState } from 'react';
import type { Edge, Node } from 'reactflow';
import { WorkflowApiService } from '@/core';
import type { WorkflowExecution } from '@/core/schemas';
import { exportWorkflowToBackend, validateWorkflowForExport } from '@/core/utils/workflowExporter';
import { ExecutionHistory } from '../ExecutionHistory/ExecutionHistory';
import { WorkflowTester } from '../WorkflowTester/WorkflowTester';

const workflowApiService = new WorkflowApiService();

interface ExecutionToolbarProps {
  nodes: Node[];
  edges: Edge[];
  currentExecution?: WorkflowExecution | null;
  onExecutionStart?: (executionId: string) =&gt; void;
  onExecutionStop?: () =&gt; void;
}

export const ExecutionToolbar: React.FC&lt;ExecutionToolbarProps&gt; = ({
  nodes,
  edges,
  currentExecution,
  onExecutionStart,
  onExecutionStop,
}) =&gt; {
  const [testing, setTesting] = useState(false);
  const [showTester, setShowTester] = useState(false);
  const [showHistory, setShowHistory] = useState(false);
  const [, setSaving] = useState(false);

  const isRunning = currentExecution?.status === 'running';
  const canRun = nodes.length &gt; 0 &amp;&amp; !isRunning;

  const handleTest = () =&gt; {
    setShowTester(true);
  };

  const handleRun = async () =&gt; {
    if (!canRun) return;

    // Validate workflow first
    const validation = validateWorkflowForExport(nodes, edges);
    if (!validation.isValid) {
      message.error(`Cannot run workflow: ${validation.errors.join(', ')}`);
      return;
    }

    if (validation.warnings.length &gt; 0) {
      message.warning(`Warnings: ${validation.warnings.join(', ')}`);
    }

    try {
      setTesting(true);
      const workflowJson = exportWorkflowToBackend(nodes, edges);

      const execution = await workflowApiService.executeWorkflow({
        workflow: workflowJson,
        triggerData: {},
        options: {
          timeout: 600000, // 10 minutes
        },
      });

      message.success('Workflow execution started');
      onExecutionStart?.(execution.id);
    } catch (error: any) {
      message.error(`Failed to start workflow: ${error.message}`);
    } finally {
      setTesting(false);
    }
  };

  const handleStop = async () =&gt; {
    if (!currentExecution) return;

    try {
      await workflowApiService.stopExecution(currentExecution.id);
      message.success('Workflow execution stopped');
      onExecutionStop?.();
    } catch (error: any) {
      message.error(`Failed to stop workflow: ${error.message}`);
    }
  };

  const handleSave = async () =&gt; {
    if (nodes.length === 0) {
      message.warning('Cannot save empty workflow');
      return;
    }

    try {
      setSaving(true);
      const workflowJson = exportWorkflowToBackend(nodes, edges);

      await workflowApiService.createWorkflow({
        name: `Workflow ${new Date().toLocaleDateString()}`,
        description: 'Saved from workflow editor',
        nodes: workflowJson.nodes.map((node) =&gt; ({
          id: node.id,
          type: node.type,
          position: { x: node.position[0], y: node.position[1] },
          data: {
            label: node.name,
            parameters: node.parameters,
            credentials:
              typeof node.credentials === 'object' &amp;&amp; node.credentials
                ? Object.keys(node.credentials)[0] || undefined
                : (node.credentials as string | undefined),
            disabled: node.disabled,
            notes: node.notes,
          },
        })),
        edges: [], // Convert connections to edges if needed
        version: 1,
        isActive: true,
        tags: ['editor'],
      });

      message.success('Workflow saved successfully');
    } catch (error: any) {
      message.error(`Failed to save workflow: ${error.message}`);
    } finally {
      setSaving(false);
    }
  };

  const handleExport = () =&gt; {
    if (nodes.length === 0) {
      message.warning('Cannot export empty workflow');
      return;
    }

    try {
      const workflowJson = exportWorkflowToBackend(nodes, edges);
      const blob = new Blob([JSON.stringify(workflowJson, null, 2)], {
        type: 'application/json',
      });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `workflow-${Date.now()}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      message.success('Workflow exported successfully');
    } catch (error: any) {
      message.error(`Failed to export workflow: ${error.message}`);
    }
  };

  const runMenuItems = [
    {
      key: 'run',
      label: 'Run Workflow',
      icon: &lt;PlayCircleOutlined /&gt;,
      onClick: handleRun,
      disabled: !canRun,
    },
    {
      key: 'test',
      label: 'Test Workflow',
      icon: &lt;BugOutlined /&gt;,
      onClick: handleTest,
    },
  ];

  const moreMenuItems = [
    {
      key: 'save',
      label: 'Save Workflow',
      icon: &lt;SaveOutlined /&gt;,
      onClick: handleSave,
    },
    {
      key: 'export',
      label: 'Export JSON',
      icon: &lt;ExportOutlined /&gt;,
      onClick: handleExport,
    },
    {
      key: 'history',
      label: 'Execution History',
      icon: &lt;HistoryOutlined /&gt;,
      onClick: () =&gt; setShowHistory(true),
    },
  ];

  return (
    &lt;div className=&quot;execution-toolbar&quot;&gt;
      &lt;div className=&quot;bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between&quot;&gt;
        &lt;Space&gt;
          {/* Primary execution controls */}
          {isRunning ? (
            &lt;Button danger icon={&lt;StopOutlined /&gt;} onClick={handleStop} size=&quot;small&quot;&gt;
              Stop
            &lt;/Button&gt;
          ) : (
            &lt;Dropdown
              menu={{ items: runMenuItems }}
              trigger={['click']}
              disabled={nodes.length === 0}
            &gt;
              &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} loading={testing} size=&quot;small&quot;&gt;
                Run &lt;DownOutlined /&gt;
              &lt;/Button&gt;
            &lt;/Dropdown&gt;
          )}

          {/* Test button */}
          &lt;Button
            icon={&lt;BugOutlined /&gt;}
            onClick={handleTest}
            disabled={nodes.length === 0}
            size=&quot;small&quot;
          &gt;
            Test
          &lt;/Button&gt;

          {/* Execution status */}
          {currentExecution &amp;&amp; (
            &lt;Badge
              status={
                currentExecution.status === 'running'
                  ? 'processing'
                  : currentExecution.status === 'completed'
                    ? 'success'
                    : currentExecution.status === 'failed'
                      ? 'error'
                      : 'default'
              }
              text={
                &lt;span className=&quot;text-sm&quot;&gt;
                  {currentExecution.status === 'running'
                    ? `Running (${(currentExecution as any).progress?.completedNodes?.length || 0}/${(currentExecution as any).progress?.totalNodes || 0})`
                    : `${currentExecution.status} - ${Math.round((currentExecution.duration || 0) / 1000)}s`}
                &lt;/span&gt;
              }
            /&gt;
          )}
        &lt;/Space&gt;

        &lt;Space&gt;
          {/* Workflow info */}
          &lt;span className=&quot;text-sm text-gray-500&quot;&gt;
            {nodes.length} nodes • {edges.length} connections
          &lt;/span&gt;

          {/* More actions */}
          &lt;Dropdown menu={{ items: moreMenuItems }} trigger={['click']}&gt;
            &lt;Button icon={&lt;SettingOutlined /&gt;} size=&quot;small&quot;&gt;
              &lt;DownOutlined /&gt;
            &lt;/Button&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Workflow Tester Modal */}
      {showTester &amp;&amp; (
        &lt;WorkflowTester nodes={nodes} edges={edges} onClose={() =&gt; setShowTester(false)} /&gt;
      )}

      {/* Execution History Modal */}
      {showHistory &amp;&amp; &lt;ExecutionHistory onClose={() =&gt; setShowHistory(false)} /&gt;}
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionPanel.tsx (Line 1:1 - Line 395:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executionpanel/ExecutionPanel.tsx (Line 5:1 - Line 399:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn277" onclick="toggleCodeBlock('cloneGroup277', 'expandBtn277', 'collapseBtn277')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn277" onclick="toggleCodeBlock('cloneGroup277', 'expandBtn277', 'collapseBtn277')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup277"><code class="language-tsx text-sm text-gray-800">/**
 * Execution Panel
 *
 * Real-time execution monitoring panel inspired by SIM's copilot panel
 * and n8n's execution monitoring. Provides execution console, variables,
 * and performance metrics in a collapsible side panel.
 */

import React, { useEffect, useState } from 'react';
import { useEnhancedExecutionStore } from '@/core/stores/enhancedExecutionStore';
import { cn } from '@/design-system/utils';

interface ExecutionPanelProps {
  isVisible: boolean;
  onToggle: () =&gt; void;
  position?: 'right' | 'bottom';
}

export const ExecutionPanel: React.FC&lt;ExecutionPanelProps&gt; = ({
  isVisible,
  onToggle,
  position = 'right',
}) =&gt; {
  const [activeTab, setActiveTab] = useState&lt;'console' | 'variables' | 'metrics' | 'history'&gt;(
    'console'
  );
  const [autoScroll, setAutoScroll] = useState(true);

  const {
    currentExecution,
    progress,
    nodeStates,
    performanceMetrics,
    executionHistory,
    isConnected,
    lastUpdateTimestamp,
    debugMode,
    setDebugMode,
  } = useEnhancedExecutionStore();

  // Auto-scroll to bottom for console logs
  const consoleRef = React.useRef&lt;HTMLDivElement&gt;(null);

  useEffect(() =&gt; {
    if (autoScroll &amp;&amp; consoleRef.current) {
      consoleRef.current.scrollTop = consoleRef.current.scrollHeight;
    }
  }, [autoScroll]);

  // Get all logs from all nodes
  const getAllLogs = () =&gt; {
    const logs: Array&lt;{
      nodeId: string;
      level: string;
      message: string;
      timestamp: string;
    }&gt; = [];

    nodeStates.forEach((state, nodeId) =&gt; {
      if (state.debugInfo?.logs) {
        state.debugInfo.logs.forEach((log) =&gt; {
          logs.push({
            nodeId,
            ...log,
          });
        });
      }
    });

    return logs.sort((a, b) =&gt; new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());
  };

  // Get current execution variables
  const getExecutionVariables = () =&gt; {
    const variables: Record&lt;string, any&gt; = {};

    nodeStates.forEach((state, nodeId) =&gt; {
      if (state.outputData) {
        variables[`${nodeId}_output`] = state.outputData;
      }
      if (state.debugInfo?.watchedVariables) {
        Object.entries(state.debugInfo.watchedVariables).forEach(([key, value]) =&gt; {
          variables[`${nodeId}_${key}`] = value;
        });
      }
    });

    return variables;
  };

  const renderProgressBar = () =&gt; {
    if (!progress) return null;

    const { progressPercentage, completedNodes, totalNodes, failedNodes } = progress;

    return (
      &lt;div className=&quot;mb-4 p-3 bg-gray-800 rounded-lg&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-2&quot;&gt;
          &lt;span className=&quot;text-sm font-medium text-gray-300&quot;&gt;Execution Progress&lt;/span&gt;
          &lt;span className=&quot;text-sm text-gray-400&quot;&gt;
            {completedNodes}/{totalNodes} nodes
          &lt;/span&gt;
        &lt;/div&gt;

        &lt;div className=&quot;w-full bg-gray-700 rounded-full h-2&quot;&gt;
          &lt;div
            className={cn(
              'h-2 rounded-full transition-all duration-300',
              failedNodes &gt; 0 ? 'bg-red-500' : 'bg-blue-500'
            )}
            style={{ width: `${progressPercentage}%` }}
          /&gt;
        &lt;/div&gt;

        {failedNodes &gt; 0 &amp;&amp; (
          &lt;div className=&quot;mt-2 text-xs text-red-400&quot;&gt;{failedNodes} node(s) failed&lt;/div&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderConsoleTab = () =&gt; {
    const logs = getAllLogs();

    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-2&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Console&lt;/h3&gt;
          &lt;div className=&quot;flex gap-2&quot;&gt;
            &lt;button
              onClick={() =&gt; setAutoScroll(!autoScroll)}
              className={cn(
                'text-xs px-2 py-1 rounded',
                autoScroll ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300'
              )}
            &gt;
              Auto-scroll
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; {
                // Clear logs implementation
              }}
              className=&quot;text-xs px-2 py-1 rounded bg-gray-700 text-gray-300 hover:bg-gray-600&quot;
            &gt;
              Clear
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div
          ref={consoleRef}
          className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto text-xs font-mono&quot;
        &gt;
          {logs.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No logs yet. Execute a workflow to see real-time logs.
            &lt;/div&gt;
          ) : (
            logs.map((log, index) =&gt; (
              &lt;div
                key={index}
                className={cn(
                  'mb-1 p-1 rounded',
                  log.level === 'error' &amp;&amp; 'bg-red-900 text-red-200',
                  log.level === 'warn' &amp;&amp; 'bg-yellow-900 text-yellow-200',
                  log.level === 'info' &amp;&amp; 'text-gray-300',
                  log.level === 'debug' &amp;&amp; 'text-gray-500'
                )}
              &gt;
                &lt;span className=&quot;text-gray-500&quot;&gt;
                  [{new Date(log.timestamp).toLocaleTimeString()}]
                &lt;/span&gt;
                &lt;span className=&quot;ml-2 text-blue-400&quot;&gt;[{log.nodeId}]&lt;/span&gt;
                &lt;span className=&quot;ml-2&quot;&gt;{log.message}&lt;/span&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderVariablesTab = () =&gt; {
    const variables = getExecutionVariables();

    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Variables&lt;/h3&gt;
        &lt;div className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto&quot;&gt;
          {Object.keys(variables).length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No variables available. Execute nodes to see output data.
            &lt;/div&gt;
          ) : (
            Object.entries(variables).map(([key, value]) =&gt; (
              &lt;div key={key} className=&quot;mb-3 p-2 bg-gray-800 rounded&quot;&gt;
                &lt;div className=&quot;text-blue-400 text-xs font-mono mb-1&quot;&gt;{key}&lt;/div&gt;
                &lt;div className=&quot;text-gray-300 text-xs break-all&quot;&gt;
                  &lt;pre className=&quot;whitespace-pre-wrap&quot;&gt;
                    {typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value)}
                  &lt;/pre&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderMetricsTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Performance Metrics&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-3&quot;&gt;
          {/* Execution time metrics */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Node Execution Times&lt;/h4&gt;
            {performanceMetrics.nodeExecutionTimes.size === 0 ? (
              &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;No timing data available&lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {Array.from(performanceMetrics.nodeExecutionTimes.entries()).map(
                  ([nodeId, time]) =&gt; (
                    &lt;div key={nodeId} className=&quot;flex justify-between text-xs&quot;&gt;
                      &lt;span className=&quot;text-blue-400&quot;&gt;{nodeId}&lt;/span&gt;
                      &lt;span className=&quot;text-gray-300&quot;&gt;
                        {time &lt; 1000 ? `${time}ms` : `${(time / 1000).toFixed(2)}s`}
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;

          {/* Resource usage */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Resource Usage&lt;/h4&gt;
            &lt;div className=&quot;space-y-1 text-xs&quot;&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Peak Memory:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.peakMemory
                    ? `${(performanceMetrics.resourceUsage.peakMemory / 1024 / 1024).toFixed(1)} MB`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;CPU Time:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.totalCpuTime
                    ? `${performanceMetrics.resourceUsage.totalCpuTime}ms`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Network Requests:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.networkRequests || 0}
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderHistoryTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Execution History&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-2 overflow-y-auto&quot;&gt;
          {executionHistory.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;No execution history&lt;/div&gt;
          ) : (
            executionHistory.slice(0, 10).map((execution) =&gt; (
              &lt;div
                key={execution.id}
                className=&quot;bg-gray-900 rounded border border-gray-700 p-2 hover:bg-gray-800 cursor-pointer&quot;
              &gt;
                &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                  &lt;div className=&quot;flex-1&quot;&gt;
                    &lt;div
                      className={cn(
                        'text-xs font-medium',
                        execution.status === 'completed' &amp;&amp; 'text-green-400',
                        execution.status === 'failed' &amp;&amp; 'text-red-400',
                        execution.status === 'running' &amp;&amp; 'text-blue-400'
                      )}
                    &gt;
                      {execution.status.toUpperCase()}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;
                      {execution.startTime &amp;&amp; new Date(execution.startTime).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                    {execution.duration &amp;&amp; `${(execution.duration / 1000).toFixed(1)}s`}
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!isVisible) {
    return (
      &lt;button
        onClick={onToggle}
        className={cn(
          'fixed z-40 bg-gray-800 text-white p-2 rounded-l shadow-lg hover:bg-gray-700 transition-colors',
          position === 'right'
            ? 'right-0 top-1/2 -translate-y-1/2'
            : 'bottom-0 left-1/2 -translate-x-1/2 rounded-t'
        )}
        title=&quot;Show execution panel&quot;
      &gt;
        {position === 'right' ? '←' : '↑'} Execution
      &lt;/button&gt;
    );
  }

  return (
    &lt;div
      className={cn(
        'fixed z-30 bg-gray-800 border-l border-gray-700 shadow-xl',
        position === 'right' ? 'right-0 top-0 h-full w-80' : 'bottom-0 left-0 right-0 h-80 border-t'
      )}
    &gt;
      {/* Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;h2 className=&quot;text-sm font-semibold text-white&quot;&gt;Execution Monitor&lt;/h2&gt;
          &lt;div
            className={cn('w-2 h-2 rounded-full', isConnected ? 'bg-green-500' : 'bg-red-500')}
            title={isConnected ? 'Connected' : 'Disconnected'}
          /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;button
            onClick={() =&gt; setDebugMode(!debugMode)}
            className={cn(
              'text-xs px-2 py-1 rounded',
              debugMode ? 'bg-yellow-600 text-white' : 'bg-gray-700 text-gray-300'
            )}
          &gt;
            Debug
          &lt;/button&gt;
          &lt;button onClick={onToggle} className=&quot;text-gray-400 hover:text-white&quot;&gt;
            ✕
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Progress bar */}
      {currentExecution &amp;&amp; (
        &lt;div className=&quot;p-3 border-b border-gray-700&quot;&gt;{renderProgressBar()}&lt;/div&gt;
      )}

      {/* Tabs */}
      &lt;div className=&quot;flex border-b border-gray-700&quot;&gt;
        {(['console', 'variables', 'metrics', 'history'] as const).map((tab) =&gt; (
          &lt;button
            key={tab}
            onClick={() =&gt; setActiveTab(tab)}
            className={cn(
              'px-3 py-2 text-xs font-medium border-b-2 transition-colors',
              activeTab === tab
                ? 'border-blue-500 text-blue-400'
                : 'border-transparent text-gray-400 hover:text-gray-200'
            )}
          &gt;
            {tab.charAt(0).toUpperCase() + tab.slice(1)}
          &lt;/button&gt;
        ))}
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 p-3 overflow-hidden&quot;&gt;
        {activeTab === 'console' &amp;&amp; renderConsoleTab()}
        {activeTab === 'variables' &amp;&amp; renderVariablesTab()}
        {activeTab === 'metrics' &amp;&amp; renderMetricsTab()}
        {activeTab === 'history' &amp;&amp; renderHistoryTab()}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default ExecutionPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EnhancedPropertyRenderer.tsx (Line 1:1 - Line 493:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 5:1 - Line 497:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn279" onclick="toggleCodeBlock('cloneGroup279', 'expandBtn279', 'collapseBtn279')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn279" onclick="toggleCodeBlock('cloneGroup279', 'expandBtn279', 'collapseBtn279')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup279"><code class="language-tsx text-sm text-gray-800">/**
 * Enhanced Property Renderer
 *
 * Advanced property form rendering with conditional logic, validation,
 * and dynamic field types. Supports 22+ property types with real-time
 * validation and dependency management.
 */

import {
  DeleteOutlined,
  ExclamationCircleOutlined,
  InfoCircleOutlined,
  PlusOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Tag,
  Tooltip,
  Upload,
} from 'antd';
import React, { useCallback, useMemo, useState } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import { cn } from '@/design-system/utils';

const { TextArea } = Input;
const { Option } = Select;

export interface PropertyFormState {
  [key: string]: any;
}

export interface PropertyValidationResult {
  isValid: boolean;
  errors: Map&lt;string, string&gt;;
}

export interface EnhancedPropertyRendererProps {
  properties: INodeProperty[];
  formState: PropertyFormState;
  onChange: (name: string, value: any) =&gt; void;
  onValidationChange?: (result: PropertyValidationResult) =&gt; void;
  theme?: 'light' | 'dark';
  disabled?: boolean;
}

interface PropertyFieldProps {
  property: INodeProperty;
  value: any;
  onChange: (value: any) =&gt; void;
  disabled?: boolean;
  theme?: 'light' | 'dark';
}

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const [isExpanded, setIsExpanded] = useState(false);

  const renderField = () =&gt; {
    switch (property.type) {
      case 'string':
        return (
          &lt;Input
            value={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            value={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            rows={4}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'boolean':
        return &lt;Switch checked={value || false} onChange={onChange} disabled={disabled} /&gt;;

      case 'select':
        return (
          &lt;Select
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
        return (
          &lt;Select
            mode=&quot;multiple&quot;
            value={value || []}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            showTime
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={value}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={disabled}
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            beforeUpload={() =&gt; false}
            onChange={(info) =&gt; {
              if (info.file) {
                onChange(info.file);
              }
            }}
            disabled={disabled}
          &gt;
            &lt;Button icon={&lt;PlusOutlined /&gt;} disabled={disabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={typeof value === 'string' ? value : JSON.stringify(value, null, 2)}
              onChange={(e) =&gt; {
                try {
                  const parsed = JSON.parse(e.target.value);
                  onChange(parsed);
                } catch {
                  onChange(e.target.value);
                }
              }}
              placeholder={property.placeholder}
              disabled={disabled}
              rows={6}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            {value &amp;&amp; typeof value === 'object' &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;Button size=&quot;small&quot; onClick={() =&gt; setIsExpanded(!isExpanded)} type=&quot;text&quot;&gt;
                  {isExpanded ? 'Collapse' : 'Expand'} JSON
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      case 'expression':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={value || ''}
              onChange={(e) =&gt; onChange(e.target.value)}
              placeholder={property.placeholder || 'Enter JavaScript expression...'}
              disabled={disabled}
              rows={3}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
              Use $input to reference input data, e.g., $input.user.name
            &lt;/div&gt;
          &lt;/div&gt;
        );

      case 'collection':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {(value || []).map((item: any, index: number) =&gt; (
              &lt;Card
                key={index}
                size=&quot;small&quot;
                className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
                title={`Item ${index + 1}`}
                extra={
                  &lt;Button
                    type=&quot;text&quot;
                    danger
                    size=&quot;small&quot;
                    icon={&lt;DeleteOutlined /&gt;}
                    onClick={() =&gt; {
                      const newValue = [...(value || [])];
                      newValue.splice(index, 1);
                      onChange(newValue);
                    }}
                    disabled={disabled}
                  /&gt;
                }
              &gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {property.collectionSchema?.map((field: any) =&gt; (
                    &lt;div key={field.name}&gt;
                      &lt;label className=&quot;text-sm font-medium text-gray-300&quot;&gt;
                        {field.label || field.name}
                      &lt;/label&gt;
                      &lt;PropertyField
                        property={field}
                        value={item[field.name]}
                        onChange={(fieldValue) =&gt; {
                          const newValue = [...(value || [])];
                          newValue[index] = { ...newValue[index], [field.name]: fieldValue };
                          onChange(newValue);
                        }}
                        disabled={disabled}
                        theme={theme}
                      /&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/Card&gt;
            ))}
            &lt;Button
              type=&quot;dashed&quot;
              onClick={() =&gt; {
                const newValue = [...(value || []), {}];
                onChange(newValue);
              }}
              disabled={disabled}
              className=&quot;w-full&quot;
            &gt;
              &lt;PlusOutlined /&gt; Add Item
            &lt;/Button&gt;
          &lt;/div&gt;
        );

      case 'credentialsSelect':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;Select
              value={value?.credentialId}
              onChange={(credentialId) =&gt; onChange({ ...value, credentialId })}
              placeholder=&quot;Select credential&quot;
              disabled={disabled}
              className=&quot;w-full&quot;
              style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
            &gt;
              {/* This would be populated with available credentials */}
              &lt;Option value=&quot;gmail-oauth&quot;&gt;Gmail OAuth&lt;/Option&gt;
              &lt;Option value=&quot;openai-api&quot;&gt;OpenAI API Key&lt;/Option&gt;
            &lt;/Select&gt;
            {value?.credentialId &amp;&amp; (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Tag color=&quot;green&quot;&gt;Connected&lt;/Tag&gt;
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Test Connection
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      default:
        return (
          &lt;Alert message={`Unsupported property type: ${property.type}`} type=&quot;warning&quot; showIcon /&gt;
        );
    }
  };

  return (
    &lt;div className=&quot;space-y-1&quot;&gt;
      {renderField()}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-500 flex items-center gap-1&quot;&gt;
          &lt;InfoCircleOutlined /&gt;
          {property.description}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export const EnhancedPropertyRenderer: React.FC&lt;EnhancedPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  onValidationChange,
  theme = 'dark',
  disabled = false,
}) =&gt; {
  const [validationErrors, setValidationErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const validateProperty = useCallback((property: INodeProperty, value: any): string | null =&gt; {
    // Required validation
    if (property.required &amp;&amp; (!value || value === '')) {
      return `${property.label || property.name} is required`;
    }

    // Type-specific validation
    switch (property.type) {
      case 'string':
      case 'text':
        if (property.maxLength &amp;&amp; value &amp;&amp; value.length &gt; property.maxLength) {
          return `Maximum length is ${property.maxLength} characters`;
        }
        if (property.minLength &amp;&amp; value &amp;&amp; value.length &lt; property.minLength) {
          return `Minimum length is ${property.minLength} characters`;
        }
        if (property.pattern &amp;&amp; value &amp;&amp; !new RegExp(property.pattern).test(value)) {
          return `Value must match pattern: ${property.pattern}`;
        }
        break;

      case 'number':
        if (property.min !== undefined &amp;&amp; value &lt; property.min) {
          return `Minimum value is ${property.min}`;
        }
        if (property.max !== undefined &amp;&amp; value &gt; property.max) {
          return `Maximum value is ${property.max}`;
        }
        break;

      case 'json':
        if (value &amp;&amp; typeof value === 'string') {
          try {
            JSON.parse(value);
          } catch {
            return 'Invalid JSON format';
          }
        }
        break;
    }

    return null;
  }, []);

  const validateAll = useCallback(() =&gt; {
    const errors = new Map&lt;string, string&gt;();

    properties.forEach((property) =&gt; {
      const value = formState[property.name];
      const error = validateProperty(property, value);
      if (error) {
        errors.set(property.name, error);
      }
    });

    setValidationErrors(errors);
    onValidationChange?.({
      isValid: errors.size === 0,
      errors,
    });

    return errors.size === 0;
  }, [properties, formState, validateProperty, onValidationChange]);

  // Validate on form state change
  React.useEffect(() =&gt; {
    validateAll();
  }, [validateAll]);

  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      onChange(name, value);
    },
    [onChange]
  );

  const visibleProperties = useMemo(() =&gt; {
    return properties.filter((property) =&gt; {
      // Simple visibility logic - can be enhanced with complex conditions
      if (property.displayOptions?.show) {
        const conditions = property.displayOptions.show;
        return Object.entries(conditions).every(([key, values]) =&gt; {
          const formValue = formState[key];
          return (values as any[]).includes(formValue);
        });
      }
      return true;
    });
  }, [properties, formState]);

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {visibleProperties.map((property) =&gt; {
        const error = validationErrors.get(property.name);
        const value = formState[property.name];

        return (
          &lt;div key={property.name} className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;label className=&quot;text-sm font-medium text-gray-300 flex items-center gap-2&quot;&gt;
                {property.label || property.name}
                {property.required &amp;&amp; &lt;span className=&quot;text-red-400&quot;&gt;*&lt;/span&gt;}
                {property.description &amp;&amp; (
                  &lt;Tooltip title={property.description}&gt;
                    &lt;InfoCircleOutlined className=&quot;text-gray-500&quot; /&gt;
                  &lt;/Tooltip&gt;
                )}
              &lt;/label&gt;
              {error &amp;&amp; (
                &lt;Tooltip title={error}&gt;
                  &lt;ExclamationCircleOutlined className=&quot;text-red-400&quot; /&gt;
                &lt;/Tooltip&gt;
              )}
            &lt;/div&gt;

            &lt;PropertyField
              property={property}
              value={value}
              onChange={(newValue) =&gt; handlePropertyChange(property.name, newValue)}
              disabled={disabled}
              theme={theme}
            /&gt;

            {error &amp;&amp; &lt;Alert message={error} type=&quot;error&quot; showIcon className=&quot;text-xs&quot; /&gt;}
          &lt;/div&gt;
        );
      })}

      {visibleProperties.length === 0 &amp;&amp; (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
          &lt;div&gt;No properties to configure&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;All properties are hidden by conditional logic&lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default EnhancedPropertyRenderer;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailOutputPanel.tsx (Line 1:1 - Line 346:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 3:1 - Line 348:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn281" onclick="toggleCodeBlock('cloneGroup281', 'expandBtn281', 'collapseBtn281')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn281" onclick="toggleCodeBlock('cloneGroup281', 'expandBtn281', 'collapseBtn281')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup281"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { CheckCircle, ChevronDown, ChevronRight, Edit, Pin, Search } from 'lucide-react';
import type React from 'react';
import { useMemo, useState } from 'react';

type DisplayMode = 'schema' | 'table' | 'json';

interface EmailOutputPanelProps {
  selectedEmail?: any;
  isVisible?: boolean;
}

const EmailOutputPanel: React.FC&lt;EmailOutputPanelProps&gt; = ({ selectedEmail, isVisible = true }) =&gt; {
  const [displayMode, setDisplayMode] = useState&lt;DisplayMode&gt;('schema');
  const [searchTerm, setSearchTerm] = useState('');
  const [expandedItems, setExpandedItems] = useState&lt;Set&lt;string&gt;&gt;(
    new Set(['labelIds', 'headers', 'from', 'to'])
  );

  // Filter data based on search term
  const filteredData = useMemo(() =&gt; {
    if (!searchTerm || !selectedEmail) return selectedEmail;

    const filterObject = (obj: any, path = ''): any =&gt; {
      if (typeof obj === 'string') {
        return obj.toLowerCase().includes(searchTerm.toLowerCase()) ? obj : null;
      }
      if (typeof obj === 'number') {
        return obj.toString().includes(searchTerm) ? obj : null;
      }
      if (Array.isArray(obj)) {
        const filtered = obj.filter((item, index) =&gt; {
          const result = filterObject(item, `${path}[${index}]`);
          return result !== null;
        });
        return filtered.length &gt; 0 ? filtered : null;
      }
      if (typeof obj === 'object' &amp;&amp; obj !== null) {
        const filtered: any = {};
        for (const [key, value] of Object.entries(obj)) {
          const newPath = path ? `${path}.${key}` : key;
          if (key.toLowerCase().includes(searchTerm.toLowerCase())) {
            filtered[key] = value;
          } else {
            const result = filterObject(value, newPath);
            if (result !== null) {
              filtered[key] = result;
            }
          }
        }
        return Object.keys(filtered).length &gt; 0 ? filtered : null;
      }
      return null;
    };

    return filterObject(selectedEmail);
  }, [selectedEmail, searchTerm]);

  const toggleExpanded = (path: string) =&gt; {
    const newExpanded = new Set(expandedItems);
    if (newExpanded.has(path)) {
      newExpanded.delete(path);
    } else {
      newExpanded.add(path);
    }
    setExpandedItems(newExpanded);
  };

  // Get data type icon
  const getTypeIcon = (value: any) =&gt; {
    if (typeof value === 'string') {
      return &lt;span className=&quot;text-blue-400&quot;&gt;Aa&lt;/span&gt;;
    }
    if (typeof value === 'number') {
      return &lt;span className=&quot;text-green-400&quot;&gt;#&lt;/span&gt;;
    }
    if (Array.isArray(value)) {
      return &lt;span className=&quot;text-purple-400&quot;&gt;[]&lt;/span&gt;;
    }
    if (typeof value === 'object') {
      return &lt;span className=&quot;text-yellow-400&quot;&gt;{}&lt;/span&gt;;
    }
    return &lt;span className=&quot;text-gray-400&quot;&gt;?&lt;/span&gt;;
  };

  // Render schema view
  const renderSchemaItem = (key: string, value: any, path: string, nestLevel: number = 0) =&gt; {
    const isExpanded = expandedItems.has(path);
    const hasChildren = Array.isArray(value) || (typeof value === 'object' &amp;&amp; value !== null);

    return (
      &lt;div key={path} className=&quot;border-b border-gray-700 last:border-b-0&quot;&gt;
        &lt;div
          className={`flex items-center py-2 px-3 hover:bg-gray-700 transition-colors ${nestLevel &gt; 0 ? 'pl-8' : ''}`}
          style={{ paddingLeft: `${nestLevel * 24 + 12}px` }}
        &gt;
          {/* Toggle button for expandable items */}
          {hasChildren &amp;&amp; (
            &lt;button
              onClick={() =&gt; toggleExpanded(path)}
              className=&quot;mr-2 p-1 hover:bg-gray-600 rounded&quot;
            &gt;
              {isExpanded ? (
                &lt;ChevronDown className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              ) : (
                &lt;ChevronRight className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              )}
            &lt;/button&gt;
          )}
          {!hasChildren &amp;&amp; &lt;div className=&quot;w-6 mr-2&quot; /&gt;}

          {/* Property name pill */}
          &lt;div className=&quot;flex items-center bg-gray-600 rounded px-2 py-1 mr-3 min-w-0&quot;&gt;
            &lt;div className=&quot;mr-2 flex-shrink-0&quot;&gt;{getTypeIcon(value)}&lt;/div&gt;
            &lt;span className=&quot;text-sm font-medium text-white truncate&quot;&gt;
              {Array.isArray(value) ? `${key}` : key}
            &lt;/span&gt;
          &lt;/div&gt;

          {/* Value display */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            {!hasChildren ? (
              &lt;span className=&quot;text-sm text-gray-300 break-all&quot;&gt;
                {typeof value === 'string' &amp;&amp; value.includes('\n') ? (
                  &lt;div className=&quot;whitespace-pre-wrap&quot;&gt;{value}&lt;/div&gt;
                ) : (
                  String(value)
                )}
              &lt;/span&gt;
            ) : (
              &lt;span className=&quot;text-sm text-gray-400&quot;&gt;
                {Array.isArray(value) ? `Array (${value.length} items)` : 'Object'}
              &lt;/span&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Render children if expanded */}
        {hasChildren &amp;&amp; isExpanded &amp;&amp; (
          &lt;div&gt;
            {Array.isArray(value)
              ? value.map((item, index) =&gt;
                  renderSchemaItem(`[${index}]`, item, `${path}[${index}]`, nestLevel + 1)
                )
              : Object.entries(value).map(([childKey, childValue]) =&gt;
                  renderSchemaItem(childKey, childValue, `${path}.${childKey}`, nestLevel + 1)
                )}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    );
  };

  // Render table view
  const renderTableView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    const flattenObject = (obj: any, prefix = ''): Record&lt;string, any&gt; =&gt; {
      const result: Record&lt;string, any&gt; = {};

      for (const [key, value] of Object.entries(obj)) {
        const newKey = prefix ? `${prefix}.${key}` : key;

        if (Array.isArray(value)) {
          result[newKey] = value.join(', ');
        } else if (typeof value === 'object' &amp;&amp; value !== null) {
          // For nested objects, show a preview
          result[newKey] = `Object (${Object.keys(value).length} properties)`;
        } else {
          result[newKey] = value;
        }
      }

      return result;
    };

    const flatData = flattenObject(selectedEmail);

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;table className=&quot;w-full text-sm&quot;&gt;
          &lt;thead&gt;
            &lt;tr className=&quot;border-b border-gray-600&quot;&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Property&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Value&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Type&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            {Object.entries(flatData).map(([key, value]) =&gt; (
              &lt;tr key={key} className=&quot;border-b border-gray-700 hover:bg-gray-700&quot;&gt;
                &lt;td className=&quot;py-2 px-3 text-blue-300 font-mono text-xs&quot;&gt;{key}&lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-300 break-all&quot;&gt;
                  {typeof value === 'string' &amp;&amp; value.length &gt; 100
                    ? `${value.substring(0, 100)}...`
                    : String(value)}
                &lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-400 text-xs&quot;&gt;{typeof value}&lt;/td&gt;
              &lt;/tr&gt;
            ))}
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    );
  };

  // Render JSON view
  const renderJsonView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;pre className=&quot;text-sm text-gray-300 whitespace-pre-wrap p-4 bg-gray-900 rounded border border-gray-600 font-mono&quot;&gt;
          {JSON.stringify(filteredData || selectedEmail, null, 2)}
        &lt;/pre&gt;
      &lt;/div&gt;
    );
  };

  const renderContent = () =&gt; {
    if (!selectedEmail) {
      return (
        &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
              &lt;span className=&quot;text-2xl&quot;&gt;📧&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;p className=&quot;mb-2&quot;&gt;Select an email from the input column&lt;/p&gt;
          &lt;p className=&quot;text-gray-400&quot;&gt;to view its detailed structure&lt;/p&gt;
        &lt;/div&gt;
      );
    }

    switch (displayMode) {
      case 'schema':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            {filteredData ? (
              Object.entries(filteredData).map(([key, value]) =&gt; renderSchemaItem(key, value, key))
            ) : (
              &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No matching data found&lt;/div&gt;
            )}
          &lt;/div&gt;
        );
      case 'table':
        return renderTableView();
      case 'json':
        return renderJsonView();
      default:
        return null;
    }
  };

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
            OUTPUT
            {selectedEmail &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Email selected&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {selectedEmail &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search email data&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}
                &gt;
                  {label}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;

            {/* Action buttons */}
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;&gt;
                &lt;Edit className=&quot;w-4 h-4&quot; /&gt;
                edit
              &lt;/button&gt;
              &lt;button className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;&gt;
                &lt;Pin className=&quot;w-4 h-4&quot; /&gt; pin
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Email info */}
        {selectedEmail &amp;&amp; (
          &lt;div className=&quot;mt-3 flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;From:&lt;/span&gt; {selectedEmail.from || 'Unknown'}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;Subject:&lt;/span&gt;{' '}
              {selectedEmail.subject || 'No subject'}
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 overflow-hidden&quot;&gt;{renderContent()}&lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EmailOutputPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailInputPanel.tsx (Line 1:1 - Line 255:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailinputpanel/EmailInputPanel.tsx (Line 2:1 - Line 256:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn283" onclick="toggleCodeBlock('cloneGroup283', 'expandBtn283', 'collapseBtn283')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn283" onclick="toggleCodeBlock('cloneGroup283', 'expandBtn283', 'collapseBtn283')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup283"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { Clock, Mail, Paperclip, Search, Star } from 'lucide-react';
import type React from 'react';
import { useState } from 'react';

interface EmailInputPanelProps {
  emails?: any[];
  selectedEmailId?: string;
  onEmailSelect: (email: any) =&gt; void;
  isVisible?: boolean;
}

const EmailInputPanel: React.FC&lt;EmailInputPanelProps&gt; = ({
  emails = [],
  selectedEmailId,
  onEmailSelect,
  isVisible = true,
}) =&gt; {
  const [searchTerm, setSearchTerm] = useState('');

  // Filter emails based on search term
  const filteredEmails = emails.filter((email) =&gt; {
    if (!searchTerm) return true;
    const searchLower = searchTerm.toLowerCase();
    return (
      email.subject?.toLowerCase().includes(searchLower) ||
      email.from?.toLowerCase().includes(searchLower) ||
      email.snippet?.toLowerCase().includes(searchLower)
    );
  });

  // Format date
  const formatDate = (dateString: string) =&gt; {
    try {
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now.getTime() - date.getTime();
      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
      const diffDays = Math.floor(diffHours / 24);

      if (diffHours &lt; 1) {
        return 'Just now';
      } else if (diffHours &lt; 24) {
        return `${diffHours}h ago`;
      } else if (diffDays &lt; 7) {
        return `${diffDays}d ago`;
      } else {
        return date.toLocaleDateString();
      }
    } catch {
      return dateString;
    }
  };

  // Extract sender name from email
  const getSenderName = (from: string) =&gt; {
    if (!from) return 'Unknown';

    // Handle &quot;Name &lt;email@domain.com&gt;&quot; format
    const match = from.match(/^(.+?)\s*&lt;(.+)&gt;$/);
    if (match) {
      return match[1].trim();
    }

    // Handle plain email format
    if (from.includes('@')) {
      return from.split('@')[0];
    }

    return from;
  };

  // Get sender avatar color based on email
  const getAvatarColor = (from: string) =&gt; {
    const colors = [
      'bg-blue-500',
      'bg-green-500',
      'bg-yellow-500',
      'bg-red-500',
      'bg-purple-500',
      'bg-pink-500',
      'bg-indigo-500',
      'bg-teal-500',
    ];
    const hash = from.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  };

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
            INPUT
            &lt;span className=&quot;ml-2 text-xs bg-blue-600 text-white px-2 py-1 rounded-full&quot;&gt;
              {filteredEmails.length} emails
            &lt;/span&gt;
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Search */}
        {emails.length &gt; 0 &amp;&amp; (
          &lt;div className=&quot;relative&quot;&gt;
            &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
            &lt;input
              type=&quot;text&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              placeholder=&quot;Search emails...&quot;
              className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
            /&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Email List */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;
        {emails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
                &lt;Mail className=&quot;w-8 h-8 text-gray-400&quot; /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;p className=&quot;mb-2&quot;&gt;No emails loaded&lt;/p&gt;
            &lt;p className=&quot;text-gray-400&quot;&gt;Test the Gmail trigger to see emails&lt;/p&gt;
          &lt;/div&gt;
        ) : filteredEmails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;p&gt;No emails match your search&lt;/p&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-1 p-2&quot;&gt;
            {filteredEmails.map((email, index) =&gt; {
              const isSelected = selectedEmailId === email.id;
              const senderName = getSenderName(email.from);
              const avatarColor = getAvatarColor(email.from);

              return (
                &lt;div
                  key={email.id || index}
                  onClick={() =&gt; onEmailSelect(email)}
                  className={`p-3 rounded-lg cursor-pointer transition-all duration-200 border ${
                    isSelected
                      ? 'bg-blue-600 border-blue-500 text-white'
                      : 'bg-gray-800 border-gray-700 hover:bg-gray-700 hover:border-gray-600 text-gray-100'
                  }`}
                &gt;
                  &lt;div className=&quot;flex items-start space-x-3&quot;&gt;
                    {/* Avatar */}
                    &lt;div
                      className={`w-8 h-8 rounded-full ${avatarColor} flex items-center justify-center flex-shrink-0 text-white text-sm font-medium`}
                    &gt;
                      {senderName.charAt(0).toUpperCase()}
                    &lt;/div&gt;

                    {/* Email Content */}
                    &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
                      {/* Header */}
                      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
                        &lt;div className=&quot;flex items-center space-x-2 min-w-0&quot;&gt;
                          &lt;span
                            className={`font-medium text-sm truncate ${
                              isSelected ? 'text-white' : 'text-gray-200'
                            }`}
                          &gt;
                            {senderName}
                          &lt;/span&gt;

                          {/* Indicators */}
                          &lt;div className=&quot;flex items-center space-x-1 flex-shrink-0&quot;&gt;
                            {email.hasAttachments &amp;&amp; (
                              &lt;Paperclip className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                            )}
                            {email.isUnread &amp;&amp; (
                              &lt;div className=&quot;w-2 h-2 bg-blue-400 rounded-full&quot;&gt;&lt;/div&gt;
                            )}
                            {email.labels?.includes('STARRED') &amp;&amp; (
                              &lt;Star className=&quot;w-3 h-3 text-yellow-400 fill-current&quot; /&gt;
                            )}
                          &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div className=&quot;flex items-center space-x-2 flex-shrink-0&quot;&gt;
                          &lt;Clock className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                          &lt;span
                            className={`text-xs ${isSelected ? 'text-blue-100' : 'text-gray-400'}`}
                          &gt;
                            {formatDate(email.date)}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      {/* Subject */}
                      &lt;div
                        className={`text-sm font-medium mb-1 truncate ${
                          isSelected ? 'text-white' : 'text-gray-100'
                        }`}
                      &gt;
                        {email.subject || '(No subject)'}
                      &lt;/div&gt;

                      {/* Snippet */}
                      &lt;div
                        className={`text-xs leading-relaxed line-clamp-2 ${
                          isSelected ? 'text-blue-100' : 'text-gray-400'
                        }`}
                      &gt;
                        {email.snippet || email.body || 'No content preview available'}
                      &lt;/div&gt;

                      {/* Labels */}
                      {email.labels &amp;&amp; email.labels.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;flex flex-wrap gap-1 mt-2&quot;&gt;
                          {email.labels.slice(0, 3).map((label: string) =&gt; (
                            &lt;span
                              key={label}
                              className={`px-2 py-1 text-xs rounded-full ${
                                isSelected
                                  ? 'bg-blue-700 text-blue-100'
                                  : 'bg-gray-700 text-gray-300'
                              }`}
                            &gt;
                              {label}
                            &lt;/span&gt;
                          ))}
                          {email.labels.length &gt; 3 &amp;&amp; (
                            &lt;span
                              className={`text-xs ${
                                isSelected ? 'text-blue-200' : 'text-gray-400'
                              }`}
                            &gt;
                              +{email.labels.length - 3} more
                            &lt;/span&gt;
                          )}
                        &lt;/div&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EmailInputPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DynamicPropertyRenderer.tsx (Line 1:1 - Line 760:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 6:1 - Line 765:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn285" onclick="toggleCodeBlock('cloneGroup285', 'expandBtn285', 'collapseBtn285')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn285" onclick="toggleCodeBlock('cloneGroup285', 'expandBtn285', 'collapseBtn285')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup285"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { DeleteOutlined, PlusOutlined, UploadOutlined } from '@ant-design/icons';
import {
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Upload,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import type {
  INodeProperty,
  PropertyEvaluationContext,
  PropertyFormState,
  PropertyValue,
} from '@/core';

// Simple property evaluation for INodeProperty (registry system)
const evaluateINodeProperty = (property: INodeProperty, context: PropertyEvaluationContext) =&gt; {
  // For registry system, we use simpler logic
  const formState = context.formState || {};
  const displayOptions = property.displayOptions;

  let visible = true;
  const disabled = false;
  const required = property.required || false;

  if (displayOptions?.show) {
    visible = Object.entries(displayOptions.show).every(([key, values]) =&gt; {
      const currentValue = formState[key];
      return (
        Array.isArray(values) &amp;&amp;
        currentValue !== undefined &amp;&amp;
        currentValue !== null &amp;&amp;
        values.includes(currentValue as string | number | boolean)
      );
    });
  }

  if (displayOptions?.hide) {
    const shouldHide = Object.entries(displayOptions.hide).some(([key, values]) =&gt; {
      const currentValue = formState[key];
      return (
        Array.isArray(values) &amp;&amp;
        currentValue !== undefined &amp;&amp;
        currentValue !== null &amp;&amp;
        values.includes(currentValue as string | number | boolean)
      );
    });
    if (shouldHide) visible = false;
  }

  return { visible, disabled, required };
};

const { TextArea } = Input;
const { Option } = Select;

interface DynamicPropertyRendererProps {
  properties: INodeProperty[];
  formState: PropertyFormState;
  onChange: (name: string, value: PropertyValue) =&gt; void;
  context?: Partial&lt;PropertyEvaluationContext&gt;;
  disabled?: boolean;
  theme?: 'light' | 'dark';
}

interface PropertyFieldProps {
  property: INodeProperty;
  value: PropertyValue;
  onChange: (value: PropertyValue) =&gt; void;
  context: PropertyEvaluationContext;
  disabled?: boolean;
  theme?: 'light' | 'dark';
}

// Theme-based styling helper
const getThemeStyles = (theme: 'light' | 'dark', hasErrors: boolean = false) =&gt; {
  if (theme === 'light') {
    return {
      backgroundColor: '#ffffff',
      borderColor: hasErrors ? '#ff4d4f' : '#d1d5db',
      color: '#1f2937',
      dropdownStyle: {
        backgroundColor: '#ffffff',
        border: '1px solid #d1d5db',
      },
    };
  } else {
    return {
      backgroundColor: '#4b5563',
      borderColor: hasErrors ? '#ff4d4f' : '#6b7280',
      color: '#ffffff',
      dropdownStyle: {
        backgroundColor: '#374151',
        border: '1px solid #6b7280',
      },
    };
  }
};

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  context,
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const evaluation = evaluateINodeProperty(property, context);

  if (!evaluation.visible) {
    return null;
  }

  const hasErrors = false; // Simplified validation for registry system
  const isDisabled = disabled || evaluation.disabled;
  const themeStyles = getThemeStyles(theme, hasErrors);

  const commonProps = {
    placeholder: property.placeholder,
    disabled: isDisabled,
    style: {
      backgroundColor: themeStyles.backgroundColor,
      borderColor: themeStyles.borderColor,
      color: themeStyles.color,
      ...(hasErrors ? { borderColor: '#ff4d4f' } : {}),
    },
  };

  // Helper function to get credential icons
  const getCredentialIcon = (type: string) =&gt; {
    switch (type) {
      case 'openaiApi':
        return '🤖';
      case 'anthropicApi':
        return '🧠';
      case 'googleAiApi':
        return '🔷';
      case 'azureOpenAiApi':
        return '☁️';
      case 'awsBedrockApi':
        return '🟠';
      case 'gmailOAuth2':
        return '📧';
      case 'postgres':
        return '🐘';
      case 'mysql':
        return '🐬';
      default:
        return '🔑';
    }
  };

  const renderBasicField = () =&gt; {
    switch (property.type) {
      case 'string':
        return (
          &lt;Input
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={property.rows || 4}
            autoSize={{ minRows: property.rows || 4, maxRows: 10 }}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            value={value as number}
            onChange={(val) =&gt; onChange(val)}
            min={property.min}
            max={property.max}
            step={property.step || 1}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch checked={(value as boolean) || false} onChange={onChange} disabled={isDisabled} /&gt;
        );

      case 'select':
        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={onChange}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={(value as string[]) || []}
            onChange={onChange}
            className=&quot;ant-select-multiple&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            tagRender={(props) =&gt; {
              const { label, closable, onClose } = props;
              return (
                &lt;span
                  style={{
                    backgroundColor: '#1f2937',
                    border: '1px solid #4b5563',
                    color: '#ffffff',
                    borderRadius: '4px',
                    padding: '2px 8px',
                    margin: '2px',
                    display: 'inline-flex',
                    alignItems: 'center',
                    fontSize: '12px',
                  }}
                &gt;
                  {label}
                  {closable &amp;&amp; (
                    &lt;span
                      onClick={onClose}
                      style={{
                        marginLeft: '4px',
                        cursor: 'pointer',
                        color: '#9ca3af',
                      }}
                      onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ffffff')}
                      onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#9ca3af')}
                    &gt;
                      ×
                    &lt;/span&gt;
                  )}
                &lt;/span&gt;
              );
            }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'credentialsSelect': {
        // Get available credentials from context (registry system)
        const credentialTypes = property.credentialTypes || [];
        const availableCredentials =
          context.credentials?.filter(
            (cred: any) =&gt; credentialTypes.length === 0 || credentialTypes.includes(cred.type)
          ) || [];

        // Debug logging for credential filtering
        if (property.name === 'credential' &amp;&amp; credentialTypes.includes('gmailOAuth2')) {
        }

        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={(selectedValue) =&gt; {
              onChange(selectedValue);

              // Sync with the other credential field
              if (context.onCredentialChange) {
                context.onCredentialChange(selectedValue);
              }

              // Trigger auto-population if a credential is selected
              if (selectedValue &amp;&amp; context.onCredentialSelect) {
                const selectedCredential = availableCredentials.find(
                  (cred: any) =&gt; cred.id === selectedValue
                );
                if (selectedCredential) {
                  context.onCredentialSelect(selectedCredential);
                }
              }
            }}
            placeholder=&quot;Select a credential...&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            dropdownRender={(menu) =&gt; (
              &lt;div&gt;
                {menu}
                {credentialTypes.length &gt; 0 &amp;&amp; (
                  &lt;div
                    style={{
                      padding: '8px',
                      borderTop: '1px solid #6b7280',
                      backgroundColor: '#374151',
                    }}
                  &gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      onClick={() =&gt; {
                        // Trigger credential creation modal
                        if (context.onCreateCredential) {
                          context.onCreateCredential(credentialTypes[0]);
                        } else {
                        }
                      }}
                      style={{
                        color: '#3b82f6',
                        padding: '2px 8px',
                        height: 'auto',
                      }}
                    &gt;
                      + Create New Credential
                    &lt;/Button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &gt;
            &lt;Option value=&quot;&quot; style={{ backgroundColor: '#374151', color: '#ffffff' }}&gt;
              No credential selected
            &lt;/Option&gt;
            {availableCredentials.map((credential: any) =&gt; {
              const credTypeDef = context.credentialTypes?.find(
                (ct: any) =&gt; ct.name === credential.type
              );
              const icon =
                credTypeDef?.icon &amp;&amp; typeof credTypeDef.icon === 'string'
                  ? credTypeDef.icon
                  : getCredentialIcon(credential.type);
              const displayName =
                credential.name || `${credTypeDef?.displayName || credential.type} Credential`;

              return (
                &lt;Option
                  key={credential.id}
                  value={credential.id}
                  style={{ backgroundColor: '#374151', color: '#ffffff' }}
                &gt;
                  &lt;div
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '8px',
                    }}
                  &gt;
                    &lt;span style={{ fontSize: '14px' }}&gt;{icon}&lt;/span&gt;
                    &lt;div style={{ flex: 1 }}&gt;
                      &lt;div style={{ fontWeight: 500 }}&gt;{displayName}&lt;/div&gt;
                      &lt;div style={{ fontSize: '11px', color: '#9ca3af' }}&gt;
                        {credential.testedAt
                          ? credential.isValid
                            ? '✓ Tested'
                            : '⚠ Test failed'
                          : 'Not tested'}
                        {credential.updatedAt &amp;&amp; (
                          &lt;span style={{ marginLeft: '8px' }}&gt;
                            {new Date(credential.updatedAt).toLocaleDateString()}
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div style={{ display: 'flex', gap: '4px' }}&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onEditCredential) {
                            context.onEditCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#3b82f6')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Edit credential&quot;
                      &gt;
                        ✏️
                      &lt;/button&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onDeleteCredential &amp;&amp; confirm(`Delete &quot;${displayName}&quot;?`)) {
                            context.onDeleteCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ef4444')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Delete credential&quot;
                      &gt;
                        🗑️
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Option&gt;
              );
            })}
          &lt;/Select&gt;
        );
      }

      case 'dateTime':
        return (
          &lt;DatePicker
            {...commonProps}
            showTime
            value={value ? new Date(value as string) : null}
            onChange={(date) =&gt; onChange(date?.toISOString() || null)}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={(value as string) || '#000000'}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={isDisabled}
          /&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || '{}'}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={6}
            placeholder=&quot;Enter valid JSON...&quot;
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            {...commonProps}
            onChange={(info) =&gt; {
              if (info.file.status === 'done') {
                onChange(info.file.response?.url || info.file.name);
              }
            }}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;} disabled={isDisabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      default:
        return (
          &lt;Input
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const collectionValue = (value as any[]) || [];
    const isMultiple = property.typeOptions?.multipleValues;

    if (!isMultiple) {
      // Single collection item
      const itemValue = collectionValue[0] || {};
      return (
        &lt;Card
          size=&quot;small&quot;
          style={{
            marginBottom: 8,
            backgroundColor: themeStyles.backgroundColor,
            borderColor: themeStyles.borderColor,
            color: themeStyles.color,
          }}
        &gt;
          {property.values?.map((valueProperty: any) =&gt; (
            &lt;PropertyField
              key={valueProperty.name}
              property={valueProperty as INodeProperty}
              value={itemValue[valueProperty.name]}
              onChange={(newValue) =&gt; {
                const newItem = {
                  ...itemValue,
                  [valueProperty.name]: newValue,
                };
                onChange([newItem]);
              }}
              context={context}
              disabled={isDisabled}
              theme={theme}
            /&gt;
          ))}
        &lt;/Card&gt;
      );
    }

    // Multiple collection items
    return (
      &lt;div&gt;
        {collectionValue.map((item, index) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: 8,
              backgroundColor: themeStyles.backgroundColor,
              borderColor: themeStyles.borderColor,
              color: themeStyles.color,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;DeleteOutlined /&gt;}
                onClick={() =&gt; {
                  const newValue = collectionValue.filter((_, i) =&gt; i !== index);
                  onChange(newValue);
                }}
                disabled={isDisabled}
              /&gt;
            }
          &gt;
            {property.values?.map((valueProperty: any) =&gt; (
              &lt;PropertyField
                key={`${index}-${valueProperty.name}`}
                property={valueProperty as INodeProperty}
                value={item[valueProperty.name]}
                onChange={(newValue) =&gt; {
                  const newItems = [...collectionValue];
                  newItems[index] = {
                    ...newItems[index],
                    [valueProperty.name]: newValue,
                  };
                  onChange(newItems);
                }}
                context={context}
                disabled={isDisabled}
                theme={theme}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const defaultItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((valueProperty: any) =&gt; {
              defaultItem[valueProperty.name] =
                valueProperty.default !== undefined ? valueProperty.default : '';
            });
            onChange([...collectionValue, defaultItem]);
          }}
          disabled={isDisabled}
          block
          style={{
            backgroundColor: '#4b5563', // Darker background
            borderColor: '#6b7280', // Lighter border
            color: '#ffffff', // Pure white text
          }}
        &gt;
          {property.typeOptions?.multipleValueButtonText || `Add ${property.displayName}`}
        &lt;/Button&gt;
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    if (property.type === 'collection' || property.type === 'fixedCollection') {
      return renderCollectionField();
    }
    return renderBasicField();
  };

  return (
    &lt;div className=&quot;mb-4&quot;&gt;
      {/* Custom label for dark theme */}
      &lt;label className=&quot;block text-sm font-medium text-gray-100 mb-2&quot;&gt;
        {property.displayName}
        {evaluation.required &amp;&amp; &lt;span className=&quot;text-red-400 ml-1&quot;&gt;*&lt;/span&gt;}
      &lt;/label&gt;

      {/* Form field */}
      {renderField()}

      {/* Description */}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-300 mt-1&quot;&gt;{property.description}&lt;/div&gt;
      )}

      {/* Error messages */}
      {hasErrors &amp;&amp; (
        &lt;div className=&quot;mt-1&quot;&gt;
          &lt;div className=&quot;text-xs text-red-300&quot;&gt;Validation error occurred&lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

const DynamicPropertyRenderer: React.FC&lt;DynamicPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  context = {},
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const credentialProp = properties.find((p) =&gt; p.name === 'credential');
  if (credentialProp) {
  }

  const [localFormState, setLocalFormState] = useState&lt;PropertyFormState&gt;(formState);

  // Update local state when props change
  useEffect(() =&gt; {
    setLocalFormState(formState);
  }, [formState]);

  const evaluationContext: PropertyEvaluationContext = {
    formState: localFormState,
    nodeData: context.nodeData,
    credentials: context.credentials,
    workflow: context.workflow,
  };

  const handleChange = useCallback(
    (name: string, value: PropertyValue) =&gt; {
      const newFormState = { ...localFormState, [name]: value };
      setLocalFormState(newFormState);
      onChange(name, value);
    },
    [localFormState, onChange]
  );

  // Group properties if they have grouping information
  const groupedProperties = properties.reduce(
    (groups, property) =&gt; {
      const groupName = 'default'; // Can be extended to support property groups
      if (!groups[groupName]) {
        groups[groupName] = [];
      }
      groups[groupName].push(property);
      return groups;
    },
    {} as Record&lt;string, INodeProperty[]&gt;
  );

  return (
    &lt;div className=&quot;dynamic-property-renderer&quot;&gt;
      {Object.entries(groupedProperties).map(([groupName, groupProperties]) =&gt; (
        &lt;div key={groupName}&gt;
          {(groupProperties as INodeProperty[]).map((property: any, index: number) =&gt; (
            &lt;PropertyField
              key={`${property.name}-${index}`}
              property={property}
              value={localFormState[property.name]}
              onChange={(value) =&gt; handleChange(property.name, value)}
              context={evaluationContext}
              disabled={disabled}
              theme={theme}
            /&gt;
          ))}
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
};

export default DynamicPropertyRenderer;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DebugPanel.tsx (Line 1:1 - Line 796:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/debugpanel/DebugPanel.tsx (Line 6:1 - Line 801:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn287" onclick="toggleCodeBlock('cloneGroup287', 'expandBtn287', 'collapseBtn287')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn287" onclick="toggleCodeBlock('cloneGroup287', 'expandBtn287', 'collapseBtn287')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup287"><code class="language-tsx text-sm text-gray-800">/**
 * Debug Panel Component
 *
 * Comprehensive debugging interface providing:
 * - Breakpoint management and execution control
 * - Step-through debugging with call stack visualization
 * - Data inspection and variable watching
 * - Execution history and replay functionality
 * - Performance profiling and metrics
 */

import {
  BugOutlined,
  CodeOutlined,
  DeleteOutlined,
  EyeOutlined,
  HistoryOutlined,
  InfoCircleOutlined,
  PauseCircleOutlined,
  PlayCircleOutlined,
  PlusOutlined,
  SettingOutlined,
  StepBackwardOutlined,
  StepForwardOutlined,
  StopOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Form,
  Input,
  Modal,
  Switch,
  Tabs,
  Tag,
  Timeline,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { enhancedDebuggingService } from '@/core/services/enhancedDebuggingService';
import type {
  CallStackFrame,
  DebugEvent,
  DebugMetrics,
  DebugSession,
  ExecutionStep,
  WatchExpression,
} from '@/core/types/debugging';
import { JsonViewer } from '@/design-system';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;

interface DebugPanelProps {
  workflowId?: string;
  executionId?: string;
  className?: string;
}

const DebugPanel: React.FC&lt;DebugPanelProps&gt; = ({ workflowId, executionId, className }) =&gt; {
  const [activeTab, setActiveTab] = useState('controls');
  const [session, setSession] = useState&lt;DebugSession | null&gt;(null);
  const [isDebugging, setIsDebugging] = useState(false);
  const [isPaused, setIsPaused] = useState(false);
  const [_currentStep, _setCurrentStep] = useState&lt;ExecutionStep | null&gt;(null);

  const [watchExpressions, _setWatchExpressions] = useState&lt;WatchExpression[]&gt;([]);
  const [callStack, setCallStack] = useState&lt;CallStackFrame[]&gt;([]);
  const [variables, setVariables] = useState&lt;Record&lt;string, any&gt;&gt;({});
  const [executionHistory, _setExecutionHistory] = useState&lt;ExecutionStep[]&gt;([]);
  const [metrics, setMetrics] = useState&lt;DebugMetrics | null&gt;(null);
  const [isBreakpointModalOpen, setIsBreakpointModalOpen] = useState(false);
  const [isWatchModalOpen, setIsWatchModalOpen] = useState(false);
  const [selectedNodeId, setSelectedNodeId] = useState&lt;string&gt;('');
  const [newWatchExpression, setNewWatchExpression] = useState('');

  // Subscribe to debug events
  useEffect(() =&gt; {
    const unsubscribe = enhancedDebuggingService.subscribe((event: DebugEvent) =&gt; {
      handleDebugEvent(event);
    });

    return unsubscribe;
  }, [handleDebugEvent]);

  const handleDebugEvent = useCallback(
    (event: DebugEvent) =&gt; {
      switch (event.type) {
        case 'session-started':
          setIsDebugging(true);
          break;
        case 'session-ended':
          setIsDebugging(false);
          setIsPaused(false);
          setSession(null);
          break;
        case 'step-completed':
          _setCurrentStep(event.data);
          updateSessionData();
          break;
        case 'breakpoint-hit':
          setIsPaused(true);
          updateSessionData();
          break;
        case 'error-occurred':
          setIsPaused(true);
          updateSessionData();
          break;
      }
    },
    [updateSessionData]
  );

  const updateSessionData = useCallback(() =&gt; {
    const currentSession = enhancedDebuggingService.getCurrentSession();
    if (currentSession) {
      setSession(currentSession);
      setCallStack(enhancedDebuggingService.getCallStack());
      setVariables(enhancedDebuggingService.getVariables());
      setMetrics(enhancedDebuggingService.getDebugMetrics());
    }
  }, []);

  const startDebugging = useCallback(async () =&gt; {
    if (!workflowId || !executionId) return;

    try {
      await enhancedDebuggingService.startDebugging(workflowId, executionId);
      setIsDebugging(true);
      updateSessionData();
    } catch (_error) {}
  }, [workflowId, executionId, updateSessionData]);

  const stopDebugging = useCallback(() =&gt; {
    enhancedDebuggingService.stopDebugging();
    setIsDebugging(false);
    setIsPaused(false);
    setSession(null);
  }, []);

  const pauseExecution = useCallback(() =&gt; {
    enhancedDebuggingService.pauseExecution();
    setIsPaused(true);
  }, []);

  const resumeExecution = useCallback(() =&gt; {
    enhancedDebuggingService.resumeExecution();
    setIsPaused(false);
  }, []);

  const stepOver = useCallback(() =&gt; {
    enhancedDebuggingService.stepOver();
    setIsPaused(true);
  }, []);

  const stepInto = useCallback(() =&gt; {
    enhancedDebuggingService.stepInto();
    setIsPaused(true);
  }, []);

  const stepOut = useCallback(() =&gt; {
    enhancedDebuggingService.stepOut();
    setIsPaused(true);
  }, []);

  const addBreakpoint = useCallback(
    (nodeId: string, condition?: string) =&gt; {
      enhancedDebuggingService.addBreakpoint(nodeId, {
        nodeId,
        enabled: true,
        hitCount: 0,
        condition,
        actions: [{ type: 'pause' }],
        createdAt: Date.now(),
      });
      updateSessionData();
    },
    [updateSessionData]
  );

  const removeBreakpoint = useCallback(
    (nodeId: string, breakpointId: string) =&gt; {
      enhancedDebuggingService.removeBreakpoint(nodeId, breakpointId);
      updateSessionData();
    },
    [updateSessionData]
  );

  const toggleBreakpoint = useCallback(
    (nodeId: string, breakpointId: string) =&gt; {
      enhancedDebuggingService.toggleBreakpoint(nodeId, breakpointId);
      updateSessionData();
    },
    [updateSessionData]
  );

  const addWatchExpression = useCallback(() =&gt; {
    if (newWatchExpression.trim()) {
      enhancedDebuggingService.addWatchExpression(newWatchExpression.trim());
      setNewWatchExpression('');
      setIsWatchModalOpen(false);
      updateSessionData();
    }
  }, [newWatchExpression, updateSessionData]);

  const removeWatchExpression = useCallback(
    (id: string) =&gt; {
      enhancedDebuggingService.removeWatchExpression(id);
      updateSessionData();
    },
    [updateSessionData]
  );

  const getStatusColor = () =&gt; {
    if (!isDebugging) return 'gray';
    if (isPaused) return 'orange';
    return 'green';
  };

  const getStatusText = () =&gt; {
    if (!isDebugging) return 'Not Debugging';
    if (isPaused) return 'Paused';
    return 'Running';
  };

  const renderDebugControls = () =&gt; (
    &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600 mb-4&quot;&gt;
      &lt;div className=&quot;space-y-4&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;BugOutlined className=&quot;text-blue-400&quot; /&gt;
            &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
              Debug Controls
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Badge
              status={getStatusColor() as any}
              text={getStatusText()}
              className=&quot;text-gray-300&quot;
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          {!isDebugging ? (
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={startDebugging}
              disabled={!workflowId || !executionId}
            &gt;
              Start Debugging
            &lt;/Button&gt;
          ) : (
            &lt;&gt;
              {isPaused ? (
                &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} onClick={resumeExecution}&gt;
                  Resume
                &lt;/Button&gt;
              ) : (
                &lt;Button icon={&lt;PauseCircleOutlined /&gt;} onClick={pauseExecution}&gt;
                  Pause
                &lt;/Button&gt;
              )}

              &lt;Button
                icon={&lt;StepForwardOutlined /&gt;}
                onClick={stepOver}
                disabled={!isPaused}
                title=&quot;Step Over&quot;
              /&gt;

              &lt;Button
                icon={&lt;StepBackwardOutlined /&gt;}
                onClick={stepInto}
                disabled={!isPaused}
                title=&quot;Step Into&quot;
              /&gt;

              &lt;Button
                icon={&lt;StopOutlined /&gt;}
                onClick={stepOut}
                disabled={!isPaused}
                title=&quot;Step Out&quot;
              /&gt;

              &lt;Button danger icon={&lt;StopOutlined /&gt;} onClick={stopDebugging}&gt;
                Stop
              &lt;/Button&gt;
            &lt;/&gt;
          )}
        &lt;/div&gt;

        {session &amp;&amp; (
          &lt;div className=&quot;grid grid-cols-2 gap-4 text-sm&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Session ID:&lt;/Text&gt;
              &lt;div className=&quot;text-white font-mono&quot;&gt;{session.id}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Step Count:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.stepCount}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Duration:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;
                {Math.round((Date.now() - session.startTime) / 1000)}s
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Current Node:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.currentNodeId || 'None'}&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderBreakpoints = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Breakpoints
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsBreakpointModalOpen(true)}
        &gt;
          Add Breakpoint
        &lt;/Button&gt;
      &lt;/div&gt;

      {session &amp;&amp; session.breakpoints.size === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;BugOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No breakpoints set&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add breakpoints to pause execution at specific nodes&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Array.from(session?.breakpoints.entries() || []).map(([nodeId, breakpoints]) =&gt;
            breakpoints.map((breakpoint) =&gt; (
              &lt;Card key={breakpoint.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                    &lt;Switch
                      size=&quot;small&quot;
                      checked={breakpoint.enabled}
                      onChange={() =&gt; toggleBreakpoint(nodeId, breakpoint.id)}
                    /&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-white text-sm font-medium&quot;&gt;Node: {nodeId}&lt;/div&gt;
                      {breakpoint.condition &amp;&amp; (
                        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                          Condition: {breakpoint.condition}
                        &lt;/div&gt;
                      )}
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;Hits: {breakpoint.hitCount}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Badge
                      count={breakpoint.hitCount}
                      size=&quot;small&quot;
                      style={{ backgroundColor: '#1890ff' }}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;DeleteOutlined /&gt;}
                      onClick={() =&gt; removeBreakpoint(nodeId, breakpoint.id)}
                      className=&quot;text-red-400 hover:text-red-300&quot;
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            ))
          )}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderWatchExpressions = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Watch Expressions
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsWatchModalOpen(true)}
        &gt;
          Add Watch
        &lt;/Button&gt;
      &lt;/div&gt;

      {watchExpressions.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;EyeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No watch expressions&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add expressions to monitor variable values&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {watchExpressions.map((watch) =&gt; (
            &lt;Card key={watch.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;flex-1&quot;&gt;
                  &lt;div className=&quot;text-white text-sm font-mono&quot;&gt;{watch.expression}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs mt-1&quot;&gt;
                    {watch.error ? (
                      &lt;span className=&quot;text-red-400&quot;&gt;Error: {watch.error}&lt;/span&gt;
                    ) : (
                      &lt;&gt;
                        &lt;span className=&quot;text-green-400&quot;&gt;Value: &lt;/span&gt;
                        &lt;span className=&quot;font-mono&quot;&gt;
                          {typeof watch.value === 'object'
                            ? JSON.stringify(watch.value)
                            : String(watch.value)}
                        &lt;/span&gt;
                        &lt;span className=&quot;text-gray-500 ml-2&quot;&gt;({watch.type})&lt;/span&gt;
                      &lt;/&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; removeWatchExpression(watch.id)}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderCallStack = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Call Stack
      &lt;/Title&gt;

      {callStack.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;CodeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;Call stack is empty&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see the call stack&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={callStack.map((frame, index) =&gt; ({
            color: index === callStack.length - 1 ? 'blue' : 'gray',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{frame.nodeName}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;{frame.nodeType}&lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(frame.timestamp).toLocaleTimeString()}
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderVariables = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Variables
      &lt;/Title&gt;

      {Object.keys(variables).length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;InfoCircleOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No variables available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Variables will appear during execution&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(variables).map(([key, value]) =&gt; (
            &lt;Card key={key} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{key}&lt;/div&gt;
                &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1} maxHeight=&quot;200px&quot; /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderExecutionHistory = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Execution History
      &lt;/Title&gt;

      {executionHistory.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;HistoryOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No execution history&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Execution steps will appear here&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={executionHistory.map((step) =&gt; ({
            color:
              step.action === 'error' ? 'red' : step.action === 'breakpoint' ? 'orange' : 'blue',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-white font-medium&quot;&gt;{step.nodeId}&lt;/span&gt;
                  &lt;Tag
                    color={
                      step.action === 'error'
                        ? 'red'
                        : step.action === 'breakpoint'
                          ? 'orange'
                          : step.action === 'start'
                            ? 'blue'
                            : 'green'
                    }
                  &gt;
                    {step.action}
                  &lt;/Tag&gt;
                &lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(step.timestamp).toLocaleTimeString()}
                  {step.duration &amp;&amp; ` (${step.duration}ms)`}
                &lt;/div&gt;
                {step.error &amp;&amp; (
                  &lt;div className=&quot;text-red-400 text-xs&quot;&gt;Error: {step.error.message}&lt;/div&gt;
                )}
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderMetrics = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Debug Metrics
      &lt;/Title&gt;

      {!metrics ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;SettingOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No metrics available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see performance metrics&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{metrics.totalSteps}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Steps&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{metrics.breakpointHits}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Breakpoint Hits&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-red-400&quot;&gt;{metrics.errors}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Errors&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;
                {Math.round(metrics.averageStepTime)}ms
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Avg Step Time&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{metrics.callStackDepth}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Call Stack Depth&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-yellow-400&quot;&gt;
                {Math.round(metrics.memoryUsage)}MB
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Memory Usage&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;BugOutlined className=&quot;text-red-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Debug Panel
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced debugging tools for workflow execution
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        {renderDebugControls()}

        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;debug-tabs&quot;
          items={[
            {
              key: 'breakpoints',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Breakpoints
                  {session &amp;&amp; session.breakpoints.size &gt; 0 &amp;&amp; (
                    &lt;Badge
                      count={Array.from(session.breakpoints.values()).flat().length}
                      size=&quot;small&quot;
                      className=&quot;ml-2&quot;
                    /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderBreakpoints(),
            },
            {
              key: 'watch',
              label: (
                &lt;span&gt;
                  &lt;EyeOutlined className=&quot;mr-1&quot; /&gt;
                  Watch
                  {watchExpressions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={watchExpressions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderWatchExpressions(),
            },
            {
              key: 'callstack',
              label: (
                &lt;span&gt;
                  &lt;CodeOutlined className=&quot;mr-1&quot; /&gt;
                  Call Stack
                  {callStack.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={callStack.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderCallStack(),
            },
            {
              key: 'variables',
              label: (
                &lt;span&gt;
                  &lt;InfoCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Variables
                  {Object.keys(variables).length &gt; 0 &amp;&amp; (
                    &lt;Badge count={Object.keys(variables).length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderVariables(),
            },
            {
              key: 'history',
              label: (
                &lt;span&gt;
                  &lt;HistoryOutlined className=&quot;mr-1&quot; /&gt;
                  History
                  {executionHistory.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={executionHistory.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderExecutionHistory(),
            },
            {
              key: 'metrics',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Metrics
                &lt;/span&gt;
              ),
              children: renderMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Add Breakpoint Modal */}
      &lt;Modal
        title=&quot;Add Breakpoint&quot;
        open={isBreakpointModalOpen}
        onCancel={() =&gt; setIsBreakpointModalOpen(false)}
        onOk={() =&gt; {
          if (selectedNodeId) {
            addBreakpoint(selectedNodeId);
            setIsBreakpointModalOpen(false);
            setSelectedNodeId('');
          }
        }}
        width={400}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Node ID&quot; required&gt;
            &lt;Input
              value={selectedNodeId}
              onChange={(e) =&gt; setSelectedNodeId(e.target.value)}
              placeholder=&quot;Enter node ID&quot;
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Add Watch Expression Modal */}
      &lt;Modal
        title=&quot;Add Watch Expression&quot;
        open={isWatchModalOpen}
        onCancel={() =&gt; setIsWatchModalOpen(false)}
        onOk={addWatchExpression}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Expression&quot; required&gt;
            &lt;Input
              value={newWatchExpression}
              onChange={(e) =&gt; setNewWatchExpression(e.target.value)}
              placeholder=&quot;e.g., $input.user.name, variables.count, $output.result&quot;
            /&gt;
          &lt;/Form.Item&gt;
          &lt;Alert
            message=&quot;Expression Examples&quot;
            description={
              &lt;ul className=&quot;mt-2 text-sm&quot;&gt;
                &lt;li&gt;
                  &lt;code&gt;$input.user.name&lt;/code&gt; - Access input data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;$output.result&lt;/code&gt; - Access output data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;variables.count&lt;/code&gt; - Access workflow variables
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;JSON.stringify($input)&lt;/code&gt; - Convert to JSON
                &lt;/li&gt;
              &lt;/ul&gt;
            }
            type=&quot;info&quot;
            showIcon
          /&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default DebugPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DataInspector.tsx (Line 1:1 - Line 602:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/datainspector/DataInspector.tsx (Line 4:1 - Line 605:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn289" onclick="toggleCodeBlock('cloneGroup289', 'expandBtn289', 'collapseBtn289')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn289" onclick="toggleCodeBlock('cloneGroup289', 'expandBtn289', 'collapseBtn289')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup289"><code class="language-tsx text-sm text-gray-800">/**
 * Data Inspector Component
 *
 * Advanced data inspection tool providing:
 * - Hierarchical data visualization
 * - JSONPath navigation
 * - Data type analysis
 * - Size and performance metrics
 * - Export and copy functionality
 * - Search and filtering
 */

import {
  CompressOutlined,
  CopyOutlined,
  DownloadOutlined,
  ExpandOutlined,
  EyeOutlined,
  SearchOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Divider,
  Input,
  Modal,
  Progress,
  Select,
  Space,
  Table,
  Tabs,
  Tag,
  Tooltip,
  Tree,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useMemo, useState } from 'react';
import type { DataInspector } from '@/core/types/debugging';
import { JsonViewer } from '@/design-system';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Search } = Input;
const { Option } = Select;
const { TreeNode } = Tree;

interface DataInspectorProps {
  data: any;
  nodeId: string;
  type: DataInspector['type'];
  onClose?: () =&gt; void;
  className?: string;
}

interface DataNode {
  key: string;
  title: string;
  value: any;
  type: string;
  size: number;
  path: string;
  children?: DataNode[];
  isLeaf?: boolean;
}

const DataInspector: React.FC&lt;DataInspectorProps&gt; = ({
  data,
  nodeId,
  type,
  onClose,
  className,
}) =&gt; {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedPath, setSelectedPath] = useState&lt;string&gt;('');
  const [expandedKeys, setExpandedKeys] = useState&lt;string[]&gt;([]);
  const [viewMode, setViewMode] = useState&lt;'tree' | 'json' | 'table'&gt;('tree');
  const [filterType, setFilterType] = useState&lt;string&gt;('all');
  const [isFullscreen, setIsFullscreen] = useState(false);

  // Convert data to tree structure
  const dataTree = useMemo(() =&gt; {
    return convertToTree(data, '', 'root');
  }, [data]);

  // Filter tree based on search and type
  const filteredTree = useMemo(() =&gt; {
    return filterTree(dataTree, searchTerm, filterType);
  }, [dataTree, searchTerm, filterType]);

  // Get data statistics
  const dataStats = useMemo(() =&gt; {
    return analyzeData(data);
  }, [data]);

  // Get selected data
  const selectedData = useMemo(() =&gt; {
    if (!selectedPath) return data;
    return getDataByPath(data, selectedPath);
  }, [data, selectedPath]);

  const handleCopyData = useCallback(async () =&gt; {
    try {
      const text =
        typeof selectedData === 'string' ? selectedData : JSON.stringify(selectedData, null, 2);
      await navigator.clipboard.writeText(text);
    } catch (_error) {}
  }, [selectedData]);

  const handleExportData = useCallback(() =&gt; {
    const blob = new Blob([JSON.stringify(selectedData, null, 2)], {
      type: 'application/json',
    });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `data_${nodeId}_${type}_${Date.now()}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }, [selectedData, nodeId, type]);

  const handleTreeSelect = useCallback((selectedKeys: React.Key[]) =&gt; {
    if (selectedKeys.length &gt; 0) {
      setSelectedPath(selectedKeys[0] as string);
    }
  }, []);

  const handleExpand = useCallback((expandedKeys: React.Key[]) =&gt; {
    setExpandedKeys(expandedKeys as string[]);
  }, []);

  const renderTreeNodes = useCallback((nodes: DataNode[]): React.ReactNode =&gt; {
    return nodes.map((node) =&gt; (
      &lt;TreeNode
        key={node.key}
        title={
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;span className=&quot;text-white&quot;&gt;{node.title}&lt;/span&gt;
            &lt;Tag color={getTypeColor(node.type)}&gt;{node.type}&lt;/Tag&gt;
            &lt;span className=&quot;text-gray-400 text-xs&quot;&gt;{formatSize(node.size)}&lt;/span&gt;
          &lt;/div&gt;
        }
        isLeaf={node.isLeaf}
      &gt;
        {node.children &amp;&amp; renderTreeNodes(node.children)}
      &lt;/TreeNode&gt;
    ));
  }, []);

  const renderDataTable = useCallback(() =&gt; {
    if (!Array.isArray(selectedData)) {
      return &lt;Alert message=&quot;Table view only available for arrays&quot; type=&quot;info&quot; showIcon /&gt;;
    }

    const columns = getTableColumns(selectedData);
    const tableData = selectedData.map((item, index) =&gt; ({
      key: index,
      index,
      ...item,
    }));

    return (
      &lt;Table
        columns={columns}
        dataSource={tableData}
        pagination={{ pageSize: 10 }}
        size=&quot;small&quot;
        className=&quot;bg-gray-800&quot;
        scroll={{ x: 'max-content' }}
      /&gt;
    );
  }, [selectedData]);

  const renderDataAnalysis = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white&quot;&gt;
        Data Analysis
      &lt;/Title&gt;

      &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{dataStats.totalSize}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Size&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;{dataStats.depth}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Max Depth&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{dataStats.keyCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Keys&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{dataStats.arrayCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Arrays&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      &lt;/div&gt;

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
          Type Distribution
        &lt;/Title&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(dataStats.typeDistribution).map(([type, count]) =&gt; (
            &lt;div key={type} className=&quot;flex items-center justify-between&quot;&gt;
              &lt;span className=&quot;text-gray-300&quot;&gt;{type}&lt;/span&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Progress
                  percent={(count / dataStats.keyCount) * 100}
                  strokeColor={getTypeColor(type)}
                  showInfo={false}
                  size=&quot;small&quot;
                  className=&quot;flex-1&quot;
                /&gt;
                &lt;span className=&quot;text-gray-400 text-sm w-8&quot;&gt;{count}&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const content = (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;EyeOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
            &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
              Data Inspector
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={isFullscreen ? &lt;CompressOutlined /&gt; : &lt;ExpandOutlined /&gt;}
              onClick={() =&gt; setIsFullscreen(!isFullscreen)}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
            {onClose &amp;&amp; (
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                onClick={onClose}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              &gt;
                Close
              &lt;/Button&gt;
            )}
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-4 text-sm&quot;&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Node:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{nodeId}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Type:&lt;/Text&gt;
            &lt;Tag color={getTypeColor(type)} className=&quot;ml-1&quot;&gt;
              {type}
            &lt;/Tag&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Size:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{formatSize(dataStats.totalSize)}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;div className=&quot;flex items-center gap-4 mb-4&quot;&gt;
          &lt;Search
            placeholder=&quot;Search data...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;flex-1&quot;
            prefix={&lt;SearchOutlined className=&quot;text-gray-400&quot; /&gt;}
          /&gt;

          &lt;Select value={filterType} onChange={setFilterType} className=&quot;w-32&quot;&gt;
            &lt;Option value=&quot;all&quot;&gt;All Types&lt;/Option&gt;
            &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
            &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
            &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
            &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
            &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select value={viewMode} onChange={setViewMode} className=&quot;w-24&quot;&gt;
            &lt;Option value=&quot;tree&quot;&gt;Tree&lt;/Option&gt;
            &lt;Option value=&quot;json&quot;&gt;JSON&lt;/Option&gt;
            &lt;Option value=&quot;table&quot;&gt;Table&lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Selected Path:&lt;/Text&gt;
            &lt;Text className=&quot;text-white font-mono text-sm&quot;&gt;{selectedPath || 'root'}&lt;/Text&gt;
          &lt;/div&gt;

          &lt;Space&gt;
            &lt;Tooltip title=&quot;Copy Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={handleCopyData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
            &lt;Tooltip title=&quot;Export Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;DownloadOutlined /&gt;}
                onClick={handleExportData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Tabs
          activeKey={viewMode}
          onChange={(key) =&gt; setViewMode(key as 'tree' | 'json' | 'table')}
          items={[
            {
              key: 'tree',
              label: 'Tree View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto border border-gray-600 rounded bg-gray-800&quot;&gt;
                  &lt;Tree
                    showLine
                    defaultExpandAll={false}
                    expandedKeys={expandedKeys}
                    selectedKeys={selectedPath ? [selectedPath] : []}
                    onSelect={handleTreeSelect}
                    onExpand={handleExpand}
                    className=&quot;p-4&quot;
                  &gt;
                    {renderTreeNodes(filteredTree)}
                  &lt;/Tree&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'json',
              label: 'JSON View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto&quot;&gt;
                  &lt;JsonViewer
                    data={selectedData}
                    theme=&quot;dark&quot;
                    collapsed={2}
                    maxHeight=&quot;100%&quot;
                    enableClipboard
                  /&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'table',
              label: 'Table View',
              children: &lt;div className=&quot;h-96 overflow-auto&quot;&gt;{renderDataTable()}&lt;/div&gt;,
            },
          ]}
        /&gt;

        &lt;Divider className=&quot;my-4&quot; /&gt;

        {renderDataAnalysis()}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  if (isFullscreen) {
    return (
      &lt;Modal
        title=&quot;Data Inspector - Fullscreen&quot;
        open={isFullscreen}
        onCancel={() =&gt; setIsFullscreen(false)}
        footer={null}
        width=&quot;90vw&quot;
        style={{ top: 20 }}
        bodyStyle={{ height: '80vh', padding: 0 }}
      &gt;
        {content}
      &lt;/Modal&gt;
    );
  }

  return content;
};

// Helper functions

function convertToTree(data: any, path: string, _key: string): DataNode[] {
  if (data === null || data === undefined) {
    return [
      {
        key: path || 'root',
        title: 'null',
        value: data,
        type: 'null',
        size: 0,
        path: path || 'root',
        isLeaf: true,
      },
    ];
  }

  if (Array.isArray(data)) {
    return [
      {
        key: path || 'root',
        title: `Array (${data.length} items)`,
        value: data,
        type: 'array',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: data.flatMap((item, index) =&gt;
          convertToTree(item, `${path}[${index}]`, `[${index}]`)
        ),
      },
    ];
  }

  if (typeof data === 'object') {
    const entries = Object.entries(data);
    return [
      {
        key: path || 'root',
        title: `Object (${entries.length} properties)`,
        value: data,
        type: 'object',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: entries.flatMap(([key, value]) =&gt;
          convertToTree(value, path ? `${path}.${key}` : key, key)
        ),
      },
    ];
  }

  return [
    {
      key: path || 'root',
      title: String(data),
      value: data,
      type: typeof data,
      size: JSON.stringify(data).length,
      path: path || 'root',
      isLeaf: true,
    },
  ];
}

function filterTree(nodes: DataNode[], searchTerm: string, filterType: string): DataNode[] {
  if (!searchTerm &amp;&amp; filterType === 'all') return nodes;

  return nodes
    .filter((node) =&gt; {
      const matchesSearch =
        !searchTerm ||
        node.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        node.path.toLowerCase().includes(searchTerm.toLowerCase());

      const matchesType = filterType === 'all' || node.type === filterType;

      return matchesSearch &amp;&amp; matchesType;
    })
    .map((node) =&gt; ({
      ...node,
      children: node.children ? filterTree(node.children, searchTerm, filterType) : undefined,
    }));
}

function getDataByPath(data: any, path: string): any {
  if (path === 'root' || !path) return data;

  try {
    return path.split('.').reduce((obj, key) =&gt; {
      if (key.includes('[') &amp;&amp; key.includes(']')) {
        const arrayKey = key.substring(0, key.indexOf('['));
        const index = parseInt(key.substring(key.indexOf('[') + 1, key.indexOf(']')), 10);
        return obj[arrayKey][index];
      }
      return obj[key];
    }, data);
  } catch (_error) {
    return undefined;
  }
}

function analyzeData(data: any): {
  totalSize: number;
  depth: number;
  keyCount: number;
  arrayCount: number;
  typeDistribution: Record&lt;string, number&gt;;
} {
  const stats = {
    totalSize: JSON.stringify(data).length,
    depth: 0,
    keyCount: 0,
    arrayCount: 0,
    typeDistribution: {} as Record&lt;string, number&gt;,
  };

  function analyze(obj: any, currentDepth: number = 0) {
    stats.depth = Math.max(stats.depth, currentDepth);

    if (Array.isArray(obj)) {
      stats.arrayCount++;
      stats.typeDistribution.array = (stats.typeDistribution.array || 0) + 1;
      obj.forEach((item) =&gt; analyze(item, currentDepth + 1));
    } else if (obj !== null &amp;&amp; typeof obj === 'object') {
      stats.typeDistribution.object = (stats.typeDistribution.object || 0) + 1;
      Object.entries(obj).forEach(([_key, value]) =&gt; {
        stats.keyCount++;
        analyze(value, currentDepth + 1);
      });
    } else {
      const type = typeof obj;
      stats.typeDistribution[type] = (stats.typeDistribution[type] || 0) + 1;
    }
  }

  analyze(data);
  return stats;
}

function getTypeColor(type: string): string {
  switch (type) {
    case 'string':
      return 'green';
    case 'number':
      return 'blue';
    case 'boolean':
      return 'orange';
    case 'object':
      return 'purple';
    case 'array':
      return 'cyan';
    case 'null':
      return 'gray';
    case 'undefined':
      return 'red';
    default:
      return 'default';
  }
}

function formatSize(bytes: number): string {
  if (bytes &lt; 1024) return `${bytes} B`;
  if (bytes &lt; 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}

function getTableColumns(data: any[]): any[] {
  if (data.length === 0) return [];

  const sample = data[0];
  if (typeof sample !== 'object' || Array.isArray(sample)) {
    return [
      { title: 'Index', dataIndex: 'index', key: 'index' },
      { title: 'Value', dataIndex: '0', key: 'value' },
    ];
  }

  return Object.keys(sample).map((key) =&gt; ({
    title: key,
    dataIndex: key,
    key,
    render: (value: any) =&gt; {
      if (typeof value === 'object') {
        return &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1} maxHeight=&quot;100px&quot; /&gt;;
      }
      return String(value);
    },
  }));
}

export default DataInspector;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CustomEdge.tsx (Line 4:20 - Line 299:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 13:19 - Line 308:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn291" onclick="toggleCodeBlock('cloneGroup291', 'expandBtn291', 'collapseBtn291')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn291" onclick="toggleCodeBlock('cloneGroup291', 'expandBtn291', 'collapseBtn291')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup291"><code class="language-tsx text-sm text-gray-800">;

// Edge rendering constants
const EDGE_PADDING_BOTTOM = 80;
const EDGE_PADDING_X = 10;
const EDGE_BORDER_RADIUS = 6;
const HANDLE_SIZE = 20;

// Check if connection is backwards (target is to the left of source)
const isRightOfSourceHandle = (sourceX: number, targetX: number) =&gt; sourceX - HANDLE_SIZE &gt; targetX;

// Get edge render data with path selection logic
const getEdgeRenderData = (props: {
  sourceX: number;
  sourceY: number;
  sourcePosition: Position;
  targetX: number;
  targetY: number;
  targetPosition: Position;
  connectionType?: ConnectionTypeValue;
}) =&gt; {
  const {
    targetX,
    targetY,
    sourceX,
    sourceY,
    sourcePosition,
    targetPosition,
    connectionType = ConnectionType.Main,
  } = props;
  const isConnectorStraight = sourceY === targetY;

  // Use Bezier path for normal connections or non-main connections
  if (!isRightOfSourceHandle(sourceX, targetX) || connectionType !== ConnectionType.Main) {
    const segment = getBezierPath(props);
    return {
      segments: [segment],
      labelPosition: [segment[1], segment[2]],
      isConnectorStraight,
    };
  }

  // Connection is backwards and the source is on the right side
  // Use smooth step path to avoid overlapping the source node
  const firstSegmentTargetX = (sourceX + targetX) / 2;
  const firstSegmentTargetY = sourceY + EDGE_PADDING_BOTTOM;
  const firstSegment = getSmoothStepPath({
    sourceX,
    sourceY,
    targetX: firstSegmentTargetX,
    targetY: firstSegmentTargetY,
    sourcePosition,
    targetPosition: Position.Right,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  const secondSegment = getSmoothStepPath({
    sourceX: firstSegmentTargetX,
    sourceY: firstSegmentTargetY,
    targetX,
    targetY,
    sourcePosition: Position.Left,
    targetPosition,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  return {
    segments: [firstSegment, secondSegment],
    labelPosition: [firstSegmentTargetX, firstSegmentTargetY],
    isConnectorStraight,
  };
};

const CustomEdge: React.FC&lt;CustomEdgeProps&gt; = ({
  id,
  sourceX,
  sourceY,
  targetX,
  targetY,
  sourcePosition,
  targetPosition,
  style = {},
  data,
  selected = false,
  hovered = false,
  bringToFront = false,
}) =&gt; {
  const [isHovered, setIsHovered] = useState(false);
  const [isVisible, setIsVisible] = useState(false);
  const [delayedHovered, setDelayedHovered] = useState(hovered);
  const delayedHoveredTimeoutRef = useRef&lt;NodeJS.Timeout | null&gt;(null);
  const visibilityTimeoutRef = useRef&lt;NodeJS.Timeout | null&gt;(null);

  const connectionType = data?.connectionType || ConnectionType.Main;
  const status = data?.status;
  const isMainConnection = connectionType === ConnectionType.Main;

  // Implement visibility delay to prevent flickering
  useEffect(() =&gt; {
    visibilityTimeoutRef.current = setTimeout(() =&gt; {
      setIsVisible(true);
    }, 30);

    return () =&gt; {
      if (visibilityTimeoutRef.current) {
        clearTimeout(visibilityTimeoutRef.current);
      }
    };
  }, []);

  // Implement delayed hover state
  useEffect(() =&gt; {
    if (hovered) {
      if (delayedHoveredTimeoutRef.current) {
        clearTimeout(delayedHoveredTimeoutRef.current);
      }
      setDelayedHovered(true);
    } else {
      delayedHoveredTimeoutRef.current = setTimeout(() =&gt; {
        setDelayedHovered(false);
      }, 100);
    }

    return () =&gt; {
      if (delayedHoveredTimeoutRef.current) {
        clearTimeout(delayedHoveredTimeoutRef.current);
      }
    };
  }, [hovered]);

  // Calculate edge render data
  const renderData = useMemo(
    () =&gt;
      getEdgeRenderData({
        sourceX,
        sourceY,
        sourcePosition,
        targetX,
        targetY,
        targetPosition,
        connectionType,
      }),
    [sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition, connectionType]
  );

  const { segments, labelPosition, isConnectorStraight } = renderData;

  // Dynamic edge styling
  const getEdgeColor = () =&gt; {
    if (status === 'success') return '#10b981'; // green
    if (status === 'error') return '#ef4444'; // red
    if (status === 'running') return '#f59e0b'; // yellow
    if (status === 'pinned') return '#8b5cf6'; // purple
    if (!isMainConnection) return '#6b7280'; // gray for supplemental
    if (selected) return '#1f2937'; // dark gray for selected
    return '#E2DFD0'; // default dark gray
  };

  const getEdgeStyle = () =&gt; ({
    ...style,
    ...(isMainConnection ? {} : { strokeDasharray: '8,8' }),
    strokeWidth: delayedHovered || isHovered ? 2 : 1,
    stroke: delayedHovered || isHovered ? '#3b82f6' : getEdgeColor(), // blue on hover
    fill: 'none',
    transition: 'stroke 0.3s ease, opacity 0.3s ease, stroke-width 0.3s ease',
    opacity: isVisible ? 1 : 0,
  });

  const handleMouseEnter = useCallback(() =&gt; {
    setIsHovered(true);
  }, []);

  const handleMouseLeave = useCallback(() =&gt; {
    setIsHovered(false);
  }, []);

  const handleDelete = useCallback(
    (event: React.MouseEvent) =&gt; {
      event.stopPropagation();
      event.preventDefault();
      if (data?.onDelete) {
        data.onDelete(id);
      }
    },
    [id, data]
  );

  const renderToolbar = (selected || delayedHovered || isHovered) &amp;&amp; data?.onDelete;

  return (
    &lt;g
      data-testid=&quot;edge&quot;
      className={bringToFront ? 'bring-to-front' : ''}
      style={{ zIndex: bringToFront ? 1 : 0 }}
    &gt;
      {/* Arrow marker definition */}
      &lt;defs&gt;
        &lt;marker
          id={`arrowhead-${id}`}
          markerWidth=&quot;10&quot;
          markerHeight=&quot;7&quot;
          refX=&quot;9&quot;
          refY=&quot;3.5&quot;
          orient=&quot;auto&quot;
        &gt;
          &lt;polygon
            points=&quot;0 0, 10 3.5, 0 7&quot;
            fill={delayedHovered || isHovered ? '#3b82f6' : getEdgeColor()}
            style={{
              transition: 'fill 0.3s ease',
            }}
          /&gt;
        &lt;/marker&gt;
      &lt;/defs&gt;
      {segments.map((segment, index) =&gt; (
        &lt;React.Fragment key={`${id}-${index}`}&gt;
          {/* Invisible wider path for easier hover detection */}
          &lt;path
            d={segment[0]}
            style={{
              stroke: 'transparent',
              strokeWidth: 40,
              fill: 'none',
            }}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          /&gt;

          {/* Visible edge path */}
          &lt;path
            d={segment[0]}
            style={getEdgeStyle()}
            className={`react-flow__edge-path ${isHovered || delayedHovered ? 'hovered' : ''}`}
            markerEnd={`url(#arrowhead-${id})`}
            pointerEvents=&quot;none&quot;
          /&gt;
        &lt;/React.Fragment&gt;
      ))}

      &lt;EdgeLabelRenderer&gt;
        {/* Toolbar with delete button */}
        {renderToolbar &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1]}px)`,
              pointerEvents: 'all',
              zIndex: delayedHovered || isHovered ? 1 : 0,
            }}
            className=&quot;nodrag nopan&quot;
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          &gt;
            &lt;button
              onMouseDown={handleDelete}
              className=&quot;bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg transition-all duration-200 border-2 border-white hover:scale-110&quot;
              title=&quot;Delete connection&quot;
              style={{
                cursor: 'pointer',
                fontSize: '20px',
                fontWeight: 'bold',
              }}
            &gt;
              ×
            &lt;/button&gt;
          &lt;/div&gt;
        )}

        {/* Connection status indicator */}
        {status &amp;&amp; status !== 'success' &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1] - (isConnectorStraight ? 20 : 0)}px)`,
              pointerEvents: 'none',
              zIndex: 999,
            }}
          &gt;
            &lt;div
              className={`
              w-2 h-2 rounded-full
              ${status === 'error' ? 'bg-red-500' : ''}
              ${status === 'running' ? 'bg-yellow-500 animate-pulse' : ''}
              ${status === 'pinned' ? 'bg-purple-500' : ''}
            `}
            /&gt;
          &lt;/div&gt;
        )}
      &lt;/EdgeLabelRenderer&gt;
    &lt;/g&gt;
  );
};

export default CustomEdge;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CredentialModal.tsx (Line 76:15 - Line 96:26), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 285:5 - Line 305:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn292" onclick="toggleCodeBlock('cloneGroup292', 'expandBtn292', 'collapseBtn292')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn292" onclick="toggleCodeBlock('cloneGroup292', 'expandBtn292', 'collapseBtn292')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup292"><code class="language-tsx text-sm text-gray-800">) {
      case 'gmail':
        return '📧';
      case 'google':
        return '🔍';
      case 'openaiApi':
        return '🤖';
      case 'anthropicApi':
        return '🧠';
      case 'googleAiApi':
        return '🔷';
      case 'azureOpenAiApi':
        return '☁️';
      case 'awsBedrockApi':
        return '🟠';
      default:
        return '🔑';
    }
  };

  // Tab content components</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ContainerNodePanel.tsx (Line 1:1 - Line 374:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/containernodepanel/ContainerNodePanel.tsx (Line 3:1 - Line 376:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn294" onclick="toggleCodeBlock('cloneGroup294', 'expandBtn294', 'collapseBtn294')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn294" onclick="toggleCodeBlock('cloneGroup294', 'expandBtn294', 'collapseBtn294')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup294"><code class="language-tsx text-sm text-gray-800">/**
 * Container Node Panel
 *
 * Side panel for adding and managing container nodes in the workflow editor.
 * Provides drag-and-drop functionality for creating loop, parallel, conditional,
 * try-catch, and batch containers.
 */

import {
  InfoCircleOutlined,
  PlusOutlined,
  QuestionCircleOutlined,
  ReloadOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  Collapse,
  Form,
  Input,
  InputNumber,
  Modal,
  Select,
  Space,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useState } from 'react';
import {
  type ContainerNodeConfig,
  createBatchContainer,
  createConditionalContainer,
  createLoopContainer,
  createParallelContainer,
  createTryCatchContainer,
} from '@/core/types/containerNodes';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Panel } = Collapse;

interface ContainerNodePanelProps {
  onAddContainer: (container: ContainerNodeConfig) =&gt; void;
  className?: string;
}

interface ContainerTemplate {
  id: string;
  name: string;
  description: string;
  icon: string;
  color: string;
  createFunction: (
    id: string,
    name: string,
    position: { x: number; y: number }
  ) =&gt; ContainerNodeConfig;
}

const ContainerNodePanel: React.FC&lt;ContainerNodePanelProps&gt; = ({ onAddContainer, className }) =&gt; {
  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);
  const [selectedTemplate, setSelectedTemplate] = useState&lt;ContainerTemplate | null&gt;(null);
  const [createForm] = Form.useForm();

  const containerTemplates: ContainerTemplate[] = [
    {
      id: 'loop',
      name: 'Loop Container',
      description: 'Execute child nodes repeatedly based on conditions',
      icon: '🔄',
      color: '#3b82f6',
      createFunction: createLoopContainer,
    },
    {
      id: 'parallel',
      name: 'Parallel Container',
      description: 'Execute child nodes simultaneously with concurrency control',
      icon: '⚡',
      color: '#22c55e',
      createFunction: createParallelContainer,
    },
    {
      id: 'conditional',
      name: 'Conditional Container',
      description: 'Execute child nodes based on conditional logic',
      icon: '❓',
      color: '#f59e0b',
      createFunction: createConditionalContainer,
    },
    {
      id: 'try-catch',
      name: 'Try-Catch Container',
      description: 'Handle errors and retry logic for child nodes',
      icon: '🛡️',
      color: '#ef4444',
      createFunction: createTryCatchContainer,
    },
    {
      id: 'batch',
      name: 'Batch Container',
      description: 'Process data in batches with size and delay controls',
      icon: '📦',
      color: '#a855f7',
      createFunction: createBatchContainer,
    },
  ];

  const handleDragStart = (event: React.DragEvent, template: ContainerTemplate) =&gt; {
    event.dataTransfer.setData(
      'application/reactflow',
      JSON.stringify({
        type: 'container',
        template: template.id,
        name: template.name,
      })
    );
    event.dataTransfer.effectAllowed = 'move';
  };

  const handleCreateContainer = (values: any) =&gt; {
    if (!selectedTemplate) return;

    const container = selectedTemplate.createFunction(
      `container_${Date.now()}`,
      values.name,
      { x: 100, y: 100 } // Default position
    );

    onAddContainer(container);
    setIsCreateModalOpen(false);
    createForm.resetFields();
    setSelectedTemplate(null);
  };

  const openCreateModal = (template: ContainerTemplate) =&gt; {
    setSelectedTemplate(template);
    setIsCreateModalOpen(true);
    createForm.setFieldsValue({
      name: template.name,
    });
  };

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Container Nodes
          &lt;/Title&gt;
          &lt;Tooltip title=&quot;Add custom container&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;PlusOutlined /&gt;}
              onClick={() =&gt; {
                // Open custom container creation
              }}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced workflow structures for complex automation patterns
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4 space-y-4&quot;&gt;
        &lt;Collapse ghost defaultActiveKey={['containers']} className=&quot;bg-transparent&quot;&gt;
          &lt;Panel
            header={
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;span className=&quot;text-white font-medium&quot;&gt;Container Types&lt;/span&gt;
                &lt;Badge count={containerTemplates.length} size=&quot;small&quot; /&gt;
              &lt;/div&gt;
            }
            key=&quot;containers&quot;
            className=&quot;bg-gray-800&quot;
          &gt;
            &lt;div className=&quot;space-y-2&quot;&gt;
              {containerTemplates.map((template) =&gt; (
                &lt;Card
                  key={template.id}
                  size=&quot;small&quot;
                  className=&quot;bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors cursor-pointer&quot;
                  draggable
                  onDragStart={(e) =&gt; handleDragStart(e, template)}
                  onClick={() =&gt; openCreateModal(template)}
                &gt;
                  &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                    &lt;div
                      className=&quot;w-8 h-8 rounded-lg flex items-center justify-center text-lg&quot;
                      style={{ backgroundColor: `${template.color}20` }}
                    &gt;
                      {template.icon}
                    &lt;/div&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;div className=&quot;text-white font-medium text-sm&quot;&gt;{template.name}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{template.description}&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;flex gap-1&quot;&gt;
                      &lt;Tooltip title=&quot;Drag to canvas&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;ReloadOutlined /&gt;}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                      &lt;Tooltip title=&quot;Create directly&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;PlusOutlined /&gt;}
                          onClick={(e) =&gt; {
                            e.stopPropagation();
                            openCreateModal(template);
                          }}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              ))}
            &lt;/div&gt;
          &lt;/Panel&gt;
        &lt;/Collapse&gt;

        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-2&quot;&gt;
            Quick Actions
          &lt;/Title&gt;

          &lt;Space direction=&quot;vertical&quot; className=&quot;w-full&quot;&gt;
            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple loop container
                const container = createLoopContainer(`loop_${Date.now()}`, 'Quick Loop', {
                  x: 200,
                  y: 200,
                });
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ReloadOutlined className=&quot;text-blue-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Loop&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;10 iterations, 1s delay&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple parallel container
                const container = createParallelContainer(
                  `parallel_${Date.now()}`,
                  'Quick Parallel',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ThunderboltOutlined className=&quot;text-green-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Parallel&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;5 concurrent executions&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple conditional container
                const container = createConditionalContainer(
                  `conditional_${Date.now()}`,
                  'Quick Conditional',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;QuestionCircleOutlined className=&quot;text-yellow-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Conditional&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Basic if-then logic&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;pt-4 border-t border-gray-700&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 text-gray-400 text-xs&quot;&gt;
            &lt;InfoCircleOutlined /&gt;
            &lt;span&gt;Drag containers to canvas or click to create directly&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Create Container Modal */}
      &lt;Modal
        title={`Create ${selectedTemplate?.name || 'Container'}`}
        open={isCreateModalOpen}
        onCancel={() =&gt; {
          setIsCreateModalOpen(false);
          setSelectedTemplate(null);
        }}
        onOk={() =&gt; createForm.submit()}
        width={500}
      &gt;
        &lt;Form form={createForm} layout=&quot;vertical&quot; onFinish={handleCreateContainer}&gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Container Name&quot;
            rules={[{ required: true, message: 'Please enter a container name' }]}
          &gt;
            &lt;Input placeholder=&quot;Enter container name&quot; /&gt;
          &lt;/Form.Item&gt;

          {selectedTemplate &amp;&amp; (
            &lt;div className=&quot;mb-4 p-3 bg-gray-50 rounded-lg&quot;&gt;
              &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                &lt;span className=&quot;text-lg&quot;&gt;{selectedTemplate.icon}&lt;/span&gt;
                &lt;span className=&quot;font-medium&quot;&gt;{selectedTemplate.name}&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{selectedTemplate.description}&lt;/div&gt;
            &lt;/div&gt;
          )}

          {selectedTemplate?.id === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot; initialValue={10}&gt;
                &lt;InputNumber min={1} max={1000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot; initialValue={1000}&gt;
                &lt;InputNumber min={0} max={10000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {selectedTemplate?.id === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot; initialValue={5}&gt;
                &lt;InputNumber min={1} max={20} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;parallelStrategy&quot; label=&quot;Execution Strategy&quot; initialValue=&quot;all&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default ContainerNodePanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConnectionLine.tsx (Line 28:2 - Line 91:15), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 25:2 - Line 88:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn295" onclick="toggleCodeBlock('cloneGroup295', 'expandBtn295', 'collapseBtn295')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn295" onclick="toggleCodeBlock('cloneGroup295', 'expandBtn295', 'collapseBtn295')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup295"><code class="language-tsx text-sm text-gray-800">= (props: {
  sourceX: number;
  sourceY: number;
  sourcePosition: Position;
  targetX: number;
  targetY: number;
  targetPosition: Position;
  connectionType?: ConnectionTypeValue;
}) =&gt; {
  const {
    targetX,
    targetY,
    sourceX,
    sourceY,
    sourcePosition,
    targetPosition,
    connectionType = ConnectionType.Main,
  } = props;
  const isConnectorStraight = sourceY === targetY;

  // Use Bezier path for normal connections or non-main connections
  if (!isRightOfSourceHandle(sourceX, targetX) || connectionType !== ConnectionType.Main) {
    const segment = getBezierPath(props);
    return {
      segments: [segment],
      labelPosition: [segment[1], segment[2]],
      isConnectorStraight,
    };
  }

  // Connection is backwards and the source is on the right side
  // Use smooth step path to avoid overlapping the source node
  const firstSegmentTargetX = (sourceX + targetX) / 2;
  const firstSegmentTargetY = sourceY + EDGE_PADDING_BOTTOM;
  const firstSegment = getSmoothStepPath({
    sourceX,
    sourceY,
    targetX: firstSegmentTargetX,
    targetY: firstSegmentTargetY,
    sourcePosition,
    targetPosition: Position.Right,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  const secondSegment = getSmoothStepPath({
    sourceX: firstSegmentTargetX,
    sourceY: firstSegmentTargetY,
    targetX,
    targetY,
    sourcePosition: Position.Left,
    targetPosition,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  return {
    segments: [firstSegment, secondSegment],
    labelPosition: [firstSegmentTargetX, firstSegmentTargetY],
    isConnectorStraight,
  };
};

const ConnectionLine</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConnectionLine.tsx (Line 146:2 - Line 163:5), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 213:2 - Line 230:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn296" onclick="toggleCodeBlock('cloneGroup296', 'expandBtn296', 'collapseBtn296')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn296" onclick="toggleCodeBlock('cloneGroup296', 'expandBtn296', 'collapseBtn296')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup296"><code class="language-tsx text-sm text-gray-800">
          markerWidth=&quot;10&quot;
          markerHeight=&quot;7&quot;
          refX=&quot;9&quot;
          refY=&quot;3.5&quot;
          orient=&quot;auto&quot;
        &gt;
          &lt;polygon
            points=&quot;0 0, 10 3.5, 0 7&quot;
            fill={isMainConnection ? '#374151' : '#6b7280'}
            style={{
              transition: 'fill 0.3s ease',
            }}
          /&gt;
        &lt;/marker&gt;
      &lt;/defs&gt;
      {segments.map((segment, index) =&gt; (
        &lt;path</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionalBranchingPanel.tsx (Line 1:1 - Line 772:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditionalbranchingpanel/ConditionalBranchingPanel.tsx (Line 5:1 - Line 776:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn298" onclick="toggleCodeBlock('cloneGroup298', 'expandBtn298', 'collapseBtn298')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn298" onclick="toggleCodeBlock('cloneGroup298', 'expandBtn298', 'collapseBtn298')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup298"><code class="language-tsx text-sm text-gray-800">/**
 * Conditional Workflow Branching Panel
 *
 * Advanced conditional logic builder with visual branch creation,
 * dynamic routing, expression builder, and complex condition handling.
 */

import {
  BranchesOutlined,
  CheckCircleOutlined,
  CloseCircleOutlined,
  CodeOutlined,
  DeleteOutlined,
  EditOutlined,
  PlayCircleOutlined,
  PlusOutlined,
  QuestionCircleOutlined,
  SettingOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Col,
  Divider,
  Form,
  Input,
  InputNumber,
  List,
  Modal,
  message,
  Radio,
  Row,
  Select,
  Space,
  Switch,
  Tabs,
  Tag,
  Tree,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type { WorkflowNodeInstance } from '@/core/nodes/types';
import { useLeanWorkflowStore } from '@/core/stores/leanWorkflowStore';
import { colors } from '@/design-system/tokens';
import { cn } from '@/design-system/utils';

const { TabPane } = Tabs;
const { Option } = Select;
const { TextArea } = Input;
const { Text } = Typography;

interface ConditionalBranchingPanelProps {
  workflowId: string;
  visible: boolean;
  onClose: () =&gt; void;
  onAddBranch: (branchConfig: BranchConfiguration) =&gt; void;
}

export interface BranchConfiguration {
  id: string;
  name: string;
  description?: string;
  sourceNodeId: string;
  conditions: BranchCondition[];
  logicalOperator: 'AND' | 'OR';
  defaultBranch: boolean;
  priority: number;
  targetNodes: string[];
  metadata: Record&lt;string, any&gt;;
}

export interface BranchCondition {
  id: string;
  field: string;
  operator: ComparisonOperator;
  value: any;
  dataType: 'string' | 'number' | 'boolean' | 'date' | 'array' | 'object';
  negate?: boolean;
  caseSensitive?: boolean;
}

type ComparisonOperator =
  | 'equals'
  | 'not_equals'
  | 'greater_than'
  | 'less_than'
  | 'greater_equal'
  | 'less_equal'
  | 'contains'
  | 'starts_with'
  | 'ends_with'
  | 'regex'
  | 'in_array'
  | 'is_empty'
  | 'is_not_empty'
  | 'exists'
  | 'not_exists';

export const ConditionalBranchingPanel: React.FC&lt;ConditionalBranchingPanelProps&gt; = ({
  workflowId,
  visible,
  onClose,
  onAddBranch,
}) =&gt; {
  const { nodes, edges } = useLeanWorkflowStore();
  const [branches, setBranches] = useState&lt;BranchConfiguration[]&gt;([]);
  const [selectedBranch, setSelectedBranch] = useState&lt;BranchConfiguration | null&gt;(null);
  const [activeTab, setActiveTab] = useState('builder');
  const [form] = Form.useForm();
  const [conditionForm] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [editingBranch, setEditingBranch] = useState&lt;string | null&gt;(null);
  const [testModalVisible, setTestModalVisible] = useState(false);

  useEffect(() =&gt; {
    if (visible) {
      loadExistingBranches();
    }
  }, [visible, loadExistingBranches]);

  const loadExistingBranches = () =&gt; {
    // Extract conditional branches from existing workflow
    const conditionNodes = nodes.filter(
      (node) =&gt;
        node.parameters?.type === 'condition' ||
        node.parameters?.integrationData?.id === 'condition' ||
        node.type === 'condition'
    );

    const extractedBranches: BranchConfiguration[] = conditionNodes.map((node) =&gt; ({
      id: node.id,
      name: node.parameters?.name || node.name || `Branch from ${node.id}`,
      description: node.parameters?.description || '',
      sourceNodeId: node.id,
      conditions: extractConditionsFromNode(node),
      logicalOperator: 'AND',
      defaultBranch: false,
      priority: 1,
      targetNodes: getTargetNodes(node.id),
      metadata: {},
    }));

    setBranches(extractedBranches);
  };

  const extractConditionsFromNode = (node: WorkflowNodeInstance): BranchCondition[] =&gt; {
    const properties = node.parameters?.properties || node.parameters || {};
    const conditions: BranchCondition[] = [];

    // Extract conditions from node properties
    if (properties.condition) {
      // Simple condition
      conditions.push({
        id: `condition_${Date.now()}`,
        field: properties.field || 'data',
        operator: properties.operator || 'equals',
        value: properties.value,
        dataType: properties.dataType || 'string',
        negate: properties.negate || false,
        caseSensitive: properties.caseSensitive !== false,
      });
    } else if (properties.conditions) {
      // Multiple conditions
      properties.conditions.forEach((cond: any, index: number) =&gt; {
        conditions.push({
          id: `condition_${Date.now()}_${index}`,
          field: cond.field,
          operator: cond.operator,
          value: cond.value,
          dataType: cond.dataType || 'string',
          negate: cond.negate || false,
          caseSensitive: cond.caseSensitive !== false,
        });
      });
    }

    return conditions;
  };

  const getTargetNodes = (sourceNodeId: string): string[] =&gt; {
    return edges.filter((edge) =&gt; edge.source === sourceNodeId).map((edge) =&gt; edge.target);
  };

  const handleCreateBranch = async (values: any) =&gt; {
    setLoading(true);
    try {
      const branchConfig: BranchConfiguration = {
        id: editingBranch || `branch_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`,
        name: values.name,
        description: values.description,
        sourceNodeId: values.sourceNodeId,
        conditions: values.conditions || [],
        logicalOperator: values.logicalOperator || 'AND',
        defaultBranch: values.defaultBranch || false,
        priority: values.priority || 1,
        targetNodes: values.targetNodes || [],
        metadata: {
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
        },
      };

      if (editingBranch) {
        setBranches((prev) =&gt; prev.map((b) =&gt; (b.id === editingBranch ? branchConfig : b)));
        message.success('Branch updated successfully');
      } else {
        setBranches((prev) =&gt; [...prev, branchConfig]);
        message.success('Branch created successfully');
      }

      onAddBranch(branchConfig);
      form.resetFields();
      setEditingBranch(null);
    } catch (_error) {
      message.error('Failed to create branch');
    } finally {
      setLoading(false);
    }
  };

  const handleAddCondition = (values: any) =&gt; {
    const condition: BranchCondition = {
      id: `condition_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`,
      field: values.field,
      operator: values.operator,
      value: values.value,
      dataType: values.dataType,
      negate: values.negate || false,
      caseSensitive: values.caseSensitive !== false,
    };

    const currentConditions = form.getFieldValue('conditions') || [];
    form.setFieldsValue({ conditions: [...currentConditions, condition] });
    conditionForm.resetFields();
  };

  const handleRemoveCondition = (conditionId: string) =&gt; {
    const currentConditions = form.getFieldValue('conditions') || [];
    const updatedConditions = currentConditions.filter(
      (c: BranchCondition) =&gt; c.id !== conditionId
    );
    form.setFieldsValue({ conditions: updatedConditions });
  };

  const handleTestBranch = async (branch: BranchConfiguration, testData: any) =&gt; {
    try {
      const result = evaluateBranchConditions(branch, testData);
      message.success(`Branch evaluation result: ${result ? 'TRUE' : 'FALSE'}`);
      return result;
    } catch (_error) {
      message.error('Branch test failed');
      return false;
    }
  };

  const evaluateBranchConditions = (branch: BranchConfiguration, data: any): boolean =&gt; {
    if (branch.conditions.length === 0) return true;

    const results = branch.conditions.map((condition) =&gt; evaluateCondition(condition, data));

    return branch.logicalOperator === 'AND' ? results.every(Boolean) : results.some(Boolean);
  };

  const evaluateCondition = (condition: BranchCondition, data: any): boolean =&gt; {
    const fieldValue = getNestedValue(data, condition.field);
    let result = false;

    switch (condition.operator) {
      case 'equals':
        result = fieldValue === condition.value;
        break;
      case 'not_equals':
        result = fieldValue !== condition.value;
        break;
      case 'greater_than':
        result = Number(fieldValue) &gt; Number(condition.value);
        break;
      case 'less_than':
        result = Number(fieldValue) &lt; Number(condition.value);
        break;
      case 'greater_equal':
        result = Number(fieldValue) &gt;= Number(condition.value);
        break;
      case 'less_equal':
        result = Number(fieldValue) &lt;= Number(condition.value);
        break;
      case 'contains': {
        const searchValue = condition.caseSensitive
          ? condition.value
          : condition.value.toLowerCase();
        const searchIn = condition.caseSensitive
          ? String(fieldValue)
          : String(fieldValue).toLowerCase();
        result = searchIn.includes(searchValue);
        break;
      }
      case 'starts_with':
        result = String(fieldValue).startsWith(String(condition.value));
        break;
      case 'ends_with':
        result = String(fieldValue).endsWith(String(condition.value));
        break;
      case 'regex':
        result = new RegExp(condition.value).test(String(fieldValue));
        break;
      case 'in_array':
        result = Array.isArray(condition.value) &amp;&amp; condition.value.includes(fieldValue);
        break;
      case 'is_empty':
        result =
          !fieldValue ||
          fieldValue === '' ||
          (Array.isArray(fieldValue) &amp;&amp; fieldValue.length === 0);
        break;
      case 'is_not_empty':
        result =
          !!fieldValue &amp;&amp;
          fieldValue !== '' &amp;&amp;
          (!Array.isArray(fieldValue) || fieldValue.length &gt; 0);
        break;
      case 'exists':
        result = fieldValue !== undefined &amp;&amp; fieldValue !== null;
        break;
      case 'not_exists':
        result = fieldValue === undefined || fieldValue === null;
        break;
      default:
        result = false;
    }

    return condition.negate ? !result : result;
  };

  const getNestedValue = (obj: any, path: string): any =&gt; {
    return path.split('.').reduce((current, key) =&gt; current?.[key], obj);
  };

  const renderBranchBuilder = () =&gt; (
    &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
      &lt;Card title=&quot;Branch Configuration&quot; size=&quot;small&quot;&gt;
        &lt;Form
          form={form}
          layout=&quot;vertical&quot;
          onFinish={handleCreateBranch}
          initialValues={{
            logicalOperator: 'AND',
            defaultBranch: false,
            priority: 1,
            conditions: [],
          }}
        &gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Branch Name&quot;
            rules={[{ required: true, message: 'Please enter a branch name' }]}
          &gt;
            &lt;Input placeholder=&quot;Success path&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
            &lt;TextArea placeholder=&quot;Handles successful API responses&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;sourceNodeId&quot;
            label=&quot;Source Node&quot;
            rules={[{ required: true, message: 'Please select a source node' }]}
          &gt;
            &lt;Select placeholder=&quot;Select node to branch from&quot;&gt;
              {nodes.map((node) =&gt; (
                &lt;Option key={node.id} value={node.id}&gt;
                  {node.parameters?.name || node.name || node.id}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;logicalOperator&quot; label=&quot;Condition Logic&quot;&gt;
            &lt;Radio.Group&gt;
              &lt;Radio value=&quot;AND&quot;&gt;ALL conditions must be true (AND)&lt;/Radio&gt;
              &lt;Radio value=&quot;OR&quot;&gt;ANY condition must be true (OR)&lt;/Radio&gt;
            &lt;/Radio.Group&gt;
          &lt;/Form.Item&gt;

          &lt;Divider&gt;Conditions&lt;/Divider&gt;

          &lt;Form.Item dependencies={['conditions']} noStyle&gt;
            {({ getFieldValue }) =&gt; {
              const conditions: BranchCondition[] = getFieldValue('conditions') || [];
              return (
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {conditions.map((condition) =&gt; (
                    &lt;Card key={condition.id} size=&quot;small&quot; className=&quot;border-l-4 border-l-blue-500&quot;&gt;
                      &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                            &lt;Text strong&gt;{condition.field}&lt;/Text&gt;
                            &lt;Tag color=&quot;blue&quot;&gt;{condition.operator}&lt;/Tag&gt;
                            &lt;Text code&gt;{JSON.stringify(condition.value)}&lt;/Text&gt;
                            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NEGATED&lt;/Tag&gt;}
                          &lt;/Space&gt;
                        &lt;/div&gt;
                        &lt;Button
                          type=&quot;link&quot;
                          danger
                          icon={&lt;DeleteOutlined /&gt;}
                          onClick={() =&gt; handleRemoveCondition(condition.id)}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Card&gt;
                  ))}
                  {conditions.length === 0 &amp;&amp; (
                    &lt;Alert
                      message=&quot;No conditions defined&quot;
                      description=&quot;Add conditions to control when this branch should be taken&quot;
                      type=&quot;info&quot;
                      showIcon
                    /&gt;
                  )}
                &lt;/div&gt;
              );
            }}
          &lt;/Form.Item&gt;

          &lt;Card title=&quot;Add Condition&quot; size=&quot;small&quot; className=&quot;mt-4&quot;&gt;
            &lt;Form form={conditionForm} layout=&quot;vertical&quot; onFinish={handleAddCondition}&gt;
              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;field&quot; label=&quot;Field Path&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;data.status&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;dataType&quot; label=&quot;Data Type&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
                      &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
                      &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
                      &lt;Option value=&quot;date&quot;&gt;Date&lt;/Option&gt;
                      &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
                      &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;operator&quot; label=&quot;Operator&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;equals&quot;&gt;Equals (=)&lt;/Option&gt;
                      &lt;Option value=&quot;not_equals&quot;&gt;Not Equals (≠)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_than&quot;&gt;Greater Than (&amp;gt;)&lt;/Option&gt;
                      &lt;Option value=&quot;less_than&quot;&gt;Less Than (&amp;lt;)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_equal&quot;&gt;Greater Equal (≥)&lt;/Option&gt;
                      &lt;Option value=&quot;less_equal&quot;&gt;Less Equal (≤)&lt;/Option&gt;
                      &lt;Option value=&quot;contains&quot;&gt;Contains&lt;/Option&gt;
                      &lt;Option value=&quot;starts_with&quot;&gt;Starts With&lt;/Option&gt;
                      &lt;Option value=&quot;ends_with&quot;&gt;Ends With&lt;/Option&gt;
                      &lt;Option value=&quot;regex&quot;&gt;Regex Match&lt;/Option&gt;
                      &lt;Option value=&quot;in_array&quot;&gt;In Array&lt;/Option&gt;
                      &lt;Option value=&quot;is_empty&quot;&gt;Is Empty&lt;/Option&gt;
                      &lt;Option value=&quot;is_not_empty&quot;&gt;Is Not Empty&lt;/Option&gt;
                      &lt;Option value=&quot;exists&quot;&gt;Exists&lt;/Option&gt;
                      &lt;Option value=&quot;not_exists&quot;&gt;Not Exists&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;value&quot; label=&quot;Value&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;success&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;negate&quot; valuePropName=&quot;checked&quot;&gt;
                    &lt;Switch checkedChildren=&quot;Negate&quot; unCheckedChildren=&quot;Normal&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;caseSensitive&quot; valuePropName=&quot;checked&quot; initialValue={true}&gt;
                    &lt;Switch checkedChildren=&quot;Case Sensitive&quot; unCheckedChildren=&quot;Ignore Case&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Form.Item&gt;
                &lt;Button type=&quot;dashed&quot; htmlType=&quot;submit&quot; icon={&lt;PlusOutlined /&gt;} block&gt;
                  Add Condition
                &lt;/Button&gt;
              &lt;/Form.Item&gt;
            &lt;/Form&gt;
          &lt;/Card&gt;

          &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

          &lt;Row gutter={16}&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;priority&quot; label=&quot;Priority&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;defaultBranch&quot; label=&quot;Default Branch&quot; valuePropName=&quot;checked&quot;&gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
                {editingBranch ? 'Update Branch' : 'Create Branch'}
              &lt;/Button&gt;
              &lt;Button
                onClick={() =&gt; {
                  form.resetFields();
                  setEditingBranch(null);
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
            &lt;/Space&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Card&gt;

      &lt;Card title=&quot;Existing Branches&quot; size=&quot;small&quot;&gt;
        &lt;List
          dataSource={branches}
          renderItem={(branch) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;PlayCircleOutlined /&gt;}
                  onClick={() =&gt; {
                    setSelectedBranch(branch);
                    setTestModalVisible(true);
                  }}
                &gt;
                  Test
                &lt;/Button&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;EditOutlined /&gt;}
                  onClick={() =&gt; {
                    setEditingBranch(branch.id);
                    form.setFieldsValue(branch);
                  }}
                /&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  danger
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; {
                    setBranches((prev) =&gt; prev.filter((b) =&gt; b.id !== branch.id));
                    message.success('Branch deleted');
                  }}
                /&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                title={
                  &lt;Space&gt;
                    &lt;BranchesOutlined /&gt;
                    {branch.name}
                    &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
                      {branch.logicalOperator}
                    &lt;/Tag&gt;
                    {branch.defaultBranch &amp;&amp; &lt;Tag color=&quot;gold&quot;&gt;DEFAULT&lt;/Tag&gt;}
                  &lt;/Space&gt;
                }
                description={
                  &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                    {branch.description}
                    &lt;Text type=&quot;secondary&quot;&gt;
                      {branch.conditions.length} condition(s) • Priority: {branch.priority}
                    &lt;/Text&gt;
                    &lt;div&gt;
                      {branch.conditions.map((condition) =&gt; (
                        &lt;Tag key={condition.id} color=&quot;geekblue&quot; style={{ marginBottom: 4 }}&gt;
                          {condition.field} {condition.operator} {JSON.stringify(condition.value)}
                        &lt;/Tag&gt;
                      ))}
                    &lt;/div&gt;
                  &lt;/Space&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
          locale={{ emptyText: 'No branches configured' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderExpressionBuilder = () =&gt; (
    &lt;Card title=&quot;JavaScript Expression Builder&quot; size=&quot;small&quot;&gt;
      &lt;Alert
        message=&quot;Advanced Expression Mode&quot;
        description=&quot;Write custom JavaScript expressions for complex conditional logic. Use 'data' object to access workflow data.&quot;
        type=&quot;info&quot;
        showIcon
        style={{ marginBottom: 16 }}
      /&gt;

      &lt;Form layout=&quot;vertical&quot;&gt;
        &lt;Form.Item label=&quot;Expression&quot;&gt;
          &lt;TextArea
            rows={10}
            placeholder={`// Example expressions:
return data.status === 'success' &amp;&amp; data.count &gt; 10;

// Multi-line logic
if (data.user &amp;&amp; data.user.role === 'admin') {
  return data.permissions.includes('write');
}
return false;

// Array operations
return data.items.filter(item =&gt; item.active).length &gt; 0;

// Date comparisons
const today = new Date();
const itemDate = new Date(data.createdAt);
return (today.getTime() - itemDate.getTime()) &lt; (24 * 60 * 60 * 1000);`}
            style={{ fontFamily: 'monospace' }}
          /&gt;
        &lt;/Form.Item&gt;

        &lt;Form.Item&gt;
          &lt;Space&gt;
            &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;}&gt;
              Test Expression
            &lt;/Button&gt;
            &lt;Button icon={&lt;CodeOutlined /&gt;}&gt;Validate Syntax&lt;/Button&gt;
            &lt;Button&gt;Save as Template&lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/Form.Item&gt;
      &lt;/Form&gt;
    &lt;/Card&gt;
  );

  const renderVisualFlowChart = () =&gt; {
    const treeData = branches.map((branch) =&gt; ({
      title: (
        &lt;Space&gt;
          &lt;BranchesOutlined /&gt;
          {branch.name}
          &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
            {branch.conditions.length} conditions
          &lt;/Tag&gt;
        &lt;/Space&gt;
      ),
      key: branch.id,
      children: branch.conditions.map((condition) =&gt; ({
        title: (
          &lt;Space&gt;
            &lt;QuestionCircleOutlined /&gt;
            {condition.field} {condition.operator} {JSON.stringify(condition.value)}
            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NOT&lt;/Tag&gt;}
          &lt;/Space&gt;
        ),
        key: condition.id,
        icon: condition.negate ? &lt;CloseCircleOutlined /&gt; : &lt;CheckCircleOutlined /&gt;,
      })),
    }));

    return (
      &lt;Card title=&quot;Branch Flow Visualization&quot; size=&quot;small&quot;&gt;
        &lt;Tree
          showIcon
          defaultExpandAll
          treeData={treeData}
          style={{ background: colors.gray[50], padding: 16, borderRadius: 8 }}
        /&gt;
      &lt;/Card&gt;
    );
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;BranchesOutlined /&gt;
            Conditional Branching
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1400}
        footer={null}
        className={cn('conditional-branching-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Branch Builder
              &lt;/span&gt;
            }
            key=&quot;builder&quot;
          &gt;
            {renderBranchBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CodeOutlined /&gt;
                Expression Builder
              &lt;/span&gt;
            }
            key=&quot;expression&quot;
          &gt;
            {renderExpressionBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;BranchesOutlined /&gt;
                Flow Visualization
              &lt;/span&gt;
            }
            key=&quot;visualization&quot;
          &gt;
            {renderVisualFlowChart()}
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Modal&gt;

      &lt;Modal
        title=&quot;Test Branch Logic&quot;
        open={testModalVisible}
        onCancel={() =&gt; setTestModalVisible(false)}
        onOk={() =&gt; {
          if (selectedBranch) {
            const testData = { status: 'success', count: 15 }; // Example test data
            handleTestBranch(selectedBranch, testData);
            setTestModalVisible(false);
          }
        }}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Test Data (JSON)&quot;&gt;
            &lt;TextArea
              rows={8}
              placeholder={JSON.stringify(
                {
                  status: 'success',
                  count: 15,
                  user: { role: 'admin' },
                  timestamp: new Date().toISOString(),
                },
                null,
                2
              )}
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionInputPanel.tsx (Line 3:18 - Line 563:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 5:19 - Line 565:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn300" onclick="toggleCodeBlock('cloneGroup300', 'expandBtn300', 'collapseBtn300')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn300" onclick="toggleCodeBlock('cloneGroup300', 'expandBtn300', 'collapseBtn300')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup300"><code class="language-tsx text-sm text-gray-800">;

interface ConditionInputPanelProps {
  connectedInputNodes: any[];
  selectedNode?: any;
  testResults?: any;
}

const ConditionInputPanel: React.FC&lt;ConditionInputPanelProps&gt; = ({ connectedInputNodes }) =&gt; {
  // Default to expanding the first node that has data
  const [expandedNode, setExpandedNode] = useState&lt;string | null&gt;(() =&gt; {
    const firstNodeWithData = connectedInputNodes.find(
      (node) =&gt; node?.data?.outputData || node?.data?.testResults?.data
    );
    return firstNodeWithData?.id || null;
  });
  const [selectedField, setSelectedField] = useState&lt;string | null&gt;(null);

  // Debug logging
  React.useEffect(() =&gt; {}, []);

  if (connectedInputNodes.length === 0) {
    return (
      &lt;div className=&quot;h-full flex items-center justify-center text-gray-400&quot;&gt;
        &lt;div className=&quot;text-center space-y-3&quot;&gt;
          &lt;div className=&quot;text-3xl&quot;&gt;⚖️&lt;/div&gt;
          &lt;div className=&quot;text-sm font-medium&quot;&gt;No Input Connections&lt;/div&gt;
          &lt;div className=&quot;text-xs text-gray-500 max-w-48&quot;&gt;
            Connect nodes to provide data for condition evaluation
          &lt;/div&gt;
          &lt;div className=&quot;mt-4 text-xs text-blue-400&quot;&gt;
            💡 Conditions evaluate input data to make decisions
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      {/* === CONDITION OVERVIEW === */}
      &lt;div className=&quot;bg-purple-900/20 border border-purple-600/30 rounded-lg p-3&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-2 mb-2&quot;&gt;
          &lt;span className=&quot;text-lg&quot;&gt;⚖️&lt;/span&gt;
          &lt;div className=&quot;text-sm font-medium text-purple-200&quot;&gt;Condition Evaluation&lt;/div&gt;
          &lt;span className=&quot;px-2 py-1 bg-purple-800 text-purple-100 rounded text-xs&quot;&gt;
            {connectedInputNodes.length} input
            {connectedInputNodes.length !== 1 ? 's' : ''}
          &lt;/span&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-xs text-purple-300&quot;&gt;
          This data will be evaluated by the condition logic. Use field references in your condition
          expressions.
        &lt;/div&gt;
      &lt;/div&gt;

      {/* === DATA ANALYSIS SUMMARY === */}
      {connectedInputNodes.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;bg-gray-800 rounded-lg border border-gray-600 p-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200 mb-3 flex items-center space-x-2&quot;&gt;
            &lt;span&gt;📊&lt;/span&gt;
            &lt;span&gt;Available Data Fields&lt;/span&gt;
          &lt;/div&gt;
          &lt;DataFieldsSummary
            connectedInputNodes={connectedInputNodes}
            onFieldSelect={setSelectedField}
          /&gt;
        &lt;/div&gt;
      )}

      {/* === CONNECTED INPUT NODES === */}
      &lt;div className=&quot;space-y-3&quot;&gt;
        &lt;div className=&quot;text-sm font-semibold text-gray-100 flex items-center space-x-2&quot;&gt;
          &lt;span&gt;📥&lt;/span&gt;
          &lt;span&gt;Input Data Sources&lt;/span&gt;
        &lt;/div&gt;

        {connectedInputNodes.map((node, index) =&gt; {
          // More robust data detection
          const outputData = node?.data?.outputData;
          const testResultsData = node?.data?.testResults?.data;
          const hasOutputData = outputData || testResultsData;

          // Prefer outputData over testResults, but use either if available
          let nodeData = null;
          if (outputData) {
            nodeData = outputData;
          } else if (testResultsData) {
            nodeData = testResultsData;
          }

          const isExpanded = expandedNode === node?.id;

          return (
            &lt;div
              key={node?.id || index}
              className=&quot;bg-gray-800 rounded-lg border border-gray-600 overflow-hidden&quot;
            &gt;
              {/* === NODE HEADER === */}
              &lt;div
                className=&quot;p-3 border-b border-gray-600 bg-gray-750 cursor-pointer hover:bg-gray-700 transition-colors&quot;
                onClick={() =&gt; setExpandedNode(isExpanded ? null : node?.id)}
              &gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                    &lt;span className=&quot;text-xl&quot; title={node?.data?.label || 'Node Icon'}&gt;
                      {getNodeIcon(node)}
                    &lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;
                        {node?.data?.label || 'Unnamed Node'}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{getNodeTypeDisplay(node)}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    {hasOutputData ? (
                      &lt;span className=&quot;px-2 py-1 bg-green-800 text-green-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;✓&lt;/span&gt;
                        &lt;span&gt;Data Available&lt;/span&gt;
                      &lt;/span&gt;
                    ) : (
                      &lt;span className=&quot;px-2 py-1 bg-yellow-800 text-yellow-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;⏳&lt;/span&gt;
                        &lt;span&gt;No Data&lt;/span&gt;
                      &lt;/span&gt;
                    )}
                    &lt;span
                      className={`transform transition-transform text-gray-400 ${isExpanded ? 'rotate-180' : ''}`}
                    &gt;
                      ▼
                    &lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* === EXPANDABLE DATA CONTENT === */}
              {isExpanded &amp;&amp; (
                &lt;div className=&quot;p-3&quot;&gt;
                  {hasOutputData ? (
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      {/* Enhanced JSON viewer for raw data */}
                      &lt;JsonViewer data={nodeData} maxHeight=&quot;400px&quot; enableClipboard={true} /&gt;

                      {/* Then show the formatted renderer */}
                      &lt;ConditionDataRenderer
                        data={nodeData}
                        nodeType={getNodeType(node)}
                        selectedField={selectedField}
                        onFieldSelect={setSelectedField}
                      /&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;
                      &lt;div className=&quot;text-sm&quot;&gt;No output data available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-1&quot;&gt;Test the connected node to generate data&lt;/div&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          );
        })}
      &lt;/div&gt;

      {/* === CONDITION EVALUATION TIPS === */}
      &lt;div className=&quot;mt-6 p-3 bg-gray-800 rounded-lg border border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-2 mb-2&quot;&gt;
          &lt;span className=&quot;text-lg&quot;&gt;💡&lt;/span&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Condition Tips&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;space-y-2 text-xs text-gray-400&quot;&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Reference data fields directly in conditions (e.g.,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;subject&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;priority&lt;/code&gt;)
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Use comparison operators:{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;==&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;!=&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;gt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;lt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;contains&lt;/code&gt;
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Combine conditions with{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;&amp;&lt;/code&gt; (and) or{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;||&lt;/code&gt; (or)
            &lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Component to show summary of all available data fields
const DataFieldsSummary: React.FC&lt;{
  connectedInputNodes: any[];
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ connectedInputNodes, onFieldSelect }) =&gt; {
  const allFields = new Set&lt;string&gt;();

  // Collect all unique fields from connected nodes
  connectedInputNodes.forEach((node, _index) =&gt; {
    const outputData = node?.data?.outputData;
    const testResultsData = node?.data?.testResults?.data;
    const data = outputData || testResultsData;

    if (data &amp;&amp; typeof data === 'object') {
      if (Array.isArray(data)) {
        // Handle arrays (like emails)
        if (data.length &gt; 0 &amp;&amp; typeof data[0] === 'object') {
          Object.keys(data[0]).forEach((key) =&gt; allFields.add(key));
        }
      } else {
        // Handle objects
        Object.keys(data).forEach((key) =&gt; allFields.add(key));
      }
    }
  });

  const fieldsArray = Array.from(allFields).sort();

  if (fieldsArray.length === 0) {
    return (
      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
        No structured fields available. Test connected nodes to analyze data fields.
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
      {fieldsArray.map((field) =&gt; (
        &lt;button
          key={field}
          onClick={() =&gt; onFieldSelect(field)}
          className=&quot;px-2 py-1 bg-purple-800 hover:bg-purple-700 text-purple-200 rounded text-xs transition-colors&quot;
          title={`Click to highlight ${field} in data`}
        &gt;
          {field}
        &lt;/button&gt;
      ))}
    &lt;/div&gt;
  );
};

// Component to render data specifically for condition evaluation
const ConditionDataRenderer: React.FC&lt;{
  data: any;
  nodeType: string;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, nodeType, selectedField, onFieldSelect }) =&gt; {
  if (!data) {
    return &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;No data available&lt;/div&gt;;
  }

  // Handle different data structures

  // Check if it's an array (like emails)
  if (Array.isArray(data)) {
    if (data.length &gt; 0) {
      const firstItem = data[0];
      if (nodeType === 'gmail' || nodeType === 'gmail-trigger') {
        return (
          &lt;EmailConditionView
            email={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      } else {
        // Generic array handling - show first item
        return (
          &lt;GenericConditionView
            data={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      }
    }
  }

  // Handle email data (from Gmail triggers)
  if ((nodeType === 'gmail' || nodeType === 'gmail-trigger') &amp;&amp; typeof data === 'object') {
    return (
      &lt;EmailConditionView
        email={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle transformed data
  if (nodeType === 'transform' &amp;&amp; typeof data === 'object') {
    return (
      &lt;TransformConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle AI Agent data
  if (nodeType === 'ai-agent' &amp;&amp; typeof data === 'object') {
    return (
      &lt;AIConditionView data={data} selectedField={selectedField} onFieldSelect={onFieldSelect} /&gt;
    );
  }

  // Generic structured data
  if (typeof data === 'object' &amp;&amp; data !== null) {
    return (
      &lt;GenericConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;text-xs text-yellow-400&quot;&gt;Debug: {nodeType} node data (fallback renderer)&lt;/div&gt;
      &lt;div className=&quot;bg-gray-900 p-3 rounded border border-gray-600&quot;&gt;
        &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;
          Type: {typeof data} {Array.isArray(data) &amp;&amp; `(array with ${data.length} items)`}
        &lt;/div&gt;
        &lt;div className=&quot;font-mono text-xs text-gray-200 max-h-40 overflow-y-auto&quot;&gt;
          {typeof data === 'string' ? data : JSON.stringify(data, null, 2)}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Email-specific condition view
const EmailConditionView: React.FC&lt;{
  email: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ email, selectedField, onFieldSelect }) =&gt; {
  const emailFields = [
    { key: 'from', label: 'From', value: email.from },
    { key: 'subject', label: 'Subject', value: email.subject },
    { key: 'body', label: 'Body', value: email.body },
    { key: 'isUnread', label: 'Unread', value: email.isUnread },
    {
      key: 'hasAttachments',
      label: 'Has Attachments',
      value: email.hasAttachments,
    },
    { key: 'labels', label: 'Labels', value: email.labels },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-blue-400 mb-2&quot;&gt;📧 Email fields available for conditions:&lt;/div&gt;
      {emailFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Transform data condition view
const TransformConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-green-400 mb-2&quot;&gt;
        🔄 Transformed fields available for conditions:
      &lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// AI Agent data condition view
const AIConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const aiFields = [
    { key: 'output', label: 'AI Output', value: data.output },
    { key: 'provider', label: 'Provider', value: data.provider },
    { key: 'model', label: 'Model', value: data.model },
    { key: 'usage', label: 'Token Usage', value: data.usage },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-orange-400 mb-2&quot;&gt;
        🤖 AI response fields available for conditions:
      &lt;/div&gt;
      {aiFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Generic data condition view
const GenericConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;📊 Data fields available for conditions:&lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Reusable field row component
const FieldRow: React.FC&lt;{
  fieldKey: string;
  label: string;
  value: any;
  isSelected: boolean;
  onSelect: (field: string) =&gt; void;
}&gt; = ({ fieldKey, label, value, isSelected, onSelect }) =&gt; {
  const displayValue =
    typeof value === 'string' &amp;&amp; value.length &gt; 100 ? `${value.substring(0, 100)}...` : value;

  return (
    &lt;div
      className={`p-3 rounded border cursor-pointer transition-all ${
        isSelected
          ? 'border-purple-500 bg-purple-900/20'
          : 'border-gray-600 hover:border-gray-500 bg-gray-750'
      }`}
      onClick={() =&gt; onSelect(fieldKey)}
    &gt;
      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
        &lt;span className={`text-sm font-medium ${isSelected ? 'text-purple-200' : 'text-gray-200'}`}&gt;
          {label}
        &lt;/span&gt;
        &lt;code
          className={`text-xs px-2 py-1 rounded ${
            isSelected ? 'bg-purple-800 text-purple-200' : 'bg-gray-700 text-gray-300'
          }`}
        &gt;
          {fieldKey}
        &lt;/code&gt;
      &lt;/div&gt;
      &lt;div className={`text-xs ${isSelected ? 'text-purple-300' : 'text-gray-400'}`}&gt;
        Type: {typeof value} {Array.isArray(value) &amp;&amp; '(array)'}
      &lt;/div&gt;
      &lt;div className={`text-sm mt-2 ${isSelected ? 'text-purple-100' : 'text-gray-300'}`}&gt;
        {typeof displayValue === 'object'
          ? JSON.stringify(displayValue, null, 2)
          : String(displayValue || 'null')}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Helper functions (same as in other panels)
const getNodeIcon = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return '📧';
  }
  if (node?.type === 'transform') {
    return '🔄';
  }
  if (node?.type === 'ai-agent' || node?.data?.integrationData?.id === 'ai-agent') {
    return '🤖';
  }
  if (node?.type === 'trigger') {
    return '⚡';
  }
  return '📊';
};

const getNodeType = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return 'gmail-trigger';
  }
  if (node?.type === 'transform') {
    return 'transform';
  }
  if (node?.type === 'ai-agent' || node?.data?.integrationData?.id === 'ai-agent') {
    return 'ai-agent';
  }
  return node?.type || 'unknown';
};

const getNodeTypeDisplay = (node: any): string =&gt; {
  return (
    node?.data?.enhancedNodeType?.displayName ||
    node?.data?.nodeTypeData?.displayName ||
    node?.data?.nodeTypeData?.name ||
    node?.type ||
    'Unknown Node Type'
  );
};

export default ConditionInputPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CommentAnnotations.tsx (Line 1:1 - Line 435:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 8:1 - Line 442:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn302" onclick="toggleCodeBlock('cloneGroup302', 'expandBtn302', 'collapseBtn302')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn302" onclick="toggleCodeBlock('cloneGroup302', 'expandBtn302', 'collapseBtn302')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup302"><code class="language-tsx text-sm text-gray-800">/**
 * Comment Annotations
 *
 * Visual comment pins and thread overlays for workflow canvas,
 * providing contextual commenting system similar to Figma's comments.
 */

import { CheckOutlined, CommentOutlined, SendOutlined } from '@ant-design/icons';
import { Avatar, Badge, Button, Card, Input, Popover } from 'antd';
import type React from 'react';
import { useCallback, useState } from 'react';
import type { CollaborationComment } from '../../../core/services/collaborationService';
import { useCollaborationStore } from '../../../core/stores/collaborationStore';
import { useLeanWorkflowStore } from '../../../core/stores/leanWorkflowStore';

const { TextArea } = Input;

interface CommentAnnotationsProps {
  containerRef: React.RefObject&lt;HTMLDivElement&gt;;
  transform: {
    x: number;
    y: number;
    zoom: number;
  };
  onCommentClick?: (position: { x: number; y: number }) =&gt; void;
}

interface CommentPinProps {
  comment: CollaborationComment;
  screenPosition: { x: number; y: number };
  isSelected: boolean;
  onClick: () =&gt; void;
  onResolve: () =&gt; void;
}

export const CommentAnnotations: React.FC&lt;CommentAnnotationsProps&gt; = ({
  containerRef,
  transform,
  onCommentClick,
}) =&gt; {
  const {
    activeComments,
    selectedCommentId,
    currentUser,
    showComments,
    commentMode,
    selectComment,
    resolveComment,
    addComment,
    replyToComment,
  } = useCollaborationStore();
  const { currentWorkflow } = useLeanWorkflowStore();

  const [replyContents, setReplyContents] = useState&lt;Record&lt;string, string&gt;&gt;({});
  const [newCommentContent, setNewCommentContent] = useState('');
  const [pendingCommentPosition, setPendingCommentPosition] = useState&lt;{
    x: number;
    y: number;
  } | null&gt;(null);

  // Convert workflow coordinates to screen coordinates
  const workflowToScreen = useCallback(
    (x: number, y: number) =&gt; ({
      x: (x + transform.x) * transform.zoom,
      y: (y + transform.y) * transform.zoom,
    }),
    [transform]
  );

  // Convert screen coordinates to workflow coordinates
  const screenToWorkflow = useCallback(
    (x: number, y: number) =&gt; ({
      x: x / transform.zoom - transform.x,
      y: y / transform.zoom - transform.y,
    }),
    [transform]
  );

  // Generate user colors
  const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Handle canvas click for new comments
  const handleCanvasClick = useCallback(
    (event: React.MouseEvent) =&gt; {
      if (!commentMode || !containerRef.current) return;

      const rect = containerRef.current.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;

      const workflowPos = screenToWorkflow(x, y);
      setPendingCommentPosition(workflowPos);
      onCommentClick?.(workflowPos);
    },
    [commentMode, containerRef, screenToWorkflow, onCommentClick]
  );

  // Handle adding new comment
  const handleAddComment = useCallback(async () =&gt; {
    if (!newCommentContent.trim() || !pendingCommentPosition) return;

    try {
      await addComment({
        workflowId: currentWorkflow?.id || '',
        content: newCommentContent,
        position: pendingCommentPosition,
        resolved: false,
        mentions: [], // TODO: Parse mentions from content
      });

      setNewCommentContent('');
      setPendingCommentPosition(null);
    } catch (_error) {}
  }, [newCommentContent, pendingCommentPosition, addComment, currentWorkflow?.id]);

  // Handle replying to comment
  const handleReplyToComment = useCallback(
    async (commentId: string) =&gt; {
      const content = replyContents[commentId];
      if (!content?.trim()) return;

      try {
        await replyToComment(commentId, content);
        setReplyContents({ ...replyContents, [commentId]: '' });
      } catch (_error) {}
    },
    [replyContents, replyToComment]
  );

  // Comment Pin Component
  const CommentPin: React.FC&lt;CommentPinProps&gt; = ({
    comment,
    screenPosition,
    isSelected,
    onClick,
    onResolve,
  }) =&gt; {
    const [isHovered, setIsHovered] = useState(false);
    const userColor = getUserColor(comment.author.id);

    const commentThread = (
      &lt;Card size=&quot;small&quot; className=&quot;w-80 max-h-96 overflow-auto&quot; bodyStyle={{ padding: 12 }}&gt;
        &lt;div className=&quot;space-y-3&quot;&gt;
          {/* Comment header */}
          &lt;div className=&quot;flex items-start justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar size={24} src={comment.author.avatar} style={{ backgroundColor: userColor }}&gt;
                {comment.author.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div&gt;
                &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                  {comment.author.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(comment.timestamp).toLocaleString()}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckOutlined /&gt;}
              onClick={(e) =&gt; {
                e.stopPropagation();
                onResolve();
              }}
              className=&quot;text-green-600 hover:bg-green-50&quot;
            &gt;
              Resolve
            &lt;/Button&gt;
          &lt;/div&gt;

          {/* Comment content */}
          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;{comment.content}&lt;/div&gt;

          {/* Replies */}
          {comment.replies.length &gt; 0 &amp;&amp; (
            &lt;div className=&quot;space-y-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700&quot;&gt;
              {comment.replies.map((reply) =&gt; (
                &lt;div key={reply.id} className=&quot;space-y-1&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={16}
                      src={reply.author.avatar}
                      style={{ backgroundColor: getUserColor(reply.author.id) }}
                    &gt;
                      {reply.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                      {reply.author.name}
                    &lt;/span&gt;
                    &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                      {new Date(reply.timestamp).toLocaleString()}
                    &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 pl-6&quot;&gt;
                    {reply.content}
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          )}

          {/* Reply input */}
          &lt;div className=&quot;pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
            &lt;div className=&quot;flex space-x-2&quot;&gt;
              &lt;Input
                size=&quot;small&quot;
                placeholder=&quot;Reply...&quot;
                value={replyContents[comment.id] || ''}
                onChange={(e) =&gt;
                  setReplyContents({
                    ...replyContents,
                    [comment.id]: e.target.value,
                  })
                }
                onPressEnter={() =&gt; handleReplyToComment(comment.id)}
              /&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={() =&gt; handleReplyToComment(comment.id)}
                disabled={!replyContents[comment.id]?.trim()}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/Card&gt;
    );

    return (
      &lt;Popover
        content={commentThread}
        title={null}
        trigger=&quot;click&quot;
        placement=&quot;topLeft&quot;
        overlayClassName=&quot;comment-thread-popover&quot;
      &gt;
        &lt;div
          className={`absolute cursor-pointer transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200 z-40 ${
            isSelected ? 'scale-110' : 'scale-100'
          }`}
          style={{
            left: screenPosition.x,
            top: screenPosition.y,
          }}
          onClick={onClick}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
        &gt;
          {/* Comment pin */}
          &lt;div
            className={`relative w-8 h-8 rounded-full border-2 border-white shadow-lg flex items-center justify-center ${
              isSelected || isHovered ? 'transform scale-110' : ''
            }`}
            style={{
              backgroundColor: userColor,
              boxShadow: isSelected ? `0 0 0 3px ${userColor}40` : '0 2px 8px rgba(0,0,0,0.15)',
            }}
          &gt;
            &lt;CommentOutlined className=&quot;text-white text-sm&quot; /&gt;

            {/* Unread replies indicator */}
            {comment.replies.length &gt; 0 &amp;&amp; (
              &lt;Badge
                count={comment.replies.length}
                size=&quot;small&quot;
                className=&quot;absolute -top-1 -right-1&quot;
              /&gt;
            )}
          &lt;/div&gt;

          {/* Connection line to author avatar */}
          {(isSelected || isHovered) &amp;&amp; (
            &lt;div className=&quot;absolute top-10 left-1/2 transform -translate-x-1/2&quot;&gt;
              &lt;div className=&quot;bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-md border border-gray-200 dark:border-gray-700&quot;&gt;
                &lt;div className=&quot;flex items-center space-x-1&quot;&gt;
                  &lt;Avatar
                    size={16}
                    src={comment.author.avatar}
                    style={{ backgroundColor: userColor }}
                  &gt;
                    {comment.author.name.charAt(0).toUpperCase()}
                  &lt;/Avatar&gt;
                  &lt;span className=&quot;text-xs font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                    {comment.author.name}
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/Popover&gt;
    );
  };

  // Pending comment input
  const PendingCommentInput: React.FC&lt;{ position: { x: number; y: number } }&gt; = ({ position }) =&gt; {
    const screenPos = workflowToScreen(position.x, position.y);

    return (
      &lt;div
        className=&quot;absolute z-50&quot;
        style={{
          left: screenPos.x + 20,
          top: screenPos.y,
        }}
      &gt;
        &lt;Card size=&quot;small&quot; className=&quot;w-80 shadow-lg&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar
                size={24}
                src={currentUser?.avatar}
                style={{
                  backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
                }}
              &gt;
                {currentUser?.name.charAt(0).toUpperCase() || '?'}
              &lt;/Avatar&gt;
              &lt;span className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                Add a comment
              &lt;/span&gt;
            &lt;/div&gt;

            &lt;TextArea
              rows={3}
              placeholder=&quot;What do you think about this?&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
              autoFocus
            /&gt;

            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; {
                  setPendingCommentPosition(null);
                  setNewCommentContent('');
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim()}
              &gt;
                Post
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {/* Pin indicator */}
        &lt;div
          className=&quot;absolute w-6 h-6 rounded-full border-2 border-white shadow-lg flex items-center justify-center&quot;
          style={{
            left: -20,
            top: 20,
            backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
          }}
        &gt;
          &lt;CommentOutlined className=&quot;text-white text-xs&quot; /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!showComments || !containerRef.current) return null;

  return (
    &lt;&gt;
      {/* Canvas click handler for comment mode */}
      {commentMode &amp;&amp; (
        &lt;div
          className=&quot;absolute inset-0 z-30 cursor-crosshair&quot;
          onClick={handleCanvasClick}
          style={{
            background: commentMode
              ? 'linear-gradient(45deg, transparent 40%, rgba(24, 144, 255, 0.1) 50%, transparent 60%)'
              : 'transparent',
          }}
        /&gt;
      )}

      {/* Existing comments */}
      {activeComments.map((comment) =&gt; {
        const screenPos = workflowToScreen(comment.position.x, comment.position.y);

        return (
          &lt;CommentPin
            key={comment.id}
            comment={comment}
            screenPosition={screenPos}
            isSelected={selectedCommentId === comment.id}
            onClick={() =&gt; selectComment(comment.id)}
            onResolve={() =&gt; resolveComment(comment.id)}
          /&gt;
        );
      })}

      {/* Pending comment input */}
      {pendingCommentPosition &amp;&amp; &lt;PendingCommentInput position={pendingCommentPosition} /&gt;}

      {/* Comment mode instructions */}
      {commentMode &amp;&amp; (
        &lt;div className=&quot;absolute top-4 left-1/2 transform -translate-x-1/2 z-50&quot;&gt;
          &lt;div className=&quot;bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-4 py-2 rounded-lg shadow-md border border-blue-200 dark:border-blue-700&quot;&gt;
            &lt;CommentOutlined className=&quot;mr-2&quot; /&gt;
            Click anywhere on the canvas to add a comment
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CollaborationPanel.tsx (Line 1:1 - Line 665:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 5:1 - Line 669:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn304" onclick="toggleCodeBlock('cloneGroup304', 'expandBtn304', 'collapseBtn304')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn304" onclick="toggleCodeBlock('cloneGroup304', 'expandBtn304', 'collapseBtn304')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup304"><code class="language-tsx text-sm text-gray-800">/**
 * Collaboration Panel
 *
 * Real-time collaboration interface with user presence, comments,
 * conflict resolution, and collaboration settings. Inspired by
 * Figma's collaboration features and Google Docs comments.
 */

import {
  CheckOutlined,
  ClockCircleOutlined,
  CommentOutlined,
  ExclamationCircleOutlined,
  SendOutlined,
  TeamOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Avatar,
  Badge,
  Button,
  Card,
  Divider,
  Drawer,
  Empty,
  Input,
  Modal,
  Radio,
  Switch,
  Tabs,
  Tag,
  Timeline,
  Tooltip,
} from 'antd';
import type React from 'react';
import { useCallback, useState } from 'react';
import type { CollaborationConflict } from '../../../core/services/collaborationService';
import { useCollaborationStore } from '../../../core/stores/collaborationStore';
import { useLeanWorkflowStore } from '../../../core/stores/leanWorkflowStore';

const { TextArea } = Input;
const { TabPane } = Tabs;

interface CollaborationPanelProps {
  isVisible: boolean;
  onToggle: () =&gt; void;
}

export const CollaborationPanel: React.FC&lt;CollaborationPanelProps&gt; = ({ isVisible, onToggle }) =&gt; {
  const [activeTab, setActiveTab] = useState('users');
  const [newCommentContent, setNewCommentContent] = useState('');
  const [newCommentPosition, setNewCommentPosition] = useState&lt;{ x: number; y: number } | null&gt;(
    null
  );
  const [replyContents, setReplyContents] = useState&lt;Record&lt;string, string&gt;&gt;({});
  const [conflictModalVisible, setConflictModalVisible] = useState(false);
  const [selectedConflict, setSelectedConflict] = useState&lt;CollaborationConflict | null&gt;(null);

  const {
    isConnected,
    connectionStatus,
    currentUser,
    userPresences,
    operationHistory,
    activeComments,
    activeConflicts,
    selectedCommentId,
    showUserCursors,
    showUserSelections,
    showComments,
    commentMode,
    addComment,
    replyToComment,
    resolveComment,
    resolveConflict,
    selectComment,
    toggleCommentMode,
    toggleUserCursors,
    toggleUserSelections,
    toggleComments,
  } = useCollaborationStore();

  const { selectedNodeIds, currentWorkflow } = useLeanWorkflowStore();

  // Generate user colors for consistent display
  const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Handle adding a comment
  const handleAddComment = useCallback(async () =&gt; {
    if (!newCommentContent.trim() || !newCommentPosition) return;

    try {
      await addComment({
        workflowId: currentWorkflow?.id || '',
        content: newCommentContent,
        position: newCommentPosition,
        nodeId: selectedNodeIds.length === 1 ? selectedNodeIds[0] : undefined,
        resolved: false,
        mentions: [], // TODO: Parse mentions from content
      });

      setNewCommentContent('');
      setNewCommentPosition(null);
    } catch (_error) {}
  }, [newCommentContent, newCommentPosition, selectedNodeIds, addComment, currentWorkflow?.id]);

  // Handle replying to a comment
  const handleReplyToComment = useCallback(
    async (commentId: string) =&gt; {
      const content = replyContents[commentId];
      if (!content?.trim()) return;

      try {
        await replyToComment(commentId, content);
        setReplyContents({ ...replyContents, [commentId]: '' });
      } catch (_error) {}
    },
    [replyContents, replyToComment]
  );

  // Handle conflict resolution
  const handleResolveConflict = useCallback(
    async (conflict: CollaborationConflict, resolution: any) =&gt; {
      try {
        await resolveConflict(conflict.id, resolution);
        setConflictModalVisible(false);
        setSelectedConflict(null);
      } catch (_error) {}
    },
    [resolveConflict]
  );

  // Users Tab
  const UsersTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Active Users ({userPresences.length + (currentUser ? 1 : 0)})
        &lt;/h3&gt;
        &lt;Badge
          status={isConnected ? 'processing' : 'error'}
          text={connectionStatus}
          className=&quot;capitalize&quot;
        /&gt;
      &lt;/div&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        {/* Current user */}
        {currentUser &amp;&amp; (
          &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={currentUser.avatar}
                style={{ backgroundColor: getUserColor(currentUser.id) }}
              &gt;
                {currentUser.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {currentUser.name} (You)
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;{currentUser.email}&lt;/div&gt;
              &lt;/div&gt;
              &lt;Badge status=&quot;processing&quot; /&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        )}

        {/* Other users */}
        {userPresences.map((presence) =&gt; (
          &lt;Card key={presence.userId} size=&quot;small&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={presence.user.avatar}
                style={{ backgroundColor: getUserColor(presence.userId) }}
              &gt;
                {presence.user.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {presence.user.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
                  {presence.user.email}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex flex-col items-end&quot;&gt;
                &lt;Badge
                  status={presence.user.status === 'online' ? 'success' : 'default'}
                  text={presence.user.status}
                /&gt;
                {presence.cursor &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                    Cursor: {Math.round(presence.cursor.x)}, {Math.round(presence.cursor.y)}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        ))}
      &lt;/div&gt;

      {userPresences.length === 0 &amp;&amp; !currentUser &amp;&amp; (
        &lt;Empty description=&quot;No active users&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}

      &lt;Divider /&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;h4 className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;Presence Settings&lt;/h4&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Cursors&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserCursors} onChange={toggleUserCursors} /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Selections&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserSelections} onChange={toggleUserSelections} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Comments Tab
  const CommentsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Comments ({activeComments.length})
        &lt;/h3&gt;
        &lt;div className=&quot;flex space-x-2&quot;&gt;
          &lt;Button
            size=&quot;small&quot;
            type={commentMode ? 'primary' : 'default'}
            icon={&lt;CommentOutlined /&gt;}
            onClick={toggleCommentMode}
          &gt;
            {commentMode ? 'Cancel' : 'Add Comment'}
          &lt;/Button&gt;
          &lt;Switch
            size=&quot;small&quot;
            checked={showComments}
            onChange={toggleComments}
            checkedChildren=&quot;Show&quot;
            unCheckedChildren=&quot;Hide&quot;
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {commentMode &amp;&amp; (
        &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
              Click on the canvas to place a comment, or add a general comment below.
            &lt;/div&gt;
            &lt;TextArea
              rows={3}
              placeholder=&quot;Add your comment...&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
            /&gt;
            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; setNewCommentPosition({ x: 100, y: 100 })}
                disabled={!newCommentContent.trim()}
              &gt;
                Add General Comment
              &lt;/Button&gt;
              &lt;Button
                size=&quot;small&quot;
                type=&quot;primary&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim() || !newCommentPosition}
              &gt;
                Post Comment
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      )}

      &lt;div className=&quot;space-y-3&quot;&gt;
        {activeComments.length === 0 ? (
          &lt;Empty description=&quot;No active comments&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
        ) : (
          activeComments.map((comment) =&gt; (
            &lt;Card
              key={comment.id}
              size=&quot;small&quot;
              className={selectedCommentId === comment.id ? 'border-blue-500 shadow-md' : ''}
              onClick={() =&gt; selectComment(comment.id)}
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                {/* Comment header */}
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={24}
                      src={comment.author.avatar}
                      style={{ backgroundColor: getUserColor(comment.author.id) }}
                    &gt;
                      {comment.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                        {comment.author.name}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                        {new Date(comment.timestamp).toLocaleString()}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex space-x-1&quot;&gt;
                    {comment.nodeId &amp;&amp; &lt;Tag color=&quot;blue&quot;&gt;Node Comment&lt;/Tag&gt;}
                    &lt;Tooltip title=&quot;Resolve Comment&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;CheckOutlined /&gt;}
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          resolveComment(comment.id);
                        }}
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Comment content */}
                &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 ml-8&quot;&gt;
                  {comment.content}
                &lt;/div&gt;

                {/* Replies */}
                {comment.replies.length &gt; 0 &amp;&amp; (
                  &lt;div className=&quot;ml-8 space-y-2 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                    {comment.replies.map((reply) =&gt; (
                      &lt;div key={reply.id} className=&quot;flex space-x-2&quot;&gt;
                        &lt;Avatar
                          size={20}
                          src={reply.author.avatar}
                          style={{ backgroundColor: getUserColor(reply.author.id) }}
                        &gt;
                          {reply.author.name.charAt(0).toUpperCase()}
                        &lt;/Avatar&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                              {reply.author.name}
                            &lt;/span&gt;
                            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                              {new Date(reply.timestamp).toLocaleString()}
                            &lt;/span&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                            {reply.content}
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                )}

                {/* Reply input */}
                &lt;div className=&quot;ml-8 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                  &lt;div className=&quot;flex space-x-2&quot;&gt;
                    &lt;Input
                      size=&quot;small&quot;
                      placeholder=&quot;Reply...&quot;
                      value={replyContents[comment.id] || ''}
                      onChange={(e) =&gt;
                        setReplyContents({
                          ...replyContents,
                          [comment.id]: e.target.value,
                        })
                      }
                      onPressEnter={() =&gt; handleReplyToComment(comment.id)}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;SendOutlined /&gt;}
                      onClick={() =&gt; handleReplyToComment(comment.id)}
                      disabled={!replyContents[comment.id]?.trim()}
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Conflicts Tab
  const ConflictsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Conflicts ({activeConflicts.length})
        &lt;/h3&gt;
        {activeConflicts.length &gt; 0 &amp;&amp; &lt;Badge count={activeConflicts.length} status=&quot;error&quot; /&gt;}
      &lt;/div&gt;

      {activeConflicts.length === 0 ? (
        &lt;div className=&quot;text-center py-8&quot;&gt;
          &lt;CheckOutlined className=&quot;text-4xl text-green-500 mb-2&quot; /&gt;
          &lt;div className=&quot;text-gray-600 dark:text-gray-400&quot;&gt;No conflicts detected&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-3&quot;&gt;
          {activeConflicts.map((conflict) =&gt; (
            &lt;Card
              key={conflict.id}
              size=&quot;small&quot;
              className=&quot;border-red-200 bg-red-50 dark:bg-red-900/20&quot;
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                      &lt;ExclamationCircleOutlined className=&quot;text-red-500&quot; /&gt;
                      &lt;span className=&quot;font-medium text-red-700 dark:text-red-300&quot;&gt;
                        {conflict.type.replace('_', ' ').toUpperCase()}
                      &lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400 mt-1&quot;&gt;
                      Affected nodes: {conflict.affectedNodes.join(', ')}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                      {new Date(conflict.timestamp).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;primary&quot;
                    danger
                    onClick={() =&gt; {
                      setSelectedConflict(conflict);
                      setConflictModalVisible(true);
                    }}
                  &gt;
                    Resolve
                  &lt;/Button&gt;
                &lt;/div&gt;

                &lt;div className=&quot;pl-6&quot;&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                    {conflict.operations.length} conflicting operations
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  // Activity Tab
  const ActivityTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;Recent Activity&lt;/h3&gt;

      &lt;Timeline className=&quot;mt-4&quot;&gt;
        {operationHistory
          .slice(-10)
          .reverse()
          .map((operation) =&gt; (
            &lt;Timeline.Item
              key={operation.id}
              dot={
                &lt;Avatar size={20} style={{ backgroundColor: getUserColor(operation.userId) }}&gt;
                  {operation.userId.charAt(0).toUpperCase()}
                &lt;/Avatar&gt;
              }
            &gt;
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {operation.type.replace('_', ' ')}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(operation.timestamp).toLocaleString()}
                &lt;/div&gt;
                {operation.data?.nodeId &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-600 dark:text-gray-400&quot;&gt;
                    Node: {operation.data.nodeId}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          ))}
      &lt;/Timeline&gt;

      {operationHistory.length === 0 &amp;&amp; (
        &lt;Empty description=&quot;No recent activity&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;&gt;
      &lt;Drawer
        title=&quot;Collaboration&quot;
        placement=&quot;right&quot;
        onClose={onToggle}
        open={isVisible}
        width={400}
        className=&quot;collaboration-drawer&quot;
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab} className=&quot;h-full&quot;&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;TeamOutlined /&gt;
                Users
              &lt;/span&gt;
            }
            key=&quot;users&quot;
          &gt;
            &lt;UsersTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CommentOutlined /&gt;
                Comments
                {activeComments.length &gt; 0 &amp;&amp; (
                  &lt;Badge count={activeComments.length} size=&quot;small&quot; style={{ marginLeft: 4 }} /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;comments&quot;
          &gt;
            &lt;CommentsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;WarningOutlined /&gt;
                Conflicts
                {activeConflicts.length &gt; 0 &amp;&amp; (
                  &lt;Badge
                    count={activeConflicts.length}
                    size=&quot;small&quot;
                    status=&quot;error&quot;
                    style={{ marginLeft: 4 }}
                  /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;conflicts&quot;
          &gt;
            &lt;ConflictsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;ClockCircleOutlined /&gt;
                Activity
              &lt;/span&gt;
            }
            key=&quot;activity&quot;
          &gt;
            &lt;ActivityTab /&gt;
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Drawer&gt;

      {/* Conflict Resolution Modal */}
      &lt;Modal
        title=&quot;Resolve Conflict&quot;
        open={conflictModalVisible}
        onCancel={() =&gt; {
          setConflictModalVisible(false);
          setSelectedConflict(null);
        }}
        footer={null}
        width={600}
      &gt;
        {selectedConflict &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;Alert
              type=&quot;warning&quot;
              message={`${selectedConflict.type.replace('_', ' ')} Conflict`}
              description={`This conflict involves ${selectedConflict.operations.length} operations affecting ${selectedConflict.affectedNodes.length} nodes.`}
            /&gt;

            &lt;div className=&quot;space-y-3&quot;&gt;
              &lt;h4 className=&quot;font-medium&quot;&gt;Choose Resolution Strategy:&lt;/h4&gt;

              &lt;Radio.Group className=&quot;w-full&quot; size=&quot;small&quot;&gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  &lt;Radio value=&quot;last_write_wins&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Last Write Wins&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Keep the most recent changes and discard older ones
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;merge&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Smart Merge&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Attempt to automatically merge compatible changes
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;manual&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Manual Resolution&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Review each change individually and decide
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                &lt;/div&gt;
              &lt;/Radio.Group&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex justify-end space-x-2 pt-4 border-t&quot;&gt;
              &lt;Button onClick={() =&gt; setConflictModalVisible(false)}&gt;Cancel&lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt;
                  handleResolveConflict(selectedConflict, {
                    strategy: 'last_write_wins',
                  })
                }
              &gt;
                Resolve Conflict
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AnalyticsDashboard.tsx (Line 1:1 - Line 750:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 4:1 - Line 753:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn306" onclick="toggleCodeBlock('cloneGroup306', 'expandBtn306', 'collapseBtn306')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn306" onclick="toggleCodeBlock('cloneGroup306', 'expandBtn306', 'collapseBtn306')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup306"><code class="language-tsx text-sm text-gray-800">/**
 * Analytics Dashboard
 *
 * Comprehensive analytics and performance monitoring dashboard providing
 * insights, bottleneck detection, cost optimization, and predictive analytics.
 * Inspired by DataDog, New Relic, and Grafana dashboards.
 */

import {
  BarChartOutlined,
  BulbOutlined,
  CheckCircleOutlined,
  ClockCircleOutlined,
  DashboardOutlined,
  DollarCircleOutlined,
  ReloadOutlined,
  RiseOutlined,
  RobotOutlined,
  ThunderboltOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  Col,
  Empty,
  List,
  Modal,
  Row,
  Select,
  Statistic,
  Switch,
  Table,
  Tabs,
  Tag,
} from 'antd';
import type React from 'react';
import { useEffect, useMemo } from 'react';
import {
  Area,
  AreaChart,
  CartesianGrid,
  Line,
  LineChart,
  Tooltip as RechartsTooltip,
  ResponsiveContainer,
  XAxis,
  YAxis,
} from 'recharts';
import type { NodePerformanceStats } from '../../../core/services/analyticsService';
import {
  formatCurrency,
  formatDuration,
  getCostTrend,
  getExecutionSummary,
  getTopBottlenecks,
  useAnalyticsStore,
} from '../../../core/stores/analyticsStore';

const { TabPane } = Tabs;
const { Option } = Select;

interface AnalyticsDashboardProps {
  isOpen: boolean;
  onClose: () =&gt; void;
  workflowId?: string;
}

export const AnalyticsDashboard: React.FC&lt;AnalyticsDashboardProps&gt; = ({
  isOpen,
  onClose,
  workflowId,
}) =&gt; {
  const {
    currentAnalytics,
    isLoading,
    lastUpdated,
    bottlenecks,
    predictiveInsights,
    costOptimization,
    performanceHistory,
    costHistory,
    reliabilityHistory,
    selectedTab,
    analyticsPeriod,
    // showPredictions,  // TODO: Implement predictions UI
    // showCostAnalysis, // TODO: Implement cost analysis UI
    autoRefresh,
    // selectedNodeId,   // TODO: Implement node selection
    setSelectedTab,
    setAnalyticsPeriod,
    toggleAutoRefresh,
    // togglePredictions,  // TODO: Implement predictions toggle
    // toggleCostAnalysis, // TODO: Implement cost analysis toggle
    setSelectedNode,
    loadAnalytics,
    refreshAnalytics,
  } = useAnalyticsStore();

  // Load analytics when modal opens
  useEffect(() =&gt; {
    if (isOpen &amp;&amp; workflowId &amp;&amp; workflowId !== currentAnalytics?.workflowId) {
      loadAnalytics(workflowId);
    }
  }, [isOpen, workflowId, loadAnalytics, currentAnalytics?.workflowId]);

  const executionSummary = useMemo(() =&gt; getExecutionSummary(currentAnalytics), [currentAnalytics]);

  const topBottlenecks = useMemo(() =&gt; getTopBottlenecks(bottlenecks, 5), [bottlenecks]);

  const costTrend = useMemo(() =&gt; getCostTrend(costHistory), [costHistory]);

  // Chart colors
  const chartColors = {
    primary: '#1890ff',
    success: '#52c41a',
    warning: '#faad14',
    danger: '#ff4d4f',
    purple: '#722ed1',
    cyan: '#13c2c2',
  };

  // Overview Tab Component
  const OverviewTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Key Metrics */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Executions&quot;
              value={executionSummary?.totalExecutions || 0}
              prefix={&lt;ThunderboltOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Success Rate&quot;
              value={executionSummary?.successRate || 0}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;CheckCircleOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.successRate || 0) &gt;= 95 ? '#3f8600' : '#cf1322',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Avg Duration&quot;
              value={formatDuration(executionSummary?.avgDuration || 0)}
              prefix={&lt;ClockCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Efficiency Score&quot;
              value={executionSummary?.efficiency || 0}
              suffix=&quot;/100&quot;
              precision={0}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.efficiency || 0) &gt;= 80 ? '#3f8600' : '#faad14',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Performance Trend Chart */}
      &lt;Card title=&quot;Performance Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={performanceHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Duration']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.primary}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Alerts and Insights Row */}
      &lt;Row gutter={[16, 16]}&gt;
        {/* Top Bottlenecks */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Top Performance Issues&quot; size=&quot;small&quot;&gt;
            {topBottlenecks.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={topBottlenecks}
                renderItem={(bottleneck) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={
                        &lt;Badge status={bottleneck.severity === 'critical' ? 'error' : 'warning'} /&gt;
                      }
                      title={
                        &lt;span&gt;
                          {bottleneck.description}
                          &lt;Tag
                            color={
                              bottleneck.severity === 'critical'
                                ? 'red'
                                : bottleneck.severity === 'high'
                                  ? 'orange'
                                  : 'yellow'
                            }
                            className=&quot;ml-2&quot;
                          &gt;
                            {bottleneck.severity}
                          &lt;/Tag&gt;
                        &lt;/span&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;{bottleneck.impact}&lt;/div&gt;
                          &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No performance issues detected&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;

        {/* Predictive Insights */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;AI Predictions&quot; size=&quot;small&quot;&gt;
            {predictiveInsights.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={predictiveInsights}
                renderItem={(insight) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={&lt;RobotOutlined className=&quot;text-blue-500&quot; /&gt;}
                      title={
                        &lt;div className=&quot;flex items-center&quot;&gt;
                          &lt;span&gt;{insight.description}&lt;/span&gt;
                          &lt;Tag color=&quot;blue&quot; className=&quot;ml-2&quot;&gt;
                            {Math.round(insight.confidence * 100)}% confidence
                          &lt;/Tag&gt;
                        &lt;/div&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;Impact: {insight.predictedImpact}&lt;/div&gt;
                          &lt;div className=&quot;text-green-600 mt-1&quot;&gt;Timeframe: {insight.timeframe}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No predictions available&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  // Performance Tab Component
  const PerformanceTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Performance Charts Row */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Execution Performance&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;AreaChart data={performanceHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Performance']}
                /&gt;
                &lt;Area
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.primary}
                  fill={chartColors.primary}
                  fillOpacity={0.6}
                /&gt;
              &lt;/AreaChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;

        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Reliability Trend&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;LineChart data={reliabilityHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis domain={[0, 100]} /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(1)}%`, 'Success Rate']}
                /&gt;
                &lt;Line
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.success}
                  strokeWidth={2}
                  dot={false}
                /&gt;
              &lt;/LineChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Node Performance Table */}
      &lt;Card title=&quot;Node Performance Analysis&quot; size=&quot;small&quot;&gt;
        &lt;Table
          size=&quot;small&quot;
          dataSource={currentAnalytics?.nodePerformance || []}
          rowKey=&quot;nodeId&quot;
          pagination={{ pageSize: 10 }}
          columns={[
            {
              title: 'Node',
              dataIndex: 'nodeName',
              key: 'nodeName',
              render: (name: string, record: NodePerformanceStats) =&gt; (
                &lt;div&gt;
                  &lt;div className=&quot;font-medium&quot;&gt;{name}&lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;{record.nodeType}&lt;/div&gt;
                &lt;/div&gt;
              ),
            },
            {
              title: 'Executions',
              dataIndex: 'executionCount',
              key: 'executionCount',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.executionCount - b.executionCount,
            },
            {
              title: 'Avg Duration',
              dataIndex: 'averageDuration',
              key: 'averageDuration',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.averageDuration - b.averageDuration,
              render: (duration: number) =&gt; formatDuration(duration),
            },
            {
              title: 'Success Rate',
              dataIndex: 'failureRate',
              key: 'failureRate',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.failureRate - b.failureRate,
              render: (failureRate: number) =&gt; (
                &lt;span style={{ color: failureRate &gt; 0.1 ? '#ff4d4f' : '#52c41a' }}&gt;
                  {((1 - failureRate) * 100).toFixed(1)}%
                &lt;/span&gt;
              ),
            },
            {
              title: 'Trend',
              dataIndex: 'trend',
              key: 'trend',
              render: (trend: string) =&gt; (
                &lt;Tag
                  color={trend === 'improving' ? 'green' : trend === 'degrading' ? 'red' : 'blue'}
                &gt;
                  {trend}
                &lt;/Tag&gt;
              ),
            },
            {
              title: 'Actions',
              key: 'actions',
              render: (_, record: NodePerformanceStats) =&gt; (
                &lt;Button type=&quot;link&quot; size=&quot;small&quot; onClick={() =&gt; setSelectedNode(record.nodeId)}&gt;
                  Analyze
                &lt;/Button&gt;
              ),
            },
          ]}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Cost Tab Component
  const CostTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Cost Overview */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Current Period Cost&quot;
              value={costOptimization?.currentCost || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;DollarCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Potential Savings&quot;
              value={costOptimization?.savings || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;RiseOutlined /&gt;}
              valueStyle={{ color: '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Cost Trend&quot;
              value={costTrend}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{ color: costTrend &gt; 0 ? '#cf1322' : '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Cost Chart */}
      &lt;Card title=&quot;Cost Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={costHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis tickFormatter={(value) =&gt; formatCurrency(value)} /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [formatCurrency(value), 'Cost']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.warning}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Cost Optimization Recommendations */}
      {costOptimization &amp;&amp; (
        &lt;Card title=&quot;Optimization Recommendations&quot; size=&quot;small&quot;&gt;
          &lt;List
            dataSource={costOptimization.recommendations}
            renderItem={(recommendation) =&gt; (
              &lt;List.Item&gt;
                &lt;List.Item.Meta
                  avatar={&lt;DollarCircleOutlined className=&quot;text-green-500&quot; /&gt;}
                  title={
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;span&gt;{recommendation.description}&lt;/span&gt;
                      &lt;Tag color=&quot;green&quot;&gt;
                        Save {formatCurrency(recommendation.estimatedSavings)}
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                  description={
                    &lt;div className=&quot;text-sm&quot;&gt;
                      &lt;div className=&quot;text-gray-600&quot;&gt;{recommendation.implementation}&lt;/div&gt;
                      &lt;Tag
                        color={
                          recommendation.impact === 'high'
                            ? 'red'
                            : recommendation.impact === 'medium'
                              ? 'orange'
                              : 'blue'
                        }
                        className=&quot;mt-1&quot;
                      &gt;
                        {recommendation.impact} impact
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                /&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        &lt;/Card&gt;
      )}
    &lt;/div&gt;
  );

  // Insights Tab Component
  const InsightsTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Predictive Insights */}
      &lt;Card title=&quot;Predictive Analytics&quot; size=&quot;small&quot;&gt;
        {predictiveInsights.length &gt; 0 ? (
          &lt;List
            dataSource={predictiveInsights}
            renderItem={(insight) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;RobotOutlined className=&quot;text-blue-500 mr-2&quot; /&gt;
                        {insight.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag color=&quot;blue&quot;&gt;{Math.round(insight.confidence * 100)}% confidence&lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{insight.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Timeframe:&lt;/span&gt;
                        &lt;div&gt;{insight.timeframe}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Expected Impact:&lt;/span&gt;
                        &lt;div&gt;{insight.predictedImpact}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommended Actions:&lt;/span&gt;
                      &lt;ul className=&quot;mt-2 space-y-1&quot;&gt;
                        {insight.recommendedActions.map((action, index) =&gt; (
                          &lt;li key={index} className=&quot;text-sm text-green-600&quot;&gt;
                            • {action}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                      Based on: {insight.basedOn.join(', ')}
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No predictive insights available&quot; /&gt;
        )}
      &lt;/Card&gt;

      {/* Bottleneck Analysis */}
      &lt;Card title=&quot;Bottleneck Analysis&quot; size=&quot;small&quot;&gt;
        {bottlenecks.length &gt; 0 ? (
          &lt;List
            dataSource={bottlenecks}
            renderItem={(bottleneck) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;WarningOutlined
                          className={`mr-2 ${
                            bottleneck.severity === 'critical'
                              ? 'text-red-500'
                              : bottleneck.severity === 'high'
                                ? 'text-orange-500'
                                : 'text-yellow-500'
                          }`}
                        /&gt;
                        {bottleneck.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag
                        color={
                          bottleneck.severity === 'critical'
                            ? 'red'
                            : bottleneck.severity === 'high'
                              ? 'orange'
                              : 'yellow'
                        }
                      &gt;
                        {bottleneck.severity}
                      &lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{bottleneck.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Impact:&lt;/span&gt;
                        &lt;div&gt;{bottleneck.impact}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Improvement:&lt;/span&gt;
                        &lt;div className=&quot;text-green-600&quot;&gt;{bottleneck.estimatedImprovement}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommendation:&lt;/span&gt;
                      &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No bottlenecks detected&quot; /&gt;
        )}
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Settings and Controls
  const AnalyticsHeader: React.FC = () =&gt; (
    &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
      &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
        &lt;Select value={analyticsPeriod} onChange={setAnalyticsPeriod} style={{ width: 120 }}&gt;
          &lt;Option value={1}&gt;Last 24h&lt;/Option&gt;
          &lt;Option value={7}&gt;Last 7 days&lt;/Option&gt;
          &lt;Option value={30}&gt;Last 30 days&lt;/Option&gt;
          &lt;Option value={90}&gt;Last 90 days&lt;/Option&gt;
        &lt;/Select&gt;

        &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Auto-refresh:&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={autoRefresh} onChange={toggleAutoRefresh} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
        {lastUpdated &amp;&amp; (
          &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
            Updated: {new Date(lastUpdated).toLocaleTimeString()}
          &lt;/span&gt;
        )}

        &lt;Button
          type=&quot;text&quot;
          icon={&lt;ReloadOutlined /&gt;}
          onClick={refreshAnalytics}
          loading={isLoading}
        &gt;
          Refresh
        &lt;/Button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  return (
    &lt;Modal
      title=&quot;Workflow Analytics Dashboard&quot;
      open={isOpen}
      onCancel={onClose}
      width={1200}
      footer={null}
      className=&quot;analytics-dashboard-modal&quot;
    &gt;
      &lt;AnalyticsHeader /&gt;

      &lt;Tabs
        activeKey={selectedTab}
        onChange={(key) =&gt; setSelectedTab(key as any)}
        className=&quot;analytics-tabs&quot;
      &gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DashboardOutlined /&gt;
              Overview
            &lt;/span&gt;
          }
          key=&quot;overview&quot;
        &gt;
          &lt;OverviewTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Performance
            &lt;/span&gt;
          }
          key=&quot;performance&quot;
        &gt;
          &lt;PerformanceTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DollarCircleOutlined /&gt;
              Costs
            &lt;/span&gt;
          }
          key=&quot;costs&quot;
        &gt;
          &lt;CostTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BulbOutlined /&gt;
              Insights
            &lt;/span&gt;
          }
          key=&quot;insights&quot;
        &gt;
          &lt;InsightsTab /&gt;
        &lt;/TabPane&gt;
      &lt;/Tabs&gt;
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedPropertyPanel.tsx (Line 1:1 - Line 487:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancedpropertypanel/AdvancedPropertyPanel.tsx (Line 11:1 - Line 497:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn308" onclick="toggleCodeBlock('cloneGroup308', 'expandBtn308', 'collapseBtn308')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn308" onclick="toggleCodeBlock('cloneGroup308', 'expandBtn308', 'collapseBtn308')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup308"><code class="language-tsx text-sm text-gray-800">/**
 * Advanced Property Panel
 *
 * Three-column layout inspired by SIM's property panel:
 * - INPUT column (700px, resizable): Connected node data visualization
 * - CONFIGURATION column (550px): Dynamic property forms with enhanced features
 * - OUTPUT column: Real-time preview and execution results
 */

import {
  BugOutlined,
  CloseOutlined,
  CopyOutlined,
  FullscreenOutlined,
  PlayCircleOutlined,
  SaveOutlined,
  SettingOutlined,
  SyncOutlined,
} from '@ant-design/icons';
import { Badge, Button, Card, Drawer, Space, Tabs, Tooltip } from 'antd';
import React, { useCallback, useMemo, useState } from 'react';
import { nodeRegistry } from '@/core/nodes';
import { useEnhancedExecutionStore } from '@/core/stores/enhancedExecutionStore';
import { useLeanWorkflowStore } from '@/core/stores/leanWorkflowStore';
import { cn, JsonViewer } from '@/design-system';
import type { PropertyValidationResult } from './EnhancedPropertyRenderer';
import EnhancedPropertyRenderer from './EnhancedPropertyRenderer';

// Simple type definition for property form state
type PropertyFormState = Record&lt;string, any&gt;;

interface AdvancedPropertyPanelProps {
  isOpen: boolean;
  onClose: () =&gt; void;
  nodeId?: string;
}

interface ResizablePanelProps {
  children: React.ReactNode;
  title: string;
  width: number;
  minWidth?: number;
  maxWidth?: number;
  onResize?: (width: number) =&gt; void;
  actions?: React.ReactNode[];
  badge?: string | number;
}

const ResizablePanel: React.FC&lt;ResizablePanelProps&gt; = ({
  children,
  title,
  width,
  minWidth = 200,
  maxWidth = 1000,
  onResize,
  actions,
  badge,
}) =&gt; {
  const [isResizing, setIsResizing] = useState(false);
  const [startX, setStartX] = useState(0);
  const [startWidth, setStartWidth] = useState(width);

  const handleMouseDown = useCallback(
    (e: React.MouseEvent) =&gt; {
      setIsResizing(true);
      setStartX(e.clientX);
      setStartWidth(width);
    },
    [width]
  );

  const handleMouseMove = useCallback(
    (e: MouseEvent) =&gt; {
      if (!isResizing) return;

      const deltaX = e.clientX - startX;
      const newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth + deltaX));
      onResize?.(newWidth);
    },
    [isResizing, startX, startWidth, minWidth, maxWidth, onResize]
  );

  const handleMouseUp = useCallback(() =&gt; {
    setIsResizing(false);
  }, []);

  React.useEffect(() =&gt; {
    if (isResizing) {
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);

      return () =&gt; {
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };
    }
  }, [isResizing, handleMouseMove, handleMouseUp]);

  return (
    &lt;div className=&quot;h-full border-r border-gray-700 bg-gray-800 flex flex-col&quot; style={{ width }}&gt;
      {/* Panel Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700 bg-gray-900&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;h3 className=&quot;text-sm font-semibold text-white&quot;&gt;{title}&lt;/h3&gt;
          {badge &amp;&amp; (
            &lt;Badge count={badge} className=&quot;text-xs&quot; style={{ backgroundColor: '#1890ff' }} /&gt;
          )}
        &lt;/div&gt;
        {actions &amp;&amp; &lt;Space size=&quot;small&quot;&gt;{actions}&lt;/Space&gt;}
      &lt;/div&gt;

      {/* Panel Content */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;{children}&lt;/div&gt;

      {/* Resize Handle */}
      {onResize &amp;&amp; (
        &lt;div
          className={cn(
            'absolute top-0 right-0 w-1 h-full cursor-col-resize bg-transparent hover:bg-blue-500 transition-colors',
            isResizing &amp;&amp; 'bg-blue-500'
          )}
          onMouseDown={handleMouseDown}
        /&gt;
      )}
    &lt;/div&gt;
  );
};

const InputDataPanel: React.FC&lt;{
  nodeId: string;
  width: number;
  onResize: (width: number) =&gt; void;
}&gt; = ({ nodeId, width, onResize }) =&gt; {
  const { edges } = useLeanWorkflowStore();
  const { getNodeState } = useEnhancedExecutionStore();

  // Find incoming connections to this node
  const incomingData = useMemo(() =&gt; {
    const incomingEdges = edges.filter((edge) =&gt; edge.target === nodeId);
    const data: Record&lt;string, any&gt; = {};

    incomingEdges.forEach((edge) =&gt; {
      const sourceNodeState = getNodeState(edge.source);
      if (sourceNodeState?.outputData) {
        data[edge.source] = sourceNodeState.outputData;
      }
    });

    return data;
  }, [edges, nodeId, getNodeState]);

  const actions = [
    &lt;Tooltip key=&quot;refresh&quot; title=&quot;Refresh data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;SyncOutlined /&gt;}
        onClick={() =&gt; {
          // Refresh input data
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          navigator.clipboard.writeText(JSON.stringify(incomingData, null, 2));
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  return (
    &lt;ResizablePanel
      title=&quot;Input Data&quot;
      width={width}
      onResize={onResize}
      actions={actions}
      badge={Object.keys(incomingData).length || undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {Object.keys(incomingData).length === 0 ? (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📥&lt;/div&gt;
            &lt;div&gt;No input data available&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;
              Connect nodes or execute the workflow to see input data
            &lt;/div&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-4&quot;&gt;
            {Object.entries(incomingData).map(([sourceNodeId, data]) =&gt; (
              &lt;Card
                key={sourceNodeId}
                size=&quot;small&quot;
                title={`From: ${sourceNodeId}`}
                className=&quot;bg-gray-900 border-gray-600&quot;
              &gt;
                &lt;JsonViewer data={data} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
              &lt;/Card&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

const ConfigurationPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeById, updateNodeParameters } = useLeanWorkflowStore();
  const [activeTab, setActiveTab] = useState('properties');
  const [formState, setFormState] = useState&lt;PropertyFormState&gt;({});
  const [isValid, setIsValid] = useState(true);
  const [errors, setErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const node = getNodeById(nodeId);
  const nodeDefinition = node ? nodeRegistry.getNodeTypeDescription(node.type) : null;

  // Get enhanced properties for this node
  const enhancedProperties = useMemo(() =&gt; {
    if (!nodeDefinition) return [];

    // Use basic properties for now, can be enhanced later
    return nodeDefinition.properties || [];
  }, [nodeDefinition]);

  // Initialize form state from node parameters
  React.useEffect(() =&gt; {
    if (node) {
      setFormState(node.parameters || {});
    }
  }, [node]);

  // Property change handlers
  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      const newFormState = { ...formState, [name]: value };
      setFormState(newFormState);
      updateNodeParameters(nodeId, { [name]: value });
    },
    [formState, nodeId, updateNodeParameters]
  );

  const handleValidationChange = useCallback((result: PropertyValidationResult) =&gt; {
    setIsValid(result.isValid);
    setErrors(result.errors);
  }, []);

  const handleTest = useCallback(async () =&gt; {}, []);

  const handleSave = useCallback(async () =&gt; {}, []);

  const actions = [
    &lt;Tooltip key=&quot;test&quot; title=&quot;Test node&quot;&gt;
      &lt;Button
        type=&quot;primary&quot;
        size=&quot;small&quot;
        icon={&lt;PlayCircleOutlined /&gt;}
        onClick={handleTest}
        disabled={!isValid}
      &gt;
        Test
      &lt;/Button&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;debug&quot; title=&quot;Debug mode&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;BugOutlined /&gt;}
        onClick={() =&gt; {
          // Toggle debug mode for this node
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;save&quot; title=&quot;Save configuration&quot;&gt;
      &lt;Button type=&quot;text&quot; size=&quot;small&quot; icon={&lt;SaveOutlined /&gt;} onClick={handleSave} /&gt;
    &lt;/Tooltip&gt;,
  ];

  const tabItems = [
    {
      key: 'properties',
      label: (
        &lt;span&gt;
          Properties
          {errors.size &gt; 0 &amp;&amp; (
            &lt;Badge
              count={errors.size}
              size=&quot;small&quot;
              style={{ backgroundColor: '#ff4d4f', marginLeft: 8 }}
            /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          {enhancedProperties.length === 0 ? (
            &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
              &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
              &lt;div&gt;No properties available&lt;/div&gt;
              &lt;div className=&quot;text-xs mt-2&quot;&gt;
                This node type doesn't have configurable properties
              &lt;/div&gt;
            &lt;/div&gt;
          ) : (
            &lt;EnhancedPropertyRenderer
              properties={enhancedProperties}
              formState={formState}
              onChange={handlePropertyChange}
              onValidationChange={handleValidationChange}
              theme=&quot;dark&quot;
            /&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'credentials',
      label: 'Credentials',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;🔐&lt;/div&gt;
            &lt;div&gt;Credential management&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Configure authentication for this node&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'settings',
      label: 'Settings',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
            &lt;div&gt;Node settings&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Advanced configuration options&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;ResizablePanel title=&quot;Configuration&quot; width={550} actions={actions}&gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabItems}
        className=&quot;h-full&quot;
        tabBarStyle={{ margin: 0, paddingLeft: 16, paddingRight: 16 }}
      /&gt;
    &lt;/ResizablePanel&gt;
  );
};

const OutputPreviewPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeState } = useEnhancedExecutionStore();
  const nodeState = getNodeState(nodeId);

  const actions = [
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy output&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          if (nodeState?.outputData) {
            navigator.clipboard.writeText(JSON.stringify(nodeState.outputData, null, 2));
          }
        }}
        disabled={!nodeState?.outputData}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;fullscreen&quot; title=&quot;Fullscreen view&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;FullscreenOutlined /&gt;}
        onClick={() =&gt; {
          // Open fullscreen view
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  const hasOutput = nodeState?.outputData;
  const hasError = nodeState?.error;

  return (
    &lt;ResizablePanel
      title=&quot;Output Preview&quot;
      width={400}
      actions={actions}
      badge={hasOutput ? '✓' : hasError ? '✗' : undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {hasError &amp;&amp; nodeState?.error ? (
          &lt;Card className=&quot;bg-red-900 border-red-600&quot; title=&quot;Execution Error&quot; size=&quot;small&quot;&gt;
            &lt;div className=&quot;text-red-200 text-sm&quot;&gt;
              &lt;div className=&quot;font-semibold mb-2&quot;&gt;{nodeState.error.message}&lt;/div&gt;
              {nodeState.error.stack &amp;&amp; (
                &lt;details className=&quot;mt-2&quot;&gt;
                  &lt;summary className=&quot;cursor-pointer&quot;&gt;Stack Trace&lt;/summary&gt;
                  &lt;pre className=&quot;text-xs mt-2 overflow-x-auto&quot;&gt;{nodeState.error.stack}&lt;/pre&gt;
                &lt;/details&gt;
              )}
            &lt;/div&gt;
          &lt;/Card&gt;
        ) : hasOutput ? (
          &lt;div&gt;
            &lt;div className=&quot;flex items-center justify-between mb-3&quot;&gt;
              &lt;span className=&quot;text-sm font-medium text-green-400&quot;&gt;Output Data&lt;/span&gt;
              {nodeState.duration &amp;&amp; (
                &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                  {nodeState.duration &lt; 1000
                    ? `${nodeState.duration}ms`
                    : `${(nodeState.duration / 1000).toFixed(2)}s`}
                &lt;/span&gt;
              )}
            &lt;/div&gt;
            &lt;JsonViewer data={nodeState.outputData} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📤&lt;/div&gt;
            &lt;div&gt;No output data&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Execute this node to see output data&lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

export const AdvancedPropertyPanel: React.FC&lt;AdvancedPropertyPanelProps&gt; = ({
  isOpen,
  onClose,
  nodeId,
}) =&gt; {
  const [inputPanelWidth, setInputPanelWidth] = useState(700);
  const { getNodeById } = useLeanWorkflowStore();

  const node = nodeId ? getNodeById(nodeId) : null;

  if (!isOpen || !nodeId || !node) {
    return null;
  }

  return (
    &lt;Drawer
      title={
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
            &lt;SettingOutlined /&gt;
            &lt;span&gt;{node.name || node.type}&lt;/span&gt;
            &lt;Badge status=&quot;processing&quot; text={node.type} /&gt;
          &lt;/div&gt;
          &lt;Button type=&quot;text&quot; icon={&lt;CloseOutlined /&gt;} onClick={onClose} size=&quot;small&quot; /&gt;
        &lt;/div&gt;
      }
      placement=&quot;bottom&quot;
      height=&quot;80vh&quot;
      open={isOpen}
      onClose={onClose}
      closable={false}
      className=&quot;advanced-property-panel&quot;
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;div className=&quot;flex h-full bg-gray-800&quot;&gt;
        {/* INPUT Column */}
        &lt;InputDataPanel nodeId={nodeId} width={inputPanelWidth} onResize={setInputPanelWidth} /&gt;

        {/* CONFIGURATION Column */}
        &lt;ConfigurationPanel nodeId={nodeId} /&gt;

        {/* OUTPUT Column */}
        &lt;OutputPreviewPanel nodeId={nodeId} /&gt;
      &lt;/div&gt;
    &lt;/Drawer&gt;
  );
};

export default AdvancedPropertyPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedNodePanel.tsx (Line 1:1 - Line 13:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancednodepanel/AdvancedNodePanel.tsx (Line 1:1 - Line 12:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn310" onclick="toggleCodeBlock('cloneGroup310', 'expandBtn310', 'collapseBtn310')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn310" onclick="toggleCodeBlock('cloneGroup310', 'expandBtn310', 'collapseBtn310')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup310"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { CONTAINER_TEMPLATES, ContainerFactory } from '@/app/services/containerFactory';
import { nodeRegistry, useLeanWorkflowStore } from '@/core';
import {
  CATEGORY_DESCRIPTIONS,
  CATEGORY_ICONS,
  UNIFIED_CATEGORIES,
} from '@/core/constants/categories';
import { useAIAssistantStore } from '@/core/stores/aiAssistantStore';
import { VirtualizedList } from '@/design-system';

interface</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedNodePanel.tsx (Line 11:18 - Line 522:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancednodepanel/AdvancedNodePanel.tsx (Line 16:19 - Line 527:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn311" onclick="toggleCodeBlock('cloneGroup311', 'expandBtn311', 'collapseBtn311')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn311" onclick="toggleCodeBlock('cloneGroup311', 'expandBtn311', 'collapseBtn311')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup311"><code class="language-tsx text-sm text-gray-800">;

interface AdvancedNodePanelProps {
  isCollapsed: boolean;
  onToggle: () =&gt; void;
}

// Helper function to get category metadata
const getCategoryMetadata = (category: string) =&gt; {
  const icon = CATEGORY_ICONS[category as keyof typeof CATEGORY_ICONS];
  const info = CATEGORY_DESCRIPTIONS[category as keyof typeof CATEGORY_DESCRIPTIONS];
  return { icon, info };
};

const AdvancedNodePanel: React.FC&lt;AdvancedNodePanelProps&gt; = ({ isCollapsed, onToggle }) =&gt; {
  const { addNode, addEdge, nodes, edges } = useLeanWorkflowStore();
  const { isEnabled: isAIEnabled, nodeSuggestions, getNodeSuggestions } = useAIAssistantStore();
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState&lt;string&gt;('all');
  const [showAISuggestions, setShowAISuggestions] = useState(true);

  // Get all nodes from the registry (replacing hardcoded array)
  const allRegistryDescriptions = nodeRegistry.getAllNodeTypeDescriptions();

  const registryNodes = allRegistryDescriptions
    .map((description) =&gt; ({
      id: `registry-${description.name || 'unknown'}`,
      displayName: description.displayName || description.name || 'Unknown Node',
      description: description.description || 'No description available',
      icon: description.icon || '⚡',
      category: description.categories?.[0] || UNIFIED_CATEGORIES.BUSINESS_PRODUCTIVITY,
      color: description.defaults?.color || '#6B7280',
      type: description.name || 'unknown',
      nodeTypeData: {
        name: description.name || 'unknown',
        displayName: description.displayName || description.name || 'Unknown Node',
      },
      isCore: true, // All registry nodes are core nodes
    }))
    .filter((node) =&gt; node.type !== 'unknown'); // Filter out malformed nodes

  // Add container nodes
  const containerNodes = Object.values(CONTAINER_TEMPLATES).map((template) =&gt; ({
    id: `container-${template.type}`,
    displayName: template.label,
    description: template.description,
    icon: template.icon,
    category: template.category,
    color: '#8B5CF6', // Purple color for containers
    type: 'container',
    containerType: template.type,
    nodeTypeData: {
      name: 'container',
      displayName: template.label,
      containerType: template.type,
    },
    isCore: true,
  })) as Array&lt;{
    id: string;
    displayName: string;
    description: string;
    icon: string;
    category: string;
    color: string;
    type: string;
    containerType?: string;
    nodeTypeData: {
      name: string;
      displayName: string;
      containerType?: string;
    };
    isCore: boolean;
  }&gt;;

  // Only log in development mode and only if there are issues
  if (import.meta.env.DEV &amp;&amp; registryNodes.length === 0) {
  }

  // Pure Registry System - use only registry nodes, no integration duplicates
  const allAvailableNodes = [...registryNodes, ...containerNodes];

  // Use unified categories
  const categories = ['all', ...Object.values(UNIFIED_CATEGORIES).sort()];

  // AI-powered node suggestions
  useEffect(() =&gt; {
    if (isAIEnabled &amp;&amp; nodes.length &gt; 0) {
      const timeoutId = setTimeout(() =&gt; {
        getNodeSuggestions({
          currentNodes: nodes,
          currentEdges: edges,
          lastAction: 'node_added',
        }).catch((_error) =&gt; {});
      }, 500); // Debounce suggestions
      return () =&gt; clearTimeout(timeoutId);
    }
  }, [isAIEnabled, nodes, edges, getNodeSuggestions]);

  // Convert AI suggestions to node format for rendering
  const aiSuggestedNodes = nodeSuggestions.map((suggestion) =&gt; ({
    id: `ai-suggestion-${suggestion.id}`,
    displayName: suggestion.title,
    description: suggestion.description,
    icon: '🤖', // AI suggestion icon
    category: 'AI_SUGGESTIONS',
    color: '#3B82F6', // Blue color for AI suggestions
    type: suggestion.type,
    nodeTypeData: {
      name: suggestion.type,
      displayName: suggestion.title,
    },
    isCore: false,
    aiSuggestion: suggestion,
  }));

  const handleAISuggestionAdd = useCallback(
    (suggestion: (typeof aiSuggestedNodes)[0]) =&gt; {
      if (suggestion.aiSuggestion) {
        // Use default position since AIWorkflowSuggestion doesn't have placement
        const defaultPosition = { x: 100, y: 100 };

        // Create node at default position
        const newNodeId = `node-${Date.now()}-${Math.random().toString(36).substr(2, 9)}-${suggestion.type}`;
        const enhancedNodeType = nodeRegistry.getNodeTypeDescription(suggestion.type);

        const newNode = {
          id: newNodeId,
          type: suggestion.type,
          position: defaultPosition,
          parameters: {
            label: suggestion.displayName,
            nodeType: suggestion.nodeTypeData.name,
            configuration: {},
            credentials: [],
            icon: enhancedNodeType?.icon || suggestion.icon,
            enhancedNodeType: enhancedNodeType,
            nodeTypeData: suggestion.nodeTypeData,
            config: {},
          },
        };

        addNode(newNode);

        // Skip auto-connect since AI suggestion doesn't have connections
        const connections: any[] = [];
        connections.forEach((connection: any) =&gt; {
          if (connection.sourceNodeId &amp;&amp; connection.type === 'input') {
            const newEdge = {
              id: `edge-${connection.sourceNodeId}-${newNodeId}`,
              source: connection.sourceNodeId,
              target: newNodeId,
              type: 'default',
            };
            addEdge(newEdge);
          } else if (connection.targetNodeId &amp;&amp; connection.type === 'output') {
            const newEdge = {
              id: `edge-${newNodeId}-${connection.targetNodeId}`,
              source: newNodeId,
              target: connection.targetNodeId,
              type: 'default',
            };
            addEdge(newEdge);
          }
        });
      }
    },
    [addNode, addEdge]
  );

  // Filter and sort nodes in ascending order
  const filteredNodes = allAvailableNodes
    .filter((node) =&gt; {
      const matchesSearch =
        (node.displayName?.toLowerCase().includes(searchTerm.toLowerCase()) ?? false) ||
        (node.description?.toLowerCase().includes(searchTerm.toLowerCase()) ?? false);
      const matchesCategory = selectedCategory === 'all' || node.category === selectedCategory;
      return matchesSearch &amp;&amp; matchesCategory;
    })
    .sort((a, b) =&gt; (a.displayName || '').localeCompare(b.displayName || ''));

  const onDragStart = useCallback((event: React.DragEvent, node: (typeof allAvailableNodes)[0]) =&gt; {
    try {
      const dragData = {
        type: node.type,
        nodeTypeData: node.nodeTypeData,
        ...(node.type === 'container' &amp;&amp; {
          containerType: (node as any).containerType,
        }),
      };

      event.dataTransfer.setData('application/reactflow', JSON.stringify(dragData));
      event.dataTransfer.effectAllowed = 'move';
    } catch (_error) {}
  }, []);

  // Helper function to find the rightmost node (last in sequence)
  const findLastNode = useCallback(() =&gt; {
    if (nodes.length === 0) return null;

    // Find node with no outgoing connections (target but no source edges)
    const nodesWithOutgoing = new Set(edges.map((edge) =&gt; edge.source));
    const candidateNodes = nodes.filter((node) =&gt; !nodesWithOutgoing.has(node.id));

    if (candidateNodes.length === 0) {
      // If all nodes have outgoing connections, use the rightmost positioned node
      return nodes.reduce((rightmost, current) =&gt;
        current.position.x &gt; rightmost.position.x ? current : rightmost
      );
    }

    // Among candidates with no outgoing connections, pick the rightmost
    return candidateNodes.reduce((rightmost, current) =&gt;
      current.position.x &gt; rightmost.position.x ? current : rightmost
    );
  }, [nodes, edges]);

  const handleAddNode = useCallback(
    (node: (typeof allAvailableNodes)[0]) =&gt; {
      // Find last node for auto-connection
      const lastNode = findLastNode();

      // Position new node to the right of the last node, or at origin if no nodes exist
      const newPosition = lastNode
        ? { x: lastNode.position.x + 300, y: lastNode.position.y }
        : { x: 100, y: 100 };

      let newNode;

      // Handle container nodes differently
      if (node.type === 'container') {
        const containerNode = ContainerFactory.createContainer(
          (node as any).containerType,
          newPosition,
          undefined,
          node.displayName
        );

        // Convert to WorkflowNodeInstance format
        newNode = {
          id: containerNode.id,
          type: containerNode.type || 'container',
          position: containerNode.position,
          parameters: containerNode.data || {},
        };
      } else {
        // Generate a unique ID for the workflow node (simplified for registry nodes)
        const baseId = node.nodeTypeData.name;
        const newNodeId = `node-${Date.now()}-${Math.random().toString(36).substr(2, 9)}-${baseId}`;

        // Get the node type description from registry
        const enhancedNodeType = nodeRegistry.getNodeTypeDescription(node.type);

        newNode = {
          id: newNodeId,
          type: node.type,
          position: newPosition,
          parameters: {
            label: node.displayName,
            nodeType: node.nodeTypeData.name,
            configuration: {},
            credentials: [],
            // Include icon and enhancedNodeType for property panel
            icon: enhancedNodeType?.icon || node.icon,
            enhancedNodeType: enhancedNodeType,
            // Node type data for registry system
            nodeTypeData: node.nodeTypeData,
            config: {},
          },
        };
      }

      addNode(newNode);

      // Auto-connect to the last node if it exists
      if (lastNode) {
        const newEdge = {
          id: `edge-${lastNode.id}-${newNode.id}`,
          source: lastNode.id,
          target: newNode.id,
          type: 'default',
        };
        addEdge(newEdge);
      }
    },
    [addNode, addEdge, findLastNode]
  );

  // Render function for AI suggestion items
  const renderAISuggestionItem = useCallback(
    (suggestion: (typeof aiSuggestedNodes)[0], _index: number) =&gt; (
      &lt;div
        key={suggestion.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, suggestion);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAISuggestionAdd(suggestion);
        }}
        className=&quot;group p-2.5 border border-blue-200 bg-blue-50 rounded-md cursor-move hover:bg-blue-100 hover:border-blue-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm bg-blue-500&quot;&gt;
            {suggestion.icon}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-blue-900 truncate&quot;&gt;{suggestion.displayName}&lt;/p&gt;
              &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-1.5 py-0.5 rounded-full font-medium&quot;&gt;
                AI
              &lt;/span&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-blue-700 truncate mt-0.5 leading-tight&quot;&gt;
              {suggestion.description}
            &lt;/p&gt;
            {suggestion.aiSuggestion &amp;&amp; (
              &lt;div className=&quot;mt-1&quot;&gt;
                &lt;p className=&quot;text-xs text-blue-600 italic&quot;&gt;
                  💡 {suggestion.aiSuggestion.reasoning}
                &lt;/p&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-700 text-xs px-1.5 py-0.5 rounded mt-1 inline-block&quot;&gt;
                  Confidence: {Math.round(suggestion.aiSuggestion.confidence * 100)}%
                &lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAISuggestionAdd]
  );

  // Render function for node items in virtualized list
  const renderNodeItem = useCallback(
    (node: (typeof allAvailableNodes)[0], _index: number) =&gt; (
      &lt;div
        key={node.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, node);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAddNode(node);
        }}
        className=&quot;group p-2.5 border border-gray-200 rounded-md cursor-move hover:bg-gray-50 hover:border-gray-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div
            className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm&quot;
            style={{ backgroundColor: node.color }}
          &gt;
            {node.icon || node.displayName.charAt(0)}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-gray-900 truncate&quot;&gt;{node.displayName}&lt;/p&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-gray-500 truncate mt-0.5 leading-tight&quot;&gt;
              {node.description}
            &lt;/p&gt;
            &lt;div className=&quot;mt-1.5&quot;&gt;
              &lt;span className=&quot;bg-gray-100 text-gray-600 text-xs px-1.5 py-0.5 rounded&quot;&gt;
                {getCategoryMetadata(node.category || '')?.icon || ''} {node.category}
              &lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAddNode]
  );

  return (
    &lt;div
      className={`${isCollapsed ? 'w-16' : 'w-80'} h-full bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ease-in-out`}
    &gt;
      {/* Toggle Button */}
      &lt;div className=&quot;flex justify-end p-4&quot;&gt;
        &lt;button
          onClick={onToggle}
          className=&quot;p-2 rounded-lg hover:bg-gray-100 transition-colors&quot;
          title={isCollapsed ? 'Expand node panel' : 'Collapse node panel'}
        &gt;
          &lt;span className=&quot;text-lg&quot;&gt;{isCollapsed ? '→' : '←'}&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;px-4 pb-4 border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-semibold text-gray-900&quot;&gt;Nodes&lt;/h2&gt;
            &lt;span className=&quot;bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
              {allAvailableNodes.length}
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;p className=&quot;text-sm text-gray-600&quot;&gt;Drag to add to workflow&lt;/p&gt;
        &lt;/div&gt;
      )}

      {/* Search and Filter */}
      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;p-4 border-b border-gray-200 space-y-3&quot;&gt;
          &lt;input
            type=&quot;text&quot;
            placeholder=&quot;Search nodes...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          /&gt;

          &lt;select
            value={selectedCategory}
            onChange={(e) =&gt; setSelectedCategory(e.target.value)}
            aria-label=&quot;Select category&quot;
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          &gt;
            {categories.map((category) =&gt; {
              const metadata = category !== 'all' ? getCategoryMetadata(category) : null;
              return (
                &lt;option key={category} value={category}&gt;
                  {category === 'all' ? 'All Categories' : `${metadata?.icon || ''} ${category}`}
                &lt;/option&gt;
              );
            })}
          &lt;/select&gt;
        &lt;/div&gt;
      )}

      {/* AI Suggestions Section */}
      {!isCollapsed &amp;&amp; isAIEnabled &amp;&amp; aiSuggestedNodes.length &gt; 0 &amp;&amp; showAISuggestions &amp;&amp; (
        &lt;div className=&quot;border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;px-4 py-3 bg-blue-50&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                &lt;div className=&quot;w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center&quot;&gt;
                  &lt;span className=&quot;text-white text-xs&quot;&gt;🤖&lt;/span&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-sm font-medium text-blue-900&quot;&gt;AI Suggestions&lt;/h3&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                  {aiSuggestedNodes.length}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;button
                onClick={() =&gt; setShowAISuggestions(false)}
                className=&quot;text-blue-600 hover:text-blue-800 text-xs&quot;
                title=&quot;Hide AI suggestions&quot;
              &gt;
                ✕
              &lt;/button&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-blue-700 mt-1&quot;&gt;
              Smart suggestions based on your current workflow
            &lt;/p&gt;
          &lt;/div&gt;
          &lt;div className=&quot;px-4 py-2 max-h-48 overflow-y-auto&quot;&gt;
            {aiSuggestedNodes.map((suggestion, index) =&gt; renderAISuggestionItem(suggestion, index))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Node List */}
      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;overflow-hidden flex flex-col&quot;&gt;
          {filteredNodes.length === 0 ? (
            &lt;div className=&quot;h-96 flex items-center justify-center&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-gray-400 text-4xl mb-2&quot;&gt;🔍&lt;/div&gt;
                &lt;p className=&quot;text-gray-500 text-sm&quot;&gt;No nodes found&lt;/p&gt;
                &lt;p className=&quot;text-gray-400 text-xs mt-1&quot;&gt;Try adjusting your search or filter&lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ) : (
            &lt;div className=&quot;px-4 pb-4&quot;&gt;
              &lt;VirtualizedList
                items={filteredNodes}
                renderItem={renderNodeItem}
                height={700}
                estimateSize={85} // Estimated height per node item
                getItemKey={(node) =&gt; node.id}
                gap={0}
                className=&quot;node-list&quot;
                emptyState={
                  &lt;div className=&quot;text-center py-8&quot;&gt;
                    &lt;p className=&quot;text-gray-500 text-sm&quot;&gt;
                      {searchTerm
                        ? 'No nodes match your search'
                        : 'No nodes available in this category'}
                    &lt;/p&gt;
                  &lt;/div&gt;
                }
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default AdvancedNodePanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 115:17 - Line 123:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 102:17 - Line 110:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn312" onclick="toggleCodeBlock('cloneGroup312', 'expandBtn312', 'collapseBtn312')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn312" onclick="toggleCodeBlock('cloneGroup312', 'expandBtn312', 'collapseBtn312')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup312"><code class="language-tsx text-sm text-gray-800">&quot;
      markerWidth=&quot;10&quot;
      markerHeight=&quot;10&quot;
      refX=&quot;9&quot;
      refY=&quot;3&quot;
      orient=&quot;auto&quot;
      markerUnits=&quot;strokeWidth&quot;
    &gt;
      &lt;polygon points=&quot;0,0 0,6 9,3&quot; fill=&quot;#6366F1</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 128:17 - Line 136:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 102:17 - Line 110:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn313" onclick="toggleCodeBlock('cloneGroup313', 'expandBtn313', 'collapseBtn313')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn313" onclick="toggleCodeBlock('cloneGroup313', 'expandBtn313', 'collapseBtn313')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup313"><code class="language-tsx text-sm text-gray-800">&quot;
      markerWidth=&quot;10&quot;
      markerHeight=&quot;10&quot;
      refX=&quot;9&quot;
      refY=&quot;3&quot;
      orient=&quot;auto&quot;
      markerUnits=&quot;strokeWidth&quot;
    &gt;
      &lt;polygon points=&quot;0,0 0,6 9,3&quot; fill=&quot;#8B5CF6</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 141:17 - Line 149:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 102:17 - Line 110:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn314" onclick="toggleCodeBlock('cloneGroup314', 'expandBtn314', 'collapseBtn314')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn314" onclick="toggleCodeBlock('cloneGroup314', 'expandBtn314', 'collapseBtn314')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup314"><code class="language-tsx text-sm text-gray-800">&quot;
      markerWidth=&quot;10&quot;
      markerHeight=&quot;10&quot;
      refX=&quot;9&quot;
      refY=&quot;3&quot;
      orient=&quot;auto&quot;
      markerUnits=&quot;strokeWidth&quot;
    &gt;
      &lt;polygon points=&quot;0,0 0,6 9,3&quot; fill=&quot;#14B8A6</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAssistantPanel.tsx (Line 1:1 - Line 578:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/aiassistantpanel/AIAssistantPanel.tsx (Line 4:1 - Line 581:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn316" onclick="toggleCodeBlock('cloneGroup316', 'expandBtn316', 'collapseBtn316')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn316" onclick="toggleCodeBlock('cloneGroup316', 'expandBtn316', 'collapseBtn316')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup316"><code class="language-tsx text-sm text-gray-800">/**
 * AI Assistant Panel
 *
 * Comprehensive AI-powered workflow assistance panel providing:
 * - Natural language workflow generation
 * - Intelligent optimization suggestions
 * - Error diagnosis and solutions
 * - Performance recommendations
 * - Pattern recognition and best practices
 */

import {
  BugOutlined,
  BulbOutlined,
  CheckCircleOutlined,
  InfoCircleOutlined,
  RobotOutlined,
  // PatternOutlined,
  SendOutlined,
  SettingOutlined,
  StarOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Input,
  List,
  Modal,
  Progress,
  Tabs,
  Tag,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import type { WorkflowDefinition } from '@/core/nodes/types';
import type {
  AIWorkflowSuggestion,
  ErrorDiagnosis,
  NaturalLanguageRequest,
  WorkflowAnalysis,
} from '@/core/services/aiAssistantService';
import { aiAssistantService } from '@/core/services/aiAssistantService';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { TextArea } = Input;

interface AIAssistantPanelProps {
  workflow?: WorkflowDefinition;
  onApplySuggestion?: (suggestion: AIWorkflowSuggestion) =&gt; void;
  onGenerateWorkflow?: (workflow: WorkflowDefinition) =&gt; void;
  className?: string;
}

const AIAssistantPanel: React.FC&lt;AIAssistantPanelProps&gt; = ({
  workflow,
  onApplySuggestion,
  onGenerateWorkflow,
  className,
}) =&gt; {
  const [activeTab, setActiveTab] = useState('suggestions');
  const [naturalLanguageInput, setNaturalLanguageInput] = useState('');
  const [isGenerating, setIsGenerating] = useState(false);
  const [suggestions, setSuggestions] = useState&lt;AIWorkflowSuggestion[]&gt;([]);
  const [_errors] = useState&lt;ErrorDiagnosis[]&gt;([]); // TODO: Implement error handling
  const [analysis, setAnalysis] = useState&lt;WorkflowAnalysis | null&gt;(null);
  const [selectedSuggestion, setSelectedSuggestion] = useState&lt;AIWorkflowSuggestion | null&gt;(null);
  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);

  // Load suggestions when workflow changes
  useEffect(() =&gt; {
    if (workflow) {
      loadSuggestions();
      loadAnalysis();
    }
  }, [workflow, loadAnalysis, loadSuggestions]);

  const loadSuggestions = useCallback(async () =&gt; {
    if (!workflow) return;

    try {
      const workflowSuggestions = await aiAssistantService.analyzeWorkflow(workflow);
      setSuggestions(workflowSuggestions);
    } catch (_error) {}
  }, [workflow]);

  const loadAnalysis = useCallback(async () =&gt; {
    if (!workflow) return;

    try {
      // Simulate analysis loading
      const mockAnalysis: WorkflowAnalysis = {
        complexity: 0.6,
        performance: {
          bottlenecks: ['Sequential processing', 'Large data sets'],
          optimizationOpportunities: ['Parallel processing', 'Data caching'],
          estimatedImprovement: 0.4,
        },
        reliability: {
          errorProneNodes: ['http-node-1', 'database-node-2'],
          missingErrorHandling: ['http-node-1'],
          suggestions: ['Add try-catch containers', 'Implement retry logic'],
        },
        maintainability: {
          codeQuality: 0.7,
          documentation: 0.5,
          modularity: 0.8,
        },
        patterns: {
          detected: ['Sequential Pattern', 'Data Transformation Pattern'],
          recommendations: ['Use Parallel Container', 'Add Error Handling'],
        },
      };
      setAnalysis(mockAnalysis);
    } catch (_error) {}
  }, [workflow]);

  const handleGenerateWorkflow = useCallback(async () =&gt; {
    if (!naturalLanguageInput.trim()) return;

    setIsGenerating(true);
    try {
      const request: NaturalLanguageRequest = {
        text: naturalLanguageInput,
        context: {
          currentWorkflow: workflow,
          userIntent: 'workflow-generation',
        },
      };

      const result = await aiAssistantService.generateWorkflowFromText(request);
      onGenerateWorkflow?.(result.workflow);

      // Show success message
      Modal.success({
        title: 'Workflow Generated Successfully',
        content: (
          &lt;div&gt;
            &lt;p&gt;{result.explanation}&lt;/p&gt;
            &lt;p&gt;Confidence: {(result.confidence * 100).toFixed(1)}%&lt;/p&gt;
            &lt;p&gt;Complexity: {(result.estimatedComplexity * 100).toFixed(1)}%&lt;/p&gt;
          &lt;/div&gt;
        ),
      });
    } catch (_error) {
      Modal.error({
        title: 'Generation Failed',
        content: 'Failed to generate workflow from natural language description.',
      });
    } finally {
      setIsGenerating(false);
    }
  }, [naturalLanguageInput, workflow, onGenerateWorkflow]);

  const handleApplySuggestion = useCallback(
    (suggestion: AIWorkflowSuggestion) =&gt; {
      onApplySuggestion?.(suggestion);

      // Remove applied suggestion
      setSuggestions((prev) =&gt; prev.filter((s) =&gt; s.id !== suggestion.id));

      Modal.success({
        title: 'Suggestion Applied',
        content: `${suggestion.title} has been applied to your workflow.`,
      });
    },
    [onApplySuggestion]
  );

  const handleViewSuggestionDetails = useCallback((suggestion: AIWorkflowSuggestion) =&gt; {
    setSelectedSuggestion(suggestion);
    setIsDetailModalOpen(true);
  }, []);

  const getImpactColor = (impact: string) =&gt; {
    switch (impact) {
      case 'high':
        return 'red';
      case 'medium':
        return 'orange';
      case 'low':
        return 'green';
      default:
        return 'blue';
    }
  };

  const getTypeIcon = (type: string) =&gt; {
    switch (type) {
      case 'optimization':
        return &lt;ThunderboltOutlined className=&quot;text-yellow-500&quot; /&gt;;
      case 'error-fix':
        return &lt;BugOutlined className=&quot;text-red-500&quot; /&gt;;
      case 'enhancement':
        return &lt;StarOutlined className=&quot;text-blue-500&quot; /&gt;;
      case 'pattern':
        return &lt;BulbOutlined className=&quot;text-purple-500&quot; /&gt;;
      default:
        return &lt;BulbOutlined className=&quot;text-gray-500&quot; /&gt;;
    }
  };

  const renderSuggestionCard = (suggestion: AIWorkflowSuggestion) =&gt; (
    &lt;Card
      key={suggestion.id}
      size=&quot;small&quot;
      className=&quot;mb-3 bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors&quot;
      actions={[
        &lt;Tooltip key=&quot;details&quot; title=&quot;View Details&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;InfoCircleOutlined /&gt;}
            onClick={() =&gt; handleViewSuggestionDetails(suggestion)}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
        &lt;Tooltip key=&quot;apply&quot; title=&quot;Apply Suggestion&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;CheckCircleOutlined /&gt;}
            onClick={() =&gt; handleApplySuggestion(suggestion)}
            className=&quot;text-green-400 hover:text-green-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
      ]}
    &gt;
      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            {getTypeIcon(suggestion.type)}
            &lt;span className=&quot;text-white font-medium text-sm&quot;&gt;{suggestion.title}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-1&quot;&gt;
            &lt;Tag color={getImpactColor(suggestion.impact)}&gt;{suggestion.impact}&lt;/Tag&gt;
            &lt;Badge
              count={`${(suggestion.confidence * 100).toFixed(0)}%`}
              style={{ backgroundColor: '#1890ff' }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;{suggestion.description}&lt;/Text&gt;

        &lt;div className=&quot;flex items-center gap-2 text-xs text-gray-500&quot;&gt;
          &lt;span&gt;Category: {suggestion.category}&lt;/span&gt;
          {suggestion.estimatedBenefit.performance &amp;&amp; (
            &lt;span&gt;Performance: +{(suggestion.estimatedBenefit.performance * 100).toFixed(0)}%&lt;/span&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderAnalysisMetrics = () =&gt; {
    if (!analysis) return null;

    return (
      &lt;div className=&quot;space-y-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
            Workflow Analysis
          &lt;/Title&gt;

          &lt;div className=&quot;space-y-3&quot;&gt;
            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Complexity&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;{(analysis.complexity * 100).toFixed(0)}%&lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.complexity * 100}
                strokeColor=&quot;#3b82f6&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Performance&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.performance.estimatedImprovement * 100).toFixed(0)}% improvement
                  possible
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.performance.estimatedImprovement * 100}
                strokeColor=&quot;#22c55e&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Maintainability&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.maintainability.codeQuality * 100).toFixed(0)}%
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.maintainability.codeQuality * 100}
                strokeColor=&quot;#f59e0b&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {analysis.performance.bottlenecks.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Performance Bottlenecks Detected&quot;
            description={
              &lt;ul className=&quot;mt-2&quot;&gt;
                {analysis.performance.bottlenecks.map((bottleneck, index) =&gt; (
                  &lt;li key={index} className=&quot;text-sm&quot;&gt;
                    {bottleneck}
                  &lt;/li&gt;
                ))}
              &lt;/ul&gt;
            }
            type=&quot;warning&quot;
            showIcon
            className=&quot;bg-yellow-900 border-yellow-600&quot;
          /&gt;
        )}

        {analysis.reliability.missingErrorHandling.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Missing Error Handling&quot;
            description={`${analysis.reliability.missingErrorHandling.length} nodes need error handling`}
            type=&quot;error&quot;
            showIcon
            className=&quot;bg-red-900 border-red-600&quot;
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;RobotOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            AI Assistant
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Intelligent workflow optimization and generation
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;ai-assistant-tabs&quot;
          items={[
            {
              key: 'suggestions',
              label: (
                &lt;span&gt;
                  &lt;BulbOutlined className=&quot;mr-1&quot; /&gt;
                  Suggestions
                  {suggestions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={suggestions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  {suggestions.length === 0 ? (
                    &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
                      &lt;BulbOutlined className=&quot;text-4xl mb-2&quot; /&gt;
                      &lt;div&gt;No suggestions available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-2&quot;&gt;
                        {workflow
                          ? 'Workflow analysis in progress...'
                          : 'Load a workflow to get AI suggestions'}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div&gt;{suggestions.map(renderSuggestionCard)}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              ),
            },
            {
              key: 'generate',
              label: (
                &lt;span&gt;
                  &lt;SendOutlined className=&quot;mr-1&quot; /&gt;
                  Generate
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Natural Language to Workflow
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      &lt;TextArea
                        value={naturalLanguageInput}
                        onChange={(e) =&gt; setNaturalLanguageInput(e.target.value)}
                        placeholder=&quot;Describe your workflow in natural language...&amp;#10;&amp;#10;Example: 'Send an email notification when a new order is received, then update the inventory database'&quot;
                        rows={4}
                        className=&quot;bg-gray-700 border-gray-600 text-white&quot;
                      /&gt;
                      &lt;Button
                        type=&quot;primary&quot;
                        icon={&lt;SendOutlined /&gt;}
                        onClick={handleGenerateWorkflow}
                        loading={isGenerating}
                        disabled={!naturalLanguageInput.trim()}
                        className=&quot;w-full&quot;
                      &gt;
                        Generate Workflow
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;

                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Quick Templates
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-2&quot;&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Send email notification when form is submitted')
                        }
                      &gt;
                        📧 Email Notification
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Process uploaded files and save to database')
                        }
                      &gt;
                        📁 File Processing
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Sync data between two APIs every hour')
                        }
                      &gt;
                        🔄 Data Synchronization
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'analysis',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Analysis
                &lt;/span&gt;
              ),
              children: renderAnalysisMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Suggestion Details Modal */}
      &lt;Modal
        title={selectedSuggestion?.title}
        open={isDetailModalOpen}
        onCancel={() =&gt; setIsDetailModalOpen(false)}
        footer={[
          &lt;Button key=&quot;cancel&quot; onClick={() =&gt; setIsDetailModalOpen(false)}&gt;
            Close
          &lt;/Button&gt;,
          &lt;Button
            key=&quot;apply&quot;
            type=&quot;primary&quot;
            onClick={() =&gt; {
              if (selectedSuggestion) {
                handleApplySuggestion(selectedSuggestion);
                setIsDetailModalOpen(false);
              }
            }}
          &gt;
            Apply Suggestion
          &lt;/Button&gt;,
        ]}
        width={600}
      &gt;
        {selectedSuggestion &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.description}&lt;/Text&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Title level={5}&gt;Reasoning&lt;/Title&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.reasoning}&lt;/Text&gt;
            &lt;/div&gt;

            {selectedSuggestion.suggestedChanges.length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}&gt;Suggested Changes&lt;/Title&gt;
                &lt;List
                  size=&quot;small&quot;
                  dataSource={selectedSuggestion.suggestedChanges}
                  renderItem={(change) =&gt; (
                    &lt;List.Item&gt;
                      &lt;div className=&quot;space-y-1&quot;&gt;
                        &lt;div className=&quot;font-medium&quot;&gt;{change.type}&lt;/div&gt;
                        &lt;div className=&quot;text-sm text-gray-600&quot;&gt;{change.reason}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/List.Item&gt;
                  )}
                /&gt;
              &lt;/div&gt;
            )}

            {Object.keys(selectedSuggestion.estimatedBenefit).length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}&gt;Estimated Benefits&lt;/Title&gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {selectedSuggestion.estimatedBenefit.performance &amp;&amp; (
                    &lt;div className=&quot;flex justify-between&quot;&gt;
                      &lt;span&gt;Performance:&lt;/span&gt;
                      &lt;span className=&quot;text-green-500&quot;&gt;
                        +{(selectedSuggestion.estimatedBenefit.performance * 100).toFixed(0)}%
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                  {selectedSuggestion.estimatedBenefit.reliability &amp;&amp; (
                    &lt;div className=&quot;flex justify-between&quot;&gt;
                      &lt;span&gt;Reliability:&lt;/span&gt;
                      &lt;span className=&quot;text-blue-500&quot;&gt;
                        +{(selectedSuggestion.estimatedBenefit.reliability * 100).toFixed(0)}%
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                  {selectedSuggestion.estimatedBenefit.maintainability &amp;&amp; (
                    &lt;div className=&quot;flex justify-between&quot;&gt;
                      &lt;span&gt;Maintainability:&lt;/span&gt;
                      &lt;span className=&quot;text-purple-500&quot;&gt;
                        +{(selectedSuggestion.estimatedBenefit.maintainability * 100).toFixed(0)}%
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default AIAssistantPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 71:2 - Line 84:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 111:2 - Line 124:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn317" onclick="toggleCodeBlock('cloneGroup317', 'expandBtn317', 'collapseBtn317')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn317" onclick="toggleCodeBlock('cloneGroup317', 'expandBtn317', 'collapseBtn317')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup317"><code class="language-tsx text-sm text-gray-800">getNodeIcon(node)}
                    &lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;
                        {node?.data?.label || 'Unnamed Node'}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{getNodeTypeDisplay(node)}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    {hasOutputData ? (
                      &lt;span className=&quot;px-2 py-1 bg-green-800 text-green-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;✓&lt;/span&gt;
                        &lt;span&gt;Data Ready</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 100:17 - Line 107:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 157:19 - Line 164:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn318" onclick="toggleCodeBlock('cloneGroup318', 'expandBtn318', 'collapseBtn318')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn318" onclick="toggleCodeBlock('cloneGroup318', 'expandBtn318', 'collapseBtn318')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup318"><code class="language-tsx text-sm text-gray-800">) : (
                  &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;
                    &lt;div className=&quot;text-sm&quot;&gt;No output data available&lt;/div&gt;
                    &lt;div className=&quot;text-xs mt-1&quot;&gt;Test the connected node to generate data&lt;/div&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 333:1 - Line 343:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 520:1 - Line 530:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn319" onclick="toggleCodeBlock('cloneGroup319', 'expandBtn319', 'collapseBtn319')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn319" onclick="toggleCodeBlock('cloneGroup319', 'expandBtn319', 'collapseBtn319')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup319"><code class="language-tsx text-sm text-gray-800">const getNodeIcon = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return '📧';
  }
  if (node?.type === 'transform') {
    return '🔄';
  }
  if (node?.type === 'trigger'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 341:5 - Line 359:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 531:5 - Line 549:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn320" onclick="toggleCodeBlock('cloneGroup320', 'expandBtn320', 'collapseBtn320')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn320" onclick="toggleCodeBlock('cloneGroup320', 'expandBtn320', 'collapseBtn320')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup320"><code class="language-tsx text-sm text-gray-800">;
  }
  if (node?.type === 'trigger') {
    return '⚡';
  }
  return '📊';
};

const getNodeType = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return 'gmail-trigger';
  }
  if (node?.type === 'transform') {
    return 'transform';
  }
  return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 357:12 - Line 372:18), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 550:11 - Line 565:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn321" onclick="toggleCodeBlock('cloneGroup321', 'expandBtn321', 'collapseBtn321')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn321" onclick="toggleCodeBlock('cloneGroup321', 'expandBtn321', 'collapseBtn321')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup321"><code class="language-tsx text-sm text-gray-800">;
  }
  return node?.type || 'unknown';
};

const getNodeTypeDisplay = (node: any): string =&gt; {
  return (
    node?.data?.enhancedNodeType?.displayName ||
    node?.data?.nodeTypeData?.displayName ||
    node?.data?.nodeTypeData?.name ||
    node?.type ||
    'Unknown Node Type'
  );
};

export default AIAgentInputPanel</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/UserManagementPanel.tsx (Line 1:1 - Line 995:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/usermanagementpanel/UserManagementPanel.tsx (Line 4:1 - Line 998:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn323" onclick="toggleCodeBlock('cloneGroup323', 'expandBtn323', 'collapseBtn323')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn323" onclick="toggleCodeBlock('cloneGroup323', 'expandBtn323', 'collapseBtn323')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup323"><code class="language-tsx text-sm text-gray-800">/**
 * User Management Panel
 *
 * Comprehensive user management interface providing:
 * - User listing and search
 * - Role assignment and permissions
 * - User invitation system
 * - MFA management
 * - API key management
 * - SSO configuration
 */

import {
  CheckCircleOutlined,
  DeleteOutlined,
  EditOutlined,
  EyeOutlined,
  KeyOutlined,
  LockOutlined,
  MailOutlined,
  MoreOutlined,
  SettingOutlined,
  TeamOutlined,
  UnlockOutlined,
  UserAddOutlined,
  UserOutlined,
} from '@ant-design/icons';
import {
  Avatar,
  Badge,
  Button,
  Card,
  Dropdown,
  Form,
  Input,
  List,
  Modal,
  Select,
  Space,
  Statistic,
  Switch,
  Table,
  Tabs,
  Tag,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
// import { advancedAuthService } from &quot;@/core/services/advancedAuthService&quot;;
import type {
  APIKey,
  SSOProvider,
  User,
  UserInvitation,
  UserRole,
} from '@/core/types/authentication';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Search } = Input;
const { Option } = Select;

interface UserManagementPanelProps {
  className?: string;
}

const UserManagementPanel: React.FC&lt;UserManagementPanelProps&gt; = ({ className }) =&gt; {
  const [activeTab, setActiveTab] = useState('users');
  const [users, setUsers] = useState&lt;User[]&gt;([]);
  const [roles, setRoles] = useState&lt;UserRole[]&gt;([]);
  const [apiKeys, setApiKeys] = useState&lt;APIKey[]&gt;([]);
  const [invitations, setInvitations] = useState&lt;UserInvitation[]&gt;([]);
  const [ssoProviders, setSSOProviders] = useState&lt;SSOProvider[]&gt;([]);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedRole, setSelectedRole] = useState&lt;string&gt;('all');
  const [isUserModalOpen, setIsUserModalOpen] = useState(false);
  const [isInviteModalOpen, setIsInviteModalOpen] = useState(false);
  const [isAPIKeyModalOpen, setIsAPIKeyModalOpen] = useState(false);
  const [selectedUser, setSelectedUser] = useState&lt;User | null&gt;(null);
  const [isLoading, setIsLoading] = useState(false);

  // Load data on component mount
  useEffect(() =&gt; {
    loadUsers();
    loadRoles();
    loadAPIKeys();
    loadInvitations();
    loadSSOProviders();
  }, [loadAPIKeys, loadInvitations, loadRoles, loadSSOProviders, loadUsers]);

  const loadUsers = useCallback(async () =&gt; {
    setIsLoading(true);
    try {
      // Simulate API call - in production, this would fetch from backend
      const mockUsers: User[] = [
        {
          id: 'user_1',
          email: 'admin@reporunner.com',
          name: 'Admin User',
          role: {
            id: 'admin',
            name: 'Administrator',
            description: 'System administration',
            level: 8,
            permissions: [],
            isSystem: true,
            createdAt: Date.now(),
            updatedAt: Date.now(),
          },
          status: 'active',
          createdAt: Date.now(),
          lastLoginAt: Date.now() - 3600000,
          mfaEnabled: true,
          preferences: {
            theme: 'dark',
            language: 'en',
            timezone: 'UTC',
            notifications: {
              email: true,
              push: false,
              inApp: true,
              workflows: true,
              executions: true,
              security: true,
            },
            dashboard: {
              layout: 'grid',
              widgets: ['workflows', 'executions', 'recent'],
              refreshInterval: 30000,
            },
            editor: {
              autoSave: true,
              autoComplete: true,
              syntaxHighlighting: true,
              wordWrap: true,
            },
          },
          permissions: [],
          projects: [],
        },
        {
          id: 'user_2',
          email: 'editor@reporunner.com',
          name: 'Editor User',
          role: {
            id: 'editor',
            name: 'Editor',
            description: 'Create and edit workflows',
            level: 4,
            permissions: [],
            isSystem: false,
            createdAt: Date.now(),
            updatedAt: Date.now(),
          },
          status: 'active',
          createdAt: Date.now() - 86400000,
          lastLoginAt: Date.now() - 7200000,
          mfaEnabled: false,
          preferences: {
            theme: 'light',
            language: 'en',
            timezone: 'UTC',
            notifications: {
              email: true,
              push: false,
              inApp: true,
              workflows: true,
              executions: true,
              security: true,
            },
            dashboard: {
              layout: 'list',
              widgets: ['workflows', 'executions'],
              refreshInterval: 60000,
            },
            editor: {
              autoSave: true,
              autoComplete: true,
              syntaxHighlighting: true,
              wordWrap: false,
            },
          },
          permissions: [],
          projects: [],
        },
        {
          id: 'user_3',
          email: 'viewer@reporunner.com',
          name: 'Viewer User',
          role: {
            id: 'viewer',
            name: 'Viewer',
            description: 'View-only access',
            level: 2,
            permissions: [],
            isSystem: true,
            createdAt: Date.now(),
            updatedAt: Date.now(),
          },
          status: 'pending',
          createdAt: Date.now() - 172800000,
          mfaEnabled: false,
          preferences: {
            theme: 'dark',
            language: 'en',
            timezone: 'UTC',
            notifications: {
              email: false,
              push: false,
              inApp: true,
              workflows: false,
              executions: false,
              security: true,
            },
            dashboard: {
              layout: 'grid',
              widgets: ['workflows'],
              refreshInterval: 300000,
            },
            editor: {
              autoSave: false,
              autoComplete: false,
              syntaxHighlighting: true,
              wordWrap: true,
            },
          },
          permissions: [],
          projects: [],
        },
      ];
      setUsers(mockUsers);
    } catch (_error) {
    } finally {
      setIsLoading(false);
    }
  }, []);

  const loadRoles = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockRoles: UserRole[] = [
        {
          id: 'owner',
          name: 'Owner',
          description: 'Full system access',
          level: 10,
          permissions: [],
          isSystem: true,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'admin',
          name: 'Administrator',
          description: 'System administration',
          level: 8,
          permissions: [],
          isSystem: true,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'manager',
          name: 'Manager',
          description: 'Project management',
          level: 6,
          permissions: [],
          isSystem: false,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'editor',
          name: 'Editor',
          description: 'Create and edit workflows',
          level: 4,
          permissions: [],
          isSystem: false,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'viewer',
          name: 'Viewer',
          description: 'View-only access',
          level: 2,
          permissions: [],
          isSystem: true,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
      ];
      setRoles(mockRoles);
    } catch (_error) {}
  }, []);

  const loadAPIKeys = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockAPIKeys: APIKey[] = [
        {
          id: 'key_1',
          name: 'Development API Key',
          key: 'rr_dev_1234567890abcdef',
          keyHash: 'hash1',
          permissions: [],
          expiresAt: Date.now() + 365 * 24 * 60 * 60 * 1000,
          lastUsedAt: Date.now() - 3600000,
          createdAt: Date.now() - 86400000,
          createdBy: 'user_1',
          status: 'active',
          metadata: {
            description: 'API key for development environment',
          },
        },
        {
          id: 'key_2',
          name: 'Production API Key',
          key: 'rr_prod_abcdef1234567890',
          keyHash: 'hash2',
          permissions: [],
          expiresAt: Date.now() + 30 * 24 * 60 * 60 * 1000,
          lastUsedAt: Date.now() - 1800000,
          createdAt: Date.now() - 172800000,
          createdBy: 'user_1',
          status: 'active',
          metadata: {
            description: 'API key for production environment',
          },
        },
      ];
      setApiKeys(mockAPIKeys);
    } catch (_error) {}
  }, []);

  const loadInvitations = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockInvitations: UserInvitation[] = [
        {
          id: 'invite_1',
          email: 'newuser@example.com',
          role: 'editor',
          permissions: [],
          projects: [],
          invitedBy: 'user_1',
          invitedAt: Date.now() - 86400000,
          expiresAt: Date.now() + 6 * 24 * 60 * 60 * 1000,
          status: 'pending',
          token: 'token123',
          message: 'Welcome to Reporunner!',
        },
      ];
      setInvitations(mockInvitations);
    } catch (_error) {}
  }, []);

  const loadSSOProviders = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockProviders: SSOProvider[] = [
        {
          id: 'google',
          name: 'Google',
          type: 'oauth2',
          enabled: true,
          configuration: {
            issuer: 'https://accounts.google.com',
            clientId: 'google-client-id',
            redirectUri: 'http://localhost:3000/auth/callback/google',
            scopes: ['openid', 'email', 'profile'],
            endpoints: {
              authorization: 'https://accounts.google.com/o/oauth2/v2/auth',
              token: 'https://oauth2.googleapis.com/token',
              userInfo: 'https://www.googleapis.com/oauth2/v2/userinfo',
            },
            attributes: {
              email: 'email',
              name: 'name',
            },
          },
          metadata: {
            logo: 'https://developers.google.com/identity/images/g-logo.png',
            description: 'Sign in with Google',
          },
        },
        {
          id: 'microsoft',
          name: 'Microsoft',
          type: 'oauth2',
          enabled: false,
          configuration: {
            issuer: 'https://login.microsoftonline.com/common',
            clientId: 'microsoft-client-id',
            redirectUri: 'http://localhost:3000/auth/callback/microsoft',
            scopes: ['openid', 'email', 'profile'],
            endpoints: {
              authorization: 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize',
              token: 'https://login.microsoftonline.com/common/oauth2/v2.0/token',
              userInfo: 'https://graph.microsoft.com/v1.0/me',
            },
            attributes: {
              email: 'mail',
              name: 'displayName',
            },
          },
          metadata: {
            logo: 'https://img.icons8.com/color/48/000000/microsoft.png',
            description: 'Sign in with Microsoft',
          },
        },
      ];
      setSSOProviders(mockProviders);
    } catch (_error) {}
  }, []);

  const getStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'active':
        return 'green';
      case 'inactive':
        return 'gray';
      case 'pending':
        return 'orange';
      case 'suspended':
        return 'red';
      default:
        return 'default';
    }
  };

  const getRoleColor = (roleId: string) =&gt; {
    switch (roleId) {
      case 'owner':
        return 'red';
      case 'admin':
        return 'purple';
      case 'manager':
        return 'blue';
      case 'editor':
        return 'green';
      case 'viewer':
        return 'gray';
      default:
        return 'default';
    }
  };

  const filteredUsers = users.filter((user) =&gt; {
    const matchesSearch =
      !searchTerm ||
      user.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      user.email.toLowerCase().includes(searchTerm.toLowerCase());

    const matchesRole = selectedRole === 'all' || user.role.id === selectedRole;

    return matchesSearch &amp;&amp; matchesRole;
  });

  const userColumns = [
    {
      title: 'User',
      key: 'user',
      render: (record: User) =&gt; (
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;Avatar size=&quot;small&quot; icon={&lt;UserOutlined /&gt;} /&gt;
          &lt;div&gt;
            &lt;div className=&quot;text-white font-medium&quot;&gt;{record.name}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.email}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Role',
      key: 'role',
      render: (record: User) =&gt; &lt;Tag color={getRoleColor(record.role.id)}&gt;{record.role.name}&lt;/Tag&gt;,
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: User) =&gt; &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;,
    },
    {
      title: 'MFA',
      key: 'mfa',
      render: (record: User) =&gt; (
        &lt;Badge
          status={record.mfaEnabled ? 'success' : 'default'}
          text={record.mfaEnabled ? 'Enabled' : 'Disabled'}
        /&gt;
      ),
    },
    {
      title: 'Last Login',
      key: 'lastLogin',
      render: (record: User) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {record.lastLoginAt ? new Date(record.lastLoginAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: User) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;Edit User&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedUser(record);
                setIsUserModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Manage MFA&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckCircleOutlined /&gt;}
              onClick={() =&gt; {
                // Handle MFA management
              }}
              className=&quot;text-purple-400 hover:text-purple-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Dropdown
            menu={{
              items: [
                {
                  key: 'suspend',
                  label: record.status === 'active' ? 'Suspend User' : 'Activate User',
                  icon: record.status === 'active' ? &lt;LockOutlined /&gt; : &lt;UnlockOutlined /&gt;,
                },
                {
                  key: 'delete',
                  label: 'Delete User',
                  icon: &lt;DeleteOutlined /&gt;,
                  danger: true,
                },
              ],
            }}
            trigger={['click']}
          &gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;MoreOutlined /&gt;}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const apiKeyColumns = [
    {
      title: 'Name',
      key: 'name',
      render: (_record: APIKey) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{_record.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.metadata.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Key',
      key: 'key',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;font-mono text-xs text-gray-300&quot;&gt;{_record.key.substring(0, 12)}...&lt;/div&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (_record: APIKey) =&gt; (
        &lt;Tag color={_record.status === 'active' ? 'green' : 'red'}&gt;{_record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Expires',
      key: 'expires',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.expiresAt ? new Date(_record.expiresAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Last Used',
      key: 'lastUsed',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.lastUsedAt ? new Date(_record.lastUsedAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: APIKey) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Revoke Key&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;DeleteOutlined /&gt;}
              className=&quot;text-red-400 hover:text-red-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderUserStats = () =&gt; (
    &lt;div className=&quot;grid grid-cols-4 gap-4 mb-6&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic title=&quot;Total Users&quot; value={users.length} valueStyle={{ color: '#3b82f6' }} /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Active Users&quot;
          value={users.filter((u) =&gt; u.status === 'active').length}
          valueStyle={{ color: '#22c55e' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Pending Invitations&quot;
          value={invitations.filter((i) =&gt; i.status === 'pending').length}
          valueStyle={{ color: '#f59e0b' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;MFA Enabled&quot;
          value={users.filter((u) =&gt; u.mfaEnabled).length}
          valueStyle={{ color: '#8b5cf6' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderUsersTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {renderUserStats()}

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Users
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Search
              placeholder=&quot;Search users...&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              className=&quot;w-64&quot;
            /&gt;
            &lt;Select value={selectedRole} onChange={setSelectedRole} className=&quot;w-32&quot;&gt;
              &lt;Option value=&quot;all&quot;&gt;All Roles&lt;/Option&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;UserAddOutlined /&gt;}
              onClick={() =&gt; setIsInviteModalOpen(true)}
            &gt;
              Invite User
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={userColumns}
          dataSource={filteredUsers}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderAPIKeysTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            API Keys
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsAPIKeyModalOpen(true)}&gt;
            Create API Key
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={apiKeyColumns}
          dataSource={apiKeys}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderInvitationsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Pending Invitations
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;MailOutlined /&gt;} onClick={() =&gt; setIsInviteModalOpen(true)}&gt;
            Send Invitation
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;List
          dataSource={invitations.filter((i) =&gt; i.status === 'pending')}
          renderItem={(invitation) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button key=&quot;resend&quot; type=&quot;text&quot; size=&quot;small&quot;&gt;
                  Resend
                &lt;/Button&gt;,
                &lt;Button key=&quot;revoke&quot; type=&quot;text&quot; size=&quot;small&quot; danger&gt;
                  Revoke
                &lt;/Button&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                avatar={&lt;Avatar icon={&lt;MailOutlined /&gt;} /&gt;}
                title={invitation.email}
                description={
                  &lt;div&gt;
                    &lt;div&gt;Role: {invitation.role}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                      Expires: {new Date(invitation.expiresAt).toLocaleDateString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSSOTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-4&quot;&gt;
          SSO Providers
        &lt;/Title&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {ssoProviders.map((provider) =&gt; (
            &lt;div
              key={provider.id}
              className=&quot;flex items-center justify-between p-3 bg-gray-700 rounded border border-gray-600&quot;
            &gt;
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;img src={provider.metadata.logo} alt={provider.name} className=&quot;w-8 h-8 rounded&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{provider.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{provider.metadata.description}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Switch
                  checked={provider.enabled}
                  onChange={(_checked) =&gt; {
                    // Handle SSO provider toggle
                  }}
                /&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;SettingOutlined /&gt;}
                  onClick={() =&gt; {
                    // Handle SSO configuration
                  }}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;TeamOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            User Management
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Manage users, roles, permissions, and authentication
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;user-management-tabs&quot;
          items={[
            {
              key: 'users',
              label: (
                &lt;span&gt;
                  &lt;UserOutlined className=&quot;mr-1&quot; /&gt;
                  Users
                  &lt;Badge count={users.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderUsersTab(),
            },
            {
              key: 'apikeys',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  API Keys
                  &lt;Badge count={apiKeys.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAPIKeysTab(),
            },
            {
              key: 'invitations',
              label: (
                &lt;span&gt;
                  &lt;MailOutlined className=&quot;mr-1&quot; /&gt;
                  Invitations
                  &lt;Badge
                    count={invitations.filter((i) =&gt; i.status === 'pending').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderInvitationsTab(),
            },
            {
              key: 'sso',
              label: (
                &lt;span&gt;
                  &lt;LockOutlined className=&quot;mr-1&quot; /&gt;
                  SSO
                  &lt;Badge
                    count={ssoProviders.filter((p) =&gt; p.enabled).length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderSSOTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* User Edit Modal */}
      &lt;Modal
        title=&quot;Edit User&quot;
        open={isUserModalOpen}
        onCancel={() =&gt; setIsUserModalOpen(false)}
        onOk={() =&gt; setIsUserModalOpen(false)}
        width={600}
      &gt;
        {selectedUser &amp;&amp; (
          &lt;Form layout=&quot;vertical&quot;&gt;
            &lt;Form.Item label=&quot;Name&quot;&gt;
              &lt;Input value={selectedUser.name} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Email&quot;&gt;
              &lt;Input value={selectedUser.email} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Role&quot;&gt;
              &lt;Select value={selectedUser.role.id}&gt;
                {roles.map((role) =&gt; (
                  &lt;Option key={role.id} value={role.id}&gt;
                    {role.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Status&quot;&gt;
              &lt;Select value={selectedUser.status}&gt;
                &lt;Option value=&quot;active&quot;&gt;Active&lt;/Option&gt;
                &lt;Option value=&quot;inactive&quot;&gt;Inactive&lt;/Option&gt;
                &lt;Option value=&quot;suspended&quot;&gt;Suspended&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        )}
      &lt;/Modal&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={isInviteModalOpen}
        onCancel={() =&gt; setIsInviteModalOpen(false)}
        onOk={() =&gt; setIsInviteModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Email&quot; required&gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Role&quot; required&gt;
            &lt;Select placeholder=&quot;Select role&quot;&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Message&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Welcome message (optional)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create API Key Modal */}
      &lt;Modal
        title=&quot;Create API Key&quot;
        open={isAPIKeyModalOpen}
        onCancel={() =&gt; setIsAPIKeyModalOpen(false)}
        onOk={() =&gt; setIsAPIKeyModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;API Key Name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Description (optional)&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Expiration&quot;&gt;
            &lt;Select placeholder=&quot;Select expiration&quot;&gt;
              &lt;Option value=&quot;30&quot;&gt;30 days&lt;/Option&gt;
              &lt;Option value=&quot;90&quot;&gt;90 days&lt;/Option&gt;
              &lt;Option value=&quot;365&quot;&gt;1 year&lt;/Option&gt;
              &lt;Option value=&quot;never&quot;&gt;Never&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Permissions&quot;&gt;
            &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select permissions&quot;&gt;
              &lt;Option value=&quot;read&quot;&gt;Read&lt;/Option&gt;
              &lt;Option value=&quot;write&quot;&gt;Write&lt;/Option&gt;
              &lt;Option value=&quot;execute&quot;&gt;Execute&lt;/Option&gt;
              &lt;Option value=&quot;manage&quot;&gt;Manage&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default UserManagementPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/SecurityDashboard.tsx (Line 1:1 - Line 908:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/securitydashboard/SecurityDashboard.tsx (Line 4:1 - Line 911:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn325" onclick="toggleCodeBlock('cloneGroup325', 'expandBtn325', 'collapseBtn325')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn325" onclick="toggleCodeBlock('cloneGroup325', 'expandBtn325', 'collapseBtn325')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup325"><code class="language-tsx text-sm text-gray-800">/**
 * Security Dashboard Component
 *
 * Comprehensive security monitoring interface providing:
 * - Real-time security metrics and alerts
 * - Audit log visualization and filtering
 * - Vulnerability scan results and management
 * - Security incident tracking and response
 * - Compliance reporting and monitoring
 * - Secrets management and rotation
 */

import {
  AlertOutlined,
  AuditOutlined,
  BugOutlined,
  CheckCircleOutlined,
  DownloadOutlined,
  EyeOutlined,
  KeyOutlined,
  ReloadOutlined,
  SecurityScanOutlined,
  SettingOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Col,
  DatePicker,
  Form,
  Input,
  Modal,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tabs,
  Tag,
  Timeline,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { enterpriseSecurityService } from '@/core/services/enterpriseSecurityService';
import type {
  AuditCategory,
  AuditLog,
  AuditSeverity,
  ComplianceReport,
  SecretManager,
  SecurityIncident,
  SecurityMetrics,
  VulnerabilityScan,
} from '@/core/types/security';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Option } = Select;
const { RangePicker } = DatePicker;

interface SecurityDashboardProps {
  className?: string;
}

const SecurityDashboard: React.FC&lt;SecurityDashboardProps&gt; = ({ className }) =&gt; {
  const [activeTab, setActiveTab] = useState('overview');
  const [metrics, setMetrics] = useState&lt;SecurityMetrics | null&gt;(null);
  const [auditLogs, setAuditLogs] = useState&lt;AuditLog[]&gt;([]);
  const [incidents, setIncidents] = useState&lt;SecurityIncident[]&gt;([]);
  const [vulnerabilityScans, setVulnerabilityScans] = useState&lt;VulnerabilityScan[]&gt;([]);
  const [complianceReports, setComplianceReports] = useState&lt;ComplianceReport[]&gt;([]);
  const [secrets, setSecrets] = useState&lt;SecretManager[]&gt;([]);
  const [isLoading, setIsLoading] = useState(false);
  const [selectedIncident, setSelectedIncident] = useState&lt;SecurityIncident | null&gt;(null);
  const [isIncidentModalOpen, setIsIncidentModalOpen] = useState(false);
  const [isScanModalOpen, setIsScanModalOpen] = useState(false);
  const [isSecretModalOpen, setIsSecretModalOpen] = useState(false);
  const [filters, setFilters] = useState({
    severity: 'all' as AuditSeverity | 'all',
    category: 'all' as AuditCategory | 'all',
    startDate: null as any,
    endDate: null as any,
  });

  // Load data on component mount
  useEffect(() =&gt; {
    loadSecurityData();
  }, [loadSecurityData]);

  const loadSecurityData = useCallback(async () =&gt; {
    setIsLoading(true);
    try {
      const [metricsData, auditLogsData, incidentsData, scansData, reportsData, secretsData] =
        await Promise.all([
          enterpriseSecurityService.getSecurityMetrics(),
          enterpriseSecurityService.getAuditLogs({ limit: 100 }),
          Promise.resolve([]), // getSecurityIncidents - method doesn't exist yet
          enterpriseSecurityService.getVulnerabilityScans(),
          Promise.resolve([]), // getComplianceReports - method doesn't exist yet
          Promise.resolve([]), // getSecrets - method doesn't exist yet
        ]);

      setMetrics(metricsData);
      setAuditLogs(auditLogsData);
      setIncidents(incidentsData as SecurityIncident[]);
      setVulnerabilityScans(scansData);
      setComplianceReports(reportsData as ComplianceReport[]);
      setSecrets(secretsData as SecretManager[]);
    } catch (_error) {
    } finally {
      setIsLoading(false);
    }
  }, []);

  const getSeverityColor = (severity: string) =&gt; {
    switch (severity) {
      case 'critical':
        return 'red';
      case 'high':
        return 'orange';
      case 'medium':
        return 'yellow';
      case 'low':
        return 'green';
      case 'info':
        return 'blue';
      default:
        return 'default';
    }
  };

  const getStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'open':
        return 'red';
      case 'investigating':
        return 'orange';
      case 'contained':
        return 'blue';
      case 'resolved':
        return 'green';
      case 'closed':
        return 'gray';
      default:
        return 'default';
    }
  };

  const filteredAuditLogs = auditLogs.filter((log) =&gt; {
    if (filters.severity !== 'all' &amp;&amp; log.severity !== filters.severity) return false;
    if (filters.category !== 'all' &amp;&amp; log.category !== filters.category) return false;
    if (filters.startDate &amp;&amp; log.timestamp &lt; filters.startDate.valueOf()) return false;
    if (filters.endDate &amp;&amp; log.timestamp &gt; filters.endDate.valueOf()) return false;
    return true;
  });

  const auditLogColumns = [
    {
      title: 'Timestamp',
      key: 'timestamp',
      render: (_record: AuditLog) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{new Date(_record.timestamp).toLocaleString()}&lt;/div&gt;
      ),
      sorter: (a: AuditLog, b: AuditLog) =&gt; a.timestamp - b.timestamp,
    },
    {
      title: 'User',
      key: 'user',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.userEmail}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.userId}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Action',
      key: 'action',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.action.description}&lt;/div&gt;
          &lt;Tag color={getSeverityColor(_record.severity)}&gt;{_record.action.type}&lt;/Tag&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Resource',
      key: 'resource',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.resource.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.resource.type}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (_record: AuditLog) =&gt; (
        &lt;Tag color={getSeverityColor(_record.severity)}&gt;{_record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'IP Address',
      key: 'ipAddress',
      render: (_record: AuditLog) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs font-mono&quot;&gt;{_record.ipAddress}&lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: AuditLog) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                // Show audit log details
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const incidentColumns = [
    {
      title: 'Title',
      key: 'title',
      render: (record: SecurityIncident) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{record.title}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getSeverityColor(record.severity)}&gt;{record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Category',
      key: 'category',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs capitalize&quot;&gt;{record.category.replace('_', ' ')}&lt;/div&gt;
      ),
    },
    {
      title: 'Created',
      key: 'createdAt',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {new Date(record.createdAt).toLocaleDateString()}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: SecurityIncident) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedIncident(record);
                setIsIncidentModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Update Status&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;SettingOutlined /&gt;}
              onClick={() =&gt; {
                // Update incident status
              }}
              className=&quot;text-green-400 hover:text-green-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderOverviewTab = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Security Metrics */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Security Score&quot;
              value={metrics?.securityScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#22c55e' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Open Incidents&quot;
              value={metrics?.openIncidents || 0}
              valueStyle={{ color: '#ef4444' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Critical Incidents&quot;
              value={metrics?.criticalIncidents || 0}
              valueStyle={{ color: '#dc2626' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Compliance Score&quot;
              value={metrics?.complianceScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#3b82f6' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Recent Security Events */}
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Recent Security Events
          &lt;/Title&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;ReloadOutlined /&gt;}
            onClick={loadSecurityData}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/div&gt;

        &lt;Timeline
          items={auditLogs.slice(0, 5).map((log) =&gt; ({
            color: getSeverityColor(log.severity),
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white text-sm&quot;&gt;{log.action.description}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                  {log.userEmail} • {new Date(log.timestamp).toLocaleString()}
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Tag color={getSeverityColor(log.severity)}&gt;{log.severity}&lt;/Tag&gt;
                  &lt;Tag&gt;{log.category}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      &lt;/Card&gt;

      {/* Security Alerts */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Security Alerts
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {incidents.slice(0, 3).map((incident) =&gt; (
                &lt;Alert
                  key={incident.id}
                  message={incident.title}
                  description={incident.description}
                  type={incident.severity === 'critical' ? 'error' : 'warning'}
                  showIcon
                  className=&quot;bg-red-900 border-red-600&quot;
                /&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Vulnerability Summary
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {vulnerabilityScans.slice(0, 3).map((scan) =&gt; (
                &lt;div
                  key={scan.id}
                  className=&quot;flex items-center justify-between p-2 bg-gray-700 rounded&quot;
                &gt;
                  &lt;div&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.target}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-right&quot;&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;findings&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  const renderAuditLogsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Audit Logs
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Select
              value={filters.severity}
              onChange={(value) =&gt; setFilters({ ...filters, severity: value })}
              className=&quot;w-32&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Severity&lt;/Option&gt;
              &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
              &lt;Option value=&quot;error&quot;&gt;Error&lt;/Option&gt;
              &lt;Option value=&quot;warning&quot;&gt;Warning&lt;/Option&gt;
              &lt;Option value=&quot;info&quot;&gt;Info&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;Select
              value={filters.category}
              onChange={(value) =&gt; setFilters({ ...filters, category: value })}
              className=&quot;w-40&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Categories&lt;/Option&gt;
              &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
              &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
              &lt;Option value=&quot;data_access&quot;&gt;Data Access&lt;/Option&gt;
              &lt;Option value=&quot;security_event&quot;&gt;Security Event&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;RangePicker
              value={[filters.startDate, filters.endDate]}
              onChange={(dates) =&gt;
                setFilters({
                  ...filters,
                  startDate: dates?.[0],
                  endDate: dates?.[1],
                })
              }
              className=&quot;w-64&quot;
            /&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;DownloadOutlined /&gt;}
              onClick={() =&gt; {
                // Export audit logs
              }}
            &gt;
              Export
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={auditLogColumns}
          dataSource={filteredAuditLogs}
          loading={isLoading}
          pagination={{ pageSize: 20 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
          scroll={{ x: 'max-content' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderIncidentsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Security Incidents
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AlertOutlined /&gt;}
            onClick={() =&gt; setIsIncidentModalOpen(true)}
          &gt;
            Create Incident
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={incidentColumns}
          dataSource={incidents}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderVulnerabilitiesTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Vulnerability Scans
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;SecurityScanOutlined /&gt;}
            onClick={() =&gt; setIsScanModalOpen(true)}
          &gt;
            Start Scan
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {vulnerabilityScans.map((scan) =&gt; (
            &lt;Card key={scan.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{scan.target}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Total&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-red-400 text-lg font-bold&quot;&gt;{scan.summary.critical}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Critical&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-orange-400 text-lg font-bold&quot;&gt;{scan.summary.high}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;High&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={scan.status === 'completed' ? 'green' : 'orange'}&gt;{scan.status}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderComplianceTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Compliance Reports
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AuditOutlined /&gt;}
            onClick={() =&gt; {
              // Generate compliance report
            }}
          &gt;
            Generate Report
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {complianceReports.map((report) =&gt; (
            &lt;Card key={report.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{report.standard} Compliance Report&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                    Generated: {new Date(report.generatedAt).toLocaleDateString()}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.score}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Score&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.findings.length}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Findings&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={report.status === 'completed' ? 'green' : 'orange'}&gt;
                    {report.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSecretsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Secrets Management
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsSecretModalOpen(true)}&gt;
            Create Secret
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {secrets.map((secret) =&gt; (
            &lt;Card key={secret.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{secret.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{secret.type}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;
                      {secret.metadata?.accessCount || 0}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Access Count&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{secret.keyVersion}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Key Version&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Space&gt;
                    &lt;Tooltip title=&quot;Rotate Secret&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;ReloadOutlined /&gt;}
                        className=&quot;text-blue-400 hover:text-blue-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                    &lt;Tooltip title=&quot;View Details&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;EyeOutlined /&gt;}
                        className=&quot;text-green-400 hover:text-green-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/Space&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;CheckCircleOutlined className=&quot;text-green-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Security Dashboard
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Enterprise security monitoring and compliance management
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;security-dashboard-tabs&quot;
          items={[
            {
              key: 'overview',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Overview
                &lt;/span&gt;
              ),
              children: renderOverviewTab(),
            },
            {
              key: 'audit',
              label: (
                &lt;span&gt;
                  &lt;AuditOutlined className=&quot;mr-1&quot; /&gt;
                  Audit Logs
                  &lt;Badge count={auditLogs.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAuditLogsTab(),
            },
            {
              key: 'incidents',
              label: (
                &lt;span&gt;
                  &lt;AlertOutlined className=&quot;mr-1&quot; /&gt;
                  Incidents
                  &lt;Badge
                    count={incidents.filter((i) =&gt; i.status === 'open').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderIncidentsTab(),
            },
            {
              key: 'vulnerabilities',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Vulnerabilities
                  &lt;Badge count={vulnerabilityScans.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderVulnerabilitiesTab(),
            },
            {
              key: 'compliance',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Compliance
                  &lt;Badge count={complianceReports.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderComplianceTab(),
            },
            {
              key: 'secrets',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  Secrets
                  &lt;Badge count={secrets.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderSecretsTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Incident Details Modal */}
      &lt;Modal
        title=&quot;Security Incident Details&quot;
        open={isIncidentModalOpen}
        onCancel={() =&gt; setIsIncidentModalOpen(false)}
        footer={null}
        width={800}
      &gt;
        {selectedIncident &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Title&lt;/Text&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{selectedIncident.title}&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Severity&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getSeverityColor(selectedIncident.severity)}&gt;
                    {selectedIncident.severity}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Status&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getStatusColor(selectedIncident.status)}&gt;
                    {selectedIncident.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Category&lt;/Text&gt;
                &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.category}&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Description&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.description}&lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Timeline&lt;/Text&gt;
              &lt;Timeline
                items={selectedIncident.timeline.map((event) =&gt; ({
                  color: 'blue',
                  children: (
                    &lt;div className=&quot;space-y-1&quot;&gt;
                      &lt;div className=&quot;text-white text-sm&quot;&gt;{event.description}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                        {new Date(event.timestamp).toLocaleString()} • {event.actor}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                }))}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;

      {/* Start Vulnerability Scan Modal */}
      &lt;Modal
        title=&quot;Start Vulnerability Scan&quot;
        open={isScanModalOpen}
        onCancel={() =&gt; setIsScanModalOpen(false)}
        onOk={() =&gt; setIsScanModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Scan Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select scan type&quot;&gt;
              &lt;Option value=&quot;dependency&quot;&gt;Dependency Scan&lt;/Option&gt;
              &lt;Option value=&quot;container&quot;&gt;Container Scan&lt;/Option&gt;
              &lt;Option value=&quot;infrastructure&quot;&gt;Infrastructure Scan&lt;/Option&gt;
              &lt;Option value=&quot;code&quot;&gt;Code Scan&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Target&quot; required&gt;
            &lt;Input placeholder=&quot;Enter target (URL, path, etc.)&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Options&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Additional scan options (JSON)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create Secret Modal */}
      &lt;Modal
        title=&quot;Create Secret&quot;
        open={isSecretModalOpen}
        onCancel={() =&gt; setIsSecretModalOpen(false)}
        onOk={() =&gt; setIsSecretModalOpen(false)}
        width={600}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;Secret name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select secret type&quot;&gt;
              &lt;Option value=&quot;api_key&quot;&gt;API Key&lt;/Option&gt;
              &lt;Option value=&quot;password&quot;&gt;Password&lt;/Option&gt;
              &lt;Option value=&quot;certificate&quot;&gt;Certificate&lt;/Option&gt;
              &lt;Option value=&quot;token&quot;&gt;Token&lt;/Option&gt;
              &lt;Option value=&quot;database_credential&quot;&gt;Database Credential&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Value&quot; required&gt;
            &lt;Input.TextArea placeholder=&quot;Secret value&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Secret description&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Classification&quot;&gt;
            &lt;Select placeholder=&quot;Select data classification&quot;&gt;
              &lt;Option value=&quot;public&quot;&gt;Public&lt;/Option&gt;
              &lt;Option value=&quot;internal&quot;&gt;Internal&lt;/Option&gt;
              &lt;Option value=&quot;confidential&quot;&gt;Confidential&lt;/Option&gt;
              &lt;Option value=&quot;restricted&quot;&gt;Restricted&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default SecurityDashboard;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/OrganizationSettings.tsx (Line 1:1 - Line 38:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/organizationsettings/OrganizationSettings.tsx (Line 1:1 - Line 37:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn327" onclick="toggleCodeBlock('cloneGroup327', 'expandBtn327', 'collapseBtn327')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn327" onclick="toggleCodeBlock('cloneGroup327', 'expandBtn327', 'collapseBtn327')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup327"><code class="language-tsx text-sm text-gray-800">import {
  AuditOutlined,
  CheckOutlined,
  ClockCircleOutlined,
  GlobalOutlined,
  SecurityScanOutlined,
  SettingOutlined,
  TeamOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Divider,
  Form,
  Input,
  InputNumber,
  Modal,
  message,
  Select,
  Space,
  Switch,
  Table,
  Tabs,
  Tag,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type {
  Organization,
  OrganizationMember,
  OrganizationSettings,
} from '@/core/services/rbacService';
import { useRBACStore } from '@/core/stores/rbacStore';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/OrganizationSettings.tsx (Line 36:26 - Line 564:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/organizationsettings/OrganizationSettings.tsx (Line 40:19 - Line 568:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn328" onclick="toggleCodeBlock('cloneGroup328', 'expandBtn328', 'collapseBtn328')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn328" onclick="toggleCodeBlock('cloneGroup328', 'expandBtn328', 'collapseBtn328')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup328"><code class="language-tsx text-sm text-gray-800">;

const { Title, Text, Paragraph } = Typography;
const { TextArea } = Input;
const { Option } = Select;

interface OrganizationSettingsProps {
  organization: Organization;
}

export const OrganizationSettingsComponent: React.FC&lt;OrganizationSettingsProps&gt; = ({
  organization,
}) =&gt; {
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);
  const [inviteModalVisible, setInviteModalVisible] = useState(false);
  const [inviteForm] = Form.useForm();

  const {
    updateOrganization,
    inviteUser,
    removeUser,
    updateUserRole,
    canManageOrganization,
    canManageUsers,
    isLoading,
    error,
  } = useRBACStore();

  useEffect(() =&gt; {
    form.setFieldsValue({
      name: organization.name,
      description: organization.description,
      domain: organization.domain,
      ...organization.settings,
    });
  }, [organization, form]);

  const handleSaveSettings = async (values: any) =&gt; {
    setLoading(true);
    try {
      const settings: OrganizationSettings = {
        allowPublicWorkflows: values.allowPublicWorkflows,
        requireApprovalForExecution: values.requireApprovalForExecution,
        maxWorkflowsPerUser: values.maxWorkflowsPerUser,
        maxExecutionsPerMonth: values.maxExecutionsPerMonth,
        enableAuditLogging: values.enableAuditLogging,
        enableSSOIntegration: values.enableSSOIntegration,
        allowedDomains: values.allowedDomains
          ?.split(',')
          .map((d: string) =&gt; d.trim())
          .filter(Boolean),
        sessionTimeout: values.sessionTimeout,
        passwordPolicy: {
          minLength: values.passwordMinLength,
          requireUppercase: values.passwordRequireUppercase,
          requireLowercase: values.passwordRequireLowercase,
          requireNumbers: values.passwordRequireNumbers,
          requireSymbols: values.passwordRequireSymbols,
          preventReuse: values.passwordPreventReuse,
          maxAge: values.passwordMaxAge,
        },
      };

      await updateOrganization(organization.id, {
        name: values.name,
        description: values.description,
        domain: values.domain,
        settings,
      });

      message.success('Organization settings updated successfully');
    } catch (error: any) {
      message.error(error.message || 'Failed to update organization settings');
    } finally {
      setLoading(false);
    }
  };

  const handleInviteUser = async (values: any) =&gt; {
    try {
      await inviteUser(organization.id, values.email, values.role);
      message.success(`Invitation sent to ${values.email}`);
      setInviteModalVisible(false);
      inviteForm.resetFields();
    } catch (error: any) {
      message.error(error.message || 'Failed to send invitation');
    }
  };

  const handleRemoveUser = async (userId: string, userName: string) =&gt; {
    Modal.confirm({
      title: 'Remove User',
      content: `Are you sure you want to remove ${userName} from this organization?`,
      okText: 'Remove',
      okType: 'danger',
      onOk: async () =&gt; {
        try {
          await removeUser(organization.id, userId);
          message.success('User removed successfully');
        } catch (error: any) {
          message.error(error.message || 'Failed to remove user');
        }
      },
    });
  };

  const handleUpdateUserRole = async (userId: string, newRole: OrganizationMember['role']) =&gt; {
    try {
      await updateUserRole(organization.id, userId, newRole);
      message.success('User role updated successfully');
    } catch (error: any) {
      message.error(error.message || 'Failed to update user role');
    }
  };

  const memberColumns = [
    {
      title: 'User',
      dataIndex: 'userId',
      key: 'userId',
      render: (userId: string) =&gt; (
        &lt;div&gt;
          &lt;Text strong&gt;{userId}&lt;/Text&gt;
          &lt;br /&gt;
          &lt;Text type=&quot;secondary&quot;&gt;user@example.com&lt;/Text&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Role',
      dataIndex: 'role',
      key: 'role',
      render: (role: OrganizationMember['role'], record: OrganizationMember) =&gt; (
        &lt;Select
          value={role}
          onChange={(newRole) =&gt; handleUpdateUserRole(record.userId, newRole)}
          disabled={!canManageUsers() || record.role === 'owner'}
          style={{ width: 120 }}
        &gt;
          &lt;Option value=&quot;owner&quot;&gt;Owner&lt;/Option&gt;
          &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
          &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
          &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
        &lt;/Select&gt;
      ),
    },
    {
      title: 'Joined',
      dataIndex: 'joinedAt',
      key: 'joinedAt',
      render: (date: Date) =&gt; new Date(date).toLocaleDateString(),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_: unknown, record: OrganizationMember) =&gt; (
        &lt;Space&gt;
          {canManageUsers() &amp;&amp; record.role !== 'owner' &amp;&amp; (
            &lt;Button
              type=&quot;link&quot;
              danger
              size=&quot;small&quot;
              onClick={() =&gt; handleRemoveUser(record.userId, record.userId)}
            &gt;
              Remove
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const tabs = [
    {
      key: 'general',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          General
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Form.Item
              name=&quot;name&quot;
              label=&quot;Organization Name&quot;
              rules={[{ required: true, message: 'Please enter organization name' }]}
            &gt;
              &lt;Input placeholder=&quot;Enter organization name&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
              &lt;TextArea rows={3} placeholder=&quot;Enter organization description&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;domain&quot; label=&quot;Domain&quot;&gt;
              &lt;Input placeholder=&quot;company.com&quot; addonBefore=&quot;@&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Workflow Settings&lt;/Divider&gt;

            &lt;Form.Item
              name=&quot;allowPublicWorkflows&quot;
              label=&quot;Allow Public Workflows&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;requireApprovalForExecution&quot;
              label=&quot;Require Approval for Execution&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxWorkflowsPerUser&quot; label=&quot;Max Workflows per User&quot;&gt;
              &lt;InputNumber min={1} max={1000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxExecutionsPerMonth&quot; label=&quot;Max Executions per Month&quot;&gt;
              &lt;InputNumber min={100} max={1000000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Space&gt;
                &lt;Button
                  type=&quot;primary&quot;
                  htmlType=&quot;submit&quot;
                  loading={loading || isLoading}
                  disabled={!canManageOrganization()}
                &gt;
                  Save Settings
                &lt;/Button&gt;
                &lt;Button type=&quot;link&quot; onClick={() =&gt; setShowAdvancedSettings(!showAdvancedSettings)}&gt;
                  {showAdvancedSettings ? 'Hide' : 'Show'} Advanced Settings
                &lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Alert
              message=&quot;Security Settings&quot;
              description=&quot;Configure security policies and access controls for your organization.&quot;
              type=&quot;info&quot;
              showIcon
              style={{ marginBottom: 24 }}
            /&gt;

            &lt;Form.Item
              name=&quot;enableAuditLogging&quot;
              label=&quot;Enable Audit Logging&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;enableSSOIntegration&quot;
              label=&quot;Enable SSO Integration&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;allowedDomains&quot; label=&quot;Allowed Domains&quot;&gt;
              &lt;Input
                placeholder=&quot;domain1.com, domain2.com&quot;
                addonAfter={
                  &lt;Tooltip title=&quot;Comma-separated list of allowed email domains&quot;&gt;
                    &lt;GlobalOutlined /&gt;
                  &lt;/Tooltip&gt;
                }
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;sessionTimeout&quot; label=&quot;Session Timeout (minutes)&quot;&gt;
              &lt;InputNumber
                min={5}
                max={1440}
                style={{ width: '100%' }}
                addonAfter={&lt;ClockCircleOutlined /&gt;}
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Password Policy&lt;/Divider&gt;

            &lt;Form.Item name=&quot;passwordMinLength&quot; label=&quot;Minimum Length&quot;&gt;
              &lt;InputNumber min={6} max={32} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;Form.Item
                name=&quot;passwordRequireUppercase&quot;
                label=&quot;Require Uppercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireLowercase&quot;
                label=&quot;Require Lowercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireNumbers&quot;
                label=&quot;Require Numbers&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireSymbols&quot;
                label=&quot;Require Symbols&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Space&gt;

            &lt;Form.Item
              name=&quot;passwordPreventReuse&quot;
              label=&quot;Prevent Password Reuse (last N passwords)&quot;
            &gt;
              &lt;InputNumber min={0} max={10} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;passwordMaxAge&quot; label=&quot;Password Expiry (days)&quot;&gt;
              &lt;InputNumber min={30} max={365} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Button
                type=&quot;primary&quot;
                htmlType=&quot;submit&quot;
                loading={loading || isLoading}
                disabled={!canManageOrganization()}
                icon={&lt;CheckOutlined /&gt;}
              &gt;
                Update Security Settings
              &lt;/Button&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'members',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Members ({organization.members.length})
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;div style={{ marginBottom: 16 }}&gt;
            &lt;Space&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt; setInviteModalVisible(true)}
                disabled={!canManageUsers()}
                icon={&lt;TeamOutlined /&gt;}
              &gt;
                Invite User
              &lt;/Button&gt;
              &lt;Text type=&quot;secondary&quot;&gt;Manage organization members and their roles&lt;/Text&gt;
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;Table
            dataSource={organization.members}
            columns={memberColumns}
            rowKey=&quot;userId&quot;
            pagination={{ pageSize: 10 }}
            loading={isLoading}
          /&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'audit',
      label: (
        &lt;span&gt;
          &lt;AuditOutlined /&gt;
          Audit &amp; Compliance
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Alert
            message=&quot;Audit &amp; Compliance&quot;
            description=&quot;Track all actions performed within your organization for security and compliance purposes.&quot;
            type=&quot;info&quot;
            showIcon
            style={{ marginBottom: 24 }}
          /&gt;

          &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;large&quot;&gt;
            &lt;Card size=&quot;small&quot; title=&quot;Data Retention&quot;&gt;
              &lt;Paragraph&gt;
                Audit logs are retained for 90 days. Execution logs are retained for 30 days.
                Contact support for longer retention periods.
              &lt;/Paragraph&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Compliance Standards&quot;&gt;
              &lt;Space wrap&gt;
                &lt;Tag color=&quot;green&quot;&gt;SOC 2 Type II&lt;/Tag&gt;
                &lt;Tag color=&quot;blue&quot;&gt;GDPR Compliant&lt;/Tag&gt;
                &lt;Tag color=&quot;purple&quot;&gt;ISO 27001&lt;/Tag&gt;
                &lt;Tag color=&quot;orange&quot;&gt;HIPAA Ready&lt;/Tag&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Data Export&quot;&gt;
              &lt;Space&gt;
                &lt;Button&gt;Export Audit Logs&lt;/Button&gt;
                &lt;Button&gt;Export User Data&lt;/Button&gt;
                &lt;Button&gt;Export Workflow Data&lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;
          &lt;/Space&gt;
        &lt;/Card&gt;
      ),
    },
  ];

  return (
    &lt;div&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;SettingOutlined /&gt; Organization Settings
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;
          Manage your organization's settings, security policies, and members
        &lt;/Text&gt;
      &lt;/div&gt;

      {error &amp;&amp; (
        &lt;Alert
          message=&quot;Error&quot;
          description={error}
          type=&quot;error&quot;
          closable
          style={{ marginBottom: 16 }}
        /&gt;
      )}

      &lt;Tabs items={tabs} /&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={inviteModalVisible}
        onCancel={() =&gt; setInviteModalVisible(false)}
        footer={null}
        width={500}
      &gt;
        &lt;Form form={inviteForm} layout=&quot;vertical&quot; onFinish={handleInviteUser}&gt;
          &lt;Form.Item
            name=&quot;email&quot;
            label=&quot;Email Address&quot;
            rules={[
              { required: true, message: 'Please enter email address' },
              { type: 'email', message: 'Please enter a valid email address' },
            ]}
          &gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;role&quot;
            label=&quot;Role&quot;
            rules={[{ required: true, message: 'Please select a role' }]}
            initialValue=&quot;member&quot;
          &gt;
            &lt;Select&gt;
              &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
              &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
              &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={isLoading}&gt;
                Send Invitation
              &lt;/Button&gt;
              &lt;Button onClick={() =&gt; setInviteModalVisible(false)}&gt;Cancel&lt;/Button&gt;
            &lt;/Space&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Layout/Sidebar.tsx (Line 23:2 - Line 35:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/dashboard/Dashboard.tsx (Line 111:2 - Line 123:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn329" onclick="toggleCodeBlock('cloneGroup329', 'expandBtn329', 'collapseBtn329')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn329" onclick="toggleCodeBlock('cloneGroup329', 'expandBtn329', 'collapseBtn329')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup329"><code class="language-tsx text-sm text-gray-800">;

  const handleCreateWorkflow = async () =&gt; {
    const name = prompt('Enter workflow name:');
    if (name) {
      if (name.trim().length === 0) {
        toast.error('Please enter a valid workflow name.');
        return;
      }

      try {
        await createNewWorkflow(name.trim(), navigate);
        toast</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Layout/Header.tsx (Line 12:6 - Line 33:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/dashboard/Dashboard.tsx (Line 111:2 - Line 44:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn330" onclick="toggleCodeBlock('cloneGroup330', 'expandBtn330', 'collapseBtn330')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn330" onclick="toggleCodeBlock('cloneGroup330', 'expandBtn330', 'collapseBtn330')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup330"><code class="language-tsx text-sm text-gray-800">);

  const handleCreateWorkflow = async () =&gt; {
    const name = prompt('Enter workflow name:');
    if (name) {
      if (name.trim().length === 0) {
        toast.error('Please enter a valid workflow name.');
        return;
      }

      try {
        await createNewWorkflow(name.trim(), navigate);
        toast.success('Workflow created successfully!');
      } catch (error) {
        const errorMessage = error instanceof Error ? error.message : 'Failed to create workflow';
        toast.error(errorMessage);
      }
    }
  };

  const handleLogout = async () =&gt; {
    await</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/SocialProof.tsx (Line 1:1 - Line 239:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/socialproof/SocialProof.tsx (Line 1:1 - Line 239:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn331" onclick="toggleCodeBlock('cloneGroup331', 'expandBtn331', 'collapseBtn331')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn331" onclick="toggleCodeBlock('cloneGroup331', 'expandBtn331', 'collapseBtn331')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup331"><code class="language-tsx text-sm text-gray-800">/**
 * Social Proof Section
 *
 * Customer testimonials, logos, and trust signals
 * to build credibility and demonstrate enterprise adoption
 */

import { ArrowRight, Quote, Shield, Star, TrendingUp, Users } from 'lucide-react';
import type React from 'react';

export const SocialProof: React.FC = () =&gt; {
  const testimonials = [
    {
      quote:
        &quot;Reporunner's hybrid database architecture and enterprise security features made it the perfect choice for our financial services workflows. The self-hosted deployment gives us complete control over our sensitive data.&quot;,
      author: 'Sarah Chen',
      title: 'Head of Digital Operations',
      company: 'FinTech Solutions',
      avatar: '/api/placeholder/60/60',
      rating: 5,
      highlight: 'Enterprise Security',
    },
    {
      quote:
        'The AI-powered automation capabilities have transformed how we handle customer onboarding. What used to take hours now happens in minutes, with intelligent error handling that we never had before.',
      author: 'Michael Rodriguez',
      title: 'VP of Technology',
      company: 'Customer Success Corp',
      avatar: '/api/placeholder/60/60',
      rating: 5,
      highlight: 'AI Automation',
    },
    {
      quote:
        'Moving from n8n to Reporunner was seamless, and the advanced collaboration features have revolutionized how our distributed team builds workflows. The real-time editing is game-changing.',
      author: 'Emma Thompson',
      title: 'DevOps Lead',
      company: 'Global Tech Inc',
      avatar: '/api/placeholder/60/60',
      rating: 5,
      highlight: 'Team Collaboration',
    },
  ];

  const companyLogos = [
    { name: 'TechCorp', logo: '/api/placeholder/120/40' },
    { name: 'DataFlow', logo: '/api/placeholder/120/40' },
    { name: 'CloudSys', logo: '/api/placeholder/120/40' },
    { name: 'AutoTech', logo: '/api/placeholder/120/40' },
    { name: 'DevOps Pro', logo: '/api/placeholder/120/40' },
    { name: 'AI Solutions', logo: '/api/placeholder/120/40' },
  ];

  const stats = [
    {
      icon: Users,
      value: '10,000+',
      label: 'Active Users',
      description: 'Developers and teams worldwide',
    },
    {
      icon: TrendingUp,
      value: '99.9%',
      label: 'Uptime',
      description: 'Enterprise-grade reliability',
    },
    {
      icon: Shield,
      value: 'SOC2',
      label: 'Compliant',
      description: 'Enterprise security certified',
    },
  ];

  const certifications = [
    { name: 'SOC2 Type II', badge: '/api/placeholder/80/80' },
    { name: 'ISO 27001', badge: '/api/placeholder/80/80' },
    { name: 'GDPR Ready', badge: '/api/placeholder/80/80' },
    { name: 'HIPAA Compliant', badge: '/api/placeholder/80/80' },
  ];

  return (
    &lt;section className=&quot;py-20 bg-gray-50&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            Trusted by{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Enterprises
            &lt;/span&gt;{' '}
            Worldwide
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            Join thousands of companies who trust Reporunner for their mission-critical workflow
            automation needs.
          &lt;/p&gt;
        &lt;/div&gt;

        {/* Stats */}
        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8 mb-16&quot;&gt;
          {stats.map((stat, index) =&gt; {
            const Icon = stat.icon;
            return (
              &lt;div key={index} className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;bg-white rounded-xl p-6 shadow-lg border border-gray-200 transition-all hover:shadow-xl hover:-translate-y-1&quot;&gt;
                  &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-4&quot;&gt;
                    &lt;Icon className=&quot;w-8 h-8 text-white&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-3xl font-bold text-gray-900 mb-2&quot;&gt;{stat.value}&lt;/div&gt;
                  &lt;div className=&quot;text-lg font-semibold text-gray-800 mb-1&quot;&gt;{stat.label}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-600&quot;&gt;{stat.description}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Company Logos */}
        &lt;div className=&quot;mb-16&quot;&gt;
          &lt;p className=&quot;text-center text-gray-500 mb-8 font-medium&quot;&gt;
            Trusted by leading companies worldwide
          &lt;/p&gt;
          &lt;div className=&quot;flex flex-wrap justify-center items-center gap-12 opacity-60&quot;&gt;
            {companyLogos.map((company, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;h-12 bg-gray-200 rounded-lg px-6 flex items-center justify-center transition-opacity hover:opacity-100&quot;
              &gt;
                &lt;span className=&quot;font-semibold text-gray-600&quot;&gt;{company.name}&lt;/span&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Testimonials */}
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16&quot;&gt;
          {testimonials.map((testimonial, index) =&gt; (
            &lt;div
              key={index}
              className=&quot;bg-white rounded-2xl p-8 shadow-lg border border-gray-200 relative transition-all hover:shadow-xl hover:-translate-y-1&quot;
            &gt;
              {/* Quote Icon */}
              &lt;div className=&quot;absolute -top-4 left-8&quot;&gt;
                &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 w-8 h-8 rounded-full flex items-center justify-center&quot;&gt;
                  &lt;Quote className=&quot;w-4 h-4 text-white&quot; /&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Rating */}
              &lt;div className=&quot;flex gap-1 mb-4 mt-2&quot;&gt;
                {[...Array(testimonial.rating)].map((_, i) =&gt; (
                  &lt;Star key={i} className=&quot;w-5 h-5 fill-yellow-400 text-yellow-400&quot; /&gt;
                ))}
              &lt;/div&gt;

              {/* Highlight Badge */}
              &lt;div className=&quot;inline-flex items-center bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm font-medium mb-4&quot;&gt;
                {testimonial.highlight}
              &lt;/div&gt;

              {/* Quote */}
              &lt;blockquote className=&quot;text-gray-700 mb-6 leading-relaxed&quot;&gt;
                &quot;{testimonial.quote}&quot;
              &lt;/blockquote&gt;

              {/* Author */}
              &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold&quot;&gt;
                  {testimonial.author
                    .split(' ')
                    .map((n) =&gt; n[0])
                    .join('')}
                &lt;/div&gt;
                &lt;div&gt;
                  &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{testimonial.author}&lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-600&quot;&gt;{testimonial.title}&lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-500&quot;&gt;{testimonial.company}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;

        {/* Security &amp; Compliance */}
        &lt;div className=&quot;bg-white rounded-2xl p-8 border border-gray-200 shadow-lg&quot;&gt;
          &lt;div className=&quot;text-center mb-8&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-4&quot;&gt;
              Enterprise Security &amp; Compliance
            &lt;/h3&gt;
            &lt;p className=&quot;text-gray-600 max-w-2xl mx-auto&quot;&gt;
              Reporunner meets the highest standards for enterprise security and compliance,
              ensuring your data and workflows are always protected.
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
            {certifications.map((cert, index) =&gt; (
              &lt;div key={index} className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;w-20 h-20 bg-gray-100 rounded-xl flex items-center justify-center mx-auto mb-3&quot;&gt;
                  &lt;Shield className=&quot;w-10 h-10 text-gray-600&quot; /&gt;
                &lt;/div&gt;
                &lt;div className=&quot;font-semibold text-gray-800&quot;&gt;{cert.name}&lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;

          &lt;div className=&quot;mt-8 pt-8 border-t border-gray-100 text-center&quot;&gt;
            &lt;button className=&quot;group inline-flex items-center gap-2 text-blue-600 font-medium hover:text-blue-700 transition-colors&quot;&gt;
              View Security Documentation
              &lt;ArrowRight className=&quot;w-4 h-4 transition-transform group-hover:translate-x-1&quot; /&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Customer Success CTA */}
        &lt;div className=&quot;mt-16 text-center&quot;&gt;
          &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;
              Join the Growing Community of Successful Teams
            &lt;/h3&gt;
            &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
              See how Reporunner can transform your workflow automation and drive enterprise success
              for your organization.
            &lt;/p&gt;
            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
              &lt;button className=&quot;bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors&quot;&gt;
                Read Customer Stories
              &lt;/button&gt;
              &lt;button className=&quot;border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors&quot;&gt;
                Schedule a Demo
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/PricingSection.tsx (Line 1:1 - Line 510:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/pricingsection/PricingSection.tsx (Line 3:1 - Line 512:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn333" onclick="toggleCodeBlock('cloneGroup333', 'expandBtn333', 'collapseBtn333')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn333" onclick="toggleCodeBlock('cloneGroup333', 'expandBtn333', 'collapseBtn333')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup333"><code class="language-tsx text-sm text-gray-800">/**
 * Pricing Section Component
 *
 * Enterprise-focused pricing tiers with clear value proposition
 * and competitive positioning
 */

import { ArrowRight, Check, Crown, Star, Zap } from 'lucide-react';
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';

export const PricingSection: React.FC = () =&gt; {
  const navigate = useNavigate();
  const [billingPeriod, setBillingPeriod] = useState&lt;'monthly' | 'annually'&gt;('monthly');

  const handlePlanClick = (planName: string) =&gt; {
    if (planName === 'Community') {
      navigate('/register');
    } else if (planName === 'Professional') {
      navigate('/register');
    } else if (planName === 'Enterprise') {
      navigate('/contact');
    }
  };

  const plans = [
    {
      name: 'Community',
      description: 'Perfect for getting started',
      price: { monthly: 0, annually: 0 },
      icon: Star,
      gradient: 'from-gray-500 to-gray-600',
      bgGradient: 'from-gray-50 to-gray-100',
      features: [
        'Self-hosted deployment',
        'Core workflow features',
        'Basic integrations (50+)',
        'Community support',
        'Up to 5 users',
        'Basic analytics',
        'Open source license',
      ],
      limitations: [
        'Limited to 1,000 executions/month',
        'Community support only',
        'Basic security features',
      ],
      cta: 'Get Started Free',
      popular: false,
    },
    {
      name: 'Professional',
      description: 'For growing teams and businesses',
      price: { monthly: 49, annually: 39 },
      icon: Zap,
      gradient: 'from-blue-500 to-blue-600',
      bgGradient: 'from-blue-50 to-blue-100',
      features: [
        'Everything in Community',
        'Advanced integrations (500+)',
        'AI-powered features',
        'Real-time collaboration',
        'Version control',
        'Premium support',
        'Up to 50 users',
        'Advanced analytics',
        'Custom node development',
        'API access',
      ],
      limitations: ['Up to 10,000 executions/month', 'Standard support hours'],
      cta: 'Start Free Trial',
      popular: true,
    },
    {
      name: 'Enterprise',
      description: 'For large organizations',
      price: { monthly: 'Custom', annually: 'Custom' },
      icon: Crown,
      gradient: 'from-purple-500 to-purple-600',
      bgGradient: 'from-purple-50 to-purple-100',
      features: [
        'Everything in Professional',
        'SSO/SAML integration',
        'Advanced security &amp; compliance',
        'Custom deployment options',
        'Unlimited users',
        'Unlimited executions',
        'Dedicated success manager',
        '24/7 priority support',
        'Custom integrations',
        'On-premise deployment',
        'SLA guarantees',
        'Training &amp; onboarding',
      ],
      limitations: [],
      cta: 'Contact Sales',
      popular: false,
    },
  ];

  const comparisonFeatures = [
    {
      category: 'Core Features',
      features: [
        {
          name: 'Visual workflow builder',
          community: true,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Pre-built integrations',
          community: '50+',
          pro: '500+',
          enterprise: 'Unlimited',
        },
        {
          name: 'Real-time collaboration',
          community: false,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Version control',
          community: false,
          pro: true,
          enterprise: true,
        },
      ],
    },
    {
      category: 'AI &amp; Analytics',
      features: [
        {
          name: 'AI-powered automation',
          community: false,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Advanced analytics',
          community: 'Basic',
          pro: 'Advanced',
          enterprise: 'Enterprise',
        },
        {
          name: 'Semantic search',
          community: false,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Intelligent optimization',
          community: false,
          pro: true,
          enterprise: true,
        },
      ],
    },
    {
      category: 'Security &amp; Compliance',
      features: [
        {
          name: 'SSO/SAML integration',
          community: false,
          pro: false,
          enterprise: true,
        },
        {
          name: 'RBAC permissions',
          community: 'Basic',
          pro: 'Advanced',
          enterprise: 'Enterprise',
        },
        {
          name: 'Audit logging',
          community: false,
          pro: 'Basic',
          enterprise: 'Advanced',
        },
        {
          name: 'Compliance certifications',
          community: false,
          pro: false,
          enterprise: true,
        },
      ],
    },
  ];

  return (
    &lt;section className=&quot;py-20 bg-white&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            Simple, Transparent{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Pricing
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto mb-8&quot;&gt;
            Start free, scale as you grow. No hidden fees, no vendor lock-in. Enterprise-grade
            features at every level.
          &lt;/p&gt;

          {/* Billing Toggle */}
          &lt;div className=&quot;inline-flex items-center bg-gray-100 rounded-lg p-1&quot;&gt;
            &lt;button
              onClick={() =&gt; setBillingPeriod('monthly')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'monthly'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Monthly
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; setBillingPeriod('annually')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'annually'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Annually
              &lt;span className=&quot;ml-2 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full&quot;&gt;
                Save 20%
              &lt;/span&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Pricing Cards */}
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8 mb-20&quot;&gt;
          {plans.map((plan, index) =&gt; {
            const Icon = plan.icon;
            const price = plan.price[billingPeriod];

            return (
              &lt;div
                key={index}
                className={`relative rounded-2xl border-2 p-8 transition-all duration-300 ${
                  plan.popular
                    ? 'border-blue-500 shadow-xl shadow-blue-500/10 scale-105'
                    : 'border-gray-200 hover:border-gray-300 hover:shadow-lg'
                }`}
              &gt;
                {/* Popular Badge */}
                {plan.popular &amp;&amp; (
                  &lt;div className=&quot;absolute -top-4 left-1/2 transform -translate-x-1/2&quot;&gt;
                    &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium&quot;&gt;
                      Most Popular
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Plan Header */}
                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;div
                    className={`w-16 h-16 rounded-xl bg-gradient-to-r ${plan.gradient} flex items-center justify-center mx-auto mb-4`}
                  &gt;
                    &lt;Icon className=&quot;w-8 h-8 text-white&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{plan.description}&lt;/p&gt;

                  {/* Price */}
                  &lt;div className=&quot;mb-6&quot;&gt;
                    {typeof price === 'number' ? (
                      &lt;&gt;
                        &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;
                          ${price}
                          {price &gt; 0 &amp;&amp; &lt;span className=&quot;text-lg text-gray-600&quot;&gt;/user/month&lt;/span&gt;}
                        &lt;/div&gt;
                        {billingPeriod === 'annually' &amp;&amp; price &gt; 0 &amp;&amp; (
                          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;
                            Billed annually (${price * 12}/user/year)
                          &lt;/div&gt;
                        )}
                      &lt;/&gt;
                    ) : (
                      &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;{price}&lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Features */}
                &lt;div className=&quot;mb-8&quot;&gt;
                  &lt;ul className=&quot;space-y-3&quot;&gt;
                    {plan.features.map((feature, featureIndex) =&gt; (
                      &lt;li key={featureIndex} className=&quot;flex items-start gap-3&quot;&gt;
                        &lt;Check className=&quot;w-5 h-5 text-green-500 mt-0.5 flex-shrink-0&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;{feature}&lt;/span&gt;
                      &lt;/li&gt;
                    ))}
                  &lt;/ul&gt;

                  {/* Limitations */}
                  {plan.limitations.length &gt; 0 &amp;&amp; (
                    &lt;div className=&quot;mt-6 pt-6 border-t border-gray-100&quot;&gt;
                      &lt;p className=&quot;text-sm text-gray-500 mb-2&quot;&gt;Limitations:&lt;/p&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {plan.limitations.map((limitation, limitIndex) =&gt; (
                          &lt;li
                            key={limitIndex}
                            className=&quot;text-sm text-gray-500 flex items-start gap-2&quot;
                          &gt;
                            &lt;div className=&quot;w-1 h-1 rounded-full bg-gray-400 mt-2 flex-shrink-0&quot; /&gt;
                            {limitation}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;

                {/* CTA Button */}
                &lt;button
                  onClick={() =&gt; handlePlanClick(plan.name)}
                  className={`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center gap-2 ${
                    plan.popular
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:scale-105 hover:shadow-lg'
                      : 'bg-gray-100 text-gray-900 hover:bg-gray-200'
                  }`}
                &gt;
                  {plan.cta}
                  &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Feature Comparison Table */}
        &lt;div className=&quot;bg-gray-50 rounded-2xl p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;Feature Comparison&lt;/h3&gt;

          &lt;div className=&quot;overflow-x-auto&quot;&gt;
            &lt;table className=&quot;w-full&quot;&gt;
              &lt;thead&gt;
                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                  &lt;th className=&quot;text-left py-4 pr-6 font-semibold text-gray-900&quot;&gt;Features&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Community&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;
                    Professional
                  &lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Enterprise&lt;/th&gt;
                &lt;/tr&gt;
              &lt;/thead&gt;
              &lt;tbody&gt;
                {comparisonFeatures.map((category, categoryIndex) =&gt; (
                  &lt;React.Fragment key={categoryIndex}&gt;
                    &lt;tr&gt;
                      &lt;td
                        colSpan={4}
                        className=&quot;py-4 pr-6 font-semibold text-gray-800 bg-gray-100/50&quot;
                      &gt;
                        {category.category}
                      &lt;/td&gt;
                    &lt;/tr&gt;
                    {category.features.map((feature, featureIndex) =&gt; (
                      &lt;tr key={featureIndex} className=&quot;border-b border-gray-100&quot;&gt;
                        &lt;td className=&quot;py-3 pr-6 text-gray-700&quot;&gt;{feature.name}&lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.community === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.community === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.community}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.pro === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.pro === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.pro}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.enterprise === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.enterprise === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.enterprise}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                      &lt;/tr&gt;
                    ))}
                  &lt;/React.Fragment&gt;
                ))}
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Competitive Pricing Comparison */}
        &lt;div className=&quot;mt-16 bg-white rounded-2xl border border-gray-200 p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;
            How We Compare on{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Pricing
            &lt;/span&gt;
          &lt;/h3&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6&quot;&gt;
            {/* Reporunner */}
            &lt;div className=&quot;bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Reporunner&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-blue-600 mb-2&quot;&gt;$49/user&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Self-hosted + Pro features&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Unlimited executions&lt;/div&gt;
                  &lt;div&gt;✅ All enterprise features&lt;/div&gt;
                  &lt;div&gt;✅ No hidden costs&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Zapier */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Zapier&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$19.99+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud only&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited tasks/month&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Expensive at scale&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Make.com */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Make.com&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$9+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, operations-based&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited operations&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Costs add up quickly&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* n8n */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;n8n&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$20+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Self-hosting option&lt;/div&gt;
                  &lt;div&gt;❌ Limited AI features&lt;/div&gt;
                  &lt;div&gt;❌ Basic collaboration&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* SIM */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;SIM&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;Custom&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Enterprise pricing&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ AI features&lt;/div&gt;
                  &lt;div&gt;❌ Limited self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Higher enterprise cost&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;div className=&quot;mt-6 text-center&quot;&gt;
            &lt;p className=&quot;text-sm text-gray-600&quot;&gt;
              💡 &lt;strong&gt;Reporunner advantage:&lt;/strong&gt; Enterprise features at mid-market pricing
              with complete self-hosting control
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Enterprise CTA */}
        &lt;div className=&quot;mt-16 text-center&quot;&gt;
          &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Need a custom solution for your enterprise?&lt;/h3&gt;
            &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
              We offer custom deployment options, dedicated support, and tailored features for large
              organizations with specific requirements.
            &lt;/p&gt;
            &lt;button
              onClick={() =&gt; navigate('/contact')}
              className=&quot;bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors&quot;
            &gt;
              Contact Enterprise Sales
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/IntegrationEcosystem.tsx (Line 1:1 - Line 284:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/integrationecosystem/IntegrationEcosystem.tsx (Line 2:1 - Line 285:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn335" onclick="toggleCodeBlock('cloneGroup335', 'expandBtn335', 'collapseBtn335')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn335" onclick="toggleCodeBlock('cloneGroup335', 'expandBtn335', 'collapseBtn335')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup335"><code class="language-tsx text-sm text-gray-800">/**
 * Integration Ecosystem Section
 *
 * Showcases the extensive integration library and
 * custom development capabilities
 */

import {
  ArrowRight,
  Calendar,
  Cloud,
  Code,
  Database,
  FileText,
  Grid3X3,
  Mail,
  Plus,
  Search,
  Slack,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';

export const IntegrationEcosystem: React.FC = () =&gt; {
  const [activeCategory, setActiveCategory] = useState('all');

  const categories = [
    { id: 'all', name: 'All Integrations', count: 500 },
    { id: 'communication', name: 'Communication', count: 85 },
    { id: 'productivity', name: 'Productivity', count: 120 },
    { id: 'database', name: 'Database', count: 45 },
    { id: 'ai', name: 'AI &amp; ML', count: 75 },
    { id: 'commerce', name: 'E-commerce', count: 60 },
    { id: 'custom', name: 'Custom', count: 'Unlimited' },
  ];

  const integrations = [
    {
      name: 'Gmail',
      category: 'communication',
      icon: Mail,
      description: 'Send, receive, and manage emails',
      gradient: 'from-red-500 to-red-600',
      popular: true,
    },
    {
      name: 'Slack',
      category: 'communication',
      icon: Slack,
      description: 'Team messaging and notifications',
      gradient: 'from-purple-500 to-purple-600',
      popular: true,
    },
    {
      name: 'PostgreSQL',
      category: 'database',
      icon: Database,
      description: 'Relational database operations',
      gradient: 'from-blue-500 to-blue-600',
      popular: false,
    },
    {
      name: 'Google Sheets',
      category: 'productivity',
      icon: FileText,
      description: 'Spreadsheet automation',
      gradient: 'from-green-500 to-green-600',
      popular: true,
    },
    {
      name: 'Calendar',
      category: 'productivity',
      icon: Calendar,
      description: 'Schedule and event management',
      gradient: 'from-indigo-500 to-indigo-600',
      popular: false,
    },
    {
      name: 'AWS',
      category: 'cloud',
      icon: Cloud,
      description: 'Cloud services integration',
      gradient: 'from-orange-500 to-orange-600',
      popular: true,
    },
    {
      name: 'OpenAI',
      category: 'ai',
      icon: Zap,
      description: 'AI and language models',
      gradient: 'from-purple-500 to-pink-500',
      popular: true,
    },
    {
      name: 'Custom API',
      category: 'custom',
      icon: Code,
      description: 'Build your own integrations',
      gradient: 'from-gray-500 to-gray-600',
      popular: false,
    },
  ];

  const filteredIntegrations =
    activeCategory === 'all'
      ? integrations
      : integrations.filter((integration) =&gt; integration.category === activeCategory);

  const features = [
    {
      icon: Grid3X3,
      title: '500+ Pre-built Integrations',
      description: 'Connect to popular services out of the box with minimal configuration.',
    },
    {
      icon: Code,
      title: 'Custom Node SDK',
      description: 'Build your own integrations with our comprehensive development kit.',
    },
    {
      icon: Zap,
      title: 'API-First Architecture',
      description: 'Every integration is built on our robust API foundation.',
    },
    {
      icon: Plus,
      title: 'Community Marketplace',
      description: 'Share and discover integrations built by the community.',
    },
  ];

  return (
    &lt;section className=&quot;py-20 bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            Connect{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Everything
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            Integrate with 500+ services or build your own custom connections. Our ecosystem grows
            with your needs.
          &lt;/p&gt;
        &lt;/div&gt;

        {/* Feature Grid */}
        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16&quot;&gt;
          {features.map((feature, index) =&gt; {
            const Icon = feature.icon;
            return (
              &lt;div
                key={index}
                className=&quot;bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-lg transition-all hover:-translate-y-1&quot;
              &gt;
                &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 w-12 h-12 rounded-lg flex items-center justify-center mb-4&quot;&gt;
                  &lt;Icon className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;{feature.title}&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{feature.description}&lt;/p&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Integration Browser */}
        &lt;div className=&quot;bg-white rounded-2xl border border-gray-200 shadow-lg overflow-hidden&quot;&gt;
          {/* Browser Header */}
          &lt;div className=&quot;bg-gray-50 border-b border-gray-200 p-6&quot;&gt;
            &lt;div className=&quot;flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4&quot;&gt;
              &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Integration Library&lt;/h3&gt;

              {/* Search Bar */}
              &lt;div className=&quot;relative&quot;&gt;
                &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400&quot; /&gt;
                &lt;input
                  type=&quot;text&quot;
                  placeholder=&quot;Search integrations...&quot;
                  className=&quot;pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Category Tabs */}
            &lt;div className=&quot;flex flex-wrap gap-2 mt-6&quot;&gt;
              {categories.map((category) =&gt; (
                &lt;button
                  key={category.id}
                  onClick={() =&gt; setActiveCategory(category.id)}
                  className={`px-4 py-2 rounded-lg font-medium transition-all ${
                    activeCategory === category.id
                      ? 'bg-blue-600 text-white shadow-lg'
                      : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'
                  }`}
                &gt;
                  {category.name}
                  &lt;span className=&quot;ml-2 text-sm opacity-75&quot;&gt;({category.count})&lt;/span&gt;
                &lt;/button&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Integration Grid */}
          &lt;div className=&quot;p-6&quot;&gt;
            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4&quot;&gt;
              {filteredIntegrations.map((integration, index) =&gt; {
                const Icon = integration.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;group relative bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer&quot;
                  &gt;
                    {/* Popular Badge */}
                    {integration.popular &amp;&amp; (
                      &lt;div className=&quot;absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                        Popular
                      &lt;/div&gt;
                    )}

                    {/* Icon */}
                    &lt;div
                      className={`w-12 h-12 rounded-lg bg-gradient-to-r ${integration.gradient} flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`}
                    &gt;
                      &lt;Icon className=&quot;w-6 h-6 text-white&quot; /&gt;
                    &lt;/div&gt;

                    {/* Content */}
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-1&quot;&gt;{integration.name}&lt;/h4&gt;
                    &lt;p className=&quot;text-sm text-gray-600 mb-3&quot;&gt;{integration.description}&lt;/p&gt;

                    {/* Install Button */}
                    &lt;button className=&quot;w-full bg-gray-50 hover:bg-blue-50 text-gray-700 hover:text-blue-600 py-2 px-3 rounded-lg text-sm font-medium transition-colors group-hover:bg-blue-50 group-hover:text-blue-600&quot;&gt;
                      Install Integration
                    &lt;/button&gt;
                  &lt;/div&gt;
                );
              })}

              {/* Add More Card */}
              &lt;div className=&quot;border-2 border-dashed border-gray-300 rounded-xl p-4 flex flex-col items-center justify-center text-center hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center mb-3&quot;&gt;
                  &lt;Plus className=&quot;w-6 h-6 text-gray-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h4 className=&quot;font-semibold text-gray-700 mb-1&quot;&gt;Need Something Else?&lt;/h4&gt;
                &lt;p className=&quot;text-sm text-gray-500 mb-3&quot;&gt;Build a custom integration&lt;/p&gt;
                &lt;button className=&quot;text-blue-600 hover:text-blue-700 text-sm font-medium&quot;&gt;
                  View SDK
                &lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Load More */}
            &lt;div className=&quot;text-center mt-8&quot;&gt;
              &lt;button className=&quot;inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors&quot;&gt;
                View All Integrations
                &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Custom Integration CTA */}
        &lt;div className=&quot;mt-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white text-center&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Don't See What You Need?&lt;/h3&gt;
          &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
            Build custom integrations with our comprehensive SDK, or let our team create one for
            you. We support any API or service.
          &lt;/p&gt;
          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors&quot;&gt;
              Explore SDK
            &lt;/button&gt;
            &lt;button className=&quot;border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors&quot;&gt;
              Request Integration
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/HeroSection.tsx (Line 41:26 - Line 49:37), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Layout/Layout.tsx (Line 15:56 - Line 23:33)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn336" onclick="toggleCodeBlock('cloneGroup336', 'expandBtn336', 'collapseBtn336')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn336" onclick="toggleCodeBlock('cloneGroup336', 'expandBtn336', 'collapseBtn336')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup336"><code class="language-tsx text-sm text-gray-800">}
      &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
      &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

      {/* Animated Background Orbs */}
      &lt;div className=&quot;absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse&quot; /&gt;
      &lt;div className=&quot;absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000&quot; /&gt;

      &lt;div className=&quot;container mx-auto px-6 relative z-10</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/Header.tsx (Line 1:1 - Line 370:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/header/Header.tsx (Line 8:1 - Line 377:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn338" onclick="toggleCodeBlock('cloneGroup338', 'expandBtn338', 'collapseBtn338')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn338" onclick="toggleCodeBlock('cloneGroup338', 'expandBtn338', 'collapseBtn338')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup338"><code class="language-tsx text-sm text-gray-800">/**
 * Header Component
 *
 * Main navigation header for public pages
 * Similar to headers used by Zapier, Make, n8n, etc.
 */

import {
  ArrowRight,
  ChevronDown,
  ExternalLink,
  LogIn,
  Menu,
  Play,
  Settings,
  User,
  X,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useEffect, useState } from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import { useAuthStore } from '@/core/stores/authStore';

export const Header: React.FC = () =&gt; {
  const navigate = useNavigate();
  const location = useLocation();
  const { isAuthenticated } = useAuthStore();
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [activeDropdown, setActiveDropdown] = useState&lt;string | null&gt;(null);
  const [isScrolled, setIsScrolled] = useState(false);

  // Handle scroll effect
  useEffect(() =&gt; {
    const handleScroll = () =&gt; {
      setIsScrolled(window.scrollY &gt; 20);
    };
    window.addEventListener('scroll', handleScroll);
    return () =&gt; window.removeEventListener('scroll', handleScroll);
  }, []);

  // Close mobile menu on route change
  useEffect(() =&gt; {
    setIsMobileMenuOpen(false);
    setActiveDropdown(null);
  }, []);

  const handleAuth = () =&gt; {
    if (isAuthenticated) {
      navigate('/app/dashboard');
    } else {
      navigate('/login');
    }
  };

  const handleGetStarted = () =&gt; {
    if (isAuthenticated) {
      navigate('/app/dashboard');
    } else {
      navigate('/register');
    }
  };

  const menuItems = [
    {
      label: 'Product',
      items: [
        {
          name: 'Features',
          href: '/features',
          description: 'Comprehensive automation features',
        },
        {
          name: 'Integrations',
          href: '/integrations',
          description: '150+ integrations available',
        },
        {
          name: 'Pricing',
          href: '/pricing',
          description: 'Transparent pricing plans',
        },
        {
          name: 'Enterprise',
          href: '/enterprise',
          description: 'Enterprise-grade solutions',
        },
        {
          name: 'Self-hosted',
          href: '/self-hosted',
          description: 'Deploy anywhere',
        },
        {
          name: 'Roadmap',
          href: '/roadmap',
          description: 'Product development roadmap',
        },
      ],
    },
    {
      label: 'Developers',
      items: [
        {
          name: 'Documentation',
          href: '/documentation',
          description: 'Complete guides and tutorials',
        },
        {
          name: 'API Reference',
          href: '/api-reference',
          description: 'REST API documentation',
        },
        {
          name: 'Node SDK',
          href: '/documentation',
          description: 'Build custom nodes',
        },
        {
          name: 'Examples',
          href: '/documentation',
          description: 'Code examples and templates',
        },
        {
          name: 'GitHub',
          href: 'https://github.com/reporunner/reporunner',
          description: 'Open source repository',
          external: true,
        },
        {
          name: 'Community',
          href: '/contact',
          description: 'Join our community',
        },
      ],
    },
    {
      label: 'Resources',
      items: [
        {
          name: 'Blog',
          href: '/documentation',
          description: 'Latest insights and tutorials',
        },
        {
          name: 'Case Studies',
          href: '/about',
          description: 'Customer success stories',
        },
        {
          name: 'Help Center',
          href: '/documentation',
          description: 'Support documentation',
        },
        {
          name: 'Status',
          href: 'https://status.reporunner.dev',
          description: 'System status',
          external: true,
        },
      ],
    },
    {
      label: 'Company',
      items: [
        { name: 'About', href: '/about', description: 'Our story and mission' },
        { name: 'Contact', href: '/contact', description: 'Get in touch' },
        { name: 'Careers', href: '/about', description: 'Join our team' },
      ],
    },
  ];

  const isActivePage = (href: string) =&gt; {
    if (href === '/' &amp;&amp; location.pathname === '/') return true;
    if (href !== '/' &amp;&amp; location.pathname.startsWith(href)) return true;
    return false;
  };

  return (
    &lt;header
      className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${
        isScrolled
          ? 'bg-white/95 backdrop-blur-md shadow-lg border-b border-gray-200/50'
          : 'bg-white/80 backdrop-blur-sm'
      }`}
    &gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between h-16&quot;&gt;
          {/* Logo */}
          &lt;Link to=&quot;/&quot; className=&quot;flex items-center gap-3 group&quot;&gt;
            &lt;div className=&quot;w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center&quot;&gt;
              &lt;Zap className=&quot;w-5 h-5 text-white&quot; /&gt;
            &lt;/div&gt;
            &lt;span className=&quot;text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Reporunner
            &lt;/span&gt;
          &lt;/Link&gt;

          {/* Desktop Navigation */}
          &lt;nav className=&quot;hidden lg:flex items-center space-x-8&quot;&gt;
            {menuItems.map((menu, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;relative group&quot;
                onMouseEnter={() =&gt; setActiveDropdown(menu.label)}
                onMouseLeave={() =&gt; setActiveDropdown(null)}
              &gt;
                &lt;button className=&quot;flex items-center gap-1 text-gray-700 hover:text-blue-600 font-medium transition-colors py-2&quot;&gt;
                  {menu.label}
                  &lt;ChevronDown className=&quot;w-4 h-4&quot; /&gt;
                &lt;/button&gt;

                {/* Dropdown */}
                {activeDropdown === menu.label &amp;&amp; (
                  &lt;div className=&quot;absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-200 py-4 z-50&quot;&gt;
                    &lt;div className=&quot;px-4 pb-2 mb-2 border-b border-gray-100&quot;&gt;
                      &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{menu.label}&lt;/h3&gt;
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className=&quot;flex items-start gap-3 px-4 py-3 hover:bg-gray-50 transition-colors group&quot;
                      &gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-gray-900 group-hover:text-blue-600&quot;&gt;
                              {item.name}
                            &lt;/span&gt;
                            {item.external &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3 text-gray-400&quot; /&gt;}
                          &lt;/div&gt;
                          &lt;p className=&quot;text-sm text-gray-500 mt-1&quot;&gt;{item.description}&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;ArrowRight className=&quot;w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity mt-1&quot; /&gt;
                      &lt;/Link&gt;
                    ))}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            ))}
          &lt;/nav&gt;

          {/* Auth Buttons */}
          &lt;div className=&quot;hidden lg:flex items-center gap-3&quot;&gt;
            {isAuthenticated ? (
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/dashboard')}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;User className=&quot;w-4 h-4&quot; /&gt;
                  Dashboard
                &lt;/button&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/settings')}
                  className=&quot;p-2 text-gray-500 hover:text-gray-700 transition-colors&quot;
                  title=&quot;Settings&quot;
                &gt;
                  &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            ) : (
              &lt;&gt;
                &lt;button
                  onClick={handleAuth}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;LogIn className=&quot;w-4 h-4&quot; /&gt;
                  Sign In
                &lt;/button&gt;
                &lt;button
                  onClick={handleGetStarted}
                  className=&quot;flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all hover:scale-105&quot;
                &gt;
                  &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                  Get Started
                &lt;/button&gt;
              &lt;/&gt;
            )}
          &lt;/div&gt;

          {/* Mobile Menu Button */}
          &lt;button
            onClick={() =&gt; setIsMobileMenuOpen(!isMobileMenuOpen)}
            className=&quot;lg:hidden p-2 text-gray-700 hover:text-blue-600 transition-colors&quot;
          &gt;
            {isMobileMenuOpen ? &lt;X className=&quot;w-6 h-6&quot; /&gt; : &lt;Menu className=&quot;w-6 h-6&quot; /&gt;}
          &lt;/button&gt;
        &lt;/div&gt;

        {/* Mobile Menu */}
        {isMobileMenuOpen &amp;&amp; (
          &lt;div className=&quot;lg:hidden border-t border-gray-200 bg-white/95 backdrop-blur-md&quot;&gt;
            &lt;div className=&quot;py-4&quot;&gt;
              {/* Auth Section */}
              &lt;div className=&quot;px-4 py-4 border-b border-gray-200&quot;&gt;
                {isAuthenticated ? (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/dashboard')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;User className=&quot;w-5 h-5&quot; /&gt;
                      Dashboard
                    &lt;/button&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/settings')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                      Settings
                    &lt;/button&gt;
                  &lt;/div&gt;
                ) : (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={handleAuth}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;LogIn className=&quot;w-5 h-5&quot; /&gt;
                      Sign In
                    &lt;/button&gt;
                    &lt;button
                      onClick={handleGetStarted}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all&quot;
                    &gt;
                      &lt;Play className=&quot;w-5 h-5&quot; /&gt;
                      Get Started
                    &lt;/button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;

              {/* Navigation Menu */}
              &lt;div className=&quot;space-y-1 px-4 pt-4&quot;&gt;
                {menuItems.map((menu, index) =&gt; (
                  &lt;div key={index} className=&quot;space-y-1&quot;&gt;
                    &lt;div className=&quot;px-4 py-2 font-semibold text-gray-900 text-sm uppercase tracking-wide&quot;&gt;
                      {menu.label}
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className={`block px-4 py-3 rounded-lg transition-colors ${
                          isActivePage(item.href)
                            ? 'bg-blue-50 text-blue-600 font-medium'
                            : 'text-gray-700 hover:bg-gray-50'
                        }`}
                      &gt;
                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                          {item.name}
                          {item.external &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3 text-gray-400&quot; /&gt;}
                        &lt;/div&gt;
                        &lt;div className=&quot;text-sm text-gray-500 mt-1&quot;&gt;{item.description}&lt;/div&gt;
                      &lt;/Link&gt;
                    ))}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/header&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/Footer.tsx (Line 1:1 - Line 246:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/footer/Footer.tsx (Line 1:1 - Line 246:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn339" onclick="toggleCodeBlock('cloneGroup339', 'expandBtn339', 'collapseBtn339')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn339" onclick="toggleCodeBlock('cloneGroup339', 'expandBtn339', 'collapseBtn339')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup339"><code class="language-tsx text-sm text-gray-800">/**
 * Footer Component
 *
 * Comprehensive footer with links, social proof,
 * and additional conversion opportunities
 */

import {
  ArrowRight,
  ExternalLink,
  Github,
  Linkedin,
  Mail,
  MapPin,
  Phone,
  Slack,
  Twitter,
} from 'lucide-react';
import type React from 'react';

export const Footer: React.FC = () =&gt; {
  const footerSections = [
    {
      title: 'Product',
      links: [
        { name: 'Features', href: '/features' },
        { name: 'Integrations', href: '/integrations' },
        { name: 'Pricing', href: '/pricing' },
        { name: 'Enterprise', href: '/enterprise' },
        { name: 'Self-hosted', href: '/self-hosted' },
        { name: 'Roadmap', href: '/roadmap' },
      ],
    },
    {
      title: 'Developers',
      links: [
        { name: 'Documentation', href: '/documentation' },
        { name: 'API Reference', href: '/api-reference' },
        { name: 'Node SDK', href: '/documentation' },
        { name: 'Examples', href: '/documentation' },
        {
          name: 'GitHub',
          href: 'https://github.com/reporunner/reporunner',
          external: true,
        },
        { name: 'Community', href: '/contact' },
      ],
    },
    {
      title: 'Resources',
      links: [
        { name: 'Blog', href: '/documentation' },
        { name: 'Case Studies', href: '/about' },
        { name: 'Tutorials', href: '/documentation' },
        { name: 'Webinars', href: '/contact' },
        { name: 'Help Center', href: '/documentation' },
        {
          name: 'Status Page',
          href: 'https://status.reporunner.dev',
          external: true,
        },
      ],
    },
    {
      title: 'Company',
      links: [
        { name: 'About', href: '/about' },
        { name: 'Careers', href: '/about' },
        { name: 'Contact', href: '/contact' },
        { name: 'Security', href: '/enterprise' },
        { name: 'Privacy', href: '/privacy' },
        { name: 'Terms', href: '/terms' },
      ],
    },
  ];

  const socialLinks = [
    {
      name: 'GitHub',
      icon: Github,
      href: 'https://github.com/reporunner/reporunner',
      followers: '2.5K',
    },
    {
      name: 'Twitter',
      icon: Twitter,
      href: 'https://twitter.com/reporunner',
      followers: '8.2K',
    },
    {
      name: 'LinkedIn',
      icon: Linkedin,
      href: 'https://linkedin.com/company/reporunner',
      followers: '5.1K',
    },
    { name: 'Slack', icon: Slack, href: '/contact', followers: '3.8K' },
  ];

  return (
    &lt;footer className=&quot;bg-gray-900 text-white&quot;&gt;
      {/* Newsletter Section */}
      &lt;div className=&quot;border-b border-gray-800&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 py-12&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Stay Updated with Reporunner&lt;/h3&gt;
            &lt;p className=&quot;text-gray-400 mb-8 max-w-2xl mx-auto&quot;&gt;
              Get the latest updates on new features, integrations, and enterprise capabilities.
              Join our newsletter for exclusive insights and early access.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 max-w-md mx-auto&quot;&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;input
                  type=&quot;email&quot;
                  placeholder=&quot;Enter your email&quot;
                  className=&quot;w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-gray-400&quot;
                /&gt;
              &lt;/div&gt;
              &lt;button className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center gap-2&quot;&gt;
                Subscribe
                &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
              &lt;/button&gt;
            &lt;/div&gt;

            &lt;p className=&quot;text-xs text-gray-500 mt-4&quot;&gt;No spam. Unsubscribe at any time.&lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Main Footer Content */}
      &lt;div className=&quot;container mx-auto px-6 py-16&quot;&gt;
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-6 gap-12&quot;&gt;
          {/* Brand Section */}
          &lt;div className=&quot;lg:col-span-2&quot;&gt;
            &lt;div className=&quot;mb-6&quot;&gt;
              &lt;h2 className=&quot;text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Reporunner
              &lt;/h2&gt;
              &lt;p className=&quot;text-gray-400 mt-2&quot;&gt;
                Enterprise-grade workflow automation with AI capabilities
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;p className=&quot;text-gray-400 mb-6 leading-relaxed&quot;&gt;
              Build powerful automations with AI intelligence, enterprise security, and complete
              data sovereignty. Deploy anywhere, control everything.
            &lt;/p&gt;

            {/* Contact Info */}
            &lt;div className=&quot;space-y-3 mb-6&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 text-gray-400&quot;&gt;
                &lt;Mail className=&quot;w-4 h-4&quot; /&gt;
                &lt;span className=&quot;text-sm&quot;&gt;hello@reporunner.dev&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-gray-400&quot;&gt;
                &lt;Phone className=&quot;w-4 h-4&quot; /&gt;
                &lt;span className=&quot;text-sm&quot;&gt;+1 (555) 123-4567&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-gray-400&quot;&gt;
                &lt;MapPin className=&quot;w-4 h-4&quot; /&gt;
                &lt;span className=&quot;text-sm&quot;&gt;San Francisco, CA&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Social Links */}
            &lt;div className=&quot;flex gap-4&quot;&gt;
              {socialLinks.map((social, index) =&gt; {
                const Icon = social.icon;
                return (
                  &lt;a
                    key={index}
                    href={social.href}
                    className=&quot;group flex items-center gap-2 bg-gray-800 hover:bg-gray-700 p-2 rounded-lg transition-colors&quot;
                    title={`${social.name} (${social.followers} followers)`}
                  &gt;
                    &lt;Icon className=&quot;w-5 h-5 text-gray-400 group-hover:text-white transition-colors&quot; /&gt;
                  &lt;/a&gt;
                );
              })}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Footer Links */}
          {footerSections.map((section, index) =&gt; (
            &lt;div key={index} className=&quot;lg:col-span-1&quot;&gt;
              &lt;h4 className=&quot;font-semibold text-white mb-6&quot;&gt;{section.title}&lt;/h4&gt;
              &lt;ul className=&quot;space-y-3&quot;&gt;
                {section.links.map((link, linkIndex) =&gt; (
                  &lt;li key={linkIndex}&gt;
                    &lt;a
                      href={link.href}
                      className=&quot;text-gray-400 hover:text-white transition-colors flex items-center gap-1 group&quot;
                    &gt;
                      {link.name}
                      {link.external &amp;&amp; (
                        &lt;ExternalLink className=&quot;w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity&quot; /&gt;
                      )}
                    &lt;/a&gt;
                  &lt;/li&gt;
                ))}
              &lt;/ul&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Bottom Bar */}
      &lt;div className=&quot;border-t border-gray-800&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 py-6&quot;&gt;
          &lt;div className=&quot;flex flex-col md:flex-row justify-between items-center gap-4&quot;&gt;
            &lt;div className=&quot;flex flex-col md:flex-row items-center gap-4&quot;&gt;
              &lt;p className=&quot;text-gray-400 text-sm&quot;&gt;© 2025 Reporunner. All rights reserved.&lt;/p&gt;
              &lt;div className=&quot;flex gap-6 text-sm&quot;&gt;
                &lt;a href=&quot;/privacy&quot; className=&quot;text-gray-400 hover:text-white transition-colors&quot;&gt;
                  Privacy Policy
                &lt;/a&gt;
                &lt;a href=&quot;/terms&quot; className=&quot;text-gray-400 hover:text-white transition-colors&quot;&gt;
                  Terms of Service
                &lt;/a&gt;
                &lt;a href=&quot;/enterprise&quot; className=&quot;text-gray-400 hover:text-white transition-colors&quot;&gt;
                  Security
                &lt;/a&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex items-center gap-4&quot;&gt;
              &lt;div className=&quot;flex items-center gap-2 text-gray-400 text-sm&quot;&gt;
                &lt;div className=&quot;w-2 h-2 bg-green-500 rounded-full animate-pulse&quot; /&gt;
                &lt;span&gt;All systems operational&lt;/span&gt;
              &lt;/div&gt;
              &lt;a
                href=&quot;https://status.reporunner.dev&quot;
                className=&quot;text-gray-400 hover:text-white text-sm transition-colors flex items-center gap-1&quot;
                target=&quot;_blank&quot;
                rel=&quot;noopener noreferrer&quot;
              &gt;
                Status
                &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
              &lt;/a&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/footer&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/FeatureShowcase.tsx (Line 1:1 - Line 460:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/featureshowcase/FeatureShowcase.tsx (Line 2:1 - Line 461:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn341" onclick="toggleCodeBlock('cloneGroup341', 'expandBtn341', 'collapseBtn341')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn341" onclick="toggleCodeBlock('cloneGroup341', 'expandBtn341', 'collapseBtn341')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup341"><code class="language-tsx text-sm text-gray-800">/**
 * Feature Showcase Section
 *
 * Interactive demos of key Reporunner features with modern UI
 * and engaging animations
 */

import {
  ArrowRight,
  BarChart3,
  Brain,
  GitBranch,
  Play,
  Shield,
  Users,
  Workflow,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';

type DemoElement =
  | { type: 'node'; label: string; x: number; y: number; color: string }
  | { type: 'connection'; from: number; to: number }
  | { type: 'user'; name: string; x: number; y: number; color: string }
  | { type: 'edit'; x: number; y: number; user: string }
  | { type: 'chart'; x: number; y: number; width: number; height: number }
  | { type: 'metric'; label: string; x: number; y: number }
  | { type: 'ai-node'; label: string; x: number; y: number; color: string }
  | { type: 'insight'; label: string; x: number; y: number; color: string };

export const FeatureShowcase: React.FC = () =&gt; {
  const [activeFeature, setActiveFeature] = useState(0);

  const features: Array&lt;{
    id: number;
    icon: any;
    title: string;
    subtitle: string;
    description: string;
    image: string;
    highlights: string[];
    demoElements?: DemoElement[];
  }&gt; = [
    {
      id: 0,
      icon: Workflow,
      title: 'Visual Workflow Builder',
      subtitle: 'Drag-and-drop simplicity',
      description:
        'Create complex automations with our intuitive visual editor. Connect 500+ integrations with simple drag-and-drop operations.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Drag-and-drop interface',
        '500+ pre-built integrations',
        'Real-time validation',
        'Auto-connection suggestions',
      ],
      demoElements: [
        {
          type: 'node',
          label: 'Gmail Trigger',
          x: 100,
          y: 150,
          color: 'bg-red-500',
        },
        {
          type: 'node',
          label: 'AI Processor',
          x: 300,
          y: 150,
          color: 'bg-blue-500',
        },
        {
          type: 'node',
          label: 'Slack Action',
          x: 500,
          y: 150,
          color: 'bg-green-500',
        },
        { type: 'connection', from: 0, to: 1 },
        { type: 'connection', from: 1, to: 2 },
      ],
    },
    {
      id: 1,
      icon: Brain,
      title: 'AI-Powered Automation',
      subtitle: 'Intelligent workflows',
      description:
        'Leverage AI for smart error recovery, pattern recognition, and optimization suggestions. Your workflows learn and improve over time.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Smart error recovery',
        'Pattern recognition',
        'Auto-optimization',
        'Natural language queries',
      ],
      demoElements: [
        {
          type: 'ai-node',
          label: 'AI Agent',
          x: 250,
          y: 100,
          color: 'bg-purple-500',
        },
        {
          type: 'insight',
          label: 'Optimized execution path',
          x: 350,
          y: 50,
          color: 'text-green-500',
        },
        {
          type: 'insight',
          label: 'Error pattern detected',
          x: 150,
          y: 200,
          color: 'text-red-500',
        },
      ],
    },
    {
      id: 2,
      icon: Users,
      title: 'Enterprise Collaboration',
      subtitle: 'Team workflows',
      description:
        'Real-time collaborative editing, version control, and enterprise-grade permissions. Build workflows as a team.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Real-time collaboration',
        'Version control',
        'Role-based permissions',
        'Audit trails',
      ],
      demoElements: [
        { type: 'user', name: 'Alice', x: 100, y: 80, color: 'bg-blue-500' },
        { type: 'user', name: 'Bob', x: 200, y: 120, color: 'bg-green-500' },
        { type: 'user', name: 'Carol', x: 300, y: 90, color: 'bg-purple-500' },
        { type: 'edit', x: 150, y: 200, user: 'Alice' },
      ],
    },
    {
      id: 3,
      icon: BarChart3,
      title: 'Advanced Analytics',
      subtitle: 'Performance insights',
      description:
        'Deep insights into workflow performance, cost optimization, and usage patterns. Make data-driven decisions.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Performance monitoring',
        'Cost optimization',
        'Usage analytics',
        'Custom dashboards',
      ],
      demoElements: [
        { type: 'chart', x: 150, y: 100, width: 300, height: 150 },
        { type: 'metric', label: '99.9% Uptime', x: 100, y: 50 },
        { type: 'metric', label: '2.3s Avg Response', x: 350, y: 50 },
      ],
    },
  ];

  const currentFeature = features[activeFeature];

  return (
    &lt;section className=&quot;py-20 bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            See Reporunner{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              in Action
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            Experience the power of enterprise workflow automation with interactive demos of our key
            features and capabilities.
          &lt;/p&gt;
        &lt;/div&gt;

        &lt;div className=&quot;max-w-7xl mx-auto&quot;&gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-12 items-center&quot;&gt;
            {/* Feature Tabs */}
            &lt;div className=&quot;space-y-4&quot;&gt;
              {features.map((feature, index) =&gt; {
                const Icon = feature.icon;
                const isActive = activeFeature === index;

                return (
                  &lt;div
                    key={feature.id}
                    className={`cursor-pointer transition-all duration-300 rounded-xl p-6 border-2 ${
                      isActive
                        ? 'border-blue-500 bg-white shadow-lg shadow-blue-500/10'
                        : 'border-gray-200 bg-white/50 hover:border-gray-300 hover:bg-white'
                    }`}
                    onClick={() =&gt; setActiveFeature(index)}
                  &gt;
                    &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                      {/* Icon */}
                      &lt;div
                        className={`w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 ${
                          isActive
                            ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white'
                            : 'bg-gray-100 text-gray-600'
                        }`}
                      &gt;
                        &lt;Icon className=&quot;w-6 h-6&quot; /&gt;
                      &lt;/div&gt;

                      {/* Content */}
                      &lt;div className=&quot;flex-1&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                          &lt;h3
                            className={`text-xl font-bold transition-colors ${
                              isActive ? 'text-blue-600' : 'text-gray-900'
                            }`}
                          &gt;
                            {feature.title}
                          &lt;/h3&gt;
                          {isActive &amp;&amp; (
                            &lt;div className=&quot;flex items-center gap-1 text-sm text-blue-600 font-medium&quot;&gt;
                              &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                              Live Demo
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;

                        &lt;p className=&quot;text-sm text-gray-500 mb-3&quot;&gt;{feature.subtitle}&lt;/p&gt;
                        &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;

                        {/* Highlights */}
                        &lt;div className=&quot;grid grid-cols-2 gap-2&quot;&gt;
                          {feature.highlights.map((highlight, i) =&gt; (
                            &lt;div key={i} className=&quot;flex items-center gap-2 text-sm text-gray-600&quot;&gt;
                              &lt;div
                                className={`w-1.5 h-1.5 rounded-full ${
                                  isActive ? 'bg-blue-500' : 'bg-gray-400'
                                }`}
                              /&gt;
                              {highlight}
                            &lt;/div&gt;
                          ))}
                        &lt;/div&gt;

                        {/* Try It Button */}
                        {isActive &amp;&amp; (
                          &lt;div className=&quot;mt-4 pt-4 border-t border-gray-100&quot;&gt;
                            &lt;button className=&quot;group flex items-center gap-2 text-blue-600 font-medium text-sm hover:text-blue-700 transition-colors&quot;&gt;
                              Try this feature
                              &lt;ArrowRight className=&quot;w-4 h-4 transition-transform group-hover:translate-x-1&quot; /&gt;
                            &lt;/button&gt;
                          &lt;/div&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;

            {/* Interactive Demo Area */}
            &lt;div className=&quot;bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden&quot;&gt;
              {/* Demo Header */}
              &lt;div className=&quot;bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                  &lt;div className=&quot;flex gap-2&quot;&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-red-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-yellow-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-green-400&quot; /&gt;
                  &lt;/div&gt;
                  &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;
                    {currentFeature.title} Demo
                  &lt;/span&gt;
                  &lt;div className=&quot;ml-auto flex items-center gap-2 text-xs text-gray-500&quot;&gt;
                    &lt;div className=&quot;w-2 h-2 rounded-full bg-green-500 animate-pulse&quot; /&gt;
                    Live Demo
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Demo Content */}
              &lt;div className=&quot;relative h-96 bg-gradient-to-br from-slate-50 to-blue-50 p-6&quot;&gt;
                {/* Render demo elements based on feature type */}
                {currentFeature.id === 0 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* Workflow nodes */}
                    {currentFeature.demoElements?.map((element, i) =&gt; {
                      if (element.type === 'node') {
                        return (
                          &lt;div
                            key={i}
                            className={`absolute w-24 h-16 ${element.color} rounded-lg flex items-center justify-center text-white text-xs font-medium shadow-lg transform transition-all duration-1000 hover:scale-110`}
                            style={{
                              left: `${element.x}px`,
                              top: `${element.y}px`,
                              animationDelay: `${i * 200}ms`,
                            }}
                          &gt;
                            {element.label}
                          &lt;/div&gt;
                        );
                      }
                      return null;
                    })}

                    {/* Connections */}
                    &lt;svg className=&quot;absolute inset-0 w-full h-full pointer-events-none&quot;&gt;
                      &lt;defs&gt;
                        &lt;marker
                          id=&quot;arrowhead&quot;
                          markerWidth=&quot;10&quot;
                          markerHeight=&quot;7&quot;
                          refX=&quot;9&quot;
                          refY=&quot;3.5&quot;
                          orient=&quot;auto&quot;
                        &gt;
                          &lt;polygon points=&quot;0 0, 10 3.5, 0 7&quot; fill=&quot;#6366f1&quot; /&gt;
                        &lt;/marker&gt;
                      &lt;/defs&gt;
                      &lt;path
                        d=&quot;M 150 167 Q 200 167 250 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                      /&gt;
                      &lt;path
                        d=&quot;M 350 167 Q 400 167 450 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                        style={{ animationDelay: '500ms' }}
                      /&gt;
                    &lt;/svg&gt;
                  &lt;/div&gt;
                )}

                {/* AI Feature Demo */}
                {currentFeature.id === 1 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    &lt;div className=&quot;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2&quot;&gt;
                      &lt;div className=&quot;w-32 h-32 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center shadow-xl animate-pulse&quot;&gt;
                        &lt;Brain className=&quot;w-16 h-16 text-white&quot; /&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    {/* AI Insights */}
                    &lt;div className=&quot;absolute top-12 right-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-2 text-sm&quot;&gt;
                        &lt;Zap className=&quot;w-4 h-4 text-yellow-500&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;Performance optimized&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div
                      className=&quot;absolute bottom-12 left-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;
                      style={{ animationDelay: '1s' }}
                    &gt;
                      &lt;div className=&quot;flex items-center gap-2 text-sm&quot;&gt;
                        &lt;Shield className=&quot;w-4 h-4 text-green-500&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;Error pattern detected&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Collaboration Demo */}
                {currentFeature.id === 2 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* User avatars */}
                    &lt;div className=&quot;absolute top-8 left-8 flex -space-x-2&quot;&gt;
                      {['Alice', 'Bob', 'Carol'].map((name, i) =&gt; (
                        &lt;div
                          key={name}
                          className={`w-10 h-10 rounded-full bg-gradient-to-r ${
                            i === 0
                              ? 'from-blue-500 to-blue-600'
                              : i === 1
                                ? 'from-green-500 to-green-600'
                                : 'from-purple-500 to-purple-600'
                          } flex items-center justify-center text-white font-bold text-sm border-2 border-white shadow-lg`}
                          style={{ animationDelay: `${i * 300}ms` }}
                        &gt;
                          {name[0]}
                        &lt;/div&gt;
                      ))}
                    &lt;/div&gt;

                    {/* Collaboration indicator */}
                    &lt;div className=&quot;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2&quot;&gt;
                      &lt;div className=&quot;bg-white rounded-xl shadow-xl p-6 border border-gray-200&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-3 mb-4&quot;&gt;
                          &lt;GitBranch className=&quot;w-6 h-6 text-blue-500&quot; /&gt;
                          &lt;span className=&quot;font-semibold text-gray-800&quot;&gt;Live Collaboration&lt;/span&gt;
                        &lt;/div&gt;
                        &lt;div className=&quot;space-y-2 text-sm text-gray-600&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 rounded-full bg-green-500&quot; /&gt;
                            Alice is editing workflow
                          &lt;/div&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 rounded-full bg-blue-500&quot; /&gt;
                            Bob added a comment
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Analytics Demo */}
                {currentFeature.id === 3 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* Mock chart */}
                    &lt;div className=&quot;absolute inset-0 p-8&quot;&gt;
                      &lt;div className=&quot;bg-white rounded-lg shadow-lg p-4 h-full&quot;&gt;
                        &lt;h4 className=&quot;font-semibold text-gray-800 mb-4&quot;&gt;Workflow Performance&lt;/h4&gt;
                        &lt;div className=&quot;h-32 bg-gradient-to-t from-blue-100 to-blue-50 rounded mb-4 relative overflow-hidden&quot;&gt;
                          &lt;div className=&quot;absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-blue-500 to-blue-400 rounded animate-pulse&quot; /&gt;
                        &lt;/div&gt;
                        &lt;div className=&quot;grid grid-cols-2 gap-4 text-sm&quot;&gt;
                          &lt;div className=&quot;bg-green-50 rounded p-2&quot;&gt;
                            &lt;div className=&quot;text-green-600 font-bold&quot;&gt;99.9%&lt;/div&gt;
                            &lt;div className=&quot;text-gray-600&quot;&gt;Uptime&lt;/div&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;bg-blue-50 rounded p-2&quot;&gt;
                            &lt;div className=&quot;text-blue-600 font-bold&quot;&gt;2.3s&lt;/div&gt;
                            &lt;div className=&quot;text-gray-600&quot;&gt;Avg Response&lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;

              {/* Demo Footer */}
              &lt;div className=&quot;bg-gray-50 px-6 py-4 border-t border-gray-200&quot;&gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Interactive demo • Click to explore&lt;/span&gt;
                  &lt;button className=&quot;bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors&quot;&gt;
                    Try Full Demo
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/EnterpriseFeatures.tsx (Line 1:1 - Line 220:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/enterprisefeatures/EnterpriseFeatures.tsx (Line 1:1 - Line 220:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn342" onclick="toggleCodeBlock('cloneGroup342', 'expandBtn342', 'collapseBtn342')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn342" onclick="toggleCodeBlock('cloneGroup342', 'expandBtn342', 'collapseBtn342')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup342"><code class="language-tsx text-sm text-gray-800">/**
 * Enterprise Features Section
 *
 * Highlights enterprise-specific capabilities and
 * compliance features for large organizations
 */

import { BarChart3, CheckCircle, Clock, Globe, Shield, Users, Zap } from 'lucide-react';
import type React from 'react';

export const EnterpriseFeatures: React.FC = () =&gt; {
  const features = [
    {
      icon: Shield,
      title: 'Security &amp; Compliance',
      description:
        'Enterprise-grade security with SOC2, GDPR, and HIPAA compliance out of the box.',
      details: [
        'End-to-end encryption',
        'Regular security audits',
        'Compliance reporting',
        'Data residency controls',
      ],
      gradient: 'from-green-500 to-emerald-500',
    },
    {
      icon: Users,
      title: 'Advanced User Management',
      description:
        'Sophisticated RBAC, SSO integration, and user provisioning for enterprise teams.',
      details: [
        'SAML/SSO integration',
        'Granular permissions',
        'User provisioning',
        'Audit trails',
      ],
      gradient: 'from-blue-500 to-cyan-500',
    },
    {
      icon: Globe,
      title: 'Multi-Tenant Architecture',
      description:
        'Complete isolation between organizations with dedicated resources and configurations.',
      details: [
        'Organization isolation',
        'Resource quotas',
        'Custom branding',
        'Dedicated environments',
      ],
      gradient: 'from-purple-500 to-pink-500',
    },
    {
      icon: BarChart3,
      title: 'Enterprise Analytics',
      description: 'Deep insights into usage patterns, performance metrics, and cost optimization.',
      details: [
        'Usage analytics',
        'Performance monitoring',
        'Cost optimization',
        'Custom reporting',
      ],
      gradient: 'from-orange-500 to-red-500',
    },
  ];

  const capabilities = [
    {
      category: 'Deployment &amp; Infrastructure',
      items: [
        { name: 'Kubernetes Support', included: true },
        { name: 'Auto-scaling', included: true },
        { name: 'High Availability', included: true },
        { name: 'Disaster Recovery', included: true },
        { name: 'Multi-region Deployment', included: true },
        { name: 'Custom Infrastructure', included: true },
      ],
    },
    {
      category: 'Security &amp; Compliance',
      items: [
        { name: 'SOC2 Type II', included: true },
        { name: 'GDPR Compliance', included: true },
        { name: 'HIPAA Compliance', included: true },
        { name: 'ISO 27001', included: true },
        { name: 'Data Encryption', included: true },
        { name: 'Audit Logging', included: true },
      ],
    },
    {
      category: 'Support &amp; Services',
      items: [
        { name: '24/7 Priority Support', included: true },
        { name: 'Dedicated Success Manager', included: true },
        { name: 'Custom Training', included: true },
        { name: 'Professional Services', included: true },
        { name: 'SLA Guarantees', included: true },
        { name: 'Priority Bug Fixes', included: true },
      ],
    },
  ];

  return (
    &lt;section className=&quot;py-20 bg-white&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            Built for{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Enterprise Scale
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            Enterprise-grade features, security, and support that scales with your organization.
            Everything you need to deploy mission-critical workflows with confidence.
          &lt;/p&gt;
        &lt;/div&gt;

        {/* Main Features Grid */}
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-8 mb-20&quot;&gt;
          {features.map((feature, index) =&gt; {
            const Icon = feature.icon;
            return (
              &lt;div
                key={index}
                className=&quot;group bg-white rounded-2xl border border-gray-200 p-8 hover:shadow-xl hover:shadow-gray-200/50 transition-all duration-300&quot;
              &gt;
                {/* Icon &amp; Title */}
                &lt;div className=&quot;flex items-start gap-4 mb-6&quot;&gt;
                  &lt;div
                    className={`w-16 h-16 rounded-xl bg-gradient-to-r ${feature.gradient} flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform`}
                  &gt;
                    &lt;Icon className=&quot;w-8 h-8 text-white&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{feature.title}&lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600 leading-relaxed&quot;&gt;{feature.description}&lt;/p&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Feature Details */}
                &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
                  {feature.details.map((detail, detailIndex) =&gt; (
                    &lt;div key={detailIndex} className=&quot;flex items-center gap-2&quot;&gt;
                      &lt;CheckCircle className=&quot;w-4 h-4 text-green-500 flex-shrink-0&quot; /&gt;
                      &lt;span className=&quot;text-sm text-gray-700&quot;&gt;{detail}&lt;/span&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Enterprise Capabilities Table */}
        &lt;div className=&quot;bg-gray-50 rounded-2xl p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;
            Enterprise Capabilities Overview
          &lt;/h3&gt;

          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8&quot;&gt;
            {capabilities.map((category, categoryIndex) =&gt; (
              &lt;div key={categoryIndex} className=&quot;bg-white rounded-xl p-6 border border-gray-200&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-4 pb-3 border-b border-gray-100&quot;&gt;
                  {category.category}
                &lt;/h4&gt;
                &lt;div className=&quot;space-y-3&quot;&gt;
                  {category.items.map((item, itemIndex) =&gt; (
                    &lt;div key={itemIndex} className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;CheckCircle className=&quot;w-5 h-5 text-green-500 flex-shrink-0&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{item.name}&lt;/span&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Performance Metrics */}
        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-4 gap-6 mt-16&quot;&gt;
          {[
            { metric: '99.9%', label: 'Uptime SLA', icon: Clock },
            { metric: '&lt;100ms', label: 'API Response Time', icon: Zap },
            { metric: '10M+', label: 'Workflows Executed', icon: BarChart3 },
            { metric: '24/7', label: 'Enterprise Support', icon: Shield },
          ].map((stat, index) =&gt; {
            const Icon = stat.icon;
            return (
              &lt;div key={index} className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-lg transition-all&quot;&gt;
                  &lt;Icon className=&quot;w-8 h-8 text-blue-600 mx-auto mb-3&quot; /&gt;
                  &lt;div className=&quot;text-3xl font-bold text-gray-900 mb-1&quot;&gt;{stat.metric}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-600&quot;&gt;{stat.label}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Enterprise CTA */}
        &lt;div className=&quot;mt-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white text-center&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Ready to Scale Your Enterprise Workflows?&lt;/h3&gt;
          &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
            Join enterprise customers who trust Reporunner for their mission-critical automation
            needs. Get dedicated support and custom deployment options.
          &lt;/p&gt;
          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors&quot;&gt;
              Schedule Enterprise Demo
            &lt;/button&gt;
            &lt;button className=&quot;border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors&quot;&gt;
              Contact Sales Team
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/ComparisonTable.tsx (Line 1:1 - Line 511:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/comparisontable/ComparisonTable.tsx (Line 1:1 - Line 511:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn344" onclick="toggleCodeBlock('cloneGroup344', 'expandBtn344', 'collapseBtn344')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn344" onclick="toggleCodeBlock('cloneGroup344', 'expandBtn344', 'collapseBtn344')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup344"><code class="language-tsx text-sm text-gray-800">/**
 * Comparison Table Section
 *
 * Competitive comparison showing how Reporunner
 * stacks up against n8n and SIM
 */

import { Bot, Check, Crown, Star, Workflow, X, Zap } from 'lucide-react';
import type React from 'react';

export const ComparisonTable: React.FC = () =&gt; {
  const features = [
    {
      category: 'Core Platform',
      items: [
        {
          feature: 'Self-Hosted Deployment',
          reporunner: true,
          zapier: false,
          make: false,
          n8n: true,
          sim: true,
        },
        {
          feature: 'Visual Workflow Builder',
          reporunner: true,
          zapier: 'Basic',
          make: true,
          n8n: true,
          sim: true,
        },
        {
          feature: 'Pre-built Integrations',
          reporunner: '500+',
          zapier: '8,000+',
          make: '2,000+',
          n8n: '400+',
          sim: '100+',
        },
        {
          feature: 'Custom Node Development',
          reporunner: true,
          zapier: false,
          make: false,
          n8n: true,
          sim: false,
        },
        {
          feature: 'Real-time Collaboration',
          reporunner: true,
          zapier: 'Team Plans',
          make: true,
          n8n: false,
          sim: true,
        },
        {
          feature: 'Version Control',
          reporunner: true,
          zapier: false,
          make: 'Basic',
          n8n: 'Basic',
          sim: true,
        },
      ],
    },
    {
      category: 'AI &amp; Intelligence',
      items: [
        {
          feature: 'Native AI Integration',
          reporunner: true,
          zapier: true,
          make: true,
          n8n: false,
          sim: true,
        },
        {
          feature: 'Vector Search (pgvector)',
          reporunner: true,
          zapier: false,
          make: false,
          n8n: false,
          sim: true,
        },
        {
          feature: 'Intelligent Error Recovery',
          reporunner: true,
          zapier: 'Basic',
          make: 'Basic',
          n8n: false,
          sim: true,
        },
        {
          feature: 'AI-Powered Optimization',
          reporunner: true,
          zapier: 'Basic',
          make: 'Basic',
          n8n: false,
          sim: 'Basic',
        },
        {
          feature: 'AI Agents/Chatbots',
          reporunner: true,
          zapier: true,
          make: true,
          n8n: false,
          sim: true,
        },
        {
          feature: 'Natural Language Queries',
          reporunner: true,
          zapier: false,
          make: false,
          n8n: false,
          sim: true,
        },
      ],
    },
    {
      category: 'Enterprise Features',
      items: [
        {
          feature: 'SSO/SAML Integration',
          reporunner: true,
          zapier: 'Enterprise',
          make: 'Enterprise',
          n8n: 'Enterprise',
          sim: false,
        },
        {
          feature: 'RBAC Permissions',
          reporunner: true,
          zapier: 'Enterprise',
          make: 'Enterprise',
          n8n: 'Enterprise',
          sim: 'Basic',
        },
        {
          feature: 'Audit Logging',
          reporunner: true,
          zapier: 'Enterprise',
          make: 'Enterprise',
          n8n: 'Enterprise',
          sim: false,
        },
        {
          feature: 'Compliance Certifications',
          reporunner: true,
          zapier: true,
          make: true,
          n8n: true,
          sim: false,
        },
        {
          feature: 'Multi-tenancy',
          reporunner: true,
          zapier: true,
          make: 'Basic',
          n8n: 'Enterprise',
          sim: 'Basic',
        },
        {
          feature: 'Enterprise Support',
          reporunner: true,
          zapier: 'Paid',
          make: 'Paid',
          n8n: 'Paid',
          sim: 'Paid',
        },
      ],
    },
    {
      category: 'Pricing &amp; Deployment',
      items: [
        {
          feature: 'Free Tier',
          reporunner: 'Unlimited Self-hosted',
          zapier: '100 ops/month',
          make: '1,000 ops/month',
          n8n: 'Unlimited Self-hosted',
          sim: 'Basic',
        },
        {
          feature: 'Pricing Model',
          reporunner: 'One-time + Support',
          zapier: 'Per Task/User',
          make: 'Per Operation',
          n8n: 'Freemium + Cloud',
          sim: 'Per User',
        },
        {
          feature: 'Cloud Hosting Option',
          reporunner: 'Coming Soon',
          zapier: true,
          make: true,
          n8n: true,
          sim: true,
        },
        {
          feature: 'On-Premise Only',
          reporunner: true,
          zapier: false,
          make: false,
          n8n: true,
          sim: false,
        },
        {
          feature: 'Cost at Scale',
          reporunner: 'Very Low',
          zapier: 'High',
          make: 'Medium',
          n8n: 'Low',
          sim: 'Medium',
        },
      ],
    },
    {
      category: 'Database &amp; Architecture',
      items: [
        {
          feature: 'Hybrid Database Support',
          reporunner: 'MongoDB + PostgreSQL',
          zapier: 'Cloud Only',
          make: 'Cloud Only',
          n8n: 'Multi-DB',
          sim: 'PostgreSQL',
        },
        {
          feature: 'Vector Database',
          reporunner: 'Built-in',
          zapier: false,
          make: false,
          n8n: false,
          sim: 'Built-in',
        },
        {
          feature: 'Microservices Architecture',
          reporunner: true,
          zapier: 'Cloud Native',
          make: 'Cloud Native',
          n8n: 'Monolith',
          sim: 'Monolith',
        },
        {
          feature: 'Horizontal Scaling',
          reporunner: true,
          zapier: 'Automatic',
          make: 'Automatic',
          n8n: 'Queue Only',
          sim: 'Basic',
        },
        {
          feature: 'Data Sovereignty',
          reporunner: 'Complete',
          zapier: false,
          make: false,
          n8n: 'Self-hosted Only',
          sim: false,
        },
      ],
    },
  ];

  const platforms = [
    {
      name: 'Reporunner',
      icon: Crown,
      tagline: 'Enterprise-grade with AI',
      highlight: 'Best Overall',
      gradient: 'from-blue-600 to-purple-600',
      bgGradient: 'from-blue-50 to-purple-50',
    },
    {
      name: 'Zapier',
      icon: Zap,
      tagline: 'Market leader (cloud)',
      highlight: 'Most Integrations',
      gradient: 'from-orange-500 to-red-500',
      bgGradient: 'from-orange-50 to-red-50',
    },
    {
      name: 'Make',
      icon: Workflow,
      tagline: 'Visual automation',
      highlight: 'Best UX',
      gradient: 'from-indigo-500 to-purple-500',
      bgGradient: 'from-indigo-50 to-purple-50',
    },
    {
      name: 'n8n',
      icon: Star,
      tagline: 'Open-source veteran',
      highlight: 'Self-hosted',
      gradient: 'from-gray-500 to-gray-600',
      bgGradient: 'from-gray-50 to-gray-100',
    },
    {
      name: 'SIM',
      icon: Bot,
      tagline: 'AI-first workflows',
      highlight: 'AI Native',
      gradient: 'from-emerald-500 to-teal-500',
      bgGradient: 'from-emerald-50 to-teal-50',
    },
  ];

  const renderFeatureValue = (value: any, isReporunner: boolean = false) =&gt; {
    if (typeof value === 'boolean') {
      return value ? (
        &lt;Check className={`w-5 h-5 mx-auto ${isReporunner ? 'text-blue-600' : 'text-green-500'}`} /&gt;
      ) : (
        &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
      );
    }

    if (typeof value === 'string') {
      if (value === 'Enterprise' || value === 'Paid' || value === 'Basic') {
        return (
          &lt;span
            className={`text-xs px-2 py-1 rounded-full ${
              value === 'Enterprise'
                ? 'bg-purple-100 text-purple-700'
                : value === 'Paid'
                  ? 'bg-yellow-100 text-yellow-700'
                  : 'bg-gray-100 text-gray-700'
            }`}
          &gt;
            {value}
          &lt;/span&gt;
        );
      }
      return (
        &lt;span className={`text-sm font-medium ${isReporunner ? 'text-blue-600' : 'text-gray-700'}`}&gt;
          {value}
        &lt;/span&gt;
      );
    }

    return null;
  };

  return (
    &lt;section className=&quot;py-20 bg-white&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            How Reporunner{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Stacks Up
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            See how Reporunner compares to leading automation platforms including Zapier, Make.com,
            n8n, and SIM. We combine enterprise-grade features with self-hosting flexibility and
            competitive pricing.
          &lt;/p&gt;
        &lt;/div&gt;

        {/* Platform Headers */}
        &lt;div className=&quot;grid grid-cols-6 gap-2 mb-8&quot;&gt;
          &lt;div className=&quot;p-3&quot;&gt;
            &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;Features&lt;/h3&gt;
          &lt;/div&gt;
          {platforms.map((platform, index) =&gt; {
            const Icon = platform.icon;
            return (
              &lt;div
                key={index}
                className={`p-3 rounded-xl border-2 text-center ${
                  index === 0
                    ? 'border-blue-500 bg-gradient-to-br from-blue-50 to-purple-50'
                    : 'border-gray-200 bg-gray-50'
                }`}
              &gt;
                &lt;div
                  className={`w-10 h-10 rounded-lg bg-gradient-to-r ${platform.gradient} flex items-center justify-center mx-auto mb-2`}
                &gt;
                  &lt;Icon className=&quot;w-5 h-5 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-bold text-gray-900 mb-1 text-sm&quot;&gt;{platform.name}&lt;/h3&gt;
                &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;{platform.tagline}&lt;/p&gt;
                &lt;div
                  className={`inline-block px-1 py-0.5 rounded-full text-xs font-medium ${
                    index === 0 ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700'
                  }`}
                &gt;
                  {platform.highlight}
                &lt;/div&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Comparison Table */}
        &lt;div className=&quot;bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-lg&quot;&gt;
          {features.map((category, categoryIndex) =&gt; (
            &lt;div key={categoryIndex}&gt;
              {/* Category Header */}
              &lt;div className=&quot;bg-gray-50 border-b border-gray-200&quot;&gt;
                &lt;div className=&quot;grid grid-cols-6 gap-2&quot;&gt;
                  &lt;div className=&quot;p-3&quot;&gt;
                    &lt;h4 className=&quot;font-bold text-gray-900 text-sm&quot;&gt;{category.category}&lt;/h4&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Feature Rows */}
              {category.items.map((item, itemIndex) =&gt; (
                &lt;div
                  key={itemIndex}
                  className=&quot;border-b border-gray-100 hover:bg-gray-50 transition-colors&quot;
                &gt;
                  &lt;div className=&quot;grid grid-cols-6 gap-2&quot;&gt;
                    &lt;div className=&quot;p-3&quot;&gt;
                      &lt;span className=&quot;text-gray-700 font-medium text-sm&quot;&gt;{item.feature}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;p-3 text-center&quot;&gt;
                      {renderFeatureValue(item.reporunner, true)}
                    &lt;/div&gt;
                    &lt;div className=&quot;p-3 text-center&quot;&gt;{renderFeatureValue(item.zapier)}&lt;/div&gt;
                    &lt;div className=&quot;p-3 text-center&quot;&gt;{renderFeatureValue(item.make)}&lt;/div&gt;
                    &lt;div className=&quot;p-3 text-center&quot;&gt;{renderFeatureValue(item.n8n)}&lt;/div&gt;
                    &lt;div className=&quot;p-3 text-center&quot;&gt;{renderFeatureValue(item.sim)}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          ))}
        &lt;/div&gt;

        {/* Summary Cards */}
        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-16&quot;&gt;
          &lt;div className=&quot;bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200&quot;&gt;
            &lt;h4 className=&quot;font-bold text-gray-900 mb-3&quot;&gt;Why Choose Reporunner?&lt;/h4&gt;
            &lt;ul className=&quot;space-y-2 text-sm text-gray-700&quot;&gt;
              &lt;li className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Check className=&quot;w-4 h-4 text-blue-600&quot; /&gt;
                Enterprise-grade + self-hosted
              &lt;/li&gt;
              &lt;li className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Check className=&quot;w-4 h-4 text-blue-600&quot; /&gt;
                Native AI with vector search
              &lt;/li&gt;
              &lt;li className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Check className=&quot;w-4 h-4 text-blue-600&quot; /&gt;
                Complete data sovereignty
              &lt;/li&gt;
              &lt;li className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Check className=&quot;w-4 h-4 text-blue-600&quot; /&gt;
                Lower cost at scale
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;

          &lt;div className=&quot;bg-orange-50 rounded-xl p-6 border border-orange-200&quot;&gt;
            &lt;h4 className=&quot;font-bold text-gray-900 mb-3&quot;&gt;vs. Zapier&lt;/h4&gt;
            &lt;ul className=&quot;space-y-2 text-sm text-gray-700&quot;&gt;
              &lt;li&gt;✅ Self-hosted deployment option&lt;/li&gt;
              &lt;li&gt;✅ Much lower costs at scale&lt;/li&gt;
              &lt;li&gt;✅ Complete data control&lt;/li&gt;
              &lt;li&gt;✅ Custom node development&lt;/li&gt;
              &lt;li&gt;✅ Advanced visual builder&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;

          &lt;div className=&quot;bg-indigo-50 rounded-xl p-6 border border-indigo-200&quot;&gt;
            &lt;h4 className=&quot;font-bold text-gray-900 mb-3&quot;&gt;vs. Make.com&lt;/h4&gt;
            &lt;ul className=&quot;space-y-2 text-sm text-gray-700&quot;&gt;
              &lt;li&gt;✅ Enterprise security built-in&lt;/li&gt;
              &lt;li&gt;✅ Self-hosted option&lt;/li&gt;
              &lt;li&gt;✅ Better cost structure&lt;/li&gt;
              &lt;li&gt;✅ Custom integrations&lt;/li&gt;
              &lt;li&gt;✅ Advanced AI capabilities&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;

          &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
            &lt;h4 className=&quot;font-bold text-gray-900 mb-3&quot;&gt;vs. n8n &amp; SIM&lt;/h4&gt;
            &lt;ul className=&quot;space-y-2 text-sm text-gray-700&quot;&gt;
              &lt;li&gt;✅ Better AI and modern stack&lt;/li&gt;
              &lt;li&gt;✅ Real-time collaboration&lt;/li&gt;
              &lt;li&gt;✅ Enterprise features included&lt;/li&gt;
              &lt;li&gt;✅ Hybrid database support&lt;/li&gt;
              &lt;li&gt;✅ Superior scalability&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* CTA */}
        &lt;div className=&quot;mt-16 text-center&quot;&gt;
          &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Experience the Reporunner Advantage&lt;/h3&gt;
            &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
              See for yourself why enterprises are choosing Reporunner for their mission-critical
              workflow automation needs.
            &lt;/p&gt;
            &lt;button className=&quot;bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors&quot;&gt;
              Start Your Free Trial
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/ExecutionHistory.tsx (Line 1:1 - Line 392:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/executionhistory/ExecutionHistory.tsx (Line 4:1 - Line 395:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn346" onclick="toggleCodeBlock('cloneGroup346', 'expandBtn346', 'collapseBtn346')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn346" onclick="toggleCodeBlock('cloneGroup346', 'expandBtn346', 'collapseBtn346')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup346"><code class="language-tsx text-sm text-gray-800">// Execution History Component - Display workflow execution results

import { EyeOutlined, ReloadOutlined, StopOutlined } from '@ant-design/icons';
import {
  Button,
  Card,
  Col,
  DatePicker,
  Input,
  Modal,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tag,
  Timeline,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { WorkflowApiService } from '@/core';
import { logger } from '@/core/services/LoggingService';

const workflowApiService = new WorkflowApiService();

import type {
  ExecutionFilter,
  NodeExecution,
  PaginationParams,
  WorkflowExecution,
} from '@/core/schemas';

const { RangePicker } = DatePicker;
const { Search } = Input;
const { Option } = Select;

export const ExecutionHistory: React.FC&lt;{
  workflowId?: string;
  onClose?: () =&gt; void;
}&gt; = ({ workflowId, onClose }) =&gt; {
  const [executions, setExecutions] = useState&lt;WorkflowExecution[]&gt;([]);
  const [loading, setLoading] = useState(false);
  const [selectedExecution, setSelectedExecution] = useState&lt;WorkflowExecution | null&gt;(null);
  const [detailsVisible, setDetailsVisible] = useState(false);
  const [filter, setFilter] = useState&lt;ExecutionFilter &amp; PaginationParams&gt;({
    workflowId,
    limit: 20,
    offset: 0,
    sortOrder: 'desc',
  });
  const [total, setTotal] = useState(0);

  const loadExecutions = useCallback(async () =&gt; {
    setLoading(true);
    try {
      const result = await workflowApiService.getExecutions(filter);
      setExecutions(result.items);
      setTotal(result.total);
    } catch (error) {
      logger.error('Failed to load executions', error instanceof Error ? error : undefined);
    } finally {
      setLoading(false);
    }
  }, [filter]);

  useEffect(() =&gt; {
    loadExecutions();
  }, [loadExecutions]);

  const handleStopExecution = async (executionId: string) =&gt; {
    try {
      await workflowApiService.stopExecution(executionId);
      await loadExecutions();
    } catch (error) {
      logger.error('Failed to stop execution', error instanceof Error ? error : undefined, {
        executionId,
      });
    }
  };

  const showExecutionDetails = async (execution: WorkflowExecution) =&gt; {
    setSelectedExecution(execution);
    setDetailsVisible(true);
  };

  const getStatusColor = (status: WorkflowExecution['status']) =&gt; {
    const colors: Record&lt;string, string&gt; = {
      pending: 'orange',
      running: 'blue',
      completed: 'green',
      failed: 'red',
      cancelled: 'gray',
      success: 'green',
      error: 'red',
    };
    return colors[status] || 'default';
  };

  const formatDuration = (duration?: number) =&gt; {
    if (!duration) return '-';
    const seconds = Math.floor(duration / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);

    if (hours &gt; 0) return `${hours}h ${minutes % 60}m ${seconds % 60}s`;
    if (minutes &gt; 0) return `${minutes}m ${seconds % 60}s`;
    return `${seconds}s`;
  };

  const getExecutionResults = (execution: WorkflowExecution) =&gt; {
    // Handle both array and record results formats for backward compatibility
    if (Array.isArray(execution.results)) {
      return execution.results;
    }
    if (execution.results &amp;&amp; typeof execution.results === 'object') {
      return Object.entries(execution.results).map(([nodeId, data]: [string, any]) =&gt; ({
        nodeId,
        nodeName: data?.nodeName || nodeId,
        status: data?.status || 'success',
        output: data?.output,
        error: data?.error,
        executedAt: data?.executedAt || execution.startTime || new Date().toISOString(),
        duration: data?.duration || 0,
      }));
    }
    return [];
  };

  const columns = [
    {
      title: 'Execution ID',
      dataIndex: 'id',
      key: 'id',
      width: 120,
      render: (id: string) =&gt; &lt;span className=&quot;font-mono text-xs&quot;&gt;{id.substring(0, 8)}...&lt;/span&gt;,
    },
    {
      title: 'Workflow',
      dataIndex: 'workflowName',
      key: 'workflowName',
      width: 200,
    },
    {
      title: 'Status',
      dataIndex: 'status',
      key: 'status',
      width: 100,
      render: (status: WorkflowExecution['status']) =&gt; (
        &lt;Tag color={getStatusColor(status)}&gt;{status.toUpperCase()}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Progress',
      key: 'progress',
      width: 120,
      render: (record: WorkflowExecution) =&gt; (
        &lt;div className=&quot;text-xs&quot;&gt;
          {record.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length ||
            0}{' '}
          / {record.nodeExecutions?.length || 0} nodes
        &lt;/div&gt;
      ),
    },
    {
      title: 'Started',
      dataIndex: 'startedAt',
      key: 'startedAt',
      width: 150,
      render: (date: string) =&gt; new Date(date).toLocaleString(),
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (record: WorkflowExecution) =&gt; formatDuration(record.duration),
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 150,
      render: (record: WorkflowExecution) =&gt; (
        &lt;Space&gt;
          &lt;Button size=&quot;small&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; showExecutionDetails(record)}&gt;
            Details
          &lt;/Button&gt;
          {record.status === 'running' &amp;&amp; (
            &lt;Button
              size=&quot;small&quot;
              danger
              icon={&lt;StopOutlined /&gt;}
              onClick={() =&gt; handleStopExecution(record.id)}
            &gt;
              Stop
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const content = (
    &lt;div className=&quot;execution-history&quot;&gt;
      &lt;div className=&quot;mb-4&quot;&gt;
        &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
          &lt;Col span={6}&gt;
            &lt;Search
              placeholder=&quot;Search executions...&quot;
              onSearch={(value) =&gt; setFilter({ ...filter, workflowId: value || workflowId })}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={6}&gt;
            &lt;Select
              placeholder=&quot;Filter by status&quot;
              allowClear
              style={{ width: '100%' }}
              onChange={(value) =&gt; setFilter({ ...filter, status: value })}
            &gt;
              &lt;Option value=&quot;pending&quot;&gt;Pending&lt;/Option&gt;
              &lt;Option value=&quot;running&quot;&gt;Running&lt;/Option&gt;
              &lt;Option value=&quot;completed&quot;&gt;Completed&lt;/Option&gt;
              &lt;Option value=&quot;failed&quot;&gt;Failed&lt;/Option&gt;
              &lt;Option value=&quot;cancelled&quot;&gt;Cancelled&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Col&gt;
          &lt;Col span={8}&gt;
            &lt;RangePicker
              placeholder={['Start date', 'End date']}
              onChange={(dates) =&gt; {
                if (dates) {
                  setFilter({
                    ...filter,
                    startDate: dates[0]?.toISOString(),
                    endDate: dates[1]?.toISOString(),
                  });
                } else {
                  setFilter({
                    ...filter,
                    startDate: undefined,
                    endDate: undefined,
                  });
                }
              }}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={4}&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadExecutions} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Col&gt;
        &lt;/Row&gt;
      &lt;/div&gt;

      &lt;Table
        columns={columns}
        dataSource={executions}
        rowKey=&quot;id&quot;
        loading={loading}
        pagination={{
          current: Math.floor((filter.offset || 0) / (filter.limit || 20)) + 1,
          pageSize: filter.limit || 20,
          total,
          onChange: (page, pageSize) =&gt; {
            setFilter({
              ...filter,
              offset: (page - 1) * (pageSize || 20),
              limit: pageSize,
            });
          },
        }}
      /&gt;

      &lt;Modal
        title=&quot;Execution Details&quot;
        open={detailsVisible}
        onCancel={() =&gt; setDetailsVisible(false)}
        width={800}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={() =&gt; setDetailsVisible(false)}&gt;
            Close
          &lt;/Button&gt;,
        ]}
      &gt;
        {selectedExecution &amp;&amp; (
          &lt;div&gt;
            &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Status&quot;
                  value={selectedExecution.status.toUpperCase()}
                  valueStyle={{
                    color: getStatusColor(selectedExecution.status),
                  }}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic title=&quot;Duration&quot; value={formatDuration(selectedExecution.duration)} /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Nodes Completed&quot;
                  value={`${selectedExecution.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length || 0} / ${selectedExecution.nodeExecutions?.length || 0}`}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Success Rate&quot;
                  value={(() =&gt; {
                    const results = getExecutionResults(selectedExecution);
                    const successCount = results.filter((r) =&gt; r.status === 'success').length;
                    const total = results.length;
                    return total &gt; 0 ? Math.round((successCount / total) * 100) : 0;
                  })()}
                  suffix=&quot;%&quot;
                /&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;

            &lt;Card title=&quot;Node Execution Results&quot; className=&quot;mb-4&quot;&gt;
              &lt;Timeline&gt;
                {getExecutionResults(selectedExecution).map((result) =&gt; (
                  &lt;Timeline.Item
                    key={result.nodeId}
                    color={
                      result.status === 'success'
                        ? 'green'
                        : result.status === 'error'
                          ? 'red'
                          : 'gray'
                    }
                  &gt;
                    &lt;div&gt;
                      &lt;strong&gt;{result.nodeName}&lt;/strong&gt;
                      &lt;Tag color={result.status === 'success' ? 'green' : 'red'} className=&quot;ml-2&quot;&gt;
                        {result.status}
                      &lt;/Tag&gt;
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                        {new Date(result.executedAt).toLocaleString()} •{' '}
                        {formatDuration(result.duration)}
                      &lt;/div&gt;
                      {result.error &amp;&amp; (
                        &lt;div className=&quot;text-red-500 text-sm mt-1&quot;&gt;{result.error}&lt;/div&gt;
                      )}
                      {result.output &amp;&amp; (
                        &lt;details className=&quot;mt-1&quot;&gt;
                          &lt;summary className=&quot;text-blue-500 cursor-pointer text-sm&quot;&gt;
                            View Output
                          &lt;/summary&gt;
                          &lt;pre className=&quot;bg-gray-100 p-2 rounded mt-1 text-xs overflow-auto max-h-32&quot;&gt;
                            {JSON.stringify(result.output, null, 2)}
                          &lt;/pre&gt;
                        &lt;/details&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/Timeline.Item&gt;
                ))}
              &lt;/Timeline&gt;
            &lt;/Card&gt;

            {selectedExecution.error &amp;&amp; (
              &lt;Card title=&quot;Execution Error&quot; className=&quot;border-red-200&quot;&gt;
                &lt;div className=&quot;text-red-600&quot;&gt;
                  &lt;div className=&quot;font-semibold&quot;&gt;{selectedExecution.error}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            )}
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/div&gt;
  );

  // If onClose is provided, wrap in a modal
  if (onClose) {
    return (
      &lt;Modal
        title=&quot;Execution History&quot;
        open={true}
        onCancel={onClose}
        width={1200}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;,
        ]}
      &gt;
        {content}
      &lt;/Modal&gt;
    );
  }

  return content;
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/EnterpriseDashboard.tsx (Line 1:1 - Line 42:64), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/enterprisedashboard/EnterpriseDashboard.tsx (Line 1:1 - Line 41:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn348" onclick="toggleCodeBlock('cloneGroup348', 'expandBtn348', 'collapseBtn348')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn348" onclick="toggleCodeBlock('cloneGroup348', 'expandBtn348', 'collapseBtn348')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup348"><code class="language-tsx text-sm text-gray-800">import {
  ApiOutlined,
  BugOutlined,
  CheckCircleOutlined,
  ClockCircleOutlined,
  DashboardOutlined,
  DatabaseOutlined,
  ExportOutlined,
  FallOutlined,
  ReloadOutlined,
  RiseOutlined,
  SecurityScanOutlined,
  TeamOutlined,
  ThunderboltOutlined,
  UserOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import { Area, Column, Line, Pie } from '@ant-design/plots';
import {
  Alert,
  Avatar,
  Badge,
  Button,
  Card,
  Col,
  DatePicker,
  Progress,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tabs,
  Tag,
  Timeline,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import { useRBACStore } from '@/core/stores/rbacStore';

// import { auditService } from &quot;@/core/services/auditService&quot;;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/EnterpriseDashboard.tsx (Line 40:26 - Line 921:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/enterprisedashboard/EnterpriseDashboard.tsx (Line 43:19 - Line 924:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn349" onclick="toggleCodeBlock('cloneGroup349', 'expandBtn349', 'collapseBtn349')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn349" onclick="toggleCodeBlock('cloneGroup349', 'expandBtn349', 'collapseBtn349')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup349"><code class="language-tsx text-sm text-gray-800">;

// import { auditService } from &quot;@/core/services/auditService&quot;;
// import { securityService } from &quot;@/core/services/securityService&quot;;

const { Title, Text } = Typography;
const { RangePicker } = DatePicker;
const { Option } = Select;

interface DashboardMetrics {
  organizations: {
    total: number;
    active: number;
    growth: number;
  };
  users: {
    total: number;
    active: number;
    newThisMonth: number;
    growth: number;
  };
  workflows: {
    total: number;
    active: number;
    executions: number;
    successRate: number;
  };
  security: {
    threats: number;
    alerts: number;
    complianceScore: number;
    lastIncident?: Date;
  };
  performance: {
    avgExecutionTime: number;
    systemUptime: number;
    errorRate: number;
    throughput: number;
  };
  costs: {
    monthlySpend: number;
    growth: number;
    costPerExecution: number;
  };
}

interface ActivityEvent {
  id: string;
  type: 'user_login' | 'workflow_execution' | 'security_alert' | 'system_event';
  title: string;
  description: string;
  timestamp: Date;
  severity: 'low' | 'medium' | 'high' | 'critical';
  user?: string;
  organization?: string;
}

export const EnterpriseDashboard: React.FC = () =&gt; {
  const [metrics, setMetrics] = useState&lt;DashboardMetrics | null&gt;(null);
  const [activities, setActivities] = useState&lt;ActivityEvent[]&gt;([]);
  const [loading, setLoading] = useState(true);
  const [dateRange, setDateRange] = useState&lt;[any, any] | null&gt;(null);
  const [selectedOrganization, setSelectedOrganization] = useState&lt;string&gt;('all');

  const { organizations, canManageOrganization } = useRBACStore();

  useEffect(() =&gt; {
    loadDashboardData();
  }, [loadDashboardData]);

  const loadDashboardData = async () =&gt; {
    setLoading(true);
    try {
      // Simulate API calls - in real app these would be actual API endpoints
      const mockMetrics: DashboardMetrics = {
        organizations: {
          total: 25,
          active: 22,
          growth: 8.5,
        },
        users: {
          total: 1247,
          active: 892,
          newThisMonth: 156,
          growth: 12.3,
        },
        workflows: {
          total: 5432,
          active: 3891,
          executions: 125678,
          successRate: 94.7,
        },
        security: {
          threats: 3,
          alerts: 12,
          complianceScore: 92,
          lastIncident: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
        },
        performance: {
          avgExecutionTime: 2.3,
          systemUptime: 99.97,
          errorRate: 0.8,
          throughput: 1250,
        },
        costs: {
          monthlySpend: 45678,
          growth: -5.2,
          costPerExecution: 0.036,
        },
      };

      const mockActivities: ActivityEvent[] = [
        {
          id: '1',
          type: 'security_alert',
          title: 'Multiple Failed Login Attempts',
          description: 'User john.doe@acme.com has 5 failed login attempts',
          timestamp: new Date(Date.now() - 30 * 60 * 1000),
          severity: 'high',
          user: 'john.doe@acme.com',
          organization: 'Acme Corp',
        },
        {
          id: '2',
          type: 'workflow_execution',
          title: 'High Volume Data Pipeline Completed',
          description: 'Successfully processed 50,000 records in 4.2 minutes',
          timestamp: new Date(Date.now() - 45 * 60 * 1000),
          severity: 'low',
          user: 'sarah.chen@techcorp.com',
          organization: 'TechCorp',
        },
        {
          id: '3',
          type: 'user_login',
          title: 'Admin Login from New Location',
          description: 'Administrator logged in from Tokyo, Japan',
          timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),
          severity: 'medium',
          user: 'admin@enterprise.com',
          organization: 'Enterprise Ltd',
        },
        {
          id: '4',
          type: 'system_event',
          title: 'System Maintenance Completed',
          description: 'Scheduled maintenance window completed successfully',
          timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000),
          severity: 'low',
        },
      ];

      setMetrics(mockMetrics);
      setActivities(mockActivities);
    } catch (_error) {
    } finally {
      setLoading(false);
    }
  };

  const getActivityIcon = (type: ActivityEvent['type']) =&gt; {
    switch (type) {
      case 'security_alert':
        return &lt;SecurityScanOutlined /&gt;;
      case 'workflow_execution':
        return &lt;ThunderboltOutlined /&gt;;
      case 'user_login':
        return &lt;UserOutlined /&gt;;
      case 'system_event':
        return &lt;DatabaseOutlined /&gt;;
      default:
        return &lt;ClockCircleOutlined /&gt;;
    }
  };

  const getSeverityColor = (severity: string) =&gt; {
    switch (severity) {
      case 'critical':
        return '#ff4d4f';
      case 'high':
        return '#fa8c16';
      case 'medium':
        return '#fadb14';
      case 'low':
        return '#52c41a';
      default:
        return '#d9d9d9';
    }
  };

  // Chart data
  const executionTrendData = [
    { date: '2024-01', executions: 8500 },
    { date: '2024-02', executions: 9200 },
    { date: '2024-03', executions: 8800 },
    { date: '2024-04', executions: 10500 },
    { date: '2024-05', executions: 11200 },
    { date: '2024-06', executions: 12800 },
  ];

  const userGrowthData = [
    { month: 'Jan', active: 750, total: 1100 },
    { month: 'Feb', active: 820, total: 1150 },
    { month: 'Mar', active: 780, total: 1180 },
    { month: 'Apr', active: 890, total: 1220 },
    { month: 'May', active: 850, total: 1250 },
    { month: 'Jun', active: 892, total: 1247 },
  ];

  const workflowCategoriesData = [
    { type: 'Data Processing', value: 35 },
    { type: 'Email Automation', value: 25 },
    { type: 'AI/ML Workflows', value: 20 },
    { type: 'Integration', value: 12 },
    { type: 'Other', value: 8 },
  ];

  const performanceData = [
    { time: '00:00', cpu: 45, memory: 62, throughput: 1200 },
    { time: '04:00', cpu: 32, memory: 58, throughput: 800 },
    { time: '08:00', cpu: 78, memory: 75, throughput: 2100 },
    { time: '12:00', cpu: 85, memory: 82, throughput: 2500 },
    { time: '16:00', cpu: 92, memory: 88, throughput: 2800 },
    { time: '20:00', cpu: 67, memory: 71, throughput: 1900 },
  ];

  const topUsersData = [
    {
      name: 'Sarah Chen',
      organization: 'TechCorp',
      executions: 1250,
      successRate: 98.5,
    },
    {
      name: 'Mike Johnson',
      organization: 'DataFlow Inc',
      executions: 980,
      successRate: 96.2,
    },
    {
      name: 'Lisa Wang',
      organization: 'AutoSys',
      executions: 875,
      successRate: 99.1,
    },
    {
      name: 'John Smith',
      organization: 'ProcessPro',
      executions: 820,
      successRate: 94.8,
    },
    {
      name: 'Emma Davis',
      organization: 'FlowTech',
      executions: 765,
      successRate: 97.3,
    },
  ];

  const topOrganizationsData = [
    {
      name: 'TechCorp',
      users: 89,
      workflows: 342,
      executions: 15680,
      growth: 15.2,
    },
    {
      name: 'DataFlow Inc',
      users: 67,
      workflows: 298,
      executions: 12450,
      growth: 8.7,
    },
    {
      name: 'AutoSys',
      users: 54,
      workflows: 234,
      executions: 9870,
      growth: 22.1,
    },
    {
      name: 'ProcessPro',
      users: 43,
      workflows: 187,
      executions: 7890,
      growth: -2.4,
    },
    {
      name: 'FlowTech',
      users: 38,
      workflows: 156,
      executions: 6540,
      growth: 11.8,
    },
  ];

  const tabs = [
    {
      key: 'overview',
      label: (
        &lt;span&gt;
          &lt;DashboardOutlined /&gt;
          Overview
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          {/* Key Metrics */}
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Total Organizations&quot;
                  value={metrics?.organizations.total}
                  prefix={&lt;TeamOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.organizations.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Users&quot;
                  value={metrics?.users.active}
                  prefix={&lt;UserOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.users.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Workflow Executions&quot;
                  value={metrics?.workflows.executions}
                  prefix={&lt;ThunderboltOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px' }}&gt;
                      {metrics?.workflows.successRate}% success
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;System Uptime&quot;
                  value={metrics?.performance.systemUptime}
                  precision={2}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{ color: '#52c41a' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {/* Charts */}
          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;Execution Trends&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Line
                  data={executionTrendData}
                  xField=&quot;date&quot;
                  yField=&quot;executions&quot;
                  height={300}
                  smooth
                  point={{ size: 5, shape: 'circle' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;User Growth&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Column
                  data={userGrowthData}
                  xField=&quot;month&quot;
                  yField=&quot;total&quot;
                  height={300}
                  columnStyle={{ fill: '#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'performance',
      label: (
        &lt;span&gt;
          &lt;RiseOutlined /&gt;
          Performance
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Avg Execution Time&quot;
                  value={metrics?.performance.avgExecutionTime}
                  precision={1}
                  suffix=&quot;s&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Error Rate&quot;
                  value={metrics?.performance.errorRate ?? 0}
                  precision={1}
                  suffix=&quot;%&quot;
                  prefix={&lt;BugOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.performance.errorRate ?? 0) &gt; 2 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Throughput&quot;
                  value={metrics?.performance.throughput}
                  suffix=&quot;/hour&quot;
                  prefix={&lt;ApiOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Monthly Spend&quot;
                  value={metrics?.costs.monthlySpend}
                  prefix=&quot;$&quot;
                  suffix={
                    &lt;span
                      style={{
                        fontSize: '14px',
                        color: (metrics?.costs.growth ?? 0) &lt; 0 ? '#52c41a' : '#cf1322',
                      }}
                    &gt;
                      {(metrics?.costs.growth ?? 0) &lt; 0 ? &lt;FallOutlined /&gt; : &lt;RiseOutlined /&gt;}{' '}
                      {Math.abs(metrics?.costs.growth ?? 0)}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={16}&gt;
              &lt;Card
                title=&quot;System Performance (24h)&quot;
                extra={
                  &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                    Refresh
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Area
                  data={performanceData}
                  xField=&quot;time&quot;
                  yField=&quot;cpu&quot;
                  height={300}
                  // @ts-expect-error Area config shape may differ by version
                  areaStyle={{ fill: 'l(270) 0:#ffffff 0.5:#7ec2f3 1:#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Card title=&quot;Workflow Categories&quot;&gt;
                &lt;Pie
                  data={workflowCategoriesData}
                  angleField=&quot;value&quot;
                  colorField=&quot;type&quot;
                  height={300}
                  radius={0.8}
                  label={{
                    type: 'spider',
                    content: '{name}\n{percentage}',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
          {metrics?.security &amp;&amp; metrics.security.alerts &gt; 0 &amp;&amp; (
            &lt;Badge count={metrics.security.alerts} style={{ marginLeft: 8 }} /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Threats&quot;
                  value={metrics?.security.threats ?? 0}
                  prefix={&lt;WarningOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.threats ?? 0) &gt; 0 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Security Alerts&quot;
                  value={metrics?.security.alerts ?? 0}
                  prefix={&lt;SecurityScanOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.alerts ?? 0) &gt; 5 ? '#fa8c16' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Compliance Score&quot;
                  value={metrics?.security.complianceScore ?? 0}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security?.complianceScore ?? 0) &gt;= 90 ? '#52c41a' : '#fa8c16',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Last Incident&quot;
                  value={
                    metrics?.security.lastIncident
                      ? Math.floor(
                          (Date.now() - metrics.security.lastIncident.getTime()) /
                            (24 * 60 * 60 * 1000)
                        )
                      : 0
                  }
                  suffix=&quot; days ago&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {(metrics?.security.alerts ?? 0) &gt; 0 &amp;&amp; (
            &lt;Alert
              message=&quot;Security Alerts Require Attention&quot;
              description={`There are ${metrics?.security.alerts ?? 0} active security alerts that need investigation.`}
              type=&quot;warning&quot;
              showIcon
              style={{ marginBottom: 24 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;primary&quot;&gt;
                  View All Alerts
                &lt;/Button&gt;
              }
            /&gt;
          )}

          &lt;Card title=&quot;Security Overview&quot;&gt;
            &lt;Row gutter={16}&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Threat Detection&lt;/Text&gt;
                  &lt;Progress percent={85} status=&quot;active&quot; strokeColor=&quot;#52c41a&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Access Control&lt;/Text&gt;
                  &lt;Progress percent={92} status=&quot;active&quot; strokeColor=&quot;#1890ff&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Data Encryption&lt;/Text&gt;
                  &lt;Progress percent={98} status=&quot;active&quot; strokeColor=&quot;#722ed1&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Audit Coverage&lt;/Text&gt;
                  &lt;Progress percent={94} status=&quot;active&quot; strokeColor=&quot;#fa8c16&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Vulnerability Management&lt;/Text&gt;
                  &lt;Progress percent={88} status=&quot;active&quot; strokeColor=&quot;#13c2c2&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Incident Response&lt;/Text&gt;
                  &lt;Progress percent={90} status=&quot;active&quot; strokeColor=&quot;#eb2f96&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'organizations',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Organizations
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Top Organizations&quot;
            extra={
              &lt;Space&gt;
                &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                  Export
                &lt;/Button&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Table
              dataSource={topOrganizationsData}
              pagination={false}
              columns={[
                {
                  title: 'Organization',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; style={{ backgroundColor: '#1890ff', marginRight: 8 }}&gt;
                        {name.charAt(0)}
                      &lt;/Avatar&gt;
                      &lt;Text strong&gt;{name}&lt;/Text&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Users',
                  dataIndex: 'users',
                  key: 'users',
                  render: (users: number) =&gt; &lt;Statistic value={users} /&gt;,
                },
                {
                  title: 'Workflows',
                  dataIndex: 'workflows',
                  key: 'workflows',
                  render: (workflows: number) =&gt; &lt;Statistic value={workflows} /&gt;,
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Growth',
                  dataIndex: 'growth',
                  key: 'growth',
                  render: (growth: number) =&gt; (
                    &lt;span style={{ color: growth &gt;= 0 ? '#52c41a' : '#cf1322' }}&gt;
                      {growth &gt;= 0 ? &lt;RiseOutlined /&gt; : &lt;FallOutlined /&gt;} {Math.abs(growth)}%
                    &lt;/span&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;

          &lt;Card title=&quot;Top Users&quot; style={{ marginTop: 16 }}&gt;
            &lt;Table
              dataSource={topUsersData}
              pagination={false}
              columns={[
                {
                  title: 'User',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string, record: any) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; icon={&lt;UserOutlined /&gt;} style={{ marginRight: 8 }} /&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;{name}&lt;/Text&gt;
                        &lt;br /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;{record.organization}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Success Rate',
                  dataIndex: 'successRate',
                  key: 'successRate',
                  render: (rate: number) =&gt; (
                    &lt;Progress
                      percent={rate}
                      size=&quot;small&quot;
                      status={rate &gt;= 95 ? 'success' : rate &gt;= 90 ? 'normal' : 'exception'}
                    /&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'activity',
      label: (
        &lt;span&gt;
          &lt;ClockCircleOutlined /&gt;
          Activity
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Recent Activity&quot;
            extra={
              &lt;Space&gt;
                &lt;Select defaultValue=&quot;all&quot; style={{ width: 120 }}&gt;
                  &lt;Option value=&quot;all&quot;&gt;All Events&lt;/Option&gt;
                  &lt;Option value=&quot;security&quot;&gt;Security&lt;/Option&gt;
                  &lt;Option value=&quot;workflow&quot;&gt;Workflows&lt;/Option&gt;
                  &lt;Option value=&quot;user&quot;&gt;Users&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Timeline&gt;
              {activities.map((activity) =&gt; (
                &lt;Timeline.Item
                  key={activity.id}
                  dot={
                    &lt;Avatar
                      size=&quot;small&quot;
                      style={{
                        backgroundColor: getSeverityColor(activity.severity),
                      }}
                      icon={getActivityIcon(activity.type)}
                    /&gt;
                  }
                &gt;
                  &lt;div&gt;
                    &lt;div
                      style={{
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                      }}
                    &gt;
                      &lt;Text strong&gt;{activity.title}&lt;/Text&gt;
                      &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                        {activity.timestamp.toLocaleTimeString()}
                      &lt;/Text&gt;
                    &lt;/div&gt;
                    &lt;div style={{ marginTop: 4 }}&gt;
                      &lt;Text&gt;{activity.description}&lt;/Text&gt;
                    &lt;/div&gt;
                    {(activity.user || activity.organization) &amp;&amp; (
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {activity.user &amp;&amp; (
                          &lt;Tag icon={&lt;UserOutlined /&gt;} color=&quot;blue&quot;&gt;
                            {activity.user}
                          &lt;/Tag&gt;
                        )}
                        {activity.organization &amp;&amp; (
                          &lt;Tag icon={&lt;TeamOutlined /&gt;} color=&quot;green&quot;&gt;
                            {activity.organization}
                          &lt;/Tag&gt;
                        )}
                        &lt;Tag color={getSeverityColor(activity.severity)}&gt;{activity.severity}&lt;/Tag&gt;
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/Timeline.Item&gt;
              ))}
            &lt;/Timeline&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  if (!metrics) {
    return &lt;div&gt;Loading...&lt;/div&gt;;
  }

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
          }}
        &gt;
          &lt;div&gt;
            &lt;Title level={2}&gt;
              &lt;DashboardOutlined /&gt; Enterprise Dashboard
            &lt;/Title&gt;
            &lt;Text type=&quot;secondary&quot;&gt;
              Comprehensive overview of your organization's automation platform
            &lt;/Text&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;RangePicker value={dateRange} onChange={setDateRange} style={{ width: 300 }} /&gt;
            {canManageOrganization() &amp;&amp; (
              &lt;Select
                value={selectedOrganization}
                onChange={setSelectedOrganization}
                style={{ width: 200 }}
              &gt;
                &lt;Option value=&quot;all&quot;&gt;All Organizations&lt;/Option&gt;
                {organizations.map((org) =&gt; (
                  &lt;Option key={org.id} value={org.id}&gt;
                    {org.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            )}
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadDashboardData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;Tabs items={tabs} /&gt;
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/AuditDashboard.tsx (Line 1:1 - Line 42:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/auditdashboard/AuditDashboard.tsx (Line 1:1 - Line 41:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn351" onclick="toggleCodeBlock('cloneGroup351', 'expandBtn351', 'collapseBtn351')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn351" onclick="toggleCodeBlock('cloneGroup351', 'expandBtn351', 'collapseBtn351')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup351"><code class="language-tsx text-sm text-gray-800">import {
  AlertOutlined,
  AuditOutlined,
  CheckCircleOutlined,
  DownloadOutlined,
  ExportOutlined,
  EyeOutlined,
  FilterOutlined,
  GlobalOutlined,
  ReloadOutlined,
  SecurityScanOutlined,
  UserOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Col,
  DatePicker,
  Descriptions,
  Input,
  Modal,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tag,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  type AuditEvent,
  type AuditFilter,
  auditService,
  type ComplianceReport,
  type SecurityAlert,
} from '@/core/services/auditService';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/AuditDashboard.tsx (Line 40:31 - Line 703:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/auditdashboard/AuditDashboard.tsx (Line 42:19 - Line 705:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn352" onclick="toggleCodeBlock('cloneGroup352', 'expandBtn352', 'collapseBtn352')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn352" onclick="toggleCodeBlock('cloneGroup352', 'expandBtn352', 'collapseBtn352')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup352"><code class="language-tsx text-sm text-gray-800">;

const { RangePicker } = DatePicker;
const { Option } = Select;
const { Search } = Input;
const { Title, Text } = Typography;

export const AuditDashboard: React.FC = () =&gt; {
  const [events, setEvents] = useState&lt;AuditEvent[]&gt;([]);
  const [filteredEvents, setFilteredEvents] = useState&lt;AuditEvent[]&gt;([]);
  const [securityAlerts, setSecurityAlerts] = useState&lt;SecurityAlert[]&gt;([]);
  const [complianceReports, setComplianceReports] = useState&lt;ComplianceReport[]&gt;([]);
  const [loading, setLoading] = useState(false);
  const [selectedEvent, setSelectedEvent] = useState&lt;AuditEvent | null&gt;(null);
  const [filter, setFilter] = useState&lt;AuditFilter&gt;({});
  const [exportModalVisible, setExportModalVisible] = useState(false);

  // Filter states
  const [dateRange, setDateRange] = useState&lt;[any, any] | null&gt;(null);
  const [selectedUser, setSelectedUser] = useState&lt;string&gt;();
  const [selectedAction, setSelectedAction] = useState&lt;string&gt;();
  const [selectedResource, setSelectedResource] = useState&lt;string&gt;();
  const [selectedSeverity, setSelectedSeverity] = useState&lt;string&gt;();
  const [selectedCategory, setSelectedCategory] = useState&lt;string&gt;();
  const [searchTerm, setSearchTerm] = useState&lt;string&gt;('');

  useEffect(() =&gt; {
    loadAuditData();
  }, [loadAuditData]);

  useEffect(() =&gt; {
    applyFilters();
  }, [applyFilters]);

  const loadAuditData = async () =&gt; {
    setLoading(true);
    try {
      // In a real app, these would be API calls
      const mockEvents: AuditEvent[] = [
        {
          id: '1',
          timestamp: new Date(Date.now() - 3600000),
          userId: 'user1',
          userName: 'John Doe',
          action: 'login',
          resource: 'authentication',
          details: { success: true },
          ipAddress: '192.168.1.100',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'low',
          category: 'authentication',
          result: 'success',
        },
        {
          id: '2',
          timestamp: new Date(Date.now() - 7200000),
          userId: 'user2',
          userName: 'Jane Smith',
          action: 'execute',
          resource: 'workflow',
          resourceId: 'wf123',
          details: { workflowName: 'Data Pipeline', executionId: 'exec456' },
          ipAddress: '192.168.1.101',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'medium',
          category: 'workflow',
          result: 'success',
        },
        {
          id: '3',
          timestamp: new Date(Date.now() - 10800000),
          userId: 'user3',
          userName: 'Bob Wilson',
          action: 'delete',
          resource: 'workflow',
          resourceId: 'wf789',
          details: { workflowName: 'Legacy Process' },
          ipAddress: '192.168.1.102',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'high',
          category: 'workflow',
          result: 'success',
        },
        {
          id: '4',
          timestamp: new Date(Date.now() - 14400000),
          userId: 'user1',
          userName: 'John Doe',
          action: 'login',
          resource: 'authentication',
          details: { success: false },
          ipAddress: '192.168.1.100',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'medium',
          category: 'authentication',
          result: 'failure',
        },
      ];

      const mockAlerts: SecurityAlert[] = [
        {
          id: 'alert1',
          type: 'failed_login_attempts',
          severity: 'high',
          title: 'Multiple Failed Login Attempts',
          description: 'User john.doe@example.com has 5 failed login attempts in the last hour',
          triggeredAt: new Date(Date.now() - 1800000),
          userId: 'user1',
          organizationId: 'org1',
          events: [mockEvents[3]],
          status: 'open',
        },
      ];

      setEvents(mockEvents);
      setSecurityAlerts(mockAlerts);
    } catch (_error) {
    } finally {
      setLoading(false);
    }
  };

  const applyFilters = async () =&gt; {
    const newFilter: AuditFilter = {
      ...filter,
      startDate: dateRange?.[0]?.toDate(),
      endDate: dateRange?.[1]?.toDate(),
      userId: selectedUser,
      action: selectedAction,
      resource: selectedResource,
      severity: selectedSeverity as any,
      category: selectedCategory as any,
      searchTerm,
    };

    try {
      const filtered = await auditService.getEvents(newFilter, 1000, 0);
      setFilteredEvents(
        filtered.length &gt; 0
          ? filtered
          : events.filter((event) =&gt; {
              if (newFilter.startDate &amp;&amp; event.timestamp &lt; newFilter.startDate) return false;
              if (newFilter.endDate &amp;&amp; event.timestamp &gt; newFilter.endDate) return false;
              if (newFilter.userId &amp;&amp; event.userId !== newFilter.userId) return false;
              if (newFilter.action &amp;&amp; !event.action.includes(newFilter.action)) return false;
              if (newFilter.resource &amp;&amp; event.resource !== newFilter.resource) return false;
              if (newFilter.severity &amp;&amp; event.severity !== newFilter.severity) return false;
              if (newFilter.category &amp;&amp; event.category !== newFilter.category) return false;
              if (newFilter.searchTerm) {
                const searchLower = newFilter.searchTerm.toLowerCase();
                const matchesSearch =
                  event.action.toLowerCase().includes(searchLower) ||
                  event.resource.toLowerCase().includes(searchLower) ||
                  event.userName.toLowerCase().includes(searchLower) ||
                  JSON.stringify(event.details).toLowerCase().includes(searchLower);
                if (!matchesSearch) return false;
              }
              return true;
            })
      );
    } catch (_error) {
      setFilteredEvents(events);
    }
  };

  const clearFilters = () =&gt; {
    setDateRange(null);
    setSelectedUser(undefined);
    setSelectedAction(undefined);
    setSelectedResource(undefined);
    setSelectedSeverity(undefined);
    setSelectedCategory(undefined);
    setSearchTerm('');
    setFilter({});
  };

  const exportData = async (format: 'json' | 'csv') =&gt; {
    try {
      const startDate = dateRange?.[0]?.toDate() || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
      const endDate = dateRange?.[1]?.toDate() || new Date();

      const data = await auditService.exportAuditData('org1', startDate, endDate, format);

      const blob = new Blob([data], {
        type: format === 'json' ? 'application/json' : 'text/csv',
      });

      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `audit-log-${startDate.toISOString().split('T')[0]}-${endDate.toISOString().split('T')[0]}.${format}`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      setExportModalVisible(false);
    } catch (_error) {}
  };

  const generateComplianceReport = async () =&gt; {
    try {
      const startDate = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000); // Last 30 days
      const endDate = new Date();

      const report = await auditService.generateComplianceReport(
        'org1',
        startDate,
        endDate,
        'current-user'
      );
      setComplianceReports([...complianceReports, report]);

      Modal.info({
        title: 'Compliance Report Generated',
        content: `Report &quot;${report.name}&quot; has been generated successfully. Status: ${report.status}`,
        width: 600,
      });
    } catch (_error) {}
  };

  const getSeverityColor = (severity: string) =&gt; {
    switch (severity) {
      case 'critical':
        return 'red';
      case 'high':
        return 'orange';
      case 'medium':
        return 'gold';
      case 'low':
        return 'green';
      default:
        return 'default';
    }
  };

  const getResultColor = (result: string) =&gt; {
    switch (result) {
      case 'success':
        return 'green';
      case 'failure':
        return 'red';
      case 'error':
        return 'orange';
      default:
        return 'default';
    }
  };

  const columns = [
    {
      title: 'Timestamp',
      dataIndex: 'timestamp',
      key: 'timestamp',
      width: 180,
      render: (timestamp: Date) =&gt; (
        &lt;div&gt;
          &lt;div&gt;{timestamp.toLocaleDateString()}&lt;/div&gt;
          &lt;Text type=&quot;secondary&quot;&gt;{timestamp.toLocaleTimeString()}&lt;/Text&gt;
        &lt;/div&gt;
      ),
      sorter: (a: AuditEvent, b: AuditEvent) =&gt; b.timestamp.getTime() - a.timestamp.getTime(),
      defaultSortOrder: 'descend' as const,
    },
    {
      title: 'User',
      dataIndex: 'userName',
      key: 'userName',
      width: 150,
      render: (userName: string, record: AuditEvent) =&gt; (
        &lt;div&gt;
          &lt;UserOutlined /&gt; {userName}
          &lt;br /&gt;
          &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
            {record.ipAddress}
          &lt;/Text&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Action',
      dataIndex: 'action',
      key: 'action',
      width: 120,
      render: (action: string) =&gt; &lt;Tag color=&quot;blue&quot;&gt;{action}&lt;/Tag&gt;,
    },
    {
      title: 'Resource',
      dataIndex: 'resource',
      key: 'resource',
      width: 120,
      render: (resource: string, record: AuditEvent) =&gt; (
        &lt;div&gt;
          &lt;Tag color=&quot;purple&quot;&gt;{resource}&lt;/Tag&gt;
          {record.resourceId &amp;&amp; (
            &lt;div&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                ID: {record.resourceId}
              &lt;/Text&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Result',
      dataIndex: 'result',
      key: 'result',
      width: 100,
      render: (result: string) =&gt; &lt;Tag color={getResultColor(result)}&gt;{result}&lt;/Tag&gt;,
    },
    {
      title: 'Severity',
      dataIndex: 'severity',
      key: 'severity',
      width: 100,
      render: (severity: string) =&gt; &lt;Tag color={getSeverityColor(severity)}&gt;{severity}&lt;/Tag&gt;,
    },
    {
      title: 'Category',
      dataIndex: 'category',
      key: 'category',
      width: 120,
      render: (category: string) =&gt; &lt;Tag&gt;{category}&lt;/Tag&gt;,
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 100,
      render: (_: unknown, record: AuditEvent) =&gt; (
        &lt;Button type=&quot;link&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; setSelectedEvent(record)}&gt;
          View
        &lt;/Button&gt;
      ),
    },
  ];

  const uniqueUsers = Array.from(new Set(events.map((e) =&gt; e.userName)));
  const uniqueActions = Array.from(new Set(events.map((e) =&gt; e.action)));
  const uniqueResources = Array.from(new Set(events.map((e) =&gt; e.resource)));

  const securityMetrics = {
    totalEvents: filteredEvents.length,
    securityEvents: filteredEvents.filter(
      (e) =&gt;
        e.category === 'authentication' ||
        e.category === 'authorization' ||
        e.severity === 'high' ||
        e.severity === 'critical'
    ).length,
    failedLogins: filteredEvents.filter((e) =&gt; e.action === 'login' &amp;&amp; e.result === 'failure')
      .length,
    criticalEvents: filteredEvents.filter((e) =&gt; e.severity === 'critical').length,
  };

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;AuditOutlined /&gt; Audit &amp; Security Dashboard
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;Monitor security events, audit trails, and compliance status&lt;/Text&gt;
      &lt;/div&gt;

      {/* Security Metrics */}
      &lt;Row gutter={16} style={{ marginBottom: 24 }}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Events&quot;
              value={securityMetrics.totalEvents}
              prefix={&lt;AuditOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Security Events&quot;
              value={securityMetrics.securityEvents}
              prefix={&lt;SecurityScanOutlined /&gt;}
              valueStyle={{ color: '#faad14' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Failed Logins&quot;
              value={securityMetrics.failedLogins}
              prefix={&lt;WarningOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Critical Events&quot;
              value={securityMetrics.criticalEvents}
              prefix={&lt;AlertOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Security Alerts */}
      {securityAlerts.length &gt; 0 &amp;&amp; (
        &lt;Card
          title={
            &lt;span&gt;
              &lt;AlertOutlined /&gt; Active Security Alerts
            &lt;/span&gt;
          }
          style={{ marginBottom: 24 }}
        &gt;
          {securityAlerts.map((alert) =&gt; (
            &lt;Alert
              key={alert.id}
              message={alert.title}
              description={alert.description}
              type={
                alert.severity === 'critical'
                  ? 'error'
                  : alert.severity === 'high'
                    ? 'warning'
                    : 'info'
              }
              showIcon
              style={{ marginBottom: 8 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Investigate
                &lt;/Button&gt;
              }
            /&gt;
          ))}
        &lt;/Card&gt;
      )}

      {/* Filters */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;FilterOutlined /&gt; Filters &amp; Search
          &lt;/span&gt;
        }
        style={{ marginBottom: 24 }}
        extra={
          &lt;Space&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadAuditData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
            &lt;Button icon={&lt;ExportOutlined /&gt;} onClick={() =&gt; setExportModalVisible(true)}&gt;
              Export
            &lt;/Button&gt;
            &lt;Button icon={&lt;CheckCircleOutlined /&gt;} onClick={generateComplianceReport}&gt;
              Generate Report
            &lt;/Button&gt;
          &lt;/Space&gt;
        }
      &gt;
        &lt;Space wrap style={{ marginBottom: 16 }}&gt;
          &lt;RangePicker
            value={dateRange}
            onChange={setDateRange}
            showTime
            format=&quot;YYYY-MM-DD HH:mm&quot;
            placeholder={['Start Date', 'End Date']}
          /&gt;

          &lt;Select
            placeholder=&quot;Select User&quot;
            value={selectedUser}
            onChange={setSelectedUser}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueUsers.map((user) =&gt; (
              &lt;Option key={user} value={user}&gt;
                {user}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Action&quot;
            value={selectedAction}
            onChange={setSelectedAction}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueActions.map((action) =&gt; (
              &lt;Option key={action} value={action}&gt;
                {action}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Resource&quot;
            value={selectedResource}
            onChange={setSelectedResource}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueResources.map((resource) =&gt; (
              &lt;Option key={resource} value={resource}&gt;
                {resource}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Severity&quot;
            value={selectedSeverity}
            onChange={setSelectedSeverity}
            allowClear
            style={{ width: 120 }}
          &gt;
            &lt;Option value=&quot;low&quot;&gt;Low&lt;/Option&gt;
            &lt;Option value=&quot;medium&quot;&gt;Medium&lt;/Option&gt;
            &lt;Option value=&quot;high&quot;&gt;High&lt;/Option&gt;
            &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Category&quot;
            value={selectedCategory}
            onChange={setSelectedCategory}
            allowClear
            style={{ width: 150 }}
          &gt;
            &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
            &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
            &lt;Option value=&quot;workflow&quot;&gt;Workflow&lt;/Option&gt;
            &lt;Option value=&quot;credential&quot;&gt;Credential&lt;/Option&gt;
            &lt;Option value=&quot;organization&quot;&gt;Organization&lt;/Option&gt;
            &lt;Option value=&quot;user_management&quot;&gt;User Management&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Button onClick={clearFilters}&gt;Clear Filters&lt;/Button&gt;
        &lt;/Space&gt;

        &lt;Search
          placeholder=&quot;Search events...&quot;
          value={searchTerm}
          onChange={(e) =&gt; setSearchTerm(e.target.value)}
          style={{ width: 300 }}
        /&gt;
      &lt;/Card&gt;

      {/* Audit Events Table */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;AuditOutlined /&gt; Audit Events ({filteredEvents.length})
          &lt;/span&gt;
        }
      &gt;
        &lt;Table
          dataSource={filteredEvents}
          columns={columns}
          rowKey=&quot;id&quot;
          loading={loading}
          pagination={{
            pageSize: 50,
            showSizeChanger: true,
            showQuickJumper: true,
            showTotal: (total, range) =&gt; `${range[0]}-${range[1]} of ${total} events`,
          }}
          scroll={{ x: 1200 }}
        /&gt;
      &lt;/Card&gt;

      {/* Event Details Modal */}
      &lt;Modal
        title=&quot;Event Details&quot;
        open={!!selectedEvent}
        onCancel={() =&gt; setSelectedEvent(null)}
        footer={null}
        width={800}
      &gt;
        {selectedEvent &amp;&amp; (
          &lt;Descriptions column={2} bordered&gt;
            &lt;Descriptions.Item label=&quot;Timestamp&quot;&gt;
              {selectedEvent.timestamp.toLocaleString()}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User&quot;&gt;
              {selectedEvent.userName} ({selectedEvent.userId})
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Action&quot;&gt;
              &lt;Tag color=&quot;blue&quot;&gt;{selectedEvent.action}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Resource&quot;&gt;
              &lt;Tag color=&quot;purple&quot;&gt;{selectedEvent.resource}&lt;/Tag&gt;
              {selectedEvent.resourceId &amp;&amp; ` (${selectedEvent.resourceId})`}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Result&quot;&gt;
              &lt;Tag color={getResultColor(selectedEvent.result)}&gt;{selectedEvent.result}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Severity&quot;&gt;
              &lt;Tag color={getSeverityColor(selectedEvent.severity)}&gt;{selectedEvent.severity}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Category&quot;&gt;
              &lt;Tag&gt;{selectedEvent.category}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;IP Address&quot;&gt;
              &lt;GlobalOutlined /&gt; {selectedEvent.ipAddress}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Organization&quot; span={2}&gt;
              {selectedEvent.organizationId || 'N/A'}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Details&quot; span={2}&gt;
              &lt;pre
                style={{
                  fontSize: '12px',
                  background: '#f5f5f5',
                  padding: '8px',
                  borderRadius: '4px',
                }}
              &gt;
                {JSON.stringify(selectedEvent.details, null, 2)}
              &lt;/pre&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User Agent&quot; span={2}&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                {selectedEvent.userAgent}
              &lt;/Text&gt;
            &lt;/Descriptions.Item&gt;
          &lt;/Descriptions&gt;
        )}
      &lt;/Modal&gt;

      {/* Export Modal */}
      &lt;Modal
        title=&quot;Export Audit Data&quot;
        open={exportModalVisible}
        onCancel={() =&gt; setExportModalVisible(false)}
        footer={null}
      &gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
          &lt;Text&gt;Select export format:&lt;/Text&gt;
          &lt;Space&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('json')} type=&quot;primary&quot;&gt;
              Export as JSON
            &lt;/Button&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('csv')}&gt;
              Export as CSV
            &lt;/Button&gt;
          &lt;/Space&gt;
          &lt;Text type=&quot;secondary&quot;&gt;
            Export will include all events within the selected date range.
          &lt;/Text&gt;
        &lt;/Space&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/AIWorkflowStudio.tsx (Line 1:1 - Line 51:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/aiworkflowstudio/AIWorkflowStudio.tsx (Line 1:1 - Line 50:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn354" onclick="toggleCodeBlock('cloneGroup354', 'expandBtn354', 'collapseBtn354')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn354" onclick="toggleCodeBlock('cloneGroup354', 'expandBtn354', 'collapseBtn354')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup354"><code class="language-tsx text-sm text-gray-800">import {
  AudioOutlined,
  BarChartOutlined,
  CloudUploadOutlined,
  CodeOutlined,
  ExperimentOutlined,
  EyeOutlined,
  FileImageOutlined,
  FileTextOutlined,
  PlayCircleOutlined,
  RobotOutlined,
  SettingOutlined,
  SoundOutlined,
  ThunderboltOutlined,
  VideoCameraOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Col,
  Divider,
  Input,
  InputNumber,
  Modal,
  message,
  Progress,
  Row,
  Select,
  Slider,
  Space,
  Statistic,
  Table,
  Tabs,
  Tag,
  Timeline,
  Typography,
  Upload,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  type AIModel,
  type AINodeConfig,
  type AIWorkflowExecution,
  aiOrchestrationService,
  type MultiModalWorkflow,
} from '@/core/services/aiOrchestrationService';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/AIWorkflowStudio.tsx (Line 49:41 - Line 759:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/aiworkflowstudio/AIWorkflowStudio.tsx (Line 51:19 - Line 761:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn355" onclick="toggleCodeBlock('cloneGroup355', 'expandBtn355', 'collapseBtn355')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn355" onclick="toggleCodeBlock('cloneGroup355', 'expandBtn355', 'collapseBtn355')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup355"><code class="language-tsx text-sm text-gray-800">;

const { Title, Text, Paragraph } = Typography;
const { TextArea } = Input;
const { Option } = Select;
const { Dragger } = Upload;

interface AIWorkflowStudioProps {
  visible: boolean;
  onClose: () =&gt; void;
}

export const AIWorkflowStudio: React.FC&lt;AIWorkflowStudioProps&gt; = ({ visible, onClose }) =&gt; {
  const [availableModels, setAvailableModels] = useState&lt;AIModel[]&gt;([]);
  const [selectedModel, setSelectedModel] = useState&lt;string&gt;('');
  const [nodeConfig, setNodeConfig] = useState&lt;Partial&lt;AINodeConfig&gt;&gt;({
    prompt: '',
    systemPrompt: '',
    temperature: 0.7,
    maxTokens: 1000,
  });
  const [currentExecution, setCurrentExecution] = useState&lt;AIWorkflowExecution | null&gt;(null);
  const [executionHistory, setExecutionHistory] = useState&lt;AIWorkflowExecution[]&gt;([]);
  const [isExecuting, setIsExecuting] = useState(false);
  const [activeTab, setActiveTab] = useState('builder');
  const [uploadedFiles, setUploadedFiles] = useState&lt;any[]&gt;([]);
  const [workflowInputs, setWorkflowInputs] = useState&lt;Record&lt;string, any&gt;&gt;({});

  useEffect(() =&gt; {
    if (visible) {
      loadAvailableModels();
    }
  }, [visible, loadAvailableModels]);

  const loadAvailableModels = () =&gt; {
    const models = aiOrchestrationService.getAvailableModels();
    setAvailableModels(models);
    if (models.length &gt; 0) {
      setSelectedModel(models[0].id);
    }
  };

  const handleExecuteWorkflow = async () =&gt; {
    if (!selectedModel) {
      message.error('Please select an AI model');
      return;
    }

    setIsExecuting(true);
    try {
      // Create a simple workflow for demonstration
      const workflow: Omit&lt;MultiModalWorkflow, 'id'&gt; = {
        name: 'AI Studio Workflow',
        description: 'Interactive AI workflow execution',
        inputTypes: ['text', 'image', 'audio'],
        outputTypes: ['text', 'structured_data'],
        nodes: [
          {
            id: 'main-node',
            type: 'ai_reasoning',
            config: {
              modelId: selectedModel,
              ...nodeConfig,
            } as AINodeConfig,
            dependencies: [],
            outputs: [],
            retryPolicy: {
              maxRetries: 2,
              backoffStrategy: 'exponential',
              retryConditions: ['error', 'low_confidence'],
              fallbackStrategy: 'different_model',
            },
          },
        ],
        edges: [],
        triggers: [{ type: 'manual', config: {}, enabled: true }],
        metadata: {
          version: '1.0.0',
          author: 'AI Studio',
          tags: ['interactive', 'multi-modal'],
          category: 'experimental',
          complexity: 'simple',
          estimatedCost: 0.1,
          estimatedTime: 5000,
          lastUpdated: new Date(),
        },
      };

      const createdWorkflow = await aiOrchestrationService.createMultiModalWorkflow(workflow);
      const execution = await aiOrchestrationService.executeWorkflow(
        createdWorkflow.id,
        workflowInputs
      );

      setCurrentExecution(execution);
      setExecutionHistory((prev: AIWorkflowExecution[]) =&gt; [execution, ...prev]);
      message.success('Workflow executed successfully!');
    } catch (error: any) {
      message.error(`Execution failed: ${error.message}`);
    } finally {
      setIsExecuting(false);
    }
  };

  const handleFileUpload = (file: any) =&gt; {
    const reader = new FileReader();
    reader.onload = (e) =&gt; {
      const fileData = {
        name: file.name,
        type: file.type,
        size: file.size,
        content: e.target?.result,
        timestamp: new Date(),
      };
      setUploadedFiles((prev: any[]) =&gt; [...prev, fileData]);
      setWorkflowInputs((prev: Record&lt;string, any&gt;) =&gt; ({
        ...prev,
        files: [...(prev.files || []), fileData],
      }));
    };

    if (file.type.startsWith('image/')) {
      reader.readAsDataURL(file);
    } else if (file.type.startsWith('audio/')) {
      reader.readAsArrayBuffer(file);
    } else {
      reader.readAsText(file);
    }

    return false; // Prevent auto upload
  };

  const getModelIcon = (model: AIModel) =&gt; {
    switch (model.type) {
      case 'language':
        return &lt;RobotOutlined /&gt;;
      case 'vision':
        return &lt;EyeOutlined /&gt;;
      case 'speech':
        return &lt;AudioOutlined /&gt;;
      case 'code':
        return &lt;CodeOutlined /&gt;;
      case 'multimodal':
        return &lt;ExperimentOutlined /&gt;;
      default:
        return &lt;ThunderboltOutlined /&gt;;
    }
  };

  const getModalityIcon = (modality: string) =&gt; {
    switch (modality) {
      case 'text':
        return &lt;FileTextOutlined /&gt;;
      case 'image':
        return &lt;FileImageOutlined /&gt;;
      case 'audio':
        return &lt;SoundOutlined /&gt;;
      case 'video':
        return &lt;VideoCameraOutlined /&gt;;
      default:
        return &lt;FileTextOutlined /&gt;;
    }
  };

  const executionColumns = [
    {
      title: 'ID',
      dataIndex: 'id',
      key: 'id',
      width: 120,
      render: (id: string) =&gt; &lt;Text code&gt;{id.slice(-8)}&lt;/Text&gt;,
    },
    {
      title: 'Status',
      dataIndex: 'status',
      key: 'status',
      width: 100,
      render: (status: string) =&gt; {
        const color = status === 'completed' ? 'green' : status === 'failed' ? 'red' : 'blue';
        return &lt;Tag color={color}&gt;{status}&lt;/Tag&gt;;
      },
    },
    {
      title: 'Quality',
      dataIndex: 'qualityScore',
      key: 'qualityScore',
      width: 100,
      render: (score: number) =&gt; (
        &lt;Progress
          percent={Math.round(score * 100)}
          size=&quot;small&quot;
          status={score &gt;= 0.8 ? 'success' : score &gt;= 0.6 ? 'normal' : 'exception'}
        /&gt;
      ),
    },
    {
      title: 'Cost',
      dataIndex: 'totalCost',
      key: 'totalCost',
      width: 80,
      render: (cost: number) =&gt; &lt;Text&gt;${cost.toFixed(4)}&lt;/Text&gt;,
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (_: unknown, record: AIWorkflowExecution) =&gt; {
        if (!record.endTime) return '-';
        const duration = record.endTime.getTime() - record.startTime.getTime();
        return &lt;Text&gt;{(duration / 1000).toFixed(1)}s&lt;/Text&gt;;
      },
    },
  ];

  const tabs = [
    {
      key: 'builder',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          AI Builder
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Row gutter={[24, 24]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card title=&quot;AI Model Configuration&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Select AI Model&lt;/Text&gt;
                    &lt;Select
                      value={selectedModel}
                      onChange={setSelectedModel}
                      style={{ width: '100%', marginTop: 8 }}
                      placeholder=&quot;Choose an AI model&quot;
                    &gt;
                      {availableModels.map((model) =&gt; (
                        &lt;Option key={model.id} value={model.id}&gt;
                          &lt;div
                            style={{
                              display: 'flex',
                              alignItems: 'center',
                              justifyContent: 'space-between',
                            }}
                          &gt;
                            &lt;span&gt;
                              {getModelIcon(model)} {model.name}
                            &lt;/span&gt;
                            &lt;div&gt;
                              &lt;Tag&gt;{model.provider}&lt;/Tag&gt;
                              &lt;Tag color=&quot;blue&quot;&gt;${model.costPer1kTokens}/1k&lt;/Tag&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/Option&gt;
                      ))}
                    &lt;/Select&gt;
                  &lt;/div&gt;

                  {selectedModel &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      return (
                        &lt;div&gt;
                          &lt;Divider style={{ margin: '16px 0' }} /&gt;
                          &lt;div style={{ marginBottom: 16 }}&gt;
                            &lt;Text strong&gt;Model Details&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              &lt;div&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Type:&lt;/Text&gt; &lt;Tag&gt;{model.type}&lt;/Tag&gt;
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Input:&lt;/Text&gt;
                                {model.inputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Output:&lt;/Text&gt;
                                {model.outputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Context Window:&lt;/Text&gt;{' '}
                                &lt;Text&gt;{model.contextWindow.toLocaleString()} tokens&lt;/Text&gt;
                              &lt;/div&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;

                          &lt;div&gt;
                            &lt;Text strong&gt;Capabilities&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              {model.capabilities.map((cap) =&gt; (
                                &lt;Tag key={cap.name} color=&quot;purple&quot;&gt;
                                  {cap.name} ({cap.proficiency}/5)
                                &lt;/Tag&gt;
                              ))}
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      );
                    })()}

                  &lt;Divider /&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;Main Prompt&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.prompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          prompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter your main prompt here...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;System Prompt (Optional)&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.systemPrompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          systemPrompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter system instructions...&quot;
                      rows={3}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;Row gutter={16}&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Temperature&lt;/Text&gt;
                        &lt;Slider
                          min={0}
                          max={2}
                          step={0.1}
                          value={nodeConfig.temperature}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              temperature: value,
                            }))
                          }
                          style={{ marginTop: 8 }}
                        /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;Current: {nodeConfig.temperature}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Max Tokens&lt;/Text&gt;
                        &lt;InputNumber
                          min={1}
                          max={
                            selectedModel
                              ? availableModels.find((m) =&gt; m.id === selectedModel)?.maxTokens
                              : 4096
                          }
                          value={nodeConfig.maxTokens}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              maxTokens: value || 1000,
                            }))
                          }
                          style={{ width: '100%', marginTop: 8 }}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;

            &lt;Col span={12}&gt;
              &lt;Card title=&quot;Multi-Modal Inputs&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Text Input&lt;/Text&gt;
                    &lt;TextArea
                      value={workflowInputs.text || ''}
                      onChange={(e) =&gt;
                        setWorkflowInputs((prev) =&gt; ({
                          ...prev,
                          text: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter text input for the AI model...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;File Uploads&lt;/Text&gt;
                    &lt;Dragger
                      multiple
                      beforeUpload={handleFileUpload}
                      showUploadList={false}
                      style={{ marginTop: 8 }}
                    &gt;
                      &lt;p className=&quot;ant-upload-drag-icon&quot;&gt;
                        &lt;CloudUploadOutlined /&gt;
                      &lt;/p&gt;
                      &lt;p className=&quot;ant-upload-text&quot;&gt;Click or drag files to upload&lt;/p&gt;
                      &lt;p className=&quot;ant-upload-hint&quot;&gt;
                        Support for images, audio, video, and documents
                      &lt;/p&gt;
                    &lt;/Dragger&gt;
                  &lt;/div&gt;

                  {uploadedFiles.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      &lt;Text strong&gt;Uploaded Files&lt;/Text&gt;
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {uploadedFiles.map((file, index) =&gt; (
                          &lt;Tag
                            key={index}
                            icon={getModalityIcon(file.type.split('/')[0])}
                            style={{ marginBottom: 4, marginRight: 4 }}
                          &gt;
                            {file.name}
                          &lt;/Tag&gt;
                        ))}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  &lt;Divider /&gt;

                  &lt;Button
                    type=&quot;primary&quot;
                    size=&quot;large&quot;
                    onClick={handleExecuteWorkflow}
                    loading={isExecuting}
                    disabled={!selectedModel || !nodeConfig.prompt}
                    icon={&lt;PlayCircleOutlined /&gt;}
                    style={{ width: '100%' }}
                  &gt;
                    {isExecuting ? 'Executing...' : 'Execute AI Workflow'}
                  &lt;/Button&gt;

                  {selectedModel &amp;&amp;
                    nodeConfig.prompt &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      const estimatedTokens = Math.ceil((nodeConfig.prompt?.length || 0) / 4);
                      const estimatedCost = (estimatedTokens / 1000) * model.costPer1kTokens;

                      return (
                        &lt;Alert
                          message=&quot;Execution Estimate&quot;
                          description={
                            &lt;div&gt;
                              &lt;div&gt;Estimated tokens: ~{estimatedTokens}&lt;/div&gt;
                              &lt;div&gt;Estimated cost: ${estimatedCost.toFixed(4)}&lt;/div&gt;
                            &lt;/div&gt;
                          }
                          type=&quot;info&quot;
                          showIcon
                        /&gt;
                      );
                    })()}
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'execution',
      label: (
        &lt;span&gt;
          &lt;PlayCircleOutlined /&gt;
          Execution Results
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          {currentExecution ? (
            &lt;Row gutter={[24, 24]}&gt;
              &lt;Col span={24}&gt;
                &lt;Card title={`Execution ${currentExecution.id.slice(-8)}`} size=&quot;small&quot;&gt;
                  &lt;Row gutter={16}&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Status&quot;
                        value={currentExecution.status}
                        valueStyle={{
                          color: currentExecution.status === 'completed' ? '#3f8600' : '#cf1322',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Quality Score&quot;
                        value={Math.round(currentExecution.qualityScore * 100)}
                        suffix=&quot;%&quot;
                        valueStyle={{
                          color: currentExecution.qualityScore &gt;= 0.8 ? '#3f8600' : '#fa8c16',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Total Cost&quot;
                        value={currentExecution.totalCost}
                        prefix=&quot;$&quot;
                        precision={4}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic title=&quot;Tokens Used&quot; value={currentExecution.totalTokens} /&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Node Executions&quot; size=&quot;small&quot;&gt;
                  &lt;Timeline&gt;
                    {currentExecution.nodeExecutions.map((nodeExec, index) =&gt; (
                      &lt;Timeline.Item
                        key={index}
                        color={
                          nodeExec.status === 'completed'
                            ? 'green'
                            : nodeExec.status === 'failed'
                              ? 'red'
                              : 'blue'
                        }
                      &gt;
                        &lt;div&gt;
                          &lt;Text strong&gt;Node {nodeExec.nodeId}&lt;/Text&gt;
                          &lt;div style={{ marginTop: 4 }}&gt;
                            &lt;Tag color={nodeExec.status === 'completed' ? 'green' : 'red'}&gt;
                              {nodeExec.status}
                            &lt;/Tag&gt;
                            &lt;Text type=&quot;secondary&quot;&gt;
                              {nodeExec.endTime
                                ? `${((nodeExec.endTime.getTime() - nodeExec.startTime.getTime()) / 1000).toFixed(1)}s`
                                : 'Running...'}
                            &lt;/Text&gt;
                          &lt;/div&gt;
                          {nodeExec.outputs.length &gt; 0 &amp;&amp; (
                            &lt;div
                              style={{
                                marginTop: 8,
                                padding: 8,
                                background: '#f5f5f5',
                                borderRadius: 4,
                              }}
                            &gt;
                              &lt;Text style={{ fontSize: '12px' }}&gt;
                                {typeof nodeExec.outputs[0].content === 'string'
                                  ? nodeExec.outputs[0].content.slice(0, 200) +
                                    (nodeExec.outputs[0].content.length &gt; 200 ? '...' : '')
                                  : JSON.stringify(nodeExec.outputs[0].content).slice(0, 200)}
                              &lt;/Text&gt;
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;
                      &lt;/Timeline.Item&gt;
                    ))}
                  &lt;/Timeline&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Quality Metrics&quot; size=&quot;small&quot;&gt;
                  {currentExecution.nodeExecutions.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      {Object.entries(currentExecution.nodeExecutions[0].qualityMetrics).map(
                        ([metric, value]) =&gt; (
                          &lt;div key={metric} style={{ marginBottom: 8 }}&gt;
                            &lt;div
                              style={{
                                display: 'flex',
                                justifyContent: 'space-between',
                                marginBottom: 4,
                              }}
                            &gt;
                              &lt;Text&gt;{metric.charAt(0).toUpperCase() + metric.slice(1)}&lt;/Text&gt;
                              &lt;Text&gt;{Math.round(value * 100)}%&lt;/Text&gt;
                            &lt;/div&gt;
                            &lt;Progress
                              percent={Math.round(value * 100)}
                              size=&quot;small&quot;
                              status={
                                value &gt;= 0.8 ? 'success' : value &gt;= 0.6 ? 'normal' : 'exception'
                              }
                              showInfo={false}
                            /&gt;
                          &lt;/div&gt;
                        )
                      )}
                    &lt;/div&gt;
                  )}
                &lt;/Card&gt;

                {currentExecution.insights.length &gt; 0 &amp;&amp; (
                  &lt;Card title=&quot;AI Insights&quot; size=&quot;small&quot; style={{ marginTop: 16 }}&gt;
                    &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                      {currentExecution.insights.map((insight, index) =&gt; (
                        &lt;Alert
                          key={index}
                          message={insight.message}
                          description={insight.recommendation}
                          type={insight.impact === 'high' ? 'warning' : 'info'}
                          showIcon
                          style={{ fontSize: '12px' }}
                        /&gt;
                      ))}
                    &lt;/Space&gt;
                  &lt;/Card&gt;
                )}
              &lt;/Col&gt;
            &lt;/Row&gt;
          ) : (
            &lt;div style={{ textAlign: 'center', padding: '48px' }}&gt;
              &lt;ExperimentOutlined style={{ fontSize: '48px', color: '#d9d9d9' }} /&gt;
              &lt;Title level={4} type=&quot;secondary&quot;&gt;
                No execution results yet
              &lt;/Title&gt;
              &lt;Paragraph type=&quot;secondary&quot;&gt;
                Execute a workflow from the AI Builder tab to see results here
              &lt;/Paragraph&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'history',
      label: (
        &lt;span&gt;
          &lt;BarChartOutlined /&gt;
          Execution History
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Card title=&quot;Execution History&quot; size=&quot;small&quot;&gt;
            &lt;Table
              dataSource={executionHistory}
              columns={executionColumns}
              rowKey=&quot;id&quot;
              pagination={{ pageSize: 10 }}
              onRow={(record) =&gt; ({
                onClick: () =&gt; setCurrentExecution(record),
              })}
              style={{ cursor: 'pointer' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;Modal
      title={
        &lt;div style={{ display: 'flex', alignItems: 'center' }}&gt;
          &lt;ExperimentOutlined style={{ marginRight: 8 }} /&gt;
          AI Workflow Studio
          &lt;Badge count=&quot;Beta&quot; style={{ marginLeft: 8 }} /&gt;
        &lt;/div&gt;
      }
      open={visible}
      onCancel={onClose}
      footer={null}
      width=&quot;90%&quot;
      style={{ top: 20 }}
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabs}
        style={{ minHeight: '70vh' }}
      /&gt;
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/ui/src/components/base/modal.tsx (Line 94:11 - Line 107:23), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 346:2 - Line 359:28)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn409" onclick="toggleCodeBlock('cloneGroup409', 'expandBtn409', 'collapseBtn409')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn409" onclick="toggleCodeBlock('cloneGroup409', 'expandBtn409', 'collapseBtn409')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup409"><code class="language-tsx text-sm text-gray-800">&gt;
            &lt;svg className=&quot;w-6 h-6&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
              &lt;path
                strokeLinecap=&quot;round&quot;
                strokeLinejoin=&quot;round&quot;
                strokeWidth={2}
                d=&quot;M6 18L18 6M6 6l12 12&quot;
              /&gt;
            &lt;/svg&gt;
          &lt;/button&gt;
        &lt;/div&gt;

        {/* Content */}
        &lt;div className=&quot;flex-1 overflow-y-auto</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 1:1 - Line 525:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/terms/Terms.tsx (Line 2:1 - Line 526:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn476" onclick="toggleCodeBlock('cloneGroup476', 'expandBtn476', 'collapseBtn476')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn476" onclick="toggleCodeBlock('cloneGroup476', 'expandBtn476', 'collapseBtn476')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup476"><code class="language-tsx text-sm text-gray-800">/**
 * Terms of Service Page
 *
 * Terms of service and legal information for Reporunner
 */

import {
  AlertTriangle,
  Calendar,
  CheckCircle,
  Download,
  ExternalLink,
  Eye,
  FileText,
  Globe,
  Mail,
  Scale,
  Shield,
  Users,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const Terms: React.FC = () =&gt; {
  const [lastUpdated] = useState('January 20, 2025');
  const [activeSection, setActiveSection] = useState('overview');

  const sections = [
    { id: 'overview', title: 'Overview', icon: Eye },
    { id: 'acceptance', title: 'Acceptance', icon: CheckCircle },
    { id: 'services', title: 'Services', icon: Globe },
    { id: 'accounts', title: 'User Accounts', icon: Users },
    { id: 'usage', title: 'Acceptable Use', icon: Shield },
    { id: 'privacy', title: 'Privacy &amp; Data', icon: FileText },
    { id: 'payment', title: 'Payment Terms', icon: Scale },
    { id: 'termination', title: 'Termination', icon: AlertTriangle },
    { id: 'liability', title: 'Liability', icon: Scale },
    { id: 'changes', title: 'Updates', icon: Calendar },
  ];

  const keyTerms = [
    {
      term: 'Service Availability',
      description: '99.9% uptime SLA for Professional and Enterprise plans',
      details:
        'We guarantee high availability with scheduled maintenance windows and transparent status updates.',
    },
    {
      term: 'Data Ownership',
      description: 'You retain complete ownership of all your data',
      details:
        'Your workflow data, configurations, and business information always remain yours. We never claim ownership.',
    },
    {
      term: 'Self-Hosted Benefits',
      description: 'Complete control over your deployment and data',
      details:
        'When self-hosting, you control all aspects of data storage, processing, and access. We provide software only.',
    },
    {
      term: 'Open Source Licensing',
      description: 'Core platform available under Apache 2.0 license',
      details:
        'You can modify, distribute, and use our open source components according to the Apache 2.0 license terms.',
    },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Terms of{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Service
              &lt;/span&gt;
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Clear, fair terms that protect both you and Reporunner. We believe in transparent
              agreements that build trust.
            &lt;/p&gt;

            &lt;div className=&quot;bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 mb-8&quot;&gt;
              &lt;div className=&quot;flex items-center justify-center gap-2 text-white mb-4&quot;&gt;
                &lt;Calendar className=&quot;w-5 h-5&quot; /&gt;
                &lt;span&gt;Last Updated: {lastUpdated}&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-sm text-slate-300&quot;&gt;
                We'll notify you 30 days before any material changes take effect
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;Download className=&quot;w-5 h-5&quot; /&gt;
                Download PDF
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                &lt;Mail className=&quot;w-5 h-5&quot; /&gt;
                Ask Legal Team
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Key Terms Summary */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Key Terms Summary&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              The most important points from our terms of service
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            {keyTerms.map((item, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
              &gt;
                &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-3&quot;&gt;{item.term}&lt;/h3&gt;
                &lt;p className=&quot;text-blue-600 font-medium mb-3&quot;&gt;{item.description}&lt;/p&gt;
                &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{item.details}&lt;/p&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Detailed Terms */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Complete Terms&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Detailed terms and conditions for using Reporunner
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;
              {/* Sidebar Navigation */}
              &lt;div className=&quot;lg:w-1/4&quot;&gt;
                &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6 sticky top-6&quot;&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-4&quot;&gt;Sections&lt;/h3&gt;
                  &lt;nav className=&quot;space-y-2&quot;&gt;
                    {sections.map((section) =&gt; {
                      const Icon = section.icon;
                      return (
                        &lt;button
                          key={section.id}
                          onClick={() =&gt; setActiveSection(section.id)}
                          className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${
                            activeSection === section.id
                              ? 'bg-blue-50 text-blue-700 border border-blue-200'
                              : 'text-gray-700 hover:bg-gray-50'
                          }`}
                        &gt;
                          &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                          &lt;span className=&quot;font-medium&quot;&gt;{section.title}&lt;/span&gt;
                        &lt;/button&gt;
                      );
                    })}
                  &lt;/nav&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Main Content */}
              &lt;div className=&quot;lg:w-3/4&quot;&gt;
                &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-8&quot;&gt;
                  {activeSection === 'overview' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Overview&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          Welcome to Reporunner. These Terms of Service (&quot;Terms&quot;) govern your use of
                          our workflow automation platform and services. By accessing or using
                          Reporunner, you agree to be bound by these Terms.
                        &lt;/p&gt;
                        &lt;p&gt;
                          Reporunner is a self-hosted workflow automation platform that enables you
                          to automate business processes with complete data sovereignty. Our
                          services include the core platform software, enterprise features, and
                          related support services.
                        &lt;/p&gt;
                        &lt;p&gt;
                          These Terms apply to all users, including individuals, businesses, and
                          enterprise organizations. Different service tiers may have additional
                          terms as outlined in your subscription agreement.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'acceptance' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Acceptance of Terms&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          By accessing, browsing, or using Reporunner, you acknowledge that you have
                          read, understood, and agree to be bound by these Terms and all applicable
                          laws and regulations.
                        &lt;/p&gt;
                        &lt;p&gt;
                          If you are using Reporunner on behalf of an organization, you represent
                          that you have the authority to bind that organization to these Terms, and
                          &quot;you&quot; refers to both you individually and the organization.
                        &lt;/p&gt;
                        &lt;p&gt;
                          If you do not agree with any part of these Terms, you must not use our
                          services.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'services' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Our Services&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          Reporunner provides workflow automation software and services, including:
                        &lt;/p&gt;
                        &lt;ul&gt;
                          &lt;li&gt;Self-hosted workflow automation platform&lt;/li&gt;
                          &lt;li&gt;Integration with third-party services and APIs&lt;/li&gt;
                          &lt;li&gt;AI and machine learning capabilities&lt;/li&gt;
                          &lt;li&gt;Enterprise security and compliance features&lt;/li&gt;
                          &lt;li&gt;Technical support and professional services&lt;/li&gt;
                        &lt;/ul&gt;
                        &lt;p&gt;
                          We reserve the right to modify, suspend, or discontinue any part of our
                          services at any time with reasonable notice. We will not be liable for any
                          modification, suspension, or discontinuation of services.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'accounts' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;User Accounts&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          To use certain features of Reporunner, you must create an account. You are
                          responsible for:
                        &lt;/p&gt;
                        &lt;ul&gt;
                          &lt;li&gt;Providing accurate and complete registration information&lt;/li&gt;
                          &lt;li&gt;Maintaining the security of your account credentials&lt;/li&gt;
                          &lt;li&gt;All activities that occur under your account&lt;/li&gt;
                          &lt;li&gt;Notifying us immediately of any unauthorized access&lt;/li&gt;
                        &lt;/ul&gt;
                        &lt;p&gt;
                          You may not share your account credentials or allow others to access your
                          account. We reserve the right to suspend or terminate accounts that
                          violate these Terms.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'usage' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Acceptable Use Policy&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          You agree to use Reporunner only for lawful purposes and in accordance
                          with these Terms. You must not:
                        &lt;/p&gt;
                        &lt;ul&gt;
                          &lt;li&gt;
                            Use the service for any illegal, harmful, or fraudulent activities
                          &lt;/li&gt;
                          &lt;li&gt;
                            Attempt to gain unauthorized access to our systems or other users'
                            accounts
                          &lt;/li&gt;
                          &lt;li&gt;Distribute malware, viruses, or other malicious code&lt;/li&gt;
                          &lt;li&gt;Spam, harass, or abuse other users or our support team&lt;/li&gt;
                          &lt;li&gt;
                            Reverse engineer, decompile, or attempt to extract source code (except
                            as permitted by law)
                          &lt;/li&gt;
                          &lt;li&gt;Use the service to compete with or build a similar product&lt;/li&gt;
                        &lt;/ul&gt;
                        &lt;p&gt;
                          Violation of this policy may result in immediate suspension or termination
                          of your account.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'privacy' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;
                        Privacy and Data Protection
                      &lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          Your privacy is important to us. Our Privacy Policy, which is incorporated
                          into these Terms by reference, explains how we collect, use, and protect
                          your information.
                        &lt;/p&gt;
                        &lt;p&gt;
                          For self-hosted deployments, you maintain complete control over your data.
                          We do not have access to your workflow data, credentials, or business
                          information stored in your self-hosted instance.
                        &lt;/p&gt;
                        &lt;p&gt;
                          You are responsible for ensuring your use of Reporunner complies with
                          applicable data protection laws, including GDPR, CCPA, and HIPAA where
                          applicable.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'payment' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Payment Terms&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          Paid services are billed in advance on a monthly or annual basis. By
                          providing payment information, you authorize us to charge the applicable
                          fees.
                        &lt;/p&gt;
                        &lt;ul&gt;
                          &lt;li&gt;Fees are non-refundable except as required by law&lt;/li&gt;
                          &lt;li&gt;We may change pricing with 30 days' notice&lt;/li&gt;
                          &lt;li&gt;Accounts may be suspended for non-payment&lt;/li&gt;
                          &lt;li&gt;Enterprise customers may have custom payment terms&lt;/li&gt;
                        &lt;/ul&gt;
                        &lt;p&gt;
                          All payments are processed securely through our payment partners. We do
                          not store your payment information.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'termination' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Termination&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          You may terminate your account at any time by contacting our support team.
                          Upon termination:
                        &lt;/p&gt;
                        &lt;ul&gt;
                          &lt;li&gt;Your access to paid features will be suspended&lt;/li&gt;
                          &lt;li&gt;Your data will be retained for 30 days for recovery purposes&lt;/li&gt;
                          &lt;li&gt;After 30 days, your data will be permanently deleted&lt;/li&gt;
                          &lt;li&gt;Self-hosted installations continue to function independently&lt;/li&gt;
                        &lt;/ul&gt;
                        &lt;p&gt;
                          We may terminate or suspend your account immediately if you violate these
                          Terms or for other legitimate business reasons.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'liability' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Limitation of Liability&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          To the maximum extent permitted by law, Reporunner shall not be liable for
                          any indirect, incidental, special, consequential, or punitive damages, or
                          any loss of profits or revenues.
                        &lt;/p&gt;
                        &lt;p&gt;
                          Our total liability to you for any cause whatsoever shall not exceed the
                          amount paid by you to Reporunner in the twelve (12) months preceding the
                          claim.
                        &lt;/p&gt;
                        &lt;p&gt;
                          Some jurisdictions do not allow the exclusion or limitation of liability
                          for consequential or incidental damages, so the above limitation may not
                          apply to you.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {activeSection === 'changes' &amp;&amp; (
                    &lt;div className=&quot;space-y-6&quot;&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Changes to Terms&lt;/h3&gt;
                      &lt;div className=&quot;prose prose-gray max-w-none&quot;&gt;
                        &lt;p&gt;
                          We may update these Terms from time to time. When we make material
                          changes, we will:
                        &lt;/p&gt;
                        &lt;ul&gt;
                          &lt;li&gt;Notify you at least 30 days before the changes take effect&lt;/li&gt;
                          &lt;li&gt;Post the updated Terms on our website&lt;/li&gt;
                          &lt;li&gt;Update the &quot;Last Updated&quot; date&lt;/li&gt;
                          &lt;li&gt;Send email notifications to registered users&lt;/li&gt;
                        &lt;/ul&gt;
                        &lt;p&gt;
                          Your continued use of Reporunner after the effective date constitutes
                          acceptance of the updated Terms. If you don't agree to the changes, you
                          must stop using our services.
                        &lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Important Notice */}
      &lt;section className=&quot;py-16 bg-orange-50 border-y border-orange-200&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;flex items-start gap-4&quot;&gt;
              &lt;AlertTriangle className=&quot;w-8 h-8 text-orange-600 mt-1 flex-shrink-0&quot; /&gt;
              &lt;div&gt;
                &lt;h3 className=&quot;text-xl font-bold text-orange-900 mb-3&quot;&gt;Important Legal Notice&lt;/h3&gt;
                &lt;div className=&quot;text-orange-800 space-y-3&quot;&gt;
                  &lt;p&gt;
                    These Terms of Service constitute a legally binding agreement. Please read them
                    carefully and contact our legal team if you have any questions.
                  &lt;/p&gt;
                  &lt;p&gt;
                    For enterprise customers, additional terms may apply as outlined in your Master
                    Service Agreement or other executed contracts.
                  &lt;/p&gt;
                  &lt;p&gt;
                    These Terms are governed by the laws of Delaware, USA, and any disputes will be
                    resolved in Delaware courts.
                  &lt;/p&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Contact Legal Team */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Questions About Our Terms?&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600 mb-8&quot;&gt;
              Our legal team is here to help clarify any questions about our terms of service.
            &lt;/p&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              &lt;div className=&quot;bg-gray-50 border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;Mail className=&quot;w-8 h-8 text-blue-600 mx-auto mb-4&quot; /&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Legal Team&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;General legal questions&lt;/p&gt;
                &lt;button className=&quot;text-blue-600 font-medium hover:text-blue-700 transition-colors&quot;&gt;
                  legal@reporunner.dev
                &lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;bg-gray-50 border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;Scale className=&quot;w-8 h-8 text-green-600 mx-auto mb-4&quot; /&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Enterprise Contracts&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;Custom terms and MSAs&lt;/p&gt;
                &lt;button className=&quot;text-green-600 font-medium hover:text-green-700 transition-colors&quot;&gt;
                  enterprise@reporunner.dev
                &lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;bg-gray-50 border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;FileText className=&quot;w-8 h-8 text-purple-600 mx-auto mb-4&quot; /&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Compliance&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;GDPR, HIPAA, and compliance&lt;/p&gt;
                &lt;button className=&quot;text-purple-600 font-medium hover:text-purple-700 transition-colors&quot;&gt;
                  compliance@reporunner.dev
                &lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Get Started?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            By using Reporunner, you agree to these Terms of Service. Start building powerful
            workflows today.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;CheckCircle className=&quot;w-5 h-5&quot; /&gt;
              Accept &amp; Start Trial
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
              Read Privacy Policy
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Terms;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Settings.tsx (Line 3:9 - Line 435:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/settings/Settings.tsx (Line 6:19 - Line 438:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn478" onclick="toggleCodeBlock('cloneGroup478', 'expandBtn478', 'collapseBtn478')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn478" onclick="toggleCodeBlock('cloneGroup478', 'expandBtn478', 'collapseBtn478')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup478"><code class="language-tsx text-sm text-gray-800">;

const authApiService = new AuthApiService();

interface SettingsData {
  profile: {
    name: string;
    email: string;
    timezone: string;
  };
  notifications: {
    emailNotifications: boolean;
    workflowFailures: boolean;
    weeklyReports: boolean;
    maintenanceUpdates: boolean;
  };
  security: {
    twoFactorAuth: boolean;
    sessionTimeout: number;
    apiAccess: boolean;
  };
  preferences: {
    theme: 'light' | 'dark' | 'auto';
    language: string;
    defaultWorkflowPrivacy: 'private' | 'team' | 'public';
  };
}

const Settings: React.FC = () =&gt; {
  const [settings, setSettings] = useState&lt;SettingsData&gt;({
    profile: {
      name: '',
      email: '',
      timezone: 'UTC-5',
    },
    notifications: {
      emailNotifications: true,
      workflowFailures: true,
      weeklyReports: false,
      maintenanceUpdates: true,
    },
    security: {
      twoFactorAuth: false,
      sessionTimeout: 60,
      apiAccess: true,
    },
    preferences: {
      theme: 'light',
      language: 'en',
      defaultWorkflowPrivacy: 'private',
    },
  });

  const [activeTab, setActiveTab] = useState&lt;
    'profile' | 'notifications' | 'security' | 'preferences'
  &gt;('profile');
  const [isSaving, setIsSaving] = useState(false);
  const [_isLoading, setIsLoading] = useState(false);

  const loadUserProfile = useCallback(async () =&gt; {
    setIsLoading(true);
    try {
      const user = await authApiService.getProfile();
      setSettings((prev) =&gt; ({
        ...prev,
        profile: {
          name: `${user.firstName} ${user.lastName}`,
          email: user.email,
          timezone: 'UTC-5', // Default, could be stored in user profile
        },
      }));
    } catch (_error) {
    } finally {
      setIsLoading(false);
    }
  }, []);

  useEffect(() =&gt; {
    loadUserProfile();
  }, [loadUserProfile]);

  const handleSave = async () =&gt; {
    setIsSaving(true);
    try {
      // Update profile information
      if (activeTab === 'profile') {
        const names = settings.profile.name.split(' ');
        await authApiService.updateProfile({
          firstName: names[0] || '',
          lastName: names.slice(1).join(' ') || '',
        });
      }

      // For other settings, you would call appropriate API endpoints
      // For now, just show success message
      alert('Settings saved successfully!');
    } catch (_error) {
      alert('Failed to save settings. Please try again.');
    } finally {
      setIsSaving(false);
    }
  };

  const updateSetting = (section: keyof SettingsData, key: string, value: any) =&gt; {
    setSettings((prev) =&gt; ({
      ...prev,
      [section]: {
        ...prev[section],
        [key]: value,
      },
    }));
  };

  const tabs = [
    { id: 'profile', name: 'Profile', icon: '👤' },
    { id: 'notifications', name: 'Notifications', icon: '🔔' },
    { id: 'security', name: 'Security', icon: '🔒' },
    { id: 'preferences', name: 'Preferences', icon: '⚙️' },
  ];

  return (
    &lt;div className=&quot;p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-8&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-white&quot;&gt;Settings&lt;/h1&gt;
        &lt;p className=&quot;text-slate-300&quot;&gt;Manage your account and application preferences&lt;/p&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex gap-8&quot;&gt;
        {/* Sidebar */}
        &lt;div className=&quot;w-64&quot;&gt;
          &lt;nav className=&quot;space-y-2&quot;&gt;
            {tabs.map((tab) =&gt; (
              &lt;button
                key={tab.id}
                onClick={() =&gt; setActiveTab(tab.id as any)}
                className={`w-full flex items-center px-4 py-3 text-left rounded-lg transition-all duration-300 ${
                  activeTab === tab.id
                    ? 'bg-white/20 text-blue-300 backdrop-blur-sm border border-white/30'
                    : 'text-slate-300 hover:bg-white/10 hover:text-white'
                }`}
              &gt;
                &lt;span className=&quot;mr-3 text-lg&quot;&gt;{tab.icon}&lt;/span&gt;
                {tab.name}
              &lt;/button&gt;
            ))}
          &lt;/nav&gt;
        &lt;/div&gt;

        {/* Content */}
        &lt;div className=&quot;flex-1&quot;&gt;
          &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
            {/* Profile Tab */}
            {activeTab === 'profile' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Profile Information&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Full Name
                    &lt;/label&gt;
                    &lt;input
                      aria-label=&quot;Profile Name&quot;
                      type=&quot;text&quot;
                      value={settings.profile.name}
                      onChange={(e) =&gt; updateSetting('profile', 'name', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Email Address
                    &lt;/label&gt;
                    &lt;input
                      aria-label=&quot;email&quot;
                      type=&quot;email&quot;
                      value={settings.profile.email}
                      onChange={(e) =&gt; updateSetting('profile', 'email', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Timezone
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;timezone&quot;
                      value={settings.profile.timezone}
                      onChange={(e) =&gt; updateSetting('profile', 'timezone', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;UTC-8&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC-8 (Pacific)
                      &lt;/option&gt;
                      &lt;option value=&quot;UTC-5&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC-5 (Eastern)
                      &lt;/option&gt;
                      &lt;option value=&quot;UTC+0&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC+0 (GMT)
                      &lt;/option&gt;
                      &lt;option value=&quot;UTC+1&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        UTC+1 (Central European)
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Notifications Tab */}
            {activeTab === 'notifications' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Notification Preferences&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  {[
                    {
                      key: 'emailNotifications',
                      label: 'Email Notifications',
                      description: 'Receive notifications via email',
                    },
                    {
                      key: 'workflowFailures',
                      label: 'Workflow Failures',
                      description: 'Get notified when workflows fail',
                    },
                    {
                      key: 'weeklyReports',
                      label: 'Weekly Reports',
                      description: 'Receive weekly summary reports',
                    },
                    {
                      key: 'maintenanceUpdates',
                      label: 'Maintenance Updates',
                      description: 'System maintenance notifications',
                    },
                  ].map((item) =&gt; (
                    &lt;div key={item.key} className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;div&gt;
                        &lt;h3 className=&quot;text-sm font-medium text-white&quot;&gt;{item.label}&lt;/h3&gt;
                        &lt;p className=&quot;text-sm text-slate-300&quot;&gt;{item.description}&lt;/p&gt;
                      &lt;/div&gt;
                      &lt;label className=&quot;relative inline-flex items-center cursor-pointer&quot;&gt;
                        &lt;input
                          aria-label=&quot;notifications&quot;
                          type=&quot;checkbox&quot;
                          checked={
                            settings.notifications[item.key as keyof typeof settings.notifications]
                          }
                          onChange={(e) =&gt;
                            updateSetting('notifications', item.key, e.target.checked)
                          }
                          className=&quot;sr-only peer&quot;
                        /&gt;
                        &lt;div className=&quot;w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-400/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/30 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500&quot;&gt;&lt;/div&gt;
                      &lt;/label&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Security Tab */}
            {activeTab === 'security' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Security Settings&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                    &lt;div&gt;
                      &lt;h3 className=&quot;text-sm font-medium text-white&quot;&gt;Two-Factor Authentication&lt;/h3&gt;
                      &lt;p className=&quot;text-sm text-slate-300&quot;&gt;
                        Add an extra layer of security to your account
                      &lt;/p&gt;
                    &lt;/div&gt;
                    &lt;label className=&quot;relative inline-flex items-center cursor-pointer&quot;&gt;
                      &lt;input
                        aria-label=&quot;security&quot;
                        type=&quot;checkbox&quot;
                        checked={settings.security.twoFactorAuth}
                        onChange={(e) =&gt;
                          updateSetting('security', 'twoFactorAuth', e.target.checked)
                        }
                        className=&quot;sr-only peer&quot;
                      /&gt;
                      &lt;div className=&quot;w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-400/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/30 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500&quot;&gt;&lt;/div&gt;
                    &lt;/label&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Session Timeout (minutes)
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;security-session time out&quot;
                      value={settings.security.sessionTimeout}
                      onChange={(e) =&gt;
                        updateSetting('security', 'sessionTimeout', parseInt(e.target.value, 10))
                      }
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value={30} className=&quot;bg-slate-800 text-white&quot;&gt;
                        30 minutes
                      &lt;/option&gt;
                      &lt;option value={60} className=&quot;bg-slate-800 text-white&quot;&gt;
                        1 hour
                      &lt;/option&gt;
                      &lt;option value={120} className=&quot;bg-slate-800 text-white&quot;&gt;
                        2 hours
                      &lt;/option&gt;
                      &lt;option value={480} className=&quot;bg-slate-800 text-white&quot;&gt;
                        8 hours
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                    &lt;div&gt;
                      &lt;h3 className=&quot;text-sm font-medium text-white&quot;&gt;API Access&lt;/h3&gt;
                      &lt;p className=&quot;text-sm text-slate-300&quot;&gt;Allow API access to your account&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;label className=&quot;relative inline-flex items-center cursor-pointer&quot;&gt;
                      &lt;input
                        aria-label=&quot;api access&quot;
                        type=&quot;checkbox&quot;
                        checked={settings.security.apiAccess}
                        onChange={(e) =&gt; updateSetting('security', 'apiAccess', e.target.checked)}
                        className=&quot;sr-only peer&quot;
                      /&gt;
                      &lt;div className=&quot;w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-400/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/30 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500&quot;&gt;&lt;/div&gt;
                    &lt;/label&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Preferences Tab */}
            {activeTab === 'preferences' &amp;&amp; (
              &lt;div className=&quot;p-6&quot;&gt;
                &lt;h2 className=&quot;text-lg font-medium text-white mb-6&quot;&gt;Application Preferences&lt;/h2&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;Theme&lt;/label&gt;
                    &lt;select
                      aria-label=&quot;performance&quot;
                      value={settings.preferences.theme}
                      onChange={(e) =&gt; updateSetting('preferences', 'theme', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;light&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Light
                      &lt;/option&gt;
                      &lt;option value=&quot;dark&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Dark
                      &lt;/option&gt;
                      &lt;option value=&quot;auto&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Auto
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Language
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;language&quot;
                      value={settings.preferences.language}
                      onChange={(e) =&gt; updateSetting('preferences', 'language', e.target.value)}
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;en&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        English
                      &lt;/option&gt;
                      &lt;option value=&quot;es&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Spanish
                      &lt;/option&gt;
                      &lt;option value=&quot;fr&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        French
                      &lt;/option&gt;
                      &lt;option value=&quot;de&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        German
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-2&quot;&gt;
                      Default Workflow Privacy
                    &lt;/label&gt;
                    &lt;select
                      aria-label=&quot;preferences&quot;
                      value={settings.preferences.defaultWorkflowPrivacy}
                      onChange={(e) =&gt;
                        updateSetting('preferences', 'defaultWorkflowPrivacy', e.target.value)
                      }
                      className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                    &gt;
                      &lt;option value=&quot;private&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Private
                      &lt;/option&gt;
                      &lt;option value=&quot;team&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Team
                      &lt;/option&gt;
                      &lt;option value=&quot;public&quot; className=&quot;bg-slate-800 text-white&quot;&gt;
                        Public
                      &lt;/option&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            )}

            {/* Save Button */}
            &lt;div className=&quot;px-6 py-4 bg-white/5 border-t border-white/20 rounded-b-lg backdrop-blur-sm&quot;&gt;
              &lt;div className=&quot;flex justify-end space-x-3&quot;&gt;
                &lt;button
                  onClick={() =&gt; window.location.reload()}
                  className=&quot;px-4 py-2 text-sm font-medium text-slate-300 bg-white/10 border border-white/30 rounded-lg hover:bg-white/20 hover:text-white transition-all duration-300 backdrop-blur-sm&quot;
                &gt;
                  Reset
                &lt;/button&gt;
                &lt;button
                  onClick={handleSave}
                  disabled={isSaving}
                  className=&quot;px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 border border-transparent rounded-lg hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:hover:scale-100 shadow-lg&quot;
                &gt;
                  {isSaving ? 'Saving...' : 'Save Changes'}
                &lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Settings;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/SelfHosted.tsx (Line 1:1 - Line 665:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/selfhosted/SelfHosted.tsx (Line 2:1 - Line 666:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn480" onclick="toggleCodeBlock('cloneGroup480', 'expandBtn480', 'collapseBtn480')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn480" onclick="toggleCodeBlock('cloneGroup480', 'expandBtn480', 'collapseBtn480')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup480"><code class="language-tsx text-sm text-gray-800">/**
 * Self-Hosted Page
 *
 * Comprehensive self-hosted deployment information for Reporunner
 * Deployment options, system requirements, and getting started guides
 */

import {
  ArrowRight,
  Box,
  CheckCircle,
  Cloud,
  Code,
  Container,
  Copy,
  Cpu,
  Database,
  Download,
  ExternalLink,
  GitBranch,
  Globe,
  HardDrive,
  Lock,
  MemoryStick,
  Play,
  Server,
  Settings,
  Shield,
  Terminal,
  Wifi,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const SelfHosted: React.FC = () =&gt; {
  const [activeDeployment, setActiveDeployment] = useState('docker');
  const [copiedCommand, setCopiedCommand] = useState('');

  const deploymentOptions = [
    {
      id: 'docker',
      name: 'Docker Compose',
      description: 'Quick setup for development and small deployments',
      icon: Container,
      difficulty: 'Easy',
      setupTime: '5 minutes',
      suitable: 'Development, Small Teams',
    },
    {
      id: 'kubernetes',
      name: 'Kubernetes',
      description: 'Production-ready deployment with auto-scaling',
      icon: Box,
      difficulty: 'Intermediate',
      setupTime: '15 minutes',
      suitable: 'Production, Enterprise',
    },
    {
      id: 'manual',
      name: 'Manual Installation',
      description: 'Custom setup with full control over configuration',
      icon: Server,
      difficulty: 'Advanced',
      setupTime: '30 minutes',
      suitable: 'Custom Environments',
    },
  ];

  const commands = {
    docker: {
      title: 'Docker Compose Deployment',
      steps: [
        {
          description: 'Download the docker-compose.yml file',
          command:
            'curl -o docker-compose.yml https://raw.githubusercontent.com/reporunner/reporunner/main/docker-compose.yml',
        },
        {
          description: 'Start all services',
          command: 'docker-compose up -d',
        },
        {
          description: 'Access Reporunner',
          command: '# Open http://localhost:5678 in your browser',
        },
      ],
    },
    kubernetes: {
      title: 'Kubernetes Deployment',
      steps: [
        {
          description: 'Add Reporunner Helm repository',
          command: 'helm repo add reporunner https://helm.reporunner.dev',
        },
        {
          description: 'Update Helm repositories',
          command: 'helm repo update',
        },
        {
          description: 'Install Reporunner',
          command:
            'helm install reporunner reporunner/reporunner --namespace reporunner --create-namespace',
        },
        {
          description: 'Get the application URL',
          command: 'kubectl get ingress -n reporunner',
        },
      ],
    },
    manual: {
      title: 'Manual Installation',
      steps: [
        {
          description: 'Install Node.js 20+ and npm',
          command: '# Install Node.js from https://nodejs.org/',
        },
        {
          description: 'Clone the repository',
          command: 'git clone https://github.com/reporunner/reporunner.git &amp;&amp; cd reporunner',
        },
        {
          description: 'Install dependencies',
          command: 'npm install &amp;&amp; npm run build',
        },
        {
          description: 'Start the application',
          command: 'npm start',
        },
      ],
    },
  };

  const systemRequirements = {
    minimum: [
      { component: 'CPU', requirement: '2 vCPUs', icon: Cpu },
      { component: 'RAM', requirement: '4 GB', icon: MemoryStick },
      { component: 'Storage', requirement: '20 GB SSD', icon: HardDrive },
      { component: 'Network', requirement: '1 Gbps', icon: Wifi },
    ],
    recommended: [
      { component: 'CPU', requirement: '4+ vCPUs', icon: Cpu },
      { component: 'RAM', requirement: '8+ GB', icon: MemoryStick },
      { component: 'Storage', requirement: '100+ GB SSD', icon: HardDrive },
      { component: 'Network', requirement: '10 Gbps', icon: Wifi },
    ],
    enterprise: [
      { component: 'CPU', requirement: '8+ vCPUs', icon: Cpu },
      { component: 'RAM', requirement: '32+ GB', icon: MemoryStick },
      { component: 'Storage', requirement: '500+ GB NVMe', icon: HardDrive },
      { component: 'Network', requirement: '10+ Gbps', icon: Wifi },
    ],
  };

  const features = [
    {
      title: 'Complete Data Sovereignty',
      description:
        'Your data never leaves your infrastructure. No external dependencies or third-party services required.',
      icon: Lock,
      benefits: ['Full data control', 'Zero external calls', 'Privacy compliant'],
    },
    {
      title: 'Hybrid Database Architecture',
      description:
        'MongoDB for operational data, PostgreSQL with pgvector for AI and analytics workloads.',
      icon: Database,
      benefits: ['Best of both worlds', 'AI-ready', 'Scalable storage'],
    },
    {
      title: 'Enterprise Security',
      description:
        'End-to-end encryption, SSO integration, and comprehensive audit logging built-in.',
      icon: Shield,
      benefits: ['Enterprise SSO', 'Audit trails', 'Encryption at rest'],
    },
    {
      title: 'Cloud Agnostic',
      description:
        'Deploy on any cloud provider or on-premises infrastructure with the same configuration.',
      icon: Cloud,
      benefits: ['Vendor flexibility', 'Avoid lock-in', 'Cost optimization'],
    },
    {
      title: 'Auto-Scaling',
      description:
        'Kubernetes-native deployment with horizontal pod autoscaling and load balancing.',
      icon: Zap,
      benefits: ['Handle traffic spikes', 'Cost efficient', 'High availability'],
    },
    {
      title: 'Global Deployment',
      description: 'Multi-region deployment support with data residency compliance.',
      icon: Globe,
      benefits: ['Low latency', 'Data residency', 'Disaster recovery'],
    },
  ];

  const copyToClipboard = (text: string) =&gt; {
    navigator.clipboard.writeText(text);
    setCopiedCommand(text);
    setTimeout(() =&gt; setCopiedCommand(''), 2000);
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Self-Hosted
              &lt;/span&gt;
              &lt;br /&gt;
              Workflow Automation
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Complete control over your data and infrastructure. Deploy Reporunner anywhere -
              cloud, on-premises, or air-gapped environments with enterprise-grade security.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-12&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;Download className=&quot;w-5 h-5&quot; /&gt;
                Quick Start
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                &lt;Play className=&quot;w-5 h-5&quot; /&gt;
                Watch Demo
              &lt;/button&gt;
            &lt;/div&gt;

            {/* Quick Stats */}
            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-2&quot;&gt;5 min&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Setup Time&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-green-300 mb-2&quot;&gt;100%&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Data Control&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-purple-300 mb-2&quot;&gt;0&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;External Deps&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-orange-300 mb-2&quot;&gt;∞&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Scalability&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Deployment Options */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Deployment Options&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Choose the deployment method that fits your infrastructure and requirements
            &lt;/p&gt;
          &lt;/div&gt;

          {/* Deployment Method Selector */}
          &lt;div className=&quot;flex flex-wrap justify-center gap-4 mb-12&quot;&gt;
            {deploymentOptions.map((option) =&gt; {
              const Icon = option.icon;
              return (
                &lt;button
                  key={option.id}
                  onClick={() =&gt; setActiveDeployment(option.id)}
                  className={`p-6 rounded-xl transition-all duration-300 ${
                    activeDeployment === option.id
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white scale-105 shadow-xl'
                      : 'bg-white border border-gray-200 text-gray-700 hover:border-blue-300 hover:shadow-lg'
                  }`}
                &gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;Icon
                      className={`w-8 h-8 mx-auto mb-3 ${
                        activeDeployment === option.id ? 'text-white' : 'text-blue-600'
                      }`}
                    /&gt;
                    &lt;h3 className=&quot;font-semibold text-lg mb-2&quot;&gt;{option.name}&lt;/h3&gt;
                    &lt;p
                      className={`text-sm mb-3 ${
                        activeDeployment === option.id ? 'text-blue-100' : 'text-gray-500'
                      }`}
                    &gt;
                      {option.description}
                    &lt;/p&gt;

                    &lt;div className=&quot;space-y-1 text-sm&quot;&gt;
                      &lt;div
                        className={
                          activeDeployment === option.id ? 'text-blue-100' : 'text-gray-600'
                        }
                      &gt;
                        &lt;strong&gt;Difficulty:&lt;/strong&gt; {option.difficulty}
                      &lt;/div&gt;
                      &lt;div
                        className={
                          activeDeployment === option.id ? 'text-blue-100' : 'text-gray-600'
                        }
                      &gt;
                        &lt;strong&gt;Setup:&lt;/strong&gt; {option.setupTime}
                      &lt;/div&gt;
                      &lt;div
                        className={
                          activeDeployment === option.id ? 'text-blue-100' : 'text-gray-600'
                        }
                      &gt;
                        &lt;strong&gt;Best for:&lt;/strong&gt; {option.suitable}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/button&gt;
              );
            })}
          &lt;/div&gt;

          {/* Command Instructions */}
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;bg-gray-900 rounded-xl p-6&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between mb-6&quot;&gt;
                &lt;h3 className=&quot;text-xl font-semibold text-white&quot;&gt;
                  {commands[activeDeployment as keyof typeof commands].title}
                &lt;/h3&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Terminal className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                  &lt;span className=&quot;text-gray-400 text-sm&quot;&gt;Terminal&lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div className=&quot;space-y-6&quot;&gt;
                {commands[activeDeployment as keyof typeof commands].steps.map((step, index) =&gt; (
                  &lt;div key={index} className=&quot;space-y-2&quot;&gt;
                    &lt;div className=&quot;text-gray-300 text-sm&quot;&gt;
                      {index + 1}. {step.description}
                    &lt;/div&gt;
                    &lt;div className=&quot;relative&quot;&gt;
                      &lt;pre className=&quot;bg-black rounded-lg p-4 text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                        &lt;code&gt;{step.command}&lt;/code&gt;
                      &lt;/pre&gt;
                      &lt;button
                        onClick={() =&gt; copyToClipboard(step.command)}
                        className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                        title=&quot;Copy to clipboard&quot;
                      &gt;
                        {copiedCommand === step.command ? (
                          &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                        ) : (
                          &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                        )}
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;

              &lt;div className=&quot;mt-6 p-4 bg-blue-900/30 border border-blue-700 rounded-lg&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2 text-blue-300 mb-2&quot;&gt;
                  &lt;ExternalLink className=&quot;w-4 h-4&quot; /&gt;
                  &lt;span className=&quot;font-medium&quot;&gt;Need Help?&lt;/span&gt;
                &lt;/div&gt;
                &lt;p className=&quot;text-blue-200 text-sm&quot;&gt;
                  Check out our comprehensive{' '}
                  &lt;a href=&quot;#&quot; className=&quot;underline hover:text-white&quot;&gt;
                    deployment guide
                  &lt;/a&gt;{' '}
                  or join our{' '}
                  &lt;a href=&quot;#&quot; className=&quot;underline hover:text-white&quot;&gt;
                    community forum
                  &lt;/a&gt;{' '}
                  for support.
                &lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* System Requirements */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;System Requirements&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Hardware and software requirements for different deployment scenarios
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              {Object.entries(systemRequirements).map(([tier, requirements]) =&gt; (
                &lt;div
                  key={tier}
                  className={`rounded-xl p-6 ${
                    tier === 'recommended'
                      ? 'bg-gradient-to-b from-blue-50 to-purple-50 border-2 border-blue-200 shadow-xl'
                      : 'bg-white border border-gray-200 shadow-lg'
                  }`}
                &gt;
                  &lt;div className=&quot;text-center mb-6&quot;&gt;
                    &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2 capitalize&quot;&gt;
                      {tier} Configuration
                    &lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600&quot;&gt;
                      {tier === 'minimum' &amp;&amp; 'For testing and small deployments'}
                      {tier === 'recommended' &amp;&amp; 'For production workloads'}
                      {tier === 'enterprise' &amp;&amp; 'For high-scale enterprise deployments'}
                    &lt;/p&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;space-y-4&quot;&gt;
                    {requirements.map((req, idx) =&gt; {
                      const Icon = req.icon;
                      return (
                        &lt;div key={idx} className=&quot;flex items-center gap-4&quot;&gt;
                          &lt;div className=&quot;bg-gray-100 p-2 rounded-lg&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5 text-gray-600&quot; /&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;flex-1&quot;&gt;
                            &lt;div className=&quot;font-medium text-gray-900&quot;&gt;{req.component}&lt;/div&gt;
                            &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{req.requirement}&lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      );
                    })}
                  &lt;/div&gt;

                  {tier === 'recommended' &amp;&amp; (
                    &lt;div className=&quot;mt-6 text-center&quot;&gt;
                      &lt;span className=&quot;bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium&quot;&gt;
                        Recommended
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              ))}
            &lt;/div&gt;

            &lt;div className=&quot;mt-12 bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
              &lt;h3 className=&quot;text-xl font-semibold text-gray-900 mb-4&quot;&gt;Software Dependencies&lt;/h3&gt;
              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6&quot;&gt;
                {[
                  { name: 'Node.js', version: '20+', icon: '🟢' },
                  { name: 'Docker', version: '24+', icon: '🐳' },
                  { name: 'MongoDB', version: '7+', icon: '🍃' },
                  { name: 'PostgreSQL', version: '15+', icon: '🐘' },
                ].map((dep, index) =&gt; (
                  &lt;div key={index} className=&quot;flex items-center gap-3&quot;&gt;
                    &lt;span className=&quot;text-2xl&quot;&gt;{dep.icon}&lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-gray-900&quot;&gt;{dep.name}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;Version {dep.version}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Self-Hosted Features */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Why Self-Host?&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Complete control, security, and customization for your workflow automation needs
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
            {features.map((feature, index) =&gt; {
              const Icon = feature.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-xl transition-all duration-300 hover:-translate-y-1&quot;
                &gt;
                  &lt;div className=&quot;mb-4&quot;&gt;
                    &lt;Icon className=&quot;w-8 h-8 text-blue-600 group-hover:text-blue-700 transition-colors mb-4&quot; /&gt;
                    &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                      {feature.title}
                    &lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;
                  &lt;/div&gt;

                  &lt;ul className=&quot;space-y-2&quot;&gt;
                    {feature.benefits.map((benefit, idx) =&gt; (
                      &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                        &lt;CheckCircle className=&quot;w-4 h-4 text-green-500 flex-shrink-0&quot; /&gt;
                        &lt;span className=&quot;text-gray-700 text-sm&quot;&gt;{benefit}&lt;/span&gt;
                      &lt;/li&gt;
                    ))}
                  &lt;/ul&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Migration Section */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Migration Made Easy&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Seamlessly migrate from existing workflow platforms to your self-hosted Reporunner
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            &lt;div className=&quot;bg-white rounded-xl p-8 shadow-lg&quot;&gt;
              &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-6&quot;&gt;Supported Migrations&lt;/h3&gt;
              &lt;div className=&quot;space-y-4&quot;&gt;
                {[
                  { platform: 'n8n', difficulty: 'Easy', time: '1-2 hours' },
                  {
                    platform: 'Zapier',
                    difficulty: 'Medium',
                    time: '2-4 hours',
                  },
                  {
                    platform: 'Make (Integromat)',
                    difficulty: 'Medium',
                    time: '2-4 hours',
                  },
                  {
                    platform: 'Microsoft Power Automate',
                    difficulty: 'Hard',
                    time: '4-8 hours',
                  },
                ].map((migration, index) =&gt; (
                  &lt;div
                    key={index}
                    className=&quot;flex items-center justify-between p-4 bg-gray-50 rounded-lg&quot;
                  &gt;
                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;div className=&quot;w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center&quot;&gt;
                        &lt;ArrowRight className=&quot;w-4 h-4 text-blue-600&quot; /&gt;
                      &lt;/div&gt;
                      &lt;span className=&quot;font-medium text-gray-900&quot;&gt;{migration.platform}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-right&quot;&gt;
                      &lt;div
                        className={`text-sm font-medium ${
                          migration.difficulty === 'Easy'
                            ? 'text-green-600'
                            : migration.difficulty === 'Medium'
                              ? 'text-yellow-600'
                              : 'text-red-600'
                        }`}
                      &gt;
                        {migration.difficulty}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-500&quot;&gt;{migration.time}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div className=&quot;bg-white rounded-xl p-8 shadow-lg&quot;&gt;
              &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-6&quot;&gt;Migration Tools&lt;/h3&gt;
              &lt;div className=&quot;space-y-6&quot;&gt;
                &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                  &lt;div className=&quot;bg-blue-100 p-2 rounded-lg&quot;&gt;
                    &lt;Code className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Import Wizard&lt;/h4&gt;
                    &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                      Automated workflow import from popular platforms with intelligent conversion
                    &lt;/p&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                  &lt;div className=&quot;bg-green-100 p-2 rounded-lg&quot;&gt;
                    &lt;GitBranch className=&quot;w-6 h-6 text-green-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Schema Mapping&lt;/h4&gt;
                    &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                      Automatic mapping of data structures and field transformations
                    &lt;/p&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                  &lt;div className=&quot;bg-purple-100 p-2 rounded-lg&quot;&gt;
                    &lt;Settings className=&quot;w-6 h-6 text-purple-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Professional Services&lt;/h4&gt;
                    &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                      Expert migration assistance for complex workflows and custom integrations
                    &lt;/p&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Deploy Your Own?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Start your self-hosted journey today. Complete data sovereignty, enterprise security,
            and unlimited scalability await.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-8&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Download className=&quot;w-5 h-5&quot; /&gt;
              Download Now
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
              Documentation
            &lt;/button&gt;
          &lt;/div&gt;

          &lt;div className=&quot;flex items-center justify-center gap-8 text-sm opacity-80&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              100% Open Source
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              No License Fees
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              Community Support
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default SelfHosted;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Roadmap.tsx (Line 1:1 - Line 592:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/roadmap/Roadmap.tsx (Line 2:1 - Line 593:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn482" onclick="toggleCodeBlock('cloneGroup482', 'expandBtn482', 'collapseBtn482')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn482" onclick="toggleCodeBlock('cloneGroup482', 'expandBtn482', 'collapseBtn482')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup482"><code class="language-tsx text-sm text-gray-800">/**
 * Roadmap Page
 *
 * Product roadmap and future features for Reporunner
 * Showing completed features, current development, and planned features
 */

import {
  Brain,
  Calendar,
  CheckCircle,
  Clock,
  Code,
  ExternalLink,
  Eye,
  Globe,
  Lightbulb,
  MessageSquare,
  Settings,
  Shield,
  Star,
  ThumbsUp,
  TrendingUp,
  Webhook,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const Roadmap: React.FC = () =&gt; {
  const [selectedCategory, setSelectedCategory] = useState('all');
  const [timeframe, setTimeframe] = useState('2025');

  const categories = [
    { id: 'all', name: 'All Features', icon: Globe },
    { id: 'ai-ml', name: 'AI &amp; ML', icon: Brain },
    { id: 'enterprise', name: 'Enterprise', icon: Shield },
    { id: 'developer', name: 'Developer', icon: Code },
    { id: 'integrations', name: 'Integrations', icon: Webhook },
    { id: 'platform', name: 'Platform', icon: Settings },
  ];

  const roadmapItems = {
    '2024': [
      {
        id: 'hybrid-db',
        title: 'Hybrid Database Architecture',
        description: 'MongoDB + PostgreSQL with pgvector for AI workloads',
        category: 'platform',
        status: 'completed',
        quarter: 'Q4',
        votes: 234,
        priority: 'high',
        impact: 'High',
      },
      {
        id: 'ai-agents',
        title: 'AI Agent System',
        description: 'Multi-LLM support with OpenAI, Anthropic, and local models',
        category: 'ai-ml',
        status: 'completed',
        quarter: 'Q4',
        votes: 189,
        priority: 'high',
        impact: 'High',
      },
      {
        id: 'enterprise-sso',
        title: 'Enterprise SSO',
        description: 'SAML, OIDC, and Active Directory integration',
        category: 'enterprise',
        status: 'completed',
        quarter: 'Q3',
        votes: 156,
        priority: 'high',
        impact: 'Medium',
      },
    ],
    '2025': [
      {
        id: 'visual-editor-v2',
        title: 'Visual Editor 2.0',
        description: 'Redesigned workflow editor with improved UX and performance',
        category: 'platform',
        status: 'in-progress',
        quarter: 'Q1',
        votes: 412,
        priority: 'high',
        impact: 'High',
      },
      {
        id: 'vector-search',
        title: 'Advanced Vector Search',
        description: 'Semantic search across workflows, data, and documentation',
        category: 'ai-ml',
        status: 'in-progress',
        quarter: 'Q1',
        votes: 298,
        priority: 'high',
        impact: 'Medium',
      },
      {
        id: 'mobile-app',
        title: 'Mobile Application',
        description: 'Native iOS and Android apps for workflow monitoring',
        category: 'platform',
        status: 'planned',
        quarter: 'Q2',
        votes: 356,
        priority: 'medium',
        impact: 'Medium',
      },
      {
        id: 'workflow-marketplace',
        title: 'Workflow Marketplace',
        description: 'Community-driven marketplace for workflow templates',
        category: 'platform',
        status: 'planned',
        quarter: 'Q2',
        votes: 278,
        priority: 'medium',
        impact: 'High',
      },
      {
        id: 'advanced-analytics',
        title: 'Advanced Analytics',
        description: 'Predictive analytics and performance optimization insights',
        category: 'enterprise',
        status: 'planned',
        quarter: 'Q3',
        votes: 234,
        priority: 'medium',
        impact: 'Medium',
      },
      {
        id: 'multimodal-ai',
        title: 'Multimodal AI Support',
        description: 'Vision, audio, and document processing with AI models',
        category: 'ai-ml',
        status: 'planned',
        quarter: 'Q3',
        votes: 189,
        priority: 'high',
        impact: 'High',
      },
      {
        id: 'workflow-version-control',
        title: 'Workflow Version Control',
        description: 'Git-like version control for workflows with branching',
        category: 'developer',
        status: 'planned',
        quarter: 'Q4',
        votes: 167,
        priority: 'medium',
        impact: 'Medium',
      },
      {
        id: 'kubernetes-operator',
        title: 'Kubernetes Operator',
        description: 'Native Kubernetes operator for advanced deployments',
        category: 'enterprise',
        status: 'planned',
        quarter: 'Q4',
        votes: 143,
        priority: 'low',
        impact: 'Medium',
      },
    ],
    '2026': [
      {
        id: 'ai-workflow-generation',
        title: 'AI Workflow Generation',
        description: 'Generate complete workflows from natural language descriptions',
        category: 'ai-ml',
        status: 'research',
        quarter: 'Q1',
        votes: 445,
        priority: 'high',
        impact: 'High',
      },
      {
        id: 'federated-learning',
        title: 'Federated Learning Platform',
        description: 'Distributed ML training across multiple Reporunner instances',
        category: 'ai-ml',
        status: 'research',
        quarter: 'Q2',
        votes: 234,
        priority: 'low',
        impact: 'High',
      },
      {
        id: 'quantum-computing',
        title: 'Quantum Computing Integration',
        description: 'Integration with quantum computing platforms for optimization',
        category: 'integrations',
        status: 'research',
        quarter: 'Q3',
        votes: 189,
        priority: 'low',
        impact: 'Low',
      },
    ],
  };

  const statusConfig = {
    completed: {
      icon: CheckCircle,
      color: 'text-green-600',
      bg: 'bg-green-100',
      label: 'Completed',
    },
    'in-progress': {
      icon: Clock,
      color: 'text-blue-600',
      bg: 'bg-blue-100',
      label: 'In Progress',
    },
    planned: {
      icon: Calendar,
      color: 'text-purple-600',
      bg: 'bg-purple-100',
      label: 'Planned',
    },
    research: {
      icon: Lightbulb,
      color: 'text-orange-600',
      bg: 'bg-orange-100',
      label: 'Research',
    },
  };

  const priorityConfig = {
    high: { color: 'text-red-600', bg: 'bg-red-100' },
    medium: { color: 'text-yellow-600', bg: 'bg-yellow-100' },
    low: { color: 'text-gray-600', bg: 'bg-gray-100' },
  };

  const filteredItems =
    roadmapItems[timeframe as keyof typeof roadmapItems]?.filter(
      (item) =&gt; selectedCategory === 'all' || item.category === selectedCategory
    ) || [];

  const stats = {
    completed: Object.values(roadmapItems)
      .flat()
      .filter((item) =&gt; item.status === 'completed').length,
    inProgress: Object.values(roadmapItems)
      .flat()
      .filter((item) =&gt; item.status === 'in-progress').length,
    planned: Object.values(roadmapItems)
      .flat()
      .filter((item) =&gt; item.status === 'planned').length,
    totalVotes: Object.values(roadmapItems)
      .flat()
      .reduce((sum, item) =&gt; sum + item.votes, 0),
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Product{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Roadmap
              &lt;/span&gt;
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              See what's coming next for Reporunner. Vote on features, track progress, and help
              shape the future of workflow automation.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-12&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;MessageSquare className=&quot;w-5 h-5&quot; /&gt;
                Request Feature
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
                GitHub Issues
              &lt;/button&gt;
            &lt;/div&gt;

            {/* Stats */}
            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-green-300 mb-2&quot;&gt;{stats.completed}&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Completed&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-2&quot;&gt;{stats.inProgress}&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;In Progress&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-purple-300 mb-2&quot;&gt;{stats.planned}&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Planned&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-orange-300 mb-2&quot;&gt;{stats.totalVotes}&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Total Votes&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Filters */}
      &lt;section className=&quot;py-8 bg-white border-b border-gray-200&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-col lg:flex-row gap-6 items-center justify-between&quot;&gt;
            {/* Category Filter */}
            &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
              {categories.map((category) =&gt; {
                const Icon = category.icon;
                return (
                  &lt;button
                    key={category.id}
                    onClick={() =&gt; setSelectedCategory(category.id)}
                    className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${
                      selectedCategory === category.id
                        ? 'bg-blue-600 text-white'
                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                    }`}
                  &gt;
                    &lt;Icon className=&quot;w-4 h-4&quot; /&gt;
                    {category.name}
                  &lt;/button&gt;
                );
              })}
            &lt;/div&gt;

            {/* Timeframe Filter */}
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-gray-700 font-medium&quot;&gt;Timeframe:&lt;/span&gt;
              &lt;select
                value={timeframe}
                onChange={(e) =&gt; setTimeframe(e.target.value)}
                className=&quot;px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
              &gt;
                &lt;option value=&quot;2024&quot;&gt;2024&lt;/option&gt;
                &lt;option value=&quot;2025&quot;&gt;2025&lt;/option&gt;
                &lt;option value=&quot;2026&quot;&gt;2026+&lt;/option&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Roadmap Items */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            {filteredItems.length &gt; 0 ? (
              &lt;div className=&quot;space-y-6&quot;&gt;
                {filteredItems.map((item) =&gt; {
                  const statusInfo = statusConfig[item.status as keyof typeof statusConfig];
                  const priorityInfo = priorityConfig[item.priority as keyof typeof priorityConfig];
                  const StatusIcon = statusInfo.icon;

                  return (
                    &lt;div
                      key={item.id}
                      className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                    &gt;
                      &lt;div className=&quot;flex flex-col lg:flex-row lg:items-center gap-6&quot;&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-start gap-4 mb-4&quot;&gt;
                            &lt;div className={`p-2 rounded-lg ${statusInfo.bg}`}&gt;
                              &lt;StatusIcon className={`w-6 h-6 ${statusInfo.color}`} /&gt;
                            &lt;/div&gt;

                            &lt;div className=&quot;flex-1&quot;&gt;
                              &lt;div className=&quot;flex items-center gap-3 mb-2&quot;&gt;
                                &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;{item.title}&lt;/h3&gt;
                                &lt;span
                                  className={`px-2 py-1 text-xs font-medium rounded-full ${statusInfo.bg} ${statusInfo.color}`}
                                &gt;
                                  {statusInfo.label}
                                &lt;/span&gt;
                                &lt;span
                                  className={`px-2 py-1 text-xs font-medium rounded-full ${priorityInfo.bg} ${priorityInfo.color}`}
                                &gt;
                                  {item.priority} priority
                                &lt;/span&gt;
                              &lt;/div&gt;

                              &lt;p className=&quot;text-gray-600 mb-3&quot;&gt;{item.description}&lt;/p&gt;

                              &lt;div className=&quot;flex items-center gap-6 text-sm text-gray-500&quot;&gt;
                                &lt;span className=&quot;flex items-center gap-1&quot;&gt;
                                  &lt;Calendar className=&quot;w-4 h-4&quot; /&gt;
                                  {item.quarter} {timeframe}
                                &lt;/span&gt;
                                &lt;span className=&quot;flex items-center gap-1&quot;&gt;
                                  &lt;TrendingUp className=&quot;w-4 h-4&quot; /&gt;
                                  {item.impact} Impact
                                &lt;/span&gt;
                                &lt;span className=&quot;capitalize&quot;&gt;
                                  {item.category.replace('-', ' &amp; ')}
                                &lt;/span&gt;
                              &lt;/div&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                          {/* Voting */}
                          &lt;div className=&quot;flex items-center gap-2 bg-gray-50 rounded-lg p-3&quot;&gt;
                            &lt;button className=&quot;flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors&quot;&gt;
                              &lt;ThumbsUp className=&quot;w-5 h-5&quot; /&gt;
                              &lt;span className=&quot;font-medium&quot;&gt;{item.votes}&lt;/span&gt;
                            &lt;/button&gt;
                          &lt;/div&gt;

                          {/* View Details */}
                          &lt;button className=&quot;flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors&quot;&gt;
                            &lt;Eye className=&quot;w-4 h-4&quot; /&gt;
                            Details
                          &lt;/button&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  );
                })}
              &lt;/div&gt;
            ) : (
              &lt;div className=&quot;text-center py-12&quot;&gt;
                &lt;div className=&quot;text-6xl mb-4&quot;&gt;🔍&lt;/div&gt;
                &lt;h3 className=&quot;text-xl font-semibold text-gray-900 mb-2&quot;&gt;No features found&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                  Try adjusting your category or timeframe filter.
                &lt;/p&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Feature Request Section */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;bg-white rounded-2xl p-8 shadow-xl&quot;&gt;
              &lt;div className=&quot;text-center mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-gray-900 mb-4&quot;&gt;Help Shape Our Roadmap&lt;/h2&gt;
                &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                  Your feedback drives our development. Vote on existing features or request new
                  ones.
                &lt;/p&gt;
              &lt;/div&gt;

              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-6 mb-8&quot;&gt;
                &lt;div className=&quot;text-center p-6 border border-gray-200 rounded-xl&quot;&gt;
                  &lt;div className=&quot;bg-blue-100 p-3 rounded-lg w-fit mx-auto mb-4&quot;&gt;
                    &lt;ThumbsUp className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Vote on Features&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                    Help us prioritize features by voting on what matters most to you
                  &lt;/p&gt;
                &lt;/div&gt;

                &lt;div className=&quot;text-center p-6 border border-gray-200 rounded-xl&quot;&gt;
                  &lt;div className=&quot;bg-green-100 p-3 rounded-lg w-fit mx-auto mb-4&quot;&gt;
                    &lt;MessageSquare className=&quot;w-6 h-6 text-green-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Request Features&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                    Submit new feature ideas and discuss them with the community
                  &lt;/p&gt;
                &lt;/div&gt;

                &lt;div className=&quot;text-center p-6 border border-gray-200 rounded-xl&quot;&gt;
                  &lt;div className=&quot;bg-purple-100 p-3 rounded-lg w-fit mx-auto mb-4&quot;&gt;
                    &lt;Code className=&quot;w-6 h-6 text-purple-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Contribute&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;
                    Join our open-source community and contribute to development
                  &lt;/p&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
                  &lt;button className=&quot;px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all flex items-center gap-2 justify-center&quot;&gt;
                    &lt;MessageSquare className=&quot;w-5 h-5&quot; /&gt;
                    Request Feature
                  &lt;/button&gt;
                  &lt;button className=&quot;px-8 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 justify-center&quot;&gt;
                    &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
                    Join Discussion
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Quarterly Highlights */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Recent Highlights&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Major features and improvements delivered in recent quarters
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
            {roadmapItems['2024']
              .filter((item) =&gt; item.status === 'completed')
              .slice(0, 3)
              .map((item) =&gt; {
                const categoryIcon = {
                  'ai-ml': Brain,
                  enterprise: Shield,
                  platform: Settings,
                  developer: Code,
                  integrations: Webhook,
                };
                const Icon = categoryIcon[item.category as keyof typeof categoryIcon] || Settings;

                return (
                  &lt;div
                    key={item.id}
                    className=&quot;bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow&quot;
                  &gt;
                    &lt;div className=&quot;flex items-center gap-3 mb-4&quot;&gt;
                      &lt;div className=&quot;bg-green-100 p-2 rounded-lg&quot;&gt;
                        &lt;Icon className=&quot;w-6 h-6 text-green-600&quot; /&gt;
                      &lt;/div&gt;
                      &lt;CheckCircle className=&quot;w-5 h-5 text-green-600&quot; /&gt;
                      &lt;span className=&quot;text-green-600 font-medium text-sm&quot;&gt;Completed&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;h3 className=&quot;font-bold text-lg text-gray-900 mb-2&quot;&gt;{item.title}&lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{item.description}&lt;/p&gt;

                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;span className=&quot;text-sm text-gray-500&quot;&gt;{item.quarter} 2024&lt;/span&gt;
                      &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                        &lt;Star className=&quot;w-4 h-4 text-yellow-400&quot; /&gt;
                        &lt;span className=&quot;text-sm font-medium&quot;&gt;{item.votes} votes&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Be Part of Our Journey&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Join our community of developers and enterprises shaping the future of workflow
            automation.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;MessageSquare className=&quot;w-5 h-5&quot; /&gt;
              Join Community
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
              Follow on GitHub
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Roadmap;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Register.tsx (Line 1:1 - Line 20:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 1:1 - Line 19:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn484" onclick="toggleCodeBlock('cloneGroup484', 'expandBtn484', 'collapseBtn484')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn484" onclick="toggleCodeBlock('cloneGroup484', 'expandBtn484', 'collapseBtn484')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup484"><code class="language-tsx text-sm text-gray-800">import {
  ArrowRight,
  CheckCircle,
  Crown,
  Eye,
  EyeOff,
  Lock,
  Mail,
  Shield,
  User,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useEffect, useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useAuthStore } from '@/core/stores/authStore';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Register.tsx (Line 18:31 - Line 521:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/register/Register.tsx (Line 22:19 - Line 525:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn485" onclick="toggleCodeBlock('cloneGroup485', 'expandBtn485', 'collapseBtn485')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn485" onclick="toggleCodeBlock('cloneGroup485', 'expandBtn485', 'collapseBtn485')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup485"><code class="language-tsx text-sm text-gray-800">;

const Register: React.FC = () =&gt; {
  const navigate = useNavigate();
  const { register, isLoading, error, isAuthenticated, clearError } = useAuthStore();

  const [formData, setFormData] = useState({
    firstName: '',
    lastName: '',
    email: '',
    password: '',
    confirmPassword: '',
    acceptTerms: false,
  });

  const [formErrors, setFormErrors] = useState&lt;Record&lt;string, string&gt;&gt;({});
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [isVisible, setIsVisible] = useState(false);

  // Animation trigger
  useEffect(() =&gt; {
    setIsVisible(true);
  }, []);

  // Redirect if already authenticated
  useEffect(() =&gt; {
    if (isAuthenticated) {
      navigate('/app/dashboard');
    }
  }, [isAuthenticated, navigate]);

  // Clear errors when component mounts
  useEffect(() =&gt; {
    clearError();
  }, [clearError]);

  const validateForm = () =&gt; {
    const errors: Record&lt;string, string&gt; = {};

    if (!formData.firstName.trim()) {
      errors.firstName = 'First name is required';
    }

    if (!formData.lastName.trim()) {
      errors.lastName = 'Last name is required';
    }

    if (!formData.email) {
      errors.email = 'Email is required';
    } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
      errors.email = 'Email is invalid';
    }

    if (!formData.password) {
      errors.password = 'Password is required';
    } else if (formData.password.length &lt; 8) {
      errors.password = 'Password must be at least 8 characters';
    }

    if (!formData.confirmPassword) {
      errors.confirmPassword = 'Please confirm your password';
    } else if (formData.password !== formData.confirmPassword) {
      errors.confirmPassword = 'Passwords do not match';
    }

    if (!formData.acceptTerms) {
      errors.acceptTerms = 'You must accept the terms and conditions';
    }

    setFormErrors(errors);
    return Object.keys(errors).length === 0;
  };

  const handleSubmit = async (e: React.FormEvent) =&gt; {
    e.preventDefault();

    if (!validateForm()) {
      return;
    }

    try {
      const { confirmPassword, ...registerData } = formData;
      await register(registerData);
      navigate('/app/dashboard');
    } catch (_error) {}
  };

  const handleChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const { name, value, type, checked } = e.target;
    setFormData((prev) =&gt; ({
      ...prev,
      [name]: type === 'checkbox' ? checked : value,
    }));

    // Clear field error when user starts typing
    if (formErrors[name]) {
      setFormErrors((prev) =&gt; ({ ...prev, [name]: '' }));
    }
  };

  const getPasswordStrength = (password: string) =&gt; {
    if (!password) return { score: 0, text: '', color: '' };

    let score = 0;
    if (password.length &gt;= 8) score++;
    if (/[A-Z]/.test(password)) score++;
    if (/[a-z]/.test(password)) score++;
    if (/[0-9]/.test(password)) score++;
    if (/[^A-Za-z0-9]/.test(password)) score++;

    if (score &lt;= 2) return { score, text: 'Weak', color: 'text-red-500' };
    if (score &lt;= 3) return { score, text: 'Fair', color: 'text-yellow-500' };
    if (score &lt;= 4) return { score, text: 'Good', color: 'text-blue-500' };
    return { score, text: 'Strong', color: 'text-green-500' };
  };

  const passwordStrength = getPasswordStrength(formData.password);

  return (
    &lt;div className=&quot;min-h-screen relative overflow-hidden&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Background Elements - matching landing page */}
      &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
      &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

      {/* Animated Background Orbs */}
      &lt;div className=&quot;absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse&quot; /&gt;
      &lt;div className=&quot;absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000&quot; /&gt;

      {/* Floating Elements */}
      &lt;div className=&quot;absolute top-20 right-20 w-20 h-20 bg-blue-500/20 rounded-lg backdrop-blur-sm animate-float hidden lg:block&quot; /&gt;
      &lt;div className=&quot;absolute bottom-20 left-20 w-16 h-16 bg-purple-500/20 rounded-full backdrop-blur-sm animate-float delay-1000 hidden lg:block&quot; /&gt;

      &lt;div className=&quot;relative z-10 min-h-screen flex&quot;&gt;
        {/* Left Side - Branding */}
        &lt;div className=&quot;hidden lg:flex lg:w-1/2 flex-col justify-center px-12&quot;&gt;
          &lt;div
            className={`transition-all duration-1000 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Logo */}
            &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 mb-8 group&quot;&gt;
              &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
              &lt;/div&gt;
              &lt;span className=&quot;text-3xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
            &lt;/Link&gt;

            &lt;h1 className=&quot;text-5xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Join the{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                enterprise
              &lt;/span&gt;{' '}
              automation revolution
            &lt;/h1&gt;

            &lt;p className=&quot;text-xl text-slate-200 mb-8 leading-relaxed max-w-lg&quot;&gt;
              Start building powerful workflows with enterprise-grade security, AI intelligence, and
              complete data sovereignty. Join thousands of organizations already automating with
              Reporunner.
            &lt;/p&gt;

            {/* Benefits */}
            &lt;div className=&quot;space-y-4&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-green-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;CheckCircle className=&quot;w-5 h-5 text-green-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Free forever plan available&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-blue-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Shield className=&quot;w-5 h-5 text-blue-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Enterprise security from day one&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-purple-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Zap className=&quot;w-5 h-5 text-purple-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Setup in under 5 minutes&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Side - Registration Form */}
        &lt;div className=&quot;w-full lg:w-1/2 flex items-center justify-center px-6 py-12&quot;&gt;
          &lt;div
            className={`w-full max-w-md transition-all duration-1000 delay-300 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Mobile Logo */}
            &lt;div className=&quot;lg:hidden text-center mb-8&quot;&gt;
              &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 group&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                  &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;span className=&quot;text-2xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
              &lt;/Link&gt;
            &lt;/div&gt;

            {/* Form Card */}
            &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-8 shadow-2xl&quot;&gt;
              &lt;div className=&quot;text-center mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-white mb-2&quot;&gt;Create your account&lt;/h2&gt;
                &lt;p className=&quot;text-slate-300&quot;&gt;Start automating your workflows today&lt;/p&gt;
              &lt;/div&gt;

              &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
                {/* Global Error */}
                {error &amp;&amp; (
                  &lt;div className=&quot;rounded-lg bg-red-500/20 border border-red-500/30 p-4&quot;&gt;
                    &lt;div className=&quot;text-sm text-red-200&quot;&gt;{error}&lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Name Fields */}
                &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;firstName&quot;
                      className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                    &gt;
                      First name
                    &lt;/label&gt;
                    &lt;div className=&quot;relative&quot;&gt;
                      &lt;User className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                      &lt;input
                        id=&quot;firstName&quot;
                        name=&quot;firstName&quot;
                        type=&quot;text&quot;
                        autoComplete=&quot;given-name&quot;
                        required
                        value={formData.firstName}
                        onChange={handleChange}
                        className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                          formErrors.firstName ? 'border-red-500/50' : 'border-white/20'
                        }`}
                        placeholder=&quot;First name&quot;
                      /&gt;
                    &lt;/div&gt;
                    {formErrors.firstName &amp;&amp; (
                      &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.firstName}&lt;/p&gt;
                    )}
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;lastName&quot;
                      className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                    &gt;
                      Last name
                    &lt;/label&gt;
                    &lt;div className=&quot;relative&quot;&gt;
                      &lt;User className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                      &lt;input
                        id=&quot;lastName&quot;
                        name=&quot;lastName&quot;
                        type=&quot;text&quot;
                        autoComplete=&quot;family-name&quot;
                        required
                        value={formData.lastName}
                        onChange={handleChange}
                        className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                          formErrors.lastName ? 'border-red-500/50' : 'border-white/20'
                        }`}
                        placeholder=&quot;Last name&quot;
                      /&gt;
                    &lt;/div&gt;
                    {formErrors.lastName &amp;&amp; (
                      &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.lastName}&lt;/p&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Email Field */}
                &lt;div&gt;
                  &lt;label htmlFor=&quot;email&quot; className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;&gt;
                    Email address
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Mail className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;email&quot;
                      name=&quot;email&quot;
                      type=&quot;email&quot;
                      autoComplete=&quot;email&quot;
                      required
                      value={formData.email}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.email ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your email&quot;
                    /&gt;
                  &lt;/div&gt;
                  {formErrors.email &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.email}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;password&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;password&quot;
                      name=&quot;password&quot;
                      type={showPassword ? 'text' : 'password'}
                      autoComplete=&quot;new-password&quot;
                      required
                      value={formData.password}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-12 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.password ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Create a password&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowPassword(!showPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showPassword ? &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt; : &lt;Eye className=&quot;w-5 h-5&quot; /&gt;}
                    &lt;/button&gt;
                  &lt;/div&gt;

                  {/* Password Strength Indicator */}
                  {formData.password &amp;&amp; (
                    &lt;div className=&quot;mt-2&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                        &lt;div className=&quot;flex-1 bg-white/20 rounded-full h-2&quot;&gt;
                          &lt;div
                            className={`h-full rounded-full transition-all duration-300 ${
                              passwordStrength.score &lt;= 2
                                ? 'bg-red-500'
                                : passwordStrength.score &lt;= 3
                                  ? 'bg-yellow-500'
                                  : passwordStrength.score &lt;= 4
                                    ? 'bg-blue-500'
                                    : 'bg-green-500'
                            }`}
                            style={{
                              width: `${(passwordStrength.score / 5) * 100}%`,
                            }}
                          /&gt;
                        &lt;/div&gt;
                        &lt;span className={`text-sm ${passwordStrength.color}`}&gt;
                          {passwordStrength.text}
                        &lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  {formErrors.password &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.password}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Confirm Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;confirmPassword&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Confirm password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;confirmPassword&quot;
                      name=&quot;confirmPassword&quot;
                      type={showConfirmPassword ? 'text' : 'password'}
                      autoComplete=&quot;new-password&quot;
                      required
                      value={formData.confirmPassword}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-12 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.confirmPassword ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Confirm your password&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowConfirmPassword(!showConfirmPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showConfirmPassword ? (
                        &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt;
                      ) : (
                        &lt;Eye className=&quot;w-5 h-5&quot; /&gt;
                      )}
                    &lt;/button&gt;
                  &lt;/div&gt;
                  {formErrors.confirmPassword &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.confirmPassword}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Terms Acceptance */}
                &lt;div&gt;
                  &lt;label className=&quot;flex items-start gap-3&quot;&gt;
                    &lt;input
                      type=&quot;checkbox&quot;
                      name=&quot;acceptTerms&quot;
                      checked={formData.acceptTerms}
                      onChange={handleChange}
                      className=&quot;w-4 h-4 mt-1 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500 focus:ring-2&quot;
                    /&gt;
                    &lt;span className=&quot;text-sm text-slate-300 leading-relaxed&quot;&gt;
                      I agree to the{' '}
                      &lt;Link
                        to=&quot;/terms&quot;
                        className=&quot;text-blue-400 hover:text-blue-300 transition-colors underline&quot;
                      &gt;
                        Terms of Service
                      &lt;/Link&gt;{' '}
                      and{' '}
                      &lt;Link
                        to=&quot;/privacy&quot;
                        className=&quot;text-blue-400 hover:text-blue-300 transition-colors underline&quot;
                      &gt;
                        Privacy Policy
                      &lt;/Link&gt;
                    &lt;/span&gt;
                  &lt;/label&gt;
                  {formErrors.acceptTerms &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.acceptTerms}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Submit Button */}
                &lt;button
                  type=&quot;submit&quot;
                  disabled={isLoading}
                  className=&quot;group relative w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-blue-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100&quot;
                &gt;
                  {isLoading ? (
                    &lt;div className=&quot;flex items-center&quot;&gt;
                      &lt;div className=&quot;animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2&quot;&gt;&lt;/div&gt;
                      Creating account...
                    &lt;/div&gt;
                  ) : (
                    &lt;&gt;
                      &lt;span&gt;Create account&lt;/span&gt;
                      &lt;ArrowRight className=&quot;w-5 h-5 transition-transform group-hover:translate-x-1&quot; /&gt;
                    &lt;/&gt;
                  )}
                  &lt;div className=&quot;absolute inset-0 bg-gradient-to-r from-blue-700 to-purple-700 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity -z-10&quot; /&gt;
                &lt;/button&gt;
              &lt;/form&gt;

              {/* Login Link */}
              &lt;div className=&quot;mt-8&quot;&gt;
                &lt;div className=&quot;relative&quot;&gt;
                  &lt;div className=&quot;absolute inset-0 flex items-center&quot;&gt;
                    &lt;div className=&quot;w-full border-t border-white/20&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;relative flex justify-center text-sm&quot;&gt;
                    &lt;span className=&quot;px-4 bg-transparent text-slate-400&quot;&gt;
                      Already have an account?
                    &lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;div className=&quot;mt-6&quot;&gt;
                  &lt;Link
                    to=&quot;/login&quot;
                    className=&quot;w-full flex justify-center py-3 px-4 bg-white/10 backdrop-blur-sm text-white font-medium rounded-lg border border-white/20 transition-all duration-300 hover:bg-white/20 hover:scale-105 flex items-center gap-2&quot;
                  &gt;
                    Sign in to your account
                    &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
                  &lt;/Link&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Back to home link */}
              &lt;div className=&quot;mt-6 text-center&quot;&gt;
                &lt;Link
                  to=&quot;/&quot;
                  className=&quot;text-sm text-slate-400 hover:text-slate-200 transition-colors inline-flex items-center gap-1&quot;
                &gt;
                  ← Back to home
                &lt;/Link&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Register;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Privacy.tsx (Line 1:1 - Line 465:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/privacy/Privacy.tsx (Line 2:1 - Line 466:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn486" onclick="toggleCodeBlock('cloneGroup486', 'expandBtn486', 'collapseBtn486')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn486" onclick="toggleCodeBlock('cloneGroup486', 'expandBtn486', 'collapseBtn486')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup486"><code class="language-tsx text-sm text-gray-800">/**
 * Privacy Policy Page
 *
 * Privacy policy and data protection information for Reporunner
 */

import {
  AlertCircle,
  ArrowRight,
  Calendar,
  CheckCircle,
  Eye,
  FileText,
  Lock,
  Mail,
  Settings,
  Shield,
  Users,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const Privacy: React.FC = () =&gt; {
  const [lastUpdated] = useState('January 20, 2025');

  const privacyPrinciples = [
    {
      icon: Shield,
      title: 'Data Sovereignty',
      description:
        'Your data stays on your infrastructure. We never store or access your workflow data.',
    },
    {
      icon: Lock,
      title: 'End-to-End Encryption',
      description:
        'All data is encrypted in transit and at rest using industry-standard encryption.',
    },
    {
      icon: Eye,
      title: 'Transparency',
      description: &quot;We're open about what data we collect, why we collect it, and how we use it.&quot;,
    },
    {
      icon: Users,
      title: 'User Control',
      description: 'You control your data. Export, delete, or modify your information at any time.',
    },
  ];

  const dataTypes = [
    {
      category: 'Account Information',
      description: 'Information you provide when creating an account',
      items: ['Name and email address', 'Company information', 'Account preferences'],
      retention: 'Until account deletion',
      sharing: 'Never shared with third parties',
    },
    {
      category: 'Usage Analytics',
      description: 'Anonymous data about how you use our platform',
      items: ['Feature usage statistics', 'Performance metrics', 'Error reports'],
      retention: '2 years maximum',
      sharing: 'Aggregated data only',
    },
    {
      category: 'Technical Information',
      description: 'Data necessary for platform operation',
      items: ['IP addresses (hashed)', 'Browser information', 'Session data'],
      retention: '30 days maximum',
      sharing: 'Never shared',
    },
    {
      category: 'Workflow Metadata',
      description: 'Non-sensitive information about your workflows',
      items: ['Workflow names', 'Execution counts', 'Node types used'],
      retention: 'As long as account exists',
      sharing: 'Never shared',
    },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Privacy
              &lt;/span&gt;{' '}
              Policy
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Your privacy is fundamental to everything we do. Learn how we protect your data and
              respect your privacy rights.
            &lt;/p&gt;

            &lt;div className=&quot;bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 mb-8&quot;&gt;
              &lt;div className=&quot;flex items-center justify-center gap-2 text-white&quot;&gt;
                &lt;Calendar className=&quot;w-5 h-5&quot; /&gt;
                &lt;span&gt;Last Updated: {lastUpdated}&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-green-300 mb-2&quot;&gt;0&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Data Breaches&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-2&quot;&gt;GDPR&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Compliant&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-purple-300 mb-2&quot;&gt;SOC2&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Type II&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-orange-300 mb-2&quot;&gt;100%&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Transparent&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Privacy Principles */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Our Privacy Principles&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              These principles guide every decision we make about data and privacy
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            {privacyPrinciples.map((principle, index) =&gt; {
              const Icon = principle.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;bg-blue-100 p-3 rounded-lg w-fit mb-4&quot;&gt;
                    &lt;Icon className=&quot;w-8 h-8 text-blue-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-3&quot;&gt;{principle.title}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600&quot;&gt;{principle.description}&lt;/p&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* What Data We Collect */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;What Data We Collect&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Complete transparency about the information we collect and how we use it
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-8&quot;&gt;
              {dataTypes.map((dataType, index) =&gt; (
                &lt;div key={index} className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-3&quot;&gt;{dataType.category}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{dataType.description}&lt;/p&gt;

                  &lt;div className=&quot;space-y-4&quot;&gt;
                    &lt;div&gt;
                      &lt;h4 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;What we collect:&lt;/h4&gt;
                      &lt;ul className=&quot;space-y-1&quot;&gt;
                        {dataType.items.map((item, itemIndex) =&gt; (
                          &lt;li key={itemIndex} className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;CheckCircle className=&quot;w-4 h-4 text-green-500&quot; /&gt;
                            &lt;span className=&quot;text-gray-700 text-sm&quot;&gt;{item}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;h4 className=&quot;font-semibold text-gray-900 mb-1&quot;&gt;Retention:&lt;/h4&gt;
                        &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{dataType.retention}&lt;/p&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;h4 className=&quot;font-semibold text-gray-900 mb-1&quot;&gt;Sharing:&lt;/h4&gt;
                        &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{dataType.sharing}&lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;

            &lt;div className=&quot;mt-12 bg-blue-50 border border-blue-200 rounded-xl p-8&quot;&gt;
              &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                &lt;AlertCircle className=&quot;w-8 h-8 text-blue-600 mt-1&quot; /&gt;
                &lt;div&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-blue-900 mb-3&quot;&gt;What We DON'T Collect&lt;/h3&gt;
                  &lt;div className=&quot;text-blue-800 space-y-2&quot;&gt;
                    &lt;p&gt;
                      • &lt;strong&gt;Workflow data:&lt;/strong&gt; Your actual workflow content and execution
                      data never leaves your infrastructure
                    &lt;/p&gt;
                    &lt;p&gt;
                      • &lt;strong&gt;Credentials:&lt;/strong&gt; API keys, passwords, and authentication tokens
                      are encrypted and never accessible to us
                    &lt;/p&gt;
                    &lt;p&gt;
                      • &lt;strong&gt;Business data:&lt;/strong&gt; Customer data, financial information, or any
                      sensitive business information
                    &lt;/p&gt;
                    &lt;p&gt;
                      • &lt;strong&gt;Personal files:&lt;/strong&gt; Documents, images, or files processed
                      through your workflows
                    &lt;/p&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Your Rights */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Your Rights&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                You have complete control over your data and privacy
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
              {[
                {
                  title: 'Access Your Data',
                  description: 'Request a complete copy of all personal data we have about you.',
                  action: 'Request Data Export',
                },
                {
                  title: 'Correct Information',
                  description: 'Update or correct any inaccurate personal information.',
                  action: 'Update Profile',
                },
                {
                  title: 'Delete Your Data',
                  description: 'Request complete deletion of your account and all associated data.',
                  action: 'Delete Account',
                },
                {
                  title: 'Opt-Out of Communications',
                  description:
                    'Unsubscribe from marketing emails while keeping essential notifications.',
                  action: 'Manage Preferences',
                },
                {
                  title: 'Data Portability',
                  description: 'Export your data in a machine-readable format to take elsewhere.',
                  action: 'Export Data',
                },
                {
                  title: 'Restrict Processing',
                  description: 'Limit how we process your personal data for specific purposes.',
                  action: 'Set Restrictions',
                },
              ].map((right, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;bg-gray-50 border border-gray-200 rounded-xl p-6 hover:border-blue-300 transition-colors&quot;
                &gt;
                  &lt;h3 className=&quot;text-lg font-bold text-gray-900 mb-3&quot;&gt;{right.title}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{right.description}&lt;/p&gt;
                  &lt;button className=&quot;text-blue-600 font-medium hover:text-blue-700 transition-colors flex items-center gap-2&quot;&gt;
                    {right.action}
                    &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
                  &lt;/button&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Security Measures */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Security Measures&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                How we protect your data with industry-leading security
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;space-y-8&quot;&gt;
              {[
                {
                  category: 'Encryption',
                  measures: [
                    'TLS 1.3 for data in transit',
                    'AES-256 encryption for data at rest',
                    'End-to-end encryption for sensitive data',
                    'Customer-managed encryption keys (Enterprise)',
                  ],
                },
                {
                  category: 'Access Controls',
                  measures: [
                    'Role-based access control (RBAC)',
                    'Multi-factor authentication required',
                    'Principle of least privilege',
                    'Regular access reviews and audits',
                  ],
                },
                {
                  category: 'Infrastructure Security',
                  measures: [
                    'SOC2 Type II certified infrastructure',
                    'Regular security audits and penetration testing',
                    '24/7 security monitoring',
                    'Incident response procedures',
                  ],
                },
                {
                  category: 'Compliance',
                  measures: [
                    'GDPR compliance for EU customers',
                    'CCPA compliance for California residents',
                    'HIPAA compliance options (Enterprise)',
                    'Regular compliance assessments',
                  ],
                },
              ].map((section, index) =&gt; (
                &lt;div key={index} className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-4&quot;&gt;{section.category}&lt;/h3&gt;
                  &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-3&quot;&gt;
                    {section.measures.map((measure, measureIndex) =&gt; (
                      &lt;div key={measureIndex} className=&quot;flex items-center gap-2&quot;&gt;
                        &lt;CheckCircle className=&quot;w-5 h-5 text-green-500&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;{measure}&lt;/span&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Cookie Policy */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6 text-center&quot;&gt;Cookie Policy&lt;/h2&gt;

            &lt;div className=&quot;bg-gray-50 rounded-xl p-8&quot;&gt;
              &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-4&quot;&gt;Essential Cookies&lt;/h3&gt;
              &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                We use essential cookies that are necessary for our website to function properly.
                These cannot be disabled as they are required for basic website functionality.
              &lt;/p&gt;

              &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-4&quot;&gt;Analytics Cookies&lt;/h3&gt;
              &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                With your consent, we use analytics cookies to understand how you use our website.
                This helps us improve your experience. You can opt-out at any time.
              &lt;/p&gt;

              &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-4&quot;&gt;Marketing Cookies&lt;/h3&gt;
              &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                We do not use third-party marketing or tracking cookies. Any marketing-related
                cookies are first-party and respect your privacy preferences.
              &lt;/p&gt;

              &lt;button className=&quot;bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors&quot;&gt;
                Manage Cookie Preferences
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Contact Information */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Questions About Privacy?&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600 mb-8&quot;&gt;
              We're here to help. Contact our privacy team with any questions or concerns.
            &lt;/p&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;Mail className=&quot;w-8 h-8 text-blue-600 mx-auto mb-4&quot; /&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Email Us&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;For privacy-related questions&lt;/p&gt;
                &lt;button className=&quot;text-blue-600 font-medium&quot;&gt;privacy@reporunner.dev&lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;FileText className=&quot;w-8 h-8 text-green-600 mx-auto mb-4&quot; /&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Data Request&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;Request your data or deletion&lt;/p&gt;
                &lt;button className=&quot;text-green-600 font-medium&quot;&gt;Submit Request&lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;Settings className=&quot;w-8 h-8 text-purple-600 mx-auto mb-4&quot; /&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Privacy Settings&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;Manage your preferences&lt;/p&gt;
                &lt;button className=&quot;text-purple-600 font-medium&quot;&gt;Open Settings&lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Privacy-First Workflow Automation&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Experience powerful automation without compromising your privacy. Your data stays on
            your infrastructure, always.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Shield className=&quot;w-5 h-5&quot; /&gt;
              Start Secure Trial
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;FileText className=&quot;w-5 h-5&quot; /&gt;
              Download Privacy Guide
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Privacy;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/PricingPage.tsx (Line 1:1 - Line 717:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/pricingpage/PricingPage.tsx (Line 2:1 - Line 718:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn488" onclick="toggleCodeBlock('cloneGroup488', 'expandBtn488', 'collapseBtn488')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn488" onclick="toggleCodeBlock('cloneGroup488', 'expandBtn488', 'collapseBtn488')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup488"><code class="language-tsx text-sm text-gray-800">/**
 * Pricing Page
 *
 * Comprehensive pricing showcase for Reporunner
 * Different plans and enterprise options
 */

import {
  ArrowRight,
  Check,
  ChevronDown,
  ChevronUp,
  Cloud,
  Phone,
  Star,
  Users,
  X,
  Zap,
} from 'lucide-react';
import React, { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const PricingPage: React.FC = () =&gt; {
  const [billingCycle, setBillingCycle] = useState&lt;'monthly' | 'yearly'&gt;('monthly');
  const [expandedFaq, setExpandedFaq] = useState&lt;number | null&gt;(null);

  const plans = [
    {
      name: 'Community',
      description: 'Perfect for individuals and small projects',
      price: { monthly: 0, yearly: 0 },
      popular: false,
      features: {
        core: [
          'Self-hosted deployment',
          'Unlimited workflows',
          'Basic integrations (50+)',
          'Community support',
          'Docker deployment',
        ],
        limits: [
          'Up to 1,000 executions/month',
          'Single user',
          'Basic monitoring',
          'Standard security',
        ],
        notIncluded: [
          'AI integrations',
          'Enterprise security',
          'Priority support',
          'Advanced analytics',
        ],
      },
      cta: 'Get Started Free',
      ctaStyle: 'secondary',
    },
    {
      name: 'Professional',
      description: 'For growing teams and businesses',
      price: { monthly: 29, yearly: 24 },
      popular: true,
      features: {
        core: [
          'Everything in Community',
          'AI integrations (OpenAI, Anthropic)',
          'Advanced integrations (150+)',
          'Team collaboration',
          'Priority email support',
          'Advanced monitoring',
          'Custom branding',
        ],
        limits: [
          'Up to 10,000 executions/month',
          'Up to 5 team members',
          'Advanced security features',
          '99.9% SLA uptime',
        ],
        notIncluded: [
          'Enterprise SSO',
          'Dedicated support',
          'Custom integrations',
          'Air-gap deployment',
        ],
      },
      cta: 'Start Free Trial',
      ctaStyle: 'primary',
    },
    {
      name: 'Enterprise',
      description: 'For large organizations with advanced needs',
      price: { monthly: 'Custom', yearly: 'Custom' },
      popular: false,
      features: {
        core: [
          'Everything in Professional',
          'Enterprise SSO (SAML, OIDC)',
          'Advanced security &amp; compliance',
          'Dedicated account manager',
          'Custom integrations',
          'Air-gap deployment',
          '24/7 phone support',
          'Custom SLA',
          'Professional services',
        ],
        limits: [
          'Unlimited executions',
          'Unlimited team members',
          'Advanced analytics',
          'Multi-tenant architecture',
        ],
        notIncluded: [],
      },
      cta: 'Contact Sales',
      ctaStyle: 'secondary',
    },
  ];

  const addOns = [
    {
      name: 'Additional Executions',
      description: 'Extra workflow executions beyond your plan limit',
      price: '$0.001 per execution',
      icon: Zap,
    },
    {
      name: 'Premium Support',
      description: '24/7 phone and chat support with 1-hour response SLA',
      price: '$199/month',
      icon: Phone,
    },
    {
      name: 'Professional Services',
      description: 'Custom development, migration, and training services',
      price: '$2,500/week',
      icon: Users,
    },
    {
      name: 'Dedicated Cloud',
      description: 'Managed cloud deployment with dedicated resources',
      price: 'Starting at $500/month',
      icon: Cloud,
    },
  ];

  const comparisonFeatures = [
    {
      category: 'Core Features',
      features: [
        {
          name: 'Self-hosted deployment',
          community: true,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Unlimited workflows',
          community: true,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Basic integrations (50+)',
          community: true,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Advanced integrations (150+)',
          community: false,
          professional: true,
          enterprise: true,
        },
        {
          name: 'AI integrations',
          community: false,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Custom integrations',
          community: false,
          professional: false,
          enterprise: true,
        },
      ],
    },
    {
      category: 'Team &amp; Collaboration',
      features: [
        {
          name: 'Single user',
          community: true,
          professional: false,
          enterprise: false,
        },
        {
          name: 'Up to 5 team members',
          community: false,
          professional: true,
          enterprise: false,
        },
        {
          name: 'Unlimited team members',
          community: false,
          professional: false,
          enterprise: true,
        },
        {
          name: 'Role-based access control',
          community: false,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Team workspaces',
          community: false,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Audit logging',
          community: false,
          professional: false,
          enterprise: true,
        },
      ],
    },
    {
      category: 'Security &amp; Compliance',
      features: [
        {
          name: 'Standard security',
          community: true,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Advanced security',
          community: false,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Enterprise SSO',
          community: false,
          professional: false,
          enterprise: true,
        },
        {
          name: 'Air-gap deployment',
          community: false,
          professional: false,
          enterprise: true,
        },
        {
          name: 'SOC2 compliance',
          community: false,
          professional: false,
          enterprise: true,
        },
        {
          name: 'GDPR compliance',
          community: false,
          professional: true,
          enterprise: true,
        },
      ],
    },
    {
      category: 'Support',
      features: [
        {
          name: 'Community support',
          community: true,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Email support',
          community: false,
          professional: true,
          enterprise: true,
        },
        {
          name: 'Priority support',
          community: false,
          professional: true,
          enterprise: true,
        },
        {
          name: '24/7 phone support',
          community: false,
          professional: false,
          enterprise: true,
        },
        {
          name: 'Dedicated account manager',
          community: false,
          professional: false,
          enterprise: true,
        },
        {
          name: 'Professional services',
          community: false,
          professional: false,
          enterprise: true,
        },
      ],
    },
  ];

  const faqs = [
    {
      question: 'What happens after the free trial?',
      answer:
        'Your free trial includes all Professional features for 14 days. After the trial, you can continue with the Community plan (free) or upgrade to Professional. No credit card required for the trial.',
    },
    {
      question: 'Can I migrate from other platforms?',
      answer:
        'Yes! We provide migration tools and professional services to help you migrate from n8n, Zapier, Make, or any other workflow platform. Our team can assist with the migration process.',
    },
    {
      question: &quot;What's included in self-hosted deployment?&quot;,
      answer:
        'You get Docker Compose files, Kubernetes Helm charts, comprehensive documentation, and setup scripts. For Enterprise customers, we also provide air-gap deployment options and professional deployment services.',
    },
    {
      question: 'How do execution limits work?',
      answer:
        'An execution is counted each time a workflow runs, regardless of how many nodes it contains. Failed executions also count toward your limit. You can purchase additional executions if needed.',
    },
    {
      question: 'What AI integrations are included?',
      answer:
        &quot;Professional and Enterprise plans include integrations with OpenAI, Anthropic Claude, Google Gemini, Hugging Face, and Ollama. We're constantly adding new AI providers.&quot;,
    },
    {
      question: 'Do you offer custom integrations?',
      answer:
        'Yes! Enterprise customers can request custom integrations. Our development team will build and maintain custom nodes for your specific needs. Community users can build their own using our Node SDK.',
    },
    {
      question: &quot;What's your uptime guarantee?&quot;,
      answer:
        'Professional plans include 99.9% SLA. Enterprise plans can negotiate custom SLAs up to 99.99%. This applies to our managed cloud offering - self-hosted uptime depends on your infrastructure.',
    },
    {
      question: 'Can I use Reporunner in air-gapped environments?',
      answer:
        'Yes! Enterprise customers can deploy Reporunner in completely offline environments. This includes all dependencies and updates delivered through secure offline channels.',
    },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Simple{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Transparent
              &lt;/span&gt;
              &lt;br /&gt;
              Pricing
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Start free, scale as you grow. No hidden fees, no vendor lock-in. Complete data
              sovereignty with enterprise-grade features.
            &lt;/p&gt;

            {/* Billing Toggle */}
            &lt;div className=&quot;flex items-center justify-center gap-4 mb-12&quot;&gt;
              &lt;span
                className={`text-lg ${billingCycle === 'monthly' ? 'text-white font-semibold' : 'text-slate-300'}`}
              &gt;
                Monthly
              &lt;/span&gt;
              &lt;button
                onClick={() =&gt; setBillingCycle(billingCycle === 'monthly' ? 'yearly' : 'monthly')}
                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                  billingCycle === 'yearly' ? 'bg-blue-600' : 'bg-gray-600'
                }`}
              &gt;
                &lt;span
                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                    billingCycle === 'yearly' ? 'translate-x-6' : 'translate-x-1'
                  }`}
                /&gt;
              &lt;/button&gt;
              &lt;span
                className={`text-lg ${billingCycle === 'yearly' ? 'text-white font-semibold' : 'text-slate-300'}`}
              &gt;
                Yearly
              &lt;/span&gt;
              {billingCycle === 'yearly' &amp;&amp; (
                &lt;span className=&quot;ml-2 px-3 py-1 bg-green-500 text-white text-sm font-semibold rounded-full&quot;&gt;
                  Save 20%
                &lt;/span&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Pricing Cards */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto&quot;&gt;
            {plans.map((plan, index) =&gt; (
              &lt;div
                key={index}
                className={`relative rounded-2xl p-8 ${
                  plan.popular
                    ? 'bg-gradient-to-b from-blue-50 to-purple-50 border-2 border-blue-200 shadow-xl scale-105'
                    : 'bg-white border border-gray-200 shadow-lg'
                } hover:shadow-xl transition-all duration-300`}
              &gt;
                {plan.popular &amp;&amp; (
                  &lt;div className=&quot;absolute -top-4 left-1/2 transform -translate-x-1/2&quot;&gt;
                    &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold flex items-center gap-2&quot;&gt;
                      &lt;Star className=&quot;w-4 h-4 fill-current&quot; /&gt;
                      Most Popular
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;{plan.description}&lt;/p&gt;

                  &lt;div className=&quot;mb-6&quot;&gt;
                    {typeof plan.price[billingCycle] === 'number' ? (
                      &lt;&gt;
                        &lt;div className=&quot;text-5xl font-bold text-gray-900 mb-2&quot;&gt;
                          ${plan.price[billingCycle]}
                          {plan.price[billingCycle] &gt; 0 &amp;&amp; (
                            &lt;span className=&quot;text-lg font-medium text-gray-600&quot;&gt;
                              /{billingCycle === 'monthly' ? 'mo' : 'yr'}
                            &lt;/span&gt;
                          )}
                        &lt;/div&gt;
                        {billingCycle === 'yearly' &amp;&amp;
                          typeof plan.price.monthly === 'number' &amp;&amp;
                          plan.price.monthly &gt; 0 &amp;&amp; (
                            &lt;div className=&quot;text-sm text-gray-500&quot;&gt;
                              ${plan.price.monthly}/mo billed monthly
                            &lt;/div&gt;
                          )}
                      &lt;/&gt;
                    ) : (
                      &lt;div className=&quot;text-4xl font-bold text-gray-900 mb-2&quot;&gt;
                        {plan.price[billingCycle]}
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;

                  &lt;button
                    className={`w-full py-3 px-6 font-semibold rounded-lg transition-colors ${
                      plan.ctaStyle === 'primary'
                        ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700'
                        : 'bg-gray-900 text-white hover:bg-gray-800'
                    }`}
                  &gt;
                    {plan.cta}
                  &lt;/button&gt;
                &lt;/div&gt;

                {/* Features */}
                &lt;div className=&quot;space-y-6&quot;&gt;
                  &lt;div&gt;
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Included:&lt;/h4&gt;
                    &lt;ul className=&quot;space-y-2&quot;&gt;
                      {plan.features.core.map((feature, idx) =&gt; (
                        &lt;li key={idx} className=&quot;flex items-center gap-3&quot;&gt;
                          &lt;Check className=&quot;w-5 h-5 text-green-500 flex-shrink-0&quot; /&gt;
                          &lt;span className=&quot;text-gray-700&quot;&gt;{feature}&lt;/span&gt;
                        &lt;/li&gt;
                      ))}
                    &lt;/ul&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Limits:&lt;/h4&gt;
                    &lt;ul className=&quot;space-y-2&quot;&gt;
                      {plan.features.limits.map((limit, idx) =&gt; (
                        &lt;li key={idx} className=&quot;flex items-center gap-3&quot;&gt;
                          &lt;div className=&quot;w-5 h-5 flex-shrink-0 flex items-center justify-center&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 bg-blue-500 rounded-full&quot; /&gt;
                          &lt;/div&gt;
                          &lt;span className=&quot;text-gray-700&quot;&gt;{limit}&lt;/span&gt;
                        &lt;/li&gt;
                      ))}
                    &lt;/ul&gt;
                  &lt;/div&gt;

                  {plan.features.notIncluded.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Not included:&lt;/h4&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {plan.features.notIncluded.map((feature, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;X className=&quot;w-5 h-5 text-gray-400 flex-shrink-0&quot; /&gt;
                            &lt;span className=&quot;text-gray-500&quot;&gt;{feature}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Add-ons */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Add-ons &amp; Services&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Extend your Reporunner experience with additional services
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto&quot;&gt;
            {addOns.map((addon, index) =&gt; {
              const Icon = addon.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                    &lt;div className=&quot;bg-blue-100 p-3 rounded-lg&quot;&gt;
                      &lt;Icon className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;h3 className=&quot;font-semibold text-lg text-gray-900 mb-2&quot;&gt;{addon.name}&lt;/h3&gt;
                      &lt;p className=&quot;text-gray-600 mb-3&quot;&gt;{addon.description}&lt;/p&gt;
                      &lt;div className=&quot;font-semibold text-blue-600&quot;&gt;{addon.price}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Feature Comparison */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Detailed Comparison&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Compare all features across our plans&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;overflow-x-auto&quot;&gt;
              &lt;table className=&quot;w-full bg-white rounded-xl shadow-xl&quot;&gt;
                &lt;thead&gt;
                  &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                    &lt;th className=&quot;text-left p-6 font-semibold text-gray-900 min-w-[300px]&quot;&gt;
                      Features
                    &lt;/th&gt;
                    &lt;th className=&quot;text-center p-6 font-semibold text-gray-900 min-w-[150px]&quot;&gt;
                      Community
                    &lt;/th&gt;
                    &lt;th className=&quot;text-center p-6 font-semibold text-blue-900 min-w-[150px] bg-blue-50&quot;&gt;
                      Professional
                    &lt;/th&gt;
                    &lt;th className=&quot;text-center p-6 font-semibold text-gray-900 min-w-[150px]&quot;&gt;
                      Enterprise
                    &lt;/th&gt;
                  &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                  {comparisonFeatures.map((category, categoryIndex) =&gt; (
                    &lt;React.Fragment key={categoryIndex}&gt;
                      &lt;tr className=&quot;bg-gray-50&quot;&gt;
                        &lt;td
                          className=&quot;p-6 font-semibold text-gray-900 border-b border-gray-200&quot;
                          colSpan={4}
                        &gt;
                          {category.category}
                        &lt;/td&gt;
                      &lt;/tr&gt;
                      {category.features.map((feature, featureIndex) =&gt; (
                        &lt;tr
                          key={featureIndex}
                          className=&quot;border-b border-gray-100 hover:bg-gray-50&quot;
                        &gt;
                          &lt;td className=&quot;p-4 text-gray-700&quot;&gt;{feature.name}&lt;/td&gt;
                          &lt;td className=&quot;p-4 text-center&quot;&gt;
                            {feature.community ? (
                              &lt;Check className=&quot;w-5 h-5 text-green-600 mx-auto&quot; /&gt;
                            ) : (
                              &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
                            )}
                          &lt;/td&gt;
                          &lt;td className=&quot;p-4 text-center bg-blue-50&quot;&gt;
                            {feature.professional ? (
                              &lt;Check className=&quot;w-5 h-5 text-green-600 mx-auto&quot; /&gt;
                            ) : (
                              &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
                            )}
                          &lt;/td&gt;
                          &lt;td className=&quot;p-4 text-center&quot;&gt;
                            {feature.enterprise ? (
                              &lt;Check className=&quot;w-5 h-5 text-green-600 mx-auto&quot; /&gt;
                            ) : (
                              &lt;X className=&quot;w-5 h-5 text-gray-400 mx-auto&quot; /&gt;
                            )}
                          &lt;/td&gt;
                        &lt;/tr&gt;
                      ))}
                    &lt;/React.Fragment&gt;
                  ))}
                &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* FAQ */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-3xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Frequently Asked Questions&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Everything you need to know about our pricing&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;space-y-4&quot;&gt;
              {faqs.map((faq, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-lg overflow-hidden&quot;
                &gt;
                  &lt;button
                    onClick={() =&gt; setExpandedFaq(expandedFaq === index ? null : index)}
                    className=&quot;w-full p-6 text-left flex items-center justify-between hover:bg-gray-50 transition-colors&quot;
                  &gt;
                    &lt;span className=&quot;font-semibold text-gray-900&quot;&gt;{faq.question}&lt;/span&gt;
                    {expandedFaq === index ? (
                      &lt;ChevronUp className=&quot;w-5 h-5 text-gray-500&quot; /&gt;
                    ) : (
                      &lt;ChevronDown className=&quot;w-5 h-5 text-gray-500&quot; /&gt;
                    )}
                  &lt;/button&gt;
                  {expandedFaq === index &amp;&amp; (
                    &lt;div className=&quot;px-6 pb-6&quot;&gt;
                      &lt;p className=&quot;text-gray-600 leading-relaxed&quot;&gt;{faq.answer}&lt;/p&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Get Started?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Join thousands of developers and enterprises who trust Reporunner for their workflow
            automation needs.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-8&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              Start Free Trial
              &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Phone className=&quot;w-5 h-5&quot; /&gt;
              Talk to Sales
            &lt;/button&gt;
          &lt;/div&gt;

          &lt;div className=&quot;flex items-center justify-center gap-8 text-sm opacity-80&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;Check className=&quot;w-4 h-4&quot; /&gt;
              No credit card required
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;Check className=&quot;w-4 h-4&quot; /&gt;
              14-day free trial
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;Check className=&quot;w-4 h-4&quot; /&gt;
              Cancel anytime
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default PricingPage;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Login.tsx (Line 1:1 - Line 9:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 1:1 - Line 20:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn490" onclick="toggleCodeBlock('cloneGroup490', 'expandBtn490', 'collapseBtn490')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn490" onclick="toggleCodeBlock('cloneGroup490', 'expandBtn490', 'collapseBtn490')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup490"><code class="language-tsx text-sm text-gray-800">import { ArrowRight, Crown, Eye, EyeOff, Lock, Mail, Shield, Zap } from 'lucide-react';
import type React from 'react';
import { useEffect, useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useAuthStore } from '@/core/stores/authStore';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

const Login</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Login.tsx (Line 7:31 - Line 325:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/login/Login.tsx (Line 11:19 - Line 329:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn491" onclick="toggleCodeBlock('cloneGroup491', 'expandBtn491', 'collapseBtn491')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn491" onclick="toggleCodeBlock('cloneGroup491', 'expandBtn491', 'collapseBtn491')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup491"><code class="language-tsx text-sm text-gray-800">;

const Login: React.FC = () =&gt; {
  const navigate = useNavigate();
  const { login, isLoading, error, isAuthenticated, clearError } = useAuthStore();

  const [formData, setFormData] = useState({
    email: '',
    password: '',
    rememberMe: false,
  });

  const [formErrors, setFormErrors] = useState&lt;Record&lt;string, string&gt;&gt;({});
  const [showPassword, setShowPassword] = useState(false);
  const [isVisible, setIsVisible] = useState(false);

  // Animation trigger
  useEffect(() =&gt; {
    setIsVisible(true);
  }, []);

  // Redirect if already authenticated
  useEffect(() =&gt; {
    if (isAuthenticated) {
      navigate('/app/dashboard');
    }
  }, [isAuthenticated, navigate]);

  // Clear errors when component mounts
  useEffect(() =&gt; {
    clearError();
  }, [clearError]);

  const validateForm = () =&gt; {
    const errors: Record&lt;string, string&gt; = {};

    if (!formData.email) {
      errors.email = 'Email is required';
    } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
      errors.email = 'Email is invalid';
    }

    if (!formData.password) {
      errors.password = 'Password is required';
    }

    setFormErrors(errors);
    return Object.keys(errors).length === 0;
  };

  const handleSubmit = async (e: React.FormEvent) =&gt; {
    e.preventDefault();

    if (!validateForm()) {
      return;
    }

    try {
      await login(formData);
      navigate('/app/dashboard');
    } catch (_error) {}
  };

  const handleChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const { name, value, type, checked } = e.target;
    setFormData((prev) =&gt; ({
      ...prev,
      [name]: type === 'checkbox' ? checked : value,
    }));

    // Clear field error when user starts typing
    if (formErrors[name]) {
      setFormErrors((prev) =&gt; ({ ...prev, [name]: '' }));
    }
  };

  return (
    &lt;div className=&quot;min-h-screen relative overflow-hidden&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Background Elements - matching landing page */}
      &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
      &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

      {/* Animated Background Orbs */}
      &lt;div className=&quot;absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse&quot; /&gt;
      &lt;div className=&quot;absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000&quot; /&gt;

      {/* Floating Elements */}
      &lt;div className=&quot;absolute top-20 right-20 w-20 h-20 bg-blue-500/20 rounded-lg backdrop-blur-sm animate-float hidden lg:block&quot; /&gt;
      &lt;div className=&quot;absolute bottom-20 left-20 w-16 h-16 bg-purple-500/20 rounded-full backdrop-blur-sm animate-float delay-1000 hidden lg:block&quot; /&gt;

      &lt;div className=&quot;relative z-10 min-h-screen flex&quot;&gt;
        {/* Left Side - Branding */}
        &lt;div className=&quot;hidden lg:flex lg:w-1/2 flex-col justify-center px-12&quot;&gt;
          &lt;div
            className={`transition-all duration-1000 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Logo */}
            &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 mb-8 group&quot;&gt;
              &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
              &lt;/div&gt;
              &lt;span className=&quot;text-3xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
            &lt;/Link&gt;

            &lt;h1 className=&quot;text-5xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Welcome back to the{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                future
              &lt;/span&gt;{' '}
              of automation
            &lt;/h1&gt;

            &lt;p className=&quot;text-xl text-slate-200 mb-8 leading-relaxed max-w-lg&quot;&gt;
              Continue building powerful workflows with enterprise-grade security, AI intelligence,
              and complete data sovereignty.
            &lt;/p&gt;

            {/* Feature highlights */}
            &lt;div className=&quot;space-y-4&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-green-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Shield className=&quot;w-5 h-5 text-green-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Enterprise-grade security&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-blue-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Zap className=&quot;w-5 h-5 text-blue-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;AI-powered workflows&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-3 text-slate-200&quot;&gt;
                &lt;div className=&quot;w-10 h-10 rounded-lg bg-purple-500/20 backdrop-blur-sm flex items-center justify-center&quot;&gt;
                  &lt;Crown className=&quot;w-5 h-5 text-purple-400&quot; /&gt;
                &lt;/div&gt;
                &lt;span&gt;Complete data sovereignty&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Side - Login Form */}
        &lt;div className=&quot;w-full lg:w-1/2 flex items-center justify-center px-6 py-12&quot;&gt;
          &lt;div
            className={`w-full max-w-md transition-all duration-1000 delay-300 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
          &gt;
            {/* Mobile Logo */}
            &lt;div className=&quot;lg:hidden text-center mb-8&quot;&gt;
              &lt;Link to=&quot;/&quot; className=&quot;inline-flex items-center gap-3 group&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300&quot;&gt;
                  &lt;Crown className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;span className=&quot;text-2xl font-bold text-white&quot;&gt;Reporunner&lt;/span&gt;
              &lt;/Link&gt;
            &lt;/div&gt;

            {/* Form Card */}
            &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-8 shadow-2xl&quot;&gt;
              &lt;div className=&quot;text-center mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-white mb-2&quot;&gt;Welcome back&lt;/h2&gt;
                &lt;p className=&quot;text-slate-300&quot;&gt;Sign in to your workflow automation account&lt;/p&gt;
              &lt;/div&gt;

              &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
                {/* Global Error */}
                {error &amp;&amp; (
                  &lt;div className=&quot;rounded-lg bg-red-500/20 border border-red-500/30 p-4&quot;&gt;
                    &lt;div className=&quot;text-sm text-red-200&quot;&gt;{error}&lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Email Field */}
                &lt;div&gt;
                  &lt;label htmlFor=&quot;email&quot; className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;&gt;
                    Email address
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Mail className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;email&quot;
                      name=&quot;email&quot;
                      type=&quot;email&quot;
                      autoComplete=&quot;email&quot;
                      required
                      value={formData.email}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-4 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.email ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your email&quot;
                    /&gt;
                  &lt;/div&gt;
                  {formErrors.email &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.email}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Password Field */}
                &lt;div&gt;
                  &lt;label
                    htmlFor=&quot;password&quot;
                    className=&quot;block text-sm font-medium text-slate-200 mb-2&quot;
                  &gt;
                    Password
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Lock className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400&quot; /&gt;
                    &lt;input
                      id=&quot;password&quot;
                      name=&quot;password&quot;
                      type={showPassword ? 'text' : 'password'}
                      autoComplete=&quot;current-password&quot;
                      required
                      value={formData.password}
                      onChange={handleChange}
                      className={`w-full pl-10 pr-12 py-3 bg-white/10 border backdrop-blur-sm rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                        formErrors.password ? 'border-red-500/50' : 'border-white/20'
                      }`}
                      placeholder=&quot;Enter your password&quot;
                    /&gt;
                    &lt;button
                      type=&quot;button&quot;
                      onClick={() =&gt; setShowPassword(!showPassword)}
                      className=&quot;absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors&quot;
                    &gt;
                      {showPassword ? &lt;EyeOff className=&quot;w-5 h-5&quot; /&gt; : &lt;Eye className=&quot;w-5 h-5&quot; /&gt;}
                    &lt;/button&gt;
                  &lt;/div&gt;
                  {formErrors.password &amp;&amp; (
                    &lt;p className=&quot;mt-2 text-sm text-red-300&quot;&gt;{formErrors.password}&lt;/p&gt;
                  )}
                &lt;/div&gt;

                {/* Remember Me &amp; Forgot Password */}
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;label className=&quot;flex items-center&quot;&gt;
                    &lt;input
                      type=&quot;checkbox&quot;
                      name=&quot;rememberMe&quot;
                      checked={formData.rememberMe}
                      onChange={handleChange}
                      className=&quot;w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500 focus:ring-2&quot;
                    /&gt;
                    &lt;span className=&quot;ml-2 text-sm text-slate-300&quot;&gt;Remember me&lt;/span&gt;
                  &lt;/label&gt;
                  &lt;Link
                    to=&quot;/forgot-password&quot;
                    className=&quot;text-sm text-blue-400 hover:text-blue-300 transition-colors&quot;
                  &gt;
                    Forgot password?
                  &lt;/Link&gt;
                &lt;/div&gt;

                {/* Submit Button */}
                &lt;button
                  type=&quot;submit&quot;
                  disabled={isLoading}
                  className=&quot;group relative w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-blue-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100&quot;
                &gt;
                  {isLoading ? (
                    &lt;div className=&quot;flex items-center&quot;&gt;
                      &lt;div className=&quot;animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2&quot;&gt;&lt;/div&gt;
                      Signing in...
                    &lt;/div&gt;
                  ) : (
                    &lt;&gt;
                      &lt;span&gt;Sign in&lt;/span&gt;
                      &lt;ArrowRight className=&quot;w-5 h-5 transition-transform group-hover:translate-x-1&quot; /&gt;
                    &lt;/&gt;
                  )}
                  &lt;div className=&quot;absolute inset-0 bg-gradient-to-r from-blue-700 to-purple-700 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity -z-10&quot; /&gt;
                &lt;/button&gt;
              &lt;/form&gt;

              {/* Register Link */}
              &lt;div className=&quot;mt-8&quot;&gt;
                &lt;div className=&quot;relative&quot;&gt;
                  &lt;div className=&quot;absolute inset-0 flex items-center&quot;&gt;
                    &lt;div className=&quot;w-full border-t border-white/20&quot; /&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;relative flex justify-center text-sm&quot;&gt;
                    &lt;span className=&quot;px-4 bg-transparent text-slate-400&quot;&gt;New to Reporunner?&lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;div className=&quot;mt-6&quot;&gt;
                  &lt;Link
                    to=&quot;/register&quot;
                    className=&quot;w-full flex justify-center py-3 px-4 bg-white/10 backdrop-blur-sm text-white font-medium rounded-lg border border-white/20 transition-all duration-300 hover:bg-white/20 hover:scale-105 flex items-center gap-2&quot;
                  &gt;
                    Create an account
                    &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
                  &lt;/Link&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Back to home link */}
              &lt;div className=&quot;mt-6 text-center&quot;&gt;
                &lt;Link
                  to=&quot;/&quot;
                  className=&quot;text-sm text-slate-400 hover:text-slate-200 transition-colors inline-flex items-center gap-1&quot;
                &gt;
                  ← Back to home
                &lt;/Link&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Login;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/IntegrationsPage.tsx (Line 1:1 - Line 586:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/integrationspage/IntegrationsPage.tsx (Line 3:1 - Line 588:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn493" onclick="toggleCodeBlock('cloneGroup493', 'expandBtn493', 'collapseBtn493')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn493" onclick="toggleCodeBlock('cloneGroup493', 'expandBtn493', 'collapseBtn493')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup493"><code class="language-tsx text-sm text-gray-800">/**
 * Integrations Page
 *
 * Comprehensive integrations showcase for Reporunner
 * Displaying available integrations, categories, and integration capabilities
 */

import {
  ArrowRight,
  BarChart3,
  Brain,
  ChevronDown,
  Code,
  CreditCard,
  Database,
  ExternalLink,
  Filter,
  Globe,
  MessageSquare,
  Play,
  Search,
  Settings,
  ShoppingCart,
  Star,
  Users,
} from 'lucide-react';
import type React from 'react';
import { useMemo, useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const IntegrationsPage: React.FC = () =&gt; {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('all');
  const [showFilters, setShowFilters] = useState(false);

  const categories = [
    { id: 'all', name: 'All Integrations', icon: Globe, count: 150 },
    { id: 'ai-ml', name: 'AI &amp; ML', icon: Brain, count: 25 },
    {
      id: 'communication',
      name: 'Communication',
      icon: MessageSquare,
      count: 18,
    },
    { id: 'data-storage', name: 'Data &amp; Storage', icon: Database, count: 22 },
    { id: 'productivity', name: 'Productivity', icon: Settings, count: 20 },
    { id: 'e-commerce', name: 'E-commerce', icon: ShoppingCart, count: 15 },
    { id: 'developer', name: 'Developer Tools', icon: Code, count: 16 },
    { id: 'analytics', name: 'Analytics', icon: BarChart3, count: 12 },
    { id: 'crm', name: 'CRM &amp; Sales', icon: Users, count: 14 },
    { id: 'finance', name: 'Finance', icon: CreditCard, count: 8 },
  ];

  const integrations = [
    // AI &amp; ML
    {
      id: 'openai',
      name: 'OpenAI',
      description: 'GPT-4, DALL-E, and Whisper API integration for advanced AI capabilities',
      category: 'ai-ml',
      logo: '🤖',
      rating: 4.9,
      reviews: 1247,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Chat Completion', 'Image Generation', 'Audio Transcription', 'Embeddings'],
    },
    {
      id: 'anthropic',
      name: 'Anthropic',
      description: 'Claude AI integration for conversational AI and content generation',
      category: 'ai-ml',
      logo: '🧠',
      rating: 4.8,
      reviews: 892,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Chat', 'Content Generation', 'Code Analysis'],
    },
    {
      id: 'hugging-face',
      name: 'Hugging Face',
      description: 'Access to thousands of ML models for NLP, computer vision, and audio',
      category: 'ai-ml',
      logo: '🤗',
      rating: 4.7,
      reviews: 634,
      premium: false,
      featured: false,
      status: 'beta',
      nodes: ['Model Inference', 'Dataset Access', 'Pipeline Processing'],
    },
    {
      id: 'ollama',
      name: 'Ollama',
      description: 'Run large language models locally with complete privacy',
      category: 'ai-ml',
      logo: '🦙',
      rating: 4.6,
      reviews: 423,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Local LLM', 'Chat Completion', 'Text Generation'],
    },

    // Communication
    {
      id: 'gmail',
      name: 'Gmail',
      description: 'Send, receive, and manage emails with advanced filtering and automation',
      category: 'communication',
      logo: '📧',
      rating: 4.9,
      reviews: 2156,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Send Email', 'Read Email', 'Search', 'Labels', 'Attachments'],
    },
    {
      id: 'slack',
      name: 'Slack',
      description: 'Send messages, create channels, and automate team communication',
      category: 'communication',
      logo: '💬',
      rating: 4.8,
      reviews: 1834,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Send Message', 'Create Channel', 'File Upload', 'User Management'],
    },
    {
      id: 'microsoft-teams',
      name: 'Microsoft Teams',
      description: 'Integrate with Teams for messaging, meetings, and collaboration',
      category: 'communication',
      logo: '👥',
      rating: 4.6,
      reviews: 1243,
      premium: false,
      featured: false,
      status: 'stable',
      nodes: ['Send Message', 'Schedule Meeting', 'File Sharing'],
    },

    // Data &amp; Storage
    {
      id: 'mongodb',
      name: 'MongoDB',
      description: 'NoSQL database operations with advanced querying and aggregation',
      category: 'data-storage',
      logo: '🍃',
      rating: 4.8,
      reviews: 1567,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Find', 'Insert', 'Update', 'Delete', 'Aggregate', 'Index'],
    },
    {
      id: 'postgresql',
      name: 'PostgreSQL',
      description: 'Advanced SQL operations with vector search capabilities',
      category: 'data-storage',
      logo: '🐘',
      rating: 4.9,
      reviews: 1892,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Query', 'Insert', 'Update', 'Vector Search', 'Stored Procedures'],
    },
    {
      id: 'redis',
      name: 'Redis',
      description: 'In-memory data structure store for caching and real-time operations',
      category: 'data-storage',
      logo: '🔴',
      rating: 4.7,
      reviews: 987,
      premium: false,
      featured: false,
      status: 'stable',
      nodes: ['Get', 'Set', 'List Operations', 'Pub/Sub', 'Stream'],
    },

    // Developer Tools
    {
      id: 'github',
      name: 'GitHub',
      description: 'Repository management, issue tracking, and CI/CD automation',
      category: 'developer',
      logo: '🐙',
      rating: 4.9,
      reviews: 2341,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Repository', 'Issues', 'Pull Requests', 'Actions', 'Webhooks'],
    },
    {
      id: 'docker',
      name: 'Docker',
      description: 'Container management and deployment automation',
      category: 'developer',
      logo: '🐳',
      rating: 4.7,
      reviews: 1456,
      premium: false,
      featured: false,
      status: 'stable',
      nodes: ['Run Container', 'Build Image', 'Registry', 'Compose'],
    },

    // Productivity
    {
      id: 'notion',
      name: 'Notion',
      description: 'Database operations, page creation, and content management',
      category: 'productivity',
      logo: '📝',
      rating: 4.8,
      reviews: 1789,
      premium: false,
      featured: true,
      status: 'stable',
      nodes: ['Create Page', 'Database Query', 'Update Properties', 'Search'],
    },
    {
      id: 'airtable',
      name: 'Airtable',
      description: 'Flexible database with spreadsheet interface and automation',
      category: 'productivity',
      logo: '📊',
      rating: 4.6,
      reviews: 1234,
      premium: false,
      featured: false,
      status: 'stable',
      nodes: ['Create Record', 'Update Record', 'List Records', 'Attachments'],
    },
  ];

  const filteredIntegrations = useMemo(() =&gt; {
    return integrations.filter((integration) =&gt; {
      const matchesSearch =
        integration.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
        integration.description.toLowerCase().includes(searchTerm.toLowerCase());
      const matchesCategory =
        selectedCategory === 'all' || integration.category === selectedCategory;
      return matchesSearch &amp;&amp; matchesCategory;
    });
  }, [searchTerm, selectedCategory]);

  const featuredIntegrations = integrations.filter((i) =&gt; i.featured);

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                150+
              &lt;/span&gt;{' '}
              Integrations
              &lt;br /&gt;
              And Growing
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Connect with your favorite tools and services. From AI platforms to databases, from
              communication tools to analytics - everything you need in one platform.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-12&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;Play className=&quot;w-5 h-5&quot; /&gt;
                Request Integration
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                View API Docs
                &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
              &lt;/button&gt;
            &lt;/div&gt;

            {/* Stats */}
            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-2&quot;&gt;150+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Integrations&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-green-300 mb-2&quot;&gt;500+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Node Types&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-purple-300 mb-2&quot;&gt;25+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;AI Models&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-orange-300 mb-2&quot;&gt;99.9%&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Uptime&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Featured Integrations */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-4&quot;&gt;Featured Integrations&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Popular integrations used by thousands of workflows
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16&quot;&gt;
            {featuredIntegrations.slice(0, 8).map((integration) =&gt; (
              &lt;div
                key={integration.id}
                className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-xl transition-all duration-300 hover:-translate-y-1&quot;
              &gt;
                &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
                  &lt;div className=&quot;text-3xl&quot;&gt;{integration.logo}&lt;/div&gt;
                  &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Star className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                    &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;{integration.rating}&lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;h3 className=&quot;font-semibold text-lg text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                  {integration.name}
                &lt;/h3&gt;

                &lt;p className=&quot;text-gray-600 text-sm mb-4 line-clamp-2&quot;&gt;{integration.description}&lt;/p&gt;

                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;span
                    className={`px-2 py-1 text-xs font-medium rounded-full ${
                      integration.status === 'stable'
                        ? 'bg-green-100 text-green-700'
                        : 'bg-orange-100 text-orange-700'
                    }`}
                  &gt;
                    {integration.status}
                  &lt;/span&gt;

                  &lt;button className=&quot;text-blue-600 font-medium text-sm hover:text-blue-700 transition-colors&quot;&gt;
                    Learn more
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* All Integrations */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;
            {/* Sidebar */}
            &lt;div className=&quot;lg:w-1/4&quot;&gt;
              &lt;div className=&quot;bg-white rounded-xl shadow-lg p-6 sticky top-6&quot;&gt;
                {/* Search */}
                &lt;div className=&quot;mb-6&quot;&gt;
                  &lt;label className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;&gt;
                    Search Integrations
                  &lt;/label&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;Search className=&quot;w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400&quot; /&gt;
                    &lt;input
                      type=&quot;text&quot;
                      value={searchTerm}
                      onChange={(e) =&gt; setSearchTerm(e.target.value)}
                      placeholder=&quot;Search integrations...&quot;
                      className=&quot;w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Categories */}
                &lt;div&gt;
                  &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-4&quot;&gt;Categories&lt;/h3&gt;
                  &lt;div className=&quot;space-y-2&quot;&gt;
                    {categories.map((category) =&gt; {
                      const Icon = category.icon;
                      return (
                        &lt;button
                          key={category.id}
                          onClick={() =&gt; setSelectedCategory(category.id)}
                          className={`w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors ${
                            selectedCategory === category.id
                              ? 'bg-blue-50 text-blue-700 border border-blue-200'
                              : 'text-gray-700 hover:bg-gray-50'
                          }`}
                        &gt;
                          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                          &lt;/div&gt;
                          &lt;span
                            className={`text-xs px-2 py-1 rounded-full ${
                              selectedCategory === category.id
                                ? 'bg-blue-100 text-blue-600'
                                : 'bg-gray-100 text-gray-500'
                            }`}
                          &gt;
                            {category.count}
                          &lt;/span&gt;
                        &lt;/button&gt;
                      );
                    })}
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Integration Grid */}
            &lt;div className=&quot;lg:w-3/4&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between mb-8&quot;&gt;
                &lt;div&gt;
                  &lt;h2 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;
                    {selectedCategory === 'all'
                      ? 'All Integrations'
                      : categories.find((c) =&gt; c.id === selectedCategory)?.name}
                  &lt;/h2&gt;
                  &lt;p className=&quot;text-gray-600&quot;&gt;
                    {filteredIntegrations.length} integration
                    {filteredIntegrations.length !== 1 ? 's' : ''} found
                  &lt;/p&gt;
                &lt;/div&gt;

                &lt;button
                  onClick={() =&gt; setShowFilters(!showFilters)}
                  className=&quot;flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors&quot;
                &gt;
                  &lt;Filter className=&quot;w-4 h-4&quot; /&gt;
                  Filters
                  &lt;ChevronDown
                    className={`w-4 h-4 transition-transform ${showFilters ? 'rotate-180' : ''}`}
                  /&gt;
                &lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                {filteredIntegrations.map((integration) =&gt; (
                  &lt;div
                    key={integration.id}
                    className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                  &gt;
                    &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                        &lt;div className=&quot;text-3xl&quot;&gt;{integration.logo}&lt;/div&gt;
                        &lt;div&gt;
                          &lt;h3 className=&quot;font-semibold text-lg text-gray-900 group-hover:text-blue-900 transition-colors&quot;&gt;
                            {integration.name}
                          &lt;/h3&gt;
                          &lt;div className=&quot;flex items-center gap-2 mt-1&quot;&gt;
                            &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                              &lt;Star className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                              &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{integration.rating}&lt;/span&gt;
                            &lt;/div&gt;
                            &lt;span className=&quot;text-gray-400&quot;&gt;•&lt;/span&gt;
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;
                              {integration.reviews} reviews
                            &lt;/span&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                        {integration.premium &amp;&amp; (
                          &lt;span className=&quot;px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full&quot;&gt;
                            Premium
                          &lt;/span&gt;
                        )}
                        &lt;span
                          className={`px-2 py-1 text-xs font-medium rounded-full ${
                            integration.status === 'stable'
                              ? 'bg-green-100 text-green-700'
                              : 'bg-orange-100 text-orange-700'
                          }`}
                        &gt;
                          {integration.status}
                        &lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;p className=&quot;text-gray-600 mb-4 line-clamp-2&quot;&gt;{integration.description}&lt;/p&gt;

                    {/* Node Types */}
                    &lt;div className=&quot;mb-4&quot;&gt;
                      &lt;div className=&quot;text-sm font-medium text-gray-700 mb-2&quot;&gt;Available Nodes:&lt;/div&gt;
                      &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
                        {integration.nodes.slice(0, 3).map((node, index) =&gt; (
                          &lt;span
                            key={index}
                            className=&quot;px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md&quot;
                          &gt;
                            {node}
                          &lt;/span&gt;
                        ))}
                        {integration.nodes.length &gt; 3 &amp;&amp; (
                          &lt;span className=&quot;px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md&quot;&gt;
                            +{integration.nodes.length - 3} more
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;button className=&quot;text-blue-600 font-medium text-sm hover:text-blue-700 transition-colors flex items-center gap-1&quot;&gt;
                        View Documentation
                        &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;
                      &lt;/button&gt;

                      &lt;button className=&quot;px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2&quot;&gt;
                        Add to Workflow
                        &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;

              {filteredIntegrations.length === 0 &amp;&amp; (
                &lt;div className=&quot;text-center py-12&quot;&gt;
                  &lt;div className=&quot;text-6xl mb-4&quot;&gt;🔍&lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-semibold text-gray-900 mb-2&quot;&gt;
                    No integrations found
                  &lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                    Try adjusting your search terms or category filter.
                  &lt;/p&gt;
                  &lt;button className=&quot;px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors&quot;&gt;
                    Request Integration
                  &lt;/button&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Request Integration CTA */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Don't See Your Integration?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            We're constantly adding new integrations. Request yours and we'll prioritize it based on
            community demand.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              Request Integration
              &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors&quot;&gt;
              Build Custom Node
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default IntegrationsPage;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Integrations.tsx (Line 3:9 - Line 236:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/integrations/Integrations.tsx (Line 6:19 - Line 239:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn495" onclick="toggleCodeBlock('cloneGroup495', 'expandBtn495', 'collapseBtn495')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn495" onclick="toggleCodeBlock('cloneGroup495', 'expandBtn495', 'collapseBtn495')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup495"><code class="language-tsx text-sm text-gray-800">;

const Integrations: React.FC = () =&gt; {
  // Generate integrations from node registry (Pure Registry System)
  const integrations = useMemo(() =&gt; {
    const nodeTypes = nodeRegistry.getAllNodeTypeDescriptions();
    return nodeTypes.map((nodeType) =&gt; ({
      id: nodeType.name,
      name: nodeType.displayName,
      description: nodeType.description,
      category: nodeType.categories?.[0] || 'Other',
      icon: nodeType.icon || '⚡',
      version: 1.0,
      status: 'available',
      isConnected: false, // Mock data - in real app would come from backend
      nodeTypes: [
        {
          id: nodeType.name,
          name: nodeType.displayName,
          description: nodeType.description,
          type: 'action',
        },
      ],
    }));
  }, []);

  const connectedIntegrations = integrations.filter((i) =&gt; i.isConnected);
  const isLoading = false; // No loading needed for registry data

  const [selectedCategory, setSelectedCategory] = useState&lt;string&gt;('All');
  const [searchTerm, setSearchTerm] = useState('');
  const [filteredIntegrationsState, setFilteredIntegrationsState] = useState&lt;any[]&gt;([]);

  const categories = React.useMemo(
    () =&gt; ['All', ...Array.from(new Set(integrations.map((i) =&gt; i.category))).sort()],
    [integrations]
  );

  // Update filtered integrations when dependencies change
  useEffect(() =&gt; {
    const filtered = integrations.filter((integration) =&gt; {
      const matchesCategory =
        selectedCategory === 'All' || integration.category === selectedCategory;
      const matchesSearch =
        integration.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
        (integration.description || '').toLowerCase().includes(searchTerm.toLowerCase());

      return matchesCategory &amp;&amp; matchesSearch;
    });

    setFilteredIntegrationsState(filtered);
  }, [integrations, selectedCategory, searchTerm]);

  const filteredIntegrations = filteredIntegrationsState;

  const handleConnect = async (_integration: any) =&gt; {
    // Mock connection config - Pure Registry System handles this automatically
    const _config = {
      apiKey: 'mock-api-key',
      connectedAt: new Date().toISOString(),
    };
  };

  const handleDisconnect = async (_integrationId: string) =&gt; {
    if (confirm('Are you sure you want to disconnect this integration?')) {
    }
  };

  return (
    &lt;div className=&quot;p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-8&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Integrations&lt;/h1&gt;
        &lt;p className=&quot;text-gray-600&quot;&gt;Connect your favorite apps and services&lt;/p&gt;
      &lt;/div&gt;

      {/* Stats */}
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-6 mb-8&quot;&gt;
        &lt;div className=&quot;bg-white p-6 rounded-lg shadow&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;🔗&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-gray-600&quot;&gt;Available&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-gray-900&quot;&gt;{integrations.length}&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;bg-white p-6 rounded-lg shadow&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;✅&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-gray-600&quot;&gt;Connected&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-gray-900&quot;&gt;{connectedIntegrations.length}&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;bg-white p-6 rounded-lg shadow&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;📈&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-gray-600&quot;&gt;Active Workflows&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-gray-900&quot;&gt;8&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Filters */}
      &lt;div className=&quot;bg-white rounded-lg shadow mb-6&quot;&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          &lt;div className=&quot; md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-4 w-full &quot;&gt;
              &lt;input
                type=&quot;text&quot;
                placeholder=&quot;Search integrations...&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                className=&quot;border border-gray-300 rounded-lg px-4 py-4 mb-4 w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex flex-wrap items-center space-x-2 space-y-2 justify-between&quot;&gt;
              {categories.map((category) =&gt; (
                &lt;button
                  key={category}
                  onClick={() =&gt; {
                    setSelectedCategory(category || '');
                    setSearchTerm(''); // Clear search when switching categories
                  }}
                  className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                    selectedCategory === category
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                  }`}
                &gt;
                  {category}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Integrations Grid */}
      &lt;div className=&quot;bg-white rounded-lg shadow&quot;&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-gray-600&quot;&gt;Loading integrations...&lt;/p&gt;
            &lt;/div&gt;
          ) : (
            &lt;div
              className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;
              key={`${selectedCategory}-${searchTerm}`}
            &gt;
              {filteredIntegrations.map((integration) =&gt; (
                &lt;div
                  key={`${selectedCategory}-${integration.id}`}
                  className=&quot;border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow&quot;
                &gt;
                  &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                    &lt;div className=&quot;flex items-center&quot;&gt;
                      &lt;div className=&quot;text-3xl mr-3&quot;&gt;{integration.icon}&lt;/div&gt;
                      &lt;div&gt;
                        &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{integration.name}&lt;/h3&gt;
                        &lt;p className=&quot;text-sm text-gray-500&quot;&gt;{integration.category}&lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                    {integration.isConnected &amp;&amp; (
                      &lt;span className=&quot;bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full&quot;&gt;
                        Connected
                      &lt;/span&gt;
                    )}
                  &lt;/div&gt;

                  &lt;p className=&quot;text-gray-600 text-sm mb-4&quot;&gt;{integration.description}&lt;/p&gt;

                  &lt;div className=&quot;mb-4&quot;&gt;
                    &lt;p className=&quot;text-xs text-gray-500 mb-2&quot;&gt;
                      {integration.nodeTypes.length} node type
                      {integration.nodeTypes.length !== 1 ? 's' : ''} available
                    &lt;/p&gt;
                    &lt;div className=&quot;flex flex-wrap gap-1&quot;&gt;
                      {integration.nodeTypes.slice(0, 3).map((nodeType: any) =&gt; (
                        &lt;span
                          key={nodeType.id}
                          className=&quot;bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded&quot;
                        &gt;
                          {nodeType.name}
                        &lt;/span&gt;
                      ))}
                      {integration.nodeTypes.length &gt; 3 &amp;&amp; (
                        &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                          +{integration.nodeTypes.length - 3} more
                        &lt;/span&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;flex justify-end&quot;&gt;
                    {integration.isConnected ? (
                      &lt;button
                        onClick={() =&gt; handleDisconnect(integration.id)}
                        className=&quot;bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm&quot;
                      &gt;
                        Disconnect
                      &lt;/button&gt;
                    ) : (
                      &lt;button
                        onClick={() =&gt; handleConnect(integration)}
                        className=&quot;bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm&quot;
                      &gt;
                        Connect
                      &lt;/button&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          )}

          {!isLoading &amp;&amp; filteredIntegrations.length === 0 &amp;&amp; (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;p className=&quot;text-gray-600&quot;&gt;No integrations found matching your criteria&lt;/p&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Integrations;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Features.tsx (Line 1:1 - Line 561:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/features/Features.tsx (Line 2:1 - Line 562:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn497" onclick="toggleCodeBlock('cloneGroup497', 'expandBtn497', 'collapseBtn497')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn497" onclick="toggleCodeBlock('cloneGroup497', 'expandBtn497', 'collapseBtn497')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup497"><code class="language-tsx text-sm text-gray-800">/**
 * Features Page
 *
 * Comprehensive feature showcase for Reporunner
 * Highlighting AI capabilities, enterprise features, and competitive advantages
 */

import {
  ArrowRight,
  BarChart3,
  Brain,
  Check,
  ChevronRight,
  Cloud,
  Code2,
  Database,
  GitBranch,
  Lock,
  Play,
  Settings,
  Shield,
  Users,
  Webhook,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const Features: React.FC = () =&gt; {
  const [activeCategory, setActiveCategory] = useState('ai-powered');

  const featureCategories = [
    {
      id: 'ai-powered',
      name: 'AI-Powered Automation',
      icon: Brain,
      description: 'Next-generation AI integration for intelligent workflows',
    },
    {
      id: 'enterprise',
      name: 'Enterprise Security',
      icon: Shield,
      description: 'Bank-grade security with complete compliance',
    },
    {
      id: 'hybrid-database',
      name: 'Hybrid Database',
      icon: Database,
      description: 'MongoDB + PostgreSQL with vector capabilities',
    },
    {
      id: 'self-hosted',
      name: 'Self-Hosted Control',
      icon: Cloud,
      description: 'Complete control over your data and infrastructure',
    },
    {
      id: 'developer',
      name: 'Developer Experience',
      icon: Code2,
      description: 'Built by developers, for developers',
    },
  ];

  const features = {
    'ai-powered': [
      {
        name: 'AI Agent Orchestration',
        description:
          'Create intelligent agents that can reason, plan, and execute complex multi-step workflows autonomously.',
        icon: Brain,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Vector Database Integration',
        description:
          'Built-in pgvector support for semantic search, document understanding, and intelligent data retrieval.',
        icon: Database,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Multi-LLM Support',
        description:
          'OpenAI, Anthropic, Google Gemini, and Ollama integration with automatic provider switching.',
        icon: Zap,
        demo: false,
        enterprise: false,
      },
      {
        name: 'Intelligent Data Transformation',
        description:
          'AI-powered data mapping and transformation that understands context and intent.',
        icon: GitBranch,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Natural Language Workflow Creation',
        description: 'Describe your workflow in plain English and watch AI build it for you.',
        icon: Settings,
        demo: true,
        enterprise: true,
      },
      {
        name: 'Predictive Analytics',
        description: 'AI models that predict workflow performance and suggest optimizations.',
        icon: BarChart3,
        demo: false,
        enterprise: true,
      },
    ],
    enterprise: [
      {
        name: 'SSO Integration',
        description: 'SAML, OIDC, and Active Directory integration with role-based access control.',
        icon: Users,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Audit Logging',
        description: 'Comprehensive audit trails for all workflow executions and user actions.',
        icon: Lock,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Multi-Tenant Architecture',
        description: 'Complete tenant isolation with custom branding and domain support.',
        icon: Shield,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Advanced Monitoring',
        description: 'Real-time dashboards, alerts, and performance metrics with SLA tracking.',
        icon: BarChart3,
        demo: true,
        enterprise: true,
      },
      {
        name: 'Disaster Recovery',
        description: 'Automated backups, point-in-time recovery, and geographic redundancy.',
        icon: Database,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Compliance Center',
        description: 'SOC2, GDPR, HIPAA compliance with automated compliance reporting.',
        icon: Shield,
        demo: false,
        enterprise: true,
      },
    ],
    'hybrid-database': [
      {
        name: 'MongoDB Primary Storage',
        description: 'Fast, flexible document storage for workflows, executions, and user data.',
        icon: Database,
        demo: true,
        enterprise: false,
      },
      {
        name: 'PostgreSQL + pgvector',
        description: 'Dedicated AI database for embeddings, vector search, and analytics.',
        icon: Brain,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Intelligent Query Routing',
        description:
          'Automatic data routing between databases based on query type and performance.',
        icon: GitBranch,
        demo: false,
        enterprise: false,
      },
      {
        name: 'Real-time Sync',
        description: 'Seamless data synchronization between databases with conflict resolution.',
        icon: Zap,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Advanced Analytics',
        description: 'Time-series analysis, pattern recognition, and predictive modeling.',
        icon: BarChart3,
        demo: true,
        enterprise: true,
      },
      {
        name: 'Semantic Search',
        description: 'Natural language search across all workflow data and documentation.',
        icon: Settings,
        demo: true,
        enterprise: false,
      },
    ],
    'self-hosted': [
      {
        name: 'Docker Compose Deployment',
        description: 'One-command deployment with production-ready configuration.',
        icon: Code2,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Kubernetes Helm Charts',
        description: 'Enterprise-grade K8s deployment with auto-scaling and load balancing.',
        icon: Cloud,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Complete Data Sovereignty',
        description: 'Your data never leaves your infrastructure. Zero external dependencies.',
        icon: Lock,
        demo: false,
        enterprise: false,
      },
      {
        name: 'Air-Gap Deployment',
        description: 'Fully offline deployment capability for high-security environments.',
        icon: Shield,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Custom Domain &amp; SSL',
        description: 'Host on your domain with automatic SSL certificate management.',
        icon: Webhook,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Backup &amp; Migration Tools',
        description:
          'Built-in tools for data backup, restoration, and cross-environment migration.',
        icon: Database,
        demo: false,
        enterprise: true,
      },
    ],
    developer: [
      {
        name: 'TypeScript-First',
        description:
          'Full TypeScript support with comprehensive type definitions and IntelliSense.',
        icon: Code2,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Node SDK',
        description: 'Rich SDK for building custom nodes, integrations, and extensions.',
        icon: GitBranch,
        demo: true,
        enterprise: false,
      },
      {
        name: 'REST API',
        description: 'Complete REST API for workflow management, execution, and monitoring.',
        icon: Webhook,
        demo: true,
        enterprise: false,
      },
      {
        name: 'GraphQL Support',
        description:
          'Optional GraphQL endpoint for efficient data fetching and real-time subscriptions.',
        icon: Settings,
        demo: false,
        enterprise: true,
      },
      {
        name: 'Hot Module Replacement',
        description: 'Instant development feedback with HMR for custom nodes and UI components.',
        icon: Zap,
        demo: true,
        enterprise: false,
      },
      {
        name: 'Plugin Marketplace',
        description: 'Extensible plugin system with community marketplace for custom integrations.',
        icon: Users,
        demo: false,
        enterprise: true,
      },
    ],
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Features That{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Scale
              &lt;/span&gt;
              &lt;br /&gt;
              With Your Enterprise
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              From AI-powered automation to enterprise-grade security, discover the features that
              make Reporunner the most powerful self-hosted workflow platform.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;Play className=&quot;w-5 h-5&quot; /&gt;
                Interactive Demo
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                View Documentation
                &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Feature Categories Navigation */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-wrap justify-center gap-4 mb-16&quot;&gt;
            {featureCategories.map((category) =&gt; {
              const Icon = category.icon;
              return (
                &lt;button
                  key={category.id}
                  onClick={() =&gt; setActiveCategory(category.id)}
                  className={`group p-6 rounded-xl transition-all duration-300 ${
                    activeCategory === category.id
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white scale-105 shadow-xl'
                      : 'bg-white border border-gray-200 text-gray-700 hover:border-blue-300 hover:shadow-lg'
                  }`}
                &gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;Icon
                      className={`w-8 h-8 mx-auto mb-3 ${
                        activeCategory === category.id
                          ? 'text-white'
                          : 'text-blue-600 group-hover:text-blue-700'
                      }`}
                    /&gt;
                    &lt;h3 className=&quot;font-semibold text-lg mb-2&quot;&gt;{category.name}&lt;/h3&gt;
                    &lt;p
                      className={`text-sm ${
                        activeCategory === category.id ? 'text-blue-100' : 'text-gray-500'
                      }`}
                    &gt;
                      {category.description}
                    &lt;/p&gt;
                  &lt;/div&gt;
                &lt;/button&gt;
              );
            })}
          &lt;/div&gt;

          {/* Feature Grid */}
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
            {features[activeCategory as keyof typeof features]?.map((feature, index) =&gt; {
              const Icon = feature.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-xl transition-all duration-300 hover:-translate-y-1&quot;
                &gt;
                  &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                    &lt;Icon className=&quot;w-8 h-8 text-blue-600 group-hover:text-blue-700 transition-colors&quot; /&gt;
                    &lt;div className=&quot;flex gap-2&quot;&gt;
                      {feature.demo &amp;&amp; (
                        &lt;span className=&quot;px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full&quot;&gt;
                          Demo
                        &lt;/span&gt;
                      )}
                      {feature.enterprise &amp;&amp; (
                        &lt;span className=&quot;px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full&quot;&gt;
                          Enterprise
                        &lt;/span&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;

                  &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-3 group-hover:text-blue-900 transition-colors&quot;&gt;
                    {feature.name}
                  &lt;/h3&gt;

                  &lt;p className=&quot;text-gray-600 leading-relaxed mb-4&quot;&gt;{feature.description}&lt;/p&gt;

                  &lt;div className=&quot;flex items-center text-blue-600 font-medium group-hover:text-blue-700 transition-colors&quot;&gt;
                    &lt;span className=&quot;text-sm&quot;&gt;Learn more&lt;/span&gt;
                    &lt;ChevronRight className=&quot;w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform&quot; /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Comparison Section */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-16&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Why Choose Reporunner?&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              See how Reporunner compares to other workflow automation platforms
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;overflow-x-auto&quot;&gt;
            &lt;table className=&quot;w-full bg-white rounded-xl shadow-xl&quot;&gt;
              &lt;thead&gt;
                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                  &lt;th className=&quot;text-left p-6 font-semibold text-gray-900&quot;&gt;Feature&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-blue-900&quot;&gt;Reporunner&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-gray-700&quot;&gt;n8n&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-gray-700&quot;&gt;Zapier&lt;/th&gt;
                  &lt;th className=&quot;text-center p-6 font-semibold text-gray-700&quot;&gt;Make&lt;/th&gt;
                &lt;/tr&gt;
              &lt;/thead&gt;
              &lt;tbody&gt;
                {[
                  {
                    feature: 'AI-Powered Automation',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Self-Hosted',
                    reporunner: true,
                    n8n: true,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Vector Database',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Enterprise SSO',
                    reporunner: true,
                    n8n: false,
                    zapier: true,
                    make: true,
                  },
                  {
                    feature: 'Custom Nodes SDK',
                    reporunner: true,
                    n8n: true,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Real-time Collaboration',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: true,
                  },
                  {
                    feature: 'Multi-Database Support',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                  {
                    feature: 'Air-Gap Deployment',
                    reporunner: true,
                    n8n: false,
                    zapier: false,
                    make: false,
                  },
                ].map((row, index) =&gt; (
                  &lt;tr key={index} className=&quot;border-b border-gray-100 hover:bg-gray-50&quot;&gt;
                    &lt;td className=&quot;p-6 font-medium text-gray-900&quot;&gt;{row.feature}&lt;/td&gt;
                    &lt;td className=&quot;p-6 text-center&quot;&gt;
                      {row.reporunner ? (
                        &lt;Check className=&quot;w-6 h-6 text-green-600 mx-auto&quot; /&gt;
                      ) : (
                        &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                      )}
                    &lt;/td&gt;
                    &lt;td className=&quot;p-6 text-center&quot;&gt;
                      {row.n8n ? (
                        &lt;Check className=&quot;w-6 h-6 text-green-600 mx-auto&quot; /&gt;
                      ) : (
                        &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                      )}
                    &lt;/td&gt;
                    &lt;td className=&quot;p-6 text-center&quot;&gt;
                      {row.zapier ? (
                        &lt;Check className=&quot;w-6 h-6 text-green-600 mx-auto&quot; /&gt;
                      ) : (
                        &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                      )}
                    &lt;/td&gt;
                    &lt;td className=&quot;p-6 text-center&quot;&gt;
                      {row.make ? (
                        &lt;Check className=&quot;w-6 h-6 text-green-600 mx-auto&quot; /&gt;
                      ) : (
                        &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                      )}
                    &lt;/td&gt;
                  &lt;/tr&gt;
                ))}
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Experience These Features?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Start your free trial today and see how Reporunner can transform your workflow
            automation.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              Start Free Trial
              &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors&quot;&gt;
              Schedule Demo
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Features;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Executions.tsx (Line 4:25 - Line 278:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/executions/Executions.tsx (Line 7:19 - Line 281:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn499" onclick="toggleCodeBlock('cloneGroup499', 'expandBtn499', 'collapseBtn499')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn499" onclick="toggleCodeBlock('cloneGroup499', 'expandBtn499', 'collapseBtn499')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup499"><code class="language-tsx text-sm text-gray-800">;

const workflowApiService = new WorkflowApiService();

const Executions: React.FC = () =&gt; {
  const [executions, setExecutions] = useState&lt;WorkflowExecution[]&gt;([]);
  const [isLoading, setIsLoading] = useState(true);
  const [filter, setFilter] = useState&lt;
    'all' | 'pending' | 'running' | 'success' | 'error' | 'cancelled'
  &gt;('all');
  const [page, setPage] = useState(1);
  const [, setHasMore] = useState(true);

  const loadExecutions = useCallback(async () =&gt; {
    setIsLoading(true);
    try {
      const result = await workflowApiService.getExecutions({
        status: filter === 'all' ? undefined : filter,
        limit: 20,
        offset: (page - 1) * 20,
        sortOrder: 'desc',
      });

      // Transform results to match WorkflowExecution interface
      const transformedExecutions = result.items.map((execution) =&gt; ({
        ...execution,
        error: execution.error
          ? typeof execution.error === 'string'
            ? {
                message: execution.error,
                nodeId: undefined,
                code: undefined,
                stack: undefined,
              }
            : execution.error
          : undefined,
        logs: Array.isArray(execution.logs)
          ? execution.logs.map((log: any) =&gt;
              typeof log === 'string' ? log : log.message || String(log)
            )
          : [],
        results: Array.isArray(execution.results)
          ? execution.results.map((nodeResult) =&gt; ({
              ...nodeResult,
              status:
                nodeResult.status === 'completed'
                  ? ('success' as const)
                  : nodeResult.status === 'failed'
                    ? ('error' as const)
                    : (nodeResult.status as 'success' | 'error' | 'skipped'),
            }))
          : undefined,
      }));

      if (page === 1) {
        setExecutions(transformedExecutions);
      } else {
        setExecutions((prev) =&gt; [...prev, ...transformedExecutions]);
      }
      setHasMore(result.hasMore);
    } catch (_error) {
      setExecutions([]);
    } finally {
      setIsLoading(false);
    }
  }, [filter, page]);

  useEffect(() =&gt; {
    loadExecutions();
  }, [loadExecutions]);

  const handleStopExecution = async (executionId: string) =&gt; {
    try {
      await workflowApiService.stopExecution(executionId);
      // Refresh executions
      setPage(1);
      loadExecutions();
    } catch (_error) {
      alert('Failed to stop execution');
    }
  };

  const getStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'success':
        return 'bg-green-500/20 text-green-300 border border-green-500/30';
      case 'running':
        return 'bg-blue-500/20 text-blue-300 border border-blue-500/30';
      case 'pending':
        return 'bg-yellow-500/20 text-yellow-300 border border-yellow-500/30';
      case 'error':
        return 'bg-red-500/20 text-red-300 border border-red-500/30';
      case 'cancelled':
        return 'bg-slate-500/20 text-slate-300 border border-slate-500/30';
      default:
        return 'bg-slate-500/20 text-slate-300 border border-slate-500/30';
    }
  };

  const formatDuration = (execution: WorkflowExecution) =&gt; {
    if (!execution.endTime || !execution.startTime) return 'N/A';
    const start = new Date(execution.startTime).getTime();
    const end = new Date(execution.endTime).getTime();
    const seconds = Math.floor((end - start) / 1000);
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  };

  return (
    &lt;div className=&quot;p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-8&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-white&quot;&gt;Workflow Executions&lt;/h1&gt;
        &lt;p className=&quot;text-slate-300&quot;&gt;Monitor and track your workflow runs&lt;/p&gt;
      &lt;/div&gt;

      {/* Stats */}
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-4 gap-6 mb-8&quot;&gt;
        {[
          { name: 'Total Executions', value: executions.length, icon: '▶️' },
          {
            name: 'Running',
            value: executions.filter((e) =&gt; e.status === 'running').length,
            icon: '🔄',
          },
          {
            name: 'Success',
            value: executions.filter((e) =&gt; e.status === 'success').length,
            icon: '✅',
          },
          {
            name: 'Failed',
            value: executions.filter((e) =&gt; e.status === 'error').length,
            icon: '❌',
          },
        ].map((stat) =&gt; (
          &lt;div
            key={stat.name}
            className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;
          &gt;
            &lt;div className=&quot;flex items-center&quot;&gt;
              &lt;div className=&quot;text-2xl mr-4&quot;&gt;{stat.icon}&lt;/div&gt;
              &lt;div&gt;
                &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;{stat.name}&lt;/p&gt;
                &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{stat.value}&lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;

      {/* Filters */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg mb-6&quot;&gt;
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;flex space-x-4&quot;&gt;
            {[
              { key: 'all', label: 'All' },
              { key: 'pending', label: 'Pending' },
              { key: 'running', label: 'Running' },
              { key: 'success', label: 'Success' },
              { key: 'error', label: 'Failed' },
              { key: 'cancelled', label: 'Cancelled' },
            ].map((filterOption) =&gt; (
              &lt;button
                key={filterOption.key}
                onClick={() =&gt; setFilter(filterOption.key as any)}
                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${
                  filter === filterOption.key
                    ? 'bg-white/20 text-blue-300 backdrop-blur-sm border border-white/30'
                    : 'text-slate-300 hover:bg-white/10 hover:text-white'
                }`}
              &gt;
                {filterOption.label}
              &lt;/button&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Executions List */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading executions...&lt;/p&gt;
            &lt;/div&gt;
          ) : executions.length === 0 ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;p className=&quot;text-slate-300&quot;&gt;No executions found&lt;/p&gt;
            &lt;/div&gt;
          ) : (
            &lt;div className=&quot;space-y-4&quot;&gt;
              {executions.map((execution) =&gt; (
                &lt;div
                  key={execution.id}
                  className=&quot;bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/10 transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                        &lt;h3 className=&quot;font-medium text-white&quot;&gt;
                          Workflow ID: {execution.workflowId}
                        &lt;/h3&gt;
                        &lt;span
                          className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(execution.status)}`}
                        &gt;
                          {execution.status}
                        &lt;/span&gt;
                      &lt;/div&gt;
                      &lt;div className=&quot;mt-2 flex items-center space-x-6 text-sm text-slate-300&quot;&gt;
                        &lt;span&gt;
                          Started:{' '}
                          {execution.startTime
                            ? new Date(execution.startTime).toLocaleString()
                            : 'N/A'}
                        &lt;/span&gt;
                        &lt;span&gt;Duration: {formatDuration(execution)}&lt;/span&gt;
                        &lt;span&gt;Triggered by: {execution.triggerType}&lt;/span&gt;
                      &lt;/div&gt;
                      {execution.nodeExecutions &amp;&amp; execution.nodeExecutions.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;mt-3&quot;&gt;
                          &lt;details className=&quot;group&quot;&gt;
                            &lt;summary className=&quot;cursor-pointer text-sm text-blue-300 hover:text-blue-200 transition-colors&quot;&gt;
                              View Node Results ({execution.nodeExecutions.length} nodes)
                            &lt;/summary&gt;
                            &lt;div className=&quot;mt-2 bg-white/10 backdrop-blur-sm rounded p-3 text-sm border border-white/20&quot;&gt;
                              {execution.nodeExecutions.map((nodeExec, index) =&gt; (
                                &lt;div key={index} className=&quot;text-slate-300 mb-1&quot;&gt;
                                  &lt;span className=&quot;font-medium text-white&quot;&gt;
                                    {nodeExec.nodeName || nodeExec.nodeId}:
                                  &lt;/span&gt;
                                  &lt;span
                                    className={`ml-2 ${nodeExec.status === 'completed' ? 'text-green-300' : nodeExec.status === 'failed' ? 'text-red-300' : 'text-blue-300'}`}
                                  &gt;
                                    {nodeExec.status}
                                  &lt;/span&gt;
                                  {nodeExec.duration &amp;&amp; (
                                    &lt;span className=&quot;ml-2 text-slate-400&quot;&gt;
                                      ({nodeExec.duration}ms)
                                    &lt;/span&gt;
                                  )}
                                &lt;/div&gt;
                              ))}
                            &lt;/div&gt;
                          &lt;/details&gt;
                        &lt;/div&gt;
                      )}
                    &lt;/div&gt;
                    &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                      {(execution.status === 'running' || execution.status === 'pending') &amp;&amp; (
                        &lt;button
                          onClick={() =&gt; handleStopExecution(execution.id)}
                          className=&quot;text-red-300 hover:text-red-200 px-3 py-1 text-sm border border-red-500/30 rounded bg-red-500/20 backdrop-blur-sm transition-colors&quot;
                        &gt;
                          Cancel
                        &lt;/button&gt;
                      )}
                      &lt;button className=&quot;text-slate-400 hover:text-white transition-colors&quot;&gt;
                        ⋮
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Executions;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Enterprise.tsx (Line 1:1 - Line 593:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/enterprise/Enterprise.tsx (Line 4:1 - Line 596:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn501" onclick="toggleCodeBlock('cloneGroup501', 'expandBtn501', 'collapseBtn501')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn501" onclick="toggleCodeBlock('cloneGroup501', 'expandBtn501', 'collapseBtn501')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup501"><code class="language-tsx text-sm text-gray-800">/**
 * Enterprise Page
 *
 * Comprehensive enterprise features and solutions for Reporunner
 * Targeting large organizations with advanced needs
 */

import {
  Award,
  BarChart3,
  Building,
  Calendar,
  CheckCircle,
  Cloud,
  Database,
  ExternalLink,
  FileText,
  Globe,
  Lock,
  Phone,
  Settings,
  Shield,
  Star,
  TrendingUp,
  Users,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const Enterprise: React.FC = () =&gt; {
  const [activeTab, setActiveTab] = useState('security');

  const enterpriseFeatures = {
    security: [
      {
        title: 'Enterprise SSO Integration',
        description:
          'SAML, OIDC, and Active Directory integration with multi-factor authentication support',
        icon: Lock,
        benefits: ['Zero trust architecture', 'Centralized user management', 'Compliance ready'],
      },
      {
        title: 'Advanced Audit Logging',
        description: 'Comprehensive audit trails for all actions, workflows, and data access',
        icon: FileText,
        benefits: ['Tamper-proof logs', 'Real-time alerts', 'Compliance reporting'],
      },
      {
        title: 'Role-Based Access Control',
        description: 'Granular permissions with custom roles and resource-level access control',
        icon: Users,
        benefits: ['Least privilege access', 'Workflow-level permissions', 'Team isolation'],
      },
      {
        title: 'Data Encryption',
        description: 'End-to-end encryption for data at rest and in transit with key management',
        icon: Shield,
        benefits: ['AES-256 encryption', 'Customer-managed keys', 'Zero-knowledge architecture'],
      },
    ],
    deployment: [
      {
        title: 'Air-Gap Deployment',
        description: 'Complete offline deployment with no external dependencies',
        icon: Cloud,
        benefits: ['Highest security', 'Regulatory compliance', 'Full control'],
      },
      {
        title: 'Multi-Cloud Support',
        description: 'Deploy across AWS, Azure, GCP, or on-premises infrastructure',
        icon: Globe,
        benefits: ['Vendor flexibility', 'Disaster recovery', 'Cost optimization'],
      },
      {
        title: 'Auto-Scaling Infrastructure',
        description: 'Kubernetes-native deployment with automatic scaling and load balancing',
        icon: TrendingUp,
        benefits: ['Handle peak loads', 'Cost efficient', 'High availability'],
      },
      {
        title: 'Disaster Recovery',
        description: 'Automated backups, point-in-time recovery, and geographic redundancy',
        icon: Database,
        benefits: ['RPO &lt; 1 hour', 'RTO &lt; 4 hours', 'Multi-region backup'],
      },
    ],
    governance: [
      {
        title: 'Workflow Governance',
        description: 'Approval workflows, version control, and deployment pipelines',
        icon: Settings,
        benefits: ['Change management', 'Version history', 'Rollback capabilities'],
      },
      {
        title: 'Data Governance',
        description: 'Data lineage, classification, and retention policies',
        icon: Database,
        benefits: ['Data discovery', 'Privacy compliance', 'Retention automation'],
      },
      {
        title: 'Compliance Framework',
        description: 'Pre-built compliance templates for SOC2, GDPR, HIPAA, and more',
        icon: Award,
        benefits: ['Automated compliance', 'Audit readiness', 'Risk reduction'],
      },
      {
        title: 'Performance Analytics',
        description: 'Advanced analytics and reporting for workflows and resource utilization',
        icon: BarChart3,
        benefits: ['Cost optimization', 'Performance insights', 'Capacity planning'],
      },
    ],
  };

  const useCases = [
    {
      title: 'Financial Services',
      description: 'Automate compliance reporting, fraud detection, and customer onboarding',
      icon: Building,
      challenges: ['Regulatory compliance', 'Data security', 'High availability'],
      solutions: ['SOC2 certified platform', 'End-to-end encryption', '99.99% SLA'],
      results: '50% reduction in compliance costs, 80% faster onboarding',
    },
    {
      title: 'Healthcare',
      description: 'HIPAA-compliant patient data processing and clinical workflow automation',
      icon: Shield,
      challenges: ['HIPAA compliance', 'Patient privacy', 'System integration'],
      solutions: ['HIPAA-ready deployment', 'PHI encryption', 'HL7 integrations'],
      results: '100% HIPAA compliance, 60% faster patient processing',
    },
    {
      title: 'Manufacturing',
      description: 'Supply chain optimization, quality control, and predictive maintenance',
      icon: Settings,
      challenges: ['Legacy system integration', 'Real-time processing', 'Scalability'],
      solutions: ['Custom connectors', 'Edge deployment', 'Auto-scaling'],
      results: '30% reduction in downtime, $2M annual savings',
    },
    {
      title: 'Government',
      description: 'Secure data processing, inter-agency workflows, and citizen services',
      icon: Lock,
      challenges: ['Security clearances', 'Air-gap deployment', 'Compliance'],
      solutions: ['FedRAMP ready', 'Air-gap support', 'Government cloud'],
      results: 'Accelerated digital transformation, improved citizen experience',
    },
  ];

  const testimonials = [
    {
      quote:
        &quot;Reporunner's enterprise features allowed us to maintain compliance while accelerating our digital transformation. The air-gap deployment was crucial for our security requirements.&quot;,
      author: 'Sarah Chen',
      title: 'CTO',
      company: 'SecureBank',
      logo: '🏦',
    },
    {
      quote:
        'The hybrid database architecture with AI capabilities has transformed how we process patient data. HIPAA compliance was seamless with their pre-built templates.',
      author: 'Dr. Michael Rodriguez',
      title: 'Chief Medical Officer',
      company: 'HealthFirst',
      logo: '🏥',
    },
    {
      quote:
        'We migrated from multiple workflow tools to Reporunner and saw immediate ROI. The enterprise SSO and audit logging saved us months of compliance work.',
      author: 'Jennifer Walsh',
      title: 'VP of Operations',
      company: 'GlobalManufacturing',
      logo: '🏭',
    },
  ];

  const pricing = {
    starter: {
      name: 'Enterprise Starter',
      price: '$500/month',
      description: 'For teams of 25-100 users',
      features: [
        'Up to 100 users',
        'Enterprise SSO',
        'Advanced security',
        'Priority support',
        'SLA: 99.9%',
      ],
    },
    growth: {
      name: 'Enterprise Growth',
      price: '$1,500/month',
      description: 'For organizations of 100-500 users',
      features: [
        'Up to 500 users',
        'All Starter features',
        'Advanced analytics',
        'Custom integrations',
        '24/7 phone support',
        'SLA: 99.95%',
      ],
    },
    scale: {
      name: 'Enterprise Scale',
      price: 'Custom',
      description: 'For large organizations 500+ users',
      features: [
        'Unlimited users',
        'All Growth features',
        'Air-gap deployment',
        'Dedicated support',
        'Professional services',
        'Custom SLA up to 99.99%',
      ],
    },
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-12 items-center&quot;&gt;
              &lt;div&gt;
                &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
                  Enterprise{' '}
                  &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                    Workflow
                  &lt;/span&gt;
                  &lt;br /&gt;
                  Automation
                &lt;/h1&gt;
                &lt;p className=&quot;text-xl text-slate-200 mb-8 leading-relaxed&quot;&gt;
                  Built for the most demanding enterprise requirements. Complete security,
                  compliance, and scalability with the power of AI-driven automation.
                &lt;/p&gt;

                &lt;div className=&quot;flex flex-col sm:flex-row gap-4 mb-8&quot;&gt;
                  &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                    &lt;Calendar className=&quot;w-5 h-5&quot; /&gt;
                    Schedule Demo
                  &lt;/button&gt;
                  &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                    &lt;Phone className=&quot;w-5 h-5&quot; /&gt;
                    Talk to Sales
                  &lt;/button&gt;
                &lt;/div&gt;

                {/* Enterprise Stats */}
                &lt;div className=&quot;grid grid-cols-2 gap-6&quot;&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-1&quot;&gt;99.99%&lt;/div&gt;
                    &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Enterprise SLA&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;text-3xl font-bold text-green-300 mb-1&quot;&gt;SOC2&lt;/div&gt;
                    &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Type II Certified&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div className=&quot;relative&quot;&gt;
                &lt;div className=&quot;bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20&quot;&gt;
                  &lt;div className=&quot;mb-6&quot;&gt;
                    &lt;h3 className=&quot;text-xl font-semibold text-white mb-4&quot;&gt;
                      Trusted by Enterprise Leaders
                    &lt;/h3&gt;
                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      {['🏦 SecureBank', '🏥 HealthFirst', '🏭 GlobalMfg', '🏛️ GovTech'].map(
                        (company, index) =&gt; (
                          &lt;div
                            key={index}
                            className=&quot;bg-white/10 rounded-lg p-3 text-center text-white&quot;
                          &gt;
                            {company}
                          &lt;/div&gt;
                        )
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;border-t border-white/20 pt-6&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between text-white&quot;&gt;
                      &lt;span&gt;Enterprise Satisfaction&lt;/span&gt;
                      &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                        {[...Array(5)].map((_, i) =&gt; (
                          &lt;Star key={i} className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                        ))}
                        &lt;span className=&quot;ml-2 font-semibold&quot;&gt;4.9/5&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Enterprise Features Tabs */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Enterprise-Grade Capabilities&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Everything your enterprise needs for secure, scalable workflow automation
            &lt;/p&gt;
          &lt;/div&gt;

          {/* Tab Navigation */}
          &lt;div className=&quot;flex justify-center mb-12&quot;&gt;
            &lt;div className=&quot;bg-gray-100 rounded-lg p-1 flex&quot;&gt;
              {[
                { id: 'security', name: 'Security &amp; Compliance', icon: Shield },
                { id: 'deployment', name: 'Deployment &amp; Scale', icon: Cloud },
                {
                  id: 'governance',
                  name: 'Governance &amp; Control',
                  icon: Settings,
                },
              ].map((tab) =&gt; {
                const Icon = tab.icon;
                return (
                  &lt;button
                    key={tab.id}
                    onClick={() =&gt; setActiveTab(tab.id)}
                    className={`flex items-center gap-2 px-6 py-3 rounded-md font-medium transition-colors ${
                      activeTab === tab.id
                        ? 'bg-white text-blue-600 shadow-sm'
                        : 'text-gray-600 hover:text-gray-900'
                    }`}
                  &gt;
                    &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                    {tab.name}
                  &lt;/button&gt;
                );
              })}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Tab Content */}
          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            {enterpriseFeatures[activeTab as keyof typeof enterpriseFeatures]?.map(
              (feature, index) =&gt; {
                const Icon = feature.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                  &gt;
                    &lt;div className=&quot;flex items-start gap-4 mb-4&quot;&gt;
                      &lt;div className=&quot;bg-blue-100 p-3 rounded-lg group-hover:bg-blue-600 transition-colors&quot;&gt;
                        &lt;Icon className=&quot;w-6 h-6 text-blue-600 group-hover:text-white transition-colors&quot; /&gt;
                      &lt;/div&gt;
                      &lt;div className=&quot;flex-1&quot;&gt;
                        &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                          {feature.title}
                        &lt;/h3&gt;
                        &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;ml-16&quot;&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {feature.benefits.map((benefit, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;CheckCircle className=&quot;w-4 h-4 text-green-500&quot; /&gt;
                            &lt;span className=&quot;text-gray-700 text-sm&quot;&gt;{benefit}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              }
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Use Cases */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Industry Solutions&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Proven solutions for the most regulated and demanding industries
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
            {useCases.map((useCase, index) =&gt; {
              const Icon = useCase.icon;
              return (
                &lt;div
                  key={index}
                  className=&quot;bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow&quot;
                &gt;
                  &lt;div className=&quot;flex items-center gap-4 mb-6&quot;&gt;
                    &lt;div className=&quot;bg-blue-100 p-3 rounded-lg&quot;&gt;
                      &lt;Icon className=&quot;w-8 h-8 text-blue-600&quot; /&gt;
                    &lt;/div&gt;
                    &lt;div&gt;
                      &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;{useCase.title}&lt;/h3&gt;
                      &lt;p className=&quot;text-gray-600&quot;&gt;{useCase.description}&lt;/p&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;space-y-6&quot;&gt;
                    &lt;div&gt;
                      &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Challenges:&lt;/h4&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {useCase.challenges.map((challenge, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 bg-red-400 rounded-full&quot; /&gt;
                            &lt;span className=&quot;text-gray-700&quot;&gt;{challenge}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Solutions:&lt;/h4&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {useCase.solutions.map((solution, idx) =&gt; (
                          &lt;li key={idx} className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;CheckCircle className=&quot;w-4 h-4 text-green-500&quot; /&gt;
                            &lt;span className=&quot;text-gray-700&quot;&gt;{solution}&lt;/span&gt;
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;bg-blue-50 p-4 rounded-lg&quot;&gt;
                      &lt;h4 className=&quot;font-semibold text-blue-900 mb-2&quot;&gt;Results:&lt;/h4&gt;
                      &lt;p className=&quot;text-blue-800&quot;&gt;{useCase.results}&lt;/p&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Testimonials */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;What Enterprise Leaders Say&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Trusted by the world's most demanding organizations
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
            {testimonials.map((testimonial, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow&quot;
              &gt;
                &lt;div className=&quot;flex items-center gap-2 mb-4&quot;&gt;
                  {[...Array(5)].map((_, i) =&gt; (
                    &lt;Star key={i} className=&quot;w-4 h-4 fill-yellow-400 text-yellow-400&quot; /&gt;
                  ))}
                &lt;/div&gt;

                &lt;blockquote className=&quot;text-gray-700 mb-6 italic&quot;&gt;&quot;{testimonial.quote}&quot;&lt;/blockquote&gt;

                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-3xl&quot;&gt;{testimonial.logo}&lt;/div&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{testimonial.author}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{testimonial.title}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-500 text-sm&quot;&gt;{testimonial.company}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Enterprise Pricing */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Enterprise Pricing&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Flexible pricing that scales with your organization
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto&quot;&gt;
            {Object.entries(pricing).map(([key, plan]) =&gt; (
              &lt;div
                key={key}
                className={`rounded-2xl p-8 ${
                  key === 'growth'
                    ? 'bg-gradient-to-b from-blue-50 to-purple-50 border-2 border-blue-200 shadow-xl scale-105'
                    : 'bg-white border border-gray-200 shadow-lg'
                } hover:shadow-xl transition-all duration-300`}
              &gt;
                {key === 'growth' &amp;&amp; (
                  &lt;div className=&quot;text-center mb-4&quot;&gt;
                    &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold&quot;&gt;
                      Most Popular
                    &lt;/span&gt;
                  &lt;/div&gt;
                )}

                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{plan.description}&lt;/p&gt;

                  &lt;div className=&quot;text-4xl font-bold text-gray-900 mb-2&quot;&gt;{plan.price}&lt;/div&gt;

                  &lt;button
                    className={`w-full py-3 px-6 font-semibold rounded-lg transition-colors ${
                      key === 'growth'
                        ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700'
                        : 'bg-gray-900 text-white hover:bg-gray-800'
                    }`}
                  &gt;
                    {key === 'scale' ? 'Contact Sales' : 'Start Trial'}
                  &lt;/button&gt;
                &lt;/div&gt;

                &lt;ul className=&quot;space-y-3&quot;&gt;
                  {plan.features.map((feature, idx) =&gt; (
                    &lt;li key={idx} className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;CheckCircle className=&quot;w-5 h-5 text-green-500 flex-shrink-0&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{feature}&lt;/span&gt;
                    &lt;/li&gt;
                  ))}
                &lt;/ul&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready for Enterprise Automation?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Join the world's most security-conscious organizations who trust Reporunner for their
            mission-critical workflows.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-8&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Calendar className=&quot;w-5 h-5&quot; /&gt;
              Schedule Enterprise Demo
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
              Enterprise Documentation
            &lt;/button&gt;
          &lt;/div&gt;

          &lt;div className=&quot;flex items-center justify-center gap-8 text-sm opacity-80&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              30-day enterprise trial
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              Dedicated success manager
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              Custom deployment options
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Enterprise;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Documentation.tsx (Line 1:1 - Line 639:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/documentation/Documentation.tsx (Line 2:1 - Line 640:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn503" onclick="toggleCodeBlock('cloneGroup503', 'expandBtn503', 'collapseBtn503')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn503" onclick="toggleCodeBlock('cloneGroup503', 'expandBtn503', 'collapseBtn503')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup503"><code class="language-tsx text-sm text-gray-800">/**
 * Documentation Page
 *
 * Comprehensive documentation hub for Reporunner
 * Getting started guides, tutorials, and references
 */

import {
  ArrowRight,
  BookOpen,
  Brain,
  ChevronRight,
  Clock,
  Cloud,
  Code,
  Download,
  ExternalLink,
  FileText,
  GitBranch,
  Layers,
  Play,
  Search,
  Settings,
  Shield,
  Star,
  Users,
  Video,
  Webhook,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const Documentation: React.FC = () =&gt; {
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('getting-started');

  const categories = [
    { id: 'getting-started', name: 'Getting Started', icon: Play },
    { id: 'installation', name: 'Installation', icon: Download },
    { id: 'workflows', name: 'Workflows', icon: GitBranch },
    { id: 'nodes', name: 'Nodes &amp; Integrations', icon: Layers },
    { id: 'ai-ml', name: 'AI &amp; ML', icon: Brain },
    { id: 'enterprise', name: 'Enterprise', icon: Shield },
    { id: 'deployment', name: 'Deployment', icon: Cloud },
    { id: 'api', name: 'API Reference', icon: Code },
    { id: 'sdk', name: 'SDK &amp; Extensions', icon: Settings },
  ];

  const documentation = {
    'getting-started': [
      {
        title: 'Quick Start Guide',
        description: 'Get up and running with Reporunner in 5 minutes',
        type: 'guide',
        readTime: '5 min',
        difficulty: 'Beginner',
        popular: true,
        lastUpdated: '2 days ago',
      },
      {
        title: 'Core Concepts',
        description: 'Understanding workflows, nodes, and executions',
        type: 'guide',
        readTime: '10 min',
        difficulty: 'Beginner',
        popular: true,
        lastUpdated: '1 week ago',
      },
      {
        title: 'Your First Workflow',
        description: 'Build your first automated workflow step by step',
        type: 'tutorial',
        readTime: '15 min',
        difficulty: 'Beginner',
        popular: true,
        lastUpdated: '3 days ago',
      },
      {
        title: 'Workflow Editor Overview',
        description: 'Navigate the visual workflow editor like a pro',
        type: 'guide',
        readTime: '8 min',
        difficulty: 'Beginner',
        popular: false,
        lastUpdated: '5 days ago',
      },
    ],
    installation: [
      {
        title: 'Docker Installation',
        description: 'Deploy Reporunner using Docker Compose',
        type: 'guide',
        readTime: '10 min',
        difficulty: 'Beginner',
        popular: true,
        lastUpdated: '1 day ago',
      },
      {
        title: 'Kubernetes Deployment',
        description: 'Production deployment with Kubernetes and Helm',
        type: 'guide',
        readTime: '20 min',
        difficulty: 'Intermediate',
        popular: true,
        lastUpdated: '1 week ago',
      },
      {
        title: 'Manual Installation',
        description: 'Install from source for custom configurations',
        type: 'guide',
        readTime: '30 min',
        difficulty: 'Advanced',
        popular: false,
        lastUpdated: '2 weeks ago',
      },
      {
        title: 'Environment Variables',
        description: 'Complete reference for environment configuration',
        type: 'reference',
        readTime: '5 min',
        difficulty: 'Intermediate',
        popular: false,
        lastUpdated: '4 days ago',
      },
    ],
    workflows: [
      {
        title: 'Workflow Fundamentals',
        description: 'Understanding workflow structure and execution',
        type: 'guide',
        readTime: '12 min',
        difficulty: 'Beginner',
        popular: true,
        lastUpdated: '1 week ago',
      },
      {
        title: 'Advanced Workflow Patterns',
        description: 'Loops, conditions, error handling, and more',
        type: 'guide',
        readTime: '25 min',
        difficulty: 'Intermediate',
        popular: true,
        lastUpdated: '3 days ago',
      },
      {
        title: 'Workflow Testing &amp; Debugging',
        description: 'Best practices for testing and debugging workflows',
        type: 'guide',
        readTime: '15 min',
        difficulty: 'Intermediate',
        popular: false,
        lastUpdated: '1 week ago',
      },
      {
        title: 'Performance Optimization',
        description: 'Optimize workflow performance and resource usage',
        type: 'guide',
        readTime: '18 min',
        difficulty: 'Advanced',
        popular: false,
        lastUpdated: '2 weeks ago',
      },
    ],
    nodes: [
      {
        title: 'Node Types Overview',
        description: 'Complete guide to all available node types',
        type: 'reference',
        readTime: '20 min',
        difficulty: 'Beginner',
        popular: true,
        lastUpdated: '2 days ago',
      },
      {
        title: 'Building Custom Nodes',
        description: 'Create custom nodes with the Node SDK',
        type: 'tutorial',
        readTime: '35 min',
        difficulty: 'Advanced',
        popular: true,
        lastUpdated: '1 week ago',
      },
      {
        title: 'Integration Credentials',
        description: 'Managing API keys, OAuth, and authentication',
        type: 'guide',
        readTime: '12 min',
        difficulty: 'Intermediate',
        popular: true,
        lastUpdated: '4 days ago',
      },
      {
        title: 'Transform Node Guide',
        description: 'Data transformation and JavaScript expressions',
        type: 'tutorial',
        readTime: '22 min',
        difficulty: 'Intermediate',
        popular: false,
        lastUpdated: '1 week ago',
      },
    ],
    'ai-ml': [
      {
        title: 'AI Agent Setup',
        description: 'Configure and deploy AI agents in workflows',
        type: 'tutorial',
        readTime: '25 min',
        difficulty: 'Intermediate',
        popular: true,
        lastUpdated: '1 day ago',
      },
      {
        title: 'Vector Database Integration',
        description: 'Using pgvector for semantic search and embeddings',
        type: 'guide',
        readTime: '18 min',
        difficulty: 'Advanced',
        popular: true,
        lastUpdated: '3 days ago',
      },
      {
        title: 'Multi-LLM Workflows',
        description: 'Orchestrate multiple AI models in single workflows',
        type: 'tutorial',
        readTime: '30 min',
        difficulty: 'Advanced',
        popular: false,
        lastUpdated: '1 week ago',
      },
      {
        title: 'AI Model Comparison',
        description: 'Compare OpenAI, Anthropic, and local models',
        type: 'guide',
        readTime: '15 min',
        difficulty: 'Intermediate',
        popular: false,
        lastUpdated: '5 days ago',
      },
    ],
  };

  const quickLinks = [
    { title: 'API Reference', icon: Code, url: '/api-reference' },
    { title: 'Node SDK', icon: Settings, url: '/node-sdk' },
    { title: 'Examples', icon: FileText, url: '/examples' },
    { title: 'Video Tutorials', icon: Video, url: '/tutorials' },
    {
      title: 'GitHub',
      icon: GitBranch,
      url: 'https://github.com/reporunner/reporunner',
    },
    { title: 'Community', icon: Users, url: '/community' },
  ];

  const filteredDocs =
    documentation[selectedCategory as keyof typeof documentation]?.filter(
      (doc) =&gt;
        doc.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
        doc.description.toLowerCase().includes(searchQuery.toLowerCase())
    ) || [];

  const getDifficultyColor = (difficulty: string) =&gt; {
    switch (difficulty) {
      case 'Beginner':
        return 'text-green-600 bg-green-100';
      case 'Intermediate':
        return 'text-yellow-600 bg-yellow-100';
      case 'Advanced':
        return 'text-red-600 bg-red-100';
      default:
        return 'text-gray-600 bg-gray-100';
    }
  };

  const getTypeIcon = (type: string) =&gt; {
    switch (type) {
      case 'guide':
        return BookOpen;
      case 'tutorial':
        return Play;
      case 'reference':
        return FileText;
      default:
        return FileText;
    }
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Documentation
              &lt;/span&gt;
              &lt;br /&gt;&amp; Guides
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Everything you need to build powerful workflows with Reporunner. From quick starts to
              advanced deployment guides.
            &lt;/p&gt;

            {/* Search */}
            &lt;div className=&quot;max-w-2xl mx-auto mb-12&quot;&gt;
              &lt;div className=&quot;relative&quot;&gt;
                &lt;Search className=&quot;w-6 h-6 absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400&quot; /&gt;
                &lt;input
                  type=&quot;text&quot;
                  value={searchQuery}
                  onChange={(e) =&gt; setSearchQuery(e.target.value)}
                  placeholder=&quot;Search documentation...&quot;
                  className=&quot;w-full pl-12 pr-4 py-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Quick Stats */}
            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-2&quot;&gt;50+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Guides&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-green-300 mb-2&quot;&gt;25+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Tutorials&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-purple-300 mb-2&quot;&gt;15+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Video Guides&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-orange-300 mb-2&quot;&gt;100+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Code Examples&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Quick Links */}
      &lt;section className=&quot;py-8 bg-white border-b border-gray-200&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-wrap justify-center gap-4&quot;&gt;
            {quickLinks.map((link, index) =&gt; {
              const Icon = link.icon;
              return (
                &lt;a
                  key={index}
                  href={link.url}
                  className=&quot;flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-700 hover:text-gray-900&quot;
                &gt;
                  &lt;Icon className=&quot;w-4 h-4&quot; /&gt;
                  &lt;span className=&quot;font-medium&quot;&gt;{link.title}&lt;/span&gt;
                  {link.url.startsWith('http') &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3&quot; /&gt;}
                &lt;/a&gt;
              );
            })}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Documentation Content */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;
            {/* Sidebar */}
            &lt;div className=&quot;lg:w-1/4&quot;&gt;
              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6 sticky top-6&quot;&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-4&quot;&gt;Categories&lt;/h3&gt;
                &lt;nav className=&quot;space-y-2&quot;&gt;
                  {categories.map((category) =&gt; {
                    const Icon = category.icon;
                    return (
                      &lt;button
                        key={category.id}
                        onClick={() =&gt; setSelectedCategory(category.id)}
                        className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${
                          selectedCategory === category.id
                            ? 'bg-blue-50 text-blue-700 border border-blue-200'
                            : 'text-gray-700 hover:bg-gray-50'
                        }`}
                      &gt;
                        &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                        &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                      &lt;/button&gt;
                    );
                  })}
                &lt;/nav&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Main Content */}
            &lt;div className=&quot;lg:w-3/4&quot;&gt;
              &lt;div className=&quot;mb-8&quot;&gt;
                &lt;h2 className=&quot;text-3xl font-bold text-gray-900 mb-2&quot;&gt;
                  {categories.find((c) =&gt; c.id === selectedCategory)?.name}
                &lt;/h2&gt;
                &lt;p className=&quot;text-gray-600&quot;&gt;
                  {filteredDocs.length} article
                  {filteredDocs.length !== 1 ? 's' : ''} found
                &lt;/p&gt;
              &lt;/div&gt;

              {/* Documentation Grid */}
              &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                {filteredDocs.map((doc, index) =&gt; {
                  const TypeIcon = getTypeIcon(doc.type);
                  return (
                    &lt;div
                      key={index}
                      className=&quot;group bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300 cursor-pointer&quot;
                    &gt;
                      &lt;div className=&quot;flex items-start justify-between mb-4&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                          &lt;div className=&quot;bg-blue-100 p-2 rounded-lg group-hover:bg-blue-600 transition-colors&quot;&gt;
                            &lt;TypeIcon className=&quot;w-5 h-5 text-blue-600 group-hover:text-white transition-colors&quot; /&gt;
                          &lt;/div&gt;
                          {doc.popular &amp;&amp; (
                            &lt;div className=&quot;flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium&quot;&gt;
                              &lt;Star className=&quot;w-3 h-3 fill-current&quot; /&gt;
                              Popular
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;
                        &lt;ChevronRight className=&quot;w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors&quot; /&gt;
                      &lt;/div&gt;

                      &lt;h3 className=&quot;font-semibold text-xl text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                        {doc.title}
                      &lt;/h3&gt;

                      &lt;p className=&quot;text-gray-600 mb-4 line-clamp-2&quot;&gt;{doc.description}&lt;/p&gt;

                      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-1 text-sm text-gray-500&quot;&gt;
                            &lt;Clock className=&quot;w-4 h-4&quot; /&gt;
                            {doc.readTime}
                          &lt;/div&gt;
                          &lt;span
                            className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(doc.difficulty)}`}
                          &gt;
                            {doc.difficulty}
                          &lt;/span&gt;
                        &lt;/div&gt;
                        &lt;span className=&quot;text-xs text-gray-400&quot;&gt;Updated {doc.lastUpdated}&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  );
                })}
              &lt;/div&gt;

              {filteredDocs.length === 0 &amp;&amp; (
                &lt;div className=&quot;text-center py-12&quot;&gt;
                  &lt;div className=&quot;text-6xl mb-4&quot;&gt;📚&lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-semibold text-gray-900 mb-2&quot;&gt;
                    No documentation found
                  &lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;
                    Try adjusting your search or browse a different category.
                  &lt;/p&gt;
                  &lt;button
                    onClick={() =&gt; setSearchQuery('')}
                    className=&quot;px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors&quot;
                  &gt;
                    Clear Search
                  &lt;/button&gt;
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Featured Tutorials */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center mb-12&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Featured Tutorials&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
              Step-by-step guides to get you started with advanced features
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
            {[
              {
                title: 'Building an AI-Powered Customer Service Bot',
                description: 'Create an intelligent chatbot using AI agents and vector search',
                duration: '45 min',
                level: 'Intermediate',
                thumbnail: '🤖',
                tags: ['AI', 'Customer Service', 'Vector Search'],
              },
              {
                title: 'Enterprise Data Pipeline',
                description:
                  'Build a scalable data processing pipeline with MongoDB and PostgreSQL',
                duration: '60 min',
                level: 'Advanced',
                thumbnail: '🏢',
                tags: ['Enterprise', 'Database', 'Pipeline'],
              },
              {
                title: 'Multi-Cloud Deployment',
                description: 'Deploy Reporunner across AWS, Azure, and GCP with Kubernetes',
                duration: '90 min',
                level: 'Advanced',
                thumbnail: '☁️',
                tags: ['Cloud', 'Kubernetes', 'DevOps'],
              },
            ].map((tutorial, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer group&quot;
              &gt;
                &lt;div className=&quot;text-4xl mb-4&quot;&gt;{tutorial.thumbnail}&lt;/div&gt;

                &lt;h3 className=&quot;font-bold text-lg text-gray-900 mb-2 group-hover:text-blue-900 transition-colors&quot;&gt;
                  {tutorial.title}
                &lt;/h3&gt;

                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{tutorial.description}&lt;/p&gt;

                &lt;div className=&quot;flex flex-wrap gap-2 mb-4&quot;&gt;
                  {tutorial.tags.map((tag, tagIndex) =&gt; (
                    &lt;span
                      key={tagIndex}
                      className=&quot;px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full&quot;
                    &gt;
                      {tag}
                    &lt;/span&gt;
                  ))}
                &lt;/div&gt;

                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                    &lt;span className=&quot;flex items-center gap-1 text-sm text-gray-500&quot;&gt;
                      &lt;Clock className=&quot;w-4 h-4&quot; /&gt;
                      {tutorial.duration}
                    &lt;/span&gt;
                    &lt;span
                      className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(tutorial.level)}`}
                    &gt;
                      {tutorial.level}
                    &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;ArrowRight className=&quot;w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors&quot; /&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Community &amp; Support */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Need Help?&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600 mb-12&quot;&gt;
              Our community and support team are here to help you succeed
            &lt;/p&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              &lt;div className=&quot;text-center p-6&quot;&gt;
                &lt;div className=&quot;bg-blue-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center&quot;&gt;
                  &lt;Users className=&quot;w-8 h-8 text-blue-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Community Forum&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;Join thousands of developers in our community&lt;/p&gt;
                &lt;button className=&quot;text-blue-600 font-medium hover:text-blue-700 transition-colors&quot;&gt;
                  Join Forum →
                &lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;text-center p-6&quot;&gt;
                &lt;div className=&quot;bg-green-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center&quot;&gt;
                  &lt;GitBranch className=&quot;w-8 h-8 text-green-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;GitHub Issues&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;Report bugs and request features&lt;/p&gt;
                &lt;button className=&quot;text-green-600 font-medium hover:text-green-700 transition-colors&quot;&gt;
                  Open Issue →
                &lt;/button&gt;
              &lt;/div&gt;

              &lt;div className=&quot;text-center p-6&quot;&gt;
                &lt;div className=&quot;bg-purple-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center&quot;&gt;
                  &lt;Webhook className=&quot;w-8 h-8 text-purple-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-semibold text-gray-900 mb-2&quot;&gt;Enterprise Support&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;24/7 support for enterprise customers&lt;/p&gt;
                &lt;button className=&quot;text-purple-600 font-medium hover:text-purple-700 transition-colors&quot;&gt;
                  Contact Support →
                &lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Start Building?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Follow our quick start guide and build your first workflow in minutes
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Play className=&quot;w-5 h-5&quot; /&gt;
              Quick Start Guide
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Video className=&quot;w-5 h-5&quot; /&gt;
              Watch Video Tutorial
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Documentation;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Dashboard.tsx (Line 1:1 - Line 10:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/dashboard/Dashboard.tsx (Line 1:1 - Line 9:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn505" onclick="toggleCodeBlock('cloneGroup505', 'expandBtn505', 'collapseBtn505')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn505" onclick="toggleCodeBlock('cloneGroup505', 'expandBtn505', 'collapseBtn505')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup505"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import toast from 'react-hot-toast';
import { Link, useNavigate } from 'react-router-dom';
import { useLeanWorkflowStore, WorkflowApiService } from '@/core';
import type { ExecutionStats } from '@/core/types/execution';
import type { Workflow } from '@/core/types/workflow';
import { VirtualizedList } from '@/design-system';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Dashboard.tsx (Line 8:18 - Line 323:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/dashboard/Dashboard.tsx (Line 13:19 - Line 328:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn506" onclick="toggleCodeBlock('cloneGroup506', 'expandBtn506', 'collapseBtn506')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn506" onclick="toggleCodeBlock('cloneGroup506', 'expandBtn506', 'collapseBtn506')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup506"><code class="language-tsx text-sm text-gray-800">;

const workflowApiService = new WorkflowApiService();

const Dashboard: React.FC = () =&gt; {
  const navigate = useNavigate();
  const {
    createNewWorkflow,
    deleteWorkflow,
    isLoading,
    shouldRefreshDashboard,
    setShouldRefreshDashboard,
  } = useLeanWorkflowStore();
  const [workflows, setWorkflows] = useState&lt;Workflow[]&gt;([]);

  const [stats, setStats] = useState&lt;ExecutionStats | null&gt;(null);
  const [statsLoading, setStatsLoading] = useState(false);

  const loadWorkflows = useCallback(async () =&gt; {
    try {
      const result = await workflowApiService.getWorkflows();

      if (!result || !result.items || !Array.isArray(result.items)) {
        setWorkflows([]);
        return;
      }

      const workflowsWithDefaults = result.items.map((workflow) =&gt; ({
        ...workflow,
        connections: (workflow as any).connections || {},
        createdAt: workflow.createdAt || new Date().toISOString(),
        updatedAt: workflow.updatedAt || new Date().toISOString(),
        status: (workflow.status === 'expired' ? 'draft' : workflow.status) || 'draft',
        settings: workflow.settings
          ? {
              ...workflow.settings,
              errorHandling:
                workflow.settings.errorHandling === 'retry'
                  ? 'stop'
                  : workflow.settings.errorHandling,
            }
          : undefined,
        nodes: workflow.nodes
          ? workflow.nodes.map((node) =&gt; ({
              ...node,
              data: {
                ...node.data,
                label: node.data.label || node.id, // Ensure label is always present
                credentials:
                  typeof node.data.credentials === 'string'
                    ? [node.data.credentials]
                    : node.data.credentials,
              },
            }))
          : [],
      }));
      setWorkflows(workflowsWithDefaults);
    } catch (error) {
      setWorkflows([]);

      // Check if it's an authentication error
      if (error instanceof Error &amp;&amp; error.message.includes('token')) {
        toast.error('Please log in to access your workflows');
      } else {
        toast.error('Failed to load workflows');
      }
    }
  }, []); // Empty dependency array since this function doesn't depend on any props/state

  const loadStats = useCallback(async () =&gt; {
    setStatsLoading(true);
    try {
      const executionStats = await workflowApiService.getExecutionStats();
      setStats(executionStats);
    } catch (error) {
      // Check if it's an authentication error
      if (error instanceof Error &amp;&amp; error.message.includes('token')) {
        toast.error('Please log in to access execution statistics');
      } else {
        toast.error('Failed to load statistics');
      }
    } finally {
      setStatsLoading(false);
    }
  }, []); // Empty dependency array since this function doesn't depend on any props/state

  useEffect(() =&gt; {
    loadWorkflows();
    loadStats();
  }, [loadStats, loadWorkflows]);

  // Check for refresh flag when component mounts or refresh flag changes
  useEffect(() =&gt; {
    if (shouldRefreshDashboard) {
      loadWorkflows();
      loadStats();
      setShouldRefreshDashboard(false);
    }
  }, [shouldRefreshDashboard, setShouldRefreshDashboard, loadStats, loadWorkflows]);

  const handleCreateWorkflow = async () =&gt; {
    const name = prompt('Enter workflow name:');
    if (name) {
      if (name.trim().length === 0) {
        toast.error('Please enter a valid workflow name.');
        return;
      }

      try {
        await createNewWorkflow(name.trim(), navigate);
        // Refresh the dashboard workflows list
        await loadWorkflows();
        toast.success('Workflow created successfully!');
      } catch (error) {
        const errorMessage = error instanceof Error ? error.message : 'Failed to create workflow';
        toast.error(errorMessage);
      }
    }
  };

  const handleDeleteWorkflow = async (workflowId: string, workflowName: string) =&gt; {
    if (
      window.confirm(
        `Are you sure you want to delete &quot;${workflowName}&quot;? This action cannot be undone.`
      )
    ) {
      try {
        await deleteWorkflow(workflowId);
        // Refresh the dashboard workflows list
        await loadWorkflows();
        toast.success('Workflow deleted successfully!');
      } catch (_error) {
        toast.error('Failed to delete workflow. Please try again.');
      }
    }
  };

  // Render function for workflow items in virtualized list
  const renderWorkflowItem = useCallback(
    (workflow: Workflow) =&gt; (
      &lt;div
        key={workflow.id}
        className=&quot;bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/10 transition-all duration-300 mb-4 shadow-lg&quot;
      &gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex-1&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;h3 className=&quot;font-medium text-white&quot;&gt;{workflow.name}&lt;/h3&gt;
              &lt;span
                className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                  workflow.status === 'active' || workflow.isActive
                    ? 'bg-green-500/20 text-green-300 border border-green-500/30'
                    : workflow.status === 'error'
                      ? 'bg-red-500/20 text-red-300 border border-red-500/30'
                      : 'bg-slate-500/20 text-slate-300 border border-slate-500/30'
                }`}
              &gt;
                {workflow.status === 'active' || workflow.isActive
                  ? 'active'
                  : workflow.status || 'inactive'}
              &lt;/span&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-sm text-slate-300 mt-1&quot;&gt;
              {workflow.description || 'No description'}
            &lt;/p&gt;
            &lt;div className=&quot;flex items-center mt-2 space-x-4&quot;&gt;
              &lt;span className=&quot;text-xs text-slate-400&quot;&gt;{workflow.nodes?.length || 0} nodes&lt;/span&gt;
              &lt;span className=&quot;text-xs text-slate-400&quot;&gt;
                Updated{' '}
                {workflow.updatedAt ? new Date(workflow.updatedAt).toLocaleDateString() : 'N/A'}
              &lt;/span&gt;
              {workflow.lastRun &amp;&amp; (
                &lt;span className=&quot;text-xs text-slate-400&quot;&gt;
                  Last run {new Date(workflow.lastRun).toLocaleDateString()}
                &lt;/span&gt;
              )}
              {!workflow.lastRun &amp;&amp; &lt;span className=&quot;text-xs text-slate-400&quot;&gt;Never executed&lt;/span&gt;}
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
            &lt;Link
              to={`/workflow/${workflow.id}`}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 text-sm shadow-lg&quot;
            &gt;
              Edit
            &lt;/Link&gt;
            &lt;button
              onClick={() =&gt; handleDeleteWorkflow(workflow.id, workflow.name)}
              className=&quot;text-slate-400 hover:text-red-300 px-2 py-2 rounded hover:bg-red-500/20 transition-all duration-300 text-sm backdrop-blur-sm&quot;
            &gt;
              🗑️
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [handleDeleteWorkflow]
  );

  const dashboardStats = [
    { name: 'Total Workflows', value: workflows.length, icon: '🔄' },
    {
      name: 'Active Workflows',
      value: workflows.filter((w) =&gt; w.isActive || w.status === 'active').length,
      icon: '✅',
    },
    {
      name: 'Total Executions',
      value: statsLoading ? '...' : (stats?.totalExecutions ?? 0),
      icon: '▶️',
    },
    {
      name: 'Success Rate',
      value: statsLoading
        ? '...'
        : stats?.successRate !== undefined
          ? `${Math.round(stats.successRate)}%`
          : stats?.totalExecutions &amp;&amp; stats.totalExecutions &gt; 0
            ? `${Math.round(((stats.successfulExecutions || 0) / stats.totalExecutions) * 100)}%`
            : 'N/A',
      icon: '📈',
    },
  ];

  return (
    &lt;div className=&quot;p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-8&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-white&quot;&gt;Workflows&lt;/h1&gt;
        &lt;p className=&quot;text-slate-300&quot;&gt;Create and manage your automation workflows&lt;/p&gt;
      &lt;/div&gt;

      {/* Stats */}
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8&quot;&gt;
        {dashboardStats.map((stat) =&gt; (
          &lt;div
            key={stat.name}
            className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;
          &gt;
            &lt;div className=&quot;flex items-center&quot;&gt;
              &lt;div className=&quot;text-2xl mr-4&quot;&gt;{stat.icon}&lt;/div&gt;
              &lt;div&gt;
                &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;{stat.name}&lt;/p&gt;
                &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{stat.value}&lt;/p&gt;
                {statsLoading &amp;&amp; &lt;p className=&quot;text-xs text-slate-400 mt-1&quot;&gt;Loading...&lt;/p&gt;}
                {!statsLoading &amp;&amp;
                  stats &amp;&amp;
                  stat.name === 'Total Executions' &amp;&amp;
                  stats.totalExecutions === 0 &amp;&amp; (
                    &lt;p className=&quot;text-xs text-slate-400 mt-1&quot;&gt;No executions yet&lt;/p&gt;
                  )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;

      {/* Workflows */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
        &lt;div className=&quot;p-6 border-b border-white/20&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-medium text-white&quot;&gt;Your Workflows&lt;/h2&gt;
            &lt;button
              onClick={handleCreateWorkflow}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
            &gt;
              Create New
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading workflows...&lt;/p&gt;
            &lt;/div&gt;
          ) : workflows.length === 0 ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;p className=&quot;text-slate-300 mb-4&quot;&gt;No workflows yet&lt;/p&gt;
              &lt;button
                onClick={handleCreateWorkflow}
                className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
              &gt;
                Create Your First Workflow
              &lt;/button&gt;
            &lt;/div&gt;
          ) : (
            &lt;VirtualizedList
              items={workflows}
              renderItem={renderWorkflowItem}
              height={600} // Fixed height for virtualization
              estimateSize={120} // Estimated height per workflow item
              getItemKey={(workflow) =&gt; workflow.id}
              gap={0}
              className=&quot;workflow-list&quot;
              emptyState={
                &lt;div className=&quot;text-center py-8&quot;&gt;
                  &lt;p className=&quot;text-slate-300 mb-4&quot;&gt;No workflows found&lt;/p&gt;
                  &lt;button
                    onClick={handleCreateWorkflow}
                    className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
                  &gt;
                    Create Your First Workflow
                  &lt;/button&gt;
                &lt;/div&gt;
              }
            /&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Dashboard;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Credentials.tsx (Line 6:32 - Line 420:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/credentials/Credentials.tsx (Line 9:19 - Line 423:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn508" onclick="toggleCodeBlock('cloneGroup508', 'expandBtn508', 'collapseBtn508')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn508" onclick="toggleCodeBlock('cloneGroup508', 'expandBtn508', 'collapseBtn508')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup508"><code class="language-tsx text-sm text-gray-800">;

const credentialApiService = new CredentialApiService();

const Credentials: React.FC = () =&gt; {
  const {
    credentials,
    isLoading,
    testingCredential,
    loadCredentials,
    createCredential,
    updateCredential,
    deleteCredential,
    revokeGmailCredential,
    testCredential,
    loadCredentialTypes, // New action to load types
    credentialTypes, // Get types from store
  } = useCredentialStore();

  const [showCreateForm, setShowCreateForm] = useState(false);
  const [selectedType, setSelectedType] = useState&lt;CredentialTypeDefinition | null&gt;(null);
  const [editingCredential, setEditingCredential] = useState&lt;Credential | null&gt;(null);
  const [formData, setFormData] = useState&lt;Record&lt;string, unknown&gt;&gt;({});
  const [credentialName, setCredentialName] = useState('');

  useEffect(() =&gt; {
    loadCredentials();
    loadCredentialTypes(); // Load credential types on mount
  }, [loadCredentials, loadCredentialTypes]);

  // Handle OAuth callback results
  useEffect(() =&gt; {
    const urlParams = new URLSearchParams(window.location.search);
    const credentialStatus = urlParams.get('credential');
    const credentialId = urlParams.get('id');
    const credentialName = urlParams.get('name');
    const errorMessage = urlParams.get('message');

    if (credentialStatus === 'success' &amp;&amp; credentialId &amp;&amp; credentialName) {
      alert(`Gmail credential &quot;${decodeURIComponent(credentialName)}&quot; created successfully!`);
      // Reload credentials to show the new one
      loadCredentials();
      // Clean up URL
      window.history.replaceState({}, document.title, window.location.pathname);
    } else if (credentialStatus === 'error') {
      alert(`OAuth error: ${errorMessage ? decodeURIComponent(errorMessage) : 'Unknown error'}`);
      // Clean up URL
      window.history.replaceState({}, document.title, window.location.pathname);
    }
  }, [
    // Reload credentials to show the new one
    loadCredentials,
  ]);

  const handleEdit = (credential: Credential) =&gt; {
    const type = credentialTypes.find((t) =&gt; t.name === credential.type);
    if (!type) return;

    setSelectedType(type);
    setFormData(credential.data || {});
    setCredentialName(credential.name);
    setEditingCredential(credential);
    setShowCreateForm(true);
  };

  const handleSave = async () =&gt; {
    if (!selectedType || !credentialName.trim()) return;

    try {
      // Handle Gmail OAuth2 differently - initiate OAuth flow
      if (selectedType.name === 'gmailOAuth2' &amp;&amp; !editingCredential) {
        // Start OAuth flow - this will redirect the user to Google
        // No client ID/secret needed - using app's shared OAuth credentials
        await credentialApiService.startGmailOAuthFlow(credentialName);
        return; // No need to continue as user is being redirected
      }

      // Handle other credential types normally
      if (editingCredential) {
        await updateCredential(editingCredential.id, formData);
      } else {
        await createCredential(credentialName, selectedType.name, formData);
      }

      setShowCreateForm(false);
      setSelectedType(null);
      setFormData({});
      setCredentialName('');
      setEditingCredential(null);
    } catch (error: any) {
      alert(error.message || 'Failed to save credential');
    }
  };

  const handleTest = async (credentialId: string) =&gt; {
    const result = await testCredential(credentialId);
    // Show result in a toast or modal
    alert(result.message);
  };

  const handleDelete = async (credentialId: string, credentialName: string) =&gt; {
    if (confirm(`Are you sure you want to delete the credential &quot;${credentialName}&quot;?`)) {
      try {
        await deleteCredential(credentialId);
        alert('Credential deleted successfully');
      } catch (error: any) {
        alert(error.message || 'Failed to delete credential');
      }
    }
  };

  const handleRevokeGmail = async (credentialId: string, credentialName: string) =&gt; {
    if (
      confirm(
        `Are you sure you want to revoke Gmail access for &quot;${credentialName}&quot;? This will also delete the credential and cannot be undone.`
      )
    ) {
      try {
        await revokeGmailCredential(credentialId);
        alert('Gmail access revoked and credential deleted successfully');
      } catch (error: any) {
        alert(error.message || 'Failed to revoke Gmail access');
      }
    }
  };

  const handleFieldChange = (fieldName: string, value: unknown) =&gt; {
    setFormData((prev) =&gt; ({ ...prev, [fieldName]: value }));
  };

  const renderField = (property: any) =&gt; {
    const value = formData[property.name] ?? property.default ?? '';

    switch (property.type) {
      case 'string':
        return (
          &lt;input
            type=&quot;text&quot;
            value={String(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, e.target.value)}
            placeholder={property.placeholder}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          /&gt;
        );

      case 'password':
        return (
          &lt;input
            type=&quot;password&quot;
            value={String(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, e.target.value)}
            placeholder={property.placeholder}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          /&gt;
        );

      case 'number':
        return (
          &lt;input
            type=&quot;number&quot;
            value={Number(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, Number(e.target.value))}
            placeholder={property.placeholder}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          /&gt;
        );

      case 'boolean':
        return (
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;input
              aria-label=&quot;Select an option&quot;
              type=&quot;checkbox&quot;
              checked={Boolean(value)}
              onChange={(e) =&gt; handleFieldChange(property.name, e.target.checked)}
              className=&quot;h-4 w-4 text-blue-400 focus:ring-blue-400 bg-white/10 border-white/30 rounded&quot;
            /&gt;
            &lt;span className=&quot;ml-2 text-sm text-slate-300&quot;&gt;{property.description}&lt;/span&gt;
          &lt;/div&gt;
        );

      case 'options':
        return (
          &lt;select
            aria-label=&quot;Select an option&quot;
            value={String(value)}
            onChange={(e) =&gt; handleFieldChange(property.name, e.target.value)}
            className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;option key={option.value} value={option.value} className=&quot;bg-slate-800 text-white&quot;&gt;
                {option.name}
              &lt;/option&gt;
            ))}
          &lt;/select&gt;
        );

      default:
        return null;
    }
  };

  return (
    &lt;div className=&quot;p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-8&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-white&quot;&gt;Credentials&lt;/h1&gt;
        &lt;p className=&quot;text-slate-300&quot;&gt;Manage authentication credentials for your integrations&lt;/p&gt;
      &lt;/div&gt;

      {/* Stats */}
      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-6 mb-8&quot;&gt;
        &lt;div className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;🔐&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;Total Credentials&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{credentials.length}&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;✅&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;Verified&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;
                {credentials.filter((c) =&gt; c.isValid).length}
              &lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;&gt;
          &lt;div className=&quot;flex items-center&quot;&gt;
            &lt;div className=&quot;text-2xl mr-4&quot;&gt;🔗&lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;Types Available&lt;/p&gt;
              &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{credentialTypes.length}&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Existing Credentials */}
      &lt;div className=&quot;bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-lg&quot;&gt;
        &lt;div className=&quot;p-6 border-b border-white/20&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-semibold text-white&quot;&gt;Your Credentials&lt;/h2&gt;
            &lt;button
              onClick={() =&gt; setShowCreateForm(true)}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
            &gt;
              Create New
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading credentials...&lt;/p&gt;
            &lt;/div&gt;
          ) : credentials.length === 0 ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;p className=&quot;text-slate-300 mb-4&quot;&gt;No credentials configured&lt;/p&gt;
              &lt;button
                onClick={() =&gt; setShowCreateForm(true)}
                className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
              &gt;
                Create Your First Credential
              &lt;/button&gt;
            &lt;/div&gt;
          ) : (
            &lt;div className=&quot;space-y-4&quot;&gt;
              {credentials.map((credential) =&gt; {
                const type = credentialTypes.find((t) =&gt; t.name === credential.type);
                return (
                  &lt;div
                    key={credential.id}
                    className=&quot;bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/10 transition-all duration-300&quot;
                  &gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                        &lt;span className=&quot;text-2xl&quot;&gt;{type?.icon || '🔐'}&lt;/span&gt;
                        &lt;div&gt;
                          &lt;h3 className=&quot;font-medium text-white&quot;&gt;{credential.name}&lt;/h3&gt;
                          &lt;p className=&quot;text-sm text-slate-300&quot;&gt;{type?.displayName}&lt;/p&gt;
                        &lt;/div&gt;
                        {credential.isValid &amp;&amp; (
                          &lt;span className=&quot;bg-green-500/20 text-green-300 border border-green-500/30 text-xs font-medium px-2.5 py-0.5 rounded-full&quot;&gt;
                            Verified
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;

                      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                        &lt;button
                          onClick={() =&gt; handleTest(credential.id)}
                          disabled={testingCredential === credential.id}
                          className=&quot;text-blue-300 hover:text-blue-200 text-sm disabled:opacity-50 transition-colors&quot;
                        &gt;
                          {testingCredential === credential.id ? 'Testing...' : 'Test'}
                        &lt;/button&gt;
                        {credential.type !== 'gmailOAuth2' &amp;&amp; (
                          &lt;button
                            onClick={() =&gt; handleEdit(credential)}
                            className=&quot;text-slate-300 hover:text-white text-sm transition-colors&quot;
                          &gt;
                            Edit
                          &lt;/button&gt;
                        )}
                        {credential.type === 'gmailOAuth2' ||
                        credential?.integration === 'gmailOAuth2' ? (
                          &lt;button
                            onClick={() =&gt; handleRevokeGmail(credential.id, credential.name)}
                            className=&quot;text-red-300 hover:text-red-200 text-sm font-medium transition-colors&quot;
                          &gt;
                            🔐 Revoke Access
                          &lt;/button&gt;
                        ) : (
                          &lt;button
                            onClick={() =&gt; handleDelete(credential.id, credential.name)}
                            className=&quot;text-red-300 hover:text-red-200 text-sm transition-colors&quot;
                          &gt;
                            Delete
                          &lt;/button&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;mt-2 text-xs text-slate-400&quot;&gt;
                      Created: {new Date(credential.createdAt).toLocaleDateString()}
                      {credential.lastTestedAt &amp;&amp; (
                        &lt;span className=&quot;ml-4&quot;&gt;
                          Last tested: {new Date(credential.lastTestedAt).toLocaleDateString()}
                        &lt;/span&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Create/Edit Form Modal */}
      {showCreateForm &amp;&amp; selectedType &amp;&amp; (
        &lt;div className=&quot;fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 backdrop-blur-sm&quot;&gt;
          &lt;div className=&quot;bg-white/10 backdrop-blur-md border border-white/20 rounded-lg shadow-xl max-w-md w-full max-h-96 overflow-y-auto&quot;&gt;
            &lt;div className=&quot;p-6&quot;&gt;
              &lt;h2 className=&quot;text-lg font-semibold text-white mb-4&quot;&gt;
                {editingCredential ? 'Edit' : 'Create'} {selectedType.displayName} Credential
              &lt;/h2&gt;

              {/* Credential Name */}
              &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-1&quot;&gt;
                  Credential Name
                &lt;/label&gt;
                &lt;input
                  type=&quot;text&quot;
                  value={credentialName}
                  onChange={(e) =&gt; setCredentialName(e.target.value)}
                  placeholder=&quot;e.g., Personal Gmail, Company SMTP&quot;
                  className=&quot;w-full px-3 py-2 bg-white/10 border border-white/30 text-white placeholder-slate-400 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 backdrop-blur-sm&quot;
                /&gt;
              &lt;/div&gt;

              {/* Dynamic Fields */}
              &lt;div className=&quot;space-y-4&quot;&gt;
                {selectedType.properties?.map((property) =&gt; (
                  &lt;div key={property.name}&gt;
                    &lt;label className=&quot;block text-sm font-medium text-slate-300 mb-1&quot;&gt;
                      {property.displayName}
                      {property.required &amp;&amp; &lt;span className=&quot;text-red-400 ml-1&quot;&gt;*&lt;/span&gt;}
                    &lt;/label&gt;
                    {renderField(property)}
                    {property.description &amp;&amp; (
                      &lt;p className=&quot;text-xs text-slate-400 mt-1&quot;&gt;{property.description}&lt;/p&gt;
                    )}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;

              {/* Actions */}
              &lt;div className=&quot;flex space-x-3 mt-6&quot;&gt;
                &lt;button
                  onClick={handleSave}
                  disabled={!credentialName.trim()}
                  className=&quot;flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 shadow-lg&quot;
                &gt;
                  {selectedType.name === 'gmailOAuth2' &amp;&amp; !editingCredential
                    ? 'Connect with Google'
                    : editingCredential
                      ? 'Update'
                      : 'Create'}{' '}
                  Credential
                &lt;/button&gt;
                &lt;button
                  onClick={() =&gt; setShowCreateForm(false)}
                  className=&quot;flex-1 bg-white/20 text-slate-300 py-2 px-4 rounded-lg hover:bg-white/30 hover:text-white transition-all duration-300 backdrop-blur-sm&quot;
                &gt;
                  Cancel
                &lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default Credentials;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Contact.tsx (Line 1:1 - Line 600:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/contact/Contact.tsx (Line 2:1 - Line 601:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn510" onclick="toggleCodeBlock('cloneGroup510', 'expandBtn510', 'collapseBtn510')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn510" onclick="toggleCodeBlock('cloneGroup510', 'expandBtn510', 'collapseBtn510')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup510"><code class="language-tsx text-sm text-gray-800">/**
 * Contact Page
 *
 * Contact information and forms for Reporunner
 * Sales, support, and general inquiries
 */

import {
  Briefcase,
  Calendar,
  CheckCircle,
  Clock,
  Code,
  ExternalLink,
  Globe,
  Heart,
  HelpCircle,
  Mail,
  MapPin,
  MessageSquare,
  Phone,
  Send,
  Shield,
  Users,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const Contact: React.FC = () =&gt; {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    company: '',
    role: '',
    inquiry: 'general',
    subject: '',
    message: '',
    newsletter: false,
  });
  const [isSubmitted, setIsSubmitted] = useState(false);

  const inquiryTypes = [
    { value: 'sales', label: 'Sales Inquiry', icon: Briefcase },
    { value: 'support', label: 'Technical Support', icon: HelpCircle },
    { value: 'partnership', label: 'Partnership', icon: Users },
    { value: 'general', label: 'General Question', icon: MessageSquare },
    { value: 'press', label: 'Press &amp; Media', icon: Globe },
    { value: 'careers', label: 'Careers', icon: Heart },
  ];

  const contactMethods = [
    {
      type: 'Sales',
      description: 'Speak with our sales team about enterprise solutions',
      icon: Briefcase,
      color: 'blue',
      methods: [
        { type: 'email', value: 'sales@reporunner.dev', icon: Mail },
        { type: 'phone', value: '+1 (555) 123-4567', icon: Phone },
        { type: 'calendar', value: 'Schedule a demo', icon: Calendar },
      ],
    },
    {
      type: 'Support',
      description: 'Get help with technical issues and questions',
      icon: HelpCircle,
      color: 'green',
      methods: [
        { type: 'email', value: 'support@reporunner.dev', icon: Mail },
        { type: 'docs', value: 'Documentation', icon: Code },
        { type: 'community', value: 'Community Forum', icon: Users },
      ],
    },
    {
      type: 'General',
      description: 'General inquiries and information',
      icon: MessageSquare,
      color: 'purple',
      methods: [
        { type: 'email', value: 'hello@reporunner.dev', icon: Mail },
        { type: 'address', value: 'San Francisco, CA', icon: MapPin },
        { type: 'social', value: 'Follow us', icon: Globe },
      ],
    },
  ];

  const offices = [
    {
      city: 'San Francisco',
      country: 'United States',
      flag: '🇺🇸',
      address: '123 Market Street, Suite 300',
      postal: 'San Francisco, CA 94105',
      phone: '+1 (555) 123-4567',
      email: 'us@reporunner.dev',
      hours: '9 AM - 6 PM PST',
    },
    {
      city: 'London',
      country: 'United Kingdom',
      flag: '🇬🇧',
      address: '10 Downing Street, Floor 5',
      postal: 'London SW1A 2AA',
      phone: '+44 20 7946 0958',
      email: 'uk@reporunner.dev',
      hours: '9 AM - 6 PM GMT',
    },
    {
      city: 'Singapore',
      country: 'Singapore',
      flag: '🇸🇬',
      address: '1 Raffles Place, Level 20',
      postal: 'Singapore 048616',
      phone: '+65 6123 4567',
      email: 'sg@reporunner.dev',
      hours: '9 AM - 6 PM SGT',
    },
  ];

  const faqs = [
    {
      question: 'How can I get started with Reporunner?',
      answer:
        'You can start with our free community edition or request a demo for enterprise features. Our quick start guide helps you deploy in minutes.',
    },
    {
      question: 'Do you offer professional services?',
      answer:
        'Yes, we provide migration services, custom development, training, and ongoing support for enterprise customers.',
    },
    {
      question: &quot;What's your response time for support?&quot;,
      answer:
        'Community support is best-effort. Professional customers get 24-hour response, and Enterprise customers get 1-hour response for critical issues.',
    },
    {
      question: 'Can I schedule a demo?',
      answer:
        'Absolutely! You can book a personalized demo with our team to see how Reporunner fits your specific use case.',
    },
  ];

  const handleInputChange = (
    e: React.ChangeEvent&lt;HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement&gt;
  ) =&gt; {
    const { name, value, type } = e.target;
    if (type === 'checkbox') {
      setFormData((prev) =&gt; ({
        ...prev,
        [name]: (e.target as HTMLInputElement).checked,
      }));
    } else {
      setFormData((prev) =&gt; ({
        ...prev,
        [name]: value,
      }));
    }
  };

  const handleSubmit = (e: React.FormEvent) =&gt; {
    e.preventDefault();
    setIsSubmitted(true);

    // Reset form after 3 seconds
    setTimeout(() =&gt; {
      setIsSubmitted(false);
      setFormData({
        name: '',
        email: '',
        company: '',
        role: '',
        inquiry: 'general',
        subject: '',
        message: '',
        newsletter: false,
      });
    }, 3000);
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Get in{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Touch
              &lt;/span&gt;
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Ready to transform your workflow automation? Our team is here to help you get started,
              answer questions, or discuss enterprise solutions.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-12&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;Calendar className=&quot;w-5 h-5&quot; /&gt;
                Schedule Demo
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                &lt;MessageSquare className=&quot;w-5 h-5&quot; /&gt;
                Start Chat
              &lt;/button&gt;
            &lt;/div&gt;

            {/* Response Times */}
            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-6&quot;&gt;
              &lt;div className=&quot;bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20&quot;&gt;
                &lt;Clock className=&quot;w-8 h-8 text-green-300 mx-auto mb-2&quot; /&gt;
                &lt;div className=&quot;text-lg font-semibold text-white&quot;&gt;Sales&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;&amp;lt; 2 hours response&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20&quot;&gt;
                &lt;Shield className=&quot;w-8 h-8 text-blue-300 mx-auto mb-2&quot; /&gt;
                &lt;div className=&quot;text-lg font-semibold text-white&quot;&gt;Support&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;&amp;lt; 24 hours response&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20&quot;&gt;
                &lt;Zap className=&quot;w-8 h-8 text-purple-300 mx-auto mb-2&quot; /&gt;
                &lt;div className=&quot;text-lg font-semibold text-white&quot;&gt;Enterprise&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;&amp;lt; 1 hour response&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Contact Methods */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;How Can We Help?&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Choose the best way to reach us based on your needs
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              {contactMethods.map((method, index) =&gt; {
                const Icon = method.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                  &gt;
                    &lt;div className={`bg-${method.color}-100 p-3 rounded-lg w-fit mb-4`}&gt;
                      &lt;Icon className={`w-8 h-8 text-${method.color}-600`} /&gt;
                    &lt;/div&gt;
                    &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-2&quot;&gt;{method.type}&lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600 mb-6&quot;&gt;{method.description}&lt;/p&gt;

                    &lt;div className=&quot;space-y-3&quot;&gt;
                      {method.methods.map((contact, contactIndex) =&gt; {
                        const ContactIcon = contact.icon;
                        return (
                          &lt;div key={contactIndex} className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;ContactIcon className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                            &lt;span className=&quot;text-gray-700&quot;&gt;{contact.value}&lt;/span&gt;
                            {contact.type === 'email' &amp;&amp; (
                              &lt;ExternalLink className=&quot;w-4 h-4 text-gray-400&quot; /&gt;
                            )}
                          &lt;/div&gt;
                        );
                      })}
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Contact Form */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Send Us a Message&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Fill out the form below and we'll get back to you within 24 hours
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;bg-white rounded-2xl shadow-xl p-8&quot;&gt;
              {isSubmitted ? (
                &lt;div className=&quot;text-center py-12&quot;&gt;
                  &lt;CheckCircle className=&quot;w-16 h-16 text-green-500 mx-auto mb-4&quot; /&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;Thank You!&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;
                    Your message has been sent successfully. We'll get back to you soon.
                  &lt;/p&gt;
                  &lt;div className=&quot;text-sm text-gray-500&quot;&gt;Redirecting to home page...&lt;/div&gt;
                &lt;/div&gt;
              ) : (
                &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
                  {/* Inquiry Type */}
                  &lt;div&gt;
                    &lt;label className=&quot;block text-sm font-medium text-gray-700 mb-3&quot;&gt;
                      What can we help you with?
                    &lt;/label&gt;
                    &lt;div className=&quot;grid grid-cols-2 md:grid-cols-3 gap-3&quot;&gt;
                      {inquiryTypes.map((type) =&gt; {
                        const Icon = type.icon;
                        return (
                          &lt;label
                            key={type.value}
                            className={`relative flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${
                              formData.inquiry === type.value
                                ? 'border-blue-500 bg-blue-50'
                                : 'border-gray-200 hover:border-gray-300'
                            }`}
                          &gt;
                            &lt;input
                              type=&quot;radio&quot;
                              name=&quot;inquiry&quot;
                              value={type.value}
                              checked={formData.inquiry === type.value}
                              onChange={handleInputChange}
                              className=&quot;sr-only&quot;
                            /&gt;
                            &lt;Icon className=&quot;w-5 h-5 text-gray-600&quot; /&gt;
                            &lt;span className=&quot;text-sm font-medium text-gray-700&quot;&gt;{type.label}&lt;/span&gt;
                          &lt;/label&gt;
                        );
                      })}
                    &lt;/div&gt;
                  &lt;/div&gt;

                  {/* Name and Email */}
                  &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;name&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Full Name *
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        id=&quot;name&quot;
                        name=&quot;name&quot;
                        value={formData.name}
                        onChange={handleInputChange}
                        required
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;John Doe&quot;
                      /&gt;
                    &lt;/div&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;email&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Email Address *
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;email&quot;
                        id=&quot;email&quot;
                        name=&quot;email&quot;
                        value={formData.email}
                        onChange={handleInputChange}
                        required
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;john@company.com&quot;
                      /&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;

                  {/* Company and Role */}
                  &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;company&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Company
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        id=&quot;company&quot;
                        name=&quot;company&quot;
                        value={formData.company}
                        onChange={handleInputChange}
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;Your Company&quot;
                      /&gt;
                    &lt;/div&gt;
                    &lt;div&gt;
                      &lt;label
                        htmlFor=&quot;role&quot;
                        className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                      &gt;
                        Role
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        id=&quot;role&quot;
                        name=&quot;role&quot;
                        value={formData.role}
                        onChange={handleInputChange}
                        className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                        placeholder=&quot;Software Engineer&quot;
                      /&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;

                  {/* Subject */}
                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;subject&quot;
                      className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                    &gt;
                      Subject *
                    &lt;/label&gt;
                    &lt;input
                      type=&quot;text&quot;
                      id=&quot;subject&quot;
                      name=&quot;subject&quot;
                      value={formData.subject}
                      onChange={handleInputChange}
                      required
                      className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                      placeholder=&quot;How can we help you?&quot;
                    /&gt;
                  &lt;/div&gt;

                  {/* Message */}
                  &lt;div&gt;
                    &lt;label
                      htmlFor=&quot;message&quot;
                      className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;
                    &gt;
                      Message *
                    &lt;/label&gt;
                    &lt;textarea
                      id=&quot;message&quot;
                      name=&quot;message&quot;
                      value={formData.message}
                      onChange={handleInputChange}
                      required
                      rows={6}
                      className=&quot;w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                      placeholder=&quot;Tell us more about your needs, use case, or question...&quot;
                    /&gt;
                  &lt;/div&gt;

                  {/* Newsletter Checkbox */}
                  &lt;div className=&quot;flex items-center&quot;&gt;
                    &lt;input
                      type=&quot;checkbox&quot;
                      id=&quot;newsletter&quot;
                      name=&quot;newsletter&quot;
                      checked={formData.newsletter}
                      onChange={handleInputChange}
                      className=&quot;h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded&quot;
                    /&gt;
                    &lt;label htmlFor=&quot;newsletter&quot; className=&quot;ml-3 text-sm text-gray-600&quot;&gt;
                      Subscribe to our newsletter for product updates and automation tips
                    &lt;/label&gt;
                  &lt;/div&gt;

                  {/* Submit Button */}
                  &lt;div className=&quot;pt-4&quot;&gt;
                    &lt;button
                      type=&quot;submit&quot;
                      className=&quot;w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-3 px-8 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-colors flex items-center justify-center gap-2&quot;
                    &gt;
                      &lt;Send className=&quot;w-5 h-5&quot; /&gt;
                      Send Message
                    &lt;/button&gt;
                  &lt;/div&gt;
                &lt;/form&gt;
              )}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Office Locations */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Our Offices&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Visit us around the world&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              {offices.map((office, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;text-center mb-6&quot;&gt;
                    &lt;div className=&quot;text-4xl mb-2&quot;&gt;{office.flag}&lt;/div&gt;
                    &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;
                      {office.city}, {office.country}
                    &lt;/h3&gt;
                  &lt;/div&gt;

                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-start gap-3&quot;&gt;
                      &lt;MapPin className=&quot;w-5 h-5 text-gray-400 mt-0.5&quot; /&gt;
                      &lt;div&gt;
                        &lt;div className=&quot;text-gray-900 font-medium&quot;&gt;{office.address}&lt;/div&gt;
                        &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{office.postal}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;Phone className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{office.phone}&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;Mail className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{office.email}&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                      &lt;Clock className=&quot;w-5 h-5 text-gray-400&quot; /&gt;
                      &lt;span className=&quot;text-gray-700&quot;&gt;{office.hours}&lt;/span&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* FAQ */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-3xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Frequently Asked Questions&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;Quick answers to common questions&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;space-y-6&quot;&gt;
              {faqs.map((faq, index) =&gt; (
                &lt;div key={index} className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                  &lt;h3 className=&quot;text-lg font-semibold text-gray-900 mb-3&quot;&gt;{faq.question}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600&quot;&gt;{faq.answer}&lt;/p&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;

            &lt;div className=&quot;text-center mt-12&quot;&gt;
              &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;Still have questions?&lt;/p&gt;
              &lt;button className=&quot;text-blue-600 font-medium hover:text-blue-700 transition-colors&quot;&gt;
                View all FAQs →
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Get Started?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Don't wait - start building powerful workflows today with our free tier or schedule a
            demo to see enterprise features.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Zap className=&quot;w-5 h-5&quot; /&gt;
              Start Free Trial
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Calendar className=&quot;w-5 h-5&quot; /&gt;
              Schedule Demo
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default Contact;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/About.tsx (Line 1:1 - Line 525:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/about/About.tsx (Line 1:1 - Line 525:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn511" onclick="toggleCodeBlock('cloneGroup511', 'expandBtn511', 'collapseBtn511')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn511" onclick="toggleCodeBlock('cloneGroup511', 'expandBtn511', 'collapseBtn511')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup511"><code class="language-tsx text-sm text-gray-800">/**
 * About Page
 *
 * Company information, team, mission, and values for Reporunner
 */

import {
  Award,
  Brain,
  CheckCircle,
  Code,
  Github,
  Globe,
  Heart,
  Linkedin,
  Mail,
  Rocket,
  Shield,
  Target,
  Twitter,
  Users,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const About: React.FC = () =&gt; {
  const team = [
    {
      name: 'Alex Chen',
      role: 'CEO &amp; Co-Founder',
      bio: 'Former VP of Engineering at Zapier. 10+ years building automation platforms.',
      image: '👨‍💼',
      linkedin: '#',
      twitter: '#',
      github: '#',
    },
    {
      name: 'Sarah Rodriguez',
      role: 'CTO &amp; Co-Founder',
      bio: 'Ex-Google Cloud architect. Expert in distributed systems and AI infrastructure.',
      image: '👩‍💻',
      linkedin: '#',
      twitter: '#',
      github: '#',
    },
    {
      name: 'David Kim',
      role: 'VP of Engineering',
      bio: 'Former principal engineer at n8n. Passionate about developer experience.',
      image: '👨‍🔬',
      linkedin: '#',
      twitter: '#',
      github: '#',
    },
    {
      name: 'Emily Watson',
      role: 'Head of Product',
      bio: 'Product leader from Make.com. Focused on user-centric automation tools.',
      image: '👩‍🎨',
      linkedin: '#',
      twitter: '#',
      github: '#',
    },
    {
      name: 'Michael Zhang',
      role: 'Head of AI',
      bio: 'Former OpenAI researcher. Leading our AI and ML automation initiatives.',
      image: '🧑‍🔬',
      linkedin: '#',
      twitter: '#',
      github: '#',
    },
    {
      name: 'Lisa Johnson',
      role: 'VP of Enterprise',
      bio: 'Enterprise sales veteran from Salesforce. Helping enterprises scale automation.',
      image: '👩‍💼',
      linkedin: '#',
      twitter: '#',
      github: '#',
    },
  ];

  const values = [
    {
      icon: Shield,
      title: 'Privacy First',
      description:
        'Your data belongs to you. We build tools that respect privacy and give you complete control over your information.',
    },
    {
      icon: Code,
      title: 'Open Source',
      description:
        'Transparency and collaboration drive innovation. Our core platform is open source and community-driven.',
    },
    {
      icon: Zap,
      title: 'Developer Experience',
      description:
        &quot;We're developers building for developers. Every feature is designed with developer productivity in mind.&quot;,
    },
    {
      icon: Globe,
      title: 'Global Scale',
      description:
        'Built for the world. Our platform supports global deployments with data residency and compliance.',
    },
    {
      icon: Brain,
      title: 'AI-Powered',
      description:
        'Intelligence at every layer. We leverage AI to make automation smarter, not just automated.',
    },
    {
      icon: Heart,
      title: 'Community Driven',
      description:
        'Our community shapes our roadmap. We build what matters most to the people who use our platform.',
    },
  ];

  const milestones = [
    {
      year: '2023',
      title: 'Founded',
      description:
        'Reporunner was founded by ex-Zapier and Google engineers with a vision for enterprise-grade workflow automation.',
    },
    {
      year: '2023',
      title: 'Seed Funding',
      description:
        '$5M seed round led by Andreessen Horowitz to build the next generation of workflow automation.',
    },
    {
      year: '2024',
      title: 'Platform Launch',
      description:
        'Launched our self-hosted platform with AI capabilities and hybrid database architecture.',
    },
    {
      year: '2024',
      title: 'Enterprise Adoption',
      description:
        '100+ enterprise customers adopted Reporunner for mission-critical workflow automation.',
    },
    {
      year: '2025',
      title: 'Global Expansion',
      description:
        'Expanded to serve customers across 50+ countries with localized compliance and data residency.',
    },
    {
      year: 'Future',
      title: 'AI-Native Platform',
      description:
        'Building towards a fully AI-native automation platform that understands and optimizes workflows automatically.',
    },
  ];

  const stats = [
    { metric: '100K+', label: 'Workflows Created' },
    { metric: '50M+', label: 'Executions Per Month' },
    { metric: '500+', label: 'Enterprise Customers' },
    { metric: '150+', label: 'Integrations' },
    { metric: '99.9%', label: 'Uptime SLA' },
    { metric: '40+', label: 'Team Members' },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Building the{' '}
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Future
              &lt;/span&gt;
              &lt;br /&gt;
              of Automation
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              We're on a mission to democratize workflow automation with enterprise-grade security,
              AI-powered intelligence, and complete data sovereignty.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-12&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;Users className=&quot;w-5 h-5&quot; /&gt;
                Join Our Team
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                &lt;Mail className=&quot;w-5 h-5&quot; /&gt;
                Contact Us
              &lt;/button&gt;
            &lt;/div&gt;

            {/* Company Stats */}
            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-6 gap-8&quot;&gt;
              {stats.map((stat, index) =&gt; (
                &lt;div key={index} className=&quot;text-center&quot;&gt;
                  &lt;div className=&quot;text-2xl md:text-3xl font-bold text-blue-300 mb-2&quot;&gt;
                    {stat.metric}
                  &lt;/div&gt;
                  &lt;div className=&quot;text-sm text-slate-300&quot;&gt;{stat.label}&lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Mission Statement */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;div className=&quot;bg-gradient-to-r from-blue-100 to-purple-100 rounded-2xl p-12&quot;&gt;
              &lt;Target className=&quot;w-16 h-16 text-blue-600 mx-auto mb-6&quot; /&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Our Mission&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-700 leading-relaxed&quot;&gt;
                &quot;To empower every organization with intelligent, secure, and self-hosted workflow
                automation that scales from startup to enterprise without compromising on data
                sovereignty or security.&quot;
              &lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Company Values */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Our Values&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;The principles that guide everything we do&lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
              {values.map((value, index) =&gt; {
                const Icon = value.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                  &gt;
                    &lt;div className=&quot;bg-blue-100 p-3 rounded-lg w-fit mb-4&quot;&gt;
                      &lt;Icon className=&quot;w-8 h-8 text-blue-600&quot; /&gt;
                    &lt;/div&gt;
                    &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-3&quot;&gt;{value.title}&lt;/h3&gt;
                    &lt;p className=&quot;text-gray-600 leading-relaxed&quot;&gt;{value.description}&lt;/p&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Timeline */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Our Journey&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Key milestones in building the future of workflow automation
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;relative&quot;&gt;
              {/* Timeline line */}
              &lt;div className=&quot;absolute left-8 top-0 bottom-0 w-0.5 bg-blue-200&quot;&gt;&lt;/div&gt;

              &lt;div className=&quot;space-y-8&quot;&gt;
                {milestones.map((milestone, index) =&gt; (
                  &lt;div key={index} className=&quot;relative flex items-start gap-6&quot;&gt;
                    &lt;div className=&quot;flex-shrink-0 w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold relative z-10&quot;&gt;
                      {milestone.year === 'Future' ? (
                        &lt;Rocket className=&quot;w-8 h-8&quot; /&gt;
                      ) : (
                        milestone.year.slice(-2)
                      )}
                    &lt;/div&gt;
                    &lt;div className=&quot;flex-1 bg-gray-50 rounded-xl p-6&quot;&gt;
                      &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
                        &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;{milestone.title}&lt;/h3&gt;
                        &lt;span className=&quot;text-blue-600 font-semibold&quot;&gt;{milestone.year}&lt;/span&gt;
                      &lt;/div&gt;
                      &lt;p className=&quot;text-gray-600&quot;&gt;{milestone.description}&lt;/p&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Team */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Meet Our Team&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                World-class engineers and product leaders from top companies
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8&quot;&gt;
              {team.map((member, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;text-6xl mb-4&quot;&gt;{member.image}&lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-1&quot;&gt;{member.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-blue-600 font-medium mb-4&quot;&gt;{member.role}&lt;/p&gt;
                  &lt;p className=&quot;text-gray-600 text-sm mb-6&quot;&gt;{member.bio}&lt;/p&gt;

                  &lt;div className=&quot;flex justify-center gap-4&quot;&gt;
                    &lt;a
                      href={member.linkedin}
                      className=&quot;p-2 text-gray-400 hover:text-blue-600 transition-colors&quot;
                    &gt;
                      &lt;Linkedin className=&quot;w-5 h-5&quot; /&gt;
                    &lt;/a&gt;
                    &lt;a
                      href={member.twitter}
                      className=&quot;p-2 text-gray-400 hover:text-blue-400 transition-colors&quot;
                    &gt;
                      &lt;Twitter className=&quot;w-5 h-5&quot; /&gt;
                    &lt;/a&gt;
                    &lt;a
                      href={member.github}
                      className=&quot;p-2 text-gray-400 hover:text-gray-900 transition-colors&quot;
                    &gt;
                      &lt;Github className=&quot;w-5 h-5&quot; /&gt;
                    &lt;/a&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Investors &amp; Advisors */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Backed by the Best&lt;/h2&gt;
            &lt;p className=&quot;text-xl text-gray-600 mb-12&quot;&gt;
              Supported by world-class investors and advisors who believe in our vision
            &lt;/p&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-8&quot;&gt;
              &lt;div className=&quot;bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-8 border border-blue-200&quot;&gt;
                &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-6&quot;&gt;Lead Investors&lt;/h3&gt;
                &lt;div className=&quot;space-y-4&quot;&gt;
                  {[
                    {
                      name: 'Andreessen Horowitz',
                      description: 'Leading venture capital firm',
                    },
                    {
                      name: 'Sequoia Capital',
                      description: 'Global venture capital partnership',
                    },
                    {
                      name: 'Index Ventures',
                      description: 'Multi-stage venture capital firm',
                    },
                  ].map((investor, index) =&gt; (
                    &lt;div key={index} className=&quot;flex items-center gap-4 p-4 bg-white rounded-lg&quot;&gt;
                      &lt;div className=&quot;w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center&quot;&gt;
                        &lt;Award className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{investor.name}&lt;/div&gt;
                        &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{investor.description}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div className=&quot;bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-8 border border-green-200&quot;&gt;
                &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-6&quot;&gt;Key Advisors&lt;/h3&gt;
                &lt;div className=&quot;space-y-4&quot;&gt;
                  {[
                    {
                      name: 'Wade Foster',
                      description: 'CEO &amp; Co-founder of Zapier',
                    },
                    {
                      name: 'Jan Oberhauser',
                      description: 'Founder &amp; CEO of n8n',
                    },
                    { name: 'Mike Knoop', description: 'Co-founder of Zapier' },
                  ].map((advisor, index) =&gt; (
                    &lt;div key={index} className=&quot;flex items-center gap-4 p-4 bg-white rounded-lg&quot;&gt;
                      &lt;div className=&quot;w-12 h-12 bg-green-100 rounded-full flex items-center justify-center&quot;&gt;
                        &lt;Users className=&quot;w-6 h-6 text-green-600&quot; /&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{advisor.name}&lt;/div&gt;
                        &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{advisor.description}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Office Locations */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Global Presence&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Offices around the world to serve our global community
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-3 gap-8&quot;&gt;
              {[
                {
                  city: 'San Francisco',
                  country: 'USA',
                  flag: '🇺🇸',
                  description: 'Global headquarters and R&amp;D center',
                  address: '123 Market St, San Francisco, CA 94105',
                },
                {
                  city: 'London',
                  country: 'UK',
                  flag: '🇬🇧',
                  description: 'European headquarters and enterprise sales',
                  address: '10 Downing St, London SW1A 2AA',
                },
                {
                  city: 'Singapore',
                  country: 'Singapore',
                  flag: '🇸🇬',
                  description: 'APAC headquarters and customer success',
                  address: '1 Raffles Place, Singapore 048616',
                },
              ].map((office, index) =&gt; (
                &lt;div
                  key={index}
                  className=&quot;bg-white border border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 hover:shadow-lg transition-all duration-300&quot;
                &gt;
                  &lt;div className=&quot;text-4xl mb-4&quot;&gt;{office.flag}&lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-1&quot;&gt;
                    {office.city}, {office.country}
                  &lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{office.description}&lt;/p&gt;
                  &lt;p className=&quot;text-gray-500 text-sm&quot;&gt;{office.address}&lt;/p&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Join Our Mission&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Help us build the future of workflow automation. We're always looking for talented
            individuals who share our vision.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-8&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Users className=&quot;w-5 h-5&quot; /&gt;
              View Open Positions
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Mail className=&quot;w-5 h-5&quot; /&gt;
              Get in Touch
            &lt;/button&gt;
          &lt;/div&gt;

          &lt;div className=&quot;flex items-center justify-center gap-8 text-sm opacity-80&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              Remote-first culture
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              Competitive compensation
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;CheckCircle className=&quot;w-4 h-4&quot; /&gt;
              Equity participation
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default About;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/APIReference.tsx (Line 1:1 - Line 821:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/apireference/APIReference.tsx (Line 2:1 - Line 822:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn513" onclick="toggleCodeBlock('cloneGroup513', 'expandBtn513', 'collapseBtn513')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn513" onclick="toggleCodeBlock('cloneGroup513', 'expandBtn513', 'collapseBtn513')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup513"><code class="language-tsx text-sm text-gray-800">/**
 * API Reference Page
 *
 * Comprehensive API documentation for Reporunner
 * REST API endpoints, authentication, and examples
 */

import {
  ArrowRight,
  CheckCircle,
  Clock,
  Code,
  Copy,
  ExternalLink,
  GitBranch,
  Key,
  Play,
  Settings,
  Shield,
  Users,
  Webhook,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';
import { Footer } from '../components/Landing/Footer';
import { Header } from '../components/Landing/Header';

export const APIReference: React.FC = () =&gt; {
  const [activeEndpoint, setActiveEndpoint] = useState('workflows');
  const [copiedCode, setCopiedCode] = useState('');

  const endpointCategories = [
    { id: 'workflows', name: 'Workflows', icon: GitBranch, count: 12 },
    { id: 'executions', name: 'Executions', icon: Play, count: 8 },
    { id: 'credentials', name: 'Credentials', icon: Key, count: 6 },
    { id: 'nodes', name: 'Nodes', icon: Settings, count: 10 },
    { id: 'integrations', name: 'Integrations', icon: Webhook, count: 15 },
    { id: 'users', name: 'Users', icon: Users, count: 7 },
    { id: 'webhooks', name: 'Webhooks', icon: Webhook, count: 5 },
  ];

  const endpoints = {
    workflows: [
      {
        method: 'GET',
        path: '/api/workflows',
        title: 'List Workflows',
        description: 'Retrieve all workflows for the authenticated user',
        parameters: [
          {
            name: 'page',
            type: 'integer',
            required: false,
            description: 'Page number for pagination',
          },
          {
            name: 'limit',
            type: 'integer',
            required: false,
            description: 'Number of results per page (max 100)',
          },
          {
            name: 'active',
            type: 'boolean',
            required: false,
            description: 'Filter by active status',
          },
        ],
        response: {
          status: 200,
          body: `{
  &quot;data&quot;: [
    {
      &quot;id&quot;: &quot;wf_123abc&quot;,
      &quot;name&quot;: &quot;Customer Onboarding&quot;,
      &quot;description&quot;: &quot;Automated customer onboarding workflow&quot;,
      &quot;active&quot;: true,
      &quot;nodes&quot;: [...],
      &quot;createdAt&quot;: &quot;2025-01-20T10:00:00Z&quot;,
      &quot;updatedAt&quot;: &quot;2025-01-20T15:30:00Z&quot;
    }
  ],
  &quot;pagination&quot;: {
    &quot;page&quot;: 1,
    &quot;limit&quot;: 50,
    &quot;total&quot;: 127,
    &quot;pages&quot;: 3
  }
}`,
        },
      },
      {
        method: 'POST',
        path: '/api/workflows',
        title: 'Create Workflow',
        description: 'Create a new workflow',
        parameters: [
          {
            name: 'name',
            type: 'string',
            required: true,
            description: 'Workflow name',
          },
          {
            name: 'description',
            type: 'string',
            required: false,
            description: 'Workflow description',
          },
          {
            name: 'nodes',
            type: 'array',
            required: true,
            description: 'Array of workflow nodes',
          },
          {
            name: 'connections',
            type: 'array',
            required: true,
            description: 'Array of node connections',
          },
        ],
        response: {
          status: 201,
          body: `{
  &quot;data&quot;: {
    &quot;id&quot;: &quot;wf_456def&quot;,
    &quot;name&quot;: &quot;New Workflow&quot;,
    &quot;description&quot;: &quot;My new workflow&quot;,
    &quot;active&quot;: false,
    &quot;nodes&quot;: [...],
    &quot;connections&quot;: [...],
    &quot;createdAt&quot;: &quot;2025-01-20T16:00:00Z&quot;
  }
}`,
        },
      },
      {
        method: 'GET',
        path: '/api/workflows/{id}',
        title: 'Get Workflow',
        description: 'Retrieve a specific workflow by ID',
        parameters: [
          {
            name: 'id',
            type: 'string',
            required: true,
            description: 'Workflow ID',
          },
        ],
        response: {
          status: 200,
          body: `{
  &quot;data&quot;: {
    &quot;id&quot;: &quot;wf_123abc&quot;,
    &quot;name&quot;: &quot;Customer Onboarding&quot;,
    &quot;description&quot;: &quot;Automated customer onboarding workflow&quot;,
    &quot;active&quot;: true,
    &quot;nodes&quot;: [...],
    &quot;connections&quot;: [...],
    &quot;createdAt&quot;: &quot;2025-01-20T10:00:00Z&quot;,
    &quot;updatedAt&quot;: &quot;2025-01-20T15:30:00Z&quot;
  }
}`,
        },
      },
    ],
    executions: [
      {
        method: 'GET',
        path: '/api/executions',
        title: 'List Executions',
        description: 'Retrieve workflow execution history',
        parameters: [
          {
            name: 'workflowId',
            type: 'string',
            required: false,
            description: 'Filter by workflow ID',
          },
          {
            name: 'status',
            type: 'string',
            required: false,
            description: 'Filter by execution status',
          },
          {
            name: 'limit',
            type: 'integer',
            required: false,
            description: 'Number of results per page',
          },
        ],
        response: {
          status: 200,
          body: `{
  &quot;data&quot;: [
    {
      &quot;id&quot;: &quot;exec_789ghi&quot;,
      &quot;workflowId&quot;: &quot;wf_123abc&quot;,
      &quot;status&quot;: &quot;success&quot;,
      &quot;startTime&quot;: &quot;2025-01-20T14:00:00Z&quot;,
      &quot;endTime&quot;: &quot;2025-01-20T14:02:15Z&quot;,
      &quot;duration&quot;: 135000,
      &quot;nodeExecutions&quot;: [...]
    }
  ]
}`,
        },
      },
      {
        method: 'POST',
        path: '/api/executions',
        title: 'Execute Workflow',
        description: 'Trigger a workflow execution',
        parameters: [
          {
            name: 'workflowId',
            type: 'string',
            required: true,
            description: 'ID of workflow to execute',
          },
          {
            name: 'inputData',
            type: 'object',
            required: false,
            description: 'Input data for the workflow',
          },
          {
            name: 'wait',
            type: 'boolean',
            required: false,
            description: 'Wait for execution to complete',
          },
        ],
        response: {
          status: 201,
          body: `{
  &quot;data&quot;: {
    &quot;id&quot;: &quot;exec_987zyx&quot;,
    &quot;workflowId&quot;: &quot;wf_123abc&quot;,
    &quot;status&quot;: &quot;running&quot;,
    &quot;startTime&quot;: &quot;2025-01-20T16:30:00Z&quot;
  }
}`,
        },
      },
    ],
    credentials: [
      {
        method: 'GET',
        path: '/api/credentials',
        title: 'List Credentials',
        description: 'Retrieve all stored credentials',
        parameters: [
          {
            name: 'type',
            type: 'string',
            required: false,
            description: 'Filter by credential type',
          },
        ],
        response: {
          status: 200,
          body: `{
  &quot;data&quot;: [
    {
      &quot;id&quot;: &quot;cred_abc123&quot;,
      &quot;name&quot;: &quot;Gmail OAuth&quot;,
      &quot;type&quot;: &quot;gmailOAuth2&quot;,
      &quot;createdAt&quot;: &quot;2025-01-20T09:00:00Z&quot;,
      &quot;isValid&quot;: true
    }
  ]
}`,
        },
      },
    ],
  };

  const authenticationExample = `curl -X GET &quot;https://api.reporunner.dev/api/workflows&quot; \\
  -H &quot;Authorization: Bearer YOUR_API_TOKEN&quot; \\
  -H &quot;Content-Type: application/json&quot;`;

  const webhookExample = `// Webhook endpoint configuration
{
  &quot;url&quot;: &quot;https://your-domain.com/webhook/reporunner&quot;,
  &quot;events&quot;: [&quot;workflow.completed&quot;, &quot;workflow.failed&quot;],
  &quot;secret&quot;: &quot;your_webhook_secret&quot;
}

// Webhook payload example
{
  &quot;event&quot;: &quot;workflow.completed&quot;,
  &quot;timestamp&quot;: &quot;2025-01-20T16:45:00Z&quot;,
  &quot;data&quot;: {
    &quot;workflowId&quot;: &quot;wf_123abc&quot;,
    &quot;executionId&quot;: &quot;exec_789ghi&quot;,
    &quot;status&quot;: &quot;success&quot;,
    &quot;duration&quot;: 125000
  }
}`;

  const sdkExample = `// Node.js SDK Example
const { ReporunnerClient } = require('@reporunner/sdk');

const client = new ReporunnerClient({
  apiToken: process.env.REPORUNNER_API_TOKEN,
  baseUrl: 'https://api.reporunner.dev'
});

// Execute a workflow
const execution = await client.workflows.execute('wf_123abc', {
  inputData: { email: 'user@example.com' },
  wait: true
});

console.log('Execution result:', execution.data);`;

  const copyToClipboard = (text: string) =&gt; {
    navigator.clipboard.writeText(text);
    setCopiedCode(text);
    setTimeout(() =&gt; setCopiedCode(''), 2000);
  };

  const getMethodColor = (method: string) =&gt; {
    switch (method) {
      case 'GET':
        return 'text-green-600 bg-green-100';
      case 'POST':
        return 'text-blue-600 bg-blue-100';
      case 'PUT':
        return 'text-orange-600 bg-orange-100';
      case 'DELETE':
        return 'text-red-600 bg-red-100';
      default:
        return 'text-gray-600 bg-gray-100';
    }
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                API
              &lt;/span&gt;{' '}
              Reference
            &lt;/h1&gt;
            &lt;p className=&quot;text-xl text-slate-200 mb-8 max-w-3xl mx-auto leading-relaxed&quot;&gt;
              Complete REST API documentation for Reporunner. Manage workflows, executions, and
              integrations programmatically with our powerful API.
            &lt;/p&gt;

            &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center mb-12&quot;&gt;
              &lt;button className=&quot;px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg text-lg hover:scale-105 transition-transform flex items-center gap-2&quot;&gt;
                &lt;Key className=&quot;w-5 h-5&quot; /&gt;
                Get API Key
              &lt;/button&gt;
              &lt;button className=&quot;px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg text-lg border border-white/20 hover:bg-white/20 transition-all flex items-center gap-2&quot;&gt;
                &lt;Code className=&quot;w-5 h-5&quot; /&gt;
                View SDK
              &lt;/button&gt;
            &lt;/div&gt;

            {/* API Stats */}
            &lt;div className=&quot;grid grid-cols-2 md:grid-cols-4 gap-8&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-blue-300 mb-2&quot;&gt;60+&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;API Endpoints&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-green-300 mb-2&quot;&gt;99.9%&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Uptime SLA&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-purple-300 mb-2&quot;&gt;5&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;SDKs Available&lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-3xl font-bold text-orange-300 mb-2&quot;&gt;50ms&lt;/div&gt;
                &lt;div className=&quot;text-sm text-slate-300&quot;&gt;Avg Response&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Quick Start */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Quick Start&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Get up and running with the Reporunner API in minutes
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-8&quot;&gt;
              {/* Authentication */}
              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3 mb-4&quot;&gt;
                  &lt;div className=&quot;bg-blue-100 p-2 rounded-lg&quot;&gt;
                    &lt;Shield className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;Authentication&lt;/h3&gt;
                &lt;/div&gt;

                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;
                  All API requests require authentication using Bearer tokens. Include your API
                  token in the Authorization header.
                &lt;/p&gt;

                &lt;div className=&quot;relative&quot;&gt;
                  &lt;pre className=&quot;bg-gray-900 rounded-lg p-4 text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                    &lt;code&gt;{authenticationExample}&lt;/code&gt;
                  &lt;/pre&gt;
                  &lt;button
                    onClick={() =&gt; copyToClipboard(authenticationExample)}
                    className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                  &gt;
                    {copiedCode === authenticationExample ? (
                      &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                    ) : (
                      &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                    )}
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* SDK Usage */}
              &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3 mb-4&quot;&gt;
                  &lt;div className=&quot;bg-purple-100 p-2 rounded-lg&quot;&gt;
                    &lt;Code className=&quot;w-6 h-6 text-purple-600&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-xl font-bold text-gray-900&quot;&gt;SDK Usage&lt;/h3&gt;
                &lt;/div&gt;

                &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;
                  Use our official SDKs for easier integration. Available for Node.js, Python, PHP,
                  Go, and more.
                &lt;/p&gt;

                &lt;div className=&quot;relative&quot;&gt;
                  &lt;pre className=&quot;bg-gray-900 rounded-lg p-4 text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                    &lt;code&gt;{sdkExample}&lt;/code&gt;
                  &lt;/pre&gt;
                  &lt;button
                    onClick={() =&gt; copyToClipboard(sdkExample)}
                    className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                  &gt;
                    {copiedCode === sdkExample ? (
                      &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                    ) : (
                      &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                    )}
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* API Endpoints */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-7xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;API Endpoints&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Complete reference for all available endpoints
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;
              {/* Sidebar */}
              &lt;div className=&quot;lg:w-1/4&quot;&gt;
                &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-6 sticky top-6&quot;&gt;
                  &lt;h3 className=&quot;font-semibold text-gray-900 mb-4&quot;&gt;Endpoints&lt;/h3&gt;
                  &lt;nav className=&quot;space-y-2&quot;&gt;
                    {endpointCategories.map((category) =&gt; {
                      const Icon = category.icon;
                      return (
                        &lt;button
                          key={category.id}
                          onClick={() =&gt; setActiveEndpoint(category.id)}
                          className={`w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors ${
                            activeEndpoint === category.id
                              ? 'bg-blue-50 text-blue-700 border border-blue-200'
                              : 'text-gray-700 hover:bg-gray-50'
                          }`}
                        &gt;
                          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                          &lt;/div&gt;
                          &lt;span className=&quot;text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full&quot;&gt;
                            {category.count}
                          &lt;/span&gt;
                        &lt;/button&gt;
                      );
                    })}
                  &lt;/nav&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Endpoint Details */}
              &lt;div className=&quot;lg:w-3/4&quot;&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                  {endpoints[activeEndpoint as keyof typeof endpoints]?.map((endpoint, index) =&gt; (
                    &lt;div key={index} className=&quot;bg-white border border-gray-200 rounded-xl p-6&quot;&gt;
                      &lt;div className=&quot;flex items-start gap-4 mb-4&quot;&gt;
                        &lt;span
                          className={`px-3 py-1 text-sm font-bold rounded-full ${getMethodColor(endpoint.method)}`}
                        &gt;
                          {endpoint.method}
                        &lt;/span&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;h3 className=&quot;text-xl font-bold text-gray-900 mb-2&quot;&gt;{endpoint.title}&lt;/h3&gt;
                          &lt;code className=&quot;text-gray-600 bg-gray-100 px-2 py-1 rounded text-sm&quot;&gt;
                            {endpoint.path}
                          &lt;/code&gt;
                          &lt;p className=&quot;text-gray-600 mt-2&quot;&gt;{endpoint.description}&lt;/p&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      {/* Parameters */}
                      {endpoint.parameters &amp;&amp; endpoint.parameters.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;mb-6&quot;&gt;
                          &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Parameters&lt;/h4&gt;
                          &lt;div className=&quot;overflow-x-auto&quot;&gt;
                            &lt;table className=&quot;w-full text-sm&quot;&gt;
                              &lt;thead&gt;
                                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;Name&lt;/th&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;Type&lt;/th&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;
                                    Required
                                  &lt;/th&gt;
                                  &lt;th className=&quot;text-left p-2 font-medium text-gray-700&quot;&gt;
                                    Description
                                  &lt;/th&gt;
                                &lt;/tr&gt;
                              &lt;/thead&gt;
                              &lt;tbody&gt;
                                {endpoint.parameters.map((param, paramIndex) =&gt; (
                                  &lt;tr key={paramIndex} className=&quot;border-b border-gray-100&quot;&gt;
                                    &lt;td className=&quot;p-2 font-mono text-blue-600&quot;&gt;{param.name}&lt;/td&gt;
                                    &lt;td className=&quot;p-2 text-gray-600&quot;&gt;{param.type}&lt;/td&gt;
                                    &lt;td className=&quot;p-2&quot;&gt;
                                      {param.required ? (
                                        &lt;span className=&quot;text-red-600 font-medium&quot;&gt;Yes&lt;/span&gt;
                                      ) : (
                                        &lt;span className=&quot;text-gray-500&quot;&gt;No&lt;/span&gt;
                                      )}
                                    &lt;/td&gt;
                                    &lt;td className=&quot;p-2 text-gray-600&quot;&gt;{param.description}&lt;/td&gt;
                                  &lt;/tr&gt;
                                ))}
                              &lt;/tbody&gt;
                            &lt;/table&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      )}

                      {/* Response */}
                      &lt;div&gt;
                        &lt;h4 className=&quot;font-semibold text-gray-900 mb-3&quot;&gt;Response&lt;/h4&gt;
                        &lt;div className=&quot;bg-gray-900 rounded-lg p-4 relative&quot;&gt;
                          &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
                            &lt;span className=&quot;text-green-400 text-sm font-medium&quot;&gt;
                              HTTP {endpoint.response.status}
                            &lt;/span&gt;
                            &lt;button
                              onClick={() =&gt; copyToClipboard(endpoint.response.body)}
                              className=&quot;p-1 text-gray-400 hover:text-white transition-colors&quot;
                            &gt;
                              {copiedCode === endpoint.response.body ? (
                                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                              ) : (
                                &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                              )}
                            &lt;/button&gt;
                          &lt;/div&gt;
                          &lt;pre className=&quot;text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                            &lt;code&gt;{endpoint.response.body}&lt;/code&gt;
                          &lt;/pre&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Webhooks */}
      &lt;section className=&quot;py-16 bg-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6&quot;&gt;Webhooks&lt;/h2&gt;
              &lt;p className=&quot;text-xl text-gray-600&quot;&gt;
                Receive real-time notifications about workflow events
              &lt;/p&gt;
            &lt;/div&gt;

            &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-8&quot;&gt;
              &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-8&quot;&gt;
                &lt;div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-4&quot;&gt;Webhook Events&lt;/h3&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    {[
                      {
                        event: 'workflow.created',
                        description: 'New workflow created',
                      },
                      {
                        event: 'workflow.updated',
                        description: 'Workflow modified',
                      },
                      {
                        event: 'workflow.deleted',
                        description: 'Workflow deleted',
                      },
                      {
                        event: 'execution.started',
                        description: 'Workflow execution started',
                      },
                      {
                        event: 'execution.completed',
                        description: 'Workflow execution completed',
                      },
                      {
                        event: 'execution.failed',
                        description: 'Workflow execution failed',
                      },
                    ].map((webhook, index) =&gt; (
                      &lt;div
                        key={index}
                        className=&quot;flex items-center gap-3 p-3 bg-gray-50 rounded-lg&quot;
                      &gt;
                        &lt;Webhook className=&quot;w-5 h-5 text-blue-600&quot; /&gt;
                        &lt;div&gt;
                          &lt;code className=&quot;text-sm font-mono text-blue-600&quot;&gt;{webhook.event}&lt;/code&gt;
                          &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{webhook.description}&lt;/p&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-4&quot;&gt;Example Configuration&lt;/h3&gt;
                  &lt;div className=&quot;relative&quot;&gt;
                    &lt;pre className=&quot;bg-gray-900 rounded-lg p-4 text-green-400 font-mono text-sm overflow-x-auto&quot;&gt;
                      &lt;code&gt;{webhookExample}&lt;/code&gt;
                    &lt;/pre&gt;
                    &lt;button
                      onClick={() =&gt; copyToClipboard(webhookExample)}
                      className=&quot;absolute top-2 right-2 p-2 text-gray-400 hover:text-white transition-colors&quot;
                    &gt;
                      {copiedCode === webhookExample ? (
                        &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                      ) : (
                        &lt;Copy className=&quot;w-4 h-4&quot; /&gt;
                      )}
                    &lt;/button&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Rate Limits &amp; SDKs */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8&quot;&gt;
            {/* Rate Limits */}
            &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-8&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 mb-6&quot;&gt;
                &lt;div className=&quot;bg-orange-100 p-3 rounded-lg&quot;&gt;
                  &lt;Clock className=&quot;w-6 h-6 text-orange-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Rate Limits&lt;/h3&gt;
              &lt;/div&gt;

              &lt;div className=&quot;space-y-4&quot;&gt;
                {[
                  {
                    tier: 'Free',
                    limit: '1,000 requests/hour',
                    burst: '100 requests/minute',
                  },
                  {
                    tier: 'Professional',
                    limit: '10,000 requests/hour',
                    burst: '500 requests/minute',
                  },
                  {
                    tier: 'Enterprise',
                    limit: '100,000 requests/hour',
                    burst: '1,000 requests/minute',
                  },
                ].map((tier, index) =&gt; (
                  &lt;div
                    key={index}
                    className=&quot;flex items-center justify-between p-4 bg-gray-50 rounded-lg&quot;
                  &gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{tier.tier}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{tier.limit}&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-right&quot;&gt;
                      &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;Burst: {tier.burst}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;

            {/* SDKs */}
            &lt;div className=&quot;bg-white border border-gray-200 rounded-xl p-8&quot;&gt;
              &lt;div className=&quot;flex items-center gap-3 mb-6&quot;&gt;
                &lt;div className=&quot;bg-blue-100 p-3 rounded-lg&quot;&gt;
                  &lt;Code className=&quot;w-6 h-6 text-blue-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Official SDKs&lt;/h3&gt;
              &lt;/div&gt;

              &lt;div className=&quot;space-y-4&quot;&gt;
                {[
                  {
                    language: 'Node.js',
                    package: '@reporunner/node-sdk',
                    version: 'v2.1.0',
                  },
                  {
                    language: 'Python',
                    package: 'reporunner-python',
                    version: 'v1.8.0',
                  },
                  {
                    language: 'PHP',
                    package: 'reporunner/php-sdk',
                    version: 'v1.5.0',
                  },
                  {
                    language: 'Go',
                    package: 'github.com/reporunner/go-sdk',
                    version: 'v1.3.0',
                  },
                  {
                    language: 'Ruby',
                    package: 'reporunner-ruby',
                    version: 'v1.2.0',
                  },
                ].map((sdk, index) =&gt; (
                  &lt;div
                    key={index}
                    className=&quot;flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer&quot;
                  &gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-semibold text-gray-900&quot;&gt;{sdk.language}&lt;/div&gt;
                      &lt;code className=&quot;text-gray-600 text-sm&quot;&gt;{sdk.package}&lt;/code&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                      &lt;span className=&quot;text-green-600 text-sm font-medium&quot;&gt;{sdk.version}&lt;/span&gt;
                      &lt;ArrowRight className=&quot;w-4 h-4 text-gray-400&quot; /&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Start Building?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Get your API key and start integrating Reporunner into your applications today.
          &lt;/p&gt;

          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg text-lg hover:bg-gray-100 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;Key className=&quot;w-5 h-5&quot; /&gt;
              Get API Key
            &lt;/button&gt;
            &lt;button className=&quot;px-8 py-4 border-2 border-white/30 text-white font-semibold rounded-lg text-lg hover:bg-white/10 transition-colors flex items-center gap-2 justify-center&quot;&gt;
              &lt;ExternalLink className=&quot;w-5 h-5&quot; /&gt;
              View Examples
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* Footer */}
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
};

export default APIReference;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 5:32 - Line 229:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/conditionnodebody/ConditionNodeBody.tsx (Line 11:19 - Line 235:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn515" onclick="toggleCodeBlock('cloneGroup515', 'expandBtn515', 'collapseBtn515')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn515" onclick="toggleCodeBlock('cloneGroup515', 'expandBtn515', 'collapseBtn515')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup515"><code class="language-tsx text-sm text-gray-800">;
import type { CustomNodeBodyProps } from './nodeUiRegistry';
import { NodeIcon, NodeLabel, StatusBadge } from './shared';

/**
 * Custom Condition Node Body Component
 * Gmail-style UI with condition-specific features and dual outputs
 */
const ConditionNodeBody: React.FC&lt;CustomNodeBodyProps&gt; = ({
  nodeId,
  nodeData,
  selected,
  isHovered,
  onMouseEnter,
  onMouseLeave,
  onDelete,
  onOpenProperties,
}) =&gt; {
  const displayName = nodeData.name || nodeData.label || 'Condition';
  const mode = nodeData.parameters?.mode || 'expression';
  const rules = nodeData.parameters?.rules || [];

  // Menu state for NodeToolbar
  const [showLocalMenu, setShowLocalMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showLocalMenu,
    triggerRef: menuTriggerRef,
    menuRef: menuRef,
    offset: 4,
    onClose: () =&gt; setShowLocalMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook
  const logic = nodeData.parameters?.logic || 'AND';
  const icon = '❓'; // Question mark for condition

  // Generate subtitle based on condition configuration
  const getSubtitle = () =&gt; {
    if (mode === 'rules' &amp;&amp; rules.length &gt; 0) {
      return `${rules.length} rule${rules.length &gt; 1 ? 's' : ''} (${logic})`;
    }
    return 'Expression Mode';
  };

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* True Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#22c55e', // green for true
                width: 10,
                height: 10,
                right: -5,
                top: '35%',
              }}
            /&gt;

            {/* False Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_1&quot;
              style={{
                background: '#ef4444', // red for false
                width: 10,
                height: 10,
                right: -5,
                top: '65%',
              }}
            /&gt;

            {/* Condition Icon */}
            &lt;NodeIcon icon={icon} displayName={displayName} size=&quot;md&quot; /&gt;

            {/* Output Labels */}
            &lt;div
              className=&quot;absolute right-0 text-xs text-white px-1 py-0.5 rounded-l pointer-events-none z-10&quot;
              style={{
                top: '35%',
                backgroundColor: '#22c55e',
                transform: 'translateY(-50%)',
                marginRight: '-1px',
                fontSize: '10px',
              }}
            &gt;
              T
            &lt;/div&gt;
            &lt;div
              className=&quot;absolute right-0 text-xs text-white px-1 py-0.5 rounded-l pointer-events-none z-10&quot;
              style={{
                top: '65%',
                backgroundColor: '#ef4444',
                transform: 'translateY(-50%)',
                marginRight: '-1px',
                fontSize: '10px',
              }}
            &gt;
              F
            &lt;/div&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badges */}
            {nodeData.disabled &amp;&amp; &lt;StatusBadge type=&quot;disabled&quot; position=&quot;top-right&quot; /&gt;}
            {mode === 'rules' &amp;&amp; rules.length &gt; 0 &amp;&amp; (
              &lt;StatusBadge type=&quot;count&quot; content={rules.length} position=&quot;top-left&quot; color=&quot;yellow&quot; /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Node Label */}
      &lt;NodeLabel displayName={displayName} subtitle={getSubtitle()} maxWidth={150} /&gt;
    &lt;/div&gt;
  );
};

export default ConditionNodeBody;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 1:1 - Line 12:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 1:1 - Line 12:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn517" onclick="toggleCodeBlock('cloneGroup517', 'expandBtn517', 'collapseBtn517')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn517" onclick="toggleCodeBlock('cloneGroup517', 'expandBtn517', 'collapseBtn517')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup517"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { useRef, useState } from 'react';
import { Handle, Position } from 'reactflow';
import NodeToolbar from '../components/WorkflowEditor/NodeTypes/BaseNode/NodeToolbar';
import { useSmartMenuPosition } from '../hooks/useSmartMenuPosition';
import type { CustomNodeBodyProps } from './nodeUiRegistry';
import { NodeIcon, NodeLabel, StatusBadge } from './shared';

/**
 * Custom AI Agent Node Body Component
 * Gmail-style UI with AI-specific features and handles
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 5:32 - Line 219:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/aiagentnodebody/AIAgentNodeBody.tsx (Line 11:19 - Line 225:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn518" onclick="toggleCodeBlock('cloneGroup518', 'expandBtn518', 'collapseBtn518')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn518" onclick="toggleCodeBlock('cloneGroup518', 'expandBtn518', 'collapseBtn518')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup518"><code class="language-tsx text-sm text-gray-800">;
import type { CustomNodeBodyProps } from './nodeUiRegistry';
import { NodeIcon, NodeLabel, StatusBadge } from './shared';

/**
 * Custom AI Agent Node Body Component
 * Gmail-style UI with AI-specific features and handles
 */
const AIAgentNodeBody: React.FC&lt;CustomNodeBodyProps&gt; = ({
  nodeId,
  nodeData,
  selected,
  isHovered,
  onMouseEnter,
  onMouseLeave,
  onDelete,

  onOpenProperties,
}) =&gt; {
  const displayName = nodeData.name || nodeData.label || 'AI Agent';
  const provider = nodeData.parameters?.provider || 'Google (Gemini)';
  const icon = '🤖'; // Simple robot emoji like old frontend

  // Menu state for NodeToolbar
  const [showLocalMenu, setShowLocalMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showLocalMenu,
    triggerRef: menuTriggerRef,
    menuRef: menuRef,
    offset: 4,
    onClose: () =&gt; setShowLocalMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Standard Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
                top: '25%',
              }}
            /&gt;

            {/* AI Language Model Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;ai_languageModel&quot;
              style={{
                background: '#8b5cf6',
                width: 8,
                height: 8,
                left: -4,
                top: '45%',
              }}
            /&gt;

            {/* AI Memory Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;ai_memory&quot;
              style={{
                background: '#f59e0b',
                width: 8,
                height: 8,
                left: -4,
                top: '65%',
              }}
            /&gt;

            {/* AI Tool Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;ai_tool&quot;
              style={{
                background: '#ef4444',
                width: 8,
                height: 8,
                left: -4,
                top: '85%',
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* AI Agent Icon */}
            &lt;NodeIcon icon={icon} displayName={displayName} size=&quot;md&quot; /&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badge */}
            {nodeData.disabled &amp;&amp; &lt;StatusBadge type=&quot;disabled&quot; position=&quot;top-right&quot; /&gt;}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Node Label */}
      &lt;NodeLabel displayName={displayName} subtitle={provider} maxWidth={150} /&gt;
    &lt;/div&gt;
  );
};

export default AIAgentNodeBody;</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="css-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">css</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/TransformAssignmentCollection.tsx (Line 361:2 - Line 375:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/transformassignmentcollection/TransformAssignmentCollection.tsx (Line 366:2 - Line 380:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn237" onclick="toggleCodeBlock('cloneGroup237', 'expandBtn237', 'collapseBtn237')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn237" onclick="toggleCodeBlock('cloneGroup237', 'expandBtn237', 'collapseBtn237')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup237"><code class="language-css text-sm text-gray-800">{`
        .transform-assignment-collection {
          max-width: 100%;
        }
        .assignment-item.dragging {
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .bulk-operations {
          margin-bottom: 16px;
          padding: 12px;
          background: #fafafa;
          border-radius: 6px;
          border: 1px solid #d9d9d9;
        }
      `}</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div></section><!-- Add more sections for other formats and clone groups as needed--></main><footer class="bg-white shadow mt-8 py-4"><div class="container mx-auto px-4 text-center"><p class="text-sm text-gray-600">This report is generated by jscpd, an open-source copy/paste detector.</p><p class="text-sm text-gray-600">jscpd is licensed under the MIT License.</p><a class="text-blue-500 text-sm" href="https://github.com/kucherenko/jscpd" target="_blank" rel="noopener noreferrer">View jscpd on GitHub</a></div></footer><script src="js/prism.js"></script><script>function toggleCodeBlock(codeBlockId, expandBtnId, collapseBtnId) {
  const codeBlock = document.getElementById(codeBlockId);
  const expandBtn = document.getElementById(expandBtnId);
  const collapseBtn = document.getElementById(collapseBtnId);

  codeBlock.classList.toggle('hidden');
  expandBtn.classList.toggle('hidden');
  collapseBtn.classList.toggle('hidden');
}</script></body></html>