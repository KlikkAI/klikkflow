<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Copy/Paste Detector Report</title><link href="styles/tailwind.css" rel="stylesheet"><link href="styles/prism.css" rel="stylesheet"></head><body class="bg-gray-100"><header class="bg-white shadow py-4"><div class="container mx-auto px-4"><h1 class="text-3xl font-semibold text-gray-800">jscpd - copy/paste report</h1></div></header><main class="container mx-auto my-8 p-4 bg-white shadow rounded"><section class="mb-8" id="dashboard"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Dashboard</h2><div class="grid grid-cols-4 gap-4"><div class="bg-blue-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-blue-800 mb-2">Total Files</h3><span class="text-4xl font-bold text-blue-800">837</span></div><div class="bg-green-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-green-800 mb-2">Total Lines of Code</h3><span class="text-4xl font-bold text-green-800">171187</span></div><div class="bg-yellow-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-yellow-800 mb-2">Number of Clones</h3><span class="text-4xl font-bold text-yellow-800">263</span></div><div class="bg-red-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-red-800 mb-2">Duplicated Lines</h3><span class="text-4xl font-bold text-red-800">35209 (20.57%)</span></div></div></section><section class="mb-8" id="formats"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Formats with Duplications</h2><table class="w-full table-auto"><thead><tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">Format</th><th class="py-3 px-6 text-left">Files</th><th class="py-3 px-6 text-left">Lines</th><th class="py-3 px-6 text-left">Clones</th><th class="py-3 px-6 text-left">Duplicated Lines</th><th class="py-3 px-6 text-left">Duplicated Tokens</th></tr></thead><tbody><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#typescript-clones">typescript</a></td><td class="py-3 px-6">504</td><td class="py-3 px-6">69513</td><td class="py-3 px-6">86</td><td class="py-3 px-6">1168</td><td class="py-3 px-6">10362</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#javascript-clones">javascript</a></td><td class="py-3 px-6">164</td><td class="py-3 px-6">35871</td><td class="py-3 px-6">51</td><td class="py-3 px-6">12774</td><td class="py-3 px-6">100850</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#tsx-clones">tsx</a></td><td class="py-3 px-6">167</td><td class="py-3 px-6">65781</td><td class="py-3 px-6">126</td><td class="py-3 px-6">21267</td><td class="py-3 px-6">169356</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#css-clones">css</a></td><td class="py-3 px-6">2</td><td class="py-3 px-6">22</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr></tbody></table></section><section class="mb-8" id="txt-clones"><a name="typescript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">typescript</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/permission/domain/repositories/IPermissionRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup26"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/operationaltransform/domain/repositories/IOperationalTransformRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup27"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/embeddings/domain/repositories/IEmbeddingsRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup28"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/database/domain/repositories/IDatabaseRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup29"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/cursortracking/domain/repositories/ICursorTrackingRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup30"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/collaboration/domain/repositories/ICollaborationRepository.ts (Line 1:2 - Line 7:2), /home/margon/Reporunner/reporunner/packages/backend/src/services/versioncontrol/domain/repositories/IVersionControlRepository.ts (Line 1:2 - Line 7:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup31"><code class="language-typescript text-sm text-gray-800">{
  findById(id: string): Promise&lt;any&gt;;
  findAll(): Promise&lt;any[]&gt;;
  create(data: any): Promise&lt;any&gt;;
  update(id: string, data: any): Promise&lt;any&gt;;
  delete(id: string): Promise&lt;boolean&gt;;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/VectorStore.node.ts (Line 85:11 - Line 106:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/VectorStoreTool.node.ts (Line 76:14 - Line 97:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup37"><code class="language-typescript text-sm text-gray-800">,
        type: 'options',
        default: 'pinecone',
        required: true,
        options: [
          {
            name: 'Pinecone',
            value: 'pinecone',
          },
          {
            name: 'Weaviate',
            value: 'weaviate',
          },
          {
            name: 'Qdrant',
            value: 'qdrant',
          },
          {
            name: 'Chroma',
            value: 'chroma',
          },
          {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/HttpRequest.node.ts (Line 24:21 - Line 31:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/Trigger.node.ts (Line 79:26 - Line 86:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup38"><code class="language-typescript text-sm text-gray-800">,
        options: [
          { name: 'GET', value: 'GET' },
          { name: 'POST', value: 'POST' },
          { name: 'PUT', value: 'PUT' },
          { name: 'DELETE', value: 'DELETE' },
          { name: 'PATCH', value: 'PATCH' },
          {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/Action.node.ts (Line 67:6 - Line 78:11), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/definitions/HttpRequest.node.ts (Line 23:5 - Line 89:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup39"><code class="language-typescript text-sm text-gray-800">,
        description: 'HTTP method to use',
        options: [
          { name: 'GET', value: 'GET' },
          { name: 'POST', value: 'POST' },
          { name: 'PUT', value: 'PUT' },
          { name: 'DELETE', value: 'DELETE' },
          { name: 'PATCH', value: 'PATCH' },
        ],
        displayOptions: {
          show: {
            actionType</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/themes/darkTheme.ts (Line 21:10 - Line 68:34), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/themes/defaultTheme.ts (Line 21:10 - Line 68:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup40"><code class="language-typescript text-sm text-gray-800">,
  },
  typography: {
    fontFamily:
      '-apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif',
    fontSize: {
      xs: '10px',
      sm: '12px',
      md: '14px',
      lg: '16px',
      xl: '18px',
    },
    fontWeight: {
      normal: 400,
      medium: 500,
      semibold: 600,
      bold: 700,
    },
    lineHeight: {
      tight: 1.2,
      normal: 1.5,
      relaxed: 1.8,
    },
  },
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '20px',
    '2xl': '24px',
  },
  animations: {
    duration: {
      fast: '150ms',
      normal: '250ms',
      slow: '350ms',
    },
    easing: {
      linear: 'linear',
      ease: 'ease',
      easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
      easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
      easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    },
  },
  shadows: {
    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.15)'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 124:11 - Line 135:21), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn155" onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn155" onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup155"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async calculateMemoryTrend</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 136:28 - Line 147:18), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 120:25 - Line 131:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn156" onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn156" onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup156"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async for(input: any): Promise&lt;any&gt; {
    return this.forUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async setupGCMonitoring</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 156:18 - Line 167:17), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn157" onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn157" onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup157"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async getAverageMetric</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 110:26 - Line 121:16), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn158" onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn158" onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup158"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async updateErrorRate</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 130:28 - Line 141:20), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn159" onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn159" onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup159"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async handleCriticalError</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 194:17 - Line 205:3), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn160" onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn160" onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup160"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 198:10 - Line 213:17), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 76:16 - Line 87:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn161" onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn161" onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup161"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async getErrorPatterns</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/errortracker/ErrorTrackerService.ts (Line 238:24 - Line 249:5), /home/margon/Reporunner/reporunner/packages/backend/src/services/monitoring/performancemonitor/PerformanceMonitorService.ts (Line 120:25 - Line 131:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn162" onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn162" onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup162"><code class="language-typescript text-sm text-gray-800">.execute(input);
  }

  async for(input: any): Promise&lt;any&gt; {
    return this.forUseCase.execute(input);
  }

  async if(input: any): Promise&lt;any&gt; {
    return this.ifUseCase.execute(input);
  }

  async stop</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/validators/workflowValidators.ts (Line 53:2 - Line 64:9), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/validators/workflowValidators.ts (Line 25:7 - Line 36:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn163" onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn163" onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup163"><code class="language-typescript text-sm text-gray-800">)
    .trim()
    .isLength({ min: 1, max: 100 })
    .withMessage('Workflow name must be between 1 and 100 characters'),

  body('description')
    .optional()
    .trim()
    .isLength({ max: 500 })
    .withMessage('Description must not exceed 500 characters'),

  body('nodes').optional</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/WorkflowService.ts (Line 285:7 - Line 295:6), /home/margon/Reporunner/reporunner/packages/backend/src/domains/workflows/services/WorkflowService.ts (Line 94:7 - Line 104:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn164" onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn164" onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup164"><code class="language-typescript text-sm text-gray-800">) {
    const workflow = await this.workflowRepository.findOne({
      _id: id,
      $or: [{ userId }, { isPublic: true }],
    });

    if (!workflow) {
      throw new AppError('Workflow not found', 404);
    }

    const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/controllers/NodeExecutionController.ts (Line 16:2 - Line 22:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/oauth/controllers/OAuthController.ts (Line 16:2 - Line 22:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn165" onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn165" onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup165"><code class="language-typescript text-sm text-gray-800">= async (req: Request, res: Response) =&gt; {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      throw new AppError('Validation failed', 400);
    }

    const userId = (req as any).user?.id;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 225:7 - Line 242:19), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 186:5 - Line 203:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn166" onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn166" onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup166"><code class="language-typescript text-sm text-gray-800">;

    if (!sessionId) {
      res.status(400).json(ApiResponse.error('Session ID is required'));
      return;
    }

    const session = await CollaborationSession.findOne({
      sessionId,
      isActive: true,
    });

    if (!session) {
      res.status(404).json(ApiResponse.error('Session not found'));
      return;
    }

    // End the session</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 203:7 - Line 216:6), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 151:5 - Line 164:53)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn167" onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn167" onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup167"><code class="language-typescript text-sm text-gray-800">;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 283:44 - Line 299:33), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 238:38 - Line 254:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn168" onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn168" onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup168"><code class="language-typescript text-sm text-gray-800">));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    // Check if user already reacted</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 329:2 - Line 337:7), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 202:2 - Line 210:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn169" onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn169" onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup169"><code class="language-typescript text-sm text-gray-800">= asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { commentId } = req.params;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const userId</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 333:25 - Line 349:14), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 238:38 - Line 254:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn170" onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn170" onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup170"><code class="language-typescript text-sm text-gray-800">));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    const reactionIndex</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 373:5 - Line 392:3), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 330:7 - Line 254:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn171" onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn171" onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup171"><code class="language-typescript text-sm text-gray-800">;

    if (!commentId) {
      res.status(400).json(ApiResponse.error('Comment ID is required'));
      return;
    }

    const userId = (req as any).user?.id;
    if (!userId) {
      res.status(401).json(ApiResponse.error('Authentication required'));
      return;
    }

    const comment = await Comment.findById(commentId);
    if (!comment) {
      res.status(404).json(ApiResponse.error('Comment not found'));
      return;
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/CommentController.ts (Line 418:2 - Line 430:25), /home/margon/Reporunner/reporunner/packages/backend/src/domains/collaboration/controllers/SessionController.ts (Line 259:2 - Line 272:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn172" onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn172" onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup172"><code class="language-typescript text-sm text-gray-800">= asyncHandler(async (req: Request, res: Response): Promise&lt;void&gt; =&gt; {
    const { workflowId } = req.params;
    const { dateRange = 7 } = req.query; // days

    if (!workflowId) {
      res.status(400).json(ApiResponse.error('Workflow ID is required'));
      return;
    }

    const startDate = new Date();
    startDate.setDate(startDate.getDate() - Number(dateRange));

    // Get comment analytics</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/controllers/AuthController.ts (Line 46:9 - Line 57:18), /home/margon/Reporunner/reporunner/packages/backend/src/domains/auth/controllers/AuthController.ts (Line 24:2 - Line 35:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn173" onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn173" onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup173"><code class="language-typescript text-sm text-gray-800">);

    // Transform response to match frontend expectations
    const responseData = {
      user: result.user,
      token: result.accessToken, // Frontend expects 'token', backend returns 'accessToken'
      refreshToken: result.refreshToken,
      permissions: result.user.permissions || [],
      sessionId: `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
    };

    logger.info(`User logged in: </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/validators/CustomValidator.ts (Line 9:15 - Line 28:5), /home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/validators/SchemaValidator.ts (Line 7:18 - Line 25:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn174" onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn174" onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup174"><code class="language-typescript text-sm text-gray-800">&gt;;

  constructor(options: ValidationOptions) {
    this.options = {
      validateQuery: false,
      validateBody: true,
      validateParams: false,
      validateHeaders: false,
      validateCookies: false,
      validateFiles: false,
      allowUnknown: false,
      stripUnknown: true,
      abortEarly: true,
      messages: {},
      ...options,
      onError: options.onError || (() =&gt; {}),
      onSuccess: options.onSuccess || (() =&gt; {})
    };

    this</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/rules/ValidationRule.ts (Line 215:11 - Line 223:2), /home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/rules/ValidationRule.ts (Line 74:12 - Line 82:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn175" onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn175" onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup175"><code class="language-typescript text-sm text-gray-800">(
  name: string,
  validateFn: (context: ValidationContext) =&gt; Promise&lt;ValidationResult&gt;,
  options?: {
    description?: string;
    applies?: (context: ValidationContext) =&gt; Promise&lt;boolean&gt;;
    dependencies?: ValidationRule[];
  }
):</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/storage/LocalStorageEngine.ts (Line 14:7 - Line 26:10), /home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/validators/BasicFileValidator.ts (Line 11:2 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn176" onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn176" onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup176"><code class="language-typescript text-sm text-gray-800">;

  constructor(options: UploadOptions) {
    this.options = {
      maxFileSize: 5 * 1024 * 1024,
      maxFiles: 1,
      allowedTypes: ['image/*', 'application/pdf'],
      preserveOriginal: false,
      generateUniqueName: true,
      validateMimeType: true,
      createDirectory: true,
      overwrite: false,
      uploadDir</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/filters/BasicFileFilter.ts (Line 7:14 - Line 19:4), /home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/validators/BasicFileValidator.ts (Line 11:15 - Line 23:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn177" onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn177" onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup177"><code class="language-typescript text-sm text-gray-800">&gt;;

  constructor(options: UploadOptions) {
    this.options = {
      maxFileSize: 5 * 1024 * 1024,
      maxFiles: 1,
      allowedTypes: ['image/*', 'application/pdf'],
      preserveOriginal: false,
      generateUniqueName: true,
      validateMimeType: true,
      createDirectory: true,
      overwrite: false,
      ...</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/filters/BasicFileFilter.ts (Line 59:3 - Line 80:6), /home/margon/Reporunner/reporunner/packages/@reporunner/upload/src/middleware/validators/BasicFileValidator.ts (Line 177:3 - Line 198:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn178" onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn178" onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup178"><code class="language-typescript text-sm text-gray-800">}

  /**
   * Match MIME type against pattern
   */
  private matchMimeType(mime: string, pattern: string): boolean {
    if (pattern === '*/*' || pattern === mime) {
      return true;
    }

    if (pattern.endsWith('/*')) {
      const [typePattern] = pattern.split('/');
      const [type] = mime.split('/');
      return typePattern === type;
    }

    return false;
  }

  /**
   * Validate type-specific size limits
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 128:2 - Line 143:8), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 81:32 - Line 96:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn180" onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn180" onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup180"><code class="language-typescript text-sm text-gray-800">,
      });
    } catch (error) {
      if (error instanceof z.ZodError) {
        res.status(400).json({
          success: false,
          errors: error.errors,
          message: 'Validation failed',
        });
      } else {
        next(error);
      }
    }
  }

  async getById</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 232:7 - Line 243:8), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 201:2 - Line 212:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn181" onclick="toggleCodeBlock('cloneGroup181', 'expandBtn181', 'collapseBtn181')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn181" onclick="toggleCodeBlock('cloneGroup181', 'expandBtn181', 'collapseBtn181')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup181"><code class="language-typescript text-sm text-gray-800">if ((error as any).message?.includes('permissions')) {
        res.status(403).json({
          success: false,
          message: 'Access denied',
        });
      } else {
        next(error);
      }
    }
  }

  async execute</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 319:20 - Line 332:19), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 246:22 - Line 259:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn182" onclick="toggleCodeBlock('cloneGroup182', 'expandBtn182', 'collapseBtn182')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn182" onclick="toggleCodeBlock('cloneGroup182', 'expandBtn182', 'collapseBtn182')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup182"><code class="language-typescript text-sm text-gray-800">.parse(req.body);
      const userId = (req as any).user?.id;

      const workflow = await this.workflowService.get(id);

      if (!workflow) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      if (!this.hasSharePermission</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 422:5 - Line 435:24), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 246:2 - Line 259:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn183" onclick="toggleCodeBlock('cloneGroup183', 'expandBtn183', 'collapseBtn183')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn183" onclick="toggleCodeBlock('cloneGroup183', 'expandBtn183', 'collapseBtn183')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup183"><code class="language-typescript text-sm text-gray-800">;
      const userId = (req as any).user?.id;

      const workflow = await this.workflowService.get(id);

      if (!workflow) {
        res.status(404).json({
          success: false,
          message: 'Workflow not found',
        });
        return;
      }

      // Create a new version</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/services/analytics-service/src/index/analytics-service.ts (Line 81:16 - Line 91:7), /home/margon/Reporunner/reporunner/packages/@reporunner/services/notification-service/src/index/service-core.ts (Line 44:19 - Line 54:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn184" onclick="toggleCodeBlock('cloneGroup184', 'expandBtn184', 'collapseBtn184')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn184" onclick="toggleCodeBlock('cloneGroup184', 'expandBtn184', 'collapseBtn184')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup184"><code class="language-typescript text-sm text-gray-800">,
    private mongoClient: MongoClient,
    eventBus: DistributedEventBus
  ) {
    super();
    this.eventBus = eventBus;
    this.cache = new Redis(config.redis);
    this.db = mongoClient.db(config.mongodb.database);

    // Initialize collections
    this.events</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers/SecurityHeadersMiddleware.ts (Line 112:3 - Line 140:7), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/security-headers/builders/SecurityHeadersBuilder.ts (Line 111:7 - Line 138:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn185" onclick="toggleCodeBlock('cloneGroup185', 'expandBtn185', 'collapseBtn185')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn185" onclick="toggleCodeBlock('cloneGroup185', 'expandBtn185', 'collapseBtn185')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup185"><code class="language-typescript text-sm text-gray-800">frameProtection: {
    enabled: true,
    action: 'DENY'
  },
  contentTypeOptions: {
    enabled: true,
    nosniff: true
  },
  xssProtection: {
    enabled: true,
    mode: '1; mode=block'
  },
  referrerPolicy: {
    enabled: true,
    policy: 'strict-origin-when-cross-origin'
  },
  permissionsPolicy: {
    enabled: true,
    features: {
      geolocation: [&quot;'self'&quot;],
      microphone: [&quot;'none'&quot;],
      camera: [&quot;'none'&quot;],
      payment: [&quot;'self'&quot;],
      usb: [&quot;'none'&quot;]
    }
  }
};

export</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 64:16 - Line 75:14), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 30:9 - Line 41:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn186" onclick="toggleCodeBlock('cloneGroup186', 'expandBtn186', 'collapseBtn186')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn186" onclick="toggleCodeBlock('cloneGroup186', 'expandBtn186', 'collapseBtn186')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup186"><code class="language-typescript text-sm text-gray-800">(name: string, config: any): { success: boolean; data?: any; errors?: any[] } {
    const schema = this.schemas.get(name) || this.schemas.get('base');

    if (!schema) {
      return {
        success: false,
        errors: [{ message: `No schema found for ${name}` }],
      };
    }

    try {
      const partialSchema</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 76:14 - Line 98:6), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/config/configuration-schema/default-configs.ts (Line 41:7 - Line 63:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn187" onclick="toggleCodeBlock('cloneGroup187', 'expandBtn187', 'collapseBtn187')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn187" onclick="toggleCodeBlock('cloneGroup187', 'expandBtn187', 'collapseBtn187')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup187"><code class="language-typescript text-sm text-gray-800">.parse(config);
      return { success: true, data };
    } catch (error: any) {
      if (error instanceof z.ZodError) {
        return {
          success: false,
          errors: error.errors.map((e) =&gt; ({
            path: e.path.join('.'),
            message: e.message,
            code: e.code,
          })),
        };
      }
      return {
        success: false,
        errors: [{ message: error.message }],
      };
    }
  }

  /**
   * Get schema
   */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 18:12 - Line 57:10), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 15:2 - Line 54:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn188" onclick="toggleCodeBlock('cloneGroup188', 'expandBtn188', 'collapseBtn188')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn188" onclick="toggleCodeBlock('cloneGroup188', 'expandBtn188', 'collapseBtn188')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup188"><code class="language-typescript text-sm text-gray-800">);
  }
  
  /**
   * Convert string ID to ObjectId
   */
  protected toObjectId(id: ID): ObjectId {
    return new ObjectId(id as string);
  }
  
  /**
   * Transform repository filter to MongoDB filter
   */
  protected transformFilter(filter: Filter&lt;T&gt; = {}): any {
    // Convert string IDs to ObjectIds in the filter
    const transformed = { ...filter };
    if (transformed._id) {
      if (typeof transformed._id === 'string') {
        transformed._id = this.toObjectId(transformed._id as unknown as ID);
      } else if (typeof transformed._id === 'object') {
        const idFilter = transformed._id as any;
        if (idFilter.$eq) idFilter.$eq = this.toObjectId(idFilter.$eq);
        if (idFilter.$in) idFilter.$in = idFilter.$in.map((id: string) =&gt; this.toObjectId(id as unknown as ID));
      }
    }
    return transformed;
  }
  
  /**
   * Transform repository sort to MongoDB sort
   */
  protected transformSort(sort: Sort&lt;T&gt; = {}): any {
    const transformed: Record&lt;string, 1 | -1&gt; = {};
    for (const [key, value] of Object.entries(sort)) {
      transformed[key] = value === 'desc' || value === -1 ? -1 : 1;
    }
    return transformed;
  }
  
  protected</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 87:9 - Line 134:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 59:2 - Line 106:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn189" onclick="toggleCodeBlock('cloneGroup189', 'expandBtn189', 'collapseBtn189')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn189" onclick="toggleCodeBlock('cloneGroup189', 'expandBtn189', 'collapseBtn189')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup189"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async findOne(filter: Filter&lt;T&gt;): Promise&lt;T | null&gt; {
    return this.wrapError(async () =&gt; {
      return this.collection.findOne(
        this.transformFilter(filter),
        { session: this.session }
      );
    });
  }
  
  async find(filter?: Filter&lt;T&gt;, sort?: Sort&lt;T&gt;, pagination?: Pagination): Promise&lt;T[]&gt; {
    return this.wrapError(async () =&gt; {
      let query = this.collection.find(
        this.transformFilter(filter),
        { session: this.session }
      );
      
      if (sort) {
        query = query.sort(this.transformSort(sort));
      }
      
      if (pagination) {
        query = query.skip(pagination.skip).limit(pagination.limit);
      }
      
      return query.toArray();
    });
  }
  
  async count(filter?: Filter&lt;T&gt;): Promise&lt;number&gt; {
    return this.wrapError(async () =&gt; {
      return this.collection.countDocuments(
        this.transformFilter(filter),
        { session: this.session }
      );
    });
  }
  
  async create(data: Partial&lt;T&gt;): Promise&lt;T&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.insertOne(
        data as any,
        { session: this.session }
      );
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 136:7 - Line 146:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 106:2 - Line 116:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn190" onclick="toggleCodeBlock('cloneGroup190', 'expandBtn190', 'collapseBtn190')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn190" onclick="toggleCodeBlock('cloneGroup190', 'expandBtn190', 'collapseBtn190')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup190"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async createMany(data: Partial&lt;T&gt;[]): Promise&lt;T[]&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.insertMany(
        data as any[],
        { session: this.session }
      );
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 151:9 - Line 166:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 119:2 - Line 133:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn191" onclick="toggleCodeBlock('cloneGroup191', 'expandBtn191', 'collapseBtn191')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn191" onclick="toggleCodeBlock('cloneGroup191', 'expandBtn191', 'collapseBtn191')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup191"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async update(id: ID, data: Partial&lt;T&gt;): Promise&lt;T&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.findOneAndUpdate(
        { _id: this.toObjectId(id) } as any,
        { $set: data },
        { 
          session: this.session,
          returnDocument: 'after'
        }
      );
      
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 168:7 - Line 190:3), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 133:2 - Line 154:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn192" onclick="toggleCodeBlock('cloneGroup192', 'expandBtn192', 'collapseBtn192')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn192" onclick="toggleCodeBlock('cloneGroup192', 'expandBtn192', 'collapseBtn192')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup192"><code class="language-typescript text-sm text-gray-800">;
    });
  }
  
  async updateMany(filter: Filter&lt;T&gt;, data: Partial&lt;T&gt;): Promise&lt;number&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.updateMany(
        this.transformFilter(filter),
        { $set: data },
        { session: this.session }
      );
      return result.modifiedCount;
    });
  }
  
  async delete(id: ID): Promise&lt;boolean&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.deleteOne(
        { _id: this.toObjectId(id) } as any,
        { session: this.session }
      );
      
      if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/cached-mongodb-repository.ts (Line 194:7 - Line 224:2), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/repository/mongodb/mongodb-repository.ts (Line 154:7 - Line 184:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn193" onclick="toggleCodeBlock('cloneGroup193', 'expandBtn193', 'collapseBtn193')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn193" onclick="toggleCodeBlock('cloneGroup193', 'expandBtn193', 'collapseBtn193')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup193"><code class="language-typescript text-sm text-gray-800">return result.deletedCount &gt; 0;
    });
  }
  
  async deleteMany(filter: Filter&lt;T&gt;): Promise&lt;number&gt; {
    return this.wrapError(async () =&gt; {
      const result = await this.collection.deleteMany(
        this.transformFilter(filter),
        { session: this.session }
      );
      return result.deletedCount;
    });
  }
  
  protected async beginTransactionImpl(): Promise&lt;void&gt; {
    this.session = await this.collection.db.client.startSession();
    await this.session.startTransaction();
  }
  
  protected async commitTransactionImpl(): Promise&lt;void&gt; {
    await this.session?.commitTransaction();
    await this.session?.endSession();
    this.session = null;
  }
  
  protected async rollbackTransactionImpl(): Promise&lt;void&gt; {
    await this.session?.abortTransaction();
    await this.session?.endSession();
    this.session = null;
  }
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/ai/src/providers/openai-provider/openai-provider.ts (Line 84:2 - Line 91:7), /home/margon/Reporunner/reporunner/packages/@reporunner/ai/src/providers/openai-provider/openai-provider.ts (Line 44:2 - Line 51:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn194" onclick="toggleCodeBlock('cloneGroup194', 'expandBtn194', 'collapseBtn194')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn194" onclick="toggleCodeBlock('cloneGroup194', 'expandBtn194', 'collapseBtn194')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup194"><code class="language-typescript text-sm text-gray-800">= await this.client.chat.completions.create({
        model: params.model,
        messages,
        temperature: params.temperature,
        max_tokens: params.maxTokens,
        stop: params.stopSequences,
        tools: params.tools ? this.formatTools(params.tools) : undefined,
        stream</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/shared/src/base/optimized/unified-service-base.ts (Line 94:5 - Line 105:13), /home/margon/Reporunner/reporunner/packages/shared/src/base/optimized/unified-service-base.ts (Line 80:3 - Line 91:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn195" onclick="toggleCodeBlock('cloneGroup195', 'expandBtn195', 'collapseBtn195')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn195" onclick="toggleCodeBlock('cloneGroup195', 'expandBtn195', 'collapseBtn195')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup195"><code class="language-typescript text-sm text-gray-800">);
      if (!result) {
        res.status(404).json({ error: 'Not found' });
        return;
      }
      res.json({ success: true, data: result });
    } catch (error) {
      res.status(500).json({ error: error.message });
    }
  }

  async handleDelete</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/types/credentials.ts (Line 241:5 - Line 272:5), /home/margon/Reporunner/reporunner/packages/frontend/src/core/types/credentials.ts (Line 196:5 - Line 227:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn196" onclick="toggleCodeBlock('cloneGroup196', 'expandBtn196', 'collapseBtn196')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn196" onclick="toggleCodeBlock('cloneGroup196', 'expandBtn196', 'collapseBtn196')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup196"><code class="language-typescript text-sm text-gray-800">,
    properties: [
      {
        displayName: 'Host',
        name: 'host',
        type: 'string',
        required: true,
        default: 'localhost',
      },
      {
        displayName: 'Database',
        name: 'database',
        type: 'string',
        required: true,
      },
      {
        displayName: 'User',
        name: 'user',
        type: 'string',
        required: true,
      },
      {
        displayName: 'Password',
        name: 'password',
        type: 'password',
        required: true,
      },
      {
        displayName: 'Port',
        name: 'port',
        type: 'number',
        default: 3306</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/authStore.ts (Line 62:9 - Line 74:22), /home/margon/Reporunner/reporunner/packages/frontend/src/core/stores/authStore.ts (Line 41:12 - Line 53:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn197" onclick="toggleCodeBlock('cloneGroup197', 'expandBtn197', 'collapseBtn197')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn197" onclick="toggleCodeBlock('cloneGroup197', 'expandBtn197', 'collapseBtn197')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup197"><code class="language-typescript text-sm text-gray-800">);
          set({
            user: authResponse.user,
            isAuthenticated: true,
            isLoading: false,
            error: null,
          });
        } catch (error: any) {
          set({
            user: null,
            isAuthenticated: false,
            isLoading: false,
            error: error.message || 'Registration failed'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/schemas/WorkflowSchemas.ts (Line 92:11 - Line 100:60), /home/margon/Reporunner/reporunner/packages/frontend/src/core/schemas/WorkflowSchemas.ts (Line 83:15 - Line 92:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn198" onclick="toggleCodeBlock('cloneGroup198', 'expandBtn198', 'collapseBtn198')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn198" onclick="toggleCodeBlock('cloneGroup198', 'expandBtn198', 'collapseBtn198')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup198"><code class="language-typescript text-sm text-gray-800">: z
      .object({
        totalExecutions: z.number().int().min(0),
        successfulExecutions: z.number().int().min(0),
        failedExecutions: z.number().int().min(0),
        avgDuration: z.number().min(0).optional(),
        successRate: z.number().min(0).max(100).optional(),
      })
      .optional(), // Backend returns &quot;statistics&quot; instead of &quot;executionStats&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/registry.ts (Line 233:2 - Line 255:2), /home/margon/Reporunner/reporunner/packages/frontend/src/core/nodes/registry.ts (Line 176:2 - Line 198:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn199" onclick="toggleCodeBlock('cloneGroup199', 'expandBtn199', 'collapseBtn199')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn199" onclick="toggleCodeBlock('cloneGroup199', 'expandBtn199', 'collapseBtn199')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup199"><code class="language-typescript text-sm text-gray-800">{
        displayName: enhancedNode.displayName || enhancedNode.name,
        name: enhancedNode.name,
        icon: enhancedNode.icon || 'fa:envelope',
        group: [enhancedNode.type === 'trigger' ? 'trigger' : 'transform'],
        version: 1,
        description: enhancedNode.description || '',
        defaults: {
          name: enhancedNode.displayName || enhancedNode.name,
          color: (enhancedNode as any).color || '#DD4B39',
        },
        inputs: (enhancedNode.inputs || [{ type: 'main' }]).map((input) =&gt;
          typeof input === 'string' ? input : input.type || 'main'
        ),
        outputs: (enhancedNode.outputs || [{ type: 'main' }]).map((output) =&gt;
          typeof output === 'string' ? output : output.type || 'main'
        ),
        categories: enhancedNode.codex?.categories || [],
        properties: [], // Enhanced nodes use different property system
        // Preserve custom UI components from enhanced nodes
        customBodyComponent: (enhancedNode as any).customBodyComponent,
        // customPropertiesPanel: (enhancedNode as any).customPropertiesPanel,
      })</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 94:9 - Line 106:22), /home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 73:12 - Line 85:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn200" onclick="toggleCodeBlock('cloneGroup200', 'expandBtn200', 'collapseBtn200')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn200" onclick="toggleCodeBlock('cloneGroup200', 'expandBtn200', 'collapseBtn200')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup200"><code class="language-typescript text-sm text-gray-800">, LoginApiResponseSchema);

      // Store tokens in localStorage
      if (response.token) {
        localStorage.setItem(configService.get('auth').tokenKey, response.token);
      }
      if (response.refreshToken) {
        localStorage.setItem(configService.get('auth').refreshTokenKey, response.refreshToken);
      }

      return response;
    } catch (error) {
      throw new ApiClientError('Registration failed'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 259:8 - Line 274:27), /home/margon/Reporunner/reporunner/packages/frontend/src/core/api/AuthApiService.ts (Line 231:16 - Line 246:31)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn201" onclick="toggleCodeBlock('cloneGroup201', 'expandBtn201', 'collapseBtn201')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn201" onclick="toggleCodeBlock('cloneGroup201', 'expandBtn201', 'collapseBtn201')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup201"><code class="language-typescript text-sm text-gray-800">,
      });

      // Backend returns: { success, data: { user: UserProfile } }
      // Extract user from nested structure
      const responseData = response.data as any;
      const userData = responseData.data?.user || responseData.user;

      if (!userData) {
        throw new ApiClientError('Invalid profile response structure', 422, 'INVALID_RESPONSE');
      }

      // Transform and validate the user data
      return this.transformUserProfile(userData);
    } catch (error) {
      throw new ApiClientError('Failed to update profile'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/hooks/useSmartMenuPosition.ts (Line 155:2 - Line 166:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/hooks/useSmartMenuPosition.ts (Line 76:4 - Line 87:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn233" onclick="toggleCodeBlock('cloneGroup233', 'expandBtn233', 'collapseBtn233')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn233" onclick="toggleCodeBlock('cloneGroup233', 'expandBtn233', 'collapseBtn233')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup233"><code class="language-typescript text-sm text-gray-800">;

      // Calculate available space in each direction
      const spaceRight = viewport.width - triggerRect.right;
      const spaceLeft = triggerRect.left;
      const spaceBelow = viewport.height - triggerRect.bottom;

      let newPosition: MenuPosition = {};
      let strategy: typeof positionStrategy = 'right';

      // Try positioning to the right of the button (preferred)
      if (spaceRight &gt;= menuRect</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/ValidationMiddleware.ts (Line 89:5 - Line 101:5), /home/margon/Reporunner/reporunner/packages/@reporunner/validation/src/middleware/validators/SchemaValidator.ts (Line 10:5 - Line 22:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn234" onclick="toggleCodeBlock('cloneGroup234', 'expandBtn234', 'collapseBtn234')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn234" onclick="toggleCodeBlock('cloneGroup234', 'expandBtn234', 'collapseBtn234')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup234"><code class="language-typescript text-sm text-gray-800">this.options = {
      validateQuery: false,
      validateBody: true,
      validateParams: false,
      validateHeaders: false,
      validateCookies: false,
      validateFiles: false,
      allowUnknown: false,
      stripUnknown: true,
      abortEarly: true,
      messages: {},
      ...options,
      onError: options.onError || this</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 638:13 - Line 654:8), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 618:6 - Line 634:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn235" onclick="toggleCodeBlock('cloneGroup235', 'expandBtn235', 'collapseBtn235')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn235" onclick="toggleCodeBlock('cloneGroup235', 'expandBtn235', 'collapseBtn235')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup235"><code class="language-typescript text-sm text-gray-800">: {
    rules: [
      {
        field: 'email',
        type: 'email',
        required: true,
        normalizeEmail: true,
        toLowerCase: true,
        sanitize: true,
      },
      {
        field: 'password',
        type: 'string',
        required: true,
        minLength: 8,
        maxLength: 128,
        pattern</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 527:7 - Line 532:6), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/file-upload.middleware.ts (Line 490:2 - Line 495:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn236" onclick="toggleCodeBlock('cloneGroup236', 'expandBtn236', 'collapseBtn236')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn236" onclick="toggleCodeBlock('cloneGroup236', 'expandBtn236', 'collapseBtn236')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup236"><code class="language-typescript text-sm text-gray-800">&gt;) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    const files = req.file ? [req.file] : (req.files as Express.Multer.File[]) || [];

    for (const file of files) {
      const limit</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 311:14 - Line 322:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 282:12 - Line 293:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn237" onclick="toggleCodeBlock('cloneGroup237', 'expandBtn237', 'collapseBtn237')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn237" onclick="toggleCodeBlock('cloneGroup237', 'expandBtn237', 'collapseBtn237')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup237"><code class="language-typescript text-sm text-gray-800">: async (req: Request, res: Response) =&gt; {
      if (!req.user) {
        return res.status(401).json({
          success: false,
          error: {
            code: ERROR_CODES.UNAUTHORIZED,
            message: 'Not authenticated',
          },
        });
      }

      const {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 380:20 - Line 394:12), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/auth.middleware.ts (Line 349:14 - Line 362:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn238" onclick="toggleCodeBlock('cloneGroup238', 'expandBtn238', 'collapseBtn238')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn238" onclick="toggleCodeBlock('cloneGroup238', 'expandBtn238', 'collapseBtn238')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup238"><code class="language-typescript text-sm text-gray-800">: string[]) {
  return (req: Request, res: Response, next: NextFunction): void =&gt; {
    if (!req.user) {
      res.status(401).json({
        success: false,
        error: {
          code: ERROR_CODES.UNAUTHORIZED,
          message: 'Authentication required',
        },
      });
      return;
    }

    if (
      !req.user.permissions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 336:15 - Line 342:13), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 323:17 - Line 329:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn239" onclick="toggleCodeBlock('cloneGroup239', 'expandBtn239', 'collapseBtn239')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn239" onclick="toggleCodeBlock('cloneGroup239', 'expandBtn239', 'collapseBtn239')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup239"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('node:moved'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 349:14 - Line 355:13), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 323:17 - Line 329:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn240" onclick="toggleCodeBlock('cloneGroup240', 'expandBtn240', 'collapseBtn240')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn240" onclick="toggleCodeBlock('cloneGroup240', 'expandBtn240', 'collapseBtn240')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup240"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('edge:added'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 362:17 - Line 368:15), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 323:17 - Line 329:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn241" onclick="toggleCodeBlock('cloneGroup241', 'expandBtn241', 'collapseBtn241')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn241" onclick="toggleCodeBlock('cloneGroup241', 'expandBtn241', 'collapseBtn241')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup241"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('edge:updated'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 375:17 - Line 381:15), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 323:17 - Line 329:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn242" onclick="toggleCodeBlock('cloneGroup242', 'expandBtn242', 'collapseBtn242')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn242" onclick="toggleCodeBlock('cloneGroup242', 'expandBtn242', 'collapseBtn242')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup242"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: any): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('edge:deleted'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 451:17 - Line 458:17), /home/margon/Reporunner/reporunner/packages/@reporunner/real-time/src/socket-server/socket-manager.ts (Line 436:18 - Line 443:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn243" onclick="toggleCodeBlock('cloneGroup243', 'expandBtn243', 'collapseBtn243')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn243" onclick="toggleCodeBlock('cloneGroup243', 'expandBtn243', 'collapseBtn243')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup243"><code class="language-typescript text-sm text-gray-800">(socket: Socket, data: { nodeId: string; field: string }): void {
    const workflowId = socket.data.workflowId;
    const user = socket.data.user as IJwtPayload;
    const sessionId = socket.data.sessionId;

    if (!workflowId) return;

    socket.to(`workflow:${workflowId}`).emit('typing:stopped'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/base/base-integration.ts (Line 298:3 - Line 308:2), /home/margon/Reporunner/reporunner/packages/@reporunner/integrations/src/webhook/webhook-manager.ts (Line 260:3 - Line 270:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn244" onclick="toggleCodeBlock('cloneGroup244', 'expandBtn244', 'collapseBtn244')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn244" onclick="toggleCodeBlock('cloneGroup244', 'expandBtn244', 'collapseBtn244')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup244"><code class="language-typescript text-sm text-gray-800">private async executeWithRetry&lt;T&gt;(
    fn: () =&gt; Promise&lt;T&gt;,
    maxRetries: number = 3,
    delay: number = 1000
  ): Promise&lt;T&gt; {
    let lastError: any;

    for (let attempt = 0; attempt &lt;= maxRetries; attempt++) {
      try {
        return await fn();
      } catch (error:</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/validation.ts (Line 63:15 - Line 74:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/validation.ts (Line 33:14 - Line 44:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn245" onclick="toggleCodeBlock('cloneGroup245', 'expandBtn245', 'collapseBtn245')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn245" onclick="toggleCodeBlock('cloneGroup245', 'expandBtn245', 'collapseBtn245')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup245"><code class="language-typescript text-sm text-gray-800">(schema: SchemaDefinition) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;
    const validator = new SchemaValidator(schema);

    descriptor.value = async function (...args: any[]) {
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/core.ts (Line 32:6 - Line 43:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/core.ts (Line 4:4 - Line 16:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn246" onclick="toggleCodeBlock('cloneGroup246', 'expandBtn246', 'collapseBtn246')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn246" onclick="toggleCodeBlock('cloneGroup246', 'expandBtn246', 'collapseBtn246')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup246"><code class="language-typescript text-sm text-gray-800">(logger?: Logger) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const className = target.constructor.name;

    descriptor.value = async function (...args: any[]) {
      const methodLogger = logger || new Logger(`${className}:${propertyKey}`);
      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 34:7 - Line 50:12), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 4:2 - Line 20:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn247" onclick="toggleCodeBlock('cloneGroup247', 'expandBtn247', 'collapseBtn247')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn247" onclick="toggleCodeBlock('cloneGroup247', 'expandBtn247', 'collapseBtn247')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup247"><code class="language-typescript text-sm text-gray-800">) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      if (!user.permissions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 64:5 - Line 80:48), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 4:2 - Line 20:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn248" onclick="toggleCodeBlock('cloneGroup248', 'expandBtn248', 'collapseBtn248')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn248" onclick="toggleCodeBlock('cloneGroup248', 'expandBtn248', 'collapseBtn248')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup248"><code class="language-typescript text-sm text-gray-800">) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      // Extract resource ID from args using the path</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 110:9 - Line 126:43), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 34:11 - Line 20:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn249" onclick="toggleCodeBlock('cloneGroup249', 'expandBtn249', 'collapseBtn249')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn249" onclick="toggleCodeBlock('cloneGroup249', 'expandBtn249', 'collapseBtn249')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup249"><code class="language-typescript text-sm text-gray-800">: string) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      // Extract action from method name or args</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 146:6 - Line 162:6), /home/margon/Reporunner/reporunner/packages/@reporunner/core/src/decorators/auth.ts (Line 34:11 - Line 20:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn250" onclick="toggleCodeBlock('cloneGroup250', 'expandBtn250', 'collapseBtn250')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn250" onclick="toggleCodeBlock('cloneGroup250', 'expandBtn250', 'collapseBtn250')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup250"><code class="language-typescript text-sm text-gray-800">: string) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const originalMethod = descriptor.value;
    const methodName = propertyKey;

    descriptor.value = async function (...args: any[]) {
      const user = this.currentUser || args[0]?.user;
      
      if (!user) {
        throw new AuthenticationError('No authenticated user found');
      }

      const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/middleware/rbac-middleware.ts (Line 57:2 - Line 66:16), /home/margon/Reporunner/reporunner/packages/@reporunner/auth/src/middleware/rbac-middleware.ts (Line 22:11 - Line 32:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn251" onclick="toggleCodeBlock('cloneGroup251', 'expandBtn251', 'collapseBtn251')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn251" onclick="toggleCodeBlock('cloneGroup251', 'expandBtn251', 'collapseBtn251')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup251"><code class="language-typescript text-sm text-gray-800">) {
    return async (req: AuthenticatedRequest, res: Response, next: NextFunction) =&gt; {
      try {
        if (!req.userId) {
          return res.status(401).json({ error: 'Not authenticated' });
        }

        const userRoleIds = await config.getUserRoles(req.userId);
        const userRoles = config.roles.filter((role) =&gt; userRoleIds.includes(role.id));
        const hasRequiredRole</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/api/src/middleware/validation.ts (Line 66:18 - Line 75:2), /home/margon/Reporunner/reporunner/packages/@reporunner/security/src/middleware/validation.middleware.ts (Line 316:24 - Line 325:27)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn252" onclick="toggleCodeBlock('cloneGroup252', 'expandBtn252', 'collapseBtn252')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn252" onclick="toggleCodeBlock('cloneGroup252', 'expandBtn252', 'collapseBtn252')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup252"><code class="language-typescript text-sm text-gray-800">${rule.enum.join(', ')}`);
      }

      // Custom validation
      if (rule.custom) {
        const result = rule.custom(value);
        if (typeof result === 'string') {
          errors.push(result);
        } else if (!result) {
          errors.push(`</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/core/src/schemas/index.ts (Line 21:2 - Line 27:2), /home/margon/Reporunner/reporunner/packages/@reporunner/services/workflow-service/src/controllers/workflow.controller.ts (Line 21:5 - Line 28:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn253" onclick="toggleCodeBlock('cloneGroup253', 'expandBtn253', 'collapseBtn253')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn253" onclick="toggleCodeBlock('cloneGroup253', 'expandBtn253', 'collapseBtn253')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup253"><code class="language-typescript text-sm text-gray-800">z.object({
  id: z.string(),
  source: z.string(),
  target: z.string(),
  sourceHandle: z.string().optional(),
  targetHandle: z.string().optional(),
});</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/types/workflow.ts (Line 27:2 - Line 38:2), /home/margon/Reporunner/reporunner/packages/backend/src/domains/executions/interfaces/index.ts (Line 5:2 - Line 16:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn254" onclick="toggleCodeBlock('cloneGroup254', 'expandBtn254', 'collapseBtn254')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn254" onclick="toggleCodeBlock('cloneGroup254', 'expandBtn254', 'collapseBtn254')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup254"><code class="language-typescript text-sm text-gray-800">{
  id: string;
  workflowId: string;
  userId: string;
  status: 'pending' | 'running' | 'success' | 'error' | 'cancelled';
  startedAt: Date;
  completedAt?: Date;
  executedNodes: string[];
  currentNode?: string;
  results: Map&lt;string, any&gt;;
  error?: string;
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 212:15 - Line 219:6), /home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 175:7 - Line 182:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn255" onclick="toggleCodeBlock('cloneGroup255', 'expandBtn255', 'collapseBtn255')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn255" onclick="toggleCodeBlock('cloneGroup255', 'expandBtn255', 'collapseBtn255')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup255"><code class="language-typescript text-sm text-gray-800">): Promise&lt;void&gt; {
    const workflowId = this.socketToWorkflow.get(socketId);
    const userId = this.socketToUser.get(socketId);

    if (!workflowId || !userId) return;

    const workflowUsers = this.workflowPresence.get(workflowId);
    const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 251:3 - Line 261:10), /home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 175:7 - Line 222:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn256" onclick="toggleCodeBlock('cloneGroup256', 'expandBtn256', 'collapseBtn256')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn256" onclick="toggleCodeBlock('cloneGroup256', 'expandBtn256', 'collapseBtn256')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup256"><code class="language-typescript text-sm text-gray-800">): Promise&lt;void&gt; {
    const workflowId = this.socketToWorkflow.get(socketId);
    const userId = this.socketToUser.get(socketId);

    if (!workflowId || !userId) return;

    const workflowUsers = this.workflowPresence.get(workflowId);
    const userPresence = workflowUsers?.get(userId);

    if (userPresence) {
      userPresence.selection</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 288:13 - Line 299:11), /home/margon/Reporunner/reporunner/packages/backend/src/services/CursorTrackingService.ts (Line 250:12 - Line 222:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn257" onclick="toggleCodeBlock('cloneGroup257', 'expandBtn257', 'collapseBtn257')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn257" onclick="toggleCodeBlock('cloneGroup257', 'expandBtn257', 'collapseBtn257')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup257"><code class="language-typescript text-sm text-gray-800">]
  ): Promise&lt;void&gt; {
    const workflowId = this.socketToWorkflow.get(socketId);
    const userId = this.socketToUser.get(socketId);

    if (!workflowId || !userId) return;

    const workflowUsers = this.workflowPresence.get(workflowId);
    const userPresence = workflowUsers?.get(userId);

    if (userPresence) {
      userPresence.activeArea</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 144:2 - Line 153:36), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 102:2 - Line 111:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn258" onclick="toggleCodeBlock('cloneGroup258', 'expandBtn258', 'collapseBtn258')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn258" onclick="toggleCodeBlock('cloneGroup258', 'expandBtn258', 'collapseBtn258')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup258"><code class="language-typescript text-sm text-gray-800">{
    requestId: req.id,
    method: req.method,
    url: req.originalUrl,
    userAgent: req.get('User-Agent'),
    ip: req.ip,
    userId: (req as any).user?.id,
  });

  // Log detailed request information</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 162:7 - Line 175:16), /home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/DebugTools.ts (Line 490:6 - Line 503:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn259" onclick="toggleCodeBlock('cloneGroup259', 'expandBtn259', 'collapseBtn259')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn259" onclick="toggleCodeBlock('cloneGroup259', 'expandBtn259', 'collapseBtn259')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup259"><code class="language-typescript text-sm text-gray-800">,
      body: req.body,
    },
  });

  // Intercept response
  const originalSend = res.send;
  res.send = function (data: any) {
    if (req.debugSession) {
      debugTools.addDebugEvent(req.debugSession, {
        timestamp: Date.now(),
        type: 'log',
        level: 'debug',
        message: 'Response sent'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/debugging.ts (Line 175:16 - Line 194:4), /home/margon/Reporunner/reporunner/packages/backend/src/services/debugging/DebugTools.ts (Line 503:21 - Line 518:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn260" onclick="toggleCodeBlock('cloneGroup260', 'expandBtn260', 'collapseBtn260')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn260" onclick="toggleCodeBlock('cloneGroup260', 'expandBtn260', 'collapseBtn260')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup260"><code class="language-typescript text-sm text-gray-800">,
        data: {
          statusCode: res.statusCode,
          headers: res.getHeaders(),
          body: data,
        },
      });

      debugTools.endDebugSession(req.debugSession);
    }

    return originalSend.call(this, data);
  };

  next();
}

/**
 * Error tracking middleware
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 158:2 - Line 170:53), /home/margon/Reporunner/reporunner/packages/backend/src/middleware/auth.ts (Line 131:11 - Line 143:45)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn261" onclick="toggleCodeBlock('cloneGroup261', 'expandBtn261', 'collapseBtn261')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn261" onclick="toggleCodeBlock('cloneGroup261', 'expandBtn261', 'collapseBtn261')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup261"><code class="language-typescript text-sm text-gray-800">) =&gt; {
    return async (req: Request, _res: Response, next: NextFunction): Promise&lt;void&gt; =&gt; {
      try {
        if (!req.user) {
          throw new AppError('Authentication required', 401);
        }

        // Super admin has all permissions
        if (req.user.role === 'super_admin') {
          return next();
        }

        // Check if user has any of the required permissions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/testing.ts (Line 160:8 - Line 187:7), /home/margon/Reporunner/reporunner/packages/@reporunner/dev-tools/src/testing.ts (Line 43:6 - Line 70:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn262" onclick="toggleCodeBlock('cloneGroup262', 'expandBtn262', 'collapseBtn262')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn262" onclick="toggleCodeBlock('cloneGroup262', 'expandBtn262', 'collapseBtn262')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup262"><code class="language-typescript text-sm text-gray-800">);
      const duration = Date.now() - startTime;

      if (testCase.expectedOutput) {
        const isMatch = JSON.stringify(actualOutput) === JSON.stringify(testCase.expectedOutput);

        if (!isMatch) {
          return {
            testCaseId: testCase.id,
            status: 'failed',
            duration,
            actualOutput,
            assertion: 'Output does not match expected',
          };
        }
      }

      return {
        testCaseId: testCase.id,
        status: 'passed',
        duration,
        actualOutput,
      };
    } catch (error) {
      const duration = Date.now() - startTime;
      const errorMessage = error instanceof Error ? error.message : String(error);

      return</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="javascript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">javascript</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 363:7 - Line 432:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 315:17 - Line 337:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup0"><code class="language-javascript text-sm text-gray-800">${output.id}`}&gt;
            {/* Connection Line for Standard Outputs */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Draggable Plus Icon Handle for Standard Outputs */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (AI Agent only) */}
      {isAIAgent &amp;&amp;
        !hasOutgoingConnection &amp;&amp;
        config.outputs?.map((output) =&gt; (
          &lt;React.Fragment key={`plus-${output.id}`}&gt;
            {/* Connection Line for Output */}
            &lt;div
              className=&quot;absolute w-14 h-px bg-gray-400&quot;
              style={{
                top: output.position.top || '50%',
                right: '-50px',
                transform: 'translateY(-50%)',
                zIndex: -1,
              }}
            /&gt;
            {/* Plus Icon Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 250:2 - Line 264:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 215:7 - Line 231:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup6"><code class="language-javascript text-sm text-gray-800">}
            onChange={onChange}
            className=&quot;ant-select-multiple&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            tagRender={(</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 410:5 - Line 488:51), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 334:14 - Line 438:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup13"><code class="language-javascript text-sm text-gray-800">}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// AI Agent data condition view
const AIConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const aiFields = [
    { key: 'output', label: 'AI Output', value: data.output },
    { key: 'provider', label: 'Provider', value: data.provider },
    { key: 'model', label: 'Model', value: data.model },
    { key: 'usage', label: 'Token Usage', value: data.usage },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-orange-400 mb-2&quot;&gt;
        🤖 AI response fields available for conditions:
      &lt;/div&gt;
      {aiFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Generic data condition view
const GenericConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;📊 Data fields available for conditions:&lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Reusable field row component
const FieldRow: React.FC&lt;{
  fieldKey: string;
  label: string;
  value: any;
  isSelected: boolean;
  onSelect: (field: string) =&gt; void;
}&gt; = ({ fieldKey, label, value, isSelected, onSelect }) =&gt; {
  const displayValue =
    typeof value === 'string' &amp;&amp; value.length &gt; 100 ? `${value.substring(0, 100)}...` : value;

  return (
    &lt;div
      className={`p-3 rounded border cursor-pointer transition-all </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 401:23 - Line 428:16), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 238:17 - Line 256:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup15"><code class="language-javascript text-sm text-gray-800">}
                      onPressEnter={() =&gt; handleReplyToComment(comment.id)}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;SendOutlined /&gt;}
                      onClick={() =&gt; handleReplyToComment(comment.id)}
                      disabled={!replyContents[comment.id]?.trim()}
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Conflicts Tab
  const ConflictsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Conflicts ({activeConflicts.length})
        &lt;/h3&gt;
        {activeConflicts.length &gt; 0 &amp;&amp; &lt;Badge count={activeConflicts</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 298:4 - Line 308:14), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 182:4 - Line 192:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup20"><code class="language-javascript text-sm text-gray-800">}&gt;
              &lt;AreaChart data={performanceHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Performance'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/RegistryNode.tsx (Line 86:9 - Line 292:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 93:9 - Line 299:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup21"><code class="language-javascript text-sm text-gray-800">={Position.Left}
          id=&quot;input_0&quot;
          style={{
            background: '#555',
            width: 10,
            height: 10,
            // No top property - handle will be vertically centered by default
          }}
        /&gt;
      );
    }

    // Output handles
    if (nodeDefinition.outputs?.length &gt; 0) {
      nodeDefinition.outputs.forEach((_, index) =&gt; {
        // For single output, don't set top (centers by default)
        // For multiple outputs, calculate vertical distribution
        const handleStyle: React.CSSProperties = {
          background: '#555',
          width: 10,
          height: 10,
        };

        if (nodeDefinition.outputs.length &gt; 1) {
          handleStyle.top = `${((index + 1) / (nodeDefinition.outputs.length + 1)) * 100}%`;
        }
        // No top property for single output - centers by default

        handles.push(
          &lt;Handle
            key={`output-${index}`}
            type=&quot;source&quot;
            position={Position.Right}
            id={`output_${index}`}
            style={handleStyle}
          /&gt;
        );
      });
    }

    return handles;
  };

  // Simple status indicator logic - integrated into main template

  // Toolbar handlers
  const handlePlay = (_nodeId: string) =&gt; {
    // TODO: Implement play functionality
  };

  const handleStop = (_nodeId: string) =&gt; {
    // TODO: Implement stop functionality
  };

  const handleDelete = (_nodeId: string) =&gt; {
    data.onDelete?.();
  };

  const handleMenuToggle = () =&gt; {
    setShowMenu(!showMenu);
  };

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    // Handle double-click to open properties panel
    event.stopPropagation();
    data.onOpenProperties?.();
  };

  // Render shared node toolbar and menu
  const renderToolbarAndMenu = () =&gt; {
    const toolbarVisible = isHovered; // Show on hover only, not requiring selection

    return (
      &lt;&gt;
        &lt;NodeToolbar
          visible={toolbarVisible}
          onPlay={() =&gt; handlePlay(id)}
          onStop={() =&gt; handleStop(id)}
          onDelete={(e) =&gt; {
            e.stopPropagation();
            handleDelete(id);
          }}
          onMenuToggle={handleMenuToggle}
          menuTriggerRef={menuTriggerRef as React.RefObject&lt;HTMLButtonElement&gt;}
        /&gt;
        {/* Custom dark-themed menu with smart positioning */}
        {showMenu &amp;&amp; (
          &lt;div
            ref={menuRef}
            className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
            style={positionStyles}
            onClick={(e) =&gt; e.stopPropagation()}
          &gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                data.onOpenProperties?.();
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📂&lt;/span&gt; Open
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement test functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🧪&lt;/span&gt; Test
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement copy functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📄&lt;/span&gt; Copy
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement duplicate functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📋&lt;/span&gt; Duplicate
            &lt;/button&gt;
            &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                handleDelete(id);
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🗑️&lt;/span&gt; Delete
            &lt;/button&gt;
          &lt;/div&gt;
        )}
      &lt;/&gt;
    );
  };

  // Check for custom body component
  const CustomBodyComponent = useMemo(() =&gt; {
    if (!nodeDefinition?.customBodyComponent) return null;
    return getCustomBodyComponent(nodeDefinition.customBodyComponent);
  }, [nodeDefinition]);

  // If custom body component exists, use it instead of default rendering
  if (CustomBodyComponent) {
    return (
      &lt;div
        className={`registry-node ${selected ? 'selected' : ''} relative`}
        style={{
          opacity: data.disabled ? 0.5 : 1,
        }}
        onMouseEnter={() =&gt; setIsHovered(true)}
        onMouseLeave={() =&gt; setIsHovered(false)}
        onDoubleClick={handleDoubleClick}
      &gt;
        {/* Custom body components handle their own handles and toolbars internally */}
        &lt;CustomBodyComponent
          nodeId={id}
          nodeData={data}
          selected={selected}
          isHovered={isHovered}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
          onDelete={data.onDelete}
          onEdit={data.onEdit}
          onOpenProperties={data.onOpenProperties}
        /&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div
      className={`registry-node ${selected ? 'selected' : ''} relative`}
      style={{
        opacity: data.disabled ? 0.5 : 1,
      }}
      onMouseEnter={() =&gt; setIsHovered(true)}
      onMouseLeave={() =&gt; setIsHovered(false)}
      onDoubleClick={handleDoubleClick}
    &gt;
      {renderHandles()}
      {renderToolbarAndMenu()}

      {/* Gmail-style Base Template for All Nodes */}
      &lt;div className=&quot;flex flex-col&quot;&gt;
        &lt;div className=&quot;relative&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
            `}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode.tsx (Line 221:10 - Line 436:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/containernode/ContainerNode.tsx (Line 230:10 - Line 445:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup24"><code class="language-javascript text-sm text-gray-800">={cn(
          'relative border-2 rounded-lg transition-all duration-200',
          selected &amp;&amp; 'ring-2 ring-blue-500 ring-opacity-50',
          isResizing &amp;&amp; 'cursor-nw-resize'
        )}
        style={{
          width: config.dimensions.width,
          height: config.dimensions.height,
          backgroundColor: config.style.backgroundColor,
          borderColor: config.style.borderColor,
          borderWidth: config.style.borderWidth,
          borderRadius: config.style.borderRadius,
          opacity: config.style.opacity,
          zIndex: config.style.zIndex,
        }}
        onDrop={handleDrop}
        onDragOver={(e) =&gt; e.preventDefault()}
      &gt;
        {/* Container Header */}
        &lt;div className=&quot;absolute top-0 left-0 right-0 p-2 bg-gray-900 bg-opacity-80 rounded-t-lg&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-lg&quot;&gt;{getContainerIcon()}&lt;/span&gt;
              &lt;span className=&quot;text-sm font-semibold text-white&quot;&gt;{config.name}&lt;/span&gt;
              &lt;Badge
                count={config.children.length}
                size=&quot;small&quot;
                style={{ backgroundColor: '#1890ff' }}
              /&gt;
            &lt;/div&gt;

            &lt;Space size=&quot;small&quot;&gt;
              {state.status === 'running' ? (
                &lt;Tooltip title=&quot;Stop execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;StopOutlined /&gt;}
                    onClick={handleStop}
                    className=&quot;text-red-400 hover:text-red-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              ) : (
                &lt;Tooltip title=&quot;Start execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;PlayCircleOutlined /&gt;}
                    onClick={handleExecute}
                    className=&quot;text-green-400 hover:text-green-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}

              &lt;Dropdown menu={{ items: menuItems }} trigger={['click']} placement=&quot;bottomRight&quot;&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;MoreOutlined /&gt;}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/Dropdown&gt;
            &lt;/Space&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Status */}
        &lt;div className=&quot;absolute top-8 left-2 right-2&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between text-xs&quot;&gt;
            &lt;div className=&quot;flex items-center gap-1&quot;&gt;
              {getStatusIcon()}
              &lt;span className=&quot;text-gray-300 capitalize&quot;&gt;{state.status}&lt;/span&gt;
            &lt;/div&gt;

            {state.currentIteration !== undefined &amp;&amp; (
              &lt;div className=&quot;text-gray-400&quot;&gt;
                {state.currentIteration}/{state.totalIterations || '∞'}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Content Area */}
        &lt;div className=&quot;absolute top-16 left-2 right-2 bottom-2 bg-gray-800 bg-opacity-50 rounded border border-gray-600&quot;&gt;
          &lt;div className=&quot;p-2 h-full overflow-auto&quot;&gt;
            {config.children.length === 0 ? (
              &lt;div className=&quot;flex items-center justify-center h-full text-gray-500&quot;&gt;
                &lt;div className=&quot;text-center&quot;&gt;
                  &lt;div className=&quot;text-2xl mb-2&quot;&gt;📁&lt;/div&gt;
                  &lt;div className=&quot;text-sm&quot;&gt;Drop nodes here&lt;/div&gt;
                  &lt;div className=&quot;text-xs&quot;&gt;to add them to this container&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {config.children.map((childId) =&gt; (
                  &lt;div key={childId} className=&quot;p-1 bg-gray-700 rounded text-xs text-gray-300&quot;&gt;
                    {childId}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Resize Handle */}
        &lt;div
          ref={resizeRef}
          className=&quot;absolute bottom-0 right-0 w-3 h-3 cursor-nw-resize bg-blue-500 opacity-0 hover:opacity-100 transition-opacity&quot;
          onMouseDown={handleMouseDown}
        /&gt;

        {/* Input Handle */}
        &lt;Handle
          type=&quot;target&quot;
          position={Position.Left}
          id=&quot;input&quot;
          className=&quot;w-3 h-3 bg-blue-500 border-2 border-white&quot;
        /&gt;

        {/* Output Handles */}
        &lt;Handle
          type=&quot;source&quot;
          position={Position.Right}
          id=&quot;output&quot;
          className=&quot;w-3 h-3 bg-green-500 border-2 border-white&quot;
        /&gt;
      &lt;/div&gt;

      {/* Configuration Modal */}
      &lt;Modal
        title={`Configure ${config.name}`}
        open={isConfigModalOpen}
        onCancel={() =&gt; setIsConfigModalOpen(false)}
        onOk={() =&gt; configForm.submit()}
        width={600}
      &gt;
        &lt;Form
          form={configForm}
          layout=&quot;vertical&quot;
          initialValues={config.executionConfig}
          onFinish={handleConfigChange}
        &gt;
          {config.type === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopType&quot; label=&quot;Loop Type&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;for&quot;&gt;For Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;while&quot;&gt;While Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;foreach&quot;&gt;For Each&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot;&gt;
                &lt;InputNumber min={1} max={1000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot;&gt;
                &lt;InputNumber min={1} max={20} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;parallelStrategy&quot; label=&quot;Execution Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'conditional' &amp;&amp; (
            &lt;Form.Item name=&quot;conditionExpression&quot; label=&quot;Condition Expression&quot;&gt;
              &lt;Input.TextArea
                placeholder=&quot;Enter JavaScript expression, e.g., $input.value &gt; 10&quot;
                rows={3}
              /&gt;
            &lt;/Form.Item&gt;
          )}

          {config.type === 'try-catch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;retryAttempts&quot; label=&quot;Retry Attempts&quot;&gt;
                &lt;InputNumber min={0} max={10} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;retryDelay&quot; label=&quot;Retry Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;errorHandling&quot; label=&quot;Error Handling&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;stop&quot;&gt;Stop on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;continue&quot;&gt;Continue on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;retry&quot;&gt;Retry on Error&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'batch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;batchSize&quot; label=&quot;Batch Size&quot;&gt;
                &lt;InputNumber min={1} max={100} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;batchDelay&quot; label=&quot;Batch Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/PropertyField.tsx (Line 266:2 - Line 283:14), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/PropertyField.tsx (Line 245:8 - Line 266:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup32"><code class="language-javascript text-sm text-gray-800">}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/DataVisualizationPanel.tsx (Line 157:8 - Line 211:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 195:4 - Line 308:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup34"><code class="language-javascript text-sm text-gray-800">} /&gt;
          &lt;/div&gt;
        );
      default:
        return null;
    }
  };

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
            {title}
            {data &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Data loaded&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {data &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search data fields&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/AIAgentPropertiesPanel.tsx (Line 296:6 - Line 353:26), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/AIAgentPropertiesPanel.tsx (Line 261:6 - Line 296:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup44"><code class="language-javascript text-sm text-gray-800">={{ marginBottom: '16px' }}
      /&gt;

      &lt;Collapse
        items={[
          {
            key: 'performance',
            label: (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ExperimentOutlined /&gt;
                &lt;span&gt;Performance &amp; Sampling&lt;/span&gt;
              &lt;/div&gt;
            ),
            children: (
              &lt;div className=&quot;space-y-4&quot;&gt;
                {advancedProperties.map((property) =&gt; {
                  const shouldShow =
                    !property.displayOptions?.show ||
                    Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
                      values?.includes(formValues[key])
                    );

                  if (!shouldShow) return null;

                  return (
                    &lt;PropertyField
                      key={property.name}
                      property={property}
                      value={formValues[property.name]}
                      onChange={(value) =&gt; handleFieldChange(property.name, value)}
                      errors={errors[property.name]}
                      theme={theme}
                      context={formValues}
                    /&gt;
                  );
                })}
              &lt;/div&gt;
            ),
          },
        ]}
      /&gt;
    &lt;/div&gt;
  );

  const renderTestingTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Alert
        message=&quot;Test Your AI Agent&quot;
        description=&quot;Test your AI agent configuration with sample data.&quot;
        type=&quot;success&quot;
        showIcon
      /&gt;

      &lt;Card size=&quot;small&quot; title=&quot;Quick Test&quot;&gt;
        &lt;div className=&quot;space-y-4&quot;&gt;
          &lt;PropertyField
            property={{
              displayName</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 146:16 - Line 175:29), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 137:2 - Line 156:21)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup46"><code class="language-javascript text-sm text-gray-800">();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyField.tsx (Line 108:6 - Line 439:7), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/PropertyField.tsx (Line 106:6 - Line 437:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup56"><code class="language-javascript text-sm text-gray-800">={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={String</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedNodeToolbar.tsx (Line 296:6 - Line 355:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/EnhancedNodeToolbar.tsx (Line 291:6 - Line 350:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup60"><code class="language-javascript text-sm text-gray-800">={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/bodies/DatabaseNodeBody.tsx (Line 59:90 - Line 92:5), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 63:89 - Line 115:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup66"><code class="language-javascript text-sm text-gray-800"> : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* Database Icon */}
            &lt;NodeIcon icon={icon</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/TriggerPanel.tsx (Line 304:5 - Line 978:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 307:5 - Line 981:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup72"><code class="language-javascript text-sm text-gray-800">={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateTrigger}
      initialValues={{
        enabled: true,
        triggerType: 'webhook',
        rateLimitEnabled: false,
        retryEnabled: false,
        requireHttps: true,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Trigger Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;API webhook trigger&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Receives webhooks from external API&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;triggerType&quot; label=&quot;Trigger Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;webhook&quot;&gt;
            &lt;Space&gt;
              &lt;GlobalOutlined /&gt;
              Webhook
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;http_request&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              HTTP Request
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;email&quot;&gt;
            &lt;Space&gt;
              &lt;MailOutlined /&gt;
              Email
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;file_change&quot;&gt;
            &lt;Space&gt;
              &lt;FileTextOutlined /&gt;
              File Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;database_change&quot;&gt;
            &lt;Space&gt;
              &lt;DatabaseOutlined /&gt;
              Database Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;api_poll&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              API Polling
            &lt;/Space&gt;
          &lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['triggerType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const triggerType = getFieldValue('triggerType');
          return renderTriggerTypeFields(triggerType);
        }}
      &lt;/Form.Item&gt;

      &lt;Collapse ghost&gt;
        &lt;Panel header=&quot;Advanced Configuration&quot; key=&quot;advanced&quot;&gt;
          {renderAdvancedFields()}
        &lt;/Panel&gt;
      &lt;/Collapse&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingTrigger ? 'Update Trigger' : 'Create Trigger'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingTrigger(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderTriggerTypeFields = (triggerType: string) =&gt; {
    switch (triggerType) {
      case 'webhook':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;methods&quot; label=&quot;HTTP Methods&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select methods&quot;&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
                &lt;Option value=&quot;PATCH&quot;&gt;PATCH&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;contentTypes&quot; label=&quot;Content Types (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;application/json, application/xml&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;secretKey&quot; label=&quot;Secret Key (optional)&quot;&gt;
              &lt;Input.Password placeholder=&quot;For webhook signature validation&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'http_request':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;method&quot; label=&quot;HTTP Method&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeDetection&quot; label=&quot;Change Detection&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;hash&quot;&gt;Content Hash&lt;/Option&gt;
                &lt;Option value=&quot;content&quot;&gt;Full Content&lt;/Option&gt;
                &lt;Option value=&quot;headers&quot;&gt;Headers&lt;/Option&gt;
                &lt;Option value=&quot;size&quot;&gt;Content Size&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'email':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;provider&quot; label=&quot;Email Provider&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;gmail&quot;&gt;Gmail&lt;/Option&gt;
                &lt;Option value=&quot;outlook&quot;&gt;Outlook&lt;/Option&gt;
                &lt;Option value=&quot;imap&quot;&gt;IMAP&lt;/Option&gt;
                &lt;Option value=&quot;exchange&quot;&gt;Exchange&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;mailbox&quot; label=&quot;Mailbox&quot;&gt;
              &lt;Input placeholder=&quot;INBOX&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;fromEmails&quot; label=&quot;From Emails (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;user@example.com, alerts@service.com&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;subjectFilter&quot; label=&quot;Subject Filter&quot;&gt;
              &lt;Input placeholder=&quot;Alert: &quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'file_change':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;path&quot; label=&quot;Path to Monitor&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;/data/uploads&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;recursive&quot; label=&quot;Recursive&quot; valuePropName=&quot;checked&quot;&gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;events&quot; label=&quot;File Events&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select events&quot;&gt;
                &lt;Option value=&quot;created&quot;&gt;Created&lt;/Option&gt;
                &lt;Option value=&quot;modified&quot;&gt;Modified&lt;/Option&gt;
                &lt;Option value=&quot;deleted&quot;&gt;Deleted&lt;/Option&gt;
                &lt;Option value=&quot;moved&quot;&gt;Moved&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;patterns&quot; label=&quot;File Patterns (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;*.pdf, *.docx&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'database_change':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;connectionString&quot;
              label=&quot;Connection String&quot;
              rules={[{ required: true }]}
            &gt;
              &lt;Input.Password placeholder=&quot;mongodb://localhost:27017/mydb&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;database&quot; label=&quot;Database&quot;&gt;
              &lt;Input placeholder=&quot;myapp&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;table&quot; label=&quot;Table/Collection&quot;&gt;
              &lt;Input placeholder=&quot;users&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;operation&quot; label=&quot;Operation&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;insert&quot;&gt;Insert&lt;/Option&gt;
                &lt;Option value=&quot;update&quot;&gt;Update&lt;/Option&gt;
                &lt;Option value=&quot;delete&quot;&gt;Delete&lt;/Option&gt;
                &lt;Option value=&quot;any&quot;&gt;Any&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'api_poll':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;API URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/data&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;responseField&quot; label=&quot;Response Field to Monitor&quot;&gt;
              &lt;Input placeholder=&quot;data.status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeThreshold&quot; label=&quot;Change Threshold (for numbers)&quot;&gt;
              &lt;InputNumber min={0} step={0.1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderAdvancedFields = () =&gt; (
    &lt;Space direction=&quot;vertical&quot; size=&quot;middle&quot; style={{ width: '100%' }}&gt;
      &lt;Divider&gt;Rate Limiting&lt;/Divider&gt;
      &lt;Form.Item name=&quot;rateLimitEnabled&quot; label=&quot;Enable Rate Limiting&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item dependencies={['rateLimitEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('rateLimitEnabled')) return null;
          return (
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;Form.Item name=&quot;maxTriggersPerMinute&quot; label=&quot;Max/Minute&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;maxTriggersPerHour&quot; label=&quot;Max/Hour&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
            &lt;/div&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Security&lt;/Divider&gt;
      &lt;Form.Item name=&quot;requireHttps&quot; label=&quot;Require HTTPS&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;allowedIPs&quot; label=&quot;Allowed IPs (comma-separated)&quot;&gt;
        &lt;Input placeholder=&quot;192.168.1.1, 10.0.0.0/8&quot; /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;maxPayloadSize&quot; label=&quot;Max Payload Size (bytes)&quot;&gt;
        &lt;InputNumber min={1024} placeholder=&quot;1048576&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Headers&lt;/Divider&gt;
      &lt;Form.Item name=&quot;headers&quot; label=&quot;Custom Headers (key:value per line)&quot;&gt;
        &lt;TextArea
          placeholder=&quot;Authorization: Bearer token&amp;#10;Content-Type: application/json&quot;
          rows={3}
        /&gt;
      &lt;/Form.Item&gt;
    &lt;/Space&gt;
  );

  const renderTriggersList = () =&gt; (
    &lt;List
      dataSource={triggers}
      renderItem={(trigger) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={trigger.enabled}
              onChange={(checked) =&gt; handleToggleTrigger(trigger.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedTrigger(trigger);
                setTestModalVisible(true);
              }}
            &gt;
              Test
            &lt;/Button&gt;,
            trigger.triggerType === 'webhook' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={() =&gt; {
                  const config = trigger.configuration as any;
                  navigator.clipboard.writeText(config.endpoint);
                  message.success('Webhook URL copied');
                }}
              &gt;
                Copy URL
              &lt;/Button&gt;
            ),
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingTrigger(trigger.id);
                // Populate form with existing values
                form.setFieldsValue({
                  name: trigger.name,
                  description: trigger.description,
                  enabled: trigger.enabled,
                  triggerType: trigger.triggerType,
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteTrigger(trigger.id)}
            /&gt;,
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {getTriggerIcon(trigger.triggerType)}
                {trigger.name}
                &lt;Tag color={trigger.enabled ? 'green' : 'default'}&gt;{trigger.triggerType}&lt;/Tag&gt;
                &lt;Badge
                  count={trigger.triggerCount}
                  style={{ backgroundColor: colors.primary[500] }}
                /&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {trigger.description}
                &lt;Space&gt;
                  &lt;Badge status={trigger.enabled ? 'success' : 'default'} /&gt;
                  {trigger.enabled ? 'Active' : 'Inactive'}
                  {trigger.lastTriggered &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(trigger.lastTriggered).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
                {trigger.triggerType === 'webhook' &amp;&amp; (
                  &lt;Text code style={{ fontSize: '12px' }}&gt;
                    {(trigger.configuration as any).endpoint}
                  &lt;/Text&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No triggers configured' }}
    /&gt;
  );

  const renderEventsList = () =&gt; (
    &lt;Table
      dataSource={recentEvents}
      size=&quot;small&quot;
      pagination={{ pageSize: 20 }}
      columns={[
        {
          title: 'Time',
          dataIndex: 'timestamp',
          key: 'timestamp',
          width: 150,
          render: (timestamp) =&gt; new Date(timestamp).toLocaleString(),
        },
        {
          title: 'Trigger',
          dataIndex: 'triggerId',
          key: 'triggerId',
          width: 200,
          render: (triggerId) =&gt; {
            const trigger = triggers.find((t) =&gt; t.id === triggerId);
            return trigger ? trigger.name : triggerId;
          },
        },
        {
          title: 'Status',
          dataIndex: 'status',
          key: 'status',
          width: 100,
          render: (status) =&gt; &lt;Tag color={getEventStatusColor(status)}&gt;{status}&lt;/Tag&gt;,
        },
        {
          title: 'Processing Time',
          dataIndex: 'processingTimeMs',
          key: 'processingTimeMs',
          width: 120,
          render: (time) =&gt; `${time.toFixed(2)}ms`,
        },
        {
          title: 'Source',
          dataIndex: ['metadata', 'source'],
          key: 'source',
          width: 120,
        },
        {
          title: 'Actions',
          key: 'actions',
          width: 100,
          render: (_, event) =&gt; (
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                Modal.info({
                  title: 'Event Details',
                  content: (
                    &lt;div&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;ID:&lt;/Text&gt; {event.id}
                      &lt;/Paragraph&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;Raw Data:&lt;/Text&gt;
                        &lt;pre
                          style={{
                            marginTop: 8,
                            background: colors.gray[50],
                            padding: 12,
                            borderRadius: 4,
                          }}
                        &gt;
                          {JSON.stringify(event.rawData, null, 2)}
                        &lt;/pre&gt;
                      &lt;/Paragraph&gt;
                      {event.error &amp;&amp; (
                        &lt;Paragraph&gt;
                          &lt;Text strong&gt;Error:&lt;/Text&gt;
                          &lt;pre
                            style={{
                              marginTop: 8,
                              background: colors.error[50],
                              padding: 12,
                              borderRadius: 4,
                              color: colors.error[600],
                            }}
                          &gt;
                            {event.error}
                          &lt;/pre&gt;
                        &lt;/Paragraph&gt;
                      )}
                    &lt;/div&gt;
                  ),
                  width: 600,
                });
              }}
            /&gt;
          ),
        },
      ]}
    /&gt;
  );

  const renderMetrics = () =&gt; {
    if (!metrics) return &lt;div&gt;Select a trigger to view metrics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic title=&quot;Total Events&quot; value={metrics.totalEvents} /&gt;
          &lt;Statistic
            title=&quot;Processed Events&quot;
            value={metrics.processedEvents}
            valueStyle={{ color: colors.success[600] }}
          /&gt;
          &lt;Statistic
            title=&quot;Error Rate&quot;
            value={metrics.errorRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: metrics.errorRate &gt; 5 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
          &lt;Statistic
            title=&quot;Avg Processing Time&quot;
            value={metrics.averageProcessingTime}
            precision={2}
            suffix=&quot;ms&quot;
          /&gt;
        &lt;/div&gt;

        {metrics.topSources.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Top Sources&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={metrics.topSources}
              renderItem={(source) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta title={source.source} description={`${source.count} events`} /&gt;
                  &lt;Progress
                    percent={(source.count / metrics.totalEvents) * 100}
                    size=&quot;small&quot;
                    style={{ width: 100 }}
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getTriggerIcon = (triggerType: string) =&gt; {
    const iconMap = {
      webhook: &lt;GlobalOutlined /&gt;,
      http_request: &lt;ApiOutlined /&gt;,
      email: &lt;MailOutlined /&gt;,
      file_change: &lt;FileTextOutlined /&gt;,
      database_change: &lt;DatabaseOutlined /&gt;,
      api_poll: &lt;ApiOutlined /&gt;,
      calendar_event: &lt;CalendarOutlined /&gt;,
    };
    return iconMap[triggerType as keyof typeof iconMap] || &lt;SettingOutlined /&gt;;
  };

  const getEventStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'processed':
        return 'green';
      case 'failed':
        return 'red';
      case 'filtered':
        return 'orange';
      case 'rate_limited':
        return 'purple';
      default:
        return 'default';
    }
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;ThunderboltOutlined /&gt;
            Advanced Triggers
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1200}
        footer={null}
        className={cn('trigger-management-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Triggers ({triggers.length})
              &lt;/span&gt;
            }
            key=&quot;triggers&quot;
          &gt;
            &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
              &lt;Card title=&quot;Create Trigger&quot; size=&quot;small&quot;&gt;
                {renderTriggerForm()}
                {webhookUrl &amp;&amp; (
                  &lt;Alert
                    message=&quot;Webhook URL&quot;
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;Text code&gt;{webhookUrl}&lt;/Text&gt;
                        &lt;Button
                          size=&quot;small&quot;
                          icon={&lt;CopyOutlined /&gt;}
                          onClick={() =&gt; {
                            navigator.clipboard.writeText(webhookUrl);
                            message.success('URL copied');
                          }}
                        &gt;
                          Copy URL
                        &lt;/Button&gt;
                      &lt;/Space&gt;
                    }
                    type=&quot;success&quot;
                    style={{ marginTop: 16 }}
                  /&gt;
                )}
              &lt;/Card&gt;
              &lt;Card title=&quot;Active Triggers&quot; size=&quot;small&quot;&gt;
                {renderTriggersList()}
              &lt;/Card&gt;
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CheckCircleOutlined /&gt;
                Events
              &lt;/span&gt;
            }
            key=&quot;events&quot;
          &gt;
            {renderEventsList()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;div&gt;📊&lt;/div&gt;
                Metrics
              &lt;/span&gt;
            }
            key=&quot;metrics&quot;
          &gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;Select
                placeholder=&quot;Select a trigger to view metrics&quot;
                value={selectedTrigger?.id}
                onChange={(triggerId) =&gt; {
                  const trigger = triggers.find((t) =&gt; t.id === triggerId);
                  setSelectedTrigger(trigger || null);
                }}
                style={{ width: 300 }}
              &gt;
                {triggers.map((trigger) =&gt; (
                  &lt;Option key={trigger.id} value={trigger.id}&gt;
                    {trigger.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/div&gt;
            {renderMetrics()}
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Modal&gt;

      &lt;Modal
        title=&quot;Test Trigger&quot;
        open={testModalVisible}
        onCancel={() =&gt; setTestModalVisible(false)}
        onOk={() =&gt; {
          if (selectedTrigger) {
            handleTestTrigger(selectedTrigger.id);
          }
        }}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Test Data (JSON)&quot;&gt;
            &lt;TextArea
              rows={8}
              placeholder={JSON.stringify(
                { test: true, timestamp: new Date().toISOString() },
                null,
                2
              )}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/SchedulingPanel.tsx (Line 244:5 - Line 711:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/schedulingpanel/SchedulingPanel.tsx (Line 248:5 - Line 715:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup74"><code class="language-javascript text-sm text-gray-800">={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateSchedule}
      initialValues={{
        enabled: true,
        scheduleType: 'cron',
        timezone: 'UTC',
        retryEnabled: false,
        maxAttempts: 3,
        backoffStrategy: 'exponential',
        maxConcurrent: 1,
        queueStrategy: 'fifo',
        skipIfRunning: false,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Schedule Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;Daily data sync&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Optional description of what this schedule does&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;scheduleType&quot; label=&quot;Schedule Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;cron&quot;&gt;Cron Expression&lt;/Option&gt;
          &lt;Option value=&quot;interval&quot;&gt;Fixed Interval&lt;/Option&gt;
          &lt;Option value=&quot;once&quot;&gt;One Time&lt;/Option&gt;
          &lt;Option value=&quot;event-driven&quot;&gt;Event Driven&lt;/Option&gt;
          &lt;Option value=&quot;conditional&quot;&gt;Conditional&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['scheduleType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const scheduleType = getFieldValue('scheduleType');
          return renderScheduleTypeFields(scheduleType);
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

      &lt;Form.Item name=&quot;timezone&quot; label=&quot;Timezone&quot;&gt;
        &lt;Select showSearch&gt;
          &lt;Option value=&quot;UTC&quot;&gt;UTC&lt;/Option&gt;
          &lt;Option value=&quot;America/New_York&quot;&gt;America/New_York&lt;/Option&gt;
          &lt;Option value=&quot;America/Los_Angeles&quot;&gt;America/Los_Angeles&lt;/Option&gt;
          &lt;Option value=&quot;Europe/London&quot;&gt;Europe/London&lt;/Option&gt;
          &lt;Option value=&quot;Asia/Tokyo&quot;&gt;Asia/Tokyo&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;maxConcurrent&quot; label=&quot;Max Concurrent Executions&quot;&gt;
        &lt;InputNumber min={1} max={10} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;queueStrategy&quot; label=&quot;Queue Strategy&quot;&gt;
        &lt;Select&gt;
          &lt;Option value=&quot;fifo&quot;&gt;First In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;lifo&quot;&gt;Last In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;priority&quot;&gt;Priority Based&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;skipIfRunning&quot; label=&quot;Skip If Already Running&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Retry Policy&lt;/Divider&gt;

      &lt;Form.Item name=&quot;retryEnabled&quot; label=&quot;Enable Retries&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['retryEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('retryEnabled')) return null;
          return (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxAttempts&quot; label=&quot;Max Retry Attempts&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;backoffStrategy&quot; label=&quot;Backoff Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Option value=&quot;linear&quot;&gt;Linear&lt;/Option&gt;
                  &lt;Option value=&quot;exponential&quot;&gt;Exponential&lt;/Option&gt;
                  &lt;Option value=&quot;fixed&quot;&gt;Fixed&lt;/Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;initialDelay&quot; label=&quot;Initial Delay (ms)&quot;&gt;
                &lt;InputNumber min={100} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingSchedule ? 'Update Schedule' : 'Create Schedule'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingSchedule(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderScheduleTypeFields = (scheduleType: string) =&gt; {
    switch (scheduleType) {
      case 'cron':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;cronExpression&quot;
              label={
                &lt;Space&gt;
                  Cron Expression
                  &lt;Tooltip title=&quot;Format: second minute hour day month weekday&quot;&gt;
                    &lt;InfoCircleOutlined /&gt;
                  &lt;/Tooltip&gt;
                &lt;/Space&gt;
              }
              rules={[{ required: true, message: 'Please enter a cron expression' }]}
            &gt;
              &lt;Input placeholder=&quot;0 0 9 * * *&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;cronDescription&quot; label=&quot;Description&quot;&gt;
              &lt;Input placeholder=&quot;Every day at 9:00 AM&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'interval':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;intervalMs&quot; label=&quot;Interval (milliseconds)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;maxExecutions&quot; label=&quot;Max Executions (optional)&quot;&gt;
              &lt;InputNumber min={1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'once':
        return (
          &lt;Form.Item name=&quot;executeAt&quot; label=&quot;Execute At&quot;&gt;
            &lt;DatePicker showTime /&gt;
          &lt;/Form.Item&gt;
        );
      case 'event-driven':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;eventType&quot; label=&quot;Event Type&quot;&gt;
              &lt;Input placeholder=&quot;webhook&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;eventSource&quot; label=&quot;Event Source&quot;&gt;
              &lt;Input placeholder=&quot;api.example.com&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'conditional':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;condition&quot; label=&quot;JavaScript Condition&quot;&gt;
              &lt;TextArea placeholder=&quot;return data.status === 'ready'&quot; rows={3} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;checkIntervalMs&quot; label=&quot;Check Interval (ms)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;60000&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderSchedulesList = () =&gt; (
    &lt;List
      dataSource={schedules}
      renderItem={(schedule) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={schedule.enabled}
              onChange={(checked) =&gt; handleToggleSchedule(schedule.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; handleTriggerSchedule(schedule.id)}
              disabled={!schedule.enabled}
            &gt;
              Trigger
            &lt;/Button&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingSchedule(schedule.id);
                form.setFieldsValue({
                  name: schedule.name,
                  description: schedule.description,
                  enabled: schedule.enabled,
                  scheduleType: schedule.scheduleType,
                  // Add other fields based on schedule type
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteSchedule(schedule.id)}
            /&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {schedule.name}
                &lt;Tag color={schedule.enabled ? 'green' : 'default'}&gt;{schedule.scheduleType}&lt;/Tag&gt;
                {schedule.nextExecution &amp;&amp; (
                  &lt;Tag color=&quot;blue&quot;&gt;Next: {new Date(schedule.nextExecution).toLocaleString()}&lt;/Tag&gt;
                )}
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {schedule.description}
                &lt;Space&gt;
                  &lt;Badge status={schedule.enabled ? 'success' : 'default'} /&gt;
                  {schedule.enabled ? 'Active' : 'Inactive'}
                  {schedule.lastExecuted &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(schedule.lastExecuted).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No schedules configured' }}
    /&gt;
  );

  const renderExecutionsList = () =&gt; (
    &lt;List
      dataSource={activeExecutions}
      renderItem={(execution) =&gt; (
        &lt;List.Item
          actions={[
            execution.status === 'running' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                danger
                icon={&lt;PauseCircleOutlined /&gt;}
                onClick={() =&gt; handleCancelExecution(execution.id)}
              &gt;
                Cancel
              &lt;/Button&gt;
            ),
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                Execution {execution.id.split('_')[1]}
                &lt;Tag color={getExecutionStatusColor(execution.status)}&gt;{execution.status}&lt;/Tag&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                &lt;div&gt;Scheduled: {new Date(execution.scheduledAt).toLocaleString()}&lt;/div&gt;
                {execution.startedAt &amp;&amp; (
                  &lt;div&gt;Started: {new Date(execution.startedAt).toLocaleString()}&lt;/div&gt;
                )}
                {execution.duration &amp;&amp; (
                  &lt;div&gt;Duration: {(execution.duration / 1000).toFixed(2)}s&lt;/div&gt;
                )}
                {execution.error &amp;&amp; (
                  &lt;div style={{ color: colors.error[500] }}&gt;Error: {execution.error}&lt;/div&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No active executions' }}
    /&gt;
  );

  const renderAnalytics = () =&gt; {
    if (!analytics) return &lt;div&gt;Select a schedule to view analytics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic
            title=&quot;Success Rate&quot;
            value={analytics.successRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: analytics.successRate &gt; 90 ? colors.success[600] : colors.warning[600],
            }}
          /&gt;
          &lt;Statistic title=&quot;Total Executions&quot; value={analytics.totalExecutions} /&gt;
          &lt;Statistic
            title=&quot;Average Duration&quot;
            value={analytics.averageDuration / 1000}
            precision={2}
            suffix=&quot;s&quot;
          /&gt;
          &lt;Statistic
            title=&quot;Failed Executions&quot;
            value={analytics.failedExecutions}
            valueStyle={{
              color: analytics.failedExecutions &gt; 0 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
        &lt;/div&gt;

        {analytics.recommendations.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Recommendations&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={analytics.recommendations}
              renderItem={(rec) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta
                    title={
                      &lt;Space&gt;
                        {rec.description}
                        &lt;Tag
                          color={
                            rec.priority === 'high'
                              ? 'red'
                              : rec.priority === 'medium'
                                ? 'orange'
                                : 'green'
                          }
                        &gt;
                          {rec.priority}
                        &lt;/Tag&gt;
                      &lt;/Space&gt;
                    }
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Implementation:&lt;/strong&gt; {rec.implementation}
                        &lt;/div&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Impact:&lt;/strong&gt; {rec.estimatedImpact}
                        &lt;/div&gt;
                      &lt;/Space&gt;
                    }
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getExecutionStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'running':
        return 'blue';
      case 'completed':
        return 'green';
      case 'failed':
        return 'red';
      case 'cancelled':
        return 'orange';
      case 'skipped':
        return 'default';
      default:
        return 'default';
    }
  };

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;ClockCircleOutlined /&gt;
          Workflow Scheduling
        &lt;/Space&gt;
      }
      open={visible}
      onCancel={onClose}
      width={1000}
      footer={null}
      className={cn('workflow-scheduling-panel')}
    &gt;
      &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;CalendarOutlined /&gt;
              Schedules ({schedules.length})
            &lt;/span&gt;
          }
          key=&quot;schedules&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
            &lt;Card title=&quot;Create Schedule&quot; size=&quot;small&quot;&gt;
              {renderScheduleForm()}
            &lt;/Card&gt;
            &lt;Card title=&quot;Active Schedules&quot; size=&quot;small&quot;&gt;
              {renderSchedulesList()}
            &lt;/Card&gt;
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ThunderboltOutlined /&gt;
              Executions ({activeExecutions.length})
            &lt;/span&gt;
          }
          key=&quot;executions&quot;
        &gt;
          {renderExecutionsList()}
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Analytics
            &lt;/span&gt;
          }
          key=&quot;analytics&quot;
        &gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;Select
              placeholder=&quot;Select a schedule to view analytics&quot;
              value={selectedSchedule?.id}
              onChange={(scheduleId) =&gt; {
                const schedule = schedules.find((s) =&gt; s.id === scheduleId);
                setSelectedSchedule(schedule || null);
              }}
              style={{ width: 300 }}
            &gt;
              {schedules.map((schedule) =&gt; (
                &lt;Option key={schedule.id} value={schedule.id}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodePropertyPanel.tsx (Line 342:8 - Line 534:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/nodepropertypanel/NodePropertyPanel.tsx (Line 352:8 - Line 544:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup76"><code class="language-javascript text-sm text-gray-800">={onClose}
            className=&quot;text-gray-400 hover:text-white transition-colors flex items-center space-x-2&quot;
          &gt;
            &lt;span&gt;←&lt;/span&gt;
            &lt;span&gt;Back to canvas&lt;/span&gt;
          &lt;/button&gt;
          &lt;div className=&quot;flex items-center space-x-2 text-sm text-gray-400&quot;&gt;
            &lt;span&gt;/&lt;/span&gt;
            &lt;span&gt;{nodeDefinition.displayName}&lt;/span&gt;
            &lt;span className=&quot;text-xs px-2 py-1 bg-gray-700 rounded&quot;&gt;{currentNode.type}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
          &lt;button
            onClick={handleSaveWorkflow}
            disabled={isSaving || !currentWorkflow}
            className=&quot;flex items-center space-x-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-sm rounded transition-colors&quot;
            title=&quot;Save workflow without closing modal&quot;
          &gt;
            &lt;SaveOutlined className={isSaving ? 'animate-spin' : ''} /&gt;
            &lt;span&gt;{isSaving ? 'Saving...' : 'Save'}&lt;/span&gt;
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex flex-1 overflow-hidden&quot;&gt;
        {/* Left Column: Input Data */}
        &lt;div
          className=&quot;bg-gray-900 border-r border-gray-600 flex flex-col&quot;
          style={{ width: `${leftWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
              INPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {(enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail')) &amp;&amp;
            testResults?.data &amp;&amp;
            Array.isArray(testResults.data) &amp;&amp;
            testResults.data.length &gt; 0 ? (
              &lt;EmailInputPanel
                emails={testResults.data}
                selectedEmailId={selectedEmail?.id}
                onEmailSelect={setSelectedEmail}
              /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent input data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'condition' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Condition input data would appear here&lt;/div&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={inputData}
                title=&quot;Input Data&quot;
                description=&quot;Data from connected nodes&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Middle Column: Parameters &amp; Settings */}
        &lt;div
          className=&quot;bg-gray-800 flex flex-col border-l border-r border-gray-600&quot;
          style={{ width: `${middleWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-700 flex items-center justify-between flex-shrink-0&quot;&gt;
            &lt;div
              className=&quot;cursor-col-resize p-2 hover:bg-gray-600 rounded mr-2 flex items-center&quot;
              onMouseDown={handleMouseDown}
              title=&quot;Drag to resize column width&quot;
            &gt;
              &lt;div className=&quot;text-gray-300 text-xs font-mono&quot;&gt;⋮⋮&lt;/div&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;h2 className=&quot;text-lg font-semibold text-white&quot;&gt;{nodeDefinition.displayName}&lt;/h2&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button
                onClick={handleTestNode}
                disabled={isTestingNode}
                className={`px-3 py-1 rounded text-sm transition-colors ${
                  isTestingNode
                    ? 'bg-yellow-600 text-white cursor-wait'
                    : 'bg-green-600 hover:bg-green-700 text-white'
                }`}
              &gt;
                {isTestingNode ? '⏳ Testing...' : '🧪 Test step'}
              &lt;/button&gt;

              {/* Debug: Test credential modal button */}
              &lt;button
                onClick={() =&gt; {
                  handleCreateCredential('gmailOAuth2');
                }}
                className=&quot;px-2 py-1 rounded text-xs bg-purple-600 hover:bg-purple-700 text-white transition-colors&quot;
              &gt;
                🔧 Test Modal
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 p-6 overflow-y-auto&quot;&gt;
            {/* Use enhanced property rendering for Transform nodes and other enhanced types */}
            {currentNode?.type === 'transform' || enhancedNodeType?.id ? (
              &lt;PropertyGroupRenderer
                properties={
                  registryProperties as Array&lt;
                    INodeProperty &amp; { displayOptions?: EnhancedDisplayOptions }
                  &gt;
                }
                values={formState}
                onChange={handleParameterChange}
                evaluationContext={{
                  $json: inputData,
                  $node: {},
                  $vars: {},
                  $parameters: formState,
                }}
                context={evaluationContext}
              /&gt;
            ) : (
              &lt;DynamicPropertyRenderer
                properties={registryProperties as INodeProperty[]}
                formState={formState}
                onChange={handleParameterChange}
                context={evaluationContext}
              /&gt;
            )}

            {/* Display test results */}
            {testResults &amp;&amp; (
              &lt;div className=&quot;mt-6 p-4 rounded border-l-4 border-l-blue-500 bg-gray-700&quot;&gt;
                &lt;h4 className=&quot;text-white font-medium mb-2&quot;&gt;Test Results&lt;/h4&gt;
                &lt;div
                  className={`text-sm ${testResults.success ? 'text-green-400' : 'text-red-400'}`}
                &gt;
                  {testResults.message}
                &lt;/div&gt;
                {testResults.data &amp;&amp; (
                  &lt;div className=&quot;mt-2 text-xs text-gray-300&quot;&gt;
                    {Array.isArray(testResults.data)
                      ? `Found ${testResults.data.length} items`
                      : 'Data received'}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Column: Output Data */}
        &lt;div
          className=&quot;bg-gray-900 border-l border-gray-600 flex flex-col&quot;
          style={{ width: rightWidth, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
              OUTPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail') ? (
              &lt;EmailOutputPanel selectedEmail={selectedEmail} /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent output data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'transform' ? (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Transform Output&quot;
                description=&quot;Transformed data output&quot;
              /&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Output Data&quot;
                description=&quot;Output from node execution&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Credential Modal */}
      &lt;CredentialModal
        isOpen={isCredentialModalOpen}
        onClose={() =&gt; {
          setIsCredentialModalOpen(false);
        }}
        credentialType={currentCredentialType}
        onSave={handleSaveCredential}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionToolbar.tsx (Line 211:5 - Line 280:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executiontoolbar/ExecutionToolbar.tsx (Line 212:5 - Line 281:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup78"><code class="language-javascript text-sm text-gray-800">={&lt;StopOutlined /&gt;} onClick={handleStop} size=&quot;small&quot;&gt;
              Stop
            &lt;/Button&gt;
          ) : (
            &lt;Dropdown
              menu={{ items: runMenuItems }}
              trigger={['click']}
              disabled={nodes.length === 0}
            &gt;
              &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} loading={testing} size=&quot;small&quot;&gt;
                Run &lt;DownOutlined /&gt;
              &lt;/Button&gt;
            &lt;/Dropdown&gt;
          )}

          {/* Test button */}
          &lt;Button
            icon={&lt;BugOutlined /&gt;}
            onClick={handleTest}
            disabled={nodes.length === 0}
            size=&quot;small&quot;
          &gt;
            Test
          &lt;/Button&gt;

          {/* Execution status */}
          {currentExecution &amp;&amp; (
            &lt;Badge
              status={
                currentExecution.status === 'running'
                  ? 'processing'
                  : currentExecution.status === 'completed'
                    ? 'success'
                    : currentExecution.status === 'failed'
                      ? 'error'
                      : 'default'
              }
              text={
                &lt;span className=&quot;text-sm&quot;&gt;
                  {currentExecution.status === 'running'
                    ? `Running (${(currentExecution as any).progress?.completedNodes?.length || 0}/${(currentExecution as any).progress?.totalNodes || 0})`
                    : `${currentExecution.status} - ${Math.round((currentExecution.duration || 0) / 1000)}s`}
                &lt;/span&gt;
              }
            /&gt;
          )}
        &lt;/Space&gt;

        &lt;Space&gt;
          {/* Workflow info */}
          &lt;span className=&quot;text-sm text-gray-500&quot;&gt;
            {nodes.length} nodes • {edges.length} connections
          &lt;/span&gt;

          {/* More actions */}
          &lt;Dropdown menu={{ items: moreMenuItems }} trigger={['click']}&gt;
            &lt;Button icon={&lt;SettingOutlined /&gt;} size=&quot;small&quot;&gt;
              &lt;DownOutlined /&gt;
            &lt;/Button&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Workflow Tester Modal */}
      {showTester &amp;&amp; (
        &lt;WorkflowTester nodes={nodes} edges={edges} onClose={() =&gt; setShowTester(false)} /&gt;
      )}

      {/* Execution History Modal */}
      {showHistory &amp;&amp; &lt;ExecutionHistory onClose={() =&gt; setShowHistory(false)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionPanel.tsx (Line 131:8 - Line 377:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executionpanel/ExecutionPanel.tsx (Line 135:8 - Line 381:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup80"><code class="language-javascript text-sm text-gray-800">={() =&gt; setAutoScroll(!autoScroll)}
              className={cn(
                'text-xs px-2 py-1 rounded',
                autoScroll ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300'
              )}
            &gt;
              Auto-scroll
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; {
                // Clear logs implementation
              }}
              className=&quot;text-xs px-2 py-1 rounded bg-gray-700 text-gray-300 hover:bg-gray-600&quot;
            &gt;
              Clear
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div
          ref={consoleRef}
          className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto text-xs font-mono&quot;
        &gt;
          {logs.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No logs yet. Execute a workflow to see real-time logs.
            &lt;/div&gt;
          ) : (
            logs.map((log, index) =&gt; (
              &lt;div
                key={index}
                className={cn(
                  'mb-1 p-1 rounded',
                  log.level === 'error' &amp;&amp; 'bg-red-900 text-red-200',
                  log.level === 'warn' &amp;&amp; 'bg-yellow-900 text-yellow-200',
                  log.level === 'info' &amp;&amp; 'text-gray-300',
                  log.level === 'debug' &amp;&amp; 'text-gray-500'
                )}
              &gt;
                &lt;span className=&quot;text-gray-500&quot;&gt;
                  [{new Date(log.timestamp).toLocaleTimeString()}]
                &lt;/span&gt;
                &lt;span className=&quot;ml-2 text-blue-400&quot;&gt;[{log.nodeId}]&lt;/span&gt;
                &lt;span className=&quot;ml-2&quot;&gt;{log.message}&lt;/span&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderVariablesTab = () =&gt; {
    const variables = getExecutionVariables();

    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Variables&lt;/h3&gt;
        &lt;div className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto&quot;&gt;
          {Object.keys(variables).length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No variables available. Execute nodes to see output data.
            &lt;/div&gt;
          ) : (
            Object.entries(variables).map(([key, value]) =&gt; (
              &lt;div key={key} className=&quot;mb-3 p-2 bg-gray-800 rounded&quot;&gt;
                &lt;div className=&quot;text-blue-400 text-xs font-mono mb-1&quot;&gt;{key}&lt;/div&gt;
                &lt;div className=&quot;text-gray-300 text-xs break-all&quot;&gt;
                  &lt;pre className=&quot;whitespace-pre-wrap&quot;&gt;
                    {typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value)}
                  &lt;/pre&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderMetricsTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Performance Metrics&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-3&quot;&gt;
          {/* Execution time metrics */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Node Execution Times&lt;/h4&gt;
            {performanceMetrics.nodeExecutionTimes.size === 0 ? (
              &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;No timing data available&lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {Array.from(performanceMetrics.nodeExecutionTimes.entries()).map(
                  ([nodeId, time]) =&gt; (
                    &lt;div key={nodeId} className=&quot;flex justify-between text-xs&quot;&gt;
                      &lt;span className=&quot;text-blue-400&quot;&gt;{nodeId}&lt;/span&gt;
                      &lt;span className=&quot;text-gray-300&quot;&gt;
                        {time &lt; 1000 ? `${time}ms` : `${(time / 1000).toFixed(2)}s`}
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;

          {/* Resource usage */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Resource Usage&lt;/h4&gt;
            &lt;div className=&quot;space-y-1 text-xs&quot;&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Peak Memory:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.peakMemory
                    ? `${(performanceMetrics.resourceUsage.peakMemory / 1024 / 1024).toFixed(1)} MB`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;CPU Time:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.totalCpuTime
                    ? `${performanceMetrics.resourceUsage.totalCpuTime}ms`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Network Requests:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.networkRequests || 0}
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderHistoryTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Execution History&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-2 overflow-y-auto&quot;&gt;
          {executionHistory.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;No execution history&lt;/div&gt;
          ) : (
            executionHistory.slice(0, 10).map((execution) =&gt; (
              &lt;div
                key={execution.id}
                className=&quot;bg-gray-900 rounded border border-gray-700 p-2 hover:bg-gray-800 cursor-pointer&quot;
              &gt;
                &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                  &lt;div className=&quot;flex-1&quot;&gt;
                    &lt;div
                      className={cn(
                        'text-xs font-medium',
                        execution.status === 'completed' &amp;&amp; 'text-green-400',
                        execution.status === 'failed' &amp;&amp; 'text-red-400',
                        execution.status === 'running' &amp;&amp; 'text-blue-400'
                      )}
                    &gt;
                      {execution.status.toUpperCase()}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;
                      {execution.startTime &amp;&amp; new Date(execution.startTime).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                    {execution.duration &amp;&amp; `${(execution.duration / 1000).toFixed(1)}s`}
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!isVisible) {
    return (
      &lt;button
        onClick={onToggle}
        className={cn(
          'fixed z-40 bg-gray-800 text-white p-2 rounded-l shadow-lg hover:bg-gray-700 transition-colors',
          position === 'right'
            ? 'right-0 top-1/2 -translate-y-1/2'
            : 'bottom-0 left-1/2 -translate-x-1/2 rounded-t'
        )}
        title=&quot;Show execution panel&quot;
      &gt;
        {position === 'right' ? '←' : '↑'} Execution
      &lt;/button&gt;
    );
  }

  return (
    &lt;div
      className={cn(
        'fixed z-30 bg-gray-800 border-l border-gray-700 shadow-xl',
        position === 'right' ? 'right-0 top-0 h-full w-80' : 'bottom-0 left-0 right-0 h-80 border-t'
      )}
    &gt;
      {/* Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;h2 className=&quot;text-sm font-semibold text-white&quot;&gt;Execution Monitor&lt;/h2&gt;
          &lt;div
            className={cn('w-2 h-2 rounded-full', isConnected ? 'bg-green-500' : 'bg-red-500')}
            title={isConnected ? 'Connected' : 'Disconnected'}
          /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;button
            onClick={() =&gt; setDebugMode(!debugMode)}
            className={cn(
              'text-xs px-2 py-1 rounded',
              debugMode ? 'bg-yellow-600 text-white' : 'bg-gray-700 text-gray-300'
            )}
          &gt;
            Debug
          &lt;/button&gt;
          &lt;button onClick={onToggle} className=&quot;text-gray-400 hover:text-white&quot;&gt;
            ✕
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Progress bar */}
      {currentExecution &amp;&amp; (
        &lt;div className=&quot;p-3 border-b border-gray-700&quot;&gt;{renderProgressBar()}&lt;/div&gt;
      )}

      {/* Tabs */}
      &lt;div className=&quot;flex border-b border-gray-700&quot;&gt;
        {(['console', 'variables', 'metrics', 'history'] as const).map((tab) =&gt; (
          &lt;button
            key={tab}
            onClick={() =&gt; setActiveTab(tab)}
            className={cn(
              'px-3 py-2 text-xs font-medium border-b-2 transition-colors',
              activeTab === tab
                ? 'border-blue-500 text-blue-400'
                : 'border-transparent text-gray-400 hover:text-gray-200'
            )}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EnhancedPropertyRenderer.tsx (Line 76:6 - Line 477:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 80:6 - Line 481:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup82"><code class="language-javascript text-sm text-gray-800">={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            value={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            rows={4}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'boolean':
        return &lt;Switch checked={value || false} onChange={onChange} disabled={disabled} /&gt;;

      case 'select':
        return (
          &lt;Select
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
        return (
          &lt;Select
            mode=&quot;multiple&quot;
            value={value || []}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            showTime
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={value}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={disabled}
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            beforeUpload={() =&gt; false}
            onChange={(info) =&gt; {
              if (info.file) {
                onChange(info.file);
              }
            }}
            disabled={disabled}
          &gt;
            &lt;Button icon={&lt;PlusOutlined /&gt;} disabled={disabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={typeof value === 'string' ? value : JSON.stringify(value, null, 2)}
              onChange={(e) =&gt; {
                try {
                  const parsed = JSON.parse(e.target.value);
                  onChange(parsed);
                } catch {
                  onChange(e.target.value);
                }
              }}
              placeholder={property.placeholder}
              disabled={disabled}
              rows={6}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            {value &amp;&amp; typeof value === 'object' &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;Button size=&quot;small&quot; onClick={() =&gt; setIsExpanded(!isExpanded)} type=&quot;text&quot;&gt;
                  {isExpanded ? 'Collapse' : 'Expand'} JSON
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      case 'expression':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={value || ''}
              onChange={(e) =&gt; onChange(e.target.value)}
              placeholder={property.placeholder || 'Enter JavaScript expression...'}
              disabled={disabled}
              rows={3}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
              Use $input to reference input data, e.g., $input.user.name
            &lt;/div&gt;
          &lt;/div&gt;
        );

      case 'collection':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {(value || []).map((item: any, index: number) =&gt; (
              &lt;Card
                key={index}
                size=&quot;small&quot;
                className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
                title={`Item ${index + 1}`}
                extra={
                  &lt;Button
                    type=&quot;text&quot;
                    danger
                    size=&quot;small&quot;
                    icon={&lt;DeleteOutlined /&gt;}
                    onClick={() =&gt; {
                      const newValue = [...(value || [])];
                      newValue.splice(index, 1);
                      onChange(newValue);
                    }}
                    disabled={disabled}
                  /&gt;
                }
              &gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {property.collectionSchema?.map((field: any) =&gt; (
                    &lt;div key={field.name}&gt;
                      &lt;label className=&quot;text-sm font-medium text-gray-300&quot;&gt;
                        {field.label || field.name}
                      &lt;/label&gt;
                      &lt;PropertyField
                        property={field}
                        value={item[field.name]}
                        onChange={(fieldValue) =&gt; {
                          const newValue = [...(value || [])];
                          newValue[index] = { ...newValue[index], [field.name]: fieldValue };
                          onChange(newValue);
                        }}
                        disabled={disabled}
                        theme={theme}
                      /&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/Card&gt;
            ))}
            &lt;Button
              type=&quot;dashed&quot;
              onClick={() =&gt; {
                const newValue = [...(value || []), {}];
                onChange(newValue);
              }}
              disabled={disabled}
              className=&quot;w-full&quot;
            &gt;
              &lt;PlusOutlined /&gt; Add Item
            &lt;/Button&gt;
          &lt;/div&gt;
        );

      case 'credentialsSelect':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;Select
              value={value?.credentialId}
              onChange={(credentialId) =&gt; onChange({ ...value, credentialId })}
              placeholder=&quot;Select credential&quot;
              disabled={disabled}
              className=&quot;w-full&quot;
              style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
            &gt;
              {/* This would be populated with available credentials */}
              &lt;Option value=&quot;gmail-oauth&quot;&gt;Gmail OAuth&lt;/Option&gt;
              &lt;Option value=&quot;openai-api&quot;&gt;OpenAI API Key&lt;/Option&gt;
            &lt;/Select&gt;
            {value?.credentialId &amp;&amp; (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Tag color=&quot;green&quot;&gt;Connected&lt;/Tag&gt;
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Test Connection
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      default:
        return (
          &lt;Alert message={`Unsupported property type: ${property.type}`} type=&quot;warning&quot; showIcon /&gt;
        );
    }
  };

  return (
    &lt;div className=&quot;space-y-1&quot;&gt;
      {renderField()}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-500 flex items-center gap-1&quot;&gt;
          &lt;InfoCircleOutlined /&gt;
          {property.description}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export const EnhancedPropertyRenderer: React.FC&lt;EnhancedPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  onValidationChange,
  theme = 'dark',
  disabled = false,
}) =&gt; {
  const [validationErrors, setValidationErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const validateProperty = useCallback((property: INodeProperty, value: any): string | null =&gt; {
    // Required validation
    if (property.required &amp;&amp; (!value || value === '')) {
      return `${property.label || property.name} is required`;
    }

    // Type-specific validation
    switch (property.type) {
      case 'string':
      case 'text':
        if (property.maxLength &amp;&amp; value &amp;&amp; value.length &gt; property.maxLength) {
          return `Maximum length is ${property.maxLength} characters`;
        }
        if (property.minLength &amp;&amp; value &amp;&amp; value.length &lt; property.minLength) {
          return `Minimum length is ${property.minLength} characters`;
        }
        if (property.pattern &amp;&amp; value &amp;&amp; !new RegExp(property.pattern).test(value)) {
          return `Value must match pattern: ${property.pattern}`;
        }
        break;

      case 'number':
        if (property.min !== undefined &amp;&amp; value &lt; property.min) {
          return `Minimum value is ${property.min}`;
        }
        if (property.max !== undefined &amp;&amp; value &gt; property.max) {
          return `Maximum value is ${property.max}`;
        }
        break;

      case 'json':
        if (value &amp;&amp; typeof value === 'string') {
          try {
            JSON.parse(value);
          } catch {
            return 'Invalid JSON format';
          }
        }
        break;
    }

    return null;
  }, []);

  const validateAll = useCallback(() =&gt; {
    const errors = new Map&lt;string, string&gt;();

    properties.forEach((property) =&gt; {
      const value = formState[property.name];
      const error = validateProperty(property, value);
      if (error) {
        errors.set(property.name, error);
      }
    });

    setValidationErrors(errors);
    onValidationChange?.({
      isValid: errors.size === 0,
      errors,
    });

    return errors.size === 0;
  }, [properties, formState, validateProperty, onValidationChange]);

  // Validate on form state change
  React.useEffect(() =&gt; {
    validateAll();
  }, [validateAll]);

  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      onChange(name, value);
    },
    [onChange]
  );

  const visibleProperties = useMemo(() =&gt; {
    return properties.filter((property) =&gt; {
      // Simple visibility logic - can be enhanced with complex conditions
      if (property.displayOptions?.show) {
        const conditions = property.displayOptions.show;
        return Object.entries(conditions).every(([key, values]) =&gt; {
          const formValue = formState[key];
          return (values as any[]).includes(formValue);
        });
      }
      return true;
    });
  }, [properties, formState]);

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {visibleProperties.map((property) =&gt; {
        const error = validationErrors.get(property.name);
        const value = formState[property.name];

        return (
          &lt;div key={property.name} className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;label className=&quot;text-sm font-medium text-gray-300 flex items-center gap-2&quot;&gt;
                {property.label || property.name}
                {property.required &amp;&amp; &lt;span className=&quot;text-red-400&quot;&gt;*&lt;/span&gt;}
                {property.description &amp;&amp; (
                  &lt;Tooltip title={property.description}&gt;
                    &lt;InfoCircleOutlined className=&quot;text-gray-500&quot; /&gt;
                  &lt;/Tooltip&gt;
                )}
              &lt;/label&gt;
              {error &amp;&amp; (
                &lt;Tooltip title={error}&gt;
                  &lt;ExclamationCircleOutlined className=&quot;text-red-400&quot; /&gt;
                &lt;/Tooltip&gt;
              )}
            &lt;/div&gt;

            &lt;PropertyField
              property={property}
              value={value}
              onChange={(newValue) =&gt; handlePropertyChange(property.name, newValue)}
              disabled={disabled}
              theme={theme}
            /&gt;

            {error &amp;&amp; &lt;Alert message={error}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailOutputPanel.tsx (Line 93:4 - Line 306:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 95:4 - Line 308:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup84"><code class="language-javascript text-sm text-gray-800">={path} className=&quot;border-b border-gray-700 last:border-b-0&quot;&gt;
        &lt;div
          className={`flex items-center py-2 px-3 hover:bg-gray-700 transition-colors ${nestLevel &gt; 0 ? 'pl-8' : ''}`}
          style={{ paddingLeft: `${nestLevel * 24 + 12}px` }}
        &gt;
          {/* Toggle button for expandable items */}
          {hasChildren &amp;&amp; (
            &lt;button
              onClick={() =&gt; toggleExpanded(path)}
              className=&quot;mr-2 p-1 hover:bg-gray-600 rounded&quot;
            &gt;
              {isExpanded ? (
                &lt;ChevronDown className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              ) : (
                &lt;ChevronRight className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              )}
            &lt;/button&gt;
          )}
          {!hasChildren &amp;&amp; &lt;div className=&quot;w-6 mr-2&quot; /&gt;}

          {/* Property name pill */}
          &lt;div className=&quot;flex items-center bg-gray-600 rounded px-2 py-1 mr-3 min-w-0&quot;&gt;
            &lt;div className=&quot;mr-2 flex-shrink-0&quot;&gt;{getTypeIcon(value)}&lt;/div&gt;
            &lt;span className=&quot;text-sm font-medium text-white truncate&quot;&gt;
              {Array.isArray(value) ? `${key}` : key}
            &lt;/span&gt;
          &lt;/div&gt;

          {/* Value display */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            {!hasChildren ? (
              &lt;span className=&quot;text-sm text-gray-300 break-all&quot;&gt;
                {typeof value === 'string' &amp;&amp; value.includes('\n') ? (
                  &lt;div className=&quot;whitespace-pre-wrap&quot;&gt;{value}&lt;/div&gt;
                ) : (
                  String(value)
                )}
              &lt;/span&gt;
            ) : (
              &lt;span className=&quot;text-sm text-gray-400&quot;&gt;
                {Array.isArray(value) ? `Array (${value.length} items)` : 'Object'}
              &lt;/span&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Render children if expanded */}
        {hasChildren &amp;&amp; isExpanded &amp;&amp; (
          &lt;div&gt;
            {Array.isArray(value)
              ? value.map((item, index) =&gt;
                  renderSchemaItem(`[${index}]`, item, `${path}[${index}]`, nestLevel + 1)
                )
              : Object.entries(value).map(([childKey, childValue]) =&gt;
                  renderSchemaItem(childKey, childValue, `${path}.${childKey}`, nestLevel + 1)
                )}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    );
  };

  // Render table view
  const renderTableView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    const flattenObject = (obj: any, prefix = ''): Record&lt;string, any&gt; =&gt; {
      const result: Record&lt;string, any&gt; = {};

      for (const [key, value] of Object.entries(obj)) {
        const newKey = prefix ? `${prefix}.${key}` : key;

        if (Array.isArray(value)) {
          result[newKey] = value.join(', ');
        } else if (typeof value === 'object' &amp;&amp; value !== null) {
          // For nested objects, show a preview
          result[newKey] = `Object (${Object.keys(value).length} properties)`;
        } else {
          result[newKey] = value;
        }
      }

      return result;
    };

    const flatData = flattenObject(selectedEmail);

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;table className=&quot;w-full text-sm&quot;&gt;
          &lt;thead&gt;
            &lt;tr className=&quot;border-b border-gray-600&quot;&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Property&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Value&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Type&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            {Object.entries(flatData).map(([key, value]) =&gt; (
              &lt;tr key={key} className=&quot;border-b border-gray-700 hover:bg-gray-700&quot;&gt;
                &lt;td className=&quot;py-2 px-3 text-blue-300 font-mono text-xs&quot;&gt;{key}&lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-300 break-all&quot;&gt;
                  {typeof value === 'string' &amp;&amp; value.length &gt; 100
                    ? `${value.substring(0, 100)}...`
                    : String(value)}
                &lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-400 text-xs&quot;&gt;{typeof value}&lt;/td&gt;
              &lt;/tr&gt;
            ))}
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    );
  };

  // Render JSON view
  const renderJsonView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;pre className=&quot;text-sm text-gray-300 whitespace-pre-wrap p-4 bg-gray-900 rounded border border-gray-600 font-mono&quot;&gt;
          {JSON.stringify(filteredData || selectedEmail, null, 2)}
        &lt;/pre&gt;
      &lt;/div&gt;
    );
  };

  const renderContent = () =&gt; {
    if (!selectedEmail) {
      return (
        &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
              &lt;span className=&quot;text-2xl&quot;&gt;📧&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;p className=&quot;mb-2&quot;&gt;Select an email from the input column&lt;/p&gt;
          &lt;p className=&quot;text-gray-400&quot;&gt;to view its detailed structure&lt;/p&gt;
        &lt;/div&gt;
      );
    }

    switch (displayMode) {
      case 'schema':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            {filteredData ? (
              Object.entries(filteredData).map(([key, value]) =&gt; renderSchemaItem(key, value, key))
            ) : (
              &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No matching data found&lt;/div&gt;
            )}
          &lt;/div&gt;
        );
      case 'table':
        return renderTableView();
      case 'json':
        return renderJsonView();
      default:
        return null;
    }
  };

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
            OUTPUT
            {selectedEmail &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Email selected&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {selectedEmail &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search email data&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailInputPanel.tsx (Line 112:6 - Line 236:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailinputpanel/EmailInputPanel.tsx (Line 113:6 - Line 237:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup86"><code class="language-javascript text-sm text-gray-800">={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              placeholder=&quot;Search emails...&quot;
              className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
            /&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Email List */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;
        {emails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
                &lt;Mail className=&quot;w-8 h-8 text-gray-400&quot; /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;p className=&quot;mb-2&quot;&gt;No emails loaded&lt;/p&gt;
            &lt;p className=&quot;text-gray-400&quot;&gt;Test the Gmail trigger to see emails&lt;/p&gt;
          &lt;/div&gt;
        ) : filteredEmails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;p&gt;No emails match your search&lt;/p&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-1 p-2&quot;&gt;
            {filteredEmails.map((email, index) =&gt; {
              const isSelected = selectedEmailId === email.id;
              const senderName = getSenderName(email.from);
              const avatarColor = getAvatarColor(email.from);

              return (
                &lt;div
                  key={email.id || index}
                  onClick={() =&gt; onEmailSelect(email)}
                  className={`p-3 rounded-lg cursor-pointer transition-all duration-200 border ${
                    isSelected
                      ? 'bg-blue-600 border-blue-500 text-white'
                      : 'bg-gray-800 border-gray-700 hover:bg-gray-700 hover:border-gray-600 text-gray-100'
                  }`}
                &gt;
                  &lt;div className=&quot;flex items-start space-x-3&quot;&gt;
                    {/* Avatar */}
                    &lt;div
                      className={`w-8 h-8 rounded-full ${avatarColor} flex items-center justify-center flex-shrink-0 text-white text-sm font-medium`}
                    &gt;
                      {senderName.charAt(0).toUpperCase()}
                    &lt;/div&gt;

                    {/* Email Content */}
                    &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
                      {/* Header */}
                      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
                        &lt;div className=&quot;flex items-center space-x-2 min-w-0&quot;&gt;
                          &lt;span
                            className={`font-medium text-sm truncate ${
                              isSelected ? 'text-white' : 'text-gray-200'
                            }`}
                          &gt;
                            {senderName}
                          &lt;/span&gt;

                          {/* Indicators */}
                          &lt;div className=&quot;flex items-center space-x-1 flex-shrink-0&quot;&gt;
                            {email.hasAttachments &amp;&amp; (
                              &lt;Paperclip className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                            )}
                            {email.isUnread &amp;&amp; (
                              &lt;div className=&quot;w-2 h-2 bg-blue-400 rounded-full&quot;&gt;&lt;/div&gt;
                            )}
                            {email.labels?.includes('STARRED') &amp;&amp; (
                              &lt;Star className=&quot;w-3 h-3 text-yellow-400 fill-current&quot; /&gt;
                            )}
                          &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div className=&quot;flex items-center space-x-2 flex-shrink-0&quot;&gt;
                          &lt;Clock className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                          &lt;span
                            className={`text-xs ${isSelected ? 'text-blue-100' : 'text-gray-400'}`}
                          &gt;
                            {formatDate(email.date)}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      {/* Subject */}
                      &lt;div
                        className={`text-sm font-medium mb-1 truncate ${
                          isSelected ? 'text-white' : 'text-gray-100'
                        }`}
                      &gt;
                        {email.subject || '(No subject)'}
                      &lt;/div&gt;

                      {/* Snippet */}
                      &lt;div
                        className={`text-xs leading-relaxed line-clamp-2 ${
                          isSelected ? 'text-blue-100' : 'text-gray-400'
                        }`}
                      &gt;
                        {email.snippet || email.body || 'No content preview available'}
                      &lt;/div&gt;

                      {/* Labels */}
                      {email.labels &amp;&amp; email.labels.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;flex flex-wrap gap-1 mt-2&quot;&gt;
                          {email.labels.slice(0, 3).map((label: string) =&gt; (
                            &lt;span
                              key={label}
                              className={`px-2 py-1 text-xs rounded-full ${
                                isSelected
                                  ? 'bg-blue-700 text-blue-100'
                                  : 'bg-gray-700 text-gray-300'
                              }`}
                            &gt;
                              {label}
                            &lt;/span&gt;
                          ))}
                          {email.labels.length &gt; 3 &amp;&amp; (
                            &lt;span
                              className={`text-xs ${
                                isSelected ? 'text-blue-200' : 'text-gray-400'
                              }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DynamicPropertyRenderer.tsx (Line 167:6 - Line 751:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 172:6 - Line 756:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup88"><code class="language-javascript text-sm text-gray-800">={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={property.rows || 4}
            autoSize={{ minRows: property.rows || 4, maxRows: 10 }}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            value={value as number}
            onChange={(val) =&gt; onChange(val)}
            min={property.min}
            max={property.max}
            step={property.step || 1}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch checked={(value as boolean) || false} onChange={onChange} disabled={isDisabled} /&gt;
        );

      case 'select':
        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={onChange}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={(value as string[]) || []}
            onChange={onChange}
            className=&quot;ant-select-multiple&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            tagRender={(props) =&gt; {
              const { label, closable, onClose } = props;
              return (
                &lt;span
                  style={{
                    backgroundColor: '#1f2937',
                    border: '1px solid #4b5563',
                    color: '#ffffff',
                    borderRadius: '4px',
                    padding: '2px 8px',
                    margin: '2px',
                    display: 'inline-flex',
                    alignItems: 'center',
                    fontSize: '12px',
                  }}
                &gt;
                  {label}
                  {closable &amp;&amp; (
                    &lt;span
                      onClick={onClose}
                      style={{
                        marginLeft: '4px',
                        cursor: 'pointer',
                        color: '#9ca3af',
                      }}
                      onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ffffff')}
                      onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#9ca3af')}
                    &gt;
                      ×
                    &lt;/span&gt;
                  )}
                &lt;/span&gt;
              );
            }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'credentialsSelect': {
        // Get available credentials from context (registry system)
        const credentialTypes = property.credentialTypes || [];
        const availableCredentials =
          context.credentials?.filter(
            (cred: any) =&gt; credentialTypes.length === 0 || credentialTypes.includes(cred.type)
          ) || [];

        // Debug logging for credential filtering
        if (property.name === 'credential' &amp;&amp; credentialTypes.includes('gmailOAuth2')) {
        }

        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={(selectedValue) =&gt; {
              onChange(selectedValue);

              // Sync with the other credential field
              if (context.onCredentialChange) {
                context.onCredentialChange(selectedValue);
              }

              // Trigger auto-population if a credential is selected
              if (selectedValue &amp;&amp; context.onCredentialSelect) {
                const selectedCredential = availableCredentials.find(
                  (cred: any) =&gt; cred.id === selectedValue
                );
                if (selectedCredential) {
                  context.onCredentialSelect(selectedCredential);
                }
              }
            }}
            placeholder=&quot;Select a credential...&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            dropdownRender={(menu) =&gt; (
              &lt;div&gt;
                {menu}
                {credentialTypes.length &gt; 0 &amp;&amp; (
                  &lt;div
                    style={{
                      padding: '8px',
                      borderTop: '1px solid #6b7280',
                      backgroundColor: '#374151',
                    }}
                  &gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      onClick={() =&gt; {
                        // Trigger credential creation modal
                        if (context.onCreateCredential) {
                          context.onCreateCredential(credentialTypes[0]);
                        } else {
                        }
                      }}
                      style={{
                        color: '#3b82f6',
                        padding: '2px 8px',
                        height: 'auto',
                      }}
                    &gt;
                      + Create New Credential
                    &lt;/Button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &gt;
            &lt;Option value=&quot;&quot; style={{ backgroundColor: '#374151', color: '#ffffff' }}&gt;
              No credential selected
            &lt;/Option&gt;
            {availableCredentials.map((credential: any) =&gt; {
              const credTypeDef = context.credentialTypes?.find(
                (ct: any) =&gt; ct.name === credential.type
              );
              const icon =
                credTypeDef?.icon &amp;&amp; typeof credTypeDef.icon === 'string'
                  ? credTypeDef.icon
                  : getCredentialIcon(credential.type);
              const displayName =
                credential.name || `${credTypeDef?.displayName || credential.type} Credential`;

              return (
                &lt;Option
                  key={credential.id}
                  value={credential.id}
                  style={{ backgroundColor: '#374151', color: '#ffffff' }}
                &gt;
                  &lt;div
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '8px',
                    }}
                  &gt;
                    &lt;span style={{ fontSize: '14px' }}&gt;{icon}&lt;/span&gt;
                    &lt;div style={{ flex: 1 }}&gt;
                      &lt;div style={{ fontWeight: 500 }}&gt;{displayName}&lt;/div&gt;
                      &lt;div style={{ fontSize: '11px', color: '#9ca3af' }}&gt;
                        {credential.testedAt
                          ? credential.isValid
                            ? '✓ Tested'
                            : '⚠ Test failed'
                          : 'Not tested'}
                        {credential.updatedAt &amp;&amp; (
                          &lt;span style={{ marginLeft: '8px' }}&gt;
                            {new Date(credential.updatedAt).toLocaleDateString()}
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div style={{ display: 'flex', gap: '4px' }}&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onEditCredential) {
                            context.onEditCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#3b82f6')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Edit credential&quot;
                      &gt;
                        ✏️
                      &lt;/button&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onDeleteCredential &amp;&amp; confirm(`Delete &quot;${displayName}&quot;?`)) {
                            context.onDeleteCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ef4444')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Delete credential&quot;
                      &gt;
                        🗑️
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Option&gt;
              );
            })}
          &lt;/Select&gt;
        );
      }

      case 'dateTime':
        return (
          &lt;DatePicker
            {...commonProps}
            showTime
            value={value ? new Date(value as string) : null}
            onChange={(date) =&gt; onChange(date?.toISOString() || null)}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={(value as string) || '#000000'}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={isDisabled}
          /&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || '{}'}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={6}
            placeholder=&quot;Enter valid JSON...&quot;
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            {...commonProps}
            onChange={(info) =&gt; {
              if (info.file.status === 'done') {
                onChange(info.file.response?.url || info.file.name);
              }
            }}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;} disabled={isDisabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      default:
        return (
          &lt;Input
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const collectionValue = (value as any[]) || [];
    const isMultiple = property.typeOptions?.multipleValues;

    if (!isMultiple) {
      // Single collection item
      const itemValue = collectionValue[0] || {};
      return (
        &lt;Card
          size=&quot;small&quot;
          style={{
            marginBottom: 8,
            backgroundColor: themeStyles.backgroundColor,
            borderColor: themeStyles.borderColor,
            color: themeStyles.color,
          }}
        &gt;
          {property.values?.map((valueProperty: any) =&gt; (
            &lt;PropertyField
              key={valueProperty.name}
              property={valueProperty as INodeProperty}
              value={itemValue[valueProperty.name]}
              onChange={(newValue) =&gt; {
                const newItem = {
                  ...itemValue,
                  [valueProperty.name]: newValue,
                };
                onChange([newItem]);
              }}
              context={context}
              disabled={isDisabled}
              theme={theme}
            /&gt;
          ))}
        &lt;/Card&gt;
      );
    }

    // Multiple collection items
    return (
      &lt;div&gt;
        {collectionValue.map((item, index) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: 8,
              backgroundColor: themeStyles.backgroundColor,
              borderColor: themeStyles.borderColor,
              color: themeStyles.color,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;DeleteOutlined /&gt;}
                onClick={() =&gt; {
                  const newValue = collectionValue.filter((_, i) =&gt; i !== index);
                  onChange(newValue);
                }}
                disabled={isDisabled}
              /&gt;
            }
          &gt;
            {property.values?.map((valueProperty: any) =&gt; (
              &lt;PropertyField
                key={`${index}-${valueProperty.name}`}
                property={valueProperty as INodeProperty}
                value={item[valueProperty.name]}
                onChange={(newValue) =&gt; {
                  const newItems = [...collectionValue];
                  newItems[index] = {
                    ...newItems[index],
                    [valueProperty.name]: newValue,
                  };
                  onChange(newItems);
                }}
                context={context}
                disabled={isDisabled}
                theme={theme}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const defaultItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((valueProperty: any) =&gt; {
              defaultItem[valueProperty.name] =
                valueProperty.default !== undefined ? valueProperty.default : '';
            });
            onChange([...collectionValue, defaultItem]);
          }}
          disabled={isDisabled}
          block
          style={{
            backgroundColor: '#4b5563', // Darker background
            borderColor: '#6b7280', // Lighter border
            color: '#ffffff', // Pure white text
          }}
        &gt;
          {property.typeOptions?.multipleValueButtonText || `Add ${property.displayName}`}
        &lt;/Button&gt;
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    if (property.type === 'collection' || property.type === 'fixedCollection') {
      return renderCollectionField();
    }
    return renderBasicField();
  };

  return (
    &lt;div className=&quot;mb-4&quot;&gt;
      {/* Custom label for dark theme */}
      &lt;label className=&quot;block text-sm font-medium text-gray-100 mb-2&quot;&gt;
        {property.displayName}
        {evaluation.required &amp;&amp; &lt;span className=&quot;text-red-400 ml-1&quot;&gt;*&lt;/span&gt;}
      &lt;/label&gt;

      {/* Form field */}
      {renderField()}

      {/* Description */}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-300 mt-1&quot;&gt;{property.description}&lt;/div&gt;
      )}

      {/* Error messages */}
      {hasErrors &amp;&amp; (
        &lt;div className=&quot;mt-1&quot;&gt;
          &lt;div className=&quot;text-xs text-red-300&quot;&gt;Validation error occurred&lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

const DynamicPropertyRenderer: React.FC&lt;DynamicPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  context = {},
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const credentialProp = properties.find((p) =&gt; p.name === 'credential');
  if (credentialProp) {
  }

  const [localFormState, setLocalFormState] = useState&lt;PropertyFormState&gt;(formState);

  // Update local state when props change
  useEffect(() =&gt; {
    setLocalFormState(formState);
  }, [formState]);

  const evaluationContext: PropertyEvaluationContext = {
    formState: localFormState,
    nodeData: context.nodeData,
    credentials: context.credentials,
    workflow: context.workflow,
  };

  const handleChange = useCallback(
    (name: string, value: PropertyValue) =&gt; {
      const newFormState = { ...localFormState, [name]: value };
      setLocalFormState(newFormState);
      onChange(name, value);
    },
    [localFormState, onChange]
  );

  // Group properties if they have grouping information
  const groupedProperties = properties.reduce(
    (groups, property) =&gt; {
      const groupName = 'default'; // Can be extended to support property groups
      if (!groups[groupName]) {
        groups[groupName] = [];
      }
      groups[groupName].push(property);
      return groups;
    },
    {} as Record&lt;string, INodeProperty[]&gt;
  );

  return (
    &lt;div className=&quot;dynamic-property-renderer&quot;&gt;
      {Object.entries(groupedProperties).map(([groupName, groupProperties]) =&gt; (
        &lt;div key={groupName}&gt;
          {(groupProperties as INodeProperty[]).map((property: any, index: number) =&gt; (
            &lt;PropertyField
              key={`${property.name}-${index}`}
              property={property}
              value={localFormState[property.name]}
              onChange={(value) =&gt; handleChange(property.name, value)}
              context={evaluationContext}
              disabled={disabled}
              theme={theme}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DebugPanel.tsx (Line 235:6 - Line 786:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/debugpanel/DebugPanel.tsx (Line 240:6 - Line 791:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup90"><code class="language-javascript text-sm text-gray-800">={5} className=&quot;text-white mb-0&quot;&gt;
              Debug Controls
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Badge
              status={getStatusColor() as any}
              text={getStatusText()}
              className=&quot;text-gray-300&quot;
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          {!isDebugging ? (
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={startDebugging}
              disabled={!workflowId || !executionId}
            &gt;
              Start Debugging
            &lt;/Button&gt;
          ) : (
            &lt;&gt;
              {isPaused ? (
                &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} onClick={resumeExecution}&gt;
                  Resume
                &lt;/Button&gt;
              ) : (
                &lt;Button icon={&lt;PauseCircleOutlined /&gt;} onClick={pauseExecution}&gt;
                  Pause
                &lt;/Button&gt;
              )}

              &lt;Button
                icon={&lt;StepForwardOutlined /&gt;}
                onClick={stepOver}
                disabled={!isPaused}
                title=&quot;Step Over&quot;
              /&gt;

              &lt;Button
                icon={&lt;StepBackwardOutlined /&gt;}
                onClick={stepInto}
                disabled={!isPaused}
                title=&quot;Step Into&quot;
              /&gt;

              &lt;Button
                icon={&lt;StopOutlined /&gt;}
                onClick={stepOut}
                disabled={!isPaused}
                title=&quot;Step Out&quot;
              /&gt;

              &lt;Button danger icon={&lt;StopOutlined /&gt;} onClick={stopDebugging}&gt;
                Stop
              &lt;/Button&gt;
            &lt;/&gt;
          )}
        &lt;/div&gt;

        {session &amp;&amp; (
          &lt;div className=&quot;grid grid-cols-2 gap-4 text-sm&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Session ID:&lt;/Text&gt;
              &lt;div className=&quot;text-white font-mono&quot;&gt;{session.id}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Step Count:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.stepCount}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Duration:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;
                {Math.round((Date.now() - session.startTime) / 1000)}s
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Current Node:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.currentNodeId || 'None'}&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderBreakpoints = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Breakpoints
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsBreakpointModalOpen(true)}
        &gt;
          Add Breakpoint
        &lt;/Button&gt;
      &lt;/div&gt;

      {session &amp;&amp; session.breakpoints.size === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;BugOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No breakpoints set&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add breakpoints to pause execution at specific nodes&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Array.from(session?.breakpoints.entries() || []).map(([nodeId, breakpoints]) =&gt;
            breakpoints.map((breakpoint) =&gt; (
              &lt;Card key={breakpoint.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                    &lt;Switch
                      size=&quot;small&quot;
                      checked={breakpoint.enabled}
                      onChange={() =&gt; toggleBreakpoint(nodeId, breakpoint.id)}
                    /&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-white text-sm font-medium&quot;&gt;Node: {nodeId}&lt;/div&gt;
                      {breakpoint.condition &amp;&amp; (
                        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                          Condition: {breakpoint.condition}
                        &lt;/div&gt;
                      )}
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;Hits: {breakpoint.hitCount}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Badge
                      count={breakpoint.hitCount}
                      size=&quot;small&quot;
                      style={{ backgroundColor: '#1890ff' }}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;DeleteOutlined /&gt;}
                      onClick={() =&gt; removeBreakpoint(nodeId, breakpoint.id)}
                      className=&quot;text-red-400 hover:text-red-300&quot;
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            ))
          )}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderWatchExpressions = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Watch Expressions
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsWatchModalOpen(true)}
        &gt;
          Add Watch
        &lt;/Button&gt;
      &lt;/div&gt;

      {watchExpressions.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;EyeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No watch expressions&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add expressions to monitor variable values&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {watchExpressions.map((watch) =&gt; (
            &lt;Card key={watch.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;flex-1&quot;&gt;
                  &lt;div className=&quot;text-white text-sm font-mono&quot;&gt;{watch.expression}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs mt-1&quot;&gt;
                    {watch.error ? (
                      &lt;span className=&quot;text-red-400&quot;&gt;Error: {watch.error}&lt;/span&gt;
                    ) : (
                      &lt;&gt;
                        &lt;span className=&quot;text-green-400&quot;&gt;Value: &lt;/span&gt;
                        &lt;span className=&quot;font-mono&quot;&gt;
                          {typeof watch.value === 'object'
                            ? JSON.stringify(watch.value)
                            : String(watch.value)}
                        &lt;/span&gt;
                        &lt;span className=&quot;text-gray-500 ml-2&quot;&gt;({watch.type})&lt;/span&gt;
                      &lt;/&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; removeWatchExpression(watch.id)}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderCallStack = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Call Stack
      &lt;/Title&gt;

      {callStack.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;CodeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;Call stack is empty&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see the call stack&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={callStack.map((frame, index) =&gt; ({
            color: index === callStack.length - 1 ? 'blue' : 'gray',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{frame.nodeName}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;{frame.nodeType}&lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(frame.timestamp).toLocaleTimeString()}
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderVariables = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Variables
      &lt;/Title&gt;

      {Object.keys(variables).length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;InfoCircleOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No variables available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Variables will appear during execution&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(variables).map(([key, value]) =&gt; (
            &lt;Card key={key} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{key}&lt;/div&gt;
                &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1} maxHeight=&quot;200px&quot; /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderExecutionHistory = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Execution History
      &lt;/Title&gt;

      {executionHistory.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;HistoryOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No execution history&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Execution steps will appear here&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={executionHistory.map((step) =&gt; ({
            color:
              step.action === 'error' ? 'red' : step.action === 'breakpoint' ? 'orange' : 'blue',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-white font-medium&quot;&gt;{step.nodeId}&lt;/span&gt;
                  &lt;Tag
                    color={
                      step.action === 'error'
                        ? 'red'
                        : step.action === 'breakpoint'
                          ? 'orange'
                          : step.action === 'start'
                            ? 'blue'
                            : 'green'
                    }
                  &gt;
                    {step.action}
                  &lt;/Tag&gt;
                &lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(step.timestamp).toLocaleTimeString()}
                  {step.duration &amp;&amp; ` (${step.duration}ms)`}
                &lt;/div&gt;
                {step.error &amp;&amp; (
                  &lt;div className=&quot;text-red-400 text-xs&quot;&gt;Error: {step.error.message}&lt;/div&gt;
                )}
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderMetrics = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Debug Metrics
      &lt;/Title&gt;

      {!metrics ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;SettingOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No metrics available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see performance metrics&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{metrics.totalSteps}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Steps&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{metrics.breakpointHits}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Breakpoint Hits&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-red-400&quot;&gt;{metrics.errors}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Errors&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;
                {Math.round(metrics.averageStepTime)}ms
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Avg Step Time&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{metrics.callStackDepth}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Call Stack Depth&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-yellow-400&quot;&gt;
                {Math.round(metrics.memoryUsage)}MB
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Memory Usage&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;BugOutlined className=&quot;text-red-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Debug Panel
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced debugging tools for workflow execution
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        {renderDebugControls()}

        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;debug-tabs&quot;
          items={[
            {
              key: 'breakpoints',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Breakpoints
                  {session &amp;&amp; session.breakpoints.size &gt; 0 &amp;&amp; (
                    &lt;Badge
                      count={Array.from(session.breakpoints.values()).flat().length}
                      size=&quot;small&quot;
                      className=&quot;ml-2&quot;
                    /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderBreakpoints(),
            },
            {
              key: 'watch',
              label: (
                &lt;span&gt;
                  &lt;EyeOutlined className=&quot;mr-1&quot; /&gt;
                  Watch
                  {watchExpressions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={watchExpressions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderWatchExpressions(),
            },
            {
              key: 'callstack',
              label: (
                &lt;span&gt;
                  &lt;CodeOutlined className=&quot;mr-1&quot; /&gt;
                  Call Stack
                  {callStack.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={callStack.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderCallStack(),
            },
            {
              key: 'variables',
              label: (
                &lt;span&gt;
                  &lt;InfoCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Variables
                  {Object.keys(variables).length &gt; 0 &amp;&amp; (
                    &lt;Badge count={Object.keys(variables).length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderVariables(),
            },
            {
              key: 'history',
              label: (
                &lt;span&gt;
                  &lt;HistoryOutlined className=&quot;mr-1&quot; /&gt;
                  History
                  {executionHistory.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={executionHistory.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderExecutionHistory(),
            },
            {
              key: 'metrics',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Metrics
                &lt;/span&gt;
              ),
              children: renderMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Add Breakpoint Modal */}
      &lt;Modal
        title=&quot;Add Breakpoint&quot;
        open={isBreakpointModalOpen}
        onCancel={() =&gt; setIsBreakpointModalOpen(false)}
        onOk={() =&gt; {
          if (selectedNodeId) {
            addBreakpoint(selectedNodeId);
            setIsBreakpointModalOpen(false);
            setSelectedNodeId('');
          }
        }}
        width={400}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Node ID&quot; required&gt;
            &lt;Input
              value={selectedNodeId}
              onChange={(e) =&gt; setSelectedNodeId(e.target.value)}
              placeholder=&quot;Enter node ID&quot;
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Add Watch Expression Modal */}
      &lt;Modal
        title=&quot;Add Watch Expression&quot;
        open={isWatchModalOpen}
        onCancel={() =&gt; setIsWatchModalOpen(false)}
        onOk={addWatchExpression}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Expression&quot; required&gt;
            &lt;Input
              value={newWatchExpression}
              onChange={(e) =&gt; setNewWatchExpression(e.target.value)}
              placeholder=&quot;e.g., $input.user.name, variables.count, $output.result&quot;
            /&gt;
          &lt;/Form.Item&gt;
          &lt;Alert
            message=&quot;Expression Examples&quot;
            description={
              &lt;ul className=&quot;mt-2 text-sm&quot;&gt;
                &lt;li&gt;
                  &lt;code&gt;$input.user.name&lt;/code&gt; - Access input data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;$output.result&lt;/code&gt; - Access output data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;variables.count&lt;/code&gt; - Access workflow variables
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;JSON.stringify($input)&lt;/code&gt; - Convert to JSON
                &lt;/li&gt;
              &lt;/ul&gt;
            }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DataInspector.tsx (Line 138:4 - Line 595:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/datainspector/DataInspector.tsx (Line 141:4 - Line 598:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup92"><code class="language-javascript text-sm text-gray-800">={node.key}
        title={
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;span className=&quot;text-white&quot;&gt;{node.title}&lt;/span&gt;
            &lt;Tag color={getTypeColor(node.type)}&gt;{node.type}&lt;/Tag&gt;
            &lt;span className=&quot;text-gray-400 text-xs&quot;&gt;{formatSize(node.size)}&lt;/span&gt;
          &lt;/div&gt;
        }
        isLeaf={node.isLeaf}
      &gt;
        {node.children &amp;&amp; renderTreeNodes(node.children)}
      &lt;/TreeNode&gt;
    ));
  }, []);

  const renderDataTable = useCallback(() =&gt; {
    if (!Array.isArray(selectedData)) {
      return &lt;Alert message=&quot;Table view only available for arrays&quot; type=&quot;info&quot; showIcon /&gt;;
    }

    const columns = getTableColumns(selectedData);
    const tableData = selectedData.map((item, index) =&gt; ({
      key: index,
      index,
      ...item,
    }));

    return (
      &lt;Table
        columns={columns}
        dataSource={tableData}
        pagination={{ pageSize: 10 }}
        size=&quot;small&quot;
        className=&quot;bg-gray-800&quot;
        scroll={{ x: 'max-content' }}
      /&gt;
    );
  }, [selectedData]);

  const renderDataAnalysis = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white&quot;&gt;
        Data Analysis
      &lt;/Title&gt;

      &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{dataStats.totalSize}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Size&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;{dataStats.depth}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Max Depth&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{dataStats.keyCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Keys&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{dataStats.arrayCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Arrays&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      &lt;/div&gt;

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
          Type Distribution
        &lt;/Title&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(dataStats.typeDistribution).map(([type, count]) =&gt; (
            &lt;div key={type} className=&quot;flex items-center justify-between&quot;&gt;
              &lt;span className=&quot;text-gray-300&quot;&gt;{type}&lt;/span&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Progress
                  percent={(count / dataStats.keyCount) * 100}
                  strokeColor={getTypeColor(type)}
                  showInfo={false}
                  size=&quot;small&quot;
                  className=&quot;flex-1&quot;
                /&gt;
                &lt;span className=&quot;text-gray-400 text-sm w-8&quot;&gt;{count}&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const content = (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;EyeOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
            &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
              Data Inspector
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={isFullscreen ? &lt;CompressOutlined /&gt; : &lt;ExpandOutlined /&gt;}
              onClick={() =&gt; setIsFullscreen(!isFullscreen)}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
            {onClose &amp;&amp; (
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                onClick={onClose}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              &gt;
                Close
              &lt;/Button&gt;
            )}
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-4 text-sm&quot;&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Node:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{nodeId}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Type:&lt;/Text&gt;
            &lt;Tag color={getTypeColor(type)} className=&quot;ml-1&quot;&gt;
              {type}
            &lt;/Tag&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Size:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{formatSize(dataStats.totalSize)}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;div className=&quot;flex items-center gap-4 mb-4&quot;&gt;
          &lt;Search
            placeholder=&quot;Search data...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;flex-1&quot;
            prefix={&lt;SearchOutlined className=&quot;text-gray-400&quot; /&gt;}
          /&gt;

          &lt;Select value={filterType} onChange={setFilterType} className=&quot;w-32&quot;&gt;
            &lt;Option value=&quot;all&quot;&gt;All Types&lt;/Option&gt;
            &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
            &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
            &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
            &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
            &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select value={viewMode} onChange={setViewMode} className=&quot;w-24&quot;&gt;
            &lt;Option value=&quot;tree&quot;&gt;Tree&lt;/Option&gt;
            &lt;Option value=&quot;json&quot;&gt;JSON&lt;/Option&gt;
            &lt;Option value=&quot;table&quot;&gt;Table&lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Selected Path:&lt;/Text&gt;
            &lt;Text className=&quot;text-white font-mono text-sm&quot;&gt;{selectedPath || 'root'}&lt;/Text&gt;
          &lt;/div&gt;

          &lt;Space&gt;
            &lt;Tooltip title=&quot;Copy Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={handleCopyData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
            &lt;Tooltip title=&quot;Export Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;DownloadOutlined /&gt;}
                onClick={handleExportData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Tabs
          activeKey={viewMode}
          onChange={(key) =&gt; setViewMode(key as 'tree' | 'json' | 'table')}
          items={[
            {
              key: 'tree',
              label: 'Tree View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto border border-gray-600 rounded bg-gray-800&quot;&gt;
                  &lt;Tree
                    showLine
                    defaultExpandAll={false}
                    expandedKeys={expandedKeys}
                    selectedKeys={selectedPath ? [selectedPath] : []}
                    onSelect={handleTreeSelect}
                    onExpand={handleExpand}
                    className=&quot;p-4&quot;
                  &gt;
                    {renderTreeNodes(filteredTree)}
                  &lt;/Tree&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'json',
              label: 'JSON View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto&quot;&gt;
                  &lt;JsonViewer
                    data={selectedData}
                    theme=&quot;dark&quot;
                    collapsed={2}
                    maxHeight=&quot;100%&quot;
                    enableClipboard
                  /&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'table',
              label: 'Table View',
              children: &lt;div className=&quot;h-96 overflow-auto&quot;&gt;{renderDataTable()}&lt;/div&gt;,
            },
          ]}
        /&gt;

        &lt;Divider className=&quot;my-4&quot; /&gt;

        {renderDataAnalysis()}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  if (isFullscreen) {
    return (
      &lt;Modal
        title=&quot;Data Inspector - Fullscreen&quot;
        open={isFullscreen}
        onCancel={() =&gt; setIsFullscreen(false)}
        footer={null}
        width=&quot;90vw&quot;
        style={{ top: 20 }}
        bodyStyle={{ height: '80vh', padding: 0 }}
      &gt;
        {content}
      &lt;/Modal&gt;
    );
  }

  return content;
};

// Helper functions

function convertToTree(data: any, path: string, _key: string): DataNode[] {
  if (data === null || data === undefined) {
    return [
      {
        key: path || 'root',
        title: 'null',
        value: data,
        type: 'null',
        size: 0,
        path: path || 'root',
        isLeaf: true,
      },
    ];
  }

  if (Array.isArray(data)) {
    return [
      {
        key: path || 'root',
        title: `Array (${data.length} items)`,
        value: data,
        type: 'array',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: data.flatMap((item, index) =&gt;
          convertToTree(item, `${path}[${index}]`, `[${index}]`)
        ),
      },
    ];
  }

  if (typeof data === 'object') {
    const entries = Object.entries(data);
    return [
      {
        key: path || 'root',
        title: `Object (${entries.length} properties)`,
        value: data,
        type: 'object',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: entries.flatMap(([key, value]) =&gt;
          convertToTree(value, path ? `${path}.${key}` : key, key)
        ),
      },
    ];
  }

  return [
    {
      key: path || 'root',
      title: String(data),
      value: data,
      type: typeof data,
      size: JSON.stringify(data).length,
      path: path || 'root',
      isLeaf: true,
    },
  ];
}

function filterTree(nodes: DataNode[], searchTerm: string, filterType: string): DataNode[] {
  if (!searchTerm &amp;&amp; filterType === 'all') return nodes;

  return nodes
    .filter((node) =&gt; {
      const matchesSearch =
        !searchTerm ||
        node.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        node.path.toLowerCase().includes(searchTerm.toLowerCase());

      const matchesType = filterType === 'all' || node.type === filterType;

      return matchesSearch &amp;&amp; matchesType;
    })
    .map((node) =&gt; ({
      ...node,
      children: node.children ? filterTree(node.children, searchTerm, filterType) : undefined,
    }));
}

function getDataByPath(data: any, path: string): any {
  if (path === 'root' || !path) return data;

  try {
    return path.split('.').reduce((obj, key) =&gt; {
      if (key.includes('[') &amp;&amp; key.includes(']')) {
        const arrayKey = key.substring(0, key.indexOf('['));
        const index = parseInt(key.substring(key.indexOf('[') + 1, key.indexOf(']')), 10);
        return obj[arrayKey][index];
      }
      return obj[key];
    }, data);
  } catch (_error) {
    return undefined;
  }
}

function analyzeData(data: any): {
  totalSize: number;
  depth: number;
  keyCount: number;
  arrayCount: number;
  typeDistribution: Record&lt;string, number&gt;;
} {
  const stats = {
    totalSize: JSON.stringify(data).length,
    depth: 0,
    keyCount: 0,
    arrayCount: 0,
    typeDistribution: {} as Record&lt;string, number&gt;,
  };

  function analyze(obj: any, currentDepth: number = 0) {
    stats.depth = Math.max(stats.depth, currentDepth);

    if (Array.isArray(obj)) {
      stats.arrayCount++;
      stats.typeDistribution.array = (stats.typeDistribution.array || 0) + 1;
      obj.forEach((item) =&gt; analyze(item, currentDepth + 1));
    } else if (obj !== null &amp;&amp; typeof obj === 'object') {
      stats.typeDistribution.object = (stats.typeDistribution.object || 0) + 1;
      Object.entries(obj).forEach(([_key, value]) =&gt; {
        stats.keyCount++;
        analyze(value, currentDepth + 1);
      });
    } else {
      const type = typeof obj;
      stats.typeDistribution[type] = (stats.typeDistribution[type] || 0) + 1;
    }
  }

  analyze(data);
  return stats;
}

function getTypeColor(type: string): string {
  switch (type) {
    case 'string':
      return 'green';
    case 'number':
      return 'blue';
    case 'boolean':
      return 'orange';
    case 'object':
      return 'purple';
    case 'array':
      return 'cyan';
    case 'null':
      return 'gray';
    case 'undefined':
      return 'red';
    default:
      return 'default';
  }
}

function formatSize(bytes: number): string {
  if (bytes &lt; 1024) return `${bytes} B`;
  if (bytes &lt; 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}

function getTableColumns(data: any[]): any[] {
  if (data.length === 0) return [];

  const sample = data[0];
  if (typeof sample !== 'object' || Array.isArray(sample)) {
    return [
      { title: 'Index', dataIndex: 'index', key: 'index' },
      { title: 'Value', dataIndex: '0', key: 'value' },
    ];
  }

  return Object.keys(sample).map((key) =&gt; ({
    title: key,
    dataIndex: key,
    key,
    render: (value: any) =&gt; {
      if (typeof value === 'object') {
        return &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CustomEdge.tsx (Line 198:10 - Line 290:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 207:10 - Line 299:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup94"><code class="language-javascript text-sm text-gray-800">={bringToFront ? 'bring-to-front' : ''}
      style={{ zIndex: bringToFront ? 1 : 0 }}
    &gt;
      {/* Arrow marker definition */}
      &lt;defs&gt;
        &lt;marker
          id={`arrowhead-${id}`}
          markerWidth=&quot;10&quot;
          markerHeight=&quot;7&quot;
          refX=&quot;9&quot;
          refY=&quot;3.5&quot;
          orient=&quot;auto&quot;
        &gt;
          &lt;polygon
            points=&quot;0 0, 10 3.5, 0 7&quot;
            fill={delayedHovered || isHovered ? '#3b82f6' : getEdgeColor()}
            style={{
              transition: 'fill 0.3s ease',
            }}
          /&gt;
        &lt;/marker&gt;
      &lt;/defs&gt;
      {segments.map((segment, index) =&gt; (
        &lt;React.Fragment key={`${id}-${index}`}&gt;
          {/* Invisible wider path for easier hover detection */}
          &lt;path
            d={segment[0]}
            style={{
              stroke: 'transparent',
              strokeWidth: 40,
              fill: 'none',
            }}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          /&gt;

          {/* Visible edge path */}
          &lt;path
            d={segment[0]}
            style={getEdgeStyle()}
            className={`react-flow__edge-path ${isHovered || delayedHovered ? 'hovered' : ''}`}
            markerEnd={`url(#arrowhead-${id})`}
            pointerEvents=&quot;none&quot;
          /&gt;
        &lt;/React.Fragment&gt;
      ))}

      &lt;EdgeLabelRenderer&gt;
        {/* Toolbar with delete button */}
        {renderToolbar &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1]}px)`,
              pointerEvents: 'all',
              zIndex: delayedHovered || isHovered ? 1 : 0,
            }}
            className=&quot;nodrag nopan&quot;
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          &gt;
            &lt;button
              onMouseDown={handleDelete}
              className=&quot;bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg transition-all duration-200 border-2 border-white hover:scale-110&quot;
              title=&quot;Delete connection&quot;
              style={{
                cursor: 'pointer',
                fontSize: '20px',
                fontWeight: 'bold',
              }}
            &gt;
              ×
            &lt;/button&gt;
          &lt;/div&gt;
        )}

        {/* Connection status indicator */}
        {status &amp;&amp; status !== 'success' &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1] - (isConnectorStraight ? 20 : 0)}px)`,
              pointerEvents: 'none',
              zIndex: 999,
            }}
          &gt;
            &lt;div
              className={`
              w-2 h-2 rounded-full
              ${status === 'error' ? 'bg-red-500' : ''}
              ${status === 'running' ? 'bg-yellow-500 animate-pulse' : ''}
              ${status === 'pinned' ? 'bg-purple-500' : ''}
            `}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ContainerNodePanel.tsx (Line 147:10 - Line 357:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/containernodepanel/ContainerNodePanel.tsx (Line 149:10 - Line 359:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup97"><code class="language-javascript text-sm text-gray-800">={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Container Nodes
          &lt;/Title&gt;
          &lt;Tooltip title=&quot;Add custom container&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;PlusOutlined /&gt;}
              onClick={() =&gt; {
                // Open custom container creation
              }}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced workflow structures for complex automation patterns
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4 space-y-4&quot;&gt;
        &lt;Collapse ghost defaultActiveKey={['containers']} className=&quot;bg-transparent&quot;&gt;
          &lt;Panel
            header={
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;span className=&quot;text-white font-medium&quot;&gt;Container Types&lt;/span&gt;
                &lt;Badge count={containerTemplates.length} size=&quot;small&quot; /&gt;
              &lt;/div&gt;
            }
            key=&quot;containers&quot;
            className=&quot;bg-gray-800&quot;
          &gt;
            &lt;div className=&quot;space-y-2&quot;&gt;
              {containerTemplates.map((template) =&gt; (
                &lt;Card
                  key={template.id}
                  size=&quot;small&quot;
                  className=&quot;bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors cursor-pointer&quot;
                  draggable
                  onDragStart={(e) =&gt; handleDragStart(e, template)}
                  onClick={() =&gt; openCreateModal(template)}
                &gt;
                  &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                    &lt;div
                      className=&quot;w-8 h-8 rounded-lg flex items-center justify-center text-lg&quot;
                      style={{ backgroundColor: `${template.color}20` }}
                    &gt;
                      {template.icon}
                    &lt;/div&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;div className=&quot;text-white font-medium text-sm&quot;&gt;{template.name}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{template.description}&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;flex gap-1&quot;&gt;
                      &lt;Tooltip title=&quot;Drag to canvas&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;ReloadOutlined /&gt;}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                      &lt;Tooltip title=&quot;Create directly&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;PlusOutlined /&gt;}
                          onClick={(e) =&gt; {
                            e.stopPropagation();
                            openCreateModal(template);
                          }}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              ))}
            &lt;/div&gt;
          &lt;/Panel&gt;
        &lt;/Collapse&gt;

        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-2&quot;&gt;
            Quick Actions
          &lt;/Title&gt;

          &lt;Space direction=&quot;vertical&quot; className=&quot;w-full&quot;&gt;
            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple loop container
                const container = createLoopContainer(`loop_${Date.now()}`, 'Quick Loop', {
                  x: 200,
                  y: 200,
                });
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ReloadOutlined className=&quot;text-blue-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Loop&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;10 iterations, 1s delay&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple parallel container
                const container = createParallelContainer(
                  `parallel_${Date.now()}`,
                  'Quick Parallel',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ThunderboltOutlined className=&quot;text-green-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Parallel&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;5 concurrent executions&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple conditional container
                const container = createConditionalContainer(
                  `conditional_${Date.now()}`,
                  'Quick Conditional',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;QuestionCircleOutlined className=&quot;text-yellow-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Conditional&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Basic if-then logic&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;pt-4 border-t border-gray-700&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 text-gray-400 text-xs&quot;&gt;
            &lt;InfoCircleOutlined /&gt;
            &lt;span&gt;Drag containers to canvas or click to create directly&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Create Container Modal */}
      &lt;Modal
        title={`Create ${selectedTemplate?.name || 'Container'}`}
        open={isCreateModalOpen}
        onCancel={() =&gt; {
          setIsCreateModalOpen(false);
          setSelectedTemplate(null);
        }}
        onOk={() =&gt; createForm.submit()}
        width={500}
      &gt;
        &lt;Form form={createForm} layout=&quot;vertical&quot; onFinish={handleCreateContainer}&gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Container Name&quot;
            rules={[{ required: true, message: 'Please enter a container name' }]}
          &gt;
            &lt;Input placeholder=&quot;Enter container name&quot; /&gt;
          &lt;/Form.Item&gt;

          {selectedTemplate &amp;&amp; (
            &lt;div className=&quot;mb-4 p-3 bg-gray-50 rounded-lg&quot;&gt;
              &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                &lt;span className=&quot;text-lg&quot;&gt;{selectedTemplate.icon}&lt;/span&gt;
                &lt;span className=&quot;font-medium&quot;&gt;{selectedTemplate.name}&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{selectedTemplate.description}&lt;/div&gt;
            &lt;/div&gt;
          )}

          {selectedTemplate?.id === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot; initialValue={10}&gt;
                &lt;InputNumber min={1} max={1000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot; initialValue={1000}&gt;
                &lt;InputNumber min={0} max={10000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {selectedTemplate?.id === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot; initialValue={5}&gt;
                &lt;InputNumber min={1} max={20}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionalBranchingPanel.tsx (Line 344:5 - Line 732:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditionalbranchingpanel/ConditionalBranchingPanel.tsx (Line 348:5 - Line 736:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup101"><code class="language-javascript text-sm text-gray-800">={form}
          layout=&quot;vertical&quot;
          onFinish={handleCreateBranch}
          initialValues={{
            logicalOperator: 'AND',
            defaultBranch: false,
            priority: 1,
            conditions: [],
          }}
        &gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Branch Name&quot;
            rules={[{ required: true, message: 'Please enter a branch name' }]}
          &gt;
            &lt;Input placeholder=&quot;Success path&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
            &lt;TextArea placeholder=&quot;Handles successful API responses&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;sourceNodeId&quot;
            label=&quot;Source Node&quot;
            rules={[{ required: true, message: 'Please select a source node' }]}
          &gt;
            &lt;Select placeholder=&quot;Select node to branch from&quot;&gt;
              {nodes.map((node) =&gt; (
                &lt;Option key={node.id} value={node.id}&gt;
                  {node.parameters?.name || node.name || node.id}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;logicalOperator&quot; label=&quot;Condition Logic&quot;&gt;
            &lt;Radio.Group&gt;
              &lt;Radio value=&quot;AND&quot;&gt;ALL conditions must be true (AND)&lt;/Radio&gt;
              &lt;Radio value=&quot;OR&quot;&gt;ANY condition must be true (OR)&lt;/Radio&gt;
            &lt;/Radio.Group&gt;
          &lt;/Form.Item&gt;

          &lt;Divider&gt;Conditions&lt;/Divider&gt;

          &lt;Form.Item dependencies={['conditions']} noStyle&gt;
            {({ getFieldValue }) =&gt; {
              const conditions: BranchCondition[] = getFieldValue('conditions') || [];
              return (
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {conditions.map((condition) =&gt; (
                    &lt;Card key={condition.id} size=&quot;small&quot; className=&quot;border-l-4 border-l-blue-500&quot;&gt;
                      &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                            &lt;Text strong&gt;{condition.field}&lt;/Text&gt;
                            &lt;Tag color=&quot;blue&quot;&gt;{condition.operator}&lt;/Tag&gt;
                            &lt;Text code&gt;{JSON.stringify(condition.value)}&lt;/Text&gt;
                            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NEGATED&lt;/Tag&gt;}
                          &lt;/Space&gt;
                        &lt;/div&gt;
                        &lt;Button
                          type=&quot;link&quot;
                          danger
                          icon={&lt;DeleteOutlined /&gt;}
                          onClick={() =&gt; handleRemoveCondition(condition.id)}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Card&gt;
                  ))}
                  {conditions.length === 0 &amp;&amp; (
                    &lt;Alert
                      message=&quot;No conditions defined&quot;
                      description=&quot;Add conditions to control when this branch should be taken&quot;
                      type=&quot;info&quot;
                      showIcon
                    /&gt;
                  )}
                &lt;/div&gt;
              );
            }}
          &lt;/Form.Item&gt;

          &lt;Card title=&quot;Add Condition&quot; size=&quot;small&quot; className=&quot;mt-4&quot;&gt;
            &lt;Form form={conditionForm} layout=&quot;vertical&quot; onFinish={handleAddCondition}&gt;
              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;field&quot; label=&quot;Field Path&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;data.status&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;dataType&quot; label=&quot;Data Type&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
                      &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
                      &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
                      &lt;Option value=&quot;date&quot;&gt;Date&lt;/Option&gt;
                      &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
                      &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;operator&quot; label=&quot;Operator&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;equals&quot;&gt;Equals (=)&lt;/Option&gt;
                      &lt;Option value=&quot;not_equals&quot;&gt;Not Equals (≠)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_than&quot;&gt;Greater Than (&amp;gt;)&lt;/Option&gt;
                      &lt;Option value=&quot;less_than&quot;&gt;Less Than (&amp;lt;)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_equal&quot;&gt;Greater Equal (≥)&lt;/Option&gt;
                      &lt;Option value=&quot;less_equal&quot;&gt;Less Equal (≤)&lt;/Option&gt;
                      &lt;Option value=&quot;contains&quot;&gt;Contains&lt;/Option&gt;
                      &lt;Option value=&quot;starts_with&quot;&gt;Starts With&lt;/Option&gt;
                      &lt;Option value=&quot;ends_with&quot;&gt;Ends With&lt;/Option&gt;
                      &lt;Option value=&quot;regex&quot;&gt;Regex Match&lt;/Option&gt;
                      &lt;Option value=&quot;in_array&quot;&gt;In Array&lt;/Option&gt;
                      &lt;Option value=&quot;is_empty&quot;&gt;Is Empty&lt;/Option&gt;
                      &lt;Option value=&quot;is_not_empty&quot;&gt;Is Not Empty&lt;/Option&gt;
                      &lt;Option value=&quot;exists&quot;&gt;Exists&lt;/Option&gt;
                      &lt;Option value=&quot;not_exists&quot;&gt;Not Exists&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;value&quot; label=&quot;Value&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;success&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;negate&quot; valuePropName=&quot;checked&quot;&gt;
                    &lt;Switch checkedChildren=&quot;Negate&quot; unCheckedChildren=&quot;Normal&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;caseSensitive&quot; valuePropName=&quot;checked&quot; initialValue={true}&gt;
                    &lt;Switch checkedChildren=&quot;Case Sensitive&quot; unCheckedChildren=&quot;Ignore Case&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Form.Item&gt;
                &lt;Button type=&quot;dashed&quot; htmlType=&quot;submit&quot; icon={&lt;PlusOutlined /&gt;} block&gt;
                  Add Condition
                &lt;/Button&gt;
              &lt;/Form.Item&gt;
            &lt;/Form&gt;
          &lt;/Card&gt;

          &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

          &lt;Row gutter={16}&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;priority&quot; label=&quot;Priority&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;defaultBranch&quot; label=&quot;Default Branch&quot; valuePropName=&quot;checked&quot;&gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
                {editingBranch ? 'Update Branch' : 'Create Branch'}
              &lt;/Button&gt;
              &lt;Button
                onClick={() =&gt; {
                  form.resetFields();
                  setEditingBranch(null);
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
            &lt;/Space&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Card&gt;

      &lt;Card title=&quot;Existing Branches&quot; size=&quot;small&quot;&gt;
        &lt;List
          dataSource={branches}
          renderItem={(branch) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;PlayCircleOutlined /&gt;}
                  onClick={() =&gt; {
                    setSelectedBranch(branch);
                    setTestModalVisible(true);
                  }}
                &gt;
                  Test
                &lt;/Button&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;EditOutlined /&gt;}
                  onClick={() =&gt; {
                    setEditingBranch(branch.id);
                    form.setFieldsValue(branch);
                  }}
                /&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  danger
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; {
                    setBranches((prev) =&gt; prev.filter((b) =&gt; b.id !== branch.id));
                    message.success('Branch deleted');
                  }}
                /&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                title={
                  &lt;Space&gt;
                    &lt;BranchesOutlined /&gt;
                    {branch.name}
                    &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
                      {branch.logicalOperator}
                    &lt;/Tag&gt;
                    {branch.defaultBranch &amp;&amp; &lt;Tag color=&quot;gold&quot;&gt;DEFAULT&lt;/Tag&gt;}
                  &lt;/Space&gt;
                }
                description={
                  &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                    {branch.description}
                    &lt;Text type=&quot;secondary&quot;&gt;
                      {branch.conditions.length} condition(s) • Priority: {branch.priority}
                    &lt;/Text&gt;
                    &lt;div&gt;
                      {branch.conditions.map((condition) =&gt; (
                        &lt;Tag key={condition.id} color=&quot;geekblue&quot; style={{ marginBottom: 4 }}&gt;
                          {condition.field} {condition.operator} {JSON.stringify(condition.value)}
                        &lt;/Tag&gt;
                      ))}
                    &lt;/div&gt;
                  &lt;/Space&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
          locale={{ emptyText: 'No branches configured' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderExpressionBuilder = () =&gt; (
    &lt;Card title=&quot;JavaScript Expression Builder&quot; size=&quot;small&quot;&gt;
      &lt;Alert
        message=&quot;Advanced Expression Mode&quot;
        description=&quot;Write custom JavaScript expressions for complex conditional logic. Use 'data' object to access workflow data.&quot;
        type=&quot;info&quot;
        showIcon
        style={{ marginBottom: 16 }}
      /&gt;

      &lt;Form layout=&quot;vertical&quot;&gt;
        &lt;Form.Item label=&quot;Expression&quot;&gt;
          &lt;TextArea
            rows={10}
            placeholder={`// Example expressions:
return data.status === 'success' &amp;&amp; data.count &gt; 10;

// Multi-line logic
if (data.user &amp;&amp; data.user.role === 'admin') {
  return data.permissions.includes('write');
}
return false;

// Array operations
return data.items.filter(item =&gt; item.active).length &gt; 0;

// Date comparisons
const today = new Date();
const itemDate = new Date(data.createdAt);
return (today.getTime() - itemDate.getTime()) &lt; (24 * 60 * 60 * 1000);`}
            style={{ fontFamily: 'monospace' }}
          /&gt;
        &lt;/Form.Item&gt;

        &lt;Form.Item&gt;
          &lt;Space&gt;
            &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;}&gt;
              Test Expression
            &lt;/Button&gt;
            &lt;Button icon={&lt;CodeOutlined /&gt;}&gt;Validate Syntax&lt;/Button&gt;
            &lt;Button&gt;Save as Template&lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/Form.Item&gt;
      &lt;/Form&gt;
    &lt;/Card&gt;
  );

  const renderVisualFlowChart = () =&gt; {
    const treeData = branches.map((branch) =&gt; ({
      title: (
        &lt;Space&gt;
          &lt;BranchesOutlined /&gt;
          {branch.name}
          &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
            {branch.conditions.length} conditions
          &lt;/Tag&gt;
        &lt;/Space&gt;
      ),
      key: branch.id,
      children: branch.conditions.map((condition) =&gt; ({
        title: (
          &lt;Space&gt;
            &lt;QuestionCircleOutlined /&gt;
            {condition.field} {condition.operator} {JSON.stringify(condition.value)}
            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NOT&lt;/Tag&gt;}
          &lt;/Space&gt;
        ),
        key: condition.id,
        icon: condition.negate ? &lt;CloseCircleOutlined /&gt; : &lt;CheckCircleOutlined /&gt;,
      })),
    }));

    return (
      &lt;Card title=&quot;Branch Flow Visualization&quot; size=&quot;small&quot;&gt;
        &lt;Tree
          showIcon
          defaultExpandAll
          treeData={treeData}
          style={{ background: colors.gray[50], padding: 16, borderRadius: 8 }}
        /&gt;
      &lt;/Card&gt;
    );
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;BranchesOutlined /&gt;
            Conditional Branching
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1400}
        footer={null}
        className={cn('conditional-branching-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Branch Builder
              &lt;/span&gt;
            }
            key=&quot;builder&quot;
          &gt;
            {renderBranchBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CodeOutlined /&gt;
                Expression Builder
              &lt;/span&gt;
            }
            key=&quot;expression&quot;
          &gt;
            {renderExpressionBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;BranchesOutlined /&gt;
                Flow Visualization
              &lt;/span&gt;
            }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionInputPanel.tsx (Line 67:20 - Line 508:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 69:20 - Line 510:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup103"><code class="language-javascript text-sm text-gray-800">={connectedInputNodes}
            onFieldSelect={setSelectedField}
          /&gt;
        &lt;/div&gt;
      )}

      {/* === CONNECTED INPUT NODES === */}
      &lt;div className=&quot;space-y-3&quot;&gt;
        &lt;div className=&quot;text-sm font-semibold text-gray-100 flex items-center space-x-2&quot;&gt;
          &lt;span&gt;📥&lt;/span&gt;
          &lt;span&gt;Input Data Sources&lt;/span&gt;
        &lt;/div&gt;

        {connectedInputNodes.map((node, index) =&gt; {
          // More robust data detection
          const outputData = node?.data?.outputData;
          const testResultsData = node?.data?.testResults?.data;
          const hasOutputData = outputData || testResultsData;

          // Prefer outputData over testResults, but use either if available
          let nodeData = null;
          if (outputData) {
            nodeData = outputData;
          } else if (testResultsData) {
            nodeData = testResultsData;
          }

          const isExpanded = expandedNode === node?.id;

          return (
            &lt;div
              key={node?.id || index}
              className=&quot;bg-gray-800 rounded-lg border border-gray-600 overflow-hidden&quot;
            &gt;
              {/* === NODE HEADER === */}
              &lt;div
                className=&quot;p-3 border-b border-gray-600 bg-gray-750 cursor-pointer hover:bg-gray-700 transition-colors&quot;
                onClick={() =&gt; setExpandedNode(isExpanded ? null : node?.id)}
              &gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                    &lt;span className=&quot;text-xl&quot; title={node?.data?.label || 'Node Icon'}&gt;
                      {getNodeIcon(node)}
                    &lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;
                        {node?.data?.label || 'Unnamed Node'}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{getNodeTypeDisplay(node)}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    {hasOutputData ? (
                      &lt;span className=&quot;px-2 py-1 bg-green-800 text-green-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;✓&lt;/span&gt;
                        &lt;span&gt;Data Available&lt;/span&gt;
                      &lt;/span&gt;
                    ) : (
                      &lt;span className=&quot;px-2 py-1 bg-yellow-800 text-yellow-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;⏳&lt;/span&gt;
                        &lt;span&gt;No Data&lt;/span&gt;
                      &lt;/span&gt;
                    )}
                    &lt;span
                      className={`transform transition-transform text-gray-400 ${isExpanded ? 'rotate-180' : ''}`}
                    &gt;
                      ▼
                    &lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* === EXPANDABLE DATA CONTENT === */}
              {isExpanded &amp;&amp; (
                &lt;div className=&quot;p-3&quot;&gt;
                  {hasOutputData ? (
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      {/* Enhanced JSON viewer for raw data */}
                      &lt;JsonViewer data={nodeData} maxHeight=&quot;400px&quot; enableClipboard={true} /&gt;

                      {/* Then show the formatted renderer */}
                      &lt;ConditionDataRenderer
                        data={nodeData}
                        nodeType={getNodeType(node)}
                        selectedField={selectedField}
                        onFieldSelect={setSelectedField}
                      /&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;
                      &lt;div className=&quot;text-sm&quot;&gt;No output data available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-1&quot;&gt;Test the connected node to generate data&lt;/div&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          );
        })}
      &lt;/div&gt;

      {/* === CONDITION EVALUATION TIPS === */}
      &lt;div className=&quot;mt-6 p-3 bg-gray-800 rounded-lg border border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-2 mb-2&quot;&gt;
          &lt;span className=&quot;text-lg&quot;&gt;💡&lt;/span&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Condition Tips&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;space-y-2 text-xs text-gray-400&quot;&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Reference data fields directly in conditions (e.g.,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;subject&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;priority&lt;/code&gt;)
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Use comparison operators:{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;==&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;!=&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;gt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;lt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;contains&lt;/code&gt;
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Combine conditions with{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;&amp;&lt;/code&gt; (and) or{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;||&lt;/code&gt; (or)
            &lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Component to show summary of all available data fields
const DataFieldsSummary: React.FC&lt;{
  connectedInputNodes: any[];
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ connectedInputNodes, onFieldSelect }) =&gt; {
  const allFields = new Set&lt;string&gt;();

  // Collect all unique fields from connected nodes
  connectedInputNodes.forEach((node, _index) =&gt; {
    const outputData = node?.data?.outputData;
    const testResultsData = node?.data?.testResults?.data;
    const data = outputData || testResultsData;

    if (data &amp;&amp; typeof data === 'object') {
      if (Array.isArray(data)) {
        // Handle arrays (like emails)
        if (data.length &gt; 0 &amp;&amp; typeof data[0] === 'object') {
          Object.keys(data[0]).forEach((key) =&gt; allFields.add(key));
        }
      } else {
        // Handle objects
        Object.keys(data).forEach((key) =&gt; allFields.add(key));
      }
    }
  });

  const fieldsArray = Array.from(allFields).sort();

  if (fieldsArray.length === 0) {
    return (
      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
        No structured fields available. Test connected nodes to analyze data fields.
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
      {fieldsArray.map((field) =&gt; (
        &lt;button
          key={field}
          onClick={() =&gt; onFieldSelect(field)}
          className=&quot;px-2 py-1 bg-purple-800 hover:bg-purple-700 text-purple-200 rounded text-xs transition-colors&quot;
          title={`Click to highlight ${field} in data`}
        &gt;
          {field}
        &lt;/button&gt;
      ))}
    &lt;/div&gt;
  );
};

// Component to render data specifically for condition evaluation
const ConditionDataRenderer: React.FC&lt;{
  data: any;
  nodeType: string;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, nodeType, selectedField, onFieldSelect }) =&gt; {
  if (!data) {
    return &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;No data available&lt;/div&gt;;
  }

  // Handle different data structures

  // Check if it's an array (like emails)
  if (Array.isArray(data)) {
    if (data.length &gt; 0) {
      const firstItem = data[0];
      if (nodeType === 'gmail' || nodeType === 'gmail-trigger') {
        return (
          &lt;EmailConditionView
            email={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      } else {
        // Generic array handling - show first item
        return (
          &lt;GenericConditionView
            data={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      }
    }
  }

  // Handle email data (from Gmail triggers)
  if ((nodeType === 'gmail' || nodeType === 'gmail-trigger') &amp;&amp; typeof data === 'object') {
    return (
      &lt;EmailConditionView
        email={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle transformed data
  if (nodeType === 'transform' &amp;&amp; typeof data === 'object') {
    return (
      &lt;TransformConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle AI Agent data
  if (nodeType === 'ai-agent' &amp;&amp; typeof data === 'object') {
    return (
      &lt;AIConditionView data={data} selectedField={selectedField} onFieldSelect={onFieldSelect} /&gt;
    );
  }

  // Generic structured data
  if (typeof data === 'object' &amp;&amp; data !== null) {
    return (
      &lt;GenericConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;text-xs text-yellow-400&quot;&gt;Debug: {nodeType} node data (fallback renderer)&lt;/div&gt;
      &lt;div className=&quot;bg-gray-900 p-3 rounded border border-gray-600&quot;&gt;
        &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;
          Type: {typeof data} {Array.isArray(data) &amp;&amp; `(array with ${data.length} items)`}
        &lt;/div&gt;
        &lt;div className=&quot;font-mono text-xs text-gray-200 max-h-40 overflow-y-auto&quot;&gt;
          {typeof data === 'string' ? data : JSON.stringify(data, null, 2)}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Email-specific condition view
const EmailConditionView: React.FC&lt;{
  email: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ email, selectedField, onFieldSelect }) =&gt; {
  const emailFields = [
    { key: 'from', label: 'From', value: email.from },
    { key: 'subject', label: 'Subject', value: email.subject },
    { key: 'body', label: 'Body', value: email.body },
    { key: 'isUnread', label: 'Unread', value: email.isUnread },
    {
      key: 'hasAttachments',
      label: 'Has Attachments',
      value: email.hasAttachments,
    },
    { key: 'labels', label: 'Labels', value: email.labels },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-blue-400 mb-2&quot;&gt;📧 Email fields available for conditions:&lt;/div&gt;
      {emailFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Transform data condition view
const TransformConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-green-400 mb-2&quot;&gt;
        🔄 Transformed fields available for conditions:
      &lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// AI Agent data condition view
const AIConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const aiFields = [
    { key: 'output', label: 'AI Output', value: data.output },
    { key: 'provider', label: 'Provider', value: data.provider },
    { key: 'model', label: 'Model', value: data.model },
    { key: 'usage', label: 'Token Usage', value: data.usage },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-orange-400 mb-2&quot;&gt;
        🤖 AI response fields available for conditions:
      &lt;/div&gt;
      {aiFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Generic data condition view
const GenericConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;📊 Data fields available for conditions:&lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Reusable field row component
const FieldRow: React.FC&lt;{
  fieldKey: string;
  label: string;
  value: any;
  isSelected: boolean;
  onSelect: (field: string) =&gt; void;
}&gt; = ({ fieldKey, label, value, isSelected, onSelect }) =&gt; {
  const displayValue =
    typeof value === 'string' &amp;&amp; value.length &gt; 100 ? `${value.substring(0, 100)}...` : value;

  return (
    &lt;div
      className={`p-3 rounded border cursor-pointer transition-all ${
        isSelected
          ? 'border-purple-500 bg-purple-900/20'
          : 'border-gray-600 hover:border-gray-500 bg-gray-750'
      }`}
      onClick={() =&gt; onSelect(fieldKey)}
    &gt;
      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
        &lt;span className={`text-sm font-medium ${isSelected ? 'text-purple-200' : 'text-gray-200'}`}&gt;
          {label}
        &lt;/span&gt;
        &lt;code
          className={`text-xs px-2 py-1 rounded ${
            isSelected ? 'bg-purple-800 text-purple-200' : 'bg-gray-700 text-gray-300'
          }`}
        &gt;
          {fieldKey}
        &lt;/code&gt;
      &lt;/div&gt;
      &lt;div className={`text-xs ${isSelected ? 'text-purple-300' : 'text-gray-400'}`}&gt;
        Type: {typeof value} {Array.isArray(value) &amp;&amp; '(array)'}
      &lt;/div&gt;
      &lt;div className={`text-sm mt-2 ${isSelected ? 'text-purple-100' : 'text-gray-300'}`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CommentAnnotations.tsx (Line 157:10 - Line 422:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 164:10 - Line 429:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup105"><code class="language-javascript text-sm text-gray-800">={{ padding: 12 }}&gt;
        &lt;div className=&quot;space-y-3&quot;&gt;
          {/* Comment header */}
          &lt;div className=&quot;flex items-start justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar size={24} src={comment.author.avatar} style={{ backgroundColor: userColor }}&gt;
                {comment.author.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div&gt;
                &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                  {comment.author.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(comment.timestamp).toLocaleString()}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckOutlined /&gt;}
              onClick={(e) =&gt; {
                e.stopPropagation();
                onResolve();
              }}
              className=&quot;text-green-600 hover:bg-green-50&quot;
            &gt;
              Resolve
            &lt;/Button&gt;
          &lt;/div&gt;

          {/* Comment content */}
          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;{comment.content}&lt;/div&gt;

          {/* Replies */}
          {comment.replies.length &gt; 0 &amp;&amp; (
            &lt;div className=&quot;space-y-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700&quot;&gt;
              {comment.replies.map((reply) =&gt; (
                &lt;div key={reply.id} className=&quot;space-y-1&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={16}
                      src={reply.author.avatar}
                      style={{ backgroundColor: getUserColor(reply.author.id) }}
                    &gt;
                      {reply.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                      {reply.author.name}
                    &lt;/span&gt;
                    &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                      {new Date(reply.timestamp).toLocaleString()}
                    &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 pl-6&quot;&gt;
                    {reply.content}
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          )}

          {/* Reply input */}
          &lt;div className=&quot;pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
            &lt;div className=&quot;flex space-x-2&quot;&gt;
              &lt;Input
                size=&quot;small&quot;
                placeholder=&quot;Reply...&quot;
                value={replyContents[comment.id] || ''}
                onChange={(e) =&gt;
                  setReplyContents({
                    ...replyContents,
                    [comment.id]: e.target.value,
                  })
                }
                onPressEnter={() =&gt; handleReplyToComment(comment.id)}
              /&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={() =&gt; handleReplyToComment(comment.id)}
                disabled={!replyContents[comment.id]?.trim()}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/Card&gt;
    );

    return (
      &lt;Popover
        content={commentThread}
        title={null}
        trigger=&quot;click&quot;
        placement=&quot;topLeft&quot;
        overlayClassName=&quot;comment-thread-popover&quot;
      &gt;
        &lt;div
          className={`absolute cursor-pointer transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200 z-40 ${
            isSelected ? 'scale-110' : 'scale-100'
          }`}
          style={{
            left: screenPosition.x,
            top: screenPosition.y,
          }}
          onClick={onClick}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
        &gt;
          {/* Comment pin */}
          &lt;div
            className={`relative w-8 h-8 rounded-full border-2 border-white shadow-lg flex items-center justify-center ${
              isSelected || isHovered ? 'transform scale-110' : ''
            }`}
            style={{
              backgroundColor: userColor,
              boxShadow: isSelected ? `0 0 0 3px ${userColor}40` : '0 2px 8px rgba(0,0,0,0.15)',
            }}
          &gt;
            &lt;CommentOutlined className=&quot;text-white text-sm&quot; /&gt;

            {/* Unread replies indicator */}
            {comment.replies.length &gt; 0 &amp;&amp; (
              &lt;Badge
                count={comment.replies.length}
                size=&quot;small&quot;
                className=&quot;absolute -top-1 -right-1&quot;
              /&gt;
            )}
          &lt;/div&gt;

          {/* Connection line to author avatar */}
          {(isSelected || isHovered) &amp;&amp; (
            &lt;div className=&quot;absolute top-10 left-1/2 transform -translate-x-1/2&quot;&gt;
              &lt;div className=&quot;bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-md border border-gray-200 dark:border-gray-700&quot;&gt;
                &lt;div className=&quot;flex items-center space-x-1&quot;&gt;
                  &lt;Avatar
                    size={16}
                    src={comment.author.avatar}
                    style={{ backgroundColor: userColor }}
                  &gt;
                    {comment.author.name.charAt(0).toUpperCase()}
                  &lt;/Avatar&gt;
                  &lt;span className=&quot;text-xs font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                    {comment.author.name}
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/Popover&gt;
    );
  };

  // Pending comment input
  const PendingCommentInput: React.FC&lt;{ position: { x: number; y: number } }&gt; = ({ position }) =&gt; {
    const screenPos = workflowToScreen(position.x, position.y);

    return (
      &lt;div
        className=&quot;absolute z-50&quot;
        style={{
          left: screenPos.x + 20,
          top: screenPos.y,
        }}
      &gt;
        &lt;Card size=&quot;small&quot; className=&quot;w-80 shadow-lg&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar
                size={24}
                src={currentUser?.avatar}
                style={{
                  backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
                }}
              &gt;
                {currentUser?.name.charAt(0).toUpperCase() || '?'}
              &lt;/Avatar&gt;
              &lt;span className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                Add a comment
              &lt;/span&gt;
            &lt;/div&gt;

            &lt;TextArea
              rows={3}
              placeholder=&quot;What do you think about this?&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
              autoFocus
            /&gt;

            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; {
                  setPendingCommentPosition(null);
                  setNewCommentContent('');
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim()}
              &gt;
                Post
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {/* Pin indicator */}
        &lt;div
          className=&quot;absolute w-6 h-6 rounded-full border-2 border-white shadow-lg flex items-center justify-center&quot;
          style={{
            left: -20,
            top: 20,
            backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
          }}
        &gt;
          &lt;CommentOutlined className=&quot;text-white text-xs&quot; /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!showComments || !containerRef.current) return null;

  return (
    &lt;&gt;
      {/* Canvas click handler for comment mode */}
      {commentMode &amp;&amp; (
        &lt;div
          className=&quot;absolute inset-0 z-30 cursor-crosshair&quot;
          onClick={handleCanvasClick}
          style={{
            background: commentMode
              ? 'linear-gradient(45deg, transparent 40%, rgba(24, 144, 255, 0.1) 50%, transparent 60%)'
              : 'transparent',
          }}
        /&gt;
      )}

      {/* Existing comments */}
      {activeComments.map((comment) =&gt; {
        const screenPos = workflowToScreen(comment.position.x, comment.position.y);

        return (
          &lt;CommentPin
            key={comment.id}
            comment={comment}
            screenPosition={screenPos}
            isSelected={selectedCommentId === comment.id}
            onClick={() =&gt; selectComment(comment.id)}
            onResolve={() =&gt; resolveComment(comment.id)}
          /&gt;
        );
      })}

      {/* Pending comment input */}
      {pendingCommentPosition &amp;&amp; &lt;PendingCommentInput position={pendingCommentPosition}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CollaborationPanel.tsx (Line 157:7 - Line 655:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 161:7 - Line 659:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup107"><code class="language-javascript text-sm text-gray-800">={isConnected ? 'processing' : 'error'}
          text={connectionStatus}
          className=&quot;capitalize&quot;
        /&gt;
      &lt;/div&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        {/* Current user */}
        {currentUser &amp;&amp; (
          &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={currentUser.avatar}
                style={{ backgroundColor: getUserColor(currentUser.id) }}
              &gt;
                {currentUser.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {currentUser.name} (You)
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;{currentUser.email}&lt;/div&gt;
              &lt;/div&gt;
              &lt;Badge status=&quot;processing&quot; /&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        )}

        {/* Other users */}
        {userPresences.map((presence) =&gt; (
          &lt;Card key={presence.userId} size=&quot;small&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={presence.user.avatar}
                style={{ backgroundColor: getUserColor(presence.userId) }}
              &gt;
                {presence.user.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {presence.user.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
                  {presence.user.email}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex flex-col items-end&quot;&gt;
                &lt;Badge
                  status={presence.user.status === 'online' ? 'success' : 'default'}
                  text={presence.user.status}
                /&gt;
                {presence.cursor &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                    Cursor: {Math.round(presence.cursor.x)}, {Math.round(presence.cursor.y)}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        ))}
      &lt;/div&gt;

      {userPresences.length === 0 &amp;&amp; !currentUser &amp;&amp; (
        &lt;Empty description=&quot;No active users&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}

      &lt;Divider /&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;h4 className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;Presence Settings&lt;/h4&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Cursors&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserCursors} onChange={toggleUserCursors} /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Selections&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserSelections} onChange={toggleUserSelections} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Comments Tab
  const CommentsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Comments ({activeComments.length})
        &lt;/h3&gt;
        &lt;div className=&quot;flex space-x-2&quot;&gt;
          &lt;Button
            size=&quot;small&quot;
            type={commentMode ? 'primary' : 'default'}
            icon={&lt;CommentOutlined /&gt;}
            onClick={toggleCommentMode}
          &gt;
            {commentMode ? 'Cancel' : 'Add Comment'}
          &lt;/Button&gt;
          &lt;Switch
            size=&quot;small&quot;
            checked={showComments}
            onChange={toggleComments}
            checkedChildren=&quot;Show&quot;
            unCheckedChildren=&quot;Hide&quot;
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {commentMode &amp;&amp; (
        &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
              Click on the canvas to place a comment, or add a general comment below.
            &lt;/div&gt;
            &lt;TextArea
              rows={3}
              placeholder=&quot;Add your comment...&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
            /&gt;
            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; setNewCommentPosition({ x: 100, y: 100 })}
                disabled={!newCommentContent.trim()}
              &gt;
                Add General Comment
              &lt;/Button&gt;
              &lt;Button
                size=&quot;small&quot;
                type=&quot;primary&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim() || !newCommentPosition}
              &gt;
                Post Comment
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      )}

      &lt;div className=&quot;space-y-3&quot;&gt;
        {activeComments.length === 0 ? (
          &lt;Empty description=&quot;No active comments&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
        ) : (
          activeComments.map((comment) =&gt; (
            &lt;Card
              key={comment.id}
              size=&quot;small&quot;
              className={selectedCommentId === comment.id ? 'border-blue-500 shadow-md' : ''}
              onClick={() =&gt; selectComment(comment.id)}
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                {/* Comment header */}
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={24}
                      src={comment.author.avatar}
                      style={{ backgroundColor: getUserColor(comment.author.id) }}
                    &gt;
                      {comment.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                        {comment.author.name}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                        {new Date(comment.timestamp).toLocaleString()}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex space-x-1&quot;&gt;
                    {comment.nodeId &amp;&amp; &lt;Tag color=&quot;blue&quot;&gt;Node Comment&lt;/Tag&gt;}
                    &lt;Tooltip title=&quot;Resolve Comment&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;CheckOutlined /&gt;}
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          resolveComment(comment.id);
                        }}
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Comment content */}
                &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 ml-8&quot;&gt;
                  {comment.content}
                &lt;/div&gt;

                {/* Replies */}
                {comment.replies.length &gt; 0 &amp;&amp; (
                  &lt;div className=&quot;ml-8 space-y-2 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                    {comment.replies.map((reply) =&gt; (
                      &lt;div key={reply.id} className=&quot;flex space-x-2&quot;&gt;
                        &lt;Avatar
                          size={20}
                          src={reply.author.avatar}
                          style={{ backgroundColor: getUserColor(reply.author.id) }}
                        &gt;
                          {reply.author.name.charAt(0).toUpperCase()}
                        &lt;/Avatar&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                              {reply.author.name}
                            &lt;/span&gt;
                            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                              {new Date(reply.timestamp).toLocaleString()}
                            &lt;/span&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                            {reply.content}
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                )}

                {/* Reply input */}
                &lt;div className=&quot;ml-8 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                  &lt;div className=&quot;flex space-x-2&quot;&gt;
                    &lt;Input
                      size=&quot;small&quot;
                      placeholder=&quot;Reply...&quot;
                      value={replyContents[comment.id] || ''}
                      onChange={(e) =&gt;
                        setReplyContents({
                          ...replyContents,
                          [comment.id]: e.target.value,
                        })
                      }
                      onPressEnter={() =&gt; handleReplyToComment(comment.id)}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;SendOutlined /&gt;}
                      onClick={() =&gt; handleReplyToComment(comment.id)}
                      disabled={!replyContents[comment.id]?.trim()}
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Conflicts Tab
  const ConflictsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Conflicts ({activeConflicts.length})
        &lt;/h3&gt;
        {activeConflicts.length &gt; 0 &amp;&amp; &lt;Badge count={activeConflicts.length} status=&quot;error&quot; /&gt;}
      &lt;/div&gt;

      {activeConflicts.length === 0 ? (
        &lt;div className=&quot;text-center py-8&quot;&gt;
          &lt;CheckOutlined className=&quot;text-4xl text-green-500 mb-2&quot; /&gt;
          &lt;div className=&quot;text-gray-600 dark:text-gray-400&quot;&gt;No conflicts detected&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-3&quot;&gt;
          {activeConflicts.map((conflict) =&gt; (
            &lt;Card
              key={conflict.id}
              size=&quot;small&quot;
              className=&quot;border-red-200 bg-red-50 dark:bg-red-900/20&quot;
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                      &lt;ExclamationCircleOutlined className=&quot;text-red-500&quot; /&gt;
                      &lt;span className=&quot;font-medium text-red-700 dark:text-red-300&quot;&gt;
                        {conflict.type.replace('_', ' ').toUpperCase()}
                      &lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400 mt-1&quot;&gt;
                      Affected nodes: {conflict.affectedNodes.join(', ')}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                      {new Date(conflict.timestamp).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;primary&quot;
                    danger
                    onClick={() =&gt; {
                      setSelectedConflict(conflict);
                      setConflictModalVisible(true);
                    }}
                  &gt;
                    Resolve
                  &lt;/Button&gt;
                &lt;/div&gt;

                &lt;div className=&quot;pl-6&quot;&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                    {conflict.operations.length} conflicting operations
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  // Activity Tab
  const ActivityTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;Recent Activity&lt;/h3&gt;

      &lt;Timeline className=&quot;mt-4&quot;&gt;
        {operationHistory
          .slice(-10)
          .reverse()
          .map((operation) =&gt; (
            &lt;Timeline.Item
              key={operation.id}
              dot={
                &lt;Avatar size={20} style={{ backgroundColor: getUserColor(operation.userId) }}&gt;
                  {operation.userId.charAt(0).toUpperCase()}
                &lt;/Avatar&gt;
              }
            &gt;
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {operation.type.replace('_', ' ')}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(operation.timestamp).toLocaleString()}
                &lt;/div&gt;
                {operation.data?.nodeId &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-600 dark:text-gray-400&quot;&gt;
                    Node: {operation.data.nodeId}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          ))}
      &lt;/Timeline&gt;

      {operationHistory.length === 0 &amp;&amp; (
        &lt;Empty description=&quot;No recent activity&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;&gt;
      &lt;Drawer
        title=&quot;Collaboration&quot;
        placement=&quot;right&quot;
        onClose={onToggle}
        open={isVisible}
        width={400}
        className=&quot;collaboration-drawer&quot;
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab} className=&quot;h-full&quot;&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;TeamOutlined /&gt;
                Users
              &lt;/span&gt;
            }
            key=&quot;users&quot;
          &gt;
            &lt;UsersTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CommentOutlined /&gt;
                Comments
                {activeComments.length &gt; 0 &amp;&amp; (
                  &lt;Badge count={activeComments.length} size=&quot;small&quot; style={{ marginLeft: 4 }} /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;comments&quot;
          &gt;
            &lt;CommentsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;WarningOutlined /&gt;
                Conflicts
                {activeConflicts.length &gt; 0 &amp;&amp; (
                  &lt;Badge
                    count={activeConflicts.length}
                    size=&quot;small&quot;
                    status=&quot;error&quot;
                    style={{ marginLeft: 4 }}
                  /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;conflicts&quot;
          &gt;
            &lt;ConflictsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;ClockCircleOutlined /&gt;
                Activity
              &lt;/span&gt;
            }
            key=&quot;activity&quot;
          &gt;
            &lt;ActivityTab /&gt;
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Drawer&gt;

      {/* Conflict Resolution Modal */}
      &lt;Modal
        title=&quot;Resolve Conflict&quot;
        open={conflictModalVisible}
        onCancel={() =&gt; {
          setConflictModalVisible(false);
          setSelectedConflict(null);
        }}
        footer={null}
        width={600}
      &gt;
        {selectedConflict &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;Alert
              type=&quot;warning&quot;
              message={`${selectedConflict.type.replace('_', ' ')} Conflict`}
              description={`This conflict involves ${selectedConflict.operations.length} operations affecting ${selectedConflict.affectedNodes.length} nodes.`}
            /&gt;

            &lt;div className=&quot;space-y-3&quot;&gt;
              &lt;h4 className=&quot;font-medium&quot;&gt;Choose Resolution Strategy:&lt;/h4&gt;

              &lt;Radio.Group className=&quot;w-full&quot; size=&quot;small&quot;&gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  &lt;Radio value=&quot;last_write_wins&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Last Write Wins&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Keep the most recent changes and discard older ones
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;merge&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Smart Merge&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Attempt to automatically merge compatible changes
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;manual&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Manual Resolution&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Review each change individually and decide
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                &lt;/div&gt;
              &lt;/Radio.Group&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex justify-end space-x-2 pt-4 border-t&quot;&gt;
              &lt;Button onClick={() =&gt; setConflictModalVisible(false)}&gt;Cancel&lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt;
                  handleResolveConflict(selectedConflict, {
                    strategy: 'last_write_wins',
                  })
                }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AnalyticsDashboard.tsx (Line 128:7 - Line 742:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 131:7 - Line 745:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup109"><code class="language-javascript text-sm text-gray-800">={[16, 16]}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Executions&quot;
              value={executionSummary?.totalExecutions || 0}
              prefix={&lt;ThunderboltOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Success Rate&quot;
              value={executionSummary?.successRate || 0}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;CheckCircleOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.successRate || 0) &gt;= 95 ? '#3f8600' : '#cf1322',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Avg Duration&quot;
              value={formatDuration(executionSummary?.avgDuration || 0)}
              prefix={&lt;ClockCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Efficiency Score&quot;
              value={executionSummary?.efficiency || 0}
              suffix=&quot;/100&quot;
              precision={0}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.efficiency || 0) &gt;= 80 ? '#3f8600' : '#faad14',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Performance Trend Chart */}
      &lt;Card title=&quot;Performance Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={performanceHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Duration']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.primary}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Alerts and Insights Row */}
      &lt;Row gutter={[16, 16]}&gt;
        {/* Top Bottlenecks */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Top Performance Issues&quot; size=&quot;small&quot;&gt;
            {topBottlenecks.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={topBottlenecks}
                renderItem={(bottleneck) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={
                        &lt;Badge status={bottleneck.severity === 'critical' ? 'error' : 'warning'} /&gt;
                      }
                      title={
                        &lt;span&gt;
                          {bottleneck.description}
                          &lt;Tag
                            color={
                              bottleneck.severity === 'critical'
                                ? 'red'
                                : bottleneck.severity === 'high'
                                  ? 'orange'
                                  : 'yellow'
                            }
                            className=&quot;ml-2&quot;
                          &gt;
                            {bottleneck.severity}
                          &lt;/Tag&gt;
                        &lt;/span&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;{bottleneck.impact}&lt;/div&gt;
                          &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No performance issues detected&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;

        {/* Predictive Insights */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;AI Predictions&quot; size=&quot;small&quot;&gt;
            {predictiveInsights.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={predictiveInsights}
                renderItem={(insight) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={&lt;RobotOutlined className=&quot;text-blue-500&quot; /&gt;}
                      title={
                        &lt;div className=&quot;flex items-center&quot;&gt;
                          &lt;span&gt;{insight.description}&lt;/span&gt;
                          &lt;Tag color=&quot;blue&quot; className=&quot;ml-2&quot;&gt;
                            {Math.round(insight.confidence * 100)}% confidence
                          &lt;/Tag&gt;
                        &lt;/div&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;Impact: {insight.predictedImpact}&lt;/div&gt;
                          &lt;div className=&quot;text-green-600 mt-1&quot;&gt;Timeframe: {insight.timeframe}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No predictions available&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  // Performance Tab Component
  const PerformanceTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Performance Charts Row */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Execution Performance&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;AreaChart data={performanceHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Performance']}
                /&gt;
                &lt;Area
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.primary}
                  fill={chartColors.primary}
                  fillOpacity={0.6}
                /&gt;
              &lt;/AreaChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;

        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Reliability Trend&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;LineChart data={reliabilityHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis domain={[0, 100]} /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(1)}%`, 'Success Rate']}
                /&gt;
                &lt;Line
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.success}
                  strokeWidth={2}
                  dot={false}
                /&gt;
              &lt;/LineChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Node Performance Table */}
      &lt;Card title=&quot;Node Performance Analysis&quot; size=&quot;small&quot;&gt;
        &lt;Table
          size=&quot;small&quot;
          dataSource={currentAnalytics?.nodePerformance || []}
          rowKey=&quot;nodeId&quot;
          pagination={{ pageSize: 10 }}
          columns={[
            {
              title: 'Node',
              dataIndex: 'nodeName',
              key: 'nodeName',
              render: (name: string, record: NodePerformanceStats) =&gt; (
                &lt;div&gt;
                  &lt;div className=&quot;font-medium&quot;&gt;{name}&lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;{record.nodeType}&lt;/div&gt;
                &lt;/div&gt;
              ),
            },
            {
              title: 'Executions',
              dataIndex: 'executionCount',
              key: 'executionCount',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.executionCount - b.executionCount,
            },
            {
              title: 'Avg Duration',
              dataIndex: 'averageDuration',
              key: 'averageDuration',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.averageDuration - b.averageDuration,
              render: (duration: number) =&gt; formatDuration(duration),
            },
            {
              title: 'Success Rate',
              dataIndex: 'failureRate',
              key: 'failureRate',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.failureRate - b.failureRate,
              render: (failureRate: number) =&gt; (
                &lt;span style={{ color: failureRate &gt; 0.1 ? '#ff4d4f' : '#52c41a' }}&gt;
                  {((1 - failureRate) * 100).toFixed(1)}%
                &lt;/span&gt;
              ),
            },
            {
              title: 'Trend',
              dataIndex: 'trend',
              key: 'trend',
              render: (trend: string) =&gt; (
                &lt;Tag
                  color={trend === 'improving' ? 'green' : trend === 'degrading' ? 'red' : 'blue'}
                &gt;
                  {trend}
                &lt;/Tag&gt;
              ),
            },
            {
              title: 'Actions',
              key: 'actions',
              render: (_, record: NodePerformanceStats) =&gt; (
                &lt;Button type=&quot;link&quot; size=&quot;small&quot; onClick={() =&gt; setSelectedNode(record.nodeId)}&gt;
                  Analyze
                &lt;/Button&gt;
              ),
            },
          ]}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Cost Tab Component
  const CostTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Cost Overview */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Current Period Cost&quot;
              value={costOptimization?.currentCost || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;DollarCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Potential Savings&quot;
              value={costOptimization?.savings || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;RiseOutlined /&gt;}
              valueStyle={{ color: '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Cost Trend&quot;
              value={costTrend}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{ color: costTrend &gt; 0 ? '#cf1322' : '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Cost Chart */}
      &lt;Card title=&quot;Cost Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={costHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis tickFormatter={(value) =&gt; formatCurrency(value)} /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [formatCurrency(value), 'Cost']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.warning}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Cost Optimization Recommendations */}
      {costOptimization &amp;&amp; (
        &lt;Card title=&quot;Optimization Recommendations&quot; size=&quot;small&quot;&gt;
          &lt;List
            dataSource={costOptimization.recommendations}
            renderItem={(recommendation) =&gt; (
              &lt;List.Item&gt;
                &lt;List.Item.Meta
                  avatar={&lt;DollarCircleOutlined className=&quot;text-green-500&quot; /&gt;}
                  title={
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;span&gt;{recommendation.description}&lt;/span&gt;
                      &lt;Tag color=&quot;green&quot;&gt;
                        Save {formatCurrency(recommendation.estimatedSavings)}
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                  description={
                    &lt;div className=&quot;text-sm&quot;&gt;
                      &lt;div className=&quot;text-gray-600&quot;&gt;{recommendation.implementation}&lt;/div&gt;
                      &lt;Tag
                        color={
                          recommendation.impact === 'high'
                            ? 'red'
                            : recommendation.impact === 'medium'
                              ? 'orange'
                              : 'blue'
                        }
                        className=&quot;mt-1&quot;
                      &gt;
                        {recommendation.impact} impact
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                /&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        &lt;/Card&gt;
      )}
    &lt;/div&gt;
  );

  // Insights Tab Component
  const InsightsTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Predictive Insights */}
      &lt;Card title=&quot;Predictive Analytics&quot; size=&quot;small&quot;&gt;
        {predictiveInsights.length &gt; 0 ? (
          &lt;List
            dataSource={predictiveInsights}
            renderItem={(insight) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;RobotOutlined className=&quot;text-blue-500 mr-2&quot; /&gt;
                        {insight.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag color=&quot;blue&quot;&gt;{Math.round(insight.confidence * 100)}% confidence&lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{insight.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Timeframe:&lt;/span&gt;
                        &lt;div&gt;{insight.timeframe}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Expected Impact:&lt;/span&gt;
                        &lt;div&gt;{insight.predictedImpact}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommended Actions:&lt;/span&gt;
                      &lt;ul className=&quot;mt-2 space-y-1&quot;&gt;
                        {insight.recommendedActions.map((action, index) =&gt; (
                          &lt;li key={index} className=&quot;text-sm text-green-600&quot;&gt;
                            • {action}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                      Based on: {insight.basedOn.join(', ')}
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No predictive insights available&quot; /&gt;
        )}
      &lt;/Card&gt;

      {/* Bottleneck Analysis */}
      &lt;Card title=&quot;Bottleneck Analysis&quot; size=&quot;small&quot;&gt;
        {bottlenecks.length &gt; 0 ? (
          &lt;List
            dataSource={bottlenecks}
            renderItem={(bottleneck) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;WarningOutlined
                          className={`mr-2 ${
                            bottleneck.severity === 'critical'
                              ? 'text-red-500'
                              : bottleneck.severity === 'high'
                                ? 'text-orange-500'
                                : 'text-yellow-500'
                          }`}
                        /&gt;
                        {bottleneck.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag
                        color={
                          bottleneck.severity === 'critical'
                            ? 'red'
                            : bottleneck.severity === 'high'
                              ? 'orange'
                              : 'yellow'
                        }
                      &gt;
                        {bottleneck.severity}
                      &lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{bottleneck.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Impact:&lt;/span&gt;
                        &lt;div&gt;{bottleneck.impact}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Improvement:&lt;/span&gt;
                        &lt;div className=&quot;text-green-600&quot;&gt;{bottleneck.estimatedImprovement}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommendation:&lt;/span&gt;
                      &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No bottlenecks detected&quot; /&gt;
        )}
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Settings and Controls
  const AnalyticsHeader: React.FC = () =&gt; (
    &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
      &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
        &lt;Select value={analyticsPeriod} onChange={setAnalyticsPeriod} style={{ width: 120 }}&gt;
          &lt;Option value={1}&gt;Last 24h&lt;/Option&gt;
          &lt;Option value={7}&gt;Last 7 days&lt;/Option&gt;
          &lt;Option value={30}&gt;Last 30 days&lt;/Option&gt;
          &lt;Option value={90}&gt;Last 90 days&lt;/Option&gt;
        &lt;/Select&gt;

        &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Auto-refresh:&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={autoRefresh} onChange={toggleAutoRefresh} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
        {lastUpdated &amp;&amp; (
          &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
            Updated: {new Date(lastUpdated).toLocaleTimeString()}
          &lt;/span&gt;
        )}

        &lt;Button
          type=&quot;text&quot;
          icon={&lt;ReloadOutlined /&gt;}
          onClick={refreshAnalytics}
          loading={isLoading}
        &gt;
          Refresh
        &lt;/Button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  return (
    &lt;Modal
      title=&quot;Workflow Analytics Dashboard&quot;
      open={isOpen}
      onCancel={onClose}
      width={1200}
      footer={null}
      className=&quot;analytics-dashboard-modal&quot;
    &gt;
      &lt;AnalyticsHeader /&gt;

      &lt;Tabs
        activeKey={selectedTab}
        onChange={(key) =&gt; setSelectedTab(key as any)}
        className=&quot;analytics-tabs&quot;
      &gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DashboardOutlined /&gt;
              Overview
            &lt;/span&gt;
          }
          key=&quot;overview&quot;
        &gt;
          &lt;OverviewTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Performance
            &lt;/span&gt;
          }
          key=&quot;performance&quot;
        &gt;
          &lt;PerformanceTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DollarCircleOutlined /&gt;
              Costs
            &lt;/span&gt;
          }
          key=&quot;costs&quot;
        &gt;
          &lt;CostTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BulbOutlined /&gt;
              Insights
            &lt;/span&gt;
          }</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedPropertyPanel.tsx (Line 100:6 - Line 481:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancedpropertypanel/AdvancedPropertyPanel.tsx (Line 110:6 - Line 491:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup111"><code class="language-javascript text-sm text-gray-800">={{ width }}&gt;
      {/* Panel Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700 bg-gray-900&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;h3 className=&quot;text-sm font-semibold text-white&quot;&gt;{title}&lt;/h3&gt;
          {badge &amp;&amp; (
            &lt;Badge count={badge} className=&quot;text-xs&quot; style={{ backgroundColor: '#1890ff' }} /&gt;
          )}
        &lt;/div&gt;
        {actions &amp;&amp; &lt;Space size=&quot;small&quot;&gt;{actions}&lt;/Space&gt;}
      &lt;/div&gt;

      {/* Panel Content */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;{children}&lt;/div&gt;

      {/* Resize Handle */}
      {onResize &amp;&amp; (
        &lt;div
          className={cn(
            'absolute top-0 right-0 w-1 h-full cursor-col-resize bg-transparent hover:bg-blue-500 transition-colors',
            isResizing &amp;&amp; 'bg-blue-500'
          )}
          onMouseDown={handleMouseDown}
        /&gt;
      )}
    &lt;/div&gt;
  );
};

const InputDataPanel: React.FC&lt;{
  nodeId: string;
  width: number;
  onResize: (width: number) =&gt; void;
}&gt; = ({ nodeId, width, onResize }) =&gt; {
  const { edges } = useLeanWorkflowStore();
  const { getNodeState } = useEnhancedExecutionStore();

  // Find incoming connections to this node
  const incomingData = useMemo(() =&gt; {
    const incomingEdges = edges.filter((edge) =&gt; edge.target === nodeId);
    const data: Record&lt;string, any&gt; = {};

    incomingEdges.forEach((edge) =&gt; {
      const sourceNodeState = getNodeState(edge.source);
      if (sourceNodeState?.outputData) {
        data[edge.source] = sourceNodeState.outputData;
      }
    });

    return data;
  }, [edges, nodeId, getNodeState]);

  const actions = [
    &lt;Tooltip key=&quot;refresh&quot; title=&quot;Refresh data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;SyncOutlined /&gt;}
        onClick={() =&gt; {
          // Refresh input data
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          navigator.clipboard.writeText(JSON.stringify(incomingData, null, 2));
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  return (
    &lt;ResizablePanel
      title=&quot;Input Data&quot;
      width={width}
      onResize={onResize}
      actions={actions}
      badge={Object.keys(incomingData).length || undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {Object.keys(incomingData).length === 0 ? (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📥&lt;/div&gt;
            &lt;div&gt;No input data available&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;
              Connect nodes or execute the workflow to see input data
            &lt;/div&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-4&quot;&gt;
            {Object.entries(incomingData).map(([sourceNodeId, data]) =&gt; (
              &lt;Card
                key={sourceNodeId}
                size=&quot;small&quot;
                title={`From: ${sourceNodeId}`}
                className=&quot;bg-gray-900 border-gray-600&quot;
              &gt;
                &lt;JsonViewer data={data} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
              &lt;/Card&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

const ConfigurationPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeById, updateNodeParameters } = useLeanWorkflowStore();
  const [activeTab, setActiveTab] = useState('properties');
  const [formState, setFormState] = useState&lt;PropertyFormState&gt;({});
  const [isValid, setIsValid] = useState(true);
  const [errors, setErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const node = getNodeById(nodeId);
  const nodeDefinition = node ? nodeRegistry.getNodeTypeDescription(node.type) : null;

  // Get enhanced properties for this node
  const enhancedProperties = useMemo(() =&gt; {
    if (!nodeDefinition) return [];

    // Use basic properties for now, can be enhanced later
    return nodeDefinition.properties || [];
  }, [nodeDefinition]);

  // Initialize form state from node parameters
  React.useEffect(() =&gt; {
    if (node) {
      setFormState(node.parameters || {});
    }
  }, [node]);

  // Property change handlers
  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      const newFormState = { ...formState, [name]: value };
      setFormState(newFormState);
      updateNodeParameters(nodeId, { [name]: value });
    },
    [formState, nodeId, updateNodeParameters]
  );

  const handleValidationChange = useCallback((result: PropertyValidationResult) =&gt; {
    setIsValid(result.isValid);
    setErrors(result.errors);
  }, []);

  const handleTest = useCallback(async () =&gt; {}, []);

  const handleSave = useCallback(async () =&gt; {}, []);

  const actions = [
    &lt;Tooltip key=&quot;test&quot; title=&quot;Test node&quot;&gt;
      &lt;Button
        type=&quot;primary&quot;
        size=&quot;small&quot;
        icon={&lt;PlayCircleOutlined /&gt;}
        onClick={handleTest}
        disabled={!isValid}
      &gt;
        Test
      &lt;/Button&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;debug&quot; title=&quot;Debug mode&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;BugOutlined /&gt;}
        onClick={() =&gt; {
          // Toggle debug mode for this node
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;save&quot; title=&quot;Save configuration&quot;&gt;
      &lt;Button type=&quot;text&quot; size=&quot;small&quot; icon={&lt;SaveOutlined /&gt;} onClick={handleSave} /&gt;
    &lt;/Tooltip&gt;,
  ];

  const tabItems = [
    {
      key: 'properties',
      label: (
        &lt;span&gt;
          Properties
          {errors.size &gt; 0 &amp;&amp; (
            &lt;Badge
              count={errors.size}
              size=&quot;small&quot;
              style={{ backgroundColor: '#ff4d4f', marginLeft: 8 }}
            /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          {enhancedProperties.length === 0 ? (
            &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
              &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
              &lt;div&gt;No properties available&lt;/div&gt;
              &lt;div className=&quot;text-xs mt-2&quot;&gt;
                This node type doesn't have configurable properties
              &lt;/div&gt;
            &lt;/div&gt;
          ) : (
            &lt;EnhancedPropertyRenderer
              properties={enhancedProperties}
              formState={formState}
              onChange={handlePropertyChange}
              onValidationChange={handleValidationChange}
              theme=&quot;dark&quot;
            /&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'credentials',
      label: 'Credentials',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;🔐&lt;/div&gt;
            &lt;div&gt;Credential management&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Configure authentication for this node&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'settings',
      label: 'Settings',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
            &lt;div&gt;Node settings&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Advanced configuration options&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;ResizablePanel title=&quot;Configuration&quot; width={550} actions={actions}&gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabItems}
        className=&quot;h-full&quot;
        tabBarStyle={{ margin: 0, paddingLeft: 16, paddingRight: 16 }}
      /&gt;
    &lt;/ResizablePanel&gt;
  );
};

const OutputPreviewPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeState } = useEnhancedExecutionStore();
  const nodeState = getNodeState(nodeId);

  const actions = [
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy output&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          if (nodeState?.outputData) {
            navigator.clipboard.writeText(JSON.stringify(nodeState.outputData, null, 2));
          }
        }}
        disabled={!nodeState?.outputData}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;fullscreen&quot; title=&quot;Fullscreen view&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;FullscreenOutlined /&gt;}
        onClick={() =&gt; {
          // Open fullscreen view
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  const hasOutput = nodeState?.outputData;
  const hasError = nodeState?.error;

  return (
    &lt;ResizablePanel
      title=&quot;Output Preview&quot;
      width={400}
      actions={actions}
      badge={hasOutput ? '✓' : hasError ? '✗' : undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {hasError &amp;&amp; nodeState?.error ? (
          &lt;Card className=&quot;bg-red-900 border-red-600&quot; title=&quot;Execution Error&quot; size=&quot;small&quot;&gt;
            &lt;div className=&quot;text-red-200 text-sm&quot;&gt;
              &lt;div className=&quot;font-semibold mb-2&quot;&gt;{nodeState.error.message}&lt;/div&gt;
              {nodeState.error.stack &amp;&amp; (
                &lt;details className=&quot;mt-2&quot;&gt;
                  &lt;summary className=&quot;cursor-pointer&quot;&gt;Stack Trace&lt;/summary&gt;
                  &lt;pre className=&quot;text-xs mt-2 overflow-x-auto&quot;&gt;{nodeState.error.stack}&lt;/pre&gt;
                &lt;/details&gt;
              )}
            &lt;/div&gt;
          &lt;/Card&gt;
        ) : hasOutput ? (
          &lt;div&gt;
            &lt;div className=&quot;flex items-center justify-between mb-3&quot;&gt;
              &lt;span className=&quot;text-sm font-medium text-green-400&quot;&gt;Output Data&lt;/span&gt;
              {nodeState.duration &amp;&amp; (
                &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                  {nodeState.duration &lt; 1000
                    ? `${nodeState.duration}ms`
                    : `${(nodeState.duration / 1000).toFixed(2)}s`}
                &lt;/span&gt;
              )}
            &lt;/div&gt;
            &lt;JsonViewer data={nodeState.outputData} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📤&lt;/div&gt;
            &lt;div&gt;No output data&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Execute this node to see output data&lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

export const AdvancedPropertyPanel: React.FC&lt;AdvancedPropertyPanelProps&gt; = ({
  isOpen,
  onClose,
  nodeId,
}) =&gt; {
  const [inputPanelWidth, setInputPanelWidth] = useState(700);
  const { getNodeById } = useLeanWorkflowStore();

  const node = nodeId ? getNodeById(nodeId) : null;

  if (!isOpen || !nodeId || !node) {
    return null;
  }

  return (
    &lt;Drawer
      title={
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
            &lt;SettingOutlined /&gt;
            &lt;span&gt;{node.name || node.type}&lt;/span&gt;
            &lt;Badge status=&quot;processing&quot; text={node.type} /&gt;
          &lt;/div&gt;
          &lt;Button type=&quot;text&quot; icon={&lt;CloseOutlined /&gt;} onClick={onClose} size=&quot;small&quot; /&gt;
        &lt;/div&gt;
      }
      placement=&quot;bottom&quot;
      height=&quot;80vh&quot;
      open={isOpen}
      onClose={onClose}
      closable={false}
      className=&quot;advanced-property-panel&quot;
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;div className=&quot;flex h-full bg-gray-800&quot;&gt;
        {/* INPUT Column */}
        &lt;InputDataPanel nodeId={nodeId} width={inputPanelWidth} onResize={setInputPanelWidth} /&gt;

        {/* CONFIGURATION Column */}
        &lt;ConfigurationPanel nodeId={nodeId} /&gt;

        {/* OUTPUT Column */}
        &lt;OutputPreviewPanel nodeId={nodeId}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedNodePanel.tsx (Line 302:4 - Line 466:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancednodepanel/AdvancedNodePanel.tsx (Line 307:4 - Line 471:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup113"><code class="language-javascript text-sm text-gray-800">={suggestion.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, suggestion);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAISuggestionAdd(suggestion);
        }}
        className=&quot;group p-2.5 border border-blue-200 bg-blue-50 rounded-md cursor-move hover:bg-blue-100 hover:border-blue-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm bg-blue-500&quot;&gt;
            {suggestion.icon}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-blue-900 truncate&quot;&gt;{suggestion.displayName}&lt;/p&gt;
              &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-1.5 py-0.5 rounded-full font-medium&quot;&gt;
                AI
              &lt;/span&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-blue-700 truncate mt-0.5 leading-tight&quot;&gt;
              {suggestion.description}
            &lt;/p&gt;
            {suggestion.aiSuggestion &amp;&amp; (
              &lt;div className=&quot;mt-1&quot;&gt;
                &lt;p className=&quot;text-xs text-blue-600 italic&quot;&gt;
                  💡 {suggestion.aiSuggestion.reasoning}
                &lt;/p&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-700 text-xs px-1.5 py-0.5 rounded mt-1 inline-block&quot;&gt;
                  Confidence: {Math.round(suggestion.aiSuggestion.confidence * 100)}%
                &lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAISuggestionAdd]
  );

  // Render function for node items in virtualized list
  const renderNodeItem = useCallback(
    (node: (typeof allAvailableNodes)[0], _index: number) =&gt; (
      &lt;div
        key={node.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, node);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAddNode(node);
        }}
        className=&quot;group p-2.5 border border-gray-200 rounded-md cursor-move hover:bg-gray-50 hover:border-gray-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div
            className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm&quot;
            style={{ backgroundColor: node.color }}
          &gt;
            {node.icon || node.displayName.charAt(0)}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-gray-900 truncate&quot;&gt;{node.displayName}&lt;/p&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-gray-500 truncate mt-0.5 leading-tight&quot;&gt;
              {node.description}
            &lt;/p&gt;
            &lt;div className=&quot;mt-1.5&quot;&gt;
              &lt;span className=&quot;bg-gray-100 text-gray-600 text-xs px-1.5 py-0.5 rounded&quot;&gt;
                {getCategoryMetadata(node.category || '')?.icon || ''} {node.category}
              &lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAddNode]
  );

  return (
    &lt;div
      className={`${isCollapsed ? 'w-16' : 'w-80'} h-full bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ease-in-out`}
    &gt;
      {/* Toggle Button */}
      &lt;div className=&quot;flex justify-end p-4&quot;&gt;
        &lt;button
          onClick={onToggle}
          className=&quot;p-2 rounded-lg hover:bg-gray-100 transition-colors&quot;
          title={isCollapsed ? 'Expand node panel' : 'Collapse node panel'}
        &gt;
          &lt;span className=&quot;text-lg&quot;&gt;{isCollapsed ? '→' : '←'}&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;px-4 pb-4 border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-semibold text-gray-900&quot;&gt;Nodes&lt;/h2&gt;
            &lt;span className=&quot;bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
              {allAvailableNodes.length}
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;p className=&quot;text-sm text-gray-600&quot;&gt;Drag to add to workflow&lt;/p&gt;
        &lt;/div&gt;
      )}

      {/* Search and Filter */}
      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;p-4 border-b border-gray-200 space-y-3&quot;&gt;
          &lt;input
            type=&quot;text&quot;
            placeholder=&quot;Search nodes...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          /&gt;

          &lt;select
            value={selectedCategory}
            onChange={(e) =&gt; setSelectedCategory(e.target.value)}
            aria-label=&quot;Select category&quot;
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          &gt;
            {categories.map((category) =&gt; {
              const metadata = category !== 'all' ? getCategoryMetadata(category) : null;
              return (
                &lt;option key={category} value={category}&gt;
                  {category === 'all' ? 'All Categories' : `${metadata?.icon || ''} ${category}`}
                &lt;/option&gt;
              );
            })}
          &lt;/select&gt;
        &lt;/div&gt;
      )}

      {/* AI Suggestions Section */}
      {!isCollapsed &amp;&amp; isAIEnabled &amp;&amp; aiSuggestedNodes.length &gt; 0 &amp;&amp; showAISuggestions &amp;&amp; (
        &lt;div className=&quot;border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;px-4 py-3 bg-blue-50&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                &lt;div className=&quot;w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center&quot;&gt;
                  &lt;span className=&quot;text-white text-xs&quot;&gt;🤖&lt;/span&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-sm font-medium text-blue-900&quot;&gt;AI Suggestions&lt;/h3&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                  {aiSuggestedNodes.length}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;button
                onClick={() =&gt; setShowAISuggestions(false)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAssistantPanel.tsx (Line 210:4 - Line 542:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/aiassistantpanel/AIAssistantPanel.tsx (Line 213:4 - Line 545:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup119"><code class="language-javascript text-sm text-gray-800">={suggestion.id}
      size=&quot;small&quot;
      className=&quot;mb-3 bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors&quot;
      actions={[
        &lt;Tooltip key=&quot;details&quot; title=&quot;View Details&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;InfoCircleOutlined /&gt;}
            onClick={() =&gt; handleViewSuggestionDetails(suggestion)}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
        &lt;Tooltip key=&quot;apply&quot; title=&quot;Apply Suggestion&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;CheckCircleOutlined /&gt;}
            onClick={() =&gt; handleApplySuggestion(suggestion)}
            className=&quot;text-green-400 hover:text-green-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
      ]}
    &gt;
      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            {getTypeIcon(suggestion.type)}
            &lt;span className=&quot;text-white font-medium text-sm&quot;&gt;{suggestion.title}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-1&quot;&gt;
            &lt;Tag color={getImpactColor(suggestion.impact)}&gt;{suggestion.impact}&lt;/Tag&gt;
            &lt;Badge
              count={`${(suggestion.confidence * 100).toFixed(0)}%`}
              style={{ backgroundColor: '#1890ff' }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;{suggestion.description}&lt;/Text&gt;

        &lt;div className=&quot;flex items-center gap-2 text-xs text-gray-500&quot;&gt;
          &lt;span&gt;Category: {suggestion.category}&lt;/span&gt;
          {suggestion.estimatedBenefit.performance &amp;&amp; (
            &lt;span&gt;Performance: +{(suggestion.estimatedBenefit.performance * 100).toFixed(0)}%&lt;/span&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderAnalysisMetrics = () =&gt; {
    if (!analysis) return null;

    return (
      &lt;div className=&quot;space-y-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
            Workflow Analysis
          &lt;/Title&gt;

          &lt;div className=&quot;space-y-3&quot;&gt;
            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Complexity&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;{(analysis.complexity * 100).toFixed(0)}%&lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.complexity * 100}
                strokeColor=&quot;#3b82f6&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Performance&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.performance.estimatedImprovement * 100).toFixed(0)}% improvement
                  possible
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.performance.estimatedImprovement * 100}
                strokeColor=&quot;#22c55e&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Maintainability&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.maintainability.codeQuality * 100).toFixed(0)}%
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.maintainability.codeQuality * 100}
                strokeColor=&quot;#f59e0b&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {analysis.performance.bottlenecks.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Performance Bottlenecks Detected&quot;
            description={
              &lt;ul className=&quot;mt-2&quot;&gt;
                {analysis.performance.bottlenecks.map((bottleneck, index) =&gt; (
                  &lt;li key={index} className=&quot;text-sm&quot;&gt;
                    {bottleneck}
                  &lt;/li&gt;
                ))}
              &lt;/ul&gt;
            }
            type=&quot;warning&quot;
            showIcon
            className=&quot;bg-yellow-900 border-yellow-600&quot;
          /&gt;
        )}

        {analysis.reliability.missingErrorHandling.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Missing Error Handling&quot;
            description={`${analysis.reliability.missingErrorHandling.length} nodes need error handling`}
            type=&quot;error&quot;
            showIcon
            className=&quot;bg-red-900 border-red-600&quot;
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;RobotOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            AI Assistant
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Intelligent workflow optimization and generation
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;ai-assistant-tabs&quot;
          items={[
            {
              key: 'suggestions',
              label: (
                &lt;span&gt;
                  &lt;BulbOutlined className=&quot;mr-1&quot; /&gt;
                  Suggestions
                  {suggestions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={suggestions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  {suggestions.length === 0 ? (
                    &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
                      &lt;BulbOutlined className=&quot;text-4xl mb-2&quot; /&gt;
                      &lt;div&gt;No suggestions available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-2&quot;&gt;
                        {workflow
                          ? 'Workflow analysis in progress...'
                          : 'Load a workflow to get AI suggestions'}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div&gt;{suggestions.map(renderSuggestionCard)}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              ),
            },
            {
              key: 'generate',
              label: (
                &lt;span&gt;
                  &lt;SendOutlined className=&quot;mr-1&quot; /&gt;
                  Generate
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Natural Language to Workflow
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      &lt;TextArea
                        value={naturalLanguageInput}
                        onChange={(e) =&gt; setNaturalLanguageInput(e.target.value)}
                        placeholder=&quot;Describe your workflow in natural language...&amp;#10;&amp;#10;Example: 'Send an email notification when a new order is received, then update the inventory database'&quot;
                        rows={4}
                        className=&quot;bg-gray-700 border-gray-600 text-white&quot;
                      /&gt;
                      &lt;Button
                        type=&quot;primary&quot;
                        icon={&lt;SendOutlined /&gt;}
                        onClick={handleGenerateWorkflow}
                        loading={isGenerating}
                        disabled={!naturalLanguageInput.trim()}
                        className=&quot;w-full&quot;
                      &gt;
                        Generate Workflow
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;

                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Quick Templates
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-2&quot;&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Send email notification when form is submitted')
                        }
                      &gt;
                        📧 Email Notification
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Process uploaded files and save to database')
                        }
                      &gt;
                        📁 File Processing
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Sync data between two APIs every hour')
                        }
                      &gt;
                        🔄 Data Synchronization
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'analysis',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Analysis
                &lt;/span&gt;
              ),
              children: renderAnalysisMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Suggestion Details Modal */}
      &lt;Modal
        title={selectedSuggestion?.title}
        open={isDetailModalOpen}
        onCancel={() =&gt; setIsDetailModalOpen(false)}
        footer={[
          &lt;Button key=&quot;cancel&quot; onClick={() =&gt; setIsDetailModalOpen(false)}&gt;
            Close
          &lt;/Button&gt;,
          &lt;Button
            key=&quot;apply&quot;
            type=&quot;primary&quot;
            onClick={() =&gt; {
              if (selectedSuggestion) {
                handleApplySuggestion(selectedSuggestion);
                setIsDetailModalOpen(false);
              }
            }}
          &gt;
            Apply Suggestion
          &lt;/Button&gt;,
        ]}
        width={600}
      &gt;
        {selectedSuggestion &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.description}&lt;/Text&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Title level={5}&gt;Reasoning&lt;/Title&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.reasoning}&lt;/Text&gt;
            &lt;/div&gt;

            {selectedSuggestion.suggestedChanges.length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}&gt;Suggested Changes&lt;/Title&gt;
                &lt;List
                  size=&quot;small&quot;
                  dataSource={selectedSuggestion.suggestedChanges}
                  renderItem={(change) =&gt; (
                    &lt;List.Item&gt;
                      &lt;div className=&quot;space-y-1&quot;&gt;
                        &lt;div className=&quot;font-medium&quot;&gt;{change.type}&lt;/div&gt;
                        &lt;div className=&quot;text-sm text-gray-600&quot;&gt;{change.reason}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/List.Item&gt;
                  )}
                /&gt;
              &lt;/div&gt;
            )}

            {Object.keys(selectedSuggestion.estimatedBenefit).length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/UserManagementPanel.tsx (Line 467:5 - Line 971:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/usermanagementpanel/UserManagementPanel.tsx (Line 470:5 - Line 974:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup126"><code class="language-javascript text-sm text-gray-800">={&lt;UserOutlined /&gt;} /&gt;
          &lt;div&gt;
            &lt;div className=&quot;text-white font-medium&quot;&gt;{record.name}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.email}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Role',
      key: 'role',
      render: (record: User) =&gt; &lt;Tag color={getRoleColor(record.role.id)}&gt;{record.role.name}&lt;/Tag&gt;,
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: User) =&gt; &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;,
    },
    {
      title: 'MFA',
      key: 'mfa',
      render: (record: User) =&gt; (
        &lt;Badge
          status={record.mfaEnabled ? 'success' : 'default'}
          text={record.mfaEnabled ? 'Enabled' : 'Disabled'}
        /&gt;
      ),
    },
    {
      title: 'Last Login',
      key: 'lastLogin',
      render: (record: User) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {record.lastLoginAt ? new Date(record.lastLoginAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: User) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;Edit User&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedUser(record);
                setIsUserModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Manage MFA&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckCircleOutlined /&gt;}
              onClick={() =&gt; {
                // Handle MFA management
              }}
              className=&quot;text-purple-400 hover:text-purple-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Dropdown
            menu={{
              items: [
                {
                  key: 'suspend',
                  label: record.status === 'active' ? 'Suspend User' : 'Activate User',
                  icon: record.status === 'active' ? &lt;LockOutlined /&gt; : &lt;UnlockOutlined /&gt;,
                },
                {
                  key: 'delete',
                  label: 'Delete User',
                  icon: &lt;DeleteOutlined /&gt;,
                  danger: true,
                },
              ],
            }}
            trigger={['click']}
          &gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;MoreOutlined /&gt;}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const apiKeyColumns = [
    {
      title: 'Name',
      key: 'name',
      render: (_record: APIKey) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{_record.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.metadata.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Key',
      key: 'key',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;font-mono text-xs text-gray-300&quot;&gt;{_record.key.substring(0, 12)}...&lt;/div&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (_record: APIKey) =&gt; (
        &lt;Tag color={_record.status === 'active' ? 'green' : 'red'}&gt;{_record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Expires',
      key: 'expires',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.expiresAt ? new Date(_record.expiresAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Last Used',
      key: 'lastUsed',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.lastUsedAt ? new Date(_record.lastUsedAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: APIKey) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Revoke Key&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;DeleteOutlined /&gt;}
              className=&quot;text-red-400 hover:text-red-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderUserStats = () =&gt; (
    &lt;div className=&quot;grid grid-cols-4 gap-4 mb-6&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic title=&quot;Total Users&quot; value={users.length} valueStyle={{ color: '#3b82f6' }} /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Active Users&quot;
          value={users.filter((u) =&gt; u.status === 'active').length}
          valueStyle={{ color: '#22c55e' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Pending Invitations&quot;
          value={invitations.filter((i) =&gt; i.status === 'pending').length}
          valueStyle={{ color: '#f59e0b' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;MFA Enabled&quot;
          value={users.filter((u) =&gt; u.mfaEnabled).length}
          valueStyle={{ color: '#8b5cf6' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderUsersTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {renderUserStats()}

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Users
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Search
              placeholder=&quot;Search users...&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              className=&quot;w-64&quot;
            /&gt;
            &lt;Select value={selectedRole} onChange={setSelectedRole} className=&quot;w-32&quot;&gt;
              &lt;Option value=&quot;all&quot;&gt;All Roles&lt;/Option&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;UserAddOutlined /&gt;}
              onClick={() =&gt; setIsInviteModalOpen(true)}
            &gt;
              Invite User
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={userColumns}
          dataSource={filteredUsers}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderAPIKeysTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            API Keys
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsAPIKeyModalOpen(true)}&gt;
            Create API Key
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={apiKeyColumns}
          dataSource={apiKeys}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderInvitationsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Pending Invitations
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;MailOutlined /&gt;} onClick={() =&gt; setIsInviteModalOpen(true)}&gt;
            Send Invitation
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;List
          dataSource={invitations.filter((i) =&gt; i.status === 'pending')}
          renderItem={(invitation) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button key=&quot;resend&quot; type=&quot;text&quot; size=&quot;small&quot;&gt;
                  Resend
                &lt;/Button&gt;,
                &lt;Button key=&quot;revoke&quot; type=&quot;text&quot; size=&quot;small&quot; danger&gt;
                  Revoke
                &lt;/Button&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                avatar={&lt;Avatar icon={&lt;MailOutlined /&gt;} /&gt;}
                title={invitation.email}
                description={
                  &lt;div&gt;
                    &lt;div&gt;Role: {invitation.role}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                      Expires: {new Date(invitation.expiresAt).toLocaleDateString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSSOTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-4&quot;&gt;
          SSO Providers
        &lt;/Title&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {ssoProviders.map((provider) =&gt; (
            &lt;div
              key={provider.id}
              className=&quot;flex items-center justify-between p-3 bg-gray-700 rounded border border-gray-600&quot;
            &gt;
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;img src={provider.metadata.logo} alt={provider.name} className=&quot;w-8 h-8 rounded&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{provider.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{provider.metadata.description}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Switch
                  checked={provider.enabled}
                  onChange={(_checked) =&gt; {
                    // Handle SSO provider toggle
                  }}
                /&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;SettingOutlined /&gt;}
                  onClick={() =&gt; {
                    // Handle SSO configuration
                  }}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;TeamOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            User Management
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Manage users, roles, permissions, and authentication
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;user-management-tabs&quot;
          items={[
            {
              key: 'users',
              label: (
                &lt;span&gt;
                  &lt;UserOutlined className=&quot;mr-1&quot; /&gt;
                  Users
                  &lt;Badge count={users.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderUsersTab(),
            },
            {
              key: 'apikeys',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  API Keys
                  &lt;Badge count={apiKeys.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAPIKeysTab(),
            },
            {
              key: 'invitations',
              label: (
                &lt;span&gt;
                  &lt;MailOutlined className=&quot;mr-1&quot; /&gt;
                  Invitations
                  &lt;Badge
                    count={invitations.filter((i) =&gt; i.status === 'pending').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderInvitationsTab(),
            },
            {
              key: 'sso',
              label: (
                &lt;span&gt;
                  &lt;LockOutlined className=&quot;mr-1&quot; /&gt;
                  SSO
                  &lt;Badge
                    count={ssoProviders.filter((p) =&gt; p.enabled).length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderSSOTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* User Edit Modal */}
      &lt;Modal
        title=&quot;Edit User&quot;
        open={isUserModalOpen}
        onCancel={() =&gt; setIsUserModalOpen(false)}
        onOk={() =&gt; setIsUserModalOpen(false)}
        width={600}
      &gt;
        {selectedUser &amp;&amp; (
          &lt;Form layout=&quot;vertical&quot;&gt;
            &lt;Form.Item label=&quot;Name&quot;&gt;
              &lt;Input value={selectedUser.name} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Email&quot;&gt;
              &lt;Input value={selectedUser.email} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Role&quot;&gt;
              &lt;Select value={selectedUser.role.id}&gt;
                {roles.map((role) =&gt; (
                  &lt;Option key={role.id} value={role.id}&gt;
                    {role.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Status&quot;&gt;
              &lt;Select value={selectedUser.status}&gt;
                &lt;Option value=&quot;active&quot;&gt;Active&lt;/Option&gt;
                &lt;Option value=&quot;inactive&quot;&gt;Inactive&lt;/Option&gt;
                &lt;Option value=&quot;suspended&quot;&gt;Suspended&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        )}
      &lt;/Modal&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={isInviteModalOpen}
        onCancel={() =&gt; setIsInviteModalOpen(false)}
        onOk={() =&gt; setIsInviteModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Email&quot; required&gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Role&quot; required&gt;
            &lt;Select placeholder=&quot;Select role&quot;&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Message&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Welcome message (optional)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create API Key Modal */}
      &lt;Modal
        title=&quot;Create API Key&quot;
        open={isAPIKeyModalOpen}
        onCancel={() =&gt; setIsAPIKeyModalOpen(false)}
        onOk={() =&gt; setIsAPIKeyModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;API Key Name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Description (optional)&quot; rows={2}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/SecurityDashboard.tsx (Line 186:6 - Line 892:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/securitydashboard/SecurityDashboard.tsx (Line 189:6 - Line 895:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup128"><code class="language-javascript text-sm text-gray-800">={getSeverityColor(_record.severity)}&gt;{_record.action.type}&lt;/Tag&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Resource',
      key: 'resource',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.resource.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.resource.type}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (_record: AuditLog) =&gt; (
        &lt;Tag color={getSeverityColor(_record.severity)}&gt;{_record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'IP Address',
      key: 'ipAddress',
      render: (_record: AuditLog) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs font-mono&quot;&gt;{_record.ipAddress}&lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: AuditLog) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                // Show audit log details
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const incidentColumns = [
    {
      title: 'Title',
      key: 'title',
      render: (record: SecurityIncident) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{record.title}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getSeverityColor(record.severity)}&gt;{record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Category',
      key: 'category',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs capitalize&quot;&gt;{record.category.replace('_', ' ')}&lt;/div&gt;
      ),
    },
    {
      title: 'Created',
      key: 'createdAt',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {new Date(record.createdAt).toLocaleDateString()}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: SecurityIncident) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedIncident(record);
                setIsIncidentModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Update Status&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;SettingOutlined /&gt;}
              onClick={() =&gt; {
                // Update incident status
              }}
              className=&quot;text-green-400 hover:text-green-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderOverviewTab = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Security Metrics */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Security Score&quot;
              value={metrics?.securityScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#22c55e' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Open Incidents&quot;
              value={metrics?.openIncidents || 0}
              valueStyle={{ color: '#ef4444' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Critical Incidents&quot;
              value={metrics?.criticalIncidents || 0}
              valueStyle={{ color: '#dc2626' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Compliance Score&quot;
              value={metrics?.complianceScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#3b82f6' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Recent Security Events */}
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Recent Security Events
          &lt;/Title&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;ReloadOutlined /&gt;}
            onClick={loadSecurityData}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/div&gt;

        &lt;Timeline
          items={auditLogs.slice(0, 5).map((log) =&gt; ({
            color: getSeverityColor(log.severity),
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white text-sm&quot;&gt;{log.action.description}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                  {log.userEmail} • {new Date(log.timestamp).toLocaleString()}
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Tag color={getSeverityColor(log.severity)}&gt;{log.severity}&lt;/Tag&gt;
                  &lt;Tag&gt;{log.category}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      &lt;/Card&gt;

      {/* Security Alerts */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Security Alerts
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {incidents.slice(0, 3).map((incident) =&gt; (
                &lt;Alert
                  key={incident.id}
                  message={incident.title}
                  description={incident.description}
                  type={incident.severity === 'critical' ? 'error' : 'warning'}
                  showIcon
                  className=&quot;bg-red-900 border-red-600&quot;
                /&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Vulnerability Summary
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {vulnerabilityScans.slice(0, 3).map((scan) =&gt; (
                &lt;div
                  key={scan.id}
                  className=&quot;flex items-center justify-between p-2 bg-gray-700 rounded&quot;
                &gt;
                  &lt;div&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.target}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-right&quot;&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;findings&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  const renderAuditLogsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Audit Logs
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Select
              value={filters.severity}
              onChange={(value) =&gt; setFilters({ ...filters, severity: value })}
              className=&quot;w-32&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Severity&lt;/Option&gt;
              &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
              &lt;Option value=&quot;error&quot;&gt;Error&lt;/Option&gt;
              &lt;Option value=&quot;warning&quot;&gt;Warning&lt;/Option&gt;
              &lt;Option value=&quot;info&quot;&gt;Info&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;Select
              value={filters.category}
              onChange={(value) =&gt; setFilters({ ...filters, category: value })}
              className=&quot;w-40&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Categories&lt;/Option&gt;
              &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
              &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
              &lt;Option value=&quot;data_access&quot;&gt;Data Access&lt;/Option&gt;
              &lt;Option value=&quot;security_event&quot;&gt;Security Event&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;RangePicker
              value={[filters.startDate, filters.endDate]}
              onChange={(dates) =&gt;
                setFilters({
                  ...filters,
                  startDate: dates?.[0],
                  endDate: dates?.[1],
                })
              }
              className=&quot;w-64&quot;
            /&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;DownloadOutlined /&gt;}
              onClick={() =&gt; {
                // Export audit logs
              }}
            &gt;
              Export
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={auditLogColumns}
          dataSource={filteredAuditLogs}
          loading={isLoading}
          pagination={{ pageSize: 20 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
          scroll={{ x: 'max-content' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderIncidentsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Security Incidents
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AlertOutlined /&gt;}
            onClick={() =&gt; setIsIncidentModalOpen(true)}
          &gt;
            Create Incident
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={incidentColumns}
          dataSource={incidents}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderVulnerabilitiesTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Vulnerability Scans
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;SecurityScanOutlined /&gt;}
            onClick={() =&gt; setIsScanModalOpen(true)}
          &gt;
            Start Scan
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {vulnerabilityScans.map((scan) =&gt; (
            &lt;Card key={scan.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{scan.target}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Total&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-red-400 text-lg font-bold&quot;&gt;{scan.summary.critical}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Critical&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-orange-400 text-lg font-bold&quot;&gt;{scan.summary.high}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;High&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={scan.status === 'completed' ? 'green' : 'orange'}&gt;{scan.status}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderComplianceTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Compliance Reports
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AuditOutlined /&gt;}
            onClick={() =&gt; {
              // Generate compliance report
            }}
          &gt;
            Generate Report
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {complianceReports.map((report) =&gt; (
            &lt;Card key={report.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{report.standard} Compliance Report&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                    Generated: {new Date(report.generatedAt).toLocaleDateString()}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.score}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Score&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.findings.length}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Findings&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={report.status === 'completed' ? 'green' : 'orange'}&gt;
                    {report.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSecretsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Secrets Management
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsSecretModalOpen(true)}&gt;
            Create Secret
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {secrets.map((secret) =&gt; (
            &lt;Card key={secret.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{secret.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{secret.type}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;
                      {secret.metadata?.accessCount || 0}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Access Count&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{secret.keyVersion}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Key Version&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Space&gt;
                    &lt;Tooltip title=&quot;Rotate Secret&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;ReloadOutlined /&gt;}
                        className=&quot;text-blue-400 hover:text-blue-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                    &lt;Tooltip title=&quot;View Details&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;EyeOutlined /&gt;}
                        className=&quot;text-green-400 hover:text-green-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/Space&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;CheckCircleOutlined className=&quot;text-green-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Security Dashboard
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Enterprise security monitoring and compliance management
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;security-dashboard-tabs&quot;
          items={[
            {
              key: 'overview',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Overview
                &lt;/span&gt;
              ),
              children: renderOverviewTab(),
            },
            {
              key: 'audit',
              label: (
                &lt;span&gt;
                  &lt;AuditOutlined className=&quot;mr-1&quot; /&gt;
                  Audit Logs
                  &lt;Badge count={auditLogs.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAuditLogsTab(),
            },
            {
              key: 'incidents',
              label: (
                &lt;span&gt;
                  &lt;AlertOutlined className=&quot;mr-1&quot; /&gt;
                  Incidents
                  &lt;Badge
                    count={incidents.filter((i) =&gt; i.status === 'open').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderIncidentsTab(),
            },
            {
              key: 'vulnerabilities',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Vulnerabilities
                  &lt;Badge count={vulnerabilityScans.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderVulnerabilitiesTab(),
            },
            {
              key: 'compliance',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Compliance
                  &lt;Badge count={complianceReports.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderComplianceTab(),
            },
            {
              key: 'secrets',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  Secrets
                  &lt;Badge count={secrets.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderSecretsTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Incident Details Modal */}
      &lt;Modal
        title=&quot;Security Incident Details&quot;
        open={isIncidentModalOpen}
        onCancel={() =&gt; setIsIncidentModalOpen(false)}
        footer={null}
        width={800}
      &gt;
        {selectedIncident &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Title&lt;/Text&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{selectedIncident.title}&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Severity&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getSeverityColor(selectedIncident.severity)}&gt;
                    {selectedIncident.severity}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Status&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getStatusColor(selectedIncident.status)}&gt;
                    {selectedIncident.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Category&lt;/Text&gt;
                &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.category}&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Description&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.description}&lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Timeline&lt;/Text&gt;
              &lt;Timeline
                items={selectedIncident.timeline.map((event) =&gt; ({
                  color: 'blue',
                  children: (
                    &lt;div className=&quot;space-y-1&quot;&gt;
                      &lt;div className=&quot;text-white text-sm&quot;&gt;{event.description}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                        {new Date(event.timestamp).toLocaleString()} • {event.actor}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                }))}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;

      {/* Start Vulnerability Scan Modal */}
      &lt;Modal
        title=&quot;Start Vulnerability Scan&quot;
        open={isScanModalOpen}
        onCancel={() =&gt; setIsScanModalOpen(false)}
        onOk={() =&gt; setIsScanModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Scan Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select scan type&quot;&gt;
              &lt;Option value=&quot;dependency&quot;&gt;Dependency Scan&lt;/Option&gt;
              &lt;Option value=&quot;container&quot;&gt;Container Scan&lt;/Option&gt;
              &lt;Option value=&quot;infrastructure&quot;&gt;Infrastructure Scan&lt;/Option&gt;
              &lt;Option value=&quot;code&quot;&gt;Code Scan&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Target&quot; required&gt;
            &lt;Input placeholder=&quot;Enter target (URL, path, etc.)&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Options&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Additional scan options (JSON)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create Secret Modal */}
      &lt;Modal
        title=&quot;Create Secret&quot;
        open={isSecretModalOpen}
        onCancel={() =&gt; setIsSecretModalOpen(false)}
        onOk={() =&gt; setIsSecretModalOpen(false)}
        width={600}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;Secret name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select secret type&quot;&gt;
              &lt;Option value=&quot;api_key&quot;&gt;API Key&lt;/Option&gt;
              &lt;Option value=&quot;password&quot;&gt;Password&lt;/Option&gt;
              &lt;Option value=&quot;certificate&quot;&gt;Certificate&lt;/Option&gt;
              &lt;Option value=&quot;token&quot;&gt;Token&lt;/Option&gt;
              &lt;Option value=&quot;database_credential&quot;&gt;Database Credential&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Value&quot; required&gt;
            &lt;Input.TextArea placeholder=&quot;Secret value&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Secret description&quot; rows={2}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/OrganizationSettings.tsx (Line 172:6 - Line 557:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/organizationsettings/OrganizationSettings.tsx (Line 176:6 - Line 561:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup130"><code class="language-javascript text-sm text-gray-800">={role}
          onChange={(newRole) =&gt; handleUpdateUserRole(record.userId, newRole)}
          disabled={!canManageUsers() || record.role === 'owner'}
          style={{ width: 120 }}
        &gt;
          &lt;Option value=&quot;owner&quot;&gt;Owner&lt;/Option&gt;
          &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
          &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
          &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
        &lt;/Select&gt;
      ),
    },
    {
      title: 'Joined',
      dataIndex: 'joinedAt',
      key: 'joinedAt',
      render: (date: Date) =&gt; new Date(date).toLocaleDateString(),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_: unknown, record: OrganizationMember) =&gt; (
        &lt;Space&gt;
          {canManageUsers() &amp;&amp; record.role !== 'owner' &amp;&amp; (
            &lt;Button
              type=&quot;link&quot;
              danger
              size=&quot;small&quot;
              onClick={() =&gt; handleRemoveUser(record.userId, record.userId)}
            &gt;
              Remove
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const tabs = [
    {
      key: 'general',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          General
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Form.Item
              name=&quot;name&quot;
              label=&quot;Organization Name&quot;
              rules={[{ required: true, message: 'Please enter organization name' }]}
            &gt;
              &lt;Input placeholder=&quot;Enter organization name&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
              &lt;TextArea rows={3} placeholder=&quot;Enter organization description&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;domain&quot; label=&quot;Domain&quot;&gt;
              &lt;Input placeholder=&quot;company.com&quot; addonBefore=&quot;@&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Workflow Settings&lt;/Divider&gt;

            &lt;Form.Item
              name=&quot;allowPublicWorkflows&quot;
              label=&quot;Allow Public Workflows&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;requireApprovalForExecution&quot;
              label=&quot;Require Approval for Execution&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxWorkflowsPerUser&quot; label=&quot;Max Workflows per User&quot;&gt;
              &lt;InputNumber min={1} max={1000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxExecutionsPerMonth&quot; label=&quot;Max Executions per Month&quot;&gt;
              &lt;InputNumber min={100} max={1000000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Space&gt;
                &lt;Button
                  type=&quot;primary&quot;
                  htmlType=&quot;submit&quot;
                  loading={loading || isLoading}
                  disabled={!canManageOrganization()}
                &gt;
                  Save Settings
                &lt;/Button&gt;
                &lt;Button type=&quot;link&quot; onClick={() =&gt; setShowAdvancedSettings(!showAdvancedSettings)}&gt;
                  {showAdvancedSettings ? 'Hide' : 'Show'} Advanced Settings
                &lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Alert
              message=&quot;Security Settings&quot;
              description=&quot;Configure security policies and access controls for your organization.&quot;
              type=&quot;info&quot;
              showIcon
              style={{ marginBottom: 24 }}
            /&gt;

            &lt;Form.Item
              name=&quot;enableAuditLogging&quot;
              label=&quot;Enable Audit Logging&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;enableSSOIntegration&quot;
              label=&quot;Enable SSO Integration&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;allowedDomains&quot; label=&quot;Allowed Domains&quot;&gt;
              &lt;Input
                placeholder=&quot;domain1.com, domain2.com&quot;
                addonAfter={
                  &lt;Tooltip title=&quot;Comma-separated list of allowed email domains&quot;&gt;
                    &lt;GlobalOutlined /&gt;
                  &lt;/Tooltip&gt;
                }
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;sessionTimeout&quot; label=&quot;Session Timeout (minutes)&quot;&gt;
              &lt;InputNumber
                min={5}
                max={1440}
                style={{ width: '100%' }}
                addonAfter={&lt;ClockCircleOutlined /&gt;}
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Password Policy&lt;/Divider&gt;

            &lt;Form.Item name=&quot;passwordMinLength&quot; label=&quot;Minimum Length&quot;&gt;
              &lt;InputNumber min={6} max={32} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;Form.Item
                name=&quot;passwordRequireUppercase&quot;
                label=&quot;Require Uppercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireLowercase&quot;
                label=&quot;Require Lowercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireNumbers&quot;
                label=&quot;Require Numbers&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireSymbols&quot;
                label=&quot;Require Symbols&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Space&gt;

            &lt;Form.Item
              name=&quot;passwordPreventReuse&quot;
              label=&quot;Prevent Password Reuse (last N passwords)&quot;
            &gt;
              &lt;InputNumber min={0} max={10} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;passwordMaxAge&quot; label=&quot;Password Expiry (days)&quot;&gt;
              &lt;InputNumber min={30} max={365} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Button
                type=&quot;primary&quot;
                htmlType=&quot;submit&quot;
                loading={loading || isLoading}
                disabled={!canManageOrganization()}
                icon={&lt;CheckOutlined /&gt;}
              &gt;
                Update Security Settings
              &lt;/Button&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'members',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Members ({organization.members.length})
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;div style={{ marginBottom: 16 }}&gt;
            &lt;Space&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt; setInviteModalVisible(true)}
                disabled={!canManageUsers()}
                icon={&lt;TeamOutlined /&gt;}
              &gt;
                Invite User
              &lt;/Button&gt;
              &lt;Text type=&quot;secondary&quot;&gt;Manage organization members and their roles&lt;/Text&gt;
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;Table
            dataSource={organization.members}
            columns={memberColumns}
            rowKey=&quot;userId&quot;
            pagination={{ pageSize: 10 }}
            loading={isLoading}
          /&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'audit',
      label: (
        &lt;span&gt;
          &lt;AuditOutlined /&gt;
          Audit &amp; Compliance
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Alert
            message=&quot;Audit &amp; Compliance&quot;
            description=&quot;Track all actions performed within your organization for security and compliance purposes.&quot;
            type=&quot;info&quot;
            showIcon
            style={{ marginBottom: 24 }}
          /&gt;

          &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;large&quot;&gt;
            &lt;Card size=&quot;small&quot; title=&quot;Data Retention&quot;&gt;
              &lt;Paragraph&gt;
                Audit logs are retained for 90 days. Execution logs are retained for 30 days.
                Contact support for longer retention periods.
              &lt;/Paragraph&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Compliance Standards&quot;&gt;
              &lt;Space wrap&gt;
                &lt;Tag color=&quot;green&quot;&gt;SOC 2 Type II&lt;/Tag&gt;
                &lt;Tag color=&quot;blue&quot;&gt;GDPR Compliant&lt;/Tag&gt;
                &lt;Tag color=&quot;purple&quot;&gt;ISO 27001&lt;/Tag&gt;
                &lt;Tag color=&quot;orange&quot;&gt;HIPAA Ready&lt;/Tag&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Data Export&quot;&gt;
              &lt;Space&gt;
                &lt;Button&gt;Export Audit Logs&lt;/Button&gt;
                &lt;Button&gt;Export User Data&lt;/Button&gt;
                &lt;Button&gt;Export Workflow Data&lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;
          &lt;/Space&gt;
        &lt;/Card&gt;
      ),
    },
  ];

  return (
    &lt;div&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;SettingOutlined /&gt; Organization Settings
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;
          Manage your organization's settings, security policies, and members
        &lt;/Text&gt;
      &lt;/div&gt;

      {error &amp;&amp; (
        &lt;Alert
          message=&quot;Error&quot;
          description={error}
          type=&quot;error&quot;
          closable
          style={{ marginBottom: 16 }}
        /&gt;
      )}

      &lt;Tabs items={tabs} /&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={inviteModalVisible}
        onCancel={() =&gt; setInviteModalVisible(false)}
        footer={null}
        width={500}
      &gt;
        &lt;Form form={inviteForm} layout=&quot;vertical&quot; onFinish={handleInviteUser}&gt;
          &lt;Form.Item
            name=&quot;email&quot;
            label=&quot;Email Address&quot;
            rules={[
              { required: true, message: 'Please enter email address' },
              { type: 'email', message: 'Please enter a valid email address' },
            ]}
          &gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;role&quot;
            label=&quot;Role&quot;
            rules={[{ required: true, message: 'Please select a role' }]}
            initialValue=&quot;member&quot;
          &gt;
            &lt;Select&gt;
              &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
              &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
              &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={isLoading}&gt;
                Send Invitation
              &lt;/Button&gt;
              &lt;Button onClick={() =&gt; setInviteModalVisible(false)}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/PricingSection.tsx (Line 210:8 - Line 500:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/pricingsection/PricingSection.tsx (Line 212:8 - Line 502:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup134"><code class="language-javascript text-sm text-gray-800">={() =&gt; setBillingPeriod('monthly')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'monthly'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Monthly
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; setBillingPeriod('annually')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'annually'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Annually
              &lt;span className=&quot;ml-2 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full&quot;&gt;
                Save 20%
              &lt;/span&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Pricing Cards */}
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8 mb-20&quot;&gt;
          {plans.map((plan, index) =&gt; {
            const Icon = plan.icon;
            const price = plan.price[billingPeriod];

            return (
              &lt;div
                key={index}
                className={`relative rounded-2xl border-2 p-8 transition-all duration-300 ${
                  plan.popular
                    ? 'border-blue-500 shadow-xl shadow-blue-500/10 scale-105'
                    : 'border-gray-200 hover:border-gray-300 hover:shadow-lg'
                }`}
              &gt;
                {/* Popular Badge */}
                {plan.popular &amp;&amp; (
                  &lt;div className=&quot;absolute -top-4 left-1/2 transform -translate-x-1/2&quot;&gt;
                    &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium&quot;&gt;
                      Most Popular
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Plan Header */}
                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;div
                    className={`w-16 h-16 rounded-xl bg-gradient-to-r ${plan.gradient} flex items-center justify-center mx-auto mb-4`}
                  &gt;
                    &lt;Icon className=&quot;w-8 h-8 text-white&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{plan.description}&lt;/p&gt;

                  {/* Price */}
                  &lt;div className=&quot;mb-6&quot;&gt;
                    {typeof price === 'number' ? (
                      &lt;&gt;
                        &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;
                          ${price}
                          {price &gt; 0 &amp;&amp; &lt;span className=&quot;text-lg text-gray-600&quot;&gt;/user/month&lt;/span&gt;}
                        &lt;/div&gt;
                        {billingPeriod === 'annually' &amp;&amp; price &gt; 0 &amp;&amp; (
                          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;
                            Billed annually (${price * 12}/user/year)
                          &lt;/div&gt;
                        )}
                      &lt;/&gt;
                    ) : (
                      &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;{price}&lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Features */}
                &lt;div className=&quot;mb-8&quot;&gt;
                  &lt;ul className=&quot;space-y-3&quot;&gt;
                    {plan.features.map((feature, featureIndex) =&gt; (
                      &lt;li key={featureIndex} className=&quot;flex items-start gap-3&quot;&gt;
                        &lt;Check className=&quot;w-5 h-5 text-green-500 mt-0.5 flex-shrink-0&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;{feature}&lt;/span&gt;
                      &lt;/li&gt;
                    ))}
                  &lt;/ul&gt;

                  {/* Limitations */}
                  {plan.limitations.length &gt; 0 &amp;&amp; (
                    &lt;div className=&quot;mt-6 pt-6 border-t border-gray-100&quot;&gt;
                      &lt;p className=&quot;text-sm text-gray-500 mb-2&quot;&gt;Limitations:&lt;/p&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {plan.limitations.map((limitation, limitIndex) =&gt; (
                          &lt;li
                            key={limitIndex}
                            className=&quot;text-sm text-gray-500 flex items-start gap-2&quot;
                          &gt;
                            &lt;div className=&quot;w-1 h-1 rounded-full bg-gray-400 mt-2 flex-shrink-0&quot; /&gt;
                            {limitation}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;

                {/* CTA Button */}
                &lt;button
                  onClick={() =&gt; handlePlanClick(plan.name)}
                  className={`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center gap-2 ${
                    plan.popular
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:scale-105 hover:shadow-lg'
                      : 'bg-gray-100 text-gray-900 hover:bg-gray-200'
                  }`}
                &gt;
                  {plan.cta}
                  &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Feature Comparison Table */}
        &lt;div className=&quot;bg-gray-50 rounded-2xl p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;Feature Comparison&lt;/h3&gt;

          &lt;div className=&quot;overflow-x-auto&quot;&gt;
            &lt;table className=&quot;w-full&quot;&gt;
              &lt;thead&gt;
                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                  &lt;th className=&quot;text-left py-4 pr-6 font-semibold text-gray-900&quot;&gt;Features&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Community&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;
                    Professional
                  &lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Enterprise&lt;/th&gt;
                &lt;/tr&gt;
              &lt;/thead&gt;
              &lt;tbody&gt;
                {comparisonFeatures.map((category, categoryIndex) =&gt; (
                  &lt;React.Fragment key={categoryIndex}&gt;
                    &lt;tr&gt;
                      &lt;td
                        colSpan={4}
                        className=&quot;py-4 pr-6 font-semibold text-gray-800 bg-gray-100/50&quot;
                      &gt;
                        {category.category}
                      &lt;/td&gt;
                    &lt;/tr&gt;
                    {category.features.map((feature, featureIndex) =&gt; (
                      &lt;tr key={featureIndex} className=&quot;border-b border-gray-100&quot;&gt;
                        &lt;td className=&quot;py-3 pr-6 text-gray-700&quot;&gt;{feature.name}&lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.community === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.community === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.community}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.pro === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.pro === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.pro}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.enterprise === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.enterprise === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.enterprise}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                      &lt;/tr&gt;
                    ))}
                  &lt;/React.Fragment&gt;
                ))}
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Competitive Pricing Comparison */}
        &lt;div className=&quot;mt-16 bg-white rounded-2xl border border-gray-200 p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;
            How We Compare on{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Pricing
            &lt;/span&gt;
          &lt;/h3&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6&quot;&gt;
            {/* Reporunner */}
            &lt;div className=&quot;bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Reporunner&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-blue-600 mb-2&quot;&gt;$49/user&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Self-hosted + Pro features&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Unlimited executions&lt;/div&gt;
                  &lt;div&gt;✅ All enterprise features&lt;/div&gt;
                  &lt;div&gt;✅ No hidden costs&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Zapier */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Zapier&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$19.99+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud only&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited tasks/month&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Expensive at scale&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Make.com */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Make.com&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$9+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, operations-based&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited operations&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Costs add up quickly&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* n8n */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;n8n&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$20+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Self-hosting option&lt;/div&gt;
                  &lt;div&gt;❌ Limited AI features&lt;/div&gt;
                  &lt;div&gt;❌ Basic collaboration&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* SIM */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;SIM&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;Custom&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Enterprise pricing&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ AI features&lt;/div&gt;
                  &lt;div&gt;❌ Limited self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Higher enterprise cost&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;div className=&quot;mt-6 text-center&quot;&gt;
            &lt;p className=&quot;text-sm text-gray-600&quot;&gt;
              💡 &lt;strong&gt;Reporunner advantage:&lt;/strong&gt; Enterprise features at mid-market pricing
              with complete self-hosting control
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Enterprise CTA */}
        &lt;div className=&quot;mt-16 text-center&quot;&gt;
          &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Need a custom solution for your enterprise?&lt;/h3&gt;
            &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
              We offer custom deployment options, dedicated support, and tailored features for large
              organizations with specific requirements.
            &lt;/p&gt;
            &lt;button
              onClick={() =&gt; navigate('/contact')}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/IntegrationEcosystem.tsx (Line 156:4 - Line 225:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/integrationecosystem/IntegrationEcosystem.tsx (Line 157:4 - Line 226:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup136"><code class="language-javascript text-sm text-gray-800">={index}
                className=&quot;bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-lg transition-all hover:-translate-y-1&quot;
              &gt;
                &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 w-12 h-12 rounded-lg flex items-center justify-center mb-4&quot;&gt;
                  &lt;Icon className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;{feature.title}&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{feature.description}&lt;/p&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Integration Browser */}
        &lt;div className=&quot;bg-white rounded-2xl border border-gray-200 shadow-lg overflow-hidden&quot;&gt;
          {/* Browser Header */}
          &lt;div className=&quot;bg-gray-50 border-b border-gray-200 p-6&quot;&gt;
            &lt;div className=&quot;flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4&quot;&gt;
              &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Integration Library&lt;/h3&gt;

              {/* Search Bar */}
              &lt;div className=&quot;relative&quot;&gt;
                &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400&quot; /&gt;
                &lt;input
                  type=&quot;text&quot;
                  placeholder=&quot;Search integrations...&quot;
                  className=&quot;pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Category Tabs */}
            &lt;div className=&quot;flex flex-wrap gap-2 mt-6&quot;&gt;
              {categories.map((category) =&gt; (
                &lt;button
                  key={category.id}
                  onClick={() =&gt; setActiveCategory(category.id)}
                  className={`px-4 py-2 rounded-lg font-medium transition-all ${
                    activeCategory === category.id
                      ? 'bg-blue-600 text-white shadow-lg'
                      : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'
                  }`}
                &gt;
                  {category.name}
                  &lt;span className=&quot;ml-2 text-sm opacity-75&quot;&gt;({category.count})&lt;/span&gt;
                &lt;/button&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Integration Grid */}
          &lt;div className=&quot;p-6&quot;&gt;
            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4&quot;&gt;
              {filteredIntegrations.map((integration, index) =&gt; {
                const Icon = integration.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;group relative bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer&quot;
                  &gt;
                    {/* Popular Badge */}
                    {integration.popular &amp;&amp; (
                      &lt;div className=&quot;absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                        Popular
                      &lt;/div&gt;
                    )}

                    {/* Icon */}
                    &lt;div
                      className={`w-12 h-12 rounded-lg bg-gradient-to-r ${integration.gradient} flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/Header.tsx (Line 180:10 - Line 352:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/header/Header.tsx (Line 187:10 - Line 359:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup139"><code class="language-javascript text-sm text-gray-800">={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${
        isScrolled
          ? 'bg-white/95 backdrop-blur-md shadow-lg border-b border-gray-200/50'
          : 'bg-white/80 backdrop-blur-sm'
      }`}
    &gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between h-16&quot;&gt;
          {/* Logo */}
          &lt;Link to=&quot;/&quot; className=&quot;flex items-center gap-3 group&quot;&gt;
            &lt;div className=&quot;w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center&quot;&gt;
              &lt;Zap className=&quot;w-5 h-5 text-white&quot; /&gt;
            &lt;/div&gt;
            &lt;span className=&quot;text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Reporunner
            &lt;/span&gt;
          &lt;/Link&gt;

          {/* Desktop Navigation */}
          &lt;nav className=&quot;hidden lg:flex items-center space-x-8&quot;&gt;
            {menuItems.map((menu, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;relative group&quot;
                onMouseEnter={() =&gt; setActiveDropdown(menu.label)}
                onMouseLeave={() =&gt; setActiveDropdown(null)}
              &gt;
                &lt;button className=&quot;flex items-center gap-1 text-gray-700 hover:text-blue-600 font-medium transition-colors py-2&quot;&gt;
                  {menu.label}
                  &lt;ChevronDown className=&quot;w-4 h-4&quot; /&gt;
                &lt;/button&gt;

                {/* Dropdown */}
                {activeDropdown === menu.label &amp;&amp; (
                  &lt;div className=&quot;absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-200 py-4 z-50&quot;&gt;
                    &lt;div className=&quot;px-4 pb-2 mb-2 border-b border-gray-100&quot;&gt;
                      &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{menu.label}&lt;/h3&gt;
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className=&quot;flex items-start gap-3 px-4 py-3 hover:bg-gray-50 transition-colors group&quot;
                      &gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-gray-900 group-hover:text-blue-600&quot;&gt;
                              {item.name}
                            &lt;/span&gt;
                            {item.external &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3 text-gray-400&quot; /&gt;}
                          &lt;/div&gt;
                          &lt;p className=&quot;text-sm text-gray-500 mt-1&quot;&gt;{item.description}&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;ArrowRight className=&quot;w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity mt-1&quot; /&gt;
                      &lt;/Link&gt;
                    ))}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            ))}
          &lt;/nav&gt;

          {/* Auth Buttons */}
          &lt;div className=&quot;hidden lg:flex items-center gap-3&quot;&gt;
            {isAuthenticated ? (
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/dashboard')}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;User className=&quot;w-4 h-4&quot; /&gt;
                  Dashboard
                &lt;/button&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/settings')}
                  className=&quot;p-2 text-gray-500 hover:text-gray-700 transition-colors&quot;
                  title=&quot;Settings&quot;
                &gt;
                  &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            ) : (
              &lt;&gt;
                &lt;button
                  onClick={handleAuth}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;LogIn className=&quot;w-4 h-4&quot; /&gt;
                  Sign In
                &lt;/button&gt;
                &lt;button
                  onClick={handleGetStarted}
                  className=&quot;flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all hover:scale-105&quot;
                &gt;
                  &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                  Get Started
                &lt;/button&gt;
              &lt;/&gt;
            )}
          &lt;/div&gt;

          {/* Mobile Menu Button */}
          &lt;button
            onClick={() =&gt; setIsMobileMenuOpen(!isMobileMenuOpen)}
            className=&quot;lg:hidden p-2 text-gray-700 hover:text-blue-600 transition-colors&quot;
          &gt;
            {isMobileMenuOpen ? &lt;X className=&quot;w-6 h-6&quot; /&gt; : &lt;Menu className=&quot;w-6 h-6&quot; /&gt;}
          &lt;/button&gt;
        &lt;/div&gt;

        {/* Mobile Menu */}
        {isMobileMenuOpen &amp;&amp; (
          &lt;div className=&quot;lg:hidden border-t border-gray-200 bg-white/95 backdrop-blur-md&quot;&gt;
            &lt;div className=&quot;py-4&quot;&gt;
              {/* Auth Section */}
              &lt;div className=&quot;px-4 py-4 border-b border-gray-200&quot;&gt;
                {isAuthenticated ? (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/dashboard')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;User className=&quot;w-5 h-5&quot; /&gt;
                      Dashboard
                    &lt;/button&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/settings')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                      Settings
                    &lt;/button&gt;
                  &lt;/div&gt;
                ) : (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={handleAuth}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;LogIn className=&quot;w-5 h-5&quot; /&gt;
                      Sign In
                    &lt;/button&gt;
                    &lt;button
                      onClick={handleGetStarted}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all&quot;
                    &gt;
                      &lt;Play className=&quot;w-5 h-5&quot; /&gt;
                      Get Started
                    &lt;/button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;

              {/* Navigation Menu */}
              &lt;div className=&quot;space-y-1 px-4 pt-4&quot;&gt;
                {menuItems.map((menu, index) =&gt; (
                  &lt;div key={index} className=&quot;space-y-1&quot;&gt;
                    &lt;div className=&quot;px-4 py-2 font-semibold text-gray-900 text-sm uppercase tracking-wide&quot;&gt;
                      {menu.label}
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className={`block px-4 py-3 rounded-lg transition-colors ${
                          isActivePage(item.href)
                            ? 'bg-blue-50 text-blue-600 font-medium'
                            : 'text-gray-700 hover:bg-gray-50'
                        }`}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/FeatureShowcase.tsx (Line 195:4 - Line 365:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/featureshowcase/FeatureShowcase.tsx (Line 196:4 - Line 366:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup141"><code class="language-javascript text-sm text-gray-800">={feature.id}
                    className={`cursor-pointer transition-all duration-300 rounded-xl p-6 border-2 ${
                      isActive
                        ? 'border-blue-500 bg-white shadow-lg shadow-blue-500/10'
                        : 'border-gray-200 bg-white/50 hover:border-gray-300 hover:bg-white'
                    }`}
                    onClick={() =&gt; setActiveFeature(index)}
                  &gt;
                    &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                      {/* Icon */}
                      &lt;div
                        className={`w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 ${
                          isActive
                            ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white'
                            : 'bg-gray-100 text-gray-600'
                        }`}
                      &gt;
                        &lt;Icon className=&quot;w-6 h-6&quot; /&gt;
                      &lt;/div&gt;

                      {/* Content */}
                      &lt;div className=&quot;flex-1&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                          &lt;h3
                            className={`text-xl font-bold transition-colors ${
                              isActive ? 'text-blue-600' : 'text-gray-900'
                            }`}
                          &gt;
                            {feature.title}
                          &lt;/h3&gt;
                          {isActive &amp;&amp; (
                            &lt;div className=&quot;flex items-center gap-1 text-sm text-blue-600 font-medium&quot;&gt;
                              &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                              Live Demo
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;

                        &lt;p className=&quot;text-sm text-gray-500 mb-3&quot;&gt;{feature.subtitle}&lt;/p&gt;
                        &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;

                        {/* Highlights */}
                        &lt;div className=&quot;grid grid-cols-2 gap-2&quot;&gt;
                          {feature.highlights.map((highlight, i) =&gt; (
                            &lt;div key={i} className=&quot;flex items-center gap-2 text-sm text-gray-600&quot;&gt;
                              &lt;div
                                className={`w-1.5 h-1.5 rounded-full ${
                                  isActive ? 'bg-blue-500' : 'bg-gray-400'
                                }`}
                              /&gt;
                              {highlight}
                            &lt;/div&gt;
                          ))}
                        &lt;/div&gt;

                        {/* Try It Button */}
                        {isActive &amp;&amp; (
                          &lt;div className=&quot;mt-4 pt-4 border-t border-gray-100&quot;&gt;
                            &lt;button className=&quot;group flex items-center gap-2 text-blue-600 font-medium text-sm hover:text-blue-700 transition-colors&quot;&gt;
                              Try this feature
                              &lt;ArrowRight className=&quot;w-4 h-4 transition-transform group-hover:translate-x-1&quot; /&gt;
                            &lt;/button&gt;
                          &lt;/div&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;

            {/* Interactive Demo Area */}
            &lt;div className=&quot;bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden&quot;&gt;
              {/* Demo Header */}
              &lt;div className=&quot;bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                  &lt;div className=&quot;flex gap-2&quot;&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-red-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-yellow-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-green-400&quot; /&gt;
                  &lt;/div&gt;
                  &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;
                    {currentFeature.title} Demo
                  &lt;/span&gt;
                  &lt;div className=&quot;ml-auto flex items-center gap-2 text-xs text-gray-500&quot;&gt;
                    &lt;div className=&quot;w-2 h-2 rounded-full bg-green-500 animate-pulse&quot; /&gt;
                    Live Demo
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Demo Content */}
              &lt;div className=&quot;relative h-96 bg-gradient-to-br from-slate-50 to-blue-50 p-6&quot;&gt;
                {/* Render demo elements based on feature type */}
                {currentFeature.id === 0 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* Workflow nodes */}
                    {currentFeature.demoElements?.map((element, i) =&gt; {
                      if (element.type === 'node') {
                        return (
                          &lt;div
                            key={i}
                            className={`absolute w-24 h-16 ${element.color} rounded-lg flex items-center justify-center text-white text-xs font-medium shadow-lg transform transition-all duration-1000 hover:scale-110`}
                            style={{
                              left: `${element.x}px`,
                              top: `${element.y}px`,
                              animationDelay: `${i * 200}ms`,
                            }}
                          &gt;
                            {element.label}
                          &lt;/div&gt;
                        );
                      }
                      return null;
                    })}

                    {/* Connections */}
                    &lt;svg className=&quot;absolute inset-0 w-full h-full pointer-events-none&quot;&gt;
                      &lt;defs&gt;
                        &lt;marker
                          id=&quot;arrowhead&quot;
                          markerWidth=&quot;10&quot;
                          markerHeight=&quot;7&quot;
                          refX=&quot;9&quot;
                          refY=&quot;3.5&quot;
                          orient=&quot;auto&quot;
                        &gt;
                          &lt;polygon points=&quot;0 0, 10 3.5, 0 7&quot; fill=&quot;#6366f1&quot; /&gt;
                        &lt;/marker&gt;
                      &lt;/defs&gt;
                      &lt;path
                        d=&quot;M 150 167 Q 200 167 250 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                      /&gt;
                      &lt;path
                        d=&quot;M 350 167 Q 400 167 450 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                        style={{ animationDelay: '500ms' }}
                      /&gt;
                    &lt;/svg&gt;
                  &lt;/div&gt;
                )}

                {/* AI Feature Demo */}
                {currentFeature.id === 1 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    &lt;div className=&quot;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2&quot;&gt;
                      &lt;div className=&quot;w-32 h-32 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center shadow-xl animate-pulse&quot;&gt;
                        &lt;Brain className=&quot;w-16 h-16 text-white&quot; /&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    {/* AI Insights */}
                    &lt;div className=&quot;absolute top-12 right-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-2 text-sm&quot;&gt;
                        &lt;Zap className=&quot;w-4 h-4 text-yellow-500&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;Performance optimized&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div
                      className=&quot;absolute bottom-12 left-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;
                      style={{ animationDelay: '1s' }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/ExecutionHistory.tsx (Line 149:6 - Line 384:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/executionhistory/ExecutionHistory.tsx (Line 152:6 - Line 387:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup144"><code class="language-javascript text-sm text-gray-800">={getStatusColor(status)}&gt;{status.toUpperCase()}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Progress',
      key: 'progress',
      width: 120,
      render: (record: WorkflowExecution) =&gt; (
        &lt;div className=&quot;text-xs&quot;&gt;
          {record.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length ||
            0}{' '}
          / {record.nodeExecutions?.length || 0} nodes
        &lt;/div&gt;
      ),
    },
    {
      title: 'Started',
      dataIndex: 'startedAt',
      key: 'startedAt',
      width: 150,
      render: (date: string) =&gt; new Date(date).toLocaleString(),
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (record: WorkflowExecution) =&gt; formatDuration(record.duration),
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 150,
      render: (record: WorkflowExecution) =&gt; (
        &lt;Space&gt;
          &lt;Button size=&quot;small&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; showExecutionDetails(record)}&gt;
            Details
          &lt;/Button&gt;
          {record.status === 'running' &amp;&amp; (
            &lt;Button
              size=&quot;small&quot;
              danger
              icon={&lt;StopOutlined /&gt;}
              onClick={() =&gt; handleStopExecution(record.id)}
            &gt;
              Stop
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const content = (
    &lt;div className=&quot;execution-history&quot;&gt;
      &lt;div className=&quot;mb-4&quot;&gt;
        &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
          &lt;Col span={6}&gt;
            &lt;Search
              placeholder=&quot;Search executions...&quot;
              onSearch={(value) =&gt; setFilter({ ...filter, workflowId: value || workflowId })}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={6}&gt;
            &lt;Select
              placeholder=&quot;Filter by status&quot;
              allowClear
              style={{ width: '100%' }}
              onChange={(value) =&gt; setFilter({ ...filter, status: value })}
            &gt;
              &lt;Option value=&quot;pending&quot;&gt;Pending&lt;/Option&gt;
              &lt;Option value=&quot;running&quot;&gt;Running&lt;/Option&gt;
              &lt;Option value=&quot;completed&quot;&gt;Completed&lt;/Option&gt;
              &lt;Option value=&quot;failed&quot;&gt;Failed&lt;/Option&gt;
              &lt;Option value=&quot;cancelled&quot;&gt;Cancelled&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Col&gt;
          &lt;Col span={8}&gt;
            &lt;RangePicker
              placeholder={['Start date', 'End date']}
              onChange={(dates) =&gt; {
                if (dates) {
                  setFilter({
                    ...filter,
                    startDate: dates[0]?.toISOString(),
                    endDate: dates[1]?.toISOString(),
                  });
                } else {
                  setFilter({
                    ...filter,
                    startDate: undefined,
                    endDate: undefined,
                  });
                }
              }}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={4}&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadExecutions} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Col&gt;
        &lt;/Row&gt;
      &lt;/div&gt;

      &lt;Table
        columns={columns}
        dataSource={executions}
        rowKey=&quot;id&quot;
        loading={loading}
        pagination={{
          current: Math.floor((filter.offset || 0) / (filter.limit || 20)) + 1,
          pageSize: filter.limit || 20,
          total,
          onChange: (page, pageSize) =&gt; {
            setFilter({
              ...filter,
              offset: (page - 1) * (pageSize || 20),
              limit: pageSize,
            });
          },
        }}
      /&gt;

      &lt;Modal
        title=&quot;Execution Details&quot;
        open={detailsVisible}
        onCancel={() =&gt; setDetailsVisible(false)}
        width={800}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={() =&gt; setDetailsVisible(false)}&gt;
            Close
          &lt;/Button&gt;,
        ]}
      &gt;
        {selectedExecution &amp;&amp; (
          &lt;div&gt;
            &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Status&quot;
                  value={selectedExecution.status.toUpperCase()}
                  valueStyle={{
                    color: getStatusColor(selectedExecution.status),
                  }}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic title=&quot;Duration&quot; value={formatDuration(selectedExecution.duration)} /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Nodes Completed&quot;
                  value={`${selectedExecution.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length || 0} / ${selectedExecution.nodeExecutions?.length || 0}`}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Success Rate&quot;
                  value={(() =&gt; {
                    const results = getExecutionResults(selectedExecution);
                    const successCount = results.filter((r) =&gt; r.status === 'success').length;
                    const total = results.length;
                    return total &gt; 0 ? Math.round((successCount / total) * 100) : 0;
                  })()}
                  suffix=&quot;%&quot;
                /&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;

            &lt;Card title=&quot;Node Execution Results&quot; className=&quot;mb-4&quot;&gt;
              &lt;Timeline&gt;
                {getExecutionResults(selectedExecution).map((result) =&gt; (
                  &lt;Timeline.Item
                    key={result.nodeId}
                    color={
                      result.status === 'success'
                        ? 'green'
                        : result.status === 'error'
                          ? 'red'
                          : 'gray'
                    }
                  &gt;
                    &lt;div&gt;
                      &lt;strong&gt;{result.nodeName}&lt;/strong&gt;
                      &lt;Tag color={result.status === 'success' ? 'green' : 'red'} className=&quot;ml-2&quot;&gt;
                        {result.status}
                      &lt;/Tag&gt;
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                        {new Date(result.executedAt).toLocaleString()} •{' '}
                        {formatDuration(result.duration)}
                      &lt;/div&gt;
                      {result.error &amp;&amp; (
                        &lt;div className=&quot;text-red-500 text-sm mt-1&quot;&gt;{result.error}&lt;/div&gt;
                      )}
                      {result.output &amp;&amp; (
                        &lt;details className=&quot;mt-1&quot;&gt;
                          &lt;summary className=&quot;text-blue-500 cursor-pointer text-sm&quot;&gt;
                            View Output
                          &lt;/summary&gt;
                          &lt;pre className=&quot;bg-gray-100 p-2 rounded mt-1 text-xs overflow-auto max-h-32&quot;&gt;
                            {JSON.stringify(result.output, null, 2)}
                          &lt;/pre&gt;
                        &lt;/details&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/Timeline.Item&gt;
                ))}
              &lt;/Timeline&gt;
            &lt;/Card&gt;

            {selectedExecution.error &amp;&amp; (
              &lt;Card title=&quot;Execution Error&quot; className=&quot;border-red-200&quot;&gt;
                &lt;div className=&quot;text-red-600&quot;&gt;
                  &lt;div className=&quot;font-semibold&quot;&gt;{selectedExecution.error}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            )}
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/div&gt;
  );

  // If onClose is provided, wrap in a modal
  if (onClose) {
    return (
      &lt;Modal
        title=&quot;Execution History&quot;
        open={true}
        onCancel={onClose}
        width={1200}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;,
        ]}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/EnterpriseDashboard.tsx (Line 349:7 - Line 918:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/enterprisedashboard/EnterpriseDashboard.tsx (Line 352:7 - Line 921:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn146" onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn146" onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup146"><code class="language-javascript text-sm text-gray-800">={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Total Organizations&quot;
                  value={metrics?.organizations.total}
                  prefix={&lt;TeamOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.organizations.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Users&quot;
                  value={metrics?.users.active}
                  prefix={&lt;UserOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.users.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Workflow Executions&quot;
                  value={metrics?.workflows.executions}
                  prefix={&lt;ThunderboltOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px' }}&gt;
                      {metrics?.workflows.successRate}% success
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;System Uptime&quot;
                  value={metrics?.performance.systemUptime}
                  precision={2}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{ color: '#52c41a' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {/* Charts */}
          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;Execution Trends&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Line
                  data={executionTrendData}
                  xField=&quot;date&quot;
                  yField=&quot;executions&quot;
                  height={300}
                  smooth
                  point={{ size: 5, shape: 'circle' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;User Growth&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Column
                  data={userGrowthData}
                  xField=&quot;month&quot;
                  yField=&quot;total&quot;
                  height={300}
                  columnStyle={{ fill: '#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'performance',
      label: (
        &lt;span&gt;
          &lt;RiseOutlined /&gt;
          Performance
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Avg Execution Time&quot;
                  value={metrics?.performance.avgExecutionTime}
                  precision={1}
                  suffix=&quot;s&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Error Rate&quot;
                  value={metrics?.performance.errorRate ?? 0}
                  precision={1}
                  suffix=&quot;%&quot;
                  prefix={&lt;BugOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.performance.errorRate ?? 0) &gt; 2 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Throughput&quot;
                  value={metrics?.performance.throughput}
                  suffix=&quot;/hour&quot;
                  prefix={&lt;ApiOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Monthly Spend&quot;
                  value={metrics?.costs.monthlySpend}
                  prefix=&quot;$&quot;
                  suffix={
                    &lt;span
                      style={{
                        fontSize: '14px',
                        color: (metrics?.costs.growth ?? 0) &lt; 0 ? '#52c41a' : '#cf1322',
                      }}
                    &gt;
                      {(metrics?.costs.growth ?? 0) &lt; 0 ? &lt;FallOutlined /&gt; : &lt;RiseOutlined /&gt;}{' '}
                      {Math.abs(metrics?.costs.growth ?? 0)}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={16}&gt;
              &lt;Card
                title=&quot;System Performance (24h)&quot;
                extra={
                  &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                    Refresh
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Area
                  data={performanceData}
                  xField=&quot;time&quot;
                  yField=&quot;cpu&quot;
                  height={300}
                  // @ts-expect-error Area config shape may differ by version
                  areaStyle={{ fill: 'l(270) 0:#ffffff 0.5:#7ec2f3 1:#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Card title=&quot;Workflow Categories&quot;&gt;
                &lt;Pie
                  data={workflowCategoriesData}
                  angleField=&quot;value&quot;
                  colorField=&quot;type&quot;
                  height={300}
                  radius={0.8}
                  label={{
                    type: 'spider',
                    content: '{name}\n{percentage}',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
          {metrics?.security &amp;&amp; metrics.security.alerts &gt; 0 &amp;&amp; (
            &lt;Badge count={metrics.security.alerts} style={{ marginLeft: 8 }} /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Threats&quot;
                  value={metrics?.security.threats ?? 0}
                  prefix={&lt;WarningOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.threats ?? 0) &gt; 0 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Security Alerts&quot;
                  value={metrics?.security.alerts ?? 0}
                  prefix={&lt;SecurityScanOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.alerts ?? 0) &gt; 5 ? '#fa8c16' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Compliance Score&quot;
                  value={metrics?.security.complianceScore ?? 0}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security?.complianceScore ?? 0) &gt;= 90 ? '#52c41a' : '#fa8c16',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Last Incident&quot;
                  value={
                    metrics?.security.lastIncident
                      ? Math.floor(
                          (Date.now() - metrics.security.lastIncident.getTime()) /
                            (24 * 60 * 60 * 1000)
                        )
                      : 0
                  }
                  suffix=&quot; days ago&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {(metrics?.security.alerts ?? 0) &gt; 0 &amp;&amp; (
            &lt;Alert
              message=&quot;Security Alerts Require Attention&quot;
              description={`There are ${metrics?.security.alerts ?? 0} active security alerts that need investigation.`}
              type=&quot;warning&quot;
              showIcon
              style={{ marginBottom: 24 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;primary&quot;&gt;
                  View All Alerts
                &lt;/Button&gt;
              }
            /&gt;
          )}

          &lt;Card title=&quot;Security Overview&quot;&gt;
            &lt;Row gutter={16}&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Threat Detection&lt;/Text&gt;
                  &lt;Progress percent={85} status=&quot;active&quot; strokeColor=&quot;#52c41a&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Access Control&lt;/Text&gt;
                  &lt;Progress percent={92} status=&quot;active&quot; strokeColor=&quot;#1890ff&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Data Encryption&lt;/Text&gt;
                  &lt;Progress percent={98} status=&quot;active&quot; strokeColor=&quot;#722ed1&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Audit Coverage&lt;/Text&gt;
                  &lt;Progress percent={94} status=&quot;active&quot; strokeColor=&quot;#fa8c16&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Vulnerability Management&lt;/Text&gt;
                  &lt;Progress percent={88} status=&quot;active&quot; strokeColor=&quot;#13c2c2&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Incident Response&lt;/Text&gt;
                  &lt;Progress percent={90} status=&quot;active&quot; strokeColor=&quot;#eb2f96&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'organizations',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Organizations
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Top Organizations&quot;
            extra={
              &lt;Space&gt;
                &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                  Export
                &lt;/Button&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Table
              dataSource={topOrganizationsData}
              pagination={false}
              columns={[
                {
                  title: 'Organization',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; style={{ backgroundColor: '#1890ff', marginRight: 8 }}&gt;
                        {name.charAt(0)}
                      &lt;/Avatar&gt;
                      &lt;Text strong&gt;{name}&lt;/Text&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Users',
                  dataIndex: 'users',
                  key: 'users',
                  render: (users: number) =&gt; &lt;Statistic value={users} /&gt;,
                },
                {
                  title: 'Workflows',
                  dataIndex: 'workflows',
                  key: 'workflows',
                  render: (workflows: number) =&gt; &lt;Statistic value={workflows} /&gt;,
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Growth',
                  dataIndex: 'growth',
                  key: 'growth',
                  render: (growth: number) =&gt; (
                    &lt;span style={{ color: growth &gt;= 0 ? '#52c41a' : '#cf1322' }}&gt;
                      {growth &gt;= 0 ? &lt;RiseOutlined /&gt; : &lt;FallOutlined /&gt;} {Math.abs(growth)}%
                    &lt;/span&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;

          &lt;Card title=&quot;Top Users&quot; style={{ marginTop: 16 }}&gt;
            &lt;Table
              dataSource={topUsersData}
              pagination={false}
              columns={[
                {
                  title: 'User',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string, record: any) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; icon={&lt;UserOutlined /&gt;} style={{ marginRight: 8 }} /&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;{name}&lt;/Text&gt;
                        &lt;br /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;{record.organization}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Success Rate',
                  dataIndex: 'successRate',
                  key: 'successRate',
                  render: (rate: number) =&gt; (
                    &lt;Progress
                      percent={rate}
                      size=&quot;small&quot;
                      status={rate &gt;= 95 ? 'success' : rate &gt;= 90 ? 'normal' : 'exception'}
                    /&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'activity',
      label: (
        &lt;span&gt;
          &lt;ClockCircleOutlined /&gt;
          Activity
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Recent Activity&quot;
            extra={
              &lt;Space&gt;
                &lt;Select defaultValue=&quot;all&quot; style={{ width: 120 }}&gt;
                  &lt;Option value=&quot;all&quot;&gt;All Events&lt;/Option&gt;
                  &lt;Option value=&quot;security&quot;&gt;Security&lt;/Option&gt;
                  &lt;Option value=&quot;workflow&quot;&gt;Workflows&lt;/Option&gt;
                  &lt;Option value=&quot;user&quot;&gt;Users&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Timeline&gt;
              {activities.map((activity) =&gt; (
                &lt;Timeline.Item
                  key={activity.id}
                  dot={
                    &lt;Avatar
                      size=&quot;small&quot;
                      style={{
                        backgroundColor: getSeverityColor(activity.severity),
                      }}
                      icon={getActivityIcon(activity.type)}
                    /&gt;
                  }
                &gt;
                  &lt;div&gt;
                    &lt;div
                      style={{
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                      }}
                    &gt;
                      &lt;Text strong&gt;{activity.title}&lt;/Text&gt;
                      &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                        {activity.timestamp.toLocaleTimeString()}
                      &lt;/Text&gt;
                    &lt;/div&gt;
                    &lt;div style={{ marginTop: 4 }}&gt;
                      &lt;Text&gt;{activity.description}&lt;/Text&gt;
                    &lt;/div&gt;
                    {(activity.user || activity.organization) &amp;&amp; (
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {activity.user &amp;&amp; (
                          &lt;Tag icon={&lt;UserOutlined /&gt;} color=&quot;blue&quot;&gt;
                            {activity.user}
                          &lt;/Tag&gt;
                        )}
                        {activity.organization &amp;&amp; (
                          &lt;Tag icon={&lt;TeamOutlined /&gt;} color=&quot;green&quot;&gt;
                            {activity.organization}
                          &lt;/Tag&gt;
                        )}
                        &lt;Tag color={getSeverityColor(activity.severity)}&gt;{activity.severity}&lt;/Tag&gt;
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/Timeline.Item&gt;
              ))}
            &lt;/Timeline&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  if (!metrics) {
    return &lt;div&gt;Loading...&lt;/div&gt;;
  }

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
          }}
        &gt;
          &lt;div&gt;
            &lt;Title level={2}&gt;
              &lt;DashboardOutlined /&gt; Enterprise Dashboard
            &lt;/Title&gt;
            &lt;Text type=&quot;secondary&quot;&gt;
              Comprehensive overview of your organization's automation platform
            &lt;/Text&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;RangePicker value={dateRange} onChange={setDateRange} style={{ width: 300 }} /&gt;
            {canManageOrganization() &amp;&amp; (
              &lt;Select
                value={selectedOrganization}
                onChange={setSelectedOrganization}
                style={{ width: 200 }}
              &gt;
                &lt;Option value=&quot;all&quot;&gt;All Organizations&lt;/Option&gt;
                {organizations.map((org) =&gt; (
                  &lt;Option key={org.id} value={org.id}&gt;
                    {org.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            )}
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadDashboardData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;Tabs items={tabs}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/AuditDashboard.tsx (Line 317:6 - Line 692:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/auditdashboard/AuditDashboard.tsx (Line 319:6 - Line 694:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn149" onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn149" onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup149"><code class="language-javascript text-sm text-gray-800">={{ fontSize: '12px' }}&gt;
            {record.ipAddress}
          &lt;/Text&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Action',
      dataIndex: 'action',
      key: 'action',
      width: 120,
      render: (action: string) =&gt; &lt;Tag color=&quot;blue&quot;&gt;{action}&lt;/Tag&gt;,
    },
    {
      title: 'Resource',
      dataIndex: 'resource',
      key: 'resource',
      width: 120,
      render: (resource: string, record: AuditEvent) =&gt; (
        &lt;div&gt;
          &lt;Tag color=&quot;purple&quot;&gt;{resource}&lt;/Tag&gt;
          {record.resourceId &amp;&amp; (
            &lt;div&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                ID: {record.resourceId}
              &lt;/Text&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Result',
      dataIndex: 'result',
      key: 'result',
      width: 100,
      render: (result: string) =&gt; &lt;Tag color={getResultColor(result)}&gt;{result}&lt;/Tag&gt;,
    },
    {
      title: 'Severity',
      dataIndex: 'severity',
      key: 'severity',
      width: 100,
      render: (severity: string) =&gt; &lt;Tag color={getSeverityColor(severity)}&gt;{severity}&lt;/Tag&gt;,
    },
    {
      title: 'Category',
      dataIndex: 'category',
      key: 'category',
      width: 120,
      render: (category: string) =&gt; &lt;Tag&gt;{category}&lt;/Tag&gt;,
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 100,
      render: (_: unknown, record: AuditEvent) =&gt; (
        &lt;Button type=&quot;link&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; setSelectedEvent(record)}&gt;
          View
        &lt;/Button&gt;
      ),
    },
  ];

  const uniqueUsers = Array.from(new Set(events.map((e) =&gt; e.userName)));
  const uniqueActions = Array.from(new Set(events.map((e) =&gt; e.action)));
  const uniqueResources = Array.from(new Set(events.map((e) =&gt; e.resource)));

  const securityMetrics = {
    totalEvents: filteredEvents.length,
    securityEvents: filteredEvents.filter(
      (e) =&gt;
        e.category === 'authentication' ||
        e.category === 'authorization' ||
        e.severity === 'high' ||
        e.severity === 'critical'
    ).length,
    failedLogins: filteredEvents.filter((e) =&gt; e.action === 'login' &amp;&amp; e.result === 'failure')
      .length,
    criticalEvents: filteredEvents.filter((e) =&gt; e.severity === 'critical').length,
  };

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;AuditOutlined /&gt; Audit &amp; Security Dashboard
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;Monitor security events, audit trails, and compliance status&lt;/Text&gt;
      &lt;/div&gt;

      {/* Security Metrics */}
      &lt;Row gutter={16} style={{ marginBottom: 24 }}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Events&quot;
              value={securityMetrics.totalEvents}
              prefix={&lt;AuditOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Security Events&quot;
              value={securityMetrics.securityEvents}
              prefix={&lt;SecurityScanOutlined /&gt;}
              valueStyle={{ color: '#faad14' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Failed Logins&quot;
              value={securityMetrics.failedLogins}
              prefix={&lt;WarningOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Critical Events&quot;
              value={securityMetrics.criticalEvents}
              prefix={&lt;AlertOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Security Alerts */}
      {securityAlerts.length &gt; 0 &amp;&amp; (
        &lt;Card
          title={
            &lt;span&gt;
              &lt;AlertOutlined /&gt; Active Security Alerts
            &lt;/span&gt;
          }
          style={{ marginBottom: 24 }}
        &gt;
          {securityAlerts.map((alert) =&gt; (
            &lt;Alert
              key={alert.id}
              message={alert.title}
              description={alert.description}
              type={
                alert.severity === 'critical'
                  ? 'error'
                  : alert.severity === 'high'
                    ? 'warning'
                    : 'info'
              }
              showIcon
              style={{ marginBottom: 8 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Investigate
                &lt;/Button&gt;
              }
            /&gt;
          ))}
        &lt;/Card&gt;
      )}

      {/* Filters */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;FilterOutlined /&gt; Filters &amp; Search
          &lt;/span&gt;
        }
        style={{ marginBottom: 24 }}
        extra={
          &lt;Space&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadAuditData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
            &lt;Button icon={&lt;ExportOutlined /&gt;} onClick={() =&gt; setExportModalVisible(true)}&gt;
              Export
            &lt;/Button&gt;
            &lt;Button icon={&lt;CheckCircleOutlined /&gt;} onClick={generateComplianceReport}&gt;
              Generate Report
            &lt;/Button&gt;
          &lt;/Space&gt;
        }
      &gt;
        &lt;Space wrap style={{ marginBottom: 16 }}&gt;
          &lt;RangePicker
            value={dateRange}
            onChange={setDateRange}
            showTime
            format=&quot;YYYY-MM-DD HH:mm&quot;
            placeholder={['Start Date', 'End Date']}
          /&gt;

          &lt;Select
            placeholder=&quot;Select User&quot;
            value={selectedUser}
            onChange={setSelectedUser}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueUsers.map((user) =&gt; (
              &lt;Option key={user} value={user}&gt;
                {user}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Action&quot;
            value={selectedAction}
            onChange={setSelectedAction}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueActions.map((action) =&gt; (
              &lt;Option key={action} value={action}&gt;
                {action}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Resource&quot;
            value={selectedResource}
            onChange={setSelectedResource}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueResources.map((resource) =&gt; (
              &lt;Option key={resource} value={resource}&gt;
                {resource}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Severity&quot;
            value={selectedSeverity}
            onChange={setSelectedSeverity}
            allowClear
            style={{ width: 120 }}
          &gt;
            &lt;Option value=&quot;low&quot;&gt;Low&lt;/Option&gt;
            &lt;Option value=&quot;medium&quot;&gt;Medium&lt;/Option&gt;
            &lt;Option value=&quot;high&quot;&gt;High&lt;/Option&gt;
            &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Category&quot;
            value={selectedCategory}
            onChange={setSelectedCategory}
            allowClear
            style={{ width: 150 }}
          &gt;
            &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
            &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
            &lt;Option value=&quot;workflow&quot;&gt;Workflow&lt;/Option&gt;
            &lt;Option value=&quot;credential&quot;&gt;Credential&lt;/Option&gt;
            &lt;Option value=&quot;organization&quot;&gt;Organization&lt;/Option&gt;
            &lt;Option value=&quot;user_management&quot;&gt;User Management&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Button onClick={clearFilters}&gt;Clear Filters&lt;/Button&gt;
        &lt;/Space&gt;

        &lt;Search
          placeholder=&quot;Search events...&quot;
          value={searchTerm}
          onChange={(e) =&gt; setSearchTerm(e.target.value)}
          style={{ width: 300 }}
        /&gt;
      &lt;/Card&gt;

      {/* Audit Events Table */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;AuditOutlined /&gt; Audit Events ({filteredEvents.length})
          &lt;/span&gt;
        }
      &gt;
        &lt;Table
          dataSource={filteredEvents}
          columns={columns}
          rowKey=&quot;id&quot;
          loading={loading}
          pagination={{
            pageSize: 50,
            showSizeChanger: true,
            showQuickJumper: true,
            showTotal: (total, range) =&gt; `${range[0]}-${range[1]} of ${total} events`,
          }}
          scroll={{ x: 1200 }}
        /&gt;
      &lt;/Card&gt;

      {/* Event Details Modal */}
      &lt;Modal
        title=&quot;Event Details&quot;
        open={!!selectedEvent}
        onCancel={() =&gt; setSelectedEvent(null)}
        footer={null}
        width={800}
      &gt;
        {selectedEvent &amp;&amp; (
          &lt;Descriptions column={2} bordered&gt;
            &lt;Descriptions.Item label=&quot;Timestamp&quot;&gt;
              {selectedEvent.timestamp.toLocaleString()}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User&quot;&gt;
              {selectedEvent.userName} ({selectedEvent.userId})
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Action&quot;&gt;
              &lt;Tag color=&quot;blue&quot;&gt;{selectedEvent.action}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Resource&quot;&gt;
              &lt;Tag color=&quot;purple&quot;&gt;{selectedEvent.resource}&lt;/Tag&gt;
              {selectedEvent.resourceId &amp;&amp; ` (${selectedEvent.resourceId})`}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Result&quot;&gt;
              &lt;Tag color={getResultColor(selectedEvent.result)}&gt;{selectedEvent.result}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Severity&quot;&gt;
              &lt;Tag color={getSeverityColor(selectedEvent.severity)}&gt;{selectedEvent.severity}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Category&quot;&gt;
              &lt;Tag&gt;{selectedEvent.category}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;IP Address&quot;&gt;
              &lt;GlobalOutlined /&gt; {selectedEvent.ipAddress}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Organization&quot; span={2}&gt;
              {selectedEvent.organizationId || 'N/A'}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Details&quot; span={2}&gt;
              &lt;pre
                style={{
                  fontSize: '12px',
                  background: '#f5f5f5',
                  padding: '8px',
                  borderRadius: '4px',
                }}
              &gt;
                {JSON.stringify(selectedEvent.details, null, 2)}
              &lt;/pre&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User Agent&quot; span={2}&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                {selectedEvent.userAgent}
              &lt;/Text&gt;
            &lt;/Descriptions.Item&gt;
          &lt;/Descriptions&gt;
        )}
      &lt;/Modal&gt;

      {/* Export Modal */}
      &lt;Modal
        title=&quot;Export Audit Data&quot;
        open={exportModalVisible}
        onCancel={() =&gt; setExportModalVisible(false)}
        footer={null}
      &gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
          &lt;Text&gt;Select export format:&lt;/Text&gt;
          &lt;Space&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('json')} type=&quot;primary&quot;&gt;
              Export as JSON
            &lt;/Button&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('csv')}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/AIWorkflowStudio.tsx (Line 228:6 - Line 755:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/aiworkflowstudio/AIWorkflowStudio.tsx (Line 230:6 - Line 757:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn152" onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn152" onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup152"><code class="language-javascript text-sm text-gray-800">={color}&gt;{status}&lt;/Tag&gt;;
      },
    },
    {
      title: 'Quality',
      dataIndex: 'qualityScore',
      key: 'qualityScore',
      width: 100,
      render: (score: number) =&gt; (
        &lt;Progress
          percent={Math.round(score * 100)}
          size=&quot;small&quot;
          status={score &gt;= 0.8 ? 'success' : score &gt;= 0.6 ? 'normal' : 'exception'}
        /&gt;
      ),
    },
    {
      title: 'Cost',
      dataIndex: 'totalCost',
      key: 'totalCost',
      width: 80,
      render: (cost: number) =&gt; &lt;Text&gt;${cost.toFixed(4)}&lt;/Text&gt;,
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (_: unknown, record: AIWorkflowExecution) =&gt; {
        if (!record.endTime) return '-';
        const duration = record.endTime.getTime() - record.startTime.getTime();
        return &lt;Text&gt;{(duration / 1000).toFixed(1)}s&lt;/Text&gt;;
      },
    },
  ];

  const tabs = [
    {
      key: 'builder',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          AI Builder
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Row gutter={[24, 24]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card title=&quot;AI Model Configuration&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Select AI Model&lt;/Text&gt;
                    &lt;Select
                      value={selectedModel}
                      onChange={setSelectedModel}
                      style={{ width: '100%', marginTop: 8 }}
                      placeholder=&quot;Choose an AI model&quot;
                    &gt;
                      {availableModels.map((model) =&gt; (
                        &lt;Option key={model.id} value={model.id}&gt;
                          &lt;div
                            style={{
                              display: 'flex',
                              alignItems: 'center',
                              justifyContent: 'space-between',
                            }}
                          &gt;
                            &lt;span&gt;
                              {getModelIcon(model)} {model.name}
                            &lt;/span&gt;
                            &lt;div&gt;
                              &lt;Tag&gt;{model.provider}&lt;/Tag&gt;
                              &lt;Tag color=&quot;blue&quot;&gt;${model.costPer1kTokens}/1k&lt;/Tag&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/Option&gt;
                      ))}
                    &lt;/Select&gt;
                  &lt;/div&gt;

                  {selectedModel &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      return (
                        &lt;div&gt;
                          &lt;Divider style={{ margin: '16px 0' }} /&gt;
                          &lt;div style={{ marginBottom: 16 }}&gt;
                            &lt;Text strong&gt;Model Details&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              &lt;div&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Type:&lt;/Text&gt; &lt;Tag&gt;{model.type}&lt;/Tag&gt;
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Input:&lt;/Text&gt;
                                {model.inputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Output:&lt;/Text&gt;
                                {model.outputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Context Window:&lt;/Text&gt;{' '}
                                &lt;Text&gt;{model.contextWindow.toLocaleString()} tokens&lt;/Text&gt;
                              &lt;/div&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;

                          &lt;div&gt;
                            &lt;Text strong&gt;Capabilities&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              {model.capabilities.map((cap) =&gt; (
                                &lt;Tag key={cap.name} color=&quot;purple&quot;&gt;
                                  {cap.name} ({cap.proficiency}/5)
                                &lt;/Tag&gt;
                              ))}
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      );
                    })()}

                  &lt;Divider /&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;Main Prompt&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.prompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          prompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter your main prompt here...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;System Prompt (Optional)&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.systemPrompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          systemPrompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter system instructions...&quot;
                      rows={3}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;Row gutter={16}&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Temperature&lt;/Text&gt;
                        &lt;Slider
                          min={0}
                          max={2}
                          step={0.1}
                          value={nodeConfig.temperature}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              temperature: value,
                            }))
                          }
                          style={{ marginTop: 8 }}
                        /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;Current: {nodeConfig.temperature}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Max Tokens&lt;/Text&gt;
                        &lt;InputNumber
                          min={1}
                          max={
                            selectedModel
                              ? availableModels.find((m) =&gt; m.id === selectedModel)?.maxTokens
                              : 4096
                          }
                          value={nodeConfig.maxTokens}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              maxTokens: value || 1000,
                            }))
                          }
                          style={{ width: '100%', marginTop: 8 }}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;

            &lt;Col span={12}&gt;
              &lt;Card title=&quot;Multi-Modal Inputs&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Text Input&lt;/Text&gt;
                    &lt;TextArea
                      value={workflowInputs.text || ''}
                      onChange={(e) =&gt;
                        setWorkflowInputs((prev) =&gt; ({
                          ...prev,
                          text: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter text input for the AI model...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;File Uploads&lt;/Text&gt;
                    &lt;Dragger
                      multiple
                      beforeUpload={handleFileUpload}
                      showUploadList={false}
                      style={{ marginTop: 8 }}
                    &gt;
                      &lt;p className=&quot;ant-upload-drag-icon&quot;&gt;
                        &lt;CloudUploadOutlined /&gt;
                      &lt;/p&gt;
                      &lt;p className=&quot;ant-upload-text&quot;&gt;Click or drag files to upload&lt;/p&gt;
                      &lt;p className=&quot;ant-upload-hint&quot;&gt;
                        Support for images, audio, video, and documents
                      &lt;/p&gt;
                    &lt;/Dragger&gt;
                  &lt;/div&gt;

                  {uploadedFiles.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      &lt;Text strong&gt;Uploaded Files&lt;/Text&gt;
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {uploadedFiles.map((file, index) =&gt; (
                          &lt;Tag
                            key={index}
                            icon={getModalityIcon(file.type.split('/')[0])}
                            style={{ marginBottom: 4, marginRight: 4 }}
                          &gt;
                            {file.name}
                          &lt;/Tag&gt;
                        ))}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  &lt;Divider /&gt;

                  &lt;Button
                    type=&quot;primary&quot;
                    size=&quot;large&quot;
                    onClick={handleExecuteWorkflow}
                    loading={isExecuting}
                    disabled={!selectedModel || !nodeConfig.prompt}
                    icon={&lt;PlayCircleOutlined /&gt;}
                    style={{ width: '100%' }}
                  &gt;
                    {isExecuting ? 'Executing...' : 'Execute AI Workflow'}
                  &lt;/Button&gt;

                  {selectedModel &amp;&amp;
                    nodeConfig.prompt &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      const estimatedTokens = Math.ceil((nodeConfig.prompt?.length || 0) / 4);
                      const estimatedCost = (estimatedTokens / 1000) * model.costPer1kTokens;

                      return (
                        &lt;Alert
                          message=&quot;Execution Estimate&quot;
                          description={
                            &lt;div&gt;
                              &lt;div&gt;Estimated tokens: ~{estimatedTokens}&lt;/div&gt;
                              &lt;div&gt;Estimated cost: ${estimatedCost.toFixed(4)}&lt;/div&gt;
                            &lt;/div&gt;
                          }
                          type=&quot;info&quot;
                          showIcon
                        /&gt;
                      );
                    })()}
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'execution',
      label: (
        &lt;span&gt;
          &lt;PlayCircleOutlined /&gt;
          Execution Results
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          {currentExecution ? (
            &lt;Row gutter={[24, 24]}&gt;
              &lt;Col span={24}&gt;
                &lt;Card title={`Execution ${currentExecution.id.slice(-8)}`} size=&quot;small&quot;&gt;
                  &lt;Row gutter={16}&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Status&quot;
                        value={currentExecution.status}
                        valueStyle={{
                          color: currentExecution.status === 'completed' ? '#3f8600' : '#cf1322',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Quality Score&quot;
                        value={Math.round(currentExecution.qualityScore * 100)}
                        suffix=&quot;%&quot;
                        valueStyle={{
                          color: currentExecution.qualityScore &gt;= 0.8 ? '#3f8600' : '#fa8c16',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Total Cost&quot;
                        value={currentExecution.totalCost}
                        prefix=&quot;$&quot;
                        precision={4}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic title=&quot;Tokens Used&quot; value={currentExecution.totalTokens} /&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Node Executions&quot; size=&quot;small&quot;&gt;
                  &lt;Timeline&gt;
                    {currentExecution.nodeExecutions.map((nodeExec, index) =&gt; (
                      &lt;Timeline.Item
                        key={index}
                        color={
                          nodeExec.status === 'completed'
                            ? 'green'
                            : nodeExec.status === 'failed'
                              ? 'red'
                              : 'blue'
                        }
                      &gt;
                        &lt;div&gt;
                          &lt;Text strong&gt;Node {nodeExec.nodeId}&lt;/Text&gt;
                          &lt;div style={{ marginTop: 4 }}&gt;
                            &lt;Tag color={nodeExec.status === 'completed' ? 'green' : 'red'}&gt;
                              {nodeExec.status}
                            &lt;/Tag&gt;
                            &lt;Text type=&quot;secondary&quot;&gt;
                              {nodeExec.endTime
                                ? `${((nodeExec.endTime.getTime() - nodeExec.startTime.getTime()) / 1000).toFixed(1)}s`
                                : 'Running...'}
                            &lt;/Text&gt;
                          &lt;/div&gt;
                          {nodeExec.outputs.length &gt; 0 &amp;&amp; (
                            &lt;div
                              style={{
                                marginTop: 8,
                                padding: 8,
                                background: '#f5f5f5',
                                borderRadius: 4,
                              }}
                            &gt;
                              &lt;Text style={{ fontSize: '12px' }}&gt;
                                {typeof nodeExec.outputs[0].content === 'string'
                                  ? nodeExec.outputs[0].content.slice(0, 200) +
                                    (nodeExec.outputs[0].content.length &gt; 200 ? '...' : '')
                                  : JSON.stringify(nodeExec.outputs[0].content).slice(0, 200)}
                              &lt;/Text&gt;
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;
                      &lt;/Timeline.Item&gt;
                    ))}
                  &lt;/Timeline&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Quality Metrics&quot; size=&quot;small&quot;&gt;
                  {currentExecution.nodeExecutions.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      {Object.entries(currentExecution.nodeExecutions[0].qualityMetrics).map(
                        ([metric, value]) =&gt; (
                          &lt;div key={metric} style={{ marginBottom: 8 }}&gt;
                            &lt;div
                              style={{
                                display: 'flex',
                                justifyContent: 'space-between',
                                marginBottom: 4,
                              }}
                            &gt;
                              &lt;Text&gt;{metric.charAt(0).toUpperCase() + metric.slice(1)}&lt;/Text&gt;
                              &lt;Text&gt;{Math.round(value * 100)}%&lt;/Text&gt;
                            &lt;/div&gt;
                            &lt;Progress
                              percent={Math.round(value * 100)}
                              size=&quot;small&quot;
                              status={
                                value &gt;= 0.8 ? 'success' : value &gt;= 0.6 ? 'normal' : 'exception'
                              }
                              showInfo={false}
                            /&gt;
                          &lt;/div&gt;
                        )
                      )}
                    &lt;/div&gt;
                  )}
                &lt;/Card&gt;

                {currentExecution.insights.length &gt; 0 &amp;&amp; (
                  &lt;Card title=&quot;AI Insights&quot; size=&quot;small&quot; style={{ marginTop: 16 }}&gt;
                    &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                      {currentExecution.insights.map((insight, index) =&gt; (
                        &lt;Alert
                          key={index}
                          message={insight.message}
                          description={insight.recommendation}
                          type={insight.impact === 'high' ? 'warning' : 'info'}
                          showIcon
                          style={{ fontSize: '12px' }}
                        /&gt;
                      ))}
                    &lt;/Space&gt;
                  &lt;/Card&gt;
                )}
              &lt;/Col&gt;
            &lt;/Row&gt;
          ) : (
            &lt;div style={{ textAlign: 'center', padding: '48px' }}&gt;
              &lt;ExperimentOutlined style={{ fontSize: '48px', color: '#d9d9d9' }} /&gt;
              &lt;Title level={4} type=&quot;secondary&quot;&gt;
                No execution results yet
              &lt;/Title&gt;
              &lt;Paragraph type=&quot;secondary&quot;&gt;
                Execute a workflow from the AI Builder tab to see results here
              &lt;/Paragraph&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'history',
      label: (
        &lt;span&gt;
          &lt;BarChartOutlined /&gt;
          Execution History
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Card title=&quot;Execution History&quot; size=&quot;small&quot;&gt;
            &lt;Table
              dataSource={executionHistory}
              columns={executionColumns}
              rowKey=&quot;id&quot;
              pagination={{ pageSize: 10 }}
              onRow={(record) =&gt; ({
                onClick: () =&gt; setCurrentExecution(record),
              })}
              style={{ cursor: 'pointer' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;Modal
      title={
        &lt;div style={{ display: 'flex', alignItems: 'center' }}&gt;
          &lt;ExperimentOutlined style={{ marginRight: 8 }} /&gt;
          AI Workflow Studio
          &lt;Badge count=&quot;Beta&quot; style={{ marginLeft: 8 }} /&gt;
        &lt;/div&gt;
      }
      open={visible}
      onCancel={onClose}
      footer={null}
      width=&quot;90%&quot;
      style={{ top: 20 }}
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabs}
        style={{ minHeight: '70vh' }}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 66:92 - Line 91:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 63:89 - Line 88:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn222" onclick="toggleCodeBlock('cloneGroup222', 'expandBtn222', 'collapseBtn222')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn222" onclick="toggleCodeBlock('cloneGroup222', 'expandBtn222', 'collapseBtn222')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup222"><code class="language-javascript text-sm text-gray-800"> : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* True Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#22c55e'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 136:7 - Line 176:21), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 91:2 - Line 137:37)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn223" onclick="toggleCodeBlock('cloneGroup223', 'expandBtn223', 'collapseBtn223')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn223" onclick="toggleCodeBlock('cloneGroup223', 'expandBtn223', 'collapseBtn223')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup223"><code class="language-javascript text-sm text-gray-800">,
              }}
            &gt;
              F
            &lt;/div&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 161:2 - Line 217:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 139:2 - Line 163:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn224" onclick="toggleCodeBlock('cloneGroup224', 'expandBtn224', 'collapseBtn224')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn224" onclick="toggleCodeBlock('cloneGroup224', 'expandBtn224', 'collapseBtn224')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup224"><code class="language-javascript text-sm text-gray-800">}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badges */}
            {nodeData.disabled &amp;&amp; &lt;StatusBadge type=&quot;disabled&quot; position=&quot;top-right&quot; /&gt;}
            {mode === 'rules' &amp;&amp; rules.length &gt; 0 &amp;&amp; (
              &lt;StatusBadge type=&quot;count&quot; content={rules</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 115:6 - Line 138:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/bodies/DatabaseNodeBody.tsx (Line 74:2 - Line 95:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn227" onclick="toggleCodeBlock('cloneGroup227', 'expandBtn227', 'collapseBtn227')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn227" onclick="toggleCodeBlock('cloneGroup227', 'expandBtn227', 'collapseBtn227')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup227"><code class="language-javascript text-sm text-gray-800">,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* AI Agent Icon */}
            &lt;NodeIcon icon={icon} displayName={displayName} size=&quot;md&quot; /&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={(</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 133:12 - Line 199:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 92:2 - Line 177:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn228" onclick="toggleCodeBlock('cloneGroup228', 'expandBtn228', 'collapseBtn228')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn228" onclick="toggleCodeBlock('cloneGroup228', 'expandBtn228', 'collapseBtn228')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup228"><code class="language-javascript text-sm text-gray-800">} size=&quot;md&quot; /&gt;

            {/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="tsx-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">tsx</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 374:54 - Line 406:66), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 326:47 - Line 358:119)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup1"><code class="language-tsx text-sm text-gray-800">}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}

      {/* Connection lines and plus icons for outputs (AI Agent only) */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 421:23 - Line 452:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/BaseNode/NodeHandles.tsx (Line 326:47 - Line 358:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup2"><code class="language-tsx text-sm text-gray-800">}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id={`plus-${output.id}`}
              className=&quot;!w-6 !h-6 !bg-gray-700 !border !border-gray-400 !rounded-sm hover:!bg-gray-50 !cursor-pointer !transition-colors !flex !items-center !justify-center !absolute&quot;
              style={{
                top: output.position.top || '50%',
                right: '-58px',
                transform: 'translateY(-50%)',
                zIndex: 1000,
              }}
            &gt;
              &lt;svg
                width=&quot;12&quot;
                height=&quot;12&quot;
                viewBox=&quot;0 0 12 12&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-gray-500 pointer-events-none&quot;
              &gt;
                &lt;path
                  d=&quot;M6 1V11M1 6H11&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1.5&quot;
                  strokeLinecap=&quot;round&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/Handle&gt;
          &lt;/React.Fragment&gt;
        ))}
    &lt;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 435:7 - Line 440:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 412:2 - Line 417:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup3"><code class="language-tsx text-sm text-gray-800">&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
              &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 136:2 - Line 152:11), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 117:7 - Line 133:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup4"><code class="language-tsx text-sm text-gray-800">
            value={value || []}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailinputpanel/EmailInputPanel.tsx (Line 89:3 - Line 99:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 258:3 - Line 268:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup5"><code class="language-tsx text-sm text-gray-800">};

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 52:5 - Line 61:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 40:6 - Line 49:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup7"><code class="language-tsx text-sm text-gray-800">(([key, values]) =&gt; {
      const currentValue = formState[key];
      return (
        Array.isArray(values) &amp;&amp;
        currentValue !== undefined &amp;&amp;
        currentValue !== null &amp;&amp;
        values.includes(currentValue as string | number | boolean)
      );
    });
    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 463:19 - Line 474:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 442:17 - Line 453:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup8"><code class="language-tsx text-sm text-gray-800">(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ef4444'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 484:21 - Line 499:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 404:21 - Line 419:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup9"><code class="language-tsx text-sm text-gray-800">&lt;div className=&quot;bg-blue-900/20 border border-blue-600/30 rounded p-4&quot;&gt;
                      &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
                        &lt;svg
                          className=&quot;w-5 h-5 text-blue-400 mt-0.5&quot;
                          fill=&quot;currentColor&quot;
                          viewBox=&quot;0 0 20 20&quot;
                        &gt;
                          &lt;path
                            fillRule=&quot;evenodd&quot;
                            d=&quot;M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z&quot;
                            clipRule=&quot;evenodd&quot;
                          /&gt;
                        &lt;/svg&gt;
                        &lt;div&gt;
                          &lt;p className=&quot;text-sm text-blue-300&quot;&gt;
                            &lt;strong&gt;{</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 507:21 - Line 517:23), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 454:21 - Line 463:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup10"><code class="language-tsx text-sm text-gray-800">&lt;div&gt;
                      &lt;label className=&quot;block text-sm font-medium text-gray-300 mb-2&quot;&gt;
                        Credential Name &lt;span className=&quot;text-red-400&quot;&gt;*&lt;/span&gt;
                      &lt;/label&gt;
                      &lt;input
                        type=&quot;text&quot;
                        value={credentialName}
                        onChange={(e) =&gt; setCredentialName(e.target.value)}
                        className=&quot;w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500&quot;
                        placeholder={`e.g., ${credentialTypeDef.name} Account`}
                      </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 711:22 - Line 727:11), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 403:41 - Line 419:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup11"><code class="language-tsx text-sm text-gray-800">}
                    &lt;div className=&quot;bg-blue-900/20 border border-blue-600/30 rounded p-4&quot;&gt;
                      &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
                        &lt;svg
                          className=&quot;w-5 h-5 text-blue-400 mt-0.5&quot;
                          fill=&quot;currentColor&quot;
                          viewBox=&quot;0 0 20 20&quot;
                        &gt;
                          &lt;path
                            fillRule=&quot;evenodd&quot;
                            d=&quot;M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z&quot;
                            clipRule=&quot;evenodd&quot;
                          /&gt;
                        &lt;/svg&gt;
                        &lt;div&gt;
                          &lt;p className=&quot;text-sm text-blue-300&quot;&gt;
                            Enterprise</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/containernodepanel/ContainerNodePanel.tsx (Line 361:4 - Line 370:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/containernode/ContainerNode.tsx (Line 399:19 - Line 409:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup12"><code class="language-tsx text-sm text-gray-800">&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}
        &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 451:21 - Line 460:27), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 392:23 - Line 401:28)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup14"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 91:3 - Line 108:27), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 87:3 - Line 104:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup16"><code class="language-tsx text-sm text-gray-800">const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Handle adding a comment</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 128:3 - Line 141:30), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 139:3 - Line 152:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup17"><code class="language-tsx text-sm text-gray-800">const handleReplyToComment = useCallback(
    async (commentId: string) =&gt; {
      const content = replyContents[commentId];
      if (!content?.trim()) return;

      try {
        await replyToComment(commentId, content);
        setReplyContents({ ...replyContents, [commentId]: '' });
      } catch (_error) {}
    },
    [replyContents, replyToComment]
  );

  // Handle conflict resolution</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 326:21 - Line 338:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 169:2 - Line 181:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup18"><code class="language-tsx text-sm text-gray-800">&gt;
                      {comment.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                        {comment.author.name}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                        {new Date(comment.timestamp).toLocaleString()}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 372:2 - Line 380:41), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 210:7 - Line 218:46)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup19"><code class="language-tsx text-sm text-gray-800">&gt;
                            &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                              {reply.author.name}
                            &lt;/span&gt;
                            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                              {new Date(reply.timestamp).toLocaleString()}
                            &lt;/span&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/RegistryNode.tsx (Line 1:1 - Line 10:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 1:1 - Line 9:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup22"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { memo, useMemo, useRef, useState } from 'react';
import type { NodeProps } from 'reactflow';
import { Handle, Position } from 'reactflow';
import { getCustomBodyComponent } from '@/app/node-extensions/nodeUiRegistry';
import { nodeRegistry, type WorkflowNodeInstance } from '@/core';
import { useSmartMenuPosition } from '../../../hooks/useSmartMenuPosition';
import NodeToolbar from './BaseNode/NodeToolbar';

interface</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/RegistryNode.tsx (Line 8:25 - Line 342:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 15:19 - Line 349:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup23"><code class="language-tsx text-sm text-gray-800">;

interface RegistryNodeData extends WorkflowNodeInstance {
  onDelete?: () =&gt; void;
  onEdit?: () =&gt; void;
  onOpenProperties?: () =&gt; void;
}

interface RegistryNodeProps extends NodeProps&lt;RegistryNodeData&gt; {}

/**
 * RegistryNode - A React Flow node component that uses the Node Registry
 * This component looks up node definitions from the registry to render nodes
 */
const RegistryNode: React.FC&lt;RegistryNodeProps&gt; = ({ data, selected, id }) =&gt; {
  // Hover state for custom toolbar
  const [isHovered, setIsHovered] = useState(false);
  // Menu state for NodeMenu
  const [showMenu, setShowMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showMenu,
    triggerRef: menuTriggerRef as React.RefObject&lt;HTMLElement&gt;,
    menuRef: menuRef as React.RefObject&lt;HTMLElement&gt;,
    offset: 4,
    onClose: () =&gt; setShowMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook
  // Look up the node definition from the registry
  const nodeDefinition = useMemo(() =&gt; {
    return nodeRegistry.getNodeTypeDescription(data.type);
  }, [data.type]);

  // Get visual configuration
  const { icon, displayName, subtitle } = useMemo(() =&gt; {
    if (!nodeDefinition) {
      return {
        icon: '❓',
        displayName: data.type,
        color: '#666',
        subtitle: 'Unknown node type',
      };
    }

    // Build subtitle from parameters if template exists
    let subtitle = nodeDefinition.subtitle || '';
    if (subtitle &amp;&amp; data.parameters) {
      subtitle = subtitle.replace(/\{\{[^}]+\}\}/g, (match) =&gt; {
        const paramPath = match.replace('{{$parameter[&quot;', '').replace('&quot;]}}', '');
        return data.parameters[paramPath] || '';
      });
    }

    return {
      icon: nodeDefinition.icon || nodeDefinition.iconUrl || '📦',
      displayName: data.name || nodeDefinition.displayName,
      color: nodeDefinition.defaults?.color || '#1890ff',
      subtitle,
    };
  }, [nodeDefinition, data.name, data.parameters, data.type]);

  // Determine node status

  // Render handles based on node definition
  const renderHandles = () =&gt; {
    if (!nodeDefinition) return null;

    const handles = [];

    // Input handles
    if (nodeDefinition.inputs?.length &gt; 0) {
      handles.push(
        &lt;Handle
          key=&quot;input-main&quot;
          type=&quot;target&quot;
          position={Position.Left}
          id=&quot;input_0&quot;
          style={{
            background: '#555',
            width: 10,
            height: 10,
            // No top property - handle will be vertically centered by default
          }}
        /&gt;
      );
    }

    // Output handles
    if (nodeDefinition.outputs?.length &gt; 0) {
      nodeDefinition.outputs.forEach((_, index) =&gt; {
        // For single output, don't set top (centers by default)
        // For multiple outputs, calculate vertical distribution
        const handleStyle: React.CSSProperties = {
          background: '#555',
          width: 10,
          height: 10,
        };

        if (nodeDefinition.outputs.length &gt; 1) {
          handleStyle.top = `${((index + 1) / (nodeDefinition.outputs.length + 1)) * 100}%`;
        }
        // No top property for single output - centers by default

        handles.push(
          &lt;Handle
            key={`output-${index}`}
            type=&quot;source&quot;
            position={Position.Right}
            id={`output_${index}`}
            style={handleStyle}
          /&gt;
        );
      });
    }

    return handles;
  };

  // Simple status indicator logic - integrated into main template

  // Toolbar handlers
  const handlePlay = (_nodeId: string) =&gt; {
    // TODO: Implement play functionality
  };

  const handleStop = (_nodeId: string) =&gt; {
    // TODO: Implement stop functionality
  };

  const handleDelete = (_nodeId: string) =&gt; {
    data.onDelete?.();
  };

  const handleMenuToggle = () =&gt; {
    setShowMenu(!showMenu);
  };

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    // Handle double-click to open properties panel
    event.stopPropagation();
    data.onOpenProperties?.();
  };

  // Render shared node toolbar and menu
  const renderToolbarAndMenu = () =&gt; {
    const toolbarVisible = isHovered; // Show on hover only, not requiring selection

    return (
      &lt;&gt;
        &lt;NodeToolbar
          visible={toolbarVisible}
          onPlay={() =&gt; handlePlay(id)}
          onStop={() =&gt; handleStop(id)}
          onDelete={(e) =&gt; {
            e.stopPropagation();
            handleDelete(id);
          }}
          onMenuToggle={handleMenuToggle}
          menuTriggerRef={menuTriggerRef as React.RefObject&lt;HTMLButtonElement&gt;}
        /&gt;
        {/* Custom dark-themed menu with smart positioning */}
        {showMenu &amp;&amp; (
          &lt;div
            ref={menuRef}
            className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
            style={positionStyles}
            onClick={(e) =&gt; e.stopPropagation()}
          &gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                data.onOpenProperties?.();
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📂&lt;/span&gt; Open
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement test functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🧪&lt;/span&gt; Test
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement copy functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📄&lt;/span&gt; Copy
            &lt;/button&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                // TODO: Implement duplicate functionality
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;📋&lt;/span&gt; Duplicate
            &lt;/button&gt;
            &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
            &lt;button
              onClick={(e) =&gt; {
                e.stopPropagation();
                handleDelete(id);
                setShowMenu(false);
              }}
              className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
            &gt;
              &lt;span&gt;🗑️&lt;/span&gt; Delete
            &lt;/button&gt;
          &lt;/div&gt;
        )}
      &lt;/&gt;
    );
  };

  // Check for custom body component
  const CustomBodyComponent = useMemo(() =&gt; {
    if (!nodeDefinition?.customBodyComponent) return null;
    return getCustomBodyComponent(nodeDefinition.customBodyComponent);
  }, [nodeDefinition]);

  // If custom body component exists, use it instead of default rendering
  if (CustomBodyComponent) {
    return (
      &lt;div
        className={`registry-node ${selected ? 'selected' : ''} relative`}
        style={{
          opacity: data.disabled ? 0.5 : 1,
        }}
        onMouseEnter={() =&gt; setIsHovered(true)}
        onMouseLeave={() =&gt; setIsHovered(false)}
        onDoubleClick={handleDoubleClick}
      &gt;
        {/* Custom body components handle their own handles and toolbars internally */}
        &lt;CustomBodyComponent
          nodeId={id}
          nodeData={data}
          selected={selected}
          isHovered={isHovered}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
          onDelete={data.onDelete}
          onEdit={data.onEdit}
          onOpenProperties={data.onOpenProperties}
        /&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div
      className={`registry-node ${selected ? 'selected' : ''} relative`}
      style={{
        opacity: data.disabled ? 0.5 : 1,
      }}
      onMouseEnter={() =&gt; setIsHovered(true)}
      onMouseLeave={() =&gt; setIsHovered(false)}
      onDoubleClick={handleDoubleClick}
    &gt;
      {renderHandles()}
      {renderToolbarAndMenu()}

      {/* Gmail-style Base Template for All Nodes */}
      &lt;div className=&quot;flex flex-col&quot;&gt;
        &lt;div className=&quot;relative&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-red-400' : ''}
            `}
          &gt;
            {/* Dynamic Node Icon */}
            &lt;div className=&quot;flex items-center justify-center&quot;&gt;
              {icon.startsWith('http') || icon.startsWith('/') ? (
                &lt;img
                  src={icon}
                  alt={displayName}
                  className=&quot;w-6 h-6&quot;
                  onError={(e) =&gt; {
                    const target = e.target as HTMLImageElement;
                    target.style.display = 'none';
                    const fallback = target.nextElementSibling;
                    if (fallback) {
                      fallback.classList.remove('hidden');
                    }
                  }}
                /&gt;
              ) : (
                &lt;span className=&quot;text-2xl&quot;&gt;{icon}&lt;/span&gt;
              )}
              {/* Fallback icon for broken images */}
              &lt;span className=&quot;hidden text-xl&quot;&gt;📦&lt;/span&gt;
            &lt;/div&gt;

            {/* Status Indicators */}
            {(data.disabled || data.retryOnFail || data.continueOnFail) &amp;&amp; (
              &lt;div className=&quot;absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center&quot;&gt;
                &lt;span className=&quot;text-white text-xs&quot;&gt;
                  {data.disabled ? '!' : data.retryOnFail ? 'R' : 'C'}
                &lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Node Label - Below the node */}
        &lt;div className=&quot;mt-2 text-white text-sm font-medium text-center max-w-[150px] truncate&quot;&gt;
          {displayName}
        &lt;/div&gt;

        {/* Subtitle if exists */}
        {subtitle &amp;&amp; (
          &lt;div className=&quot;text-xs text-gray-400 text-center max-w-[150px] truncate&quot;&gt;{subtitle}&lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default memo(RegistryNode);</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/ContainerNode.tsx (Line 1:1 - Line 453:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/containernode/ContainerNode.tsx (Line 10:1 - Line 462:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup25"><code class="language-tsx text-sm text-gray-800">/**
 * Container Node Component
 *
 * Advanced container nodes that can hold other nodes and provide
 * complex execution patterns like loops, parallel processing, and conditionals.
 */

import {
  CompressOutlined,
  DeleteOutlined,
  ExpandOutlined,
  MoreOutlined,
  PauseCircleOutlined,
  PlayCircleOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Dropdown,
  Form,
  Input,
  InputNumber,
  Modal,
  Select,
  Space,
  Tooltip,
} from 'antd';
import type React from 'react';
import { useCallback, useRef, useState } from 'react';
import { Handle, type NodeProps, Position } from 'reactflow';
import type {
  ContainerDropEvent,
  ContainerExecutionState,
  ContainerNodeConfig,
  ContainerResizeEvent,
} from '@/core/types/containerNodes';
import { cn } from '@/design-system/utils';

interface ContainerNodeProps extends NodeProps {
  data: {
    config: ContainerNodeConfig;
    state: ContainerExecutionState;
    onResize?: (event: ContainerResizeEvent) =&gt; void;
    onDrop?: (event: ContainerDropEvent) =&gt; void;
    onConfigChange?: (config: ContainerNodeConfig) =&gt; void;
    onExecute?: (containerId: string) =&gt; void;
    onStop?: (containerId: string) =&gt; void;
  };
}

const ContainerNode: React.FC&lt;ContainerNodeProps&gt; = ({ data, selected }) =&gt; {
  const { config, state, onResize, onDrop, onConfigChange, onExecute, onStop } = data;
  const [isResizing, setIsResizing] = useState(false);
  const [isConfigModalOpen, setIsConfigModalOpen] = useState(false);
  const [configForm] = Form.useForm();
  const resizeRef = useRef&lt;HTMLDivElement&gt;(null);

  const handleMouseDown = useCallback(
    (e: React.MouseEvent) =&gt; {
      if (e.target !== resizeRef.current) return;

      e.preventDefault();
      setIsResizing(true);

      const startX = e.clientX;
      const startY = e.clientY;
      const startWidth = config.dimensions.width;
      const startHeight = config.dimensions.height;

      const handleMouseMove = (e: MouseEvent) =&gt; {
        const deltaX = e.clientX - startX;
        const deltaY = e.clientY - startY;

        const newWidth = Math.max(200, startWidth + deltaX);
        const newHeight = Math.max(150, startHeight + deltaY);

        onResize?.({
          containerId: config.id,
          newDimensions: { width: newWidth, height: newHeight },
          childrenPositions: [], // Would be calculated based on children
        });
      };

      const handleMouseUp = () =&gt; {
        setIsResizing(false);
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };

      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
    },
    [config, onResize]
  );

  const handleDrop = useCallback(
    (e: React.DragEvent) =&gt; {
      e.preventDefault();

      const nodeData = e.dataTransfer.getData('application/reactflow');
      if (!nodeData) return;

      const nodeInfo = JSON.parse(nodeData);
      const rect = e.currentTarget.getBoundingClientRect();
      const position = {
        x: e.clientX - rect.left,
        y: e.clientY - rect.top,
      };

      onDrop?.({
        containerId: config.id,
        nodeId: nodeInfo.id,
        position,
      });
    },
    [config.id, onDrop]
  );

  const handleExecute = useCallback(() =&gt; {
    onExecute?.(config.id);
  }, [config.id, onExecute]);

  const handleStop = useCallback(() =&gt; {
    onStop?.(config.id);
  }, [config.id, onStop]);

  const handleConfigChange = useCallback(
    (values: any) =&gt; {
      const newConfig = {
        ...config,
        executionConfig: { ...config.executionConfig, ...values },
      };
      onConfigChange?.(newConfig);
      setIsConfigModalOpen(false);
    },
    [config, onConfigChange]
  );

  const getStatusIcon = () =&gt; {
    switch (state.status) {
      case 'running':
        return &lt;PlayCircleOutlined className=&quot;text-green-500&quot; /&gt;;
      case 'completed':
        return &lt;PlayCircleOutlined className=&quot;text-blue-500&quot; /&gt;;
      case 'failed':
        return &lt;StopOutlined className=&quot;text-red-500&quot; /&gt;;
      case 'paused':
        return &lt;PauseCircleOutlined className=&quot;text-yellow-500&quot; /&gt;;
      default:
        return &lt;PlayCircleOutlined className=&quot;text-gray-500&quot; /&gt;;
    }
  };

  const getContainerIcon = () =&gt; {
    switch (config.type) {
      case 'loop':
        return '🔄';
      case 'parallel':
        return '⚡';
      case 'conditional':
        return '❓';
      case 'try-catch':
        return '🛡️';
      case 'batch':
        return '📦';
      default:
        return '📁';
    }
  };

  const menuItems = [
    {
      key: 'config',
      label: 'Configure',
      icon: &lt;SettingOutlined /&gt;,
      onClick: () =&gt; setIsConfigModalOpen(true),
    },
    {
      key: 'expand',
      label: 'Expand',
      icon: &lt;ExpandOutlined /&gt;,
      onClick: () =&gt; {
        onResize?.({
          containerId: config.id,
          newDimensions: { width: 600, height: 500 },
          childrenPositions: [],
        });
      },
    },
    {
      key: 'compress',
      label: 'Compress',
      icon: &lt;CompressOutlined /&gt;,
      onClick: () =&gt; {
        onResize?.({
          containerId: config.id,
          newDimensions: { width: 300, height: 200 },
          childrenPositions: [],
        });
      },
    },
    {
      type: 'divider' as const,
    },
    {
      key: 'delete',
      label: 'Delete Container',
      icon: &lt;DeleteOutlined /&gt;,
      danger: true,
      onClick: () =&gt; {
        // Handle container deletion
      },
    },
  ];

  return (
    &lt;&gt;
      &lt;div
        className={cn(
          'relative border-2 rounded-lg transition-all duration-200',
          selected &amp;&amp; 'ring-2 ring-blue-500 ring-opacity-50',
          isResizing &amp;&amp; 'cursor-nw-resize'
        )}
        style={{
          width: config.dimensions.width,
          height: config.dimensions.height,
          backgroundColor: config.style.backgroundColor,
          borderColor: config.style.borderColor,
          borderWidth: config.style.borderWidth,
          borderRadius: config.style.borderRadius,
          opacity: config.style.opacity,
          zIndex: config.style.zIndex,
        }}
        onDrop={handleDrop}
        onDragOver={(e) =&gt; e.preventDefault()}
      &gt;
        {/* Container Header */}
        &lt;div className=&quot;absolute top-0 left-0 right-0 p-2 bg-gray-900 bg-opacity-80 rounded-t-lg&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center gap-2&quot;&gt;
              &lt;span className=&quot;text-lg&quot;&gt;{getContainerIcon()}&lt;/span&gt;
              &lt;span className=&quot;text-sm font-semibold text-white&quot;&gt;{config.name}&lt;/span&gt;
              &lt;Badge
                count={config.children.length}
                size=&quot;small&quot;
                style={{ backgroundColor: '#1890ff' }}
              /&gt;
            &lt;/div&gt;

            &lt;Space size=&quot;small&quot;&gt;
              {state.status === 'running' ? (
                &lt;Tooltip title=&quot;Stop execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;StopOutlined /&gt;}
                    onClick={handleStop}
                    className=&quot;text-red-400 hover:text-red-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              ) : (
                &lt;Tooltip title=&quot;Start execution&quot;&gt;
                  &lt;Button
                    type=&quot;text&quot;
                    size=&quot;small&quot;
                    icon={&lt;PlayCircleOutlined /&gt;}
                    onClick={handleExecute}
                    className=&quot;text-green-400 hover:text-green-300&quot;
                  /&gt;
                &lt;/Tooltip&gt;
              )}

              &lt;Dropdown menu={{ items: menuItems }} trigger={['click']} placement=&quot;bottomRight&quot;&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;MoreOutlined /&gt;}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/Dropdown&gt;
            &lt;/Space&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Status */}
        &lt;div className=&quot;absolute top-8 left-2 right-2&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between text-xs&quot;&gt;
            &lt;div className=&quot;flex items-center gap-1&quot;&gt;
              {getStatusIcon()}
              &lt;span className=&quot;text-gray-300 capitalize&quot;&gt;{state.status}&lt;/span&gt;
            &lt;/div&gt;

            {state.currentIteration !== undefined &amp;&amp; (
              &lt;div className=&quot;text-gray-400&quot;&gt;
                {state.currentIteration}/{state.totalIterations || '∞'}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Container Content Area */}
        &lt;div className=&quot;absolute top-16 left-2 right-2 bottom-2 bg-gray-800 bg-opacity-50 rounded border border-gray-600&quot;&gt;
          &lt;div className=&quot;p-2 h-full overflow-auto&quot;&gt;
            {config.children.length === 0 ? (
              &lt;div className=&quot;flex items-center justify-center h-full text-gray-500&quot;&gt;
                &lt;div className=&quot;text-center&quot;&gt;
                  &lt;div className=&quot;text-2xl mb-2&quot;&gt;📁&lt;/div&gt;
                  &lt;div className=&quot;text-sm&quot;&gt;Drop nodes here&lt;/div&gt;
                  &lt;div className=&quot;text-xs&quot;&gt;to add them to this container&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {config.children.map((childId) =&gt; (
                  &lt;div key={childId} className=&quot;p-1 bg-gray-700 rounded text-xs text-gray-300&quot;&gt;
                    {childId}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Resize Handle */}
        &lt;div
          ref={resizeRef}
          className=&quot;absolute bottom-0 right-0 w-3 h-3 cursor-nw-resize bg-blue-500 opacity-0 hover:opacity-100 transition-opacity&quot;
          onMouseDown={handleMouseDown}
        /&gt;

        {/* Input Handle */}
        &lt;Handle
          type=&quot;target&quot;
          position={Position.Left}
          id=&quot;input&quot;
          className=&quot;w-3 h-3 bg-blue-500 border-2 border-white&quot;
        /&gt;

        {/* Output Handles */}
        &lt;Handle
          type=&quot;source&quot;
          position={Position.Right}
          id=&quot;output&quot;
          className=&quot;w-3 h-3 bg-green-500 border-2 border-white&quot;
        /&gt;
      &lt;/div&gt;

      {/* Configuration Modal */}
      &lt;Modal
        title={`Configure ${config.name}`}
        open={isConfigModalOpen}
        onCancel={() =&gt; setIsConfigModalOpen(false)}
        onOk={() =&gt; configForm.submit()}
        width={600}
      &gt;
        &lt;Form
          form={configForm}
          layout=&quot;vertical&quot;
          initialValues={config.executionConfig}
          onFinish={handleConfigChange}
        &gt;
          {config.type === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopType&quot; label=&quot;Loop Type&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;for&quot;&gt;For Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;while&quot;&gt;While Loop&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;foreach&quot;&gt;For Each&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot;&gt;
                &lt;InputNumber min={1} max={1000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot;&gt;
                &lt;InputNumber min={1} max={20} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;parallelStrategy&quot; label=&quot;Execution Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'conditional' &amp;&amp; (
            &lt;Form.Item name=&quot;conditionExpression&quot; label=&quot;Condition Expression&quot;&gt;
              &lt;Input.TextArea
                placeholder=&quot;Enter JavaScript expression, e.g., $input.value &gt; 10&quot;
                rows={3}
              /&gt;
            &lt;/Form.Item&gt;
          )}

          {config.type === 'try-catch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;retryAttempts&quot; label=&quot;Retry Attempts&quot;&gt;
                &lt;InputNumber min={0} max={10} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;retryDelay&quot; label=&quot;Retry Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;errorHandling&quot; label=&quot;Error Handling&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;stop&quot;&gt;Stop on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;continue&quot;&gt;Continue on Error&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;retry&quot;&gt;Retry on Error&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {config.type === 'batch' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;batchSize&quot; label=&quot;Batch Size&quot;&gt;
                &lt;InputNumber min={1} max={100} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;batchDelay&quot; label=&quot;Batch Delay (ms)&quot;&gt;
                &lt;InputNumber min={0} max={10000} /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item name=&quot;batchStrategy&quot; label=&quot;Batch Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;sequential&quot;&gt;Sequential&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;parallel&quot;&gt;Parallel&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};

export default ContainerNode;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/SchemaView.tsx (Line 76:1 - Line 82:31), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/TableView.tsx (Line 29:1 - Line 35:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup33"><code class="language-tsx text-sm text-gray-800">const inferType = (value: any): string =&gt; {
  if (value === null) return 'null';
  if (value === undefined) return 'undefined';
  if (Array.isArray(value)) return 'array';
  if (typeof value === 'object') return 'object';
  if (typeof value === 'string') {
    // Check if it's a date string</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/DataVisualizationPanel.tsx (Line 163:2 - Line 172:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 260:5 - Line 100:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup35"><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
            {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/DataVisualization/DataVisualizationPanel.tsx (Line 192:19 - Line 221:17), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 289:18 - Line 317:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup36"><code class="language-tsx text-sm text-gray-800">&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}
                &gt;
                  {label}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;

            {/* Action buttons */}
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button
                </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/NodeIcon.tsx (Line 35:13 - Line 44:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 308:19 - Line 317:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup41"><code class="language-tsx text-sm text-gray-800">onError={(e) =&gt; {
              const target = e.target as HTMLImageElement;
              target.style.display = 'none';
              const fallback = target.nextElementSibling;
              if (fallback) {
                fallback.classList.remove('hidden');
              }
            }}
          /&gt;
          &lt;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 56:9 - Line 63:484), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 35:5 - Line 42:119)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup42"><code class="language-tsx text-sm text-gray-800">&quot;
        &gt;
          &lt;svg className=&quot;w-4 h-4&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
            &lt;path
              strokeLinecap=&quot;round&quot;
              strokeLinejoin=&quot;round&quot;
              strokeWidth={2}
              d=&quot;M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 88:7 - Line 95:125), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/shared/HoverActions.tsx (Line 35:5 - Line 42:119)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup43"><code class="language-tsx text-sm text-gray-800">&quot;
        &gt;
          &lt;svg className=&quot;w-4 h-4&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
            &lt;path
              strokeLinecap=&quot;round&quot;
              strokeLinejoin=&quot;round&quot;
              strokeWidth={2}
              d=&quot;M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/AIAgentPropertiesPanel.tsx (Line 312:19 - Line 322:23), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/panels/AIAgentPropertiesPanel.tsx (Line 266:9 - Line 276:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup45"><code class="language-tsx text-sm text-gray-800">const shouldShow =
                    !property.displayOptions?.show ||
                    Object.entries(property.displayOptions.show).every(([key, values]) =&gt;
                      values?.includes(formValues[key])
                    );

                  if (!shouldShow) return null;

                  return (
                    &lt;PropertyField
                      </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 100:17 - Line 110:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodeTypes/registrynode/RegistryNode.tsx (Line 307:19 - Line 44:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup47"><code class="language-tsx text-sm text-gray-800">className=&quot;w-6 h-6&quot;
                onError={(e) =&gt; {
                  const target = e.target as HTMLImageElement;
                  target.style.display = 'none';
                  const fallback = target.nextElementSibling;
                  if (fallback) {
                    fallback.classList.remove('hidden');
                  }
                }}
              /&gt;
              &lt;span className=</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 181:2 - Line 206:38), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 142:7 - Line 167:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup48"><code class="language-tsx text-sm text-gray-800">
        value={currentValues}
        onChange={onChange}
        placeholder={property.placeholder || `Select ${property.displayName.toLowerCase()}`}
        disabled={disabled}
        className=&quot;w-full [&amp;_.ant-select-selector]:bg-gray-800 [&amp;_.ant-select-selector]:border-gray-600&quot;
        showSearch
        allowClear
      &gt;
        {options.map((option) =&gt; (
          &lt;Option key={String(option.value)} value={option.value} title={option.description}&gt;
            &lt;div&gt;
              &lt;div className=&quot;text-gray-200&quot;&gt;{option.name}&lt;/div&gt;
              {option.description &amp;&amp; (
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{option.description}&lt;/div&gt;
              )}
            &lt;/div&gt;
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 6. Text/TextArea Property Renderer</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 256:14 - Line 265:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 233:17 - Line 242:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup49"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 625:2 - Line 633:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 571:2 - Line 579:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup50"><code class="language-tsx text-sm text-gray-800">|| [];

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;

      &lt;div className=&quot;border border-gray-600 rounded-lg p-4 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Filter</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 661:2 - Line 680:48), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 604:2 - Line 623:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup51"><code class="language-tsx text-sm text-gray-800">
                  className=&quot;flex-1 bg-gray-800 border-gray-600&quot;
                /&gt;
                &lt;Button
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {property.description &amp;&amp; &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{property.description}&lt;/p&gt;}
    &lt;/div&gt;
  );
};

// 16-22. Additional Complex Property Renderers</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 681:19 - Line 690:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 233:17 - Line 242:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup52"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;TextArea</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 706:25 - Line 715:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 233:17 - Line 242:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup53"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 731:21 - Line 743:12), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 233:17 - Line 718:16)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup54"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;Select
        value={value}
        onChange={onChange}
        placeholder=&quot;Select node</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 756:26 - Line 765:15), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyRenderers.tsx (Line 233:17 - Line 265:28)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup55"><code class="language-tsx text-sm text-gray-800">: React.FC&lt;PropertyRendererProps&gt; = ({
  property,
  value,
  onChange,
  disabled,
}) =&gt; {
  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;label className=&quot;block text-sm font-medium text-gray-200&quot;&gt;{property.displayName}&lt;/label&gt;
      &lt;div className=&quot;flex space-x-2</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyField.tsx (Line 2:1 - Line 31:12), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/PropertyField.tsx (Line 1:1 - Line 30:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup57"><code class="language-tsx text-sm text-gray-800">/**
 * PropertyField Component
 * Dynamic form field renderer for node properties with advanced features
 */

import {
  EyeInvisibleOutlined,
  EyeOutlined,
  InfoCircleOutlined,
  MinusOutlined,
  PlusOutlined,
  UploadOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Tooltip,
  Upload,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import { useNodeTheme } from '../themes'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/PropertyField.tsx (Line 32:11 - Line 456:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/PropertyField.tsx (Line 31:37 - Line 454:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup58"><code class="language-tsx text-sm text-gray-800">;

const { Option } = Select;
const { TextArea } = Input;

interface PropertyFieldProps {
  property: INodeProperty;
  value: any;
  onChange: (value: any) =&gt; void;
  disabled?: boolean;
  theme?: NodeTheme;
  context?: Record&lt;string, any&gt;;
  errors?: string[];
}

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  disabled = false,
  theme: propTheme,

  errors = [],
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [internalValue, setInternalValue] = useState(value);
  const [showPassword, setShowPassword] = useState(false);
  const [validationError, setValidationError] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    setInternalValue(value);
  }, [value]);

  const handleChange = (newValue: any) =&gt; {
    setInternalValue(newValue);

    // Validate the new value
    const error = validateValue(newValue);
    setValidationError(error);

    // Only call onChange if validation passes
    if (!error) {
      onChange(newValue);
    }
  };

  const validateValue = (val: any): string | null =&gt; {
    if (property.required &amp;&amp; (val === undefined || val === null || val === '')) {
      return `${property.displayName} is required`;
    }

    if (property.type === 'string' || property.type === 'text') {
      if (property.typeOptions?.minValue &amp;&amp; val.length &lt; property.typeOptions.minValue) {
        return `${property.displayName} must be at least ${property.typeOptions.minValue} characters`;
      }
      if (property.typeOptions?.maxValue &amp;&amp; val.length &gt; property.typeOptions.maxValue) {
        return `${property.displayName} must be no more than ${property.typeOptions.maxValue} characters`;
      }
    }

    if (property.type === 'number') {
      if (property.min !== undefined &amp;&amp; val &lt; property.min) {
        return `${property.displayName} must be at least ${property.min}`;
      }
      if (property.max !== undefined &amp;&amp; val &gt; property.max) {
        return `${property.displayName} must be no more than ${property.max}`;
      }
    }

    return null;
  };

  const renderLabel = () =&gt; {
    return (
      &lt;div
        style={{
          display: 'flex',
          alignItems: 'center',
          gap: '4px',
          marginBottom: '4px',
          color: theme.colors.text,
          fontSize: theme.typography.fontSize.sm,
          fontWeight: theme.typography.fontWeight.medium,
        }}
      &gt;
        &lt;span&gt;
          {property.displayName}
          {property.required &amp;&amp; (
            &lt;span style={{ color: theme.colors.error, marginLeft: '2px' }}&gt;*&lt;/span&gt;
          )}
        &lt;/span&gt;

        {property.description &amp;&amp; (
          &lt;Tooltip title={property.description} placement=&quot;top&quot;&gt;
            &lt;InfoCircleOutlined
              style={{
                fontSize: '12px',
                color: theme.colors.textSecondary,
                cursor: 'help',
              }}
            /&gt;
          &lt;/Tooltip&gt;
        )}

        {property.hint &amp;&amp; (
          &lt;Badge
            count=&quot;?&quot;
            size=&quot;small&quot;
            style={{
              backgroundColor: theme.colors.info,
              fontSize: '10px',
            }}
            title={property.hint}
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderError = () =&gt; {
    const allErrors = [...errors];
    if (validationError) {
      allErrors.push(validationError);
    }

    if (allErrors.length === 0) return null;

    return (
      &lt;div
        style={{
          marginTop: '4px',
          fontSize: theme.typography.fontSize.xs,
          color: theme.colors.error,
        }}
      &gt;
        {allErrors.map((error, index) =&gt; (
          &lt;div key={index}&gt;{error}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    const commonProps = {
      disabled,
      style: { width: '100%' },
      placeholder: property.placeholder,
    };

    switch (property.type) {
      case 'string':
        if (property.typeOptions?.password) {
          return (
            &lt;Input
              {...commonProps}
              type={showPassword ? 'text' : 'password'}
              value={internalValue || property.default || ''}
              onChange={(e) =&gt; handleChange(e.target.value)}
              suffix={
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={showPassword ? &lt;EyeInvisibleOutlined /&gt; : &lt;EyeOutlined /&gt;}
                  onClick={() =&gt; setShowPassword(!showPassword)}
                /&gt;
              }
            /&gt;
          );
        }
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            rows={property.rows || property.typeOptions?.rows || 4}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            min={property.min}
            max={property.max}
            step={property.step}
            precision={property.typeOptions?.numberPrecision}
            value={internalValue || property.default || 0}
            onChange={handleChange}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch
            disabled={disabled}
            checked={internalValue !== undefined ? internalValue : property.default}
            onChange={handleChange}
          /&gt;
        );

      case 'select':
      case 'options':
        return (
          &lt;Select
            {...commonProps}
            value={internalValue || property.default}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={internalValue || property.default || []}
            onChange={handleChange}
            showSearch
            filterOption={(input, option) =&gt;
              (option?.children as unknown as string)?.toLowerCase().includes(input.toLowerCase())
            }
          &gt;
            {property.options?.map((option) =&gt; (
              &lt;Option key={String(option.value)} value={option.value}&gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker {...commonProps} showTime value={internalValue} onChange={handleChange} /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={internalValue || property.default || '#1890ff'}
            onChange={(color) =&gt; handleChange(color.toHexString())}
            disabled={disabled}
            showText
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            disabled={disabled}
            beforeUpload={() =&gt; false} // Prevent auto upload
            onChange={(info) =&gt; handleChange(info.fileList)}
            fileList={internalValue || []}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;}&gt;{property.placeholder || 'Upload File'}&lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            rows={6}
            value={
              typeof internalValue === 'object'
                ? JSON.stringify(internalValue, null, 2)
                : internalValue || property.default || '{}'
            }
            onChange={(e) =&gt; {
              try {
                const parsed = JSON.parse(e.target.value);
                handleChange(parsed);
              } catch {
                // Keep the raw value for partial JSON
                handleChange(e.target.value);
              }
            }}
            placeholder=&quot;Enter valid JSON&quot;
          /&gt;
        );

      case 'collection':
        return renderCollectionField();

      case 'fixedCollection':
        return renderFixedCollectionField();

      case 'credentialsSelect':
        return renderCredentialsSelect();

      default:
        return (
          &lt;Input
            {...commonProps}
            value={internalValue || property.default || ''}
            onChange={(e) =&gt; handleChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const items = internalValue || [];

    return (
      &lt;Card size=&quot;small&quot; style={{ backgroundColor: theme.colors.background }}&gt;
        {items.map((item: any, index: number) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: '8px',
              borderColor: theme.colors.border,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;MinusOutlined /&gt;}
                onClick={() =&gt; {
                  const newItems = items.filter((_: any, i: number) =&gt; i !== index);
                  handleChange(newItems);
                }}
              /&gt;
            }
          &gt;
            {property.values?.map((subProperty) =&gt; (
              &lt;PropertyField
                key={subProperty.name}
                property={subProperty}
                value={item[subProperty.name]}
                onChange={(subValue) =&gt; {
                  const newItems = [...items];
                  newItems[index] = {
                    ...newItems[index],
                    [subProperty.name]: subValue,
                  };
                  handleChange(newItems);
                }}
                theme={theme}
                disabled={disabled}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          block
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const newItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((subProperty) =&gt; {
              newItem[subProperty.name] = subProperty.default;
            });
            handleChange([...items, newItem]);
          }}
        &gt;
          Add Item
        &lt;/Button&gt;
      &lt;/Card&gt;
    );
  };

  const renderFixedCollectionField = () =&gt; {
    // Similar to collection but with fixed structure
    return renderCollectionField();
  };

  const renderCredentialsSelect = () =&gt; {
    // Mock credentials for now - would be populated from credential store
    const mockCredentials = [
      { value: 'cred1', name: 'Gmail OAuth2' },
      { value: 'cred2', name: 'OpenAI API Key' },
      { value: 'cred3', name: 'Slack Bot Token' },
    ];

    return (
      &lt;Select
        placeholder=&quot;Select credentials&quot;
        value={internalValue}
        onChange={handleChange}
        disabled={disabled}
        style={{ width: '100%' }}
      &gt;
        {mockCredentials.map((cred) =&gt; (
          &lt;Option key={String(cred.value)} value={cred.value}&gt;
            {cred.name}
          &lt;/Option&gt;
        ))}
      &lt;/Select&gt;
    );
  };

  return (
    &lt;div style={{ marginBottom: theme.spacing.md }}&gt;
      {renderLabel()}
      {renderField()}
      {renderError()}
    &lt;/div&gt;
  );
};

export default PropertyField;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedTransformPropertyPanel.tsx (Line 131:5 - Line 138:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/TransformAssignmentCollection.tsx (Line 294:5 - Line 301:61)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup59"><code class="language-tsx text-sm text-gray-800">const fieldNames = new Set&lt;string&gt;();
    inputData.forEach((item) =&gt; {
      if (item.json &amp;&amp; typeof item.json === 'object') {
        Object.keys(item.json).forEach((key) =&gt; fieldNames.add(key));
      }
    });

    return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedNodeToolbar.tsx (Line 1:1 - Line 19:12), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/EnhancedNodeToolbar.tsx (Line 1:1 - Line 19:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup61"><code class="language-tsx text-sm text-gray-800">/**
 * Enhanced Node Toolbar
 * Advanced toolbar with customizable actions, themes, and interactions
 */

import {
  BugOutlined,
  CopyOutlined,
  DeleteOutlined,
  EditOutlined,
  MoreOutlined,
  PlayCircleOutlined,
  ReloadOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import { Dropdown, Menu, Tooltip } from 'antd';
import React, { useRef, useState } from 'react';
import { useNodeTheme } from '../themes'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedNodeToolbar.tsx (Line 20:11 - Line 154:41), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/EnhancedNodeToolbar.tsx (Line 20:37 - Line 154:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup62"><code class="language-tsx text-sm text-gray-800">;

interface EnhancedNodeToolbarProps {
  nodeId: string;
  visible: boolean;
  actions?: ToolbarAction[];
  theme?: NodeTheme;
  onActionClick: (actionId: string, nodeId: string) =&gt; void;
  position?: 'top' | 'bottom' | 'left' | 'right';
  size?: 'small' | 'medium' | 'large';
  variant?: 'default' | 'compact' | 'floating';
}

const EnhancedNodeToolbar: React.FC&lt;EnhancedNodeToolbarProps&gt; = ({
  nodeId,
  visible,
  actions = [],
  theme: propTheme,
  onActionClick,
  position = 'top',
  size = 'medium',
  variant = 'default',
}) =&gt; {
  const { theme: contextTheme } = useNodeTheme();
  const theme = propTheme || contextTheme;
  const [hoveredAction, setHoveredAction] = useState&lt;string | null&gt;(null);
  const toolbarRef = useRef&lt;HTMLDivElement&gt;(null);

  // Default actions if none provided
  const defaultActions: ToolbarAction[] = [
    {
      id: 'play',
      icon: 'PlayCircleOutlined',
      label: 'Run Node',
      action: 'execute',
      shortcut: 'Ctrl+R',
    },
    {
      id: 'stop',
      icon: 'StopOutlined',
      label: 'Stop Execution',
      action: 'stop',
    },
    {
      id: 'copy',
      icon: 'CopyOutlined',
      label: 'Duplicate Node',
      action: 'duplicate',
      shortcut: 'Ctrl+D',
    },
    {
      id: 'edit',
      icon: 'EditOutlined',
      label: 'Edit Node',
      action: 'edit',
      shortcut: 'Enter',
    },
    {
      id: 'delete',
      icon: 'DeleteOutlined',
      label: 'Delete Node',
      action: 'delete',
      shortcut: 'Del',
    },
    {
      id: 'more',
      icon: 'MoreOutlined',
      label: 'More Actions',
      action: 'menu',
    },
  ];

  const finalActions = actions.length &gt; 0 ? actions : defaultActions;

  const getPositionStyles = (): React.CSSProperties =&gt; {
    const offset = variant === 'floating' ? 12 : 8;
    const baseStyles: React.CSSProperties = {
      position: 'absolute',
      zIndex: 9999,
    };

    switch (position) {
      case 'top':
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'bottom':
        return {
          ...baseStyles,
          bottom: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
      case 'left':
        return {
          ...baseStyles,
          left: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      case 'right':
        return {
          ...baseStyles,
          right: `-${offset + 120}px`,
          top: '50%',
          transform: 'translateY(-50%)',
        };
      default:
        return {
          ...baseStyles,
          top: `-${offset + 32}px`,
          left: '50%',
          transform: 'translateX(-50%)',
        };
    }
  };

  const getSizeConfig = () =&gt; {
    switch (size) {
      case 'small':
        return { buttonSize: 24, iconSize: 12, padding: '4px' };
      case 'large':
        return { buttonSize: 36, iconSize: 16, padding: '8px' };
      default:
        return { buttonSize: 28, iconSize: 14, padding: '6px' };
    }
  };

  const getVariantStyles = (): React.CSSProperties =&gt; {
    const { padding } = getSizeConfig();

    // Defensive theme access with fallbacks</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/EnhancedNodeToolbar.tsx (Line 190:33 - Line 367:2), /home/margon/Reporunner/reporunner/packages/frontend/src/design-system/components/common/EnhancedNodeToolbar.tsx (Line 185:3 - Line 362:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup63"><code class="language-tsx text-sm text-gray-800">,
        };
    }
  };

  const getIconComponent = (iconName: string) =&gt; {
    const iconMap: Record&lt;string, React.ComponentType&lt;any&gt;&gt; = {
      PlayCircleOutlined,
      StopOutlined,
      DeleteOutlined,
      MoreOutlined,
      CopyOutlined,
      EditOutlined,
      SettingOutlined,
      BugOutlined,
      ReloadOutlined,
    };

    const IconComponent = iconMap[iconName] || MoreOutlined;
    return IconComponent;
  };

  const handleActionClick = (action: ToolbarAction, e: React.MouseEvent) =&gt; {
    e.stopPropagation();

    // Special handling for menu action
    if (action.id === 'more') {
      // Show additional actions menu
      return;
    }

    onActionClick(action.id, nodeId);
  };

  const getButtonStyles = (actionId: string): React.CSSProperties =&gt; {
    const { buttonSize, iconSize } = getSizeConfig();
    const isHovered = hoveredAction === actionId;

    const buttonColor = getActionColor(actionId);

    return {
      width: buttonSize,
      height: buttonSize,
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      borderRadius: theme.borderRadius.sm,
      background: isHovered ? buttonColor : 'transparent',
      color: isHovered ? theme.colors.background : getActionTextColor(actionId),
      border: 'none',
      cursor: 'pointer',
      transition: `all ${theme.animations.duration.fast} ${theme.animations.easing.easeOut}`,
      fontSize: iconSize,
      transform: isHovered ? 'scale(1.1)' : 'scale(1)',
    };
  };

  const getActionColor = (actionId: string): string =&gt; {
    switch (actionId) {
      case 'play':
        return theme.colors.success;
      case 'stop':
        return theme.colors.error;
      case 'delete':
        return theme.colors.error;
      case 'copy':
        return theme.colors.info;
      case 'edit':
        return theme.colors.primary;
      default:
        return theme.colors.textSecondary;
    }
  };

  const getActionTextColor = (actionId: string): string =&gt; {
    if (variant === 'floating') {
      return getActionColor(actionId);
    }
    return theme.colors.background;
  };

  const renderMoreMenu = () =&gt; {
    const moreActions: ToolbarAction[] = [
      {
        id: 'settings',
        icon: 'SettingOutlined',
        label: 'Node Settings',
        action: 'settings',
      },
      {
        id: 'debug',
        icon: 'BugOutlined',
        label: 'Debug Node',
        action: 'debug',
      },
      {
        id: 'reload',
        icon: 'ReloadOutlined',
        label: 'Reload Node',
        action: 'reload',
      },
    ];

    const menuItems = moreActions.map((action) =&gt; ({
      key: action.id,
      label: (
        &lt;div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}&gt;
          {React.createElement(getIconComponent(action.icon))}
          &lt;span&gt;{action.label}&lt;/span&gt;
          {action.shortcut &amp;&amp; (
            &lt;span style={{ marginLeft: 'auto', fontSize: '11px', opacity: 0.6 }}&gt;
              {action.shortcut}
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      ),
      onClick: () =&gt; onActionClick(action.id, nodeId),
    }));

    return &lt;Menu items={menuItems} /&gt;;
  };

  if (!visible) return null;

  return (
    &lt;div ref={toolbarRef} style={getPositionStyles()}&gt;
      &lt;div style={getVariantStyles()}&gt;
        {finalActions.map((action) =&gt; {
          if (action.id === 'more') {
            return (
              &lt;Dropdown
                key={action.id}
                overlay={renderMoreMenu()}
                trigger={['click']}
                placement=&quot;bottomCenter&quot;
              &gt;
                &lt;button
                  style={getButtonStyles(action.id)}
                  onMouseEnter={() =&gt; setHoveredAction(action.id)}
                  onMouseLeave={() =&gt; setHoveredAction(null)}
                &gt;
                  {React.createElement(getIconComponent(action.icon))}
                &lt;/button&gt;
              &lt;/Dropdown&gt;
            );
          }

          return (
            &lt;Tooltip
              key={action.id}
              title={
                &lt;div&gt;
                  &lt;div&gt;{action.label}&lt;/div&gt;
                  {action.shortcut &amp;&amp; (
                    &lt;div style={{ fontSize: '11px', opacity: 0.8 }}&gt;{action.shortcut}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              }
              placement=&quot;bottom&quot;
              mouseEnterDelay={0.5}
            &gt;
              &lt;button
                style={getButtonStyles(action.id)}
                onClick={(e) =&gt; handleActionClick(action, e)}
                onMouseEnter={() =&gt; setHoveredAction(action.id)}
                onMouseLeave={() =&gt; setHoveredAction(null)}
              &gt;
                {React.createElement(getIconComponent(action.icon))}
              &lt;/button&gt;
            &lt;/Tooltip&gt;
          );
        })}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EnhancedNodeToolbar;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/ConditionalPropertyRenderer.tsx (Line 481:5 - Line 489:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/ConditionalPropertyRenderer.tsx (Line 310:5 - Line 318:36)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup64"><code class="language-tsx text-sm text-gray-800">if (displayOptions.show) {
      Object.keys(displayOptions.show).forEach((field) =&gt; dependencies.add(field));
    }

    if (displayOptions.hide) {
      Object.keys(displayOptions.hide).forEach((field) =&gt; dependencies.add(field));
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/ConditionalPropertyRenderer.tsx (Line 489:5 - Line 497:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/components/ConditionalPropertyRenderer.tsx (Line 319:5 - Line 327:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup65"><code class="language-tsx text-sm text-gray-800">if (displayOptions.showIf) {
      displayOptions.showIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    if (displayOptions.hideIf) {
      displayOptions.hideIf.forEach((condition) =&gt; dependencies.add(condition.field));
    }

    if</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/bodies/DatabaseNodeBody.tsx (Line 45:3 - Line 91:20), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 49:3 - Line 95:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup67"><code class="language-tsx text-sm text-gray-800">const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-blue-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-blue-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* Output Handle */}
            &lt;Handle
              type=&quot;source&quot;
              position={Position.Right}
              id=&quot;output_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                right: -5,
              }}
            /&gt;

            {/* Database Icon */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/WorkflowTester.tsx (Line 50:2 - Line 67:5), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executiontoolbar/ExecutionToolbar.tsx (Line 113:29 - Line 130:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup68"><code class="language-tsx text-sm text-gray-800">,
          nodes: workflowJson.nodes.map((node) =&gt; ({
            id: node.id,
            type: node.type,
            position: { x: node.position[0], y: node.position[1] },
            data: {
              label: node.name,
              parameters: node.parameters,
              credentials:
                typeof node.credentials === 'object' &amp;&amp; node.credentials
                  ? Object.keys(node.credentials)[0] || undefined
                  : (node.credentials as string | undefined),
              disabled: node.disabled,
              notes: node.notes,
            },
          })),
          edges: [], // Convert connections to edges if needed
          tags</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/WorkflowTester.tsx (Line 77:9 - Line 102:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowTester/WorkflowTester.tsx (Line 47:9 - Line 72:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup69"><code class="language-tsx text-sm text-gray-800">// Convert BackendWorkflow to WorkflowDefinition format
        const workflowDefinition = {
          name: `Test Workflow ${Date.now()}`,
          version: 1,
          nodes: workflowJson.nodes.map((node) =&gt; ({
            id: node.id,
            type: node.type,
            position: { x: node.position[0], y: node.position[1] },
            data: {
              label: node.name,
              parameters: node.parameters,
              credentials:
                typeof node.credentials === 'object' &amp;&amp; node.credentials
                  ? Object.keys(node.credentials)[0] || undefined
                  : (node.credentials as string | undefined),
              disabled: node.disabled,
              notes: node.notes,
            },
          })),
          edges: [], // Convert connections to edges if needed
          tags: ['test'],
          isActive: true,
        };
        const result = await workflowApiService.testWorkflow(workflowDefinition);
        setTestResult({
          type: 'dry_run'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/UserPresenceOverlay.tsx (Line 32:3 - Line 49:54), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 87:3 - Line 104:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup70"><code class="language-tsx text-sm text-gray-800">const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Convert workflow coordinates to screen coordinates</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/UserPresenceOverlay.tsx (Line 47:2 - Line 58:36), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 66:5 - Line 77:54)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup71"><code class="language-tsx text-sm text-gray-800">);

  // Convert workflow coordinates to screen coordinates
  const workflowToScreen = useCallback(
    (x: number, y: number) =&gt; ({
      x: (x + transform.x) * transform.zoom,
      y: (y + transform.y) * transform.zoom,
    }),
    [transform]
  );

  // Get node position and dimensions</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/TriggerPanel.tsx (Line 1:1 - Line 985:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/triggerpanel/TriggerPanel.tsx (Line 4:1 - Line 988:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup73"><code class="language-tsx text-sm text-gray-800">/**
 * Advanced Trigger Management Panel
 *
 * Comprehensive trigger configuration interface for webhooks, API polling,
 * file monitoring, email triggers, and event-driven workflow execution.
 */

import {
  ApiOutlined,
  CalendarOutlined,
  CheckCircleOutlined,
  CopyOutlined,
  DatabaseOutlined,
  DeleteOutlined,
  EditOutlined,
  EyeOutlined,
  FileTextOutlined,
  GlobalOutlined,
  MailOutlined,
  PlayCircleOutlined,
  SettingOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Collapse,
  Divider,
  Form,
  Input,
  InputNumber,
  List,
  Modal,
  message,
  Progress,
  Select,
  Space,
  Statistic,
  Switch,
  Table,
  Tabs,
  Tag,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  advancedTriggerSystem,
  type TriggerConfiguration,
  type TriggerEvent,
  type TriggerMetrics,
} from '@/core/services/advancedTriggerSystem';
import { colors } from '@/design-system/tokens';
import { cn } from '@/design-system/utils';

const { TabPane } = Tabs;
const { Option } = Select;
const { TextArea } = Input;
const { Text, Paragraph } = Typography;
const { Panel } = Collapse;

interface TriggerPanelProps {
  workflowId: string;
  visible: boolean;
  onClose: () =&gt; void;
}

export const TriggerPanel: React.FC&lt;TriggerPanelProps&gt; = ({ workflowId, visible, onClose }) =&gt; {
  const [triggers, setTriggers] = useState&lt;TriggerConfiguration[]&gt;([]);
  const [recentEvents, setRecentEvents] = useState&lt;TriggerEvent[]&gt;([]);
  const [selectedTrigger, setSelectedTrigger] = useState&lt;TriggerConfiguration | null&gt;(null);
  const [metrics, setMetrics] = useState&lt;TriggerMetrics | null&gt;(null);
  const [activeTab, setActiveTab] = useState('triggers');
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [editingTrigger, setEditingTrigger] = useState&lt;string | null&gt;(null);
  const [testModalVisible, setTestModalVisible] = useState(false);
  const [webhookUrl, setWebhookUrl] = useState('');

  useEffect(() =&gt; {
    if (visible) {
      loadTriggers();
      loadRecentEvents();
    }
  }, [visible, loadRecentEvents, loadTriggers]);

  useEffect(() =&gt; {
    if (selectedTrigger) {
      loadMetrics(selectedTrigger.id);
    }
  }, [selectedTrigger, loadMetrics]);

  const loadTriggers = () =&gt; {
    const allTriggers = advancedTriggerSystem.getAllTriggers();
    const workflowTriggers = allTriggers.filter((t) =&gt; t.workflowId === workflowId);
    setTriggers(workflowTriggers);
  };

  const loadRecentEvents = () =&gt; {
    const allTriggers = advancedTriggerSystem.getAllTriggers();
    const workflowTriggers = allTriggers.filter((t) =&gt; t.workflowId === workflowId);

    const events: TriggerEvent[] = [];
    workflowTriggers.forEach((trigger) =&gt; {
      const triggerEvents = advancedTriggerSystem.getRecentEvents(trigger.id, 50);
      events.push(...triggerEvents);
    });

    // Sort by timestamp descending
    events.sort((a, b) =&gt; new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());
    setRecentEvents(events.slice(0, 100));
  };

  const loadMetrics = (triggerId: string) =&gt; {
    try {
      const triggerMetrics = advancedTriggerSystem.getTriggerMetrics(triggerId);
      setMetrics(triggerMetrics);
    } catch (_error) {}
  };

  const handleCreateTrigger = async (values: any) =&gt; {
    setLoading(true);
    try {
      const triggerConfig = {
        workflowId,
        name: values.name,
        description: values.description,
        enabled: values.enabled ?? true,
        triggerType: values.triggerType,
        configuration: buildTriggerConfiguration(values),
        filters: values.filters || [],
        transformations: values.transformations || [],
        authentication: values.authentication,
        rateLimit: {
          enabled: values.rateLimitEnabled ?? false,
          maxTriggersPerMinute: values.maxTriggersPerMinute ?? 60,
          maxTriggersPerHour: values.maxTriggersPerHour ?? 1000,
          maxTriggersPerDay: values.maxTriggersPerDay ?? 10000,
          burstLimit: values.burstLimit ?? 10,
        },
        retryPolicy: {
          enabled: values.retryEnabled ?? false,
          maxAttempts: values.maxAttempts ?? 3,
          backoffMs: values.backoffMs ?? 1000,
          exponentialBackoff: values.exponentialBackoff ?? true,
        },
        security: {
          allowedIPs: values.allowedIPs?.split(',').map((ip: string) =&gt; ip.trim()) ?? [],
          blockedIPs: values.blockedIPs?.split(',').map((ip: string) =&gt; ip.trim()) ?? [],
          requireHttps: values.requireHttps ?? true,
          validateSignature: values.validateSignature ?? false,
          maxPayloadSize: values.maxPayloadSize ?? 1048576, // 1MB
        },
        metadata: {},
      };

      const created = advancedTriggerSystem.createTrigger(triggerConfig);

      if (created.triggerType === 'webhook') {
        const config = created.configuration as any;
        setWebhookUrl(config.endpoint);
      }

      message.success('Trigger created successfully');
      loadTriggers();
      form.resetFields();
      setEditingTrigger(null);
    } catch (_error) {
      message.error('Failed to create trigger');
    } finally {
      setLoading(false);
    }
  };

  const buildTriggerConfiguration = (values: any) =&gt; {
    switch (values.triggerType) {
      case 'webhook':
        return {
          endpoint: '', // Auto-generated
          methods: values.methods || ['POST'],
          contentTypes: values.contentTypes?.split(',').map((t: string) =&gt; t.trim()) || [
            'application/json',
          ],
          headers: parseKeyValuePairs(values.headers),
          responseTemplate: values.responseTemplate,
          secretKey: values.secretKey,
        };
      case 'http_request':
        return {
          url: values.url,
          method: values.method || 'GET',
          headers: parseKeyValuePairs(values.headers),
          body: values.body,
          pollIntervalMs: values.pollIntervalMs || 300000,
          changeDetection: values.changeDetection || 'hash',
        };
      case 'email':
        return {
          provider: values.provider || 'gmail',
          mailbox: values.mailbox || 'INBOX',
          filters: {
            from: values.fromEmails?.split(',').map((e: string) =&gt; e.trim()),
            subject: values.subjectFilter,
            body: values.bodyFilter,
            hasAttachment: values.hasAttachment,
          },
          markAsRead: values.markAsRead ?? false,
          moveToFolder: values.moveToFolder,
        };
      case 'file_change':
        return {
          path: values.path,
          recursive: values.recursive ?? true,
          events: values.events || ['created', 'modified'],
          patterns: values.patterns?.split(',').map((p: string) =&gt; p.trim()) || ['*'],
          ignorePatterns: values.ignorePatterns?.split(',').map((p: string) =&gt; p.trim()) || [],
          debounceMs: values.debounceMs || 1000,
        };
      case 'database_change':
        return {
          connectionString: values.connectionString,
          database: values.database,
          table: values.table,
          operation: values.operation || 'any',
          columns: values.columns?.split(',').map((c: string) =&gt; c.trim()),
          conditions: parseKeyValuePairs(values.conditions),
          pollIntervalMs: values.pollIntervalMs || 60000,
        };
      case 'api_poll':
        return {
          url: values.url || '',
          method: values.method || 'GET',
          headers: parseKeyValuePairs(values.headers),
          body: values.body,
          pollIntervalMs: values.pollIntervalMs || 300000,
          responseField: values.responseField,
          changeThreshold: values.changeThreshold,
        };
      default:
        // Fallback to webhook config for unknown types
        return {
          endpoint: '',
          methods: ['POST'],
          contentTypes: ['application/json'],
          headers: {},
          responseTemplate: '',
          secretKey: '',
        };
    }
  };

  const parseKeyValuePairs = (input: string): Record&lt;string, string&gt; =&gt; {
    if (!input) return {};

    const pairs: Record&lt;string, string&gt; = {};
    input.split('\n').forEach((line) =&gt; {
      const [key, ...valueParts] = line.split(':');
      if (key &amp;&amp; valueParts.length &gt; 0) {
        pairs[key.trim()] = valueParts.join(':').trim();
      }
    });
    return pairs;
  };

  const handleToggleTrigger = (triggerId: string, enabled: boolean) =&gt; {
    try {
      advancedTriggerSystem.toggleTrigger(triggerId, enabled);
      message.success(`Trigger ${enabled ? 'enabled' : 'disabled'}`);
      loadTriggers();
    } catch (_error) {
      message.error('Failed to toggle trigger');
    }
  };

  const handleDeleteTrigger = (triggerId: string) =&gt; {
    try {
      advancedTriggerSystem.deleteTrigger(triggerId);
      message.success('Trigger deleted');
      loadTriggers();
      if (selectedTrigger?.id === triggerId) {
        setSelectedTrigger(null);
        setMetrics(null);
      }
    } catch (_error) {
      message.error('Failed to delete trigger');
    }
  };

  const handleTestTrigger = async (triggerId: string, testData?: any) =&gt; {
    try {
      await advancedTriggerSystem.testTrigger(triggerId, testData);
      message.success('Trigger test completed');
      loadRecentEvents();
      setTestModalVisible(false);
    } catch (_error) {
      message.error('Trigger test failed');
    }
  };

  const renderTriggerForm = () =&gt; (
    &lt;Form
      form={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateTrigger}
      initialValues={{
        enabled: true,
        triggerType: 'webhook',
        rateLimitEnabled: false,
        retryEnabled: false,
        requireHttps: true,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Trigger Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;API webhook trigger&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Receives webhooks from external API&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;triggerType&quot; label=&quot;Trigger Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;webhook&quot;&gt;
            &lt;Space&gt;
              &lt;GlobalOutlined /&gt;
              Webhook
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;http_request&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              HTTP Request
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;email&quot;&gt;
            &lt;Space&gt;
              &lt;MailOutlined /&gt;
              Email
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;file_change&quot;&gt;
            &lt;Space&gt;
              &lt;FileTextOutlined /&gt;
              File Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;database_change&quot;&gt;
            &lt;Space&gt;
              &lt;DatabaseOutlined /&gt;
              Database Change
            &lt;/Space&gt;
          &lt;/Option&gt;
          &lt;Option value=&quot;api_poll&quot;&gt;
            &lt;Space&gt;
              &lt;ApiOutlined /&gt;
              API Polling
            &lt;/Space&gt;
          &lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['triggerType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const triggerType = getFieldValue('triggerType');
          return renderTriggerTypeFields(triggerType);
        }}
      &lt;/Form.Item&gt;

      &lt;Collapse ghost&gt;
        &lt;Panel header=&quot;Advanced Configuration&quot; key=&quot;advanced&quot;&gt;
          {renderAdvancedFields()}
        &lt;/Panel&gt;
      &lt;/Collapse&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingTrigger ? 'Update Trigger' : 'Create Trigger'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingTrigger(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderTriggerTypeFields = (triggerType: string) =&gt; {
    switch (triggerType) {
      case 'webhook':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;methods&quot; label=&quot;HTTP Methods&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select methods&quot;&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
                &lt;Option value=&quot;PATCH&quot;&gt;PATCH&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;contentTypes&quot; label=&quot;Content Types (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;application/json, application/xml&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;secretKey&quot; label=&quot;Secret Key (optional)&quot;&gt;
              &lt;Input.Password placeholder=&quot;For webhook signature validation&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'http_request':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;method&quot; label=&quot;HTTP Method&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;GET&quot;&gt;GET&lt;/Option&gt;
                &lt;Option value=&quot;POST&quot;&gt;POST&lt;/Option&gt;
                &lt;Option value=&quot;PUT&quot;&gt;PUT&lt;/Option&gt;
                &lt;Option value=&quot;DELETE&quot;&gt;DELETE&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeDetection&quot; label=&quot;Change Detection&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;hash&quot;&gt;Content Hash&lt;/Option&gt;
                &lt;Option value=&quot;content&quot;&gt;Full Content&lt;/Option&gt;
                &lt;Option value=&quot;headers&quot;&gt;Headers&lt;/Option&gt;
                &lt;Option value=&quot;size&quot;&gt;Content Size&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'email':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;provider&quot; label=&quot;Email Provider&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;gmail&quot;&gt;Gmail&lt;/Option&gt;
                &lt;Option value=&quot;outlook&quot;&gt;Outlook&lt;/Option&gt;
                &lt;Option value=&quot;imap&quot;&gt;IMAP&lt;/Option&gt;
                &lt;Option value=&quot;exchange&quot;&gt;Exchange&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;mailbox&quot; label=&quot;Mailbox&quot;&gt;
              &lt;Input placeholder=&quot;INBOX&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;fromEmails&quot; label=&quot;From Emails (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;user@example.com, alerts@service.com&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;subjectFilter&quot; label=&quot;Subject Filter&quot;&gt;
              &lt;Input placeholder=&quot;Alert: &quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'file_change':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;path&quot; label=&quot;Path to Monitor&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;/data/uploads&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;recursive&quot; label=&quot;Recursive&quot; valuePropName=&quot;checked&quot;&gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;events&quot; label=&quot;File Events&quot;&gt;
              &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select events&quot;&gt;
                &lt;Option value=&quot;created&quot;&gt;Created&lt;/Option&gt;
                &lt;Option value=&quot;modified&quot;&gt;Modified&lt;/Option&gt;
                &lt;Option value=&quot;deleted&quot;&gt;Deleted&lt;/Option&gt;
                &lt;Option value=&quot;moved&quot;&gt;Moved&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;patterns&quot; label=&quot;File Patterns (comma-separated)&quot;&gt;
              &lt;Input placeholder=&quot;*.pdf, *.docx&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'database_change':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;connectionString&quot;
              label=&quot;Connection String&quot;
              rules={[{ required: true }]}
            &gt;
              &lt;Input.Password placeholder=&quot;mongodb://localhost:27017/mydb&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;database&quot; label=&quot;Database&quot;&gt;
              &lt;Input placeholder=&quot;myapp&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;table&quot; label=&quot;Table/Collection&quot;&gt;
              &lt;Input placeholder=&quot;users&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;operation&quot; label=&quot;Operation&quot;&gt;
              &lt;Select&gt;
                &lt;Option value=&quot;insert&quot;&gt;Insert&lt;/Option&gt;
                &lt;Option value=&quot;update&quot;&gt;Update&lt;/Option&gt;
                &lt;Option value=&quot;delete&quot;&gt;Delete&lt;/Option&gt;
                &lt;Option value=&quot;any&quot;&gt;Any&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'api_poll':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;url&quot; label=&quot;API URL&quot; rules={[{ required: true }]}&gt;
              &lt;Input placeholder=&quot;https://api.example.com/data&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;pollIntervalMs&quot; label=&quot;Poll Interval (ms)&quot;&gt;
              &lt;InputNumber min={10000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;responseField&quot; label=&quot;Response Field to Monitor&quot;&gt;
              &lt;Input placeholder=&quot;data.status&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;changeThreshold&quot; label=&quot;Change Threshold (for numbers)&quot;&gt;
              &lt;InputNumber min={0} step={0.1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderAdvancedFields = () =&gt; (
    &lt;Space direction=&quot;vertical&quot; size=&quot;middle&quot; style={{ width: '100%' }}&gt;
      &lt;Divider&gt;Rate Limiting&lt;/Divider&gt;
      &lt;Form.Item name=&quot;rateLimitEnabled&quot; label=&quot;Enable Rate Limiting&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item dependencies={['rateLimitEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('rateLimitEnabled')) return null;
          return (
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;Form.Item name=&quot;maxTriggersPerMinute&quot; label=&quot;Max/Minute&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;maxTriggersPerHour&quot; label=&quot;Max/Hour&quot;&gt;
                &lt;InputNumber min={1} /&gt;
              &lt;/Form.Item&gt;
            &lt;/div&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Security&lt;/Divider&gt;
      &lt;Form.Item name=&quot;requireHttps&quot; label=&quot;Require HTTPS&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;allowedIPs&quot; label=&quot;Allowed IPs (comma-separated)&quot;&gt;
        &lt;Input placeholder=&quot;192.168.1.1, 10.0.0.0/8&quot; /&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item name=&quot;maxPayloadSize&quot; label=&quot;Max Payload Size (bytes)&quot;&gt;
        &lt;InputNumber min={1024} placeholder=&quot;1048576&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Headers&lt;/Divider&gt;
      &lt;Form.Item name=&quot;headers&quot; label=&quot;Custom Headers (key:value per line)&quot;&gt;
        &lt;TextArea
          placeholder=&quot;Authorization: Bearer token&amp;#10;Content-Type: application/json&quot;
          rows={3}
        /&gt;
      &lt;/Form.Item&gt;
    &lt;/Space&gt;
  );

  const renderTriggersList = () =&gt; (
    &lt;List
      dataSource={triggers}
      renderItem={(trigger) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={trigger.enabled}
              onChange={(checked) =&gt; handleToggleTrigger(trigger.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedTrigger(trigger);
                setTestModalVisible(true);
              }}
            &gt;
              Test
            &lt;/Button&gt;,
            trigger.triggerType === 'webhook' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={() =&gt; {
                  const config = trigger.configuration as any;
                  navigator.clipboard.writeText(config.endpoint);
                  message.success('Webhook URL copied');
                }}
              &gt;
                Copy URL
              &lt;/Button&gt;
            ),
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingTrigger(trigger.id);
                // Populate form with existing values
                form.setFieldsValue({
                  name: trigger.name,
                  description: trigger.description,
                  enabled: trigger.enabled,
                  triggerType: trigger.triggerType,
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteTrigger(trigger.id)}
            /&gt;,
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {getTriggerIcon(trigger.triggerType)}
                {trigger.name}
                &lt;Tag color={trigger.enabled ? 'green' : 'default'}&gt;{trigger.triggerType}&lt;/Tag&gt;
                &lt;Badge
                  count={trigger.triggerCount}
                  style={{ backgroundColor: colors.primary[500] }}
                /&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {trigger.description}
                &lt;Space&gt;
                  &lt;Badge status={trigger.enabled ? 'success' : 'default'} /&gt;
                  {trigger.enabled ? 'Active' : 'Inactive'}
                  {trigger.lastTriggered &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(trigger.lastTriggered).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
                {trigger.triggerType === 'webhook' &amp;&amp; (
                  &lt;Text code style={{ fontSize: '12px' }}&gt;
                    {(trigger.configuration as any).endpoint}
                  &lt;/Text&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No triggers configured' }}
    /&gt;
  );

  const renderEventsList = () =&gt; (
    &lt;Table
      dataSource={recentEvents}
      size=&quot;small&quot;
      pagination={{ pageSize: 20 }}
      columns={[
        {
          title: 'Time',
          dataIndex: 'timestamp',
          key: 'timestamp',
          width: 150,
          render: (timestamp) =&gt; new Date(timestamp).toLocaleString(),
        },
        {
          title: 'Trigger',
          dataIndex: 'triggerId',
          key: 'triggerId',
          width: 200,
          render: (triggerId) =&gt; {
            const trigger = triggers.find((t) =&gt; t.id === triggerId);
            return trigger ? trigger.name : triggerId;
          },
        },
        {
          title: 'Status',
          dataIndex: 'status',
          key: 'status',
          width: 100,
          render: (status) =&gt; &lt;Tag color={getEventStatusColor(status)}&gt;{status}&lt;/Tag&gt;,
        },
        {
          title: 'Processing Time',
          dataIndex: 'processingTimeMs',
          key: 'processingTimeMs',
          width: 120,
          render: (time) =&gt; `${time.toFixed(2)}ms`,
        },
        {
          title: 'Source',
          dataIndex: ['metadata', 'source'],
          key: 'source',
          width: 120,
        },
        {
          title: 'Actions',
          key: 'actions',
          width: 100,
          render: (_, event) =&gt; (
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                Modal.info({
                  title: 'Event Details',
                  content: (
                    &lt;div&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;ID:&lt;/Text&gt; {event.id}
                      &lt;/Paragraph&gt;
                      &lt;Paragraph&gt;
                        &lt;Text strong&gt;Raw Data:&lt;/Text&gt;
                        &lt;pre
                          style={{
                            marginTop: 8,
                            background: colors.gray[50],
                            padding: 12,
                            borderRadius: 4,
                          }}
                        &gt;
                          {JSON.stringify(event.rawData, null, 2)}
                        &lt;/pre&gt;
                      &lt;/Paragraph&gt;
                      {event.error &amp;&amp; (
                        &lt;Paragraph&gt;
                          &lt;Text strong&gt;Error:&lt;/Text&gt;
                          &lt;pre
                            style={{
                              marginTop: 8,
                              background: colors.error[50],
                              padding: 12,
                              borderRadius: 4,
                              color: colors.error[600],
                            }}
                          &gt;
                            {event.error}
                          &lt;/pre&gt;
                        &lt;/Paragraph&gt;
                      )}
                    &lt;/div&gt;
                  ),
                  width: 600,
                });
              }}
            /&gt;
          ),
        },
      ]}
    /&gt;
  );

  const renderMetrics = () =&gt; {
    if (!metrics) return &lt;div&gt;Select a trigger to view metrics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic title=&quot;Total Events&quot; value={metrics.totalEvents} /&gt;
          &lt;Statistic
            title=&quot;Processed Events&quot;
            value={metrics.processedEvents}
            valueStyle={{ color: colors.success[600] }}
          /&gt;
          &lt;Statistic
            title=&quot;Error Rate&quot;
            value={metrics.errorRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: metrics.errorRate &gt; 5 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
          &lt;Statistic
            title=&quot;Avg Processing Time&quot;
            value={metrics.averageProcessingTime}
            precision={2}
            suffix=&quot;ms&quot;
          /&gt;
        &lt;/div&gt;

        {metrics.topSources.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Top Sources&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={metrics.topSources}
              renderItem={(source) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta title={source.source} description={`${source.count} events`} /&gt;
                  &lt;Progress
                    percent={(source.count / metrics.totalEvents) * 100}
                    size=&quot;small&quot;
                    style={{ width: 100 }}
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getTriggerIcon = (triggerType: string) =&gt; {
    const iconMap = {
      webhook: &lt;GlobalOutlined /&gt;,
      http_request: &lt;ApiOutlined /&gt;,
      email: &lt;MailOutlined /&gt;,
      file_change: &lt;FileTextOutlined /&gt;,
      database_change: &lt;DatabaseOutlined /&gt;,
      api_poll: &lt;ApiOutlined /&gt;,
      calendar_event: &lt;CalendarOutlined /&gt;,
    };
    return iconMap[triggerType as keyof typeof iconMap] || &lt;SettingOutlined /&gt;;
  };

  const getEventStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'processed':
        return 'green';
      case 'failed':
        return 'red';
      case 'filtered':
        return 'orange';
      case 'rate_limited':
        return 'purple';
      default:
        return 'default';
    }
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;ThunderboltOutlined /&gt;
            Advanced Triggers
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1200}
        footer={null}
        className={cn('trigger-management-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Triggers ({triggers.length})
              &lt;/span&gt;
            }
            key=&quot;triggers&quot;
          &gt;
            &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
              &lt;Card title=&quot;Create Trigger&quot; size=&quot;small&quot;&gt;
                {renderTriggerForm()}
                {webhookUrl &amp;&amp; (
                  &lt;Alert
                    message=&quot;Webhook URL&quot;
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;Text code&gt;{webhookUrl}&lt;/Text&gt;
                        &lt;Button
                          size=&quot;small&quot;
                          icon={&lt;CopyOutlined /&gt;}
                          onClick={() =&gt; {
                            navigator.clipboard.writeText(webhookUrl);
                            message.success('URL copied');
                          }}
                        &gt;
                          Copy URL
                        &lt;/Button&gt;
                      &lt;/Space&gt;
                    }
                    type=&quot;success&quot;
                    style={{ marginTop: 16 }}
                  /&gt;
                )}
              &lt;/Card&gt;
              &lt;Card title=&quot;Active Triggers&quot; size=&quot;small&quot;&gt;
                {renderTriggersList()}
              &lt;/Card&gt;
            &lt;/div&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CheckCircleOutlined /&gt;
                Events
              &lt;/span&gt;
            }
            key=&quot;events&quot;
          &gt;
            {renderEventsList()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;div&gt;📊&lt;/div&gt;
                Metrics
              &lt;/span&gt;
            }
            key=&quot;metrics&quot;
          &gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;Select
                placeholder=&quot;Select a trigger to view metrics&quot;
                value={selectedTrigger?.id}
                onChange={(triggerId) =&gt; {
                  const trigger = triggers.find((t) =&gt; t.id === triggerId);
                  setSelectedTrigger(trigger || null);
                }}
                style={{ width: 300 }}
              &gt;
                {triggers.map((trigger) =&gt; (
                  &lt;Option key={trigger.id} value={trigger.id}&gt;
                    {trigger.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/div&gt;
            {renderMetrics()}
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Modal&gt;

      &lt;Modal
        title=&quot;Test Trigger&quot;
        open={testModalVisible}
        onCancel={() =&gt; setTestModalVisible(false)}
        onOk={() =&gt; {
          if (selectedTrigger) {
            handleTestTrigger(selectedTrigger.id);
          }
        }}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Test Data (JSON)&quot;&gt;
            &lt;TextArea
              rows={8}
              placeholder={JSON.stringify(
                { test: true, timestamp: new Date().toISOString() },
                null,
                2
              )}
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/SchedulingPanel.tsx (Line 1:1 - Line 722:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/schedulingpanel/SchedulingPanel.tsx (Line 5:1 - Line 726:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup75"><code class="language-tsx text-sm text-gray-800">/**
 * Workflow Scheduling Panel
 *
 * Provides comprehensive workflow scheduling interface with cron expressions,
 * interval scheduling, conditional execution, and advanced configuration options.
 */

import {
  BarChartOutlined,
  CalendarOutlined,
  ClockCircleOutlined,
  DeleteOutlined,
  EditOutlined,
  InfoCircleOutlined,
  PauseCircleOutlined,
  PlayCircleOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  DatePicker,
  Divider,
  Form,
  Input,
  InputNumber,
  List,
  Modal,
  message,
  Select,
  Space,
  Statistic,
  Switch,
  Tabs,
  Tag,
  Tooltip,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  type ScheduleAnalytics,
  type ScheduleConfiguration,
  type ScheduledExecution,
  workflowScheduler,
} from '@/core/services/workflowScheduler';
import { colors } from '@/design-system/tokens';
import { cn } from '@/design-system/utils';

const { TabPane } = Tabs;
const { Option } = Select;
const { TextArea } = Input;

interface SchedulingPanelProps {
  workflowId: string;
  visible: boolean;
  onClose: () =&gt; void;
}

export const SchedulingPanel: React.FC&lt;SchedulingPanelProps&gt; = ({
  workflowId,
  visible,
  onClose,
}) =&gt; {
  const [schedules, setSchedules] = useState&lt;ScheduleConfiguration[]&gt;([]);
  const [activeExecutions, setActiveExecutions] = useState&lt;ScheduledExecution[]&gt;([]);
  const [selectedSchedule, setSelectedSchedule] = useState&lt;ScheduleConfiguration | null&gt;(null);
  const [analytics, setAnalytics] = useState&lt;ScheduleAnalytics | null&gt;(null);
  const [activeTab, setActiveTab] = useState('schedules');
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [editingSchedule, setEditingSchedule] = useState&lt;string | null&gt;(null);

  useEffect(() =&gt; {
    if (visible) {
      loadSchedules();
      loadActiveExecutions();
    }
  }, [visible, loadActiveExecutions, loadSchedules]);

  useEffect(() =&gt; {
    if (selectedSchedule) {
      loadAnalytics(selectedSchedule.id);
    }
  }, [selectedSchedule, loadAnalytics]);

  const loadSchedules = () =&gt; {
    const allSchedules = workflowScheduler.getAllSchedules();
    const workflowSchedules = allSchedules.filter((s) =&gt; s.workflowId === workflowId);
    setSchedules(workflowSchedules);
  };

  const loadActiveExecutions = () =&gt; {
    const allExecutions = workflowScheduler.getActiveExecutions();
    const workflowExecutions = allExecutions.filter((e) =&gt; e.workflowId === workflowId);
    setActiveExecutions(workflowExecutions);
  };

  const loadAnalytics = async (scheduleId: string) =&gt; {
    try {
      const analytics = await workflowScheduler.getScheduleAnalytics(scheduleId);
      setAnalytics(analytics);
    } catch (_error) {}
  };

  const handleCreateSchedule = async (values: any) =&gt; {
    setLoading(true);
    try {
      const scheduleConfig = {
        workflowId,
        name: values.name,
        description: values.description,
        enabled: values.enabled ?? true,
        scheduleType: values.scheduleType,
        configuration: buildScheduleConfiguration(values),
        timezone: values.timezone || 'UTC',
        retryPolicy: {
          enabled: values.retryEnabled ?? false,
          maxAttempts: values.maxAttempts ?? 3,
          backoffStrategy: values.backoffStrategy ?? 'exponential',
          initialDelayMs: values.initialDelay ?? 1000,
          maxDelayMs: values.maxDelay ?? 300000,
          retryConditions: values.retryConditions?.split(',').map((c: string) =&gt; c.trim()) ?? [],
        },
        concurrency: {
          maxConcurrent: values.maxConcurrent ?? 1,
          queueStrategy: values.queueStrategy ?? 'fifo',
          skipIfRunning: values.skipIfRunning ?? false,
          timeout: values.timeout ?? 3600000,
        },
        conditions: [],
        notifications: {
          onSuccess: [],
          onFailure: [],
          onSkip: [],
          onRetry: [],
        },
        metadata: {},
      };

      workflowScheduler.createSchedule(scheduleConfig);
      message.success('Schedule created successfully');
      loadSchedules();
      form.resetFields();
      setEditingSchedule(null);
    } catch (_error) {
      message.error('Failed to create schedule');
    } finally {
      setLoading(false);
    }
  };

  const buildScheduleConfiguration = (values: any) =&gt; {
    switch (values.scheduleType) {
      case 'cron':
        return {
          expression: values.cronExpression,
          description: values.cronDescription,
        };
      case 'interval':
        return {
          intervalMs: values.intervalMs,
          maxExecutions: values.maxExecutions,
          startTime: values.startTime?.toISOString(),
          endTime: values.endTime?.toISOString(),
        };
      case 'once':
        return {
          executeAt: values.executeAt?.toISOString(),
          delay: values.delay,
        };
      case 'event-driven':
        return {
          eventType: values.eventType,
          eventSource: values.eventSource,
          filters: [],
          debounceMs: values.debounceMs,
          maxEventsPerWindow: values.maxEventsPerWindow,
        };
      case 'conditional':
        return {
          condition: values.condition,
          checkIntervalMs: values.checkIntervalMs,
          maxChecks: values.maxChecks,
          dependencies: values.dependencies?.split(',').map((d: string) =&gt; d.trim()) ?? [],
        };
      default:
        return {
          eventType: '',
          eventSource: '',
          filters: [],
          debounceMs: 0,
          maxEventsPerWindow: 0,
        };
    }
  };

  const handleToggleSchedule = async (scheduleId: string, enabled: boolean) =&gt; {
    try {
      workflowScheduler.toggleSchedule(scheduleId, enabled);
      message.success(`Schedule ${enabled ? 'enabled' : 'disabled'}`);
      loadSchedules();
    } catch (_error) {
      message.error('Failed to toggle schedule');
    }
  };

  const handleDeleteSchedule = async (scheduleId: string) =&gt; {
    try {
      workflowScheduler.deleteSchedule(scheduleId);
      message.success('Schedule deleted');
      loadSchedules();
      if (selectedSchedule?.id === scheduleId) {
        setSelectedSchedule(null);
        setAnalytics(null);
      }
    } catch (_error) {
      message.error('Failed to delete schedule');
    }
  };

  const handleTriggerSchedule = async (scheduleId: string) =&gt; {
    try {
      await workflowScheduler.triggerSchedule(scheduleId, true);
      message.success('Schedule triggered successfully');
      loadActiveExecutions();
    } catch (_error) {
      message.error('Failed to trigger schedule');
    }
  };

  const handleCancelExecution = (executionId: string) =&gt; {
    try {
      workflowScheduler.cancelExecution(executionId);
      message.success('Execution cancelled');
      loadActiveExecutions();
    } catch (_error) {
      message.error('Failed to cancel execution');
    }
  };

  const renderScheduleForm = () =&gt; (
    &lt;Form
      form={form}
      layout=&quot;vertical&quot;
      onFinish={handleCreateSchedule}
      initialValues={{
        enabled: true,
        scheduleType: 'cron',
        timezone: 'UTC',
        retryEnabled: false,
        maxAttempts: 3,
        backoffStrategy: 'exponential',
        maxConcurrent: 1,
        queueStrategy: 'fifo',
        skipIfRunning: false,
      }}
    &gt;
      &lt;Form.Item
        name=&quot;name&quot;
        label=&quot;Schedule Name&quot;
        rules={[{ required: true, message: 'Please enter a name' }]}
      &gt;
        &lt;Input placeholder=&quot;Daily data sync&quot; /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
        &lt;TextArea placeholder=&quot;Optional description of what this schedule does&quot; rows={2} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;enabled&quot; label=&quot;Enabled&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;scheduleType&quot; label=&quot;Schedule Type&quot;&gt;
        &lt;Select onChange={() =&gt; form.resetFields(['configuration'])}&gt;
          &lt;Option value=&quot;cron&quot;&gt;Cron Expression&lt;/Option&gt;
          &lt;Option value=&quot;interval&quot;&gt;Fixed Interval&lt;/Option&gt;
          &lt;Option value=&quot;once&quot;&gt;One Time&lt;/Option&gt;
          &lt;Option value=&quot;event-driven&quot;&gt;Event Driven&lt;/Option&gt;
          &lt;Option value=&quot;conditional&quot;&gt;Conditional&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['scheduleType']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          const scheduleType = getFieldValue('scheduleType');
          return renderScheduleTypeFields(scheduleType);
        }}
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

      &lt;Form.Item name=&quot;timezone&quot; label=&quot;Timezone&quot;&gt;
        &lt;Select showSearch&gt;
          &lt;Option value=&quot;UTC&quot;&gt;UTC&lt;/Option&gt;
          &lt;Option value=&quot;America/New_York&quot;&gt;America/New_York&lt;/Option&gt;
          &lt;Option value=&quot;America/Los_Angeles&quot;&gt;America/Los_Angeles&lt;/Option&gt;
          &lt;Option value=&quot;Europe/London&quot;&gt;Europe/London&lt;/Option&gt;
          &lt;Option value=&quot;Asia/Tokyo&quot;&gt;Asia/Tokyo&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;maxConcurrent&quot; label=&quot;Max Concurrent Executions&quot;&gt;
        &lt;InputNumber min={1} max={10} /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;queueStrategy&quot; label=&quot;Queue Strategy&quot;&gt;
        &lt;Select&gt;
          &lt;Option value=&quot;fifo&quot;&gt;First In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;lifo&quot;&gt;Last In, First Out&lt;/Option&gt;
          &lt;Option value=&quot;priority&quot;&gt;Priority Based&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item name=&quot;skipIfRunning&quot; label=&quot;Skip If Already Running&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Divider&gt;Retry Policy&lt;/Divider&gt;

      &lt;Form.Item name=&quot;retryEnabled&quot; label=&quot;Enable Retries&quot; valuePropName=&quot;checked&quot;&gt;
        &lt;Switch /&gt;
      &lt;/Form.Item&gt;

      &lt;Form.Item dependencies={['retryEnabled']} noStyle&gt;
        {({ getFieldValue }) =&gt; {
          if (!getFieldValue('retryEnabled')) return null;
          return (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxAttempts&quot; label=&quot;Max Retry Attempts&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;backoffStrategy&quot; label=&quot;Backoff Strategy&quot;&gt;
                &lt;Select&gt;
                  &lt;Option value=&quot;linear&quot;&gt;Linear&lt;/Option&gt;
                  &lt;Option value=&quot;exponential&quot;&gt;Exponential&lt;/Option&gt;
                  &lt;Option value=&quot;fixed&quot;&gt;Fixed&lt;/Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;initialDelay&quot; label=&quot;Initial Delay (ms)&quot;&gt;
                &lt;InputNumber min={100} /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          );
        }}
      &lt;/Form.Item&gt;

      &lt;Form.Item&gt;
        &lt;Space&gt;
          &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
            {editingSchedule ? 'Update Schedule' : 'Create Schedule'}
          &lt;/Button&gt;
          &lt;Button
            onClick={() =&gt; {
              form.resetFields();
              setEditingSchedule(null);
            }}
          &gt;
            Cancel
          &lt;/Button&gt;
        &lt;/Space&gt;
      &lt;/Form.Item&gt;
    &lt;/Form&gt;
  );

  const renderScheduleTypeFields = (scheduleType: string) =&gt; {
    switch (scheduleType) {
      case 'cron':
        return (
          &lt;&gt;
            &lt;Form.Item
              name=&quot;cronExpression&quot;
              label={
                &lt;Space&gt;
                  Cron Expression
                  &lt;Tooltip title=&quot;Format: second minute hour day month weekday&quot;&gt;
                    &lt;InfoCircleOutlined /&gt;
                  &lt;/Tooltip&gt;
                &lt;/Space&gt;
              }
              rules={[{ required: true, message: 'Please enter a cron expression' }]}
            &gt;
              &lt;Input placeholder=&quot;0 0 9 * * *&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;cronDescription&quot; label=&quot;Description&quot;&gt;
              &lt;Input placeholder=&quot;Every day at 9:00 AM&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'interval':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;intervalMs&quot; label=&quot;Interval (milliseconds)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;300000&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;maxExecutions&quot; label=&quot;Max Executions (optional)&quot;&gt;
              &lt;InputNumber min={1} /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'once':
        return (
          &lt;Form.Item name=&quot;executeAt&quot; label=&quot;Execute At&quot;&gt;
            &lt;DatePicker showTime /&gt;
          &lt;/Form.Item&gt;
        );
      case 'event-driven':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;eventType&quot; label=&quot;Event Type&quot;&gt;
              &lt;Input placeholder=&quot;webhook&quot; /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;eventSource&quot; label=&quot;Event Source&quot;&gt;
              &lt;Input placeholder=&quot;api.example.com&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      case 'conditional':
        return (
          &lt;&gt;
            &lt;Form.Item name=&quot;condition&quot; label=&quot;JavaScript Condition&quot;&gt;
              &lt;TextArea placeholder=&quot;return data.status === 'ready'&quot; rows={3} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item name=&quot;checkIntervalMs&quot; label=&quot;Check Interval (ms)&quot;&gt;
              &lt;InputNumber min={1000} placeholder=&quot;60000&quot; /&gt;
            &lt;/Form.Item&gt;
          &lt;/&gt;
        );
      default:
        return null;
    }
  };

  const renderSchedulesList = () =&gt; (
    &lt;List
      dataSource={schedules}
      renderItem={(schedule) =&gt; (
        &lt;List.Item
          actions={[
            &lt;Switch
              checked={schedule.enabled}
              onChange={(checked) =&gt; handleToggleSchedule(schedule.id, checked)}
              checkedChildren=&quot;ON&quot;
              unCheckedChildren=&quot;OFF&quot;
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={() =&gt; handleTriggerSchedule(schedule.id)}
              disabled={!schedule.enabled}
            &gt;
              Trigger
            &lt;/Button&gt;,
            &lt;Button
              type=&quot;link&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setEditingSchedule(schedule.id);
                form.setFieldsValue({
                  name: schedule.name,
                  description: schedule.description,
                  enabled: schedule.enabled,
                  scheduleType: schedule.scheduleType,
                  // Add other fields based on schedule type
                });
              }}
            /&gt;,
            &lt;Button
              type=&quot;link&quot;
              danger
              icon={&lt;DeleteOutlined /&gt;}
              onClick={() =&gt; handleDeleteSchedule(schedule.id)}
            /&gt;,
          ]}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                {schedule.name}
                &lt;Tag color={schedule.enabled ? 'green' : 'default'}&gt;{schedule.scheduleType}&lt;/Tag&gt;
                {schedule.nextExecution &amp;&amp; (
                  &lt;Tag color=&quot;blue&quot;&gt;Next: {new Date(schedule.nextExecution).toLocaleString()}&lt;/Tag&gt;
                )}
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                {schedule.description}
                &lt;Space&gt;
                  &lt;Badge status={schedule.enabled ? 'success' : 'default'} /&gt;
                  {schedule.enabled ? 'Active' : 'Inactive'}
                  {schedule.lastExecuted &amp;&amp; (
                    &lt;span style={{ color: colors.gray[500] }}&gt;
                      Last: {new Date(schedule.lastExecuted).toLocaleString()}
                    &lt;/span&gt;
                  )}
                &lt;/Space&gt;
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No schedules configured' }}
    /&gt;
  );

  const renderExecutionsList = () =&gt; (
    &lt;List
      dataSource={activeExecutions}
      renderItem={(execution) =&gt; (
        &lt;List.Item
          actions={[
            execution.status === 'running' &amp;&amp; (
              &lt;Button
                type=&quot;link&quot;
                danger
                icon={&lt;PauseCircleOutlined /&gt;}
                onClick={() =&gt; handleCancelExecution(execution.id)}
              &gt;
                Cancel
              &lt;/Button&gt;
            ),
          ].filter(Boolean)}
        &gt;
          &lt;List.Item.Meta
            title={
              &lt;Space&gt;
                Execution {execution.id.split('_')[1]}
                &lt;Tag color={getExecutionStatusColor(execution.status)}&gt;{execution.status}&lt;/Tag&gt;
              &lt;/Space&gt;
            }
            description={
              &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                &lt;div&gt;Scheduled: {new Date(execution.scheduledAt).toLocaleString()}&lt;/div&gt;
                {execution.startedAt &amp;&amp; (
                  &lt;div&gt;Started: {new Date(execution.startedAt).toLocaleString()}&lt;/div&gt;
                )}
                {execution.duration &amp;&amp; (
                  &lt;div&gt;Duration: {(execution.duration / 1000).toFixed(2)}s&lt;/div&gt;
                )}
                {execution.error &amp;&amp; (
                  &lt;div style={{ color: colors.error[500] }}&gt;Error: {execution.error}&lt;/div&gt;
                )}
              &lt;/Space&gt;
            }
          /&gt;
        &lt;/List.Item&gt;
      )}
      locale={{ emptyText: 'No active executions' }}
    /&gt;
  );

  const renderAnalytics = () =&gt; {
    if (!analytics) return &lt;div&gt;Select a schedule to view analytics&lt;/div&gt;;

    return (
      &lt;Space direction=&quot;vertical&quot; size=&quot;large&quot; style={{ width: '100%' }}&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Statistic
            title=&quot;Success Rate&quot;
            value={analytics.successRate}
            precision={1}
            suffix=&quot;%&quot;
            valueStyle={{
              color: analytics.successRate &gt; 90 ? colors.success[600] : colors.warning[600],
            }}
          /&gt;
          &lt;Statistic title=&quot;Total Executions&quot; value={analytics.totalExecutions} /&gt;
          &lt;Statistic
            title=&quot;Average Duration&quot;
            value={analytics.averageDuration / 1000}
            precision={2}
            suffix=&quot;s&quot;
          /&gt;
          &lt;Statistic
            title=&quot;Failed Executions&quot;
            value={analytics.failedExecutions}
            valueStyle={{
              color: analytics.failedExecutions &gt; 0 ? colors.error[600] : colors.success[600],
            }}
          /&gt;
        &lt;/div&gt;

        {analytics.recommendations.length &gt; 0 &amp;&amp; (
          &lt;Card title=&quot;Recommendations&quot; size=&quot;small&quot;&gt;
            &lt;List
              dataSource={analytics.recommendations}
              renderItem={(rec) =&gt; (
                &lt;List.Item&gt;
                  &lt;List.Item.Meta
                    title={
                      &lt;Space&gt;
                        {rec.description}
                        &lt;Tag
                          color={
                            rec.priority === 'high'
                              ? 'red'
                              : rec.priority === 'medium'
                                ? 'orange'
                                : 'green'
                          }
                        &gt;
                          {rec.priority}
                        &lt;/Tag&gt;
                      &lt;/Space&gt;
                    }
                    description={
                      &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Implementation:&lt;/strong&gt; {rec.implementation}
                        &lt;/div&gt;
                        &lt;div&gt;
                          &lt;strong&gt;Impact:&lt;/strong&gt; {rec.estimatedImpact}
                        &lt;/div&gt;
                      &lt;/Space&gt;
                    }
                  /&gt;
                &lt;/List.Item&gt;
              )}
            /&gt;
          &lt;/Card&gt;
        )}
      &lt;/Space&gt;
    );
  };

  const getExecutionStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'running':
        return 'blue';
      case 'completed':
        return 'green';
      case 'failed':
        return 'red';
      case 'cancelled':
        return 'orange';
      case 'skipped':
        return 'default';
      default:
        return 'default';
    }
  };

  return (
    &lt;Modal
      title={
        &lt;Space&gt;
          &lt;ClockCircleOutlined /&gt;
          Workflow Scheduling
        &lt;/Space&gt;
      }
      open={visible}
      onCancel={onClose}
      width={1000}
      footer={null}
      className={cn('workflow-scheduling-panel')}
    &gt;
      &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;CalendarOutlined /&gt;
              Schedules ({schedules.length})
            &lt;/span&gt;
          }
          key=&quot;schedules&quot;
        &gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
            &lt;Card title=&quot;Create Schedule&quot; size=&quot;small&quot;&gt;
              {renderScheduleForm()}
            &lt;/Card&gt;
            &lt;Card title=&quot;Active Schedules&quot; size=&quot;small&quot;&gt;
              {renderSchedulesList()}
            &lt;/Card&gt;
          &lt;/div&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;ThunderboltOutlined /&gt;
              Executions ({activeExecutions.length})
            &lt;/span&gt;
          }
          key=&quot;executions&quot;
        &gt;
          {renderExecutionsList()}
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Analytics
            &lt;/span&gt;
          }
          key=&quot;analytics&quot;
        &gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;Select
              placeholder=&quot;Select a schedule to view analytics&quot;
              value={selectedSchedule?.id}
              onChange={(scheduleId) =&gt; {
                const schedule = schedules.find((s) =&gt; s.id === scheduleId);
                setSelectedSchedule(schedule || null);
              }}
              style={{ width: 300 }}
            &gt;
              {schedules.map((schedule) =&gt; (
                &lt;Option key={schedule.id} value={schedule.id}&gt;
                  {schedule.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/div&gt;
          {renderAnalytics()}
        &lt;/TabPane&gt;
      &lt;/Tabs&gt;
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/NodePropertyPanel.tsx (Line 1:1 - Line 547:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/nodepropertypanel/NodePropertyPanel.tsx (Line 11:1 - Line 557:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup77"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { SaveOutlined } from '@ant-design/icons';
import { message } from 'antd';
import type React from 'react';
import { useCallback, useEffect, useMemo, useState } from 'react';
import type { EnhancedDisplayOptions } from '@/app/node-extensions/components/ConditionalPropertyRenderer';
import { PropertyGroupRenderer } from '@/app/node-extensions/components/ConditionalPropertyRenderer';
import { CredentialApiService, nodeRegistry, useLeanWorkflowStore } from '@/core';
import type { INodeProperty } from '@/core/nodes/types';
import { useCredentialStore } from '@/core/stores/credentialStore';
import type {
  PropertyEvaluationContext,
  PropertyFormState,
  PropertyValue,
} from '@/core/types/dynamicProperties';
import DataVisualizationPanel from '@/design-system/components/DataVisualization/DataVisualizationPanel';
import CredentialModal from './CredentialModal';
import DynamicPropertyRenderer from './DynamicPropertyRenderer';
import EmailInputPanel from './EmailInputPanel';
import EmailOutputPanel from './EmailOutputPanel';

const credentialApiService = new CredentialApiService();

import { gmailEnhancedProperties } from '@/app/data/nodes/communication/gmail/enhanced-properties';
import { nodeMigrationService } from '@/core/utils/nodeVersioning';

interface NodeConfigurationPanelProps {
  isOpen: boolean;
  onClose: () =&gt; void;
  nodeId?: string;
}

const NodeConfigurationPanel: React.FC&lt;NodeConfigurationPanelProps&gt; = ({
  isOpen,
  onClose,
  nodeId,
}) =&gt; {
  const { getNodeById, updateNodeParameters, saveWorkflow, currentWorkflow, nodes, edges } =
    useLeanWorkflowStore();
  const { credentials, loadCredentials, credentialTypes } = useCredentialStore();

  const [leftWidth, setLeftWidth] = useState(700);
  const [isDragging, setIsDragging] = useState(false);
  const [isSaving, setIsSaving] = useState(false);
  const [formState, setFormState] = useState&lt;PropertyFormState&gt;({});
  const [isTestingNode, setIsTestingNode] = useState(false);
  const [testResults, setTestResults] = useState&lt;any&gt;(null);
  const [selectedEmail, setSelectedEmail] = useState&lt;any&gt;(null);
  const [isCredentialModalOpen, setIsCredentialModalOpen] = useState(false);
  const [currentCredentialType, setCurrentCredentialType] = useState('');

  const middleWidth = 550;

  const currentNode = useMemo(() =&gt; {
    if (!nodeId) return null;
    return getNodeById(nodeId);
  }, [nodeId, getNodeById]);

  const nodeDefinition = useMemo(() =&gt; {
    if (!currentNode) return null;
    return nodeRegistry.getNodeTypeDescription(currentNode.type);
  }, [currentNode]);

  // Get enhanced node type from node data (Gmail-specific)
  const enhancedNodeType = useMemo(() =&gt; {
    if (!currentNode) return null;

    // For registry-based system, derive node type from node.type
    if (currentNode.type === 'gmail-enhanced' || currentNode.type?.includes('gmail')) {
      return { id: 'gmail-enhanced' };
    }
    if (currentNode.type === 'ai-agent') {
      return { id: 'ai-agent' };
    }

    return null;
  }, [currentNode]);

  // Get connected input nodes for display
  const connectedInputNodes = useMemo(() =&gt; {
    if (!currentNode || !Array.isArray(nodes) || !Array.isArray(edges)) return [];
    return edges
      .filter((edge) =&gt; edge.target === currentNode.id)
      .map((edge) =&gt; nodes.find((node) =&gt; node.id === edge.source))
      .filter(Boolean);
  }, [currentNode, edges, nodes]);

  // Extract input data from connected nodes
  const inputData = useMemo(() =&gt; {
    const data: any = {};
    connectedInputNodes.forEach((node: any, index) =&gt; {
      if (node?.parameters?.outputData) {
        data[`input_${index}`] = node.parameters.outputData;
      }
    });
    return data;
  }, [connectedInputNodes]);

  useEffect(() =&gt; {
    if (currentNode) {
      setFormState(currentNode.parameters || {});
    }
  }, [currentNode]);

  // Auto-select first email when Gmail test results come in
  useEffect(() =&gt; {
    if (
      testResults?.success &amp;&amp;
      (enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail')) &amp;&amp;
      testResults?.data &amp;&amp;
      Array.isArray(testResults.data) &amp;&amp;
      testResults.data.length &gt; 0
    ) {
      setSelectedEmail(testResults.data[0]);
    }
  }, [testResults, enhancedNodeType?.id, currentNode?.type]);

  // Load credentials on mount
  useEffect(() =&gt; {
    loadCredentials();
  }, [loadCredentials]);

  // Debug modal state changes
  useEffect(() =&gt; {}, []);

  const handleParameterChange = useCallback(
    (parameterName: string, value: PropertyValue) =&gt; {
      const newFormState = { ...formState, [parameterName]: value };
      setFormState(newFormState);
      if (currentNode) {
        updateNodeParameters(currentNode.id, newFormState);
      }
    },
    [formState, currentNode, updateNodeParameters]
  );

  // Gmail-specific test functionality
  const handleTestNode = useCallback(async () =&gt; {
    if (!currentNode || !nodeDefinition) return;

    setIsTestingNode(true);
    setTestResults(null);

    try {
      // Check if this is a Gmail enhanced node
      if (currentNode.type?.includes('gmail') || enhancedNodeType?.id === 'gmail-enhanced') {
        // Use the registry test method for Gmail trigger
        const result = await nodeRegistry.testNodeType(
          currentNode.type,
          formState,
          currentNode.credentials || {}
        );

        setTestResults({
          success: result.success,
          message: result.message || 'Gmail test completed',
          data: result.data,
        });
      } else {
        // Generic node testing
        const result = await nodeRegistry.testNodeType(
          currentNode.type,
          formState,
          currentNode.credentials || {}
        );

        setTestResults({
          success: result.success,
          message: result.message || 'Test completed',
          data: result.data,
        });
      }
    } catch (error: any) {
      setTestResults({
        success: false,
        message: error.message || 'Test failed',
      });
    } finally {
      setIsTestingNode(false);
    }
  }, [currentNode, nodeDefinition, formState, enhancedNodeType]);

  // Credential management handlers
  const handleCreateCredential = useCallback((type: string) =&gt; {
    setCurrentCredentialType(type);
    setIsCredentialModalOpen(true);
  }, []);

  const handleCredentialSelect = useCallback(
    (credential: any) =&gt; {
      // Handle credential selection
      const credentialId = credential.id;
      handleParameterChange('credential', credentialId);
    },
    [handleParameterChange]
  );

  const handleCredentialChange = useCallback(
    (credentialId: string) =&gt; {
      handleParameterChange('credential', credentialId);
    },
    [handleParameterChange]
  );

  const handleSaveCredential = useCallback(
    async (credentialData: any) =&gt; {
      try {
        await credentialApiService.createCredential(credentialData);
        await loadCredentials();
        setIsCredentialModalOpen(false);
        message.success('Credential saved successfully');
      } catch (error: any) {
        message.error(`Failed to save credential: ${error.message}`);
      }
    },
    [loadCredentials]
  );

  // Create evaluation context for dynamic properties
  const evaluationContext: PropertyEvaluationContext = useMemo(
    () =&gt; ({
      formState,
      nodeData: currentNode ? { ...currentNode } : undefined,
      credentials: credentials as Array&lt;Record&lt;string, unknown&gt;&gt;,
      credentialTypes: credentialTypes as unknown as Array&lt;Record&lt;string, unknown&gt;&gt;,
      onCreateCredential: handleCreateCredential,
      onCredentialSelect: handleCredentialSelect,
      onCredentialChange: handleCredentialChange,
    }),
    [
      formState,
      currentNode,
      credentials,
      credentialTypes,
      handleCreateCredential,
      handleCredentialSelect,
      handleCredentialChange,
    ]
  );

  const handleMouseDown = useCallback((e: React.MouseEvent) =&gt; {
    e.preventDefault();
    setIsDragging(true);
  }, []);

  const handleMouseUp = useCallback(() =&gt; {
    setIsDragging(false);
  }, []);

  const handleMouseMove = useCallback(
    (e: MouseEvent) =&gt; {
      if (!isDragging) return;
      const containerWidth = window.innerWidth;
      const minLeftWidth = 200;
      const maxLeftWidth = containerWidth - middleWidth - 200;
      setLeftWidth((prevWidth) =&gt;
        Math.max(minLeftWidth, Math.min(maxLeftWidth, prevWidth + e.movementX))
      );
    },
    [isDragging]
  );

  useEffect(() =&gt; {
    if (isDragging) {
      document.body.style.cursor = 'col-resize';
      document.body.style.userSelect = 'none';
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
      return () =&gt; {
        document.body.style.cursor = '';
        document.body.style.userSelect = '';
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };
    }
  }, [isDragging, handleMouseMove, handleMouseUp]);

  const handleSaveWorkflow = useCallback(async () =&gt; {
    if (!currentWorkflow) {
      message.error('No workflow to save');
      return;
    }
    setIsSaving(true);
    try {
      await saveWorkflow();
      message.success('Workflow saved successfully');
    } catch (error: any) {
      message.error(`Failed to save workflow: ${error.message || 'Unknown error'}`);
    } finally {
      setIsSaving(false);
    }
  }, [currentWorkflow, saveWorkflow]);

  // Enhanced property resolution with Transform node support
  const registryProperties = useMemo(() =&gt; {
    // For enhanced nodes like Gmail, get properties from enhanced node type
    if (enhancedNodeType?.id === 'gmail-enhanced') {
      // Use directly imported Gmail enhanced properties for comprehensive form
      return gmailEnhancedProperties;
    }

    // For Transform nodes, check if migration is needed and use enhanced version
    if (currentNode?.type === 'transform') {
      try {
        const currentVersion = currentNode.typeVersion || currentNode.version || 1;
        const latestVersion = nodeMigrationService.getLatestVersion('transform');

        if (currentVersion &lt; latestVersion) {
          // Migrate the node instance
          const migratedNode = nodeMigrationService.migrateNodeInstance(currentNode, latestVersion);

          // Update the node with migrated parameters
          if (migratedNode.parameters !== currentNode.parameters) {
            updateNodeParameters(currentNode.id, migratedNode.parameters);
          }
        }

        // Get the enhanced transform node properties (synchronously)
        const enhancedTransformNode = nodeRegistry.getEnhancedNodeTypeSync('transform');
        if (enhancedTransformNode?.configuration?.properties) {
          return enhancedTransformNode.configuration.properties;
        }
      } catch (_error) {}
    }

    if (!nodeDefinition?.properties) return [];
    return nodeDefinition.properties;
  }, [nodeDefinition, enhancedNodeType, currentNode, updateNodeParameters]);

  if (!isOpen || !currentNode || !nodeDefinition) {
    return null;
  }

  const rightWidth = `calc(100vw - ${leftWidth}px - ${middleWidth}px)`;

  return (
    &lt;div className=&quot;fixed inset-0 z-50 flex flex-col bg-gray-900&quot;&gt;
      &lt;div className=&quot;w-full p-4 border-b border-gray-700 bg-gray-900 flex items-center justify-between&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
          &lt;button
            onClick={onClose}
            className=&quot;text-gray-400 hover:text-white transition-colors flex items-center space-x-2&quot;
          &gt;
            &lt;span&gt;←&lt;/span&gt;
            &lt;span&gt;Back to canvas&lt;/span&gt;
          &lt;/button&gt;
          &lt;div className=&quot;flex items-center space-x-2 text-sm text-gray-400&quot;&gt;
            &lt;span&gt;/&lt;/span&gt;
            &lt;span&gt;{nodeDefinition.displayName}&lt;/span&gt;
            &lt;span className=&quot;text-xs px-2 py-1 bg-gray-700 rounded&quot;&gt;{currentNode.type}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
          &lt;button
            onClick={handleSaveWorkflow}
            disabled={isSaving || !currentWorkflow}
            className=&quot;flex items-center space-x-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-sm rounded transition-colors&quot;
            title=&quot;Save workflow without closing modal&quot;
          &gt;
            &lt;SaveOutlined className={isSaving ? 'animate-spin' : ''} /&gt;
            &lt;span&gt;{isSaving ? 'Saving...' : 'Save'}&lt;/span&gt;
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex flex-1 overflow-hidden&quot;&gt;
        {/* Left Column: Input Data */}
        &lt;div
          className=&quot;bg-gray-900 border-r border-gray-600 flex flex-col&quot;
          style={{ width: `${leftWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
              INPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {(enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail')) &amp;&amp;
            testResults?.data &amp;&amp;
            Array.isArray(testResults.data) &amp;&amp;
            testResults.data.length &gt; 0 ? (
              &lt;EmailInputPanel
                emails={testResults.data}
                selectedEmailId={selectedEmail?.id}
                onEmailSelect={setSelectedEmail}
              /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent input data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'condition' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Condition input data would appear here&lt;/div&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={inputData}
                title=&quot;Input Data&quot;
                description=&quot;Data from connected nodes&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Middle Column: Parameters &amp; Settings */}
        &lt;div
          className=&quot;bg-gray-800 flex flex-col border-l border-r border-gray-600&quot;
          style={{ width: `${middleWidth}px`, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-700 flex items-center justify-between flex-shrink-0&quot;&gt;
            &lt;div
              className=&quot;cursor-col-resize p-2 hover:bg-gray-600 rounded mr-2 flex items-center&quot;
              onMouseDown={handleMouseDown}
              title=&quot;Drag to resize column width&quot;
            &gt;
              &lt;div className=&quot;text-gray-300 text-xs font-mono&quot;&gt;⋮⋮&lt;/div&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;h2 className=&quot;text-lg font-semibold text-white&quot;&gt;{nodeDefinition.displayName}&lt;/h2&gt;
            &lt;/div&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button
                onClick={handleTestNode}
                disabled={isTestingNode}
                className={`px-3 py-1 rounded text-sm transition-colors ${
                  isTestingNode
                    ? 'bg-yellow-600 text-white cursor-wait'
                    : 'bg-green-600 hover:bg-green-700 text-white'
                }`}
              &gt;
                {isTestingNode ? '⏳ Testing...' : '🧪 Test step'}
              &lt;/button&gt;

              {/* Debug: Test credential modal button */}
              &lt;button
                onClick={() =&gt; {
                  handleCreateCredential('gmailOAuth2');
                }}
                className=&quot;px-2 py-1 rounded text-xs bg-purple-600 hover:bg-purple-700 text-white transition-colors&quot;
              &gt;
                🔧 Test Modal
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 p-6 overflow-y-auto&quot;&gt;
            {/* Use enhanced property rendering for Transform nodes and other enhanced types */}
            {currentNode?.type === 'transform' || enhancedNodeType?.id ? (
              &lt;PropertyGroupRenderer
                properties={
                  registryProperties as Array&lt;
                    INodeProperty &amp; { displayOptions?: EnhancedDisplayOptions }
                  &gt;
                }
                values={formState}
                onChange={handleParameterChange}
                evaluationContext={{
                  $json: inputData,
                  $node: {},
                  $vars: {},
                  $parameters: formState,
                }}
                context={evaluationContext}
              /&gt;
            ) : (
              &lt;DynamicPropertyRenderer
                properties={registryProperties as INodeProperty[]}
                formState={formState}
                onChange={handleParameterChange}
                context={evaluationContext}
              /&gt;
            )}

            {/* Display test results */}
            {testResults &amp;&amp; (
              &lt;div className=&quot;mt-6 p-4 rounded border-l-4 border-l-blue-500 bg-gray-700&quot;&gt;
                &lt;h4 className=&quot;text-white font-medium mb-2&quot;&gt;Test Results&lt;/h4&gt;
                &lt;div
                  className={`text-sm ${testResults.success ? 'text-green-400' : 'text-red-400'}`}
                &gt;
                  {testResults.message}
                &lt;/div&gt;
                {testResults.data &amp;&amp; (
                  &lt;div className=&quot;mt-2 text-xs text-gray-300&quot;&gt;
                    {Array.isArray(testResults.data)
                      ? `Found ${testResults.data.length} items`
                      : 'Data received'}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Right Column: Output Data */}
        &lt;div
          className=&quot;bg-gray-900 border-l border-gray-600 flex flex-col&quot;
          style={{ width: rightWidth, height: 'calc(100vh - 80px)' }}
        &gt;
          &lt;div className=&quot;p-4 border-b border-gray-600 bg-gray-800 flex-shrink-0&quot;&gt;
            &lt;h3 className=&quot;text-sm font-medium text-gray-100 mb-3 flex items-center&quot;&gt;
              &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
              OUTPUT
            &lt;/h3&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 overflow-y-auto p-4&quot;&gt;
            {/* Conditional rendering based on node type */}
            {enhancedNodeType?.id === 'gmail-enhanced' || currentNode?.type?.includes('gmail') ? (
              &lt;EmailOutputPanel selectedEmail={selectedEmail} /&gt;
            ) : enhancedNodeType?.id === 'ai-agent' || currentNode?.type === 'ai-agent' ? (
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;AI Agent output data would appear here&lt;/div&gt;
            ) : currentNode?.type === 'transform' ? (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Transform Output&quot;
                description=&quot;Transformed data output&quot;
              /&gt;
            ) : (
              &lt;DataVisualizationPanel
                data={testResults?.data}
                title=&quot;Output Data&quot;
                description=&quot;Output from node execution&quot;
              /&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Credential Modal */}
      &lt;CredentialModal
        isOpen={isCredentialModalOpen}
        onClose={() =&gt; {
          setIsCredentialModalOpen(false);
        }}
        credentialType={currentCredentialType}
        onSave={handleSaveCredential}
      /&gt;

      {/* Debug info - commented out for production */}
      {/* {console.log('🔧 Modal state debug:', {
        isCredentialModalOpen,
        currentCredentialType,
        credentials: credentials?.length
      })} */}
    &lt;/div&gt;
  );
};

export default NodeConfigurationPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionToolbar.tsx (Line 1:1 - Line 283:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executiontoolbar/ExecutionToolbar.tsx (Line 2:1 - Line 284:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup79"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */
// Execution Toolbar Component - Controls for running workflows

import {
  BugOutlined,
  DownOutlined,
  ExportOutlined,
  HistoryOutlined,
  PlayCircleOutlined,
  SaveOutlined,
  SettingOutlined,
  StopOutlined,
} from '@ant-design/icons';
import { Badge, Button, Dropdown, message, Space } from 'antd';
import type React from 'react';
import { useState } from 'react';
import type { Edge, Node } from 'reactflow';
import { WorkflowApiService } from '@/core';
import type { WorkflowExecution } from '@/core/schemas';
import { exportWorkflowToBackend, validateWorkflowForExport } from '@/core/utils/workflowExporter';
import { ExecutionHistory } from '../ExecutionHistory/ExecutionHistory';
import { WorkflowTester } from '../WorkflowTester/WorkflowTester';

const workflowApiService = new WorkflowApiService();

interface ExecutionToolbarProps {
  nodes: Node[];
  edges: Edge[];
  currentExecution?: WorkflowExecution | null;
  onExecutionStart?: (executionId: string) =&gt; void;
  onExecutionStop?: () =&gt; void;
}

export const ExecutionToolbar: React.FC&lt;ExecutionToolbarProps&gt; = ({
  nodes,
  edges,
  currentExecution,
  onExecutionStart,
  onExecutionStop,
}) =&gt; {
  const [testing, setTesting] = useState(false);
  const [showTester, setShowTester] = useState(false);
  const [showHistory, setShowHistory] = useState(false);
  const [, setSaving] = useState(false);

  const isRunning = currentExecution?.status === 'running';
  const canRun = nodes.length &gt; 0 &amp;&amp; !isRunning;

  const handleTest = () =&gt; {
    setShowTester(true);
  };

  const handleRun = async () =&gt; {
    if (!canRun) return;

    // Validate workflow first
    const validation = validateWorkflowForExport(nodes, edges);
    if (!validation.isValid) {
      message.error(`Cannot run workflow: ${validation.errors.join(', ')}`);
      return;
    }

    if (validation.warnings.length &gt; 0) {
      message.warning(`Warnings: ${validation.warnings.join(', ')}`);
    }

    try {
      setTesting(true);
      const workflowJson = exportWorkflowToBackend(nodes, edges);

      const execution = await workflowApiService.executeWorkflow({
        workflow: workflowJson,
        triggerData: {},
        options: {
          timeout: 600000, // 10 minutes
        },
      });

      message.success('Workflow execution started');
      onExecutionStart?.(execution.id);
    } catch (error: any) {
      message.error(`Failed to start workflow: ${error.message}`);
    } finally {
      setTesting(false);
    }
  };

  const handleStop = async () =&gt; {
    if (!currentExecution) return;

    try {
      await workflowApiService.stopExecution(currentExecution.id);
      message.success('Workflow execution stopped');
      onExecutionStop?.();
    } catch (error: any) {
      message.error(`Failed to stop workflow: ${error.message}`);
    }
  };

  const handleSave = async () =&gt; {
    if (nodes.length === 0) {
      message.warning('Cannot save empty workflow');
      return;
    }

    try {
      setSaving(true);
      const workflowJson = exportWorkflowToBackend(nodes, edges);

      await workflowApiService.createWorkflow({
        name: `Workflow ${new Date().toLocaleDateString()}`,
        description: 'Saved from workflow editor',
        nodes: workflowJson.nodes.map((node) =&gt; ({
          id: node.id,
          type: node.type,
          position: { x: node.position[0], y: node.position[1] },
          data: {
            label: node.name,
            parameters: node.parameters,
            credentials:
              typeof node.credentials === 'object' &amp;&amp; node.credentials
                ? Object.keys(node.credentials)[0] || undefined
                : (node.credentials as string | undefined),
            disabled: node.disabled,
            notes: node.notes,
          },
        })),
        edges: [], // Convert connections to edges if needed
        version: 1,
        isActive: true,
        tags: ['editor'],
      });

      message.success('Workflow saved successfully');
    } catch (error: any) {
      message.error(`Failed to save workflow: ${error.message}`);
    } finally {
      setSaving(false);
    }
  };

  const handleExport = () =&gt; {
    if (nodes.length === 0) {
      message.warning('Cannot export empty workflow');
      return;
    }

    try {
      const workflowJson = exportWorkflowToBackend(nodes, edges);
      const blob = new Blob([JSON.stringify(workflowJson, null, 2)], {
        type: 'application/json',
      });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `workflow-${Date.now()}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      message.success('Workflow exported successfully');
    } catch (error: any) {
      message.error(`Failed to export workflow: ${error.message}`);
    }
  };

  const runMenuItems = [
    {
      key: 'run',
      label: 'Run Workflow',
      icon: &lt;PlayCircleOutlined /&gt;,
      onClick: handleRun,
      disabled: !canRun,
    },
    {
      key: 'test',
      label: 'Test Workflow',
      icon: &lt;BugOutlined /&gt;,
      onClick: handleTest,
    },
  ];

  const moreMenuItems = [
    {
      key: 'save',
      label: 'Save Workflow',
      icon: &lt;SaveOutlined /&gt;,
      onClick: handleSave,
    },
    {
      key: 'export',
      label: 'Export JSON',
      icon: &lt;ExportOutlined /&gt;,
      onClick: handleExport,
    },
    {
      key: 'history',
      label: 'Execution History',
      icon: &lt;HistoryOutlined /&gt;,
      onClick: () =&gt; setShowHistory(true),
    },
  ];

  return (
    &lt;div className=&quot;execution-toolbar&quot;&gt;
      &lt;div className=&quot;bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between&quot;&gt;
        &lt;Space&gt;
          {/* Primary execution controls */}
          {isRunning ? (
            &lt;Button danger icon={&lt;StopOutlined /&gt;} onClick={handleStop} size=&quot;small&quot;&gt;
              Stop
            &lt;/Button&gt;
          ) : (
            &lt;Dropdown
              menu={{ items: runMenuItems }}
              trigger={['click']}
              disabled={nodes.length === 0}
            &gt;
              &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} loading={testing} size=&quot;small&quot;&gt;
                Run &lt;DownOutlined /&gt;
              &lt;/Button&gt;
            &lt;/Dropdown&gt;
          )}

          {/* Test button */}
          &lt;Button
            icon={&lt;BugOutlined /&gt;}
            onClick={handleTest}
            disabled={nodes.length === 0}
            size=&quot;small&quot;
          &gt;
            Test
          &lt;/Button&gt;

          {/* Execution status */}
          {currentExecution &amp;&amp; (
            &lt;Badge
              status={
                currentExecution.status === 'running'
                  ? 'processing'
                  : currentExecution.status === 'completed'
                    ? 'success'
                    : currentExecution.status === 'failed'
                      ? 'error'
                      : 'default'
              }
              text={
                &lt;span className=&quot;text-sm&quot;&gt;
                  {currentExecution.status === 'running'
                    ? `Running (${(currentExecution as any).progress?.completedNodes?.length || 0}/${(currentExecution as any).progress?.totalNodes || 0})`
                    : `${currentExecution.status} - ${Math.round((currentExecution.duration || 0) / 1000)}s`}
                &lt;/span&gt;
              }
            /&gt;
          )}
        &lt;/Space&gt;

        &lt;Space&gt;
          {/* Workflow info */}
          &lt;span className=&quot;text-sm text-gray-500&quot;&gt;
            {nodes.length} nodes • {edges.length} connections
          &lt;/span&gt;

          {/* More actions */}
          &lt;Dropdown menu={{ items: moreMenuItems }} trigger={['click']}&gt;
            &lt;Button icon={&lt;SettingOutlined /&gt;} size=&quot;small&quot;&gt;
              &lt;DownOutlined /&gt;
            &lt;/Button&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      &lt;/div&gt;

      {/* Workflow Tester Modal */}
      {showTester &amp;&amp; (
        &lt;WorkflowTester nodes={nodes} edges={edges} onClose={() =&gt; setShowTester(false)} /&gt;
      )}

      {/* Execution History Modal */}
      {showHistory &amp;&amp; &lt;ExecutionHistory onClose={() =&gt; setShowHistory(false)} /&gt;}
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ExecutionPanel.tsx (Line 1:1 - Line 395:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/executionpanel/ExecutionPanel.tsx (Line 5:1 - Line 399:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup81"><code class="language-tsx text-sm text-gray-800">/**
 * Execution Panel
 *
 * Real-time execution monitoring panel inspired by SIM's copilot panel
 * and n8n's execution monitoring. Provides execution console, variables,
 * and performance metrics in a collapsible side panel.
 */

import React, { useEffect, useState } from 'react';
import { useEnhancedExecutionStore } from '@/core/stores/enhancedExecutionStore';
import { cn } from '@/design-system/utils';

interface ExecutionPanelProps {
  isVisible: boolean;
  onToggle: () =&gt; void;
  position?: 'right' | 'bottom';
}

export const ExecutionPanel: React.FC&lt;ExecutionPanelProps&gt; = ({
  isVisible,
  onToggle,
  position = 'right',
}) =&gt; {
  const [activeTab, setActiveTab] = useState&lt;'console' | 'variables' | 'metrics' | 'history'&gt;(
    'console'
  );
  const [autoScroll, setAutoScroll] = useState(true);

  const {
    currentExecution,
    progress,
    nodeStates,
    performanceMetrics,
    executionHistory,
    isConnected,
    lastUpdateTimestamp,
    debugMode,
    setDebugMode,
  } = useEnhancedExecutionStore();

  // Auto-scroll to bottom for console logs
  const consoleRef = React.useRef&lt;HTMLDivElement&gt;(null);

  useEffect(() =&gt; {
    if (autoScroll &amp;&amp; consoleRef.current) {
      consoleRef.current.scrollTop = consoleRef.current.scrollHeight;
    }
  }, [autoScroll]);

  // Get all logs from all nodes
  const getAllLogs = () =&gt; {
    const logs: Array&lt;{
      nodeId: string;
      level: string;
      message: string;
      timestamp: string;
    }&gt; = [];

    nodeStates.forEach((state, nodeId) =&gt; {
      if (state.debugInfo?.logs) {
        state.debugInfo.logs.forEach((log) =&gt; {
          logs.push({
            nodeId,
            ...log,
          });
        });
      }
    });

    return logs.sort((a, b) =&gt; new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());
  };

  // Get current execution variables
  const getExecutionVariables = () =&gt; {
    const variables: Record&lt;string, any&gt; = {};

    nodeStates.forEach((state, nodeId) =&gt; {
      if (state.outputData) {
        variables[`${nodeId}_output`] = state.outputData;
      }
      if (state.debugInfo?.watchedVariables) {
        Object.entries(state.debugInfo.watchedVariables).forEach(([key, value]) =&gt; {
          variables[`${nodeId}_${key}`] = value;
        });
      }
    });

    return variables;
  };

  const renderProgressBar = () =&gt; {
    if (!progress) return null;

    const { progressPercentage, completedNodes, totalNodes, failedNodes } = progress;

    return (
      &lt;div className=&quot;mb-4 p-3 bg-gray-800 rounded-lg&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-2&quot;&gt;
          &lt;span className=&quot;text-sm font-medium text-gray-300&quot;&gt;Execution Progress&lt;/span&gt;
          &lt;span className=&quot;text-sm text-gray-400&quot;&gt;
            {completedNodes}/{totalNodes} nodes
          &lt;/span&gt;
        &lt;/div&gt;

        &lt;div className=&quot;w-full bg-gray-700 rounded-full h-2&quot;&gt;
          &lt;div
            className={cn(
              'h-2 rounded-full transition-all duration-300',
              failedNodes &gt; 0 ? 'bg-red-500' : 'bg-blue-500'
            )}
            style={{ width: `${progressPercentage}%` }}
          /&gt;
        &lt;/div&gt;

        {failedNodes &gt; 0 &amp;&amp; (
          &lt;div className=&quot;mt-2 text-xs text-red-400&quot;&gt;{failedNodes} node(s) failed&lt;/div&gt;
        )}
      &lt;/div&gt;
    );
  };

  const renderConsoleTab = () =&gt; {
    const logs = getAllLogs();

    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;div className=&quot;flex justify-between items-center mb-2&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Console&lt;/h3&gt;
          &lt;div className=&quot;flex gap-2&quot;&gt;
            &lt;button
              onClick={() =&gt; setAutoScroll(!autoScroll)}
              className={cn(
                'text-xs px-2 py-1 rounded',
                autoScroll ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300'
              )}
            &gt;
              Auto-scroll
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; {
                // Clear logs implementation
              }}
              className=&quot;text-xs px-2 py-1 rounded bg-gray-700 text-gray-300 hover:bg-gray-600&quot;
            &gt;
              Clear
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div
          ref={consoleRef}
          className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto text-xs font-mono&quot;
        &gt;
          {logs.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No logs yet. Execute a workflow to see real-time logs.
            &lt;/div&gt;
          ) : (
            logs.map((log, index) =&gt; (
              &lt;div
                key={index}
                className={cn(
                  'mb-1 p-1 rounded',
                  log.level === 'error' &amp;&amp; 'bg-red-900 text-red-200',
                  log.level === 'warn' &amp;&amp; 'bg-yellow-900 text-yellow-200',
                  log.level === 'info' &amp;&amp; 'text-gray-300',
                  log.level === 'debug' &amp;&amp; 'text-gray-500'
                )}
              &gt;
                &lt;span className=&quot;text-gray-500&quot;&gt;
                  [{new Date(log.timestamp).toLocaleTimeString()}]
                &lt;/span&gt;
                &lt;span className=&quot;ml-2 text-blue-400&quot;&gt;[{log.nodeId}]&lt;/span&gt;
                &lt;span className=&quot;ml-2&quot;&gt;{log.message}&lt;/span&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderVariablesTab = () =&gt; {
    const variables = getExecutionVariables();

    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Variables&lt;/h3&gt;
        &lt;div className=&quot;flex-1 bg-gray-900 rounded border border-gray-700 p-2 overflow-y-auto&quot;&gt;
          {Object.keys(variables).length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;
              No variables available. Execute nodes to see output data.
            &lt;/div&gt;
          ) : (
            Object.entries(variables).map(([key, value]) =&gt; (
              &lt;div key={key} className=&quot;mb-3 p-2 bg-gray-800 rounded&quot;&gt;
                &lt;div className=&quot;text-blue-400 text-xs font-mono mb-1&quot;&gt;{key}&lt;/div&gt;
                &lt;div className=&quot;text-gray-300 text-xs break-all&quot;&gt;
                  &lt;pre className=&quot;whitespace-pre-wrap&quot;&gt;
                    {typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value)}
                  &lt;/pre&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderMetricsTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Performance Metrics&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-3&quot;&gt;
          {/* Execution time metrics */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Node Execution Times&lt;/h4&gt;
            {performanceMetrics.nodeExecutionTimes.size === 0 ? (
              &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;No timing data available&lt;/div&gt;
            ) : (
              &lt;div className=&quot;space-y-1&quot;&gt;
                {Array.from(performanceMetrics.nodeExecutionTimes.entries()).map(
                  ([nodeId, time]) =&gt; (
                    &lt;div key={nodeId} className=&quot;flex justify-between text-xs&quot;&gt;
                      &lt;span className=&quot;text-blue-400&quot;&gt;{nodeId}&lt;/span&gt;
                      &lt;span className=&quot;text-gray-300&quot;&gt;
                        {time &lt; 1000 ? `${time}ms` : `${(time / 1000).toFixed(2)}s`}
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )
                )}
              &lt;/div&gt;
            )}
          &lt;/div&gt;

          {/* Resource usage */}
          &lt;div className=&quot;bg-gray-900 rounded border border-gray-700 p-3&quot;&gt;
            &lt;h4 className=&quot;text-xs font-semibold text-gray-400 mb-2&quot;&gt;Resource Usage&lt;/h4&gt;
            &lt;div className=&quot;space-y-1 text-xs&quot;&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Peak Memory:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.peakMemory
                    ? `${(performanceMetrics.resourceUsage.peakMemory / 1024 / 1024).toFixed(1)} MB`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;CPU Time:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.totalCpuTime
                    ? `${performanceMetrics.resourceUsage.totalCpuTime}ms`
                    : 'N/A'}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex justify-between&quot;&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;Network Requests:&lt;/span&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;
                  {performanceMetrics.resourceUsage.networkRequests || 0}
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  const renderHistoryTab = () =&gt; {
    return (
      &lt;div className=&quot;flex flex-col h-full&quot;&gt;
        &lt;h3 className=&quot;text-sm font-medium text-gray-300 mb-2&quot;&gt;Execution History&lt;/h3&gt;
        &lt;div className=&quot;flex-1 space-y-2 overflow-y-auto&quot;&gt;
          {executionHistory.length === 0 ? (
            &lt;div className=&quot;text-gray-500 text-center py-4&quot;&gt;No execution history&lt;/div&gt;
          ) : (
            executionHistory.slice(0, 10).map((execution) =&gt; (
              &lt;div
                key={execution.id}
                className=&quot;bg-gray-900 rounded border border-gray-700 p-2 hover:bg-gray-800 cursor-pointer&quot;
              &gt;
                &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                  &lt;div className=&quot;flex-1&quot;&gt;
                    &lt;div
                      className={cn(
                        'text-xs font-medium',
                        execution.status === 'completed' &amp;&amp; 'text-green-400',
                        execution.status === 'failed' &amp;&amp; 'text-red-400',
                        execution.status === 'running' &amp;&amp; 'text-blue-400'
                      )}
                    &gt;
                      {execution.status.toUpperCase()}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-400 mt-1&quot;&gt;
                      {execution.startTime &amp;&amp; new Date(execution.startTime).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                    {execution.duration &amp;&amp; `${(execution.duration / 1000).toFixed(1)}s`}
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ))
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!isVisible) {
    return (
      &lt;button
        onClick={onToggle}
        className={cn(
          'fixed z-40 bg-gray-800 text-white p-2 rounded-l shadow-lg hover:bg-gray-700 transition-colors',
          position === 'right'
            ? 'right-0 top-1/2 -translate-y-1/2'
            : 'bottom-0 left-1/2 -translate-x-1/2 rounded-t'
        )}
        title=&quot;Show execution panel&quot;
      &gt;
        {position === 'right' ? '←' : '↑'} Execution
      &lt;/button&gt;
    );
  }

  return (
    &lt;div
      className={cn(
        'fixed z-30 bg-gray-800 border-l border-gray-700 shadow-xl',
        position === 'right' ? 'right-0 top-0 h-full w-80' : 'bottom-0 left-0 right-0 h-80 border-t'
      )}
    &gt;
      {/* Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;h2 className=&quot;text-sm font-semibold text-white&quot;&gt;Execution Monitor&lt;/h2&gt;
          &lt;div
            className={cn('w-2 h-2 rounded-full', isConnected ? 'bg-green-500' : 'bg-red-500')}
            title={isConnected ? 'Connected' : 'Disconnected'}
          /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;button
            onClick={() =&gt; setDebugMode(!debugMode)}
            className={cn(
              'text-xs px-2 py-1 rounded',
              debugMode ? 'bg-yellow-600 text-white' : 'bg-gray-700 text-gray-300'
            )}
          &gt;
            Debug
          &lt;/button&gt;
          &lt;button onClick={onToggle} className=&quot;text-gray-400 hover:text-white&quot;&gt;
            ✕
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Progress bar */}
      {currentExecution &amp;&amp; (
        &lt;div className=&quot;p-3 border-b border-gray-700&quot;&gt;{renderProgressBar()}&lt;/div&gt;
      )}

      {/* Tabs */}
      &lt;div className=&quot;flex border-b border-gray-700&quot;&gt;
        {(['console', 'variables', 'metrics', 'history'] as const).map((tab) =&gt; (
          &lt;button
            key={tab}
            onClick={() =&gt; setActiveTab(tab)}
            className={cn(
              'px-3 py-2 text-xs font-medium border-b-2 transition-colors',
              activeTab === tab
                ? 'border-blue-500 text-blue-400'
                : 'border-transparent text-gray-400 hover:text-gray-200'
            )}
          &gt;
            {tab.charAt(0).toUpperCase() + tab.slice(1)}
          &lt;/button&gt;
        ))}
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 p-3 overflow-hidden&quot;&gt;
        {activeTab === 'console' &amp;&amp; renderConsoleTab()}
        {activeTab === 'variables' &amp;&amp; renderVariablesTab()}
        {activeTab === 'metrics' &amp;&amp; renderMetricsTab()}
        {activeTab === 'history' &amp;&amp; renderHistoryTab()}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default ExecutionPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EnhancedPropertyRenderer.tsx (Line 1:1 - Line 493:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/enhancedpropertyrenderer/EnhancedPropertyRenderer.tsx (Line 5:1 - Line 497:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup83"><code class="language-tsx text-sm text-gray-800">/**
 * Enhanced Property Renderer
 *
 * Advanced property form rendering with conditional logic, validation,
 * and dynamic field types. Supports 22+ property types with real-time
 * validation and dependency management.
 */

import {
  DeleteOutlined,
  ExclamationCircleOutlined,
  InfoCircleOutlined,
  PlusOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Tag,
  Tooltip,
  Upload,
} from 'antd';
import React, { useCallback, useMemo, useState } from 'react';
import type { INodeProperty } from '@/core/nodes/types';
import { cn } from '@/design-system/utils';

const { TextArea } = Input;
const { Option } = Select;

export interface PropertyFormState {
  [key: string]: any;
}

export interface PropertyValidationResult {
  isValid: boolean;
  errors: Map&lt;string, string&gt;;
}

export interface EnhancedPropertyRendererProps {
  properties: INodeProperty[];
  formState: PropertyFormState;
  onChange: (name: string, value: any) =&gt; void;
  onValidationChange?: (result: PropertyValidationResult) =&gt; void;
  theme?: 'light' | 'dark';
  disabled?: boolean;
}

interface PropertyFieldProps {
  property: INodeProperty;
  value: any;
  onChange: (value: any) =&gt; void;
  disabled?: boolean;
  theme?: 'light' | 'dark';
}

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const [isExpanded, setIsExpanded] = useState(false);

  const renderField = () =&gt; {
    switch (property.type) {
      case 'string':
        return (
          &lt;Input
            value={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            value={value || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            placeholder={property.placeholder}
            disabled={disabled}
            rows={4}
            className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'boolean':
        return &lt;Switch checked={value || false} onChange={onChange} disabled={disabled} /&gt;;

      case 'select':
        return (
          &lt;Select
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
        return (
          &lt;Select
            mode=&quot;multiple&quot;
            value={value || []}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option key={option.value} value={option.value}&gt;
                {option.label}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'dateTime':
        return (
          &lt;DatePicker
            value={value}
            onChange={onChange}
            placeholder={property.placeholder}
            disabled={disabled}
            showTime
            className=&quot;w-full&quot;
            style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={value}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={disabled}
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            beforeUpload={() =&gt; false}
            onChange={(info) =&gt; {
              if (info.file) {
                onChange(info.file);
              }
            }}
            disabled={disabled}
          &gt;
            &lt;Button icon={&lt;PlusOutlined /&gt;} disabled={disabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      case 'json':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={typeof value === 'string' ? value : JSON.stringify(value, null, 2)}
              onChange={(e) =&gt; {
                try {
                  const parsed = JSON.parse(e.target.value);
                  onChange(parsed);
                } catch {
                  onChange(e.target.value);
                }
              }}
              placeholder={property.placeholder}
              disabled={disabled}
              rows={6}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            {value &amp;&amp; typeof value === 'object' &amp;&amp; (
              &lt;div className=&quot;mt-2&quot;&gt;
                &lt;Button size=&quot;small&quot; onClick={() =&gt; setIsExpanded(!isExpanded)} type=&quot;text&quot;&gt;
                  {isExpanded ? 'Collapse' : 'Expand'} JSON
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      case 'expression':
        return (
          &lt;div&gt;
            &lt;TextArea
              value={value || ''}
              onChange={(e) =&gt; onChange(e.target.value)}
              placeholder={property.placeholder || 'Enter JavaScript expression...'}
              disabled={disabled}
              rows={3}
              className={cn(
                'font-mono text-xs',
                theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''
              )}
            /&gt;
            &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
              Use $input to reference input data, e.g., $input.user.name
            &lt;/div&gt;
          &lt;/div&gt;
        );

      case 'collection':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            {(value || []).map((item: any, index: number) =&gt; (
              &lt;Card
                key={index}
                size=&quot;small&quot;
                className={theme === 'dark' ? 'bg-gray-800 border-gray-600' : ''}
                title={`Item ${index + 1}`}
                extra={
                  &lt;Button
                    type=&quot;text&quot;
                    danger
                    size=&quot;small&quot;
                    icon={&lt;DeleteOutlined /&gt;}
                    onClick={() =&gt; {
                      const newValue = [...(value || [])];
                      newValue.splice(index, 1);
                      onChange(newValue);
                    }}
                    disabled={disabled}
                  /&gt;
                }
              &gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {property.collectionSchema?.map((field: any) =&gt; (
                    &lt;div key={field.name}&gt;
                      &lt;label className=&quot;text-sm font-medium text-gray-300&quot;&gt;
                        {field.label || field.name}
                      &lt;/label&gt;
                      &lt;PropertyField
                        property={field}
                        value={item[field.name]}
                        onChange={(fieldValue) =&gt; {
                          const newValue = [...(value || [])];
                          newValue[index] = { ...newValue[index], [field.name]: fieldValue };
                          onChange(newValue);
                        }}
                        disabled={disabled}
                        theme={theme}
                      /&gt;
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/Card&gt;
            ))}
            &lt;Button
              type=&quot;dashed&quot;
              onClick={() =&gt; {
                const newValue = [...(value || []), {}];
                onChange(newValue);
              }}
              disabled={disabled}
              className=&quot;w-full&quot;
            &gt;
              &lt;PlusOutlined /&gt; Add Item
            &lt;/Button&gt;
          &lt;/div&gt;
        );

      case 'credentialsSelect':
        return (
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;Select
              value={value?.credentialId}
              onChange={(credentialId) =&gt; onChange({ ...value, credentialId })}
              placeholder=&quot;Select credential&quot;
              disabled={disabled}
              className=&quot;w-full&quot;
              style={{ backgroundColor: theme === 'dark' ? '#1f2937' : undefined }}
            &gt;
              {/* This would be populated with available credentials */}
              &lt;Option value=&quot;gmail-oauth&quot;&gt;Gmail OAuth&lt;/Option&gt;
              &lt;Option value=&quot;openai-api&quot;&gt;OpenAI API Key&lt;/Option&gt;
            &lt;/Select&gt;
            {value?.credentialId &amp;&amp; (
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Tag color=&quot;green&quot;&gt;Connected&lt;/Tag&gt;
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Test Connection
                &lt;/Button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        );

      default:
        return (
          &lt;Alert message={`Unsupported property type: ${property.type}`} type=&quot;warning&quot; showIcon /&gt;
        );
    }
  };

  return (
    &lt;div className=&quot;space-y-1&quot;&gt;
      {renderField()}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-500 flex items-center gap-1&quot;&gt;
          &lt;InfoCircleOutlined /&gt;
          {property.description}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export const EnhancedPropertyRenderer: React.FC&lt;EnhancedPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  onValidationChange,
  theme = 'dark',
  disabled = false,
}) =&gt; {
  const [validationErrors, setValidationErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const validateProperty = useCallback((property: INodeProperty, value: any): string | null =&gt; {
    // Required validation
    if (property.required &amp;&amp; (!value || value === '')) {
      return `${property.label || property.name} is required`;
    }

    // Type-specific validation
    switch (property.type) {
      case 'string':
      case 'text':
        if (property.maxLength &amp;&amp; value &amp;&amp; value.length &gt; property.maxLength) {
          return `Maximum length is ${property.maxLength} characters`;
        }
        if (property.minLength &amp;&amp; value &amp;&amp; value.length &lt; property.minLength) {
          return `Minimum length is ${property.minLength} characters`;
        }
        if (property.pattern &amp;&amp; value &amp;&amp; !new RegExp(property.pattern).test(value)) {
          return `Value must match pattern: ${property.pattern}`;
        }
        break;

      case 'number':
        if (property.min !== undefined &amp;&amp; value &lt; property.min) {
          return `Minimum value is ${property.min}`;
        }
        if (property.max !== undefined &amp;&amp; value &gt; property.max) {
          return `Maximum value is ${property.max}`;
        }
        break;

      case 'json':
        if (value &amp;&amp; typeof value === 'string') {
          try {
            JSON.parse(value);
          } catch {
            return 'Invalid JSON format';
          }
        }
        break;
    }

    return null;
  }, []);

  const validateAll = useCallback(() =&gt; {
    const errors = new Map&lt;string, string&gt;();

    properties.forEach((property) =&gt; {
      const value = formState[property.name];
      const error = validateProperty(property, value);
      if (error) {
        errors.set(property.name, error);
      }
    });

    setValidationErrors(errors);
    onValidationChange?.({
      isValid: errors.size === 0,
      errors,
    });

    return errors.size === 0;
  }, [properties, formState, validateProperty, onValidationChange]);

  // Validate on form state change
  React.useEffect(() =&gt; {
    validateAll();
  }, [validateAll]);

  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      onChange(name, value);
    },
    [onChange]
  );

  const visibleProperties = useMemo(() =&gt; {
    return properties.filter((property) =&gt; {
      // Simple visibility logic - can be enhanced with complex conditions
      if (property.displayOptions?.show) {
        const conditions = property.displayOptions.show;
        return Object.entries(conditions).every(([key, values]) =&gt; {
          const formValue = formState[key];
          return (values as any[]).includes(formValue);
        });
      }
      return true;
    });
  }, [properties, formState]);

  return (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {visibleProperties.map((property) =&gt; {
        const error = validationErrors.get(property.name);
        const value = formState[property.name];

        return (
          &lt;div key={property.name} className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;label className=&quot;text-sm font-medium text-gray-300 flex items-center gap-2&quot;&gt;
                {property.label || property.name}
                {property.required &amp;&amp; &lt;span className=&quot;text-red-400&quot;&gt;*&lt;/span&gt;}
                {property.description &amp;&amp; (
                  &lt;Tooltip title={property.description}&gt;
                    &lt;InfoCircleOutlined className=&quot;text-gray-500&quot; /&gt;
                  &lt;/Tooltip&gt;
                )}
              &lt;/label&gt;
              {error &amp;&amp; (
                &lt;Tooltip title={error}&gt;
                  &lt;ExclamationCircleOutlined className=&quot;text-red-400&quot; /&gt;
                &lt;/Tooltip&gt;
              )}
            &lt;/div&gt;

            &lt;PropertyField
              property={property}
              value={value}
              onChange={(newValue) =&gt; handlePropertyChange(property.name, newValue)}
              disabled={disabled}
              theme={theme}
            /&gt;

            {error &amp;&amp; &lt;Alert message={error} type=&quot;error&quot; showIcon className=&quot;text-xs&quot; /&gt;}
          &lt;/div&gt;
        );
      })}

      {visibleProperties.length === 0 &amp;&amp; (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
          &lt;div&gt;No properties to configure&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;All properties are hidden by conditional logic&lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default EnhancedPropertyRenderer;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailOutputPanel.tsx (Line 1:1 - Line 346:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailoutputpanel/EmailOutputPanel.tsx (Line 3:1 - Line 348:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup85"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { CheckCircle, ChevronDown, ChevronRight, Edit, Pin, Search } from 'lucide-react';
import type React from 'react';
import { useMemo, useState } from 'react';

type DisplayMode = 'schema' | 'table' | 'json';

interface EmailOutputPanelProps {
  selectedEmail?: any;
  isVisible?: boolean;
}

const EmailOutputPanel: React.FC&lt;EmailOutputPanelProps&gt; = ({ selectedEmail, isVisible = true }) =&gt; {
  const [displayMode, setDisplayMode] = useState&lt;DisplayMode&gt;('schema');
  const [searchTerm, setSearchTerm] = useState('');
  const [expandedItems, setExpandedItems] = useState&lt;Set&lt;string&gt;&gt;(
    new Set(['labelIds', 'headers', 'from', 'to'])
  );

  // Filter data based on search term
  const filteredData = useMemo(() =&gt; {
    if (!searchTerm || !selectedEmail) return selectedEmail;

    const filterObject = (obj: any, path = ''): any =&gt; {
      if (typeof obj === 'string') {
        return obj.toLowerCase().includes(searchTerm.toLowerCase()) ? obj : null;
      }
      if (typeof obj === 'number') {
        return obj.toString().includes(searchTerm) ? obj : null;
      }
      if (Array.isArray(obj)) {
        const filtered = obj.filter((item, index) =&gt; {
          const result = filterObject(item, `${path}[${index}]`);
          return result !== null;
        });
        return filtered.length &gt; 0 ? filtered : null;
      }
      if (typeof obj === 'object' &amp;&amp; obj !== null) {
        const filtered: any = {};
        for (const [key, value] of Object.entries(obj)) {
          const newPath = path ? `${path}.${key}` : key;
          if (key.toLowerCase().includes(searchTerm.toLowerCase())) {
            filtered[key] = value;
          } else {
            const result = filterObject(value, newPath);
            if (result !== null) {
              filtered[key] = result;
            }
          }
        }
        return Object.keys(filtered).length &gt; 0 ? filtered : null;
      }
      return null;
    };

    return filterObject(selectedEmail);
  }, [selectedEmail, searchTerm]);

  const toggleExpanded = (path: string) =&gt; {
    const newExpanded = new Set(expandedItems);
    if (newExpanded.has(path)) {
      newExpanded.delete(path);
    } else {
      newExpanded.add(path);
    }
    setExpandedItems(newExpanded);
  };

  // Get data type icon
  const getTypeIcon = (value: any) =&gt; {
    if (typeof value === 'string') {
      return &lt;span className=&quot;text-blue-400&quot;&gt;Aa&lt;/span&gt;;
    }
    if (typeof value === 'number') {
      return &lt;span className=&quot;text-green-400&quot;&gt;#&lt;/span&gt;;
    }
    if (Array.isArray(value)) {
      return &lt;span className=&quot;text-purple-400&quot;&gt;[]&lt;/span&gt;;
    }
    if (typeof value === 'object') {
      return &lt;span className=&quot;text-yellow-400&quot;&gt;{}&lt;/span&gt;;
    }
    return &lt;span className=&quot;text-gray-400&quot;&gt;?&lt;/span&gt;;
  };

  // Render schema view
  const renderSchemaItem = (key: string, value: any, path: string, nestLevel: number = 0) =&gt; {
    const isExpanded = expandedItems.has(path);
    const hasChildren = Array.isArray(value) || (typeof value === 'object' &amp;&amp; value !== null);

    return (
      &lt;div key={path} className=&quot;border-b border-gray-700 last:border-b-0&quot;&gt;
        &lt;div
          className={`flex items-center py-2 px-3 hover:bg-gray-700 transition-colors ${nestLevel &gt; 0 ? 'pl-8' : ''}`}
          style={{ paddingLeft: `${nestLevel * 24 + 12}px` }}
        &gt;
          {/* Toggle button for expandable items */}
          {hasChildren &amp;&amp; (
            &lt;button
              onClick={() =&gt; toggleExpanded(path)}
              className=&quot;mr-2 p-1 hover:bg-gray-600 rounded&quot;
            &gt;
              {isExpanded ? (
                &lt;ChevronDown className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              ) : (
                &lt;ChevronRight className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
              )}
            &lt;/button&gt;
          )}
          {!hasChildren &amp;&amp; &lt;div className=&quot;w-6 mr-2&quot; /&gt;}

          {/* Property name pill */}
          &lt;div className=&quot;flex items-center bg-gray-600 rounded px-2 py-1 mr-3 min-w-0&quot;&gt;
            &lt;div className=&quot;mr-2 flex-shrink-0&quot;&gt;{getTypeIcon(value)}&lt;/div&gt;
            &lt;span className=&quot;text-sm font-medium text-white truncate&quot;&gt;
              {Array.isArray(value) ? `${key}` : key}
            &lt;/span&gt;
          &lt;/div&gt;

          {/* Value display */}
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            {!hasChildren ? (
              &lt;span className=&quot;text-sm text-gray-300 break-all&quot;&gt;
                {typeof value === 'string' &amp;&amp; value.includes('\n') ? (
                  &lt;div className=&quot;whitespace-pre-wrap&quot;&gt;{value}&lt;/div&gt;
                ) : (
                  String(value)
                )}
              &lt;/span&gt;
            ) : (
              &lt;span className=&quot;text-sm text-gray-400&quot;&gt;
                {Array.isArray(value) ? `Array (${value.length} items)` : 'Object'}
              &lt;/span&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Render children if expanded */}
        {hasChildren &amp;&amp; isExpanded &amp;&amp; (
          &lt;div&gt;
            {Array.isArray(value)
              ? value.map((item, index) =&gt;
                  renderSchemaItem(`[${index}]`, item, `${path}[${index}]`, nestLevel + 1)
                )
              : Object.entries(value).map(([childKey, childValue]) =&gt;
                  renderSchemaItem(childKey, childValue, `${path}.${childKey}`, nestLevel + 1)
                )}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    );
  };

  // Render table view
  const renderTableView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    const flattenObject = (obj: any, prefix = ''): Record&lt;string, any&gt; =&gt; {
      const result: Record&lt;string, any&gt; = {};

      for (const [key, value] of Object.entries(obj)) {
        const newKey = prefix ? `${prefix}.${key}` : key;

        if (Array.isArray(value)) {
          result[newKey] = value.join(', ');
        } else if (typeof value === 'object' &amp;&amp; value !== null) {
          // For nested objects, show a preview
          result[newKey] = `Object (${Object.keys(value).length} properties)`;
        } else {
          result[newKey] = value;
        }
      }

      return result;
    };

    const flatData = flattenObject(selectedEmail);

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;table className=&quot;w-full text-sm&quot;&gt;
          &lt;thead&gt;
            &lt;tr className=&quot;border-b border-gray-600&quot;&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Property&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Value&lt;/th&gt;
              &lt;th className=&quot;text-left py-2 px-3 text-gray-300 font-medium&quot;&gt;Type&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            {Object.entries(flatData).map(([key, value]) =&gt; (
              &lt;tr key={key} className=&quot;border-b border-gray-700 hover:bg-gray-700&quot;&gt;
                &lt;td className=&quot;py-2 px-3 text-blue-300 font-mono text-xs&quot;&gt;{key}&lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-300 break-all&quot;&gt;
                  {typeof value === 'string' &amp;&amp; value.length &gt; 100
                    ? `${value.substring(0, 100)}...`
                    : String(value)}
                &lt;/td&gt;
                &lt;td className=&quot;py-2 px-3 text-gray-400 text-xs&quot;&gt;{typeof value}&lt;/td&gt;
              &lt;/tr&gt;
            ))}
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    );
  };

  // Render JSON view
  const renderJsonView = () =&gt; {
    if (!selectedEmail)
      return &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No email selected&lt;/div&gt;;

    return (
      &lt;div className=&quot;overflow-auto&quot;&gt;
        &lt;pre className=&quot;text-sm text-gray-300 whitespace-pre-wrap p-4 bg-gray-900 rounded border border-gray-600 font-mono&quot;&gt;
          {JSON.stringify(filteredData || selectedEmail, null, 2)}
        &lt;/pre&gt;
      &lt;/div&gt;
    );
  };

  const renderContent = () =&gt; {
    if (!selectedEmail) {
      return (
        &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
          &lt;div className=&quot;mb-4&quot;&gt;
            &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
              &lt;span className=&quot;text-2xl&quot;&gt;📧&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;p className=&quot;mb-2&quot;&gt;Select an email from the input column&lt;/p&gt;
          &lt;p className=&quot;text-gray-400&quot;&gt;to view its detailed structure&lt;/p&gt;
        &lt;/div&gt;
      );
    }

    switch (displayMode) {
      case 'schema':
        return (
          &lt;div className=&quot;overflow-auto max-h-full&quot;&gt;
            {filteredData ? (
              Object.entries(filteredData).map(([key, value]) =&gt; renderSchemaItem(key, value, key))
            ) : (
              &lt;div className=&quot;text-gray-400 text-center py-8&quot;&gt;No matching data found&lt;/div&gt;
            )}
          &lt;/div&gt;
        );
      case 'table':
        return renderTableView();
      case 'json':
        return renderJsonView();
      default:
        return null;
    }
  };

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📤&lt;/span&gt;
            OUTPUT
            {selectedEmail &amp;&amp; (
              &lt;div className=&quot;ml-2 flex items-center space-x-1&quot;&gt;
                &lt;CheckCircle className=&quot;w-4 h-4 text-green-400&quot; /&gt;
                &lt;span className=&quot;text-xs text-gray-400 ml-1&quot;&gt;Email selected&lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Controls */}
        {selectedEmail &amp;&amp; (
          &lt;div className=&quot;flex items-center justify-between space-x-4&quot;&gt;
            {/* Search */}
            &lt;div className=&quot;relative flex-1 max-w-xs&quot;&gt;
              &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
              &lt;input
                type=&quot;text&quot;
                value={searchTerm}
                onChange={(e) =&gt; setSearchTerm(e.target.value)}
                placeholder=&quot;Search email data&quot;
                className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
              /&gt;
            &lt;/div&gt;

            {/* Display mode tabs */}
            &lt;div className=&quot;flex bg-gray-700 rounded overflow-hidden&quot;&gt;
              {[
                { key: 'schema', label: 'Schema' },
                { key: 'table', label: 'Table' },
                { key: 'json', label: 'JSON' },
              ].map(({ key, label }) =&gt; (
                &lt;button
                  key={key}
                  onClick={() =&gt; setDisplayMode(key as DisplayMode)}
                  className={`px-3 py-2 text-sm font-medium transition-colors ${
                    displayMode === key
                      ? 'bg-gray-600 text-white'
                      : 'text-gray-300 hover:text-white hover:bg-gray-600'
                  }`}
                &gt;
                  {label}
                &lt;/button&gt;
              ))}
            &lt;/div&gt;

            {/* Action buttons */}
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;button className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;&gt;
                &lt;Edit className=&quot;w-4 h-4&quot; /&gt;
                edit
              &lt;/button&gt;
              &lt;button className=&quot;p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded transition-colors&quot;&gt;
                &lt;Pin className=&quot;w-4 h-4&quot; /&gt; pin
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}

        {/* Email info */}
        {selectedEmail &amp;&amp; (
          &lt;div className=&quot;mt-3 flex items-center justify-between&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;From:&lt;/span&gt; {selectedEmail.from || 'Unknown'}
            &lt;/div&gt;
            &lt;div className=&quot;text-sm text-gray-300&quot;&gt;
              &lt;span className=&quot;text-blue-300&quot;&gt;Subject:&lt;/span&gt;{' '}
              {selectedEmail.subject || 'No subject'}
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Content */}
      &lt;div className=&quot;flex-1 overflow-hidden&quot;&gt;{renderContent()}&lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EmailOutputPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/EmailInputPanel.tsx (Line 1:1 - Line 255:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/emailinputpanel/EmailInputPanel.tsx (Line 2:1 - Line 256:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup87"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { Clock, Mail, Paperclip, Search, Star } from 'lucide-react';
import type React from 'react';
import { useState } from 'react';

interface EmailInputPanelProps {
  emails?: any[];
  selectedEmailId?: string;
  onEmailSelect: (email: any) =&gt; void;
  isVisible?: boolean;
}

const EmailInputPanel: React.FC&lt;EmailInputPanelProps&gt; = ({
  emails = [],
  selectedEmailId,
  onEmailSelect,
  isVisible = true,
}) =&gt; {
  const [searchTerm, setSearchTerm] = useState('');

  // Filter emails based on search term
  const filteredEmails = emails.filter((email) =&gt; {
    if (!searchTerm) return true;
    const searchLower = searchTerm.toLowerCase();
    return (
      email.subject?.toLowerCase().includes(searchLower) ||
      email.from?.toLowerCase().includes(searchLower) ||
      email.snippet?.toLowerCase().includes(searchLower)
    );
  });

  // Format date
  const formatDate = (dateString: string) =&gt; {
    try {
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now.getTime() - date.getTime();
      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
      const diffDays = Math.floor(diffHours / 24);

      if (diffHours &lt; 1) {
        return 'Just now';
      } else if (diffHours &lt; 24) {
        return `${diffHours}h ago`;
      } else if (diffDays &lt; 7) {
        return `${diffDays}d ago`;
      } else {
        return date.toLocaleDateString();
      }
    } catch {
      return dateString;
    }
  };

  // Extract sender name from email
  const getSenderName = (from: string) =&gt; {
    if (!from) return 'Unknown';

    // Handle &quot;Name &lt;email@domain.com&gt;&quot; format
    const match = from.match(/^(.+?)\s*&lt;(.+)&gt;$/);
    if (match) {
      return match[1].trim();
    }

    // Handle plain email format
    if (from.includes('@')) {
      return from.split('@')[0];
    }

    return from;
  };

  // Get sender avatar color based on email
  const getAvatarColor = (from: string) =&gt; {
    const colors = [
      'bg-blue-500',
      'bg-green-500',
      'bg-yellow-500',
      'bg-red-500',
      'bg-purple-500',
      'bg-pink-500',
      'bg-indigo-500',
      'bg-teal-500',
    ];
    const hash = from.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  };

  if (!isVisible) return null;

  return (
    &lt;div className=&quot;flex flex-col h-full bg-gray-900&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;h3 className=&quot;text-sm font-medium text-gray-100 flex items-center&quot;&gt;
            &lt;span className=&quot;mr-2&quot;&gt;📥&lt;/span&gt;
            INPUT
            &lt;span className=&quot;ml-2 text-xs bg-blue-600 text-white px-2 py-1 rounded-full&quot;&gt;
              {filteredEmails.length} emails
            &lt;/span&gt;
          &lt;/h3&gt;
        &lt;/div&gt;

        {/* Search */}
        {emails.length &gt; 0 &amp;&amp; (
          &lt;div className=&quot;relative&quot;&gt;
            &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400&quot; /&gt;
            &lt;input
              type=&quot;text&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              placeholder=&quot;Search emails...&quot;
              className=&quot;w-full pl-10 pr-3 py-2 bg-gray-600 border border-gray-500 rounded text-white text-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:bg-gray-700&quot;
            /&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;

      {/* Email List */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;
        {emails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
              &lt;div className=&quot;w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center&quot;&gt;
                &lt;Mail className=&quot;w-8 h-8 text-gray-400&quot; /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;p className=&quot;mb-2&quot;&gt;No emails loaded&lt;/p&gt;
            &lt;p className=&quot;text-gray-400&quot;&gt;Test the Gmail trigger to see emails&lt;/p&gt;
          &lt;/div&gt;
        ) : filteredEmails.length === 0 ? (
          &lt;div className=&quot;text-center text-gray-300 py-12 text-sm&quot;&gt;
            &lt;p&gt;No emails match your search&lt;/p&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-1 p-2&quot;&gt;
            {filteredEmails.map((email, index) =&gt; {
              const isSelected = selectedEmailId === email.id;
              const senderName = getSenderName(email.from);
              const avatarColor = getAvatarColor(email.from);

              return (
                &lt;div
                  key={email.id || index}
                  onClick={() =&gt; onEmailSelect(email)}
                  className={`p-3 rounded-lg cursor-pointer transition-all duration-200 border ${
                    isSelected
                      ? 'bg-blue-600 border-blue-500 text-white'
                      : 'bg-gray-800 border-gray-700 hover:bg-gray-700 hover:border-gray-600 text-gray-100'
                  }`}
                &gt;
                  &lt;div className=&quot;flex items-start space-x-3&quot;&gt;
                    {/* Avatar */}
                    &lt;div
                      className={`w-8 h-8 rounded-full ${avatarColor} flex items-center justify-center flex-shrink-0 text-white text-sm font-medium`}
                    &gt;
                      {senderName.charAt(0).toUpperCase()}
                    &lt;/div&gt;

                    {/* Email Content */}
                    &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
                      {/* Header */}
                      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
                        &lt;div className=&quot;flex items-center space-x-2 min-w-0&quot;&gt;
                          &lt;span
                            className={`font-medium text-sm truncate ${
                              isSelected ? 'text-white' : 'text-gray-200'
                            }`}
                          &gt;
                            {senderName}
                          &lt;/span&gt;

                          {/* Indicators */}
                          &lt;div className=&quot;flex items-center space-x-1 flex-shrink-0&quot;&gt;
                            {email.hasAttachments &amp;&amp; (
                              &lt;Paperclip className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                            )}
                            {email.isUnread &amp;&amp; (
                              &lt;div className=&quot;w-2 h-2 bg-blue-400 rounded-full&quot;&gt;&lt;/div&gt;
                            )}
                            {email.labels?.includes('STARRED') &amp;&amp; (
                              &lt;Star className=&quot;w-3 h-3 text-yellow-400 fill-current&quot; /&gt;
                            )}
                          &lt;/div&gt;
                        &lt;/div&gt;

                        &lt;div className=&quot;flex items-center space-x-2 flex-shrink-0&quot;&gt;
                          &lt;Clock className=&quot;w-3 h-3 text-gray-400&quot; /&gt;
                          &lt;span
                            className={`text-xs ${isSelected ? 'text-blue-100' : 'text-gray-400'}`}
                          &gt;
                            {formatDate(email.date)}
                          &lt;/span&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;

                      {/* Subject */}
                      &lt;div
                        className={`text-sm font-medium mb-1 truncate ${
                          isSelected ? 'text-white' : 'text-gray-100'
                        }`}
                      &gt;
                        {email.subject || '(No subject)'}
                      &lt;/div&gt;

                      {/* Snippet */}
                      &lt;div
                        className={`text-xs leading-relaxed line-clamp-2 ${
                          isSelected ? 'text-blue-100' : 'text-gray-400'
                        }`}
                      &gt;
                        {email.snippet || email.body || 'No content preview available'}
                      &lt;/div&gt;

                      {/* Labels */}
                      {email.labels &amp;&amp; email.labels.length &gt; 0 &amp;&amp; (
                        &lt;div className=&quot;flex flex-wrap gap-1 mt-2&quot;&gt;
                          {email.labels.slice(0, 3).map((label: string) =&gt; (
                            &lt;span
                              key={label}
                              className={`px-2 py-1 text-xs rounded-full ${
                                isSelected
                                  ? 'bg-blue-700 text-blue-100'
                                  : 'bg-gray-700 text-gray-300'
                              }`}
                            &gt;
                              {label}
                            &lt;/span&gt;
                          ))}
                          {email.labels.length &gt; 3 &amp;&amp; (
                            &lt;span
                              className={`text-xs ${
                                isSelected ? 'text-blue-200' : 'text-gray-400'
                              }`}
                            &gt;
                              +{email.labels.length - 3} more
                            &lt;/span&gt;
                          )}
                        &lt;/div&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              );
            })}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default EmailInputPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DynamicPropertyRenderer.tsx (Line 1:1 - Line 760:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/dynamicpropertyrenderer/DynamicPropertyRenderer.tsx (Line 6:1 - Line 765:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup89"><code class="language-tsx text-sm text-gray-800">/* eslint-disable @typescript-eslint/no-explicit-any */

import { DeleteOutlined, PlusOutlined, UploadOutlined } from '@ant-design/icons';
import {
  Button,
  Card,
  ColorPicker,
  DatePicker,
  Input,
  InputNumber,
  Select,
  Switch,
  Upload,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import type {
  INodeProperty,
  PropertyEvaluationContext,
  PropertyFormState,
  PropertyValue,
} from '@/core';

// Simple property evaluation for INodeProperty (registry system)
const evaluateINodeProperty = (property: INodeProperty, context: PropertyEvaluationContext) =&gt; {
  // For registry system, we use simpler logic
  const formState = context.formState || {};
  const displayOptions = property.displayOptions;

  let visible = true;
  const disabled = false;
  const required = property.required || false;

  if (displayOptions?.show) {
    visible = Object.entries(displayOptions.show).every(([key, values]) =&gt; {
      const currentValue = formState[key];
      return (
        Array.isArray(values) &amp;&amp;
        currentValue !== undefined &amp;&amp;
        currentValue !== null &amp;&amp;
        values.includes(currentValue as string | number | boolean)
      );
    });
  }

  if (displayOptions?.hide) {
    const shouldHide = Object.entries(displayOptions.hide).some(([key, values]) =&gt; {
      const currentValue = formState[key];
      return (
        Array.isArray(values) &amp;&amp;
        currentValue !== undefined &amp;&amp;
        currentValue !== null &amp;&amp;
        values.includes(currentValue as string | number | boolean)
      );
    });
    if (shouldHide) visible = false;
  }

  return { visible, disabled, required };
};

const { TextArea } = Input;
const { Option } = Select;

interface DynamicPropertyRendererProps {
  properties: INodeProperty[];
  formState: PropertyFormState;
  onChange: (name: string, value: PropertyValue) =&gt; void;
  context?: Partial&lt;PropertyEvaluationContext&gt;;
  disabled?: boolean;
  theme?: 'light' | 'dark';
}

interface PropertyFieldProps {
  property: INodeProperty;
  value: PropertyValue;
  onChange: (value: PropertyValue) =&gt; void;
  context: PropertyEvaluationContext;
  disabled?: boolean;
  theme?: 'light' | 'dark';
}

// Theme-based styling helper
const getThemeStyles = (theme: 'light' | 'dark', hasErrors: boolean = false) =&gt; {
  if (theme === 'light') {
    return {
      backgroundColor: '#ffffff',
      borderColor: hasErrors ? '#ff4d4f' : '#d1d5db',
      color: '#1f2937',
      dropdownStyle: {
        backgroundColor: '#ffffff',
        border: '1px solid #d1d5db',
      },
    };
  } else {
    return {
      backgroundColor: '#4b5563',
      borderColor: hasErrors ? '#ff4d4f' : '#6b7280',
      color: '#ffffff',
      dropdownStyle: {
        backgroundColor: '#374151',
        border: '1px solid #6b7280',
      },
    };
  }
};

const PropertyField: React.FC&lt;PropertyFieldProps&gt; = ({
  property,
  value,
  onChange,
  context,
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const evaluation = evaluateINodeProperty(property, context);

  if (!evaluation.visible) {
    return null;
  }

  const hasErrors = false; // Simplified validation for registry system
  const isDisabled = disabled || evaluation.disabled;
  const themeStyles = getThemeStyles(theme, hasErrors);

  const commonProps = {
    placeholder: property.placeholder,
    disabled: isDisabled,
    style: {
      backgroundColor: themeStyles.backgroundColor,
      borderColor: themeStyles.borderColor,
      color: themeStyles.color,
      ...(hasErrors ? { borderColor: '#ff4d4f' } : {}),
    },
  };

  // Helper function to get credential icons
  const getCredentialIcon = (type: string) =&gt; {
    switch (type) {
      case 'openaiApi':
        return '🤖';
      case 'anthropicApi':
        return '🧠';
      case 'googleAiApi':
        return '🔷';
      case 'azureOpenAiApi':
        return '☁️';
      case 'awsBedrockApi':
        return '🟠';
      case 'gmailOAuth2':
        return '📧';
      case 'postgres':
        return '🐘';
      case 'mysql':
        return '🐬';
      default:
        return '🔑';
    }
  };

  const renderBasicField = () =&gt; {
    switch (property.type) {
      case 'string':
        return (
          &lt;Input
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );

      case 'text':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={property.rows || 4}
            autoSize={{ minRows: property.rows || 4, maxRows: 10 }}
          /&gt;
        );

      case 'number':
        return (
          &lt;InputNumber
            {...commonProps}
            value={value as number}
            onChange={(val) =&gt; onChange(val)}
            min={property.min}
            max={property.max}
            step={property.step || 1}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'boolean':
        return (
          &lt;Switch checked={(value as boolean) || false} onChange={onChange} disabled={isDisabled} /&gt;
        );

      case 'select':
        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={onChange}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'multiSelect':
      case 'multiOptions':
        return (
          &lt;Select
            {...commonProps}
            mode=&quot;multiple&quot;
            value={(value as string[]) || []}
            onChange={onChange}
            className=&quot;ant-select-multiple&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            tagRender={(props) =&gt; {
              const { label, closable, onClose } = props;
              return (
                &lt;span
                  style={{
                    backgroundColor: '#1f2937',
                    border: '1px solid #4b5563',
                    color: '#ffffff',
                    borderRadius: '4px',
                    padding: '2px 8px',
                    margin: '2px',
                    display: 'inline-flex',
                    alignItems: 'center',
                    fontSize: '12px',
                  }}
                &gt;
                  {label}
                  {closable &amp;&amp; (
                    &lt;span
                      onClick={onClose}
                      style={{
                        marginLeft: '4px',
                        cursor: 'pointer',
                        color: '#9ca3af',
                      }}
                      onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ffffff')}
                      onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#9ca3af')}
                    &gt;
                      ×
                    &lt;/span&gt;
                  )}
                &lt;/span&gt;
              );
            }}
          &gt;
            {property.options?.map((option: any) =&gt; (
              &lt;Option
                key={String(option.value)}
                value={option.value}
                style={{
                  backgroundColor: '#374151', // Dark option background
                  color: '#ffffff', // White text
                }}
              &gt;
                {option.name}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;
        );

      case 'credentialsSelect': {
        // Get available credentials from context (registry system)
        const credentialTypes = property.credentialTypes || [];
        const availableCredentials =
          context.credentials?.filter(
            (cred: any) =&gt; credentialTypes.length === 0 || credentialTypes.includes(cred.type)
          ) || [];

        // Debug logging for credential filtering
        if (property.name === 'credential' &amp;&amp; credentialTypes.includes('gmailOAuth2')) {
        }

        return (
          &lt;Select
            {...commonProps}
            value={value as string}
            onChange={(selectedValue) =&gt; {
              onChange(selectedValue);

              // Sync with the other credential field
              if (context.onCredentialChange) {
                context.onCredentialChange(selectedValue);
              }

              // Trigger auto-population if a credential is selected
              if (selectedValue &amp;&amp; context.onCredentialSelect) {
                const selectedCredential = availableCredentials.find(
                  (cred: any) =&gt; cred.id === selectedValue
                );
                if (selectedCredential) {
                  context.onCredentialSelect(selectedCredential);
                }
              }
            }}
            placeholder=&quot;Select a credential...&quot;
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
            dropdownStyle={{
              backgroundColor: '#374151', // Dark dropdown background
              border: '1px solid #6b7280', // Lighter border
            }}
            dropdownClassName=&quot;custom-dark-dropdown&quot;
            dropdownRender={(menu) =&gt; (
              &lt;div&gt;
                {menu}
                {credentialTypes.length &gt; 0 &amp;&amp; (
                  &lt;div
                    style={{
                      padding: '8px',
                      borderTop: '1px solid #6b7280',
                      backgroundColor: '#374151',
                    }}
                  &gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      onClick={() =&gt; {
                        // Trigger credential creation modal
                        if (context.onCreateCredential) {
                          context.onCreateCredential(credentialTypes[0]);
                        } else {
                        }
                      }}
                      style={{
                        color: '#3b82f6',
                        padding: '2px 8px',
                        height: 'auto',
                      }}
                    &gt;
                      + Create New Credential
                    &lt;/Button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            )}
          &gt;
            &lt;Option value=&quot;&quot; style={{ backgroundColor: '#374151', color: '#ffffff' }}&gt;
              No credential selected
            &lt;/Option&gt;
            {availableCredentials.map((credential: any) =&gt; {
              const credTypeDef = context.credentialTypes?.find(
                (ct: any) =&gt; ct.name === credential.type
              );
              const icon =
                credTypeDef?.icon &amp;&amp; typeof credTypeDef.icon === 'string'
                  ? credTypeDef.icon
                  : getCredentialIcon(credential.type);
              const displayName =
                credential.name || `${credTypeDef?.displayName || credential.type} Credential`;

              return (
                &lt;Option
                  key={credential.id}
                  value={credential.id}
                  style={{ backgroundColor: '#374151', color: '#ffffff' }}
                &gt;
                  &lt;div
                    style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '8px',
                    }}
                  &gt;
                    &lt;span style={{ fontSize: '14px' }}&gt;{icon}&lt;/span&gt;
                    &lt;div style={{ flex: 1 }}&gt;
                      &lt;div style={{ fontWeight: 500 }}&gt;{displayName}&lt;/div&gt;
                      &lt;div style={{ fontSize: '11px', color: '#9ca3af' }}&gt;
                        {credential.testedAt
                          ? credential.isValid
                            ? '✓ Tested'
                            : '⚠ Test failed'
                          : 'Not tested'}
                        {credential.updatedAt &amp;&amp; (
                          &lt;span style={{ marginLeft: '8px' }}&gt;
                            {new Date(credential.updatedAt).toLocaleDateString()}
                          &lt;/span&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div style={{ display: 'flex', gap: '4px' }}&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onEditCredential) {
                            context.onEditCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#3b82f6')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Edit credential&quot;
                      &gt;
                        ✏️
                      &lt;/button&gt;
                      &lt;button
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          if (context.onDeleteCredential &amp;&amp; confirm(`Delete &quot;${displayName}&quot;?`)) {
                            context.onDeleteCredential(credential);
                          }
                        }}
                        style={{
                          background: 'none',
                          border: 'none',
                          color: '#6b7280',
                          cursor: 'pointer',
                          fontSize: '12px',
                          padding: '2px',
                        }}
                        onMouseEnter={(e) =&gt; (e.currentTarget.style.color = '#ef4444')}
                        onMouseLeave={(e) =&gt; (e.currentTarget.style.color = '#6b7280')}
                        title=&quot;Delete credential&quot;
                      &gt;
                        🗑️
                      &lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Option&gt;
              );
            })}
          &lt;/Select&gt;
        );
      }

      case 'dateTime':
        return (
          &lt;DatePicker
            {...commonProps}
            showTime
            value={value ? new Date(value as string) : null}
            onChange={(date) =&gt; onChange(date?.toISOString() || null)}
            style={{
              width: '100%',
              backgroundColor: '#4b5563', // Darker gray-600
              borderColor: hasErrors ? '#ff4d4f' : '#6b7280', // Lighter border
              color: '#ffffff', // Pure white text
            }}
          /&gt;
        );

      case 'color':
        return (
          &lt;ColorPicker
            value={(value as string) || '#000000'}
            onChange={(color) =&gt; onChange(color.toHexString())}
            disabled={isDisabled}
          /&gt;
        );

      case 'json':
        return (
          &lt;TextArea
            {...commonProps}
            value={(value as string) || '{}'}
            onChange={(e) =&gt; onChange(e.target.value)}
            rows={6}
            placeholder=&quot;Enter valid JSON...&quot;
          /&gt;
        );

      case 'file':
        return (
          &lt;Upload
            {...commonProps}
            onChange={(info) =&gt; {
              if (info.file.status === 'done') {
                onChange(info.file.response?.url || info.file.name);
              }
            }}
          &gt;
            &lt;Button icon={&lt;UploadOutlined /&gt;} disabled={isDisabled}&gt;
              Upload File
            &lt;/Button&gt;
          &lt;/Upload&gt;
        );

      default:
        return (
          &lt;Input
            {...commonProps}
            value={(value as string) || ''}
            onChange={(e) =&gt; onChange(e.target.value)}
          /&gt;
        );
    }
  };

  const renderCollectionField = () =&gt; {
    const collectionValue = (value as any[]) || [];
    const isMultiple = property.typeOptions?.multipleValues;

    if (!isMultiple) {
      // Single collection item
      const itemValue = collectionValue[0] || {};
      return (
        &lt;Card
          size=&quot;small&quot;
          style={{
            marginBottom: 8,
            backgroundColor: themeStyles.backgroundColor,
            borderColor: themeStyles.borderColor,
            color: themeStyles.color,
          }}
        &gt;
          {property.values?.map((valueProperty: any) =&gt; (
            &lt;PropertyField
              key={valueProperty.name}
              property={valueProperty as INodeProperty}
              value={itemValue[valueProperty.name]}
              onChange={(newValue) =&gt; {
                const newItem = {
                  ...itemValue,
                  [valueProperty.name]: newValue,
                };
                onChange([newItem]);
              }}
              context={context}
              disabled={isDisabled}
              theme={theme}
            /&gt;
          ))}
        &lt;/Card&gt;
      );
    }

    // Multiple collection items
    return (
      &lt;div&gt;
        {collectionValue.map((item, index) =&gt; (
          &lt;Card
            key={index}
            size=&quot;small&quot;
            style={{
              marginBottom: 8,
              backgroundColor: themeStyles.backgroundColor,
              borderColor: themeStyles.borderColor,
              color: themeStyles.color,
            }}
            extra={
              &lt;Button
                type=&quot;text&quot;
                danger
                size=&quot;small&quot;
                icon={&lt;DeleteOutlined /&gt;}
                onClick={() =&gt; {
                  const newValue = collectionValue.filter((_, i) =&gt; i !== index);
                  onChange(newValue);
                }}
                disabled={isDisabled}
              /&gt;
            }
          &gt;
            {property.values?.map((valueProperty: any) =&gt; (
              &lt;PropertyField
                key={`${index}-${valueProperty.name}`}
                property={valueProperty as INodeProperty}
                value={item[valueProperty.name]}
                onChange={(newValue) =&gt; {
                  const newItems = [...collectionValue];
                  newItems[index] = {
                    ...newItems[index],
                    [valueProperty.name]: newValue,
                  };
                  onChange(newItems);
                }}
                context={context}
                disabled={isDisabled}
                theme={theme}
              /&gt;
            ))}
          &lt;/Card&gt;
        ))}

        &lt;Button
          type=&quot;dashed&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; {
            const defaultItem: Record&lt;string, any&gt; = {};
            property.values?.forEach((valueProperty: any) =&gt; {
              defaultItem[valueProperty.name] =
                valueProperty.default !== undefined ? valueProperty.default : '';
            });
            onChange([...collectionValue, defaultItem]);
          }}
          disabled={isDisabled}
          block
          style={{
            backgroundColor: '#4b5563', // Darker background
            borderColor: '#6b7280', // Lighter border
            color: '#ffffff', // Pure white text
          }}
        &gt;
          {property.typeOptions?.multipleValueButtonText || `Add ${property.displayName}`}
        &lt;/Button&gt;
      &lt;/div&gt;
    );
  };

  const renderField = () =&gt; {
    if (property.type === 'collection' || property.type === 'fixedCollection') {
      return renderCollectionField();
    }
    return renderBasicField();
  };

  return (
    &lt;div className=&quot;mb-4&quot;&gt;
      {/* Custom label for dark theme */}
      &lt;label className=&quot;block text-sm font-medium text-gray-100 mb-2&quot;&gt;
        {property.displayName}
        {evaluation.required &amp;&amp; &lt;span className=&quot;text-red-400 ml-1&quot;&gt;*&lt;/span&gt;}
      &lt;/label&gt;

      {/* Form field */}
      {renderField()}

      {/* Description */}
      {property.description &amp;&amp; (
        &lt;div className=&quot;text-xs text-gray-300 mt-1&quot;&gt;{property.description}&lt;/div&gt;
      )}

      {/* Error messages */}
      {hasErrors &amp;&amp; (
        &lt;div className=&quot;mt-1&quot;&gt;
          &lt;div className=&quot;text-xs text-red-300&quot;&gt;Validation error occurred&lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

const DynamicPropertyRenderer: React.FC&lt;DynamicPropertyRendererProps&gt; = ({
  properties,
  formState,
  onChange,
  context = {},
  disabled = false,
  theme = 'dark',
}) =&gt; {
  const credentialProp = properties.find((p) =&gt; p.name === 'credential');
  if (credentialProp) {
  }

  const [localFormState, setLocalFormState] = useState&lt;PropertyFormState&gt;(formState);

  // Update local state when props change
  useEffect(() =&gt; {
    setLocalFormState(formState);
  }, [formState]);

  const evaluationContext: PropertyEvaluationContext = {
    formState: localFormState,
    nodeData: context.nodeData,
    credentials: context.credentials,
    workflow: context.workflow,
  };

  const handleChange = useCallback(
    (name: string, value: PropertyValue) =&gt; {
      const newFormState = { ...localFormState, [name]: value };
      setLocalFormState(newFormState);
      onChange(name, value);
    },
    [localFormState, onChange]
  );

  // Group properties if they have grouping information
  const groupedProperties = properties.reduce(
    (groups, property) =&gt; {
      const groupName = 'default'; // Can be extended to support property groups
      if (!groups[groupName]) {
        groups[groupName] = [];
      }
      groups[groupName].push(property);
      return groups;
    },
    {} as Record&lt;string, INodeProperty[]&gt;
  );

  return (
    &lt;div className=&quot;dynamic-property-renderer&quot;&gt;
      {Object.entries(groupedProperties).map(([groupName, groupProperties]) =&gt; (
        &lt;div key={groupName}&gt;
          {(groupProperties as INodeProperty[]).map((property: any, index: number) =&gt; (
            &lt;PropertyField
              key={`${property.name}-${index}`}
              property={property}
              value={localFormState[property.name]}
              onChange={(value) =&gt; handleChange(property.name, value)}
              context={evaluationContext}
              disabled={disabled}
              theme={theme}
            /&gt;
          ))}
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
};

export default DynamicPropertyRenderer;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DebugPanel.tsx (Line 1:1 - Line 796:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/debugpanel/DebugPanel.tsx (Line 6:1 - Line 801:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup91"><code class="language-tsx text-sm text-gray-800">/**
 * Debug Panel Component
 *
 * Comprehensive debugging interface providing:
 * - Breakpoint management and execution control
 * - Step-through debugging with call stack visualization
 * - Data inspection and variable watching
 * - Execution history and replay functionality
 * - Performance profiling and metrics
 */

import {
  BugOutlined,
  CodeOutlined,
  DeleteOutlined,
  EyeOutlined,
  HistoryOutlined,
  InfoCircleOutlined,
  PauseCircleOutlined,
  PlayCircleOutlined,
  PlusOutlined,
  SettingOutlined,
  StepBackwardOutlined,
  StepForwardOutlined,
  StopOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Form,
  Input,
  Modal,
  Switch,
  Tabs,
  Tag,
  Timeline,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { enhancedDebuggingService } from '@/core/services/enhancedDebuggingService';
import type {
  CallStackFrame,
  DebugEvent,
  DebugMetrics,
  DebugSession,
  ExecutionStep,
  WatchExpression,
} from '@/core/types/debugging';
import { JsonViewer } from '@/design-system';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;

interface DebugPanelProps {
  workflowId?: string;
  executionId?: string;
  className?: string;
}

const DebugPanel: React.FC&lt;DebugPanelProps&gt; = ({ workflowId, executionId, className }) =&gt; {
  const [activeTab, setActiveTab] = useState('controls');
  const [session, setSession] = useState&lt;DebugSession | null&gt;(null);
  const [isDebugging, setIsDebugging] = useState(false);
  const [isPaused, setIsPaused] = useState(false);
  const [_currentStep, _setCurrentStep] = useState&lt;ExecutionStep | null&gt;(null);

  const [watchExpressions, _setWatchExpressions] = useState&lt;WatchExpression[]&gt;([]);
  const [callStack, setCallStack] = useState&lt;CallStackFrame[]&gt;([]);
  const [variables, setVariables] = useState&lt;Record&lt;string, any&gt;&gt;({});
  const [executionHistory, _setExecutionHistory] = useState&lt;ExecutionStep[]&gt;([]);
  const [metrics, setMetrics] = useState&lt;DebugMetrics | null&gt;(null);
  const [isBreakpointModalOpen, setIsBreakpointModalOpen] = useState(false);
  const [isWatchModalOpen, setIsWatchModalOpen] = useState(false);
  const [selectedNodeId, setSelectedNodeId] = useState&lt;string&gt;('');
  const [newWatchExpression, setNewWatchExpression] = useState('');

  // Subscribe to debug events
  useEffect(() =&gt; {
    const unsubscribe = enhancedDebuggingService.subscribe((event: DebugEvent) =&gt; {
      handleDebugEvent(event);
    });

    return unsubscribe;
  }, [handleDebugEvent]);

  const handleDebugEvent = useCallback(
    (event: DebugEvent) =&gt; {
      switch (event.type) {
        case 'session-started':
          setIsDebugging(true);
          break;
        case 'session-ended':
          setIsDebugging(false);
          setIsPaused(false);
          setSession(null);
          break;
        case 'step-completed':
          _setCurrentStep(event.data);
          updateSessionData();
          break;
        case 'breakpoint-hit':
          setIsPaused(true);
          updateSessionData();
          break;
        case 'error-occurred':
          setIsPaused(true);
          updateSessionData();
          break;
      }
    },
    [updateSessionData]
  );

  const updateSessionData = useCallback(() =&gt; {
    const currentSession = enhancedDebuggingService.getCurrentSession();
    if (currentSession) {
      setSession(currentSession);
      setCallStack(enhancedDebuggingService.getCallStack());
      setVariables(enhancedDebuggingService.getVariables());
      setMetrics(enhancedDebuggingService.getDebugMetrics());
    }
  }, []);

  const startDebugging = useCallback(async () =&gt; {
    if (!workflowId || !executionId) return;

    try {
      await enhancedDebuggingService.startDebugging(workflowId, executionId);
      setIsDebugging(true);
      updateSessionData();
    } catch (_error) {}
  }, [workflowId, executionId, updateSessionData]);

  const stopDebugging = useCallback(() =&gt; {
    enhancedDebuggingService.stopDebugging();
    setIsDebugging(false);
    setIsPaused(false);
    setSession(null);
  }, []);

  const pauseExecution = useCallback(() =&gt; {
    enhancedDebuggingService.pauseExecution();
    setIsPaused(true);
  }, []);

  const resumeExecution = useCallback(() =&gt; {
    enhancedDebuggingService.resumeExecution();
    setIsPaused(false);
  }, []);

  const stepOver = useCallback(() =&gt; {
    enhancedDebuggingService.stepOver();
    setIsPaused(true);
  }, []);

  const stepInto = useCallback(() =&gt; {
    enhancedDebuggingService.stepInto();
    setIsPaused(true);
  }, []);

  const stepOut = useCallback(() =&gt; {
    enhancedDebuggingService.stepOut();
    setIsPaused(true);
  }, []);

  const addBreakpoint = useCallback(
    (nodeId: string, condition?: string) =&gt; {
      enhancedDebuggingService.addBreakpoint(nodeId, {
        nodeId,
        enabled: true,
        hitCount: 0,
        condition,
        actions: [{ type: 'pause' }],
        createdAt: Date.now(),
      });
      updateSessionData();
    },
    [updateSessionData]
  );

  const removeBreakpoint = useCallback(
    (nodeId: string, breakpointId: string) =&gt; {
      enhancedDebuggingService.removeBreakpoint(nodeId, breakpointId);
      updateSessionData();
    },
    [updateSessionData]
  );

  const toggleBreakpoint = useCallback(
    (nodeId: string, breakpointId: string) =&gt; {
      enhancedDebuggingService.toggleBreakpoint(nodeId, breakpointId);
      updateSessionData();
    },
    [updateSessionData]
  );

  const addWatchExpression = useCallback(() =&gt; {
    if (newWatchExpression.trim()) {
      enhancedDebuggingService.addWatchExpression(newWatchExpression.trim());
      setNewWatchExpression('');
      setIsWatchModalOpen(false);
      updateSessionData();
    }
  }, [newWatchExpression, updateSessionData]);

  const removeWatchExpression = useCallback(
    (id: string) =&gt; {
      enhancedDebuggingService.removeWatchExpression(id);
      updateSessionData();
    },
    [updateSessionData]
  );

  const getStatusColor = () =&gt; {
    if (!isDebugging) return 'gray';
    if (isPaused) return 'orange';
    return 'green';
  };

  const getStatusText = () =&gt; {
    if (!isDebugging) return 'Not Debugging';
    if (isPaused) return 'Paused';
    return 'Running';
  };

  const renderDebugControls = () =&gt; (
    &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600 mb-4&quot;&gt;
      &lt;div className=&quot;space-y-4&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;BugOutlined className=&quot;text-blue-400&quot; /&gt;
            &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
              Debug Controls
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Badge
              status={getStatusColor() as any}
              text={getStatusText()}
              className=&quot;text-gray-300&quot;
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          {!isDebugging ? (
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;PlayCircleOutlined /&gt;}
              onClick={startDebugging}
              disabled={!workflowId || !executionId}
            &gt;
              Start Debugging
            &lt;/Button&gt;
          ) : (
            &lt;&gt;
              {isPaused ? (
                &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;} onClick={resumeExecution}&gt;
                  Resume
                &lt;/Button&gt;
              ) : (
                &lt;Button icon={&lt;PauseCircleOutlined /&gt;} onClick={pauseExecution}&gt;
                  Pause
                &lt;/Button&gt;
              )}

              &lt;Button
                icon={&lt;StepForwardOutlined /&gt;}
                onClick={stepOver}
                disabled={!isPaused}
                title=&quot;Step Over&quot;
              /&gt;

              &lt;Button
                icon={&lt;StepBackwardOutlined /&gt;}
                onClick={stepInto}
                disabled={!isPaused}
                title=&quot;Step Into&quot;
              /&gt;

              &lt;Button
                icon={&lt;StopOutlined /&gt;}
                onClick={stepOut}
                disabled={!isPaused}
                title=&quot;Step Out&quot;
              /&gt;

              &lt;Button danger icon={&lt;StopOutlined /&gt;} onClick={stopDebugging}&gt;
                Stop
              &lt;/Button&gt;
            &lt;/&gt;
          )}
        &lt;/div&gt;

        {session &amp;&amp; (
          &lt;div className=&quot;grid grid-cols-2 gap-4 text-sm&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Session ID:&lt;/Text&gt;
              &lt;div className=&quot;text-white font-mono&quot;&gt;{session.id}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Step Count:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.stepCount}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Duration:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;
                {Math.round((Date.now() - session.startTime) / 1000)}s
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Current Node:&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{session.currentNodeId || 'None'}&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderBreakpoints = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Breakpoints
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsBreakpointModalOpen(true)}
        &gt;
          Add Breakpoint
        &lt;/Button&gt;
      &lt;/div&gt;

      {session &amp;&amp; session.breakpoints.size === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;BugOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No breakpoints set&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add breakpoints to pause execution at specific nodes&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Array.from(session?.breakpoints.entries() || []).map(([nodeId, breakpoints]) =&gt;
            breakpoints.map((breakpoint) =&gt; (
              &lt;Card key={breakpoint.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                    &lt;Switch
                      size=&quot;small&quot;
                      checked={breakpoint.enabled}
                      onChange={() =&gt; toggleBreakpoint(nodeId, breakpoint.id)}
                    /&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-white text-sm font-medium&quot;&gt;Node: {nodeId}&lt;/div&gt;
                      {breakpoint.condition &amp;&amp; (
                        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                          Condition: {breakpoint.condition}
                        &lt;/div&gt;
                      )}
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;Hits: {breakpoint.hitCount}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                    &lt;Badge
                      count={breakpoint.hitCount}
                      size=&quot;small&quot;
                      style={{ backgroundColor: '#1890ff' }}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;DeleteOutlined /&gt;}
                      onClick={() =&gt; removeBreakpoint(nodeId, breakpoint.id)}
                      className=&quot;text-red-400 hover:text-red-300&quot;
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            ))
          )}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderWatchExpressions = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
          Watch Expressions
        &lt;/Title&gt;
        &lt;Button
          type=&quot;dashed&quot;
          size=&quot;small&quot;
          icon={&lt;PlusOutlined /&gt;}
          onClick={() =&gt; setIsWatchModalOpen(true)}
        &gt;
          Add Watch
        &lt;/Button&gt;
      &lt;/div&gt;

      {watchExpressions.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;EyeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No watch expressions&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Add expressions to monitor variable values&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {watchExpressions.map((watch) =&gt; (
            &lt;Card key={watch.id} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;flex-1&quot;&gt;
                  &lt;div className=&quot;text-white text-sm font-mono&quot;&gt;{watch.expression}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs mt-1&quot;&gt;
                    {watch.error ? (
                      &lt;span className=&quot;text-red-400&quot;&gt;Error: {watch.error}&lt;/span&gt;
                    ) : (
                      &lt;&gt;
                        &lt;span className=&quot;text-green-400&quot;&gt;Value: &lt;/span&gt;
                        &lt;span className=&quot;font-mono&quot;&gt;
                          {typeof watch.value === 'object'
                            ? JSON.stringify(watch.value)
                            : String(watch.value)}
                        &lt;/span&gt;
                        &lt;span className=&quot;text-gray-500 ml-2&quot;&gt;({watch.type})&lt;/span&gt;
                      &lt;/&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; removeWatchExpression(watch.id)}
                  className=&quot;text-red-400 hover:text-red-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderCallStack = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Call Stack
      &lt;/Title&gt;

      {callStack.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;CodeOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;Call stack is empty&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see the call stack&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={callStack.map((frame, index) =&gt; ({
            color: index === callStack.length - 1 ? 'blue' : 'gray',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{frame.nodeName}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;{frame.nodeType}&lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(frame.timestamp).toLocaleTimeString()}
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderVariables = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Variables
      &lt;/Title&gt;

      {Object.keys(variables).length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;InfoCircleOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No variables available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Variables will appear during execution&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(variables).map(([key, value]) =&gt; (
            &lt;Card key={key} size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{key}&lt;/div&gt;
                &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1} maxHeight=&quot;200px&quot; /&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  const renderExecutionHistory = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Execution History
      &lt;/Title&gt;

      {executionHistory.length === 0 ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;HistoryOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No execution history&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Execution steps will appear here&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;Timeline
          items={executionHistory.map((step) =&gt; ({
            color:
              step.action === 'error' ? 'red' : step.action === 'breakpoint' ? 'orange' : 'blue',
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;span className=&quot;text-white font-medium&quot;&gt;{step.nodeId}&lt;/span&gt;
                  &lt;Tag
                    color={
                      step.action === 'error'
                        ? 'red'
                        : step.action === 'breakpoint'
                          ? 'orange'
                          : step.action === 'start'
                            ? 'blue'
                            : 'green'
                    }
                  &gt;
                    {step.action}
                  &lt;/Tag&gt;
                &lt;/div&gt;
                &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                  {new Date(step.timestamp).toLocaleTimeString()}
                  {step.duration &amp;&amp; ` (${step.duration}ms)`}
                &lt;/div&gt;
                {step.error &amp;&amp; (
                  &lt;div className=&quot;text-red-400 text-xs&quot;&gt;Error: {step.error.message}&lt;/div&gt;
                )}
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      )}
    &lt;/div&gt;
  );

  const renderMetrics = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
        Debug Metrics
      &lt;/Title&gt;

      {!metrics ? (
        &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
          &lt;SettingOutlined className=&quot;text-4xl mb-2&quot; /&gt;
          &lt;div&gt;No metrics available&lt;/div&gt;
          &lt;div className=&quot;text-xs mt-2&quot;&gt;Start debugging to see performance metrics&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{metrics.totalSteps}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Steps&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{metrics.breakpointHits}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Breakpoint Hits&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-red-400&quot;&gt;{metrics.errors}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Errors&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;
                {Math.round(metrics.averageStepTime)}ms
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Avg Step Time&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{metrics.callStackDepth}&lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Call Stack Depth&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;

          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;div className=&quot;text-center&quot;&gt;
              &lt;div className=&quot;text-2xl font-bold text-yellow-400&quot;&gt;
                {Math.round(metrics.memoryUsage)}MB
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Memory Usage&lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;BugOutlined className=&quot;text-red-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Debug Panel
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced debugging tools for workflow execution
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        {renderDebugControls()}

        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;debug-tabs&quot;
          items={[
            {
              key: 'breakpoints',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Breakpoints
                  {session &amp;&amp; session.breakpoints.size &gt; 0 &amp;&amp; (
                    &lt;Badge
                      count={Array.from(session.breakpoints.values()).flat().length}
                      size=&quot;small&quot;
                      className=&quot;ml-2&quot;
                    /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderBreakpoints(),
            },
            {
              key: 'watch',
              label: (
                &lt;span&gt;
                  &lt;EyeOutlined className=&quot;mr-1&quot; /&gt;
                  Watch
                  {watchExpressions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={watchExpressions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderWatchExpressions(),
            },
            {
              key: 'callstack',
              label: (
                &lt;span&gt;
                  &lt;CodeOutlined className=&quot;mr-1&quot; /&gt;
                  Call Stack
                  {callStack.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={callStack.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderCallStack(),
            },
            {
              key: 'variables',
              label: (
                &lt;span&gt;
                  &lt;InfoCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Variables
                  {Object.keys(variables).length &gt; 0 &amp;&amp; (
                    &lt;Badge count={Object.keys(variables).length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderVariables(),
            },
            {
              key: 'history',
              label: (
                &lt;span&gt;
                  &lt;HistoryOutlined className=&quot;mr-1&quot; /&gt;
                  History
                  {executionHistory.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={executionHistory.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: renderExecutionHistory(),
            },
            {
              key: 'metrics',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Metrics
                &lt;/span&gt;
              ),
              children: renderMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Add Breakpoint Modal */}
      &lt;Modal
        title=&quot;Add Breakpoint&quot;
        open={isBreakpointModalOpen}
        onCancel={() =&gt; setIsBreakpointModalOpen(false)}
        onOk={() =&gt; {
          if (selectedNodeId) {
            addBreakpoint(selectedNodeId);
            setIsBreakpointModalOpen(false);
            setSelectedNodeId('');
          }
        }}
        width={400}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Node ID&quot; required&gt;
            &lt;Input
              value={selectedNodeId}
              onChange={(e) =&gt; setSelectedNodeId(e.target.value)}
              placeholder=&quot;Enter node ID&quot;
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Add Watch Expression Modal */}
      &lt;Modal
        title=&quot;Add Watch Expression&quot;
        open={isWatchModalOpen}
        onCancel={() =&gt; setIsWatchModalOpen(false)}
        onOk={addWatchExpression}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Expression&quot; required&gt;
            &lt;Input
              value={newWatchExpression}
              onChange={(e) =&gt; setNewWatchExpression(e.target.value)}
              placeholder=&quot;e.g., $input.user.name, variables.count, $output.result&quot;
            /&gt;
          &lt;/Form.Item&gt;
          &lt;Alert
            message=&quot;Expression Examples&quot;
            description={
              &lt;ul className=&quot;mt-2 text-sm&quot;&gt;
                &lt;li&gt;
                  &lt;code&gt;$input.user.name&lt;/code&gt; - Access input data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;$output.result&lt;/code&gt; - Access output data
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;variables.count&lt;/code&gt; - Access workflow variables
                &lt;/li&gt;
                &lt;li&gt;
                  &lt;code&gt;JSON.stringify($input)&lt;/code&gt; - Convert to JSON
                &lt;/li&gt;
              &lt;/ul&gt;
            }
            type=&quot;info&quot;
            showIcon
          /&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default DebugPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/DataInspector.tsx (Line 1:1 - Line 602:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/datainspector/DataInspector.tsx (Line 4:1 - Line 605:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup93"><code class="language-tsx text-sm text-gray-800">/**
 * Data Inspector Component
 *
 * Advanced data inspection tool providing:
 * - Hierarchical data visualization
 * - JSONPath navigation
 * - Data type analysis
 * - Size and performance metrics
 * - Export and copy functionality
 * - Search and filtering
 */

import {
  CompressOutlined,
  CopyOutlined,
  DownloadOutlined,
  ExpandOutlined,
  EyeOutlined,
  SearchOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Divider,
  Input,
  Modal,
  Progress,
  Select,
  Space,
  Table,
  Tabs,
  Tag,
  Tooltip,
  Tree,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useMemo, useState } from 'react';
import type { DataInspector } from '@/core/types/debugging';
import { JsonViewer } from '@/design-system';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Search } = Input;
const { Option } = Select;
const { TreeNode } = Tree;

interface DataInspectorProps {
  data: any;
  nodeId: string;
  type: DataInspector['type'];
  onClose?: () =&gt; void;
  className?: string;
}

interface DataNode {
  key: string;
  title: string;
  value: any;
  type: string;
  size: number;
  path: string;
  children?: DataNode[];
  isLeaf?: boolean;
}

const DataInspector: React.FC&lt;DataInspectorProps&gt; = ({
  data,
  nodeId,
  type,
  onClose,
  className,
}) =&gt; {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedPath, setSelectedPath] = useState&lt;string&gt;('');
  const [expandedKeys, setExpandedKeys] = useState&lt;string[]&gt;([]);
  const [viewMode, setViewMode] = useState&lt;'tree' | 'json' | 'table'&gt;('tree');
  const [filterType, setFilterType] = useState&lt;string&gt;('all');
  const [isFullscreen, setIsFullscreen] = useState(false);

  // Convert data to tree structure
  const dataTree = useMemo(() =&gt; {
    return convertToTree(data, '', 'root');
  }, [data]);

  // Filter tree based on search and type
  const filteredTree = useMemo(() =&gt; {
    return filterTree(dataTree, searchTerm, filterType);
  }, [dataTree, searchTerm, filterType]);

  // Get data statistics
  const dataStats = useMemo(() =&gt; {
    return analyzeData(data);
  }, [data]);

  // Get selected data
  const selectedData = useMemo(() =&gt; {
    if (!selectedPath) return data;
    return getDataByPath(data, selectedPath);
  }, [data, selectedPath]);

  const handleCopyData = useCallback(async () =&gt; {
    try {
      const text =
        typeof selectedData === 'string' ? selectedData : JSON.stringify(selectedData, null, 2);
      await navigator.clipboard.writeText(text);
    } catch (_error) {}
  }, [selectedData]);

  const handleExportData = useCallback(() =&gt; {
    const blob = new Blob([JSON.stringify(selectedData, null, 2)], {
      type: 'application/json',
    });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `data_${nodeId}_${type}_${Date.now()}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }, [selectedData, nodeId, type]);

  const handleTreeSelect = useCallback((selectedKeys: React.Key[]) =&gt; {
    if (selectedKeys.length &gt; 0) {
      setSelectedPath(selectedKeys[0] as string);
    }
  }, []);

  const handleExpand = useCallback((expandedKeys: React.Key[]) =&gt; {
    setExpandedKeys(expandedKeys as string[]);
  }, []);

  const renderTreeNodes = useCallback((nodes: DataNode[]): React.ReactNode =&gt; {
    return nodes.map((node) =&gt; (
      &lt;TreeNode
        key={node.key}
        title={
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;span className=&quot;text-white&quot;&gt;{node.title}&lt;/span&gt;
            &lt;Tag color={getTypeColor(node.type)}&gt;{node.type}&lt;/Tag&gt;
            &lt;span className=&quot;text-gray-400 text-xs&quot;&gt;{formatSize(node.size)}&lt;/span&gt;
          &lt;/div&gt;
        }
        isLeaf={node.isLeaf}
      &gt;
        {node.children &amp;&amp; renderTreeNodes(node.children)}
      &lt;/TreeNode&gt;
    ));
  }, []);

  const renderDataTable = useCallback(() =&gt; {
    if (!Array.isArray(selectedData)) {
      return &lt;Alert message=&quot;Table view only available for arrays&quot; type=&quot;info&quot; showIcon /&gt;;
    }

    const columns = getTableColumns(selectedData);
    const tableData = selectedData.map((item, index) =&gt; ({
      key: index,
      index,
      ...item,
    }));

    return (
      &lt;Table
        columns={columns}
        dataSource={tableData}
        pagination={{ pageSize: 10 }}
        size=&quot;small&quot;
        className=&quot;bg-gray-800&quot;
        scroll={{ x: 'max-content' }}
      /&gt;
    );
  }, [selectedData]);

  const renderDataAnalysis = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Title level={5} className=&quot;text-white&quot;&gt;
        Data Analysis
      &lt;/Title&gt;

      &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-blue-400&quot;&gt;{dataStats.totalSize}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Size&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-green-400&quot;&gt;{dataStats.depth}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Max Depth&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-purple-400&quot;&gt;{dataStats.keyCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Total Keys&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;div className=&quot;text-center&quot;&gt;
            &lt;div className=&quot;text-2xl font-bold text-orange-400&quot;&gt;{dataStats.arrayCount}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;Arrays&lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      &lt;/div&gt;

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
          Type Distribution
        &lt;/Title&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {Object.entries(dataStats.typeDistribution).map(([type, count]) =&gt; (
            &lt;div key={type} className=&quot;flex items-center justify-between&quot;&gt;
              &lt;span className=&quot;text-gray-300&quot;&gt;{type}&lt;/span&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Progress
                  percent={(count / dataStats.keyCount) * 100}
                  strokeColor={getTypeColor(type)}
                  showInfo={false}
                  size=&quot;small&quot;
                  className=&quot;flex-1&quot;
                /&gt;
                &lt;span className=&quot;text-gray-400 text-sm w-8&quot;&gt;{count}&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const content = (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;EyeOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
            &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
              Data Inspector
            &lt;/Title&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={isFullscreen ? &lt;CompressOutlined /&gt; : &lt;ExpandOutlined /&gt;}
              onClick={() =&gt; setIsFullscreen(!isFullscreen)}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
            {onClose &amp;&amp; (
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                onClick={onClose}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              &gt;
                Close
              &lt;/Button&gt;
            )}
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center gap-4 text-sm&quot;&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Node:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{nodeId}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Type:&lt;/Text&gt;
            &lt;Tag color={getTypeColor(type)} className=&quot;ml-1&quot;&gt;
              {type}
            &lt;/Tag&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Size:&lt;/Text&gt;
            &lt;span className=&quot;text-white ml-1&quot;&gt;{formatSize(dataStats.totalSize)}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;div className=&quot;flex items-center gap-4 mb-4&quot;&gt;
          &lt;Search
            placeholder=&quot;Search data...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;flex-1&quot;
            prefix={&lt;SearchOutlined className=&quot;text-gray-400&quot; /&gt;}
          /&gt;

          &lt;Select value={filterType} onChange={setFilterType} className=&quot;w-32&quot;&gt;
            &lt;Option value=&quot;all&quot;&gt;All Types&lt;/Option&gt;
            &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
            &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
            &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
            &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
            &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select value={viewMode} onChange={setViewMode} className=&quot;w-24&quot;&gt;
            &lt;Option value=&quot;tree&quot;&gt;Tree&lt;/Option&gt;
            &lt;Option value=&quot;json&quot;&gt;JSON&lt;/Option&gt;
            &lt;Option value=&quot;table&quot;&gt;Table&lt;/Option&gt;
          &lt;/Select&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            &lt;Text className=&quot;text-gray-400&quot;&gt;Selected Path:&lt;/Text&gt;
            &lt;Text className=&quot;text-white font-mono text-sm&quot;&gt;{selectedPath || 'root'}&lt;/Text&gt;
          &lt;/div&gt;

          &lt;Space&gt;
            &lt;Tooltip title=&quot;Copy Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;CopyOutlined /&gt;}
                onClick={handleCopyData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
            &lt;Tooltip title=&quot;Export Data&quot;&gt;
              &lt;Button
                type=&quot;text&quot;
                size=&quot;small&quot;
                icon={&lt;DownloadOutlined /&gt;}
                onClick={handleExportData}
                className=&quot;text-gray-400 hover:text-gray-300&quot;
              /&gt;
            &lt;/Tooltip&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Tabs
          activeKey={viewMode}
          onChange={(key) =&gt; setViewMode(key as 'tree' | 'json' | 'table')}
          items={[
            {
              key: 'tree',
              label: 'Tree View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto border border-gray-600 rounded bg-gray-800&quot;&gt;
                  &lt;Tree
                    showLine
                    defaultExpandAll={false}
                    expandedKeys={expandedKeys}
                    selectedKeys={selectedPath ? [selectedPath] : []}
                    onSelect={handleTreeSelect}
                    onExpand={handleExpand}
                    className=&quot;p-4&quot;
                  &gt;
                    {renderTreeNodes(filteredTree)}
                  &lt;/Tree&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'json',
              label: 'JSON View',
              children: (
                &lt;div className=&quot;h-96 overflow-auto&quot;&gt;
                  &lt;JsonViewer
                    data={selectedData}
                    theme=&quot;dark&quot;
                    collapsed={2}
                    maxHeight=&quot;100%&quot;
                    enableClipboard
                  /&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'table',
              label: 'Table View',
              children: &lt;div className=&quot;h-96 overflow-auto&quot;&gt;{renderDataTable()}&lt;/div&gt;,
            },
          ]}
        /&gt;

        &lt;Divider className=&quot;my-4&quot; /&gt;

        {renderDataAnalysis()}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  if (isFullscreen) {
    return (
      &lt;Modal
        title=&quot;Data Inspector - Fullscreen&quot;
        open={isFullscreen}
        onCancel={() =&gt; setIsFullscreen(false)}
        footer={null}
        width=&quot;90vw&quot;
        style={{ top: 20 }}
        bodyStyle={{ height: '80vh', padding: 0 }}
      &gt;
        {content}
      &lt;/Modal&gt;
    );
  }

  return content;
};

// Helper functions

function convertToTree(data: any, path: string, _key: string): DataNode[] {
  if (data === null || data === undefined) {
    return [
      {
        key: path || 'root',
        title: 'null',
        value: data,
        type: 'null',
        size: 0,
        path: path || 'root',
        isLeaf: true,
      },
    ];
  }

  if (Array.isArray(data)) {
    return [
      {
        key: path || 'root',
        title: `Array (${data.length} items)`,
        value: data,
        type: 'array',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: data.flatMap((item, index) =&gt;
          convertToTree(item, `${path}[${index}]`, `[${index}]`)
        ),
      },
    ];
  }

  if (typeof data === 'object') {
    const entries = Object.entries(data);
    return [
      {
        key: path || 'root',
        title: `Object (${entries.length} properties)`,
        value: data,
        type: 'object',
        size: JSON.stringify(data).length,
        path: path || 'root',
        children: entries.flatMap(([key, value]) =&gt;
          convertToTree(value, path ? `${path}.${key}` : key, key)
        ),
      },
    ];
  }

  return [
    {
      key: path || 'root',
      title: String(data),
      value: data,
      type: typeof data,
      size: JSON.stringify(data).length,
      path: path || 'root',
      isLeaf: true,
    },
  ];
}

function filterTree(nodes: DataNode[], searchTerm: string, filterType: string): DataNode[] {
  if (!searchTerm &amp;&amp; filterType === 'all') return nodes;

  return nodes
    .filter((node) =&gt; {
      const matchesSearch =
        !searchTerm ||
        node.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        node.path.toLowerCase().includes(searchTerm.toLowerCase());

      const matchesType = filterType === 'all' || node.type === filterType;

      return matchesSearch &amp;&amp; matchesType;
    })
    .map((node) =&gt; ({
      ...node,
      children: node.children ? filterTree(node.children, searchTerm, filterType) : undefined,
    }));
}

function getDataByPath(data: any, path: string): any {
  if (path === 'root' || !path) return data;

  try {
    return path.split('.').reduce((obj, key) =&gt; {
      if (key.includes('[') &amp;&amp; key.includes(']')) {
        const arrayKey = key.substring(0, key.indexOf('['));
        const index = parseInt(key.substring(key.indexOf('[') + 1, key.indexOf(']')), 10);
        return obj[arrayKey][index];
      }
      return obj[key];
    }, data);
  } catch (_error) {
    return undefined;
  }
}

function analyzeData(data: any): {
  totalSize: number;
  depth: number;
  keyCount: number;
  arrayCount: number;
  typeDistribution: Record&lt;string, number&gt;;
} {
  const stats = {
    totalSize: JSON.stringify(data).length,
    depth: 0,
    keyCount: 0,
    arrayCount: 0,
    typeDistribution: {} as Record&lt;string, number&gt;,
  };

  function analyze(obj: any, currentDepth: number = 0) {
    stats.depth = Math.max(stats.depth, currentDepth);

    if (Array.isArray(obj)) {
      stats.arrayCount++;
      stats.typeDistribution.array = (stats.typeDistribution.array || 0) + 1;
      obj.forEach((item) =&gt; analyze(item, currentDepth + 1));
    } else if (obj !== null &amp;&amp; typeof obj === 'object') {
      stats.typeDistribution.object = (stats.typeDistribution.object || 0) + 1;
      Object.entries(obj).forEach(([_key, value]) =&gt; {
        stats.keyCount++;
        analyze(value, currentDepth + 1);
      });
    } else {
      const type = typeof obj;
      stats.typeDistribution[type] = (stats.typeDistribution[type] || 0) + 1;
    }
  }

  analyze(data);
  return stats;
}

function getTypeColor(type: string): string {
  switch (type) {
    case 'string':
      return 'green';
    case 'number':
      return 'blue';
    case 'boolean':
      return 'orange';
    case 'object':
      return 'purple';
    case 'array':
      return 'cyan';
    case 'null':
      return 'gray';
    case 'undefined':
      return 'red';
    default:
      return 'default';
  }
}

function formatSize(bytes: number): string {
  if (bytes &lt; 1024) return `${bytes} B`;
  if (bytes &lt; 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}

function getTableColumns(data: any[]): any[] {
  if (data.length === 0) return [];

  const sample = data[0];
  if (typeof sample !== 'object' || Array.isArray(sample)) {
    return [
      { title: 'Index', dataIndex: 'index', key: 'index' },
      { title: 'Value', dataIndex: '0', key: 'value' },
    ];
  }

  return Object.keys(sample).map((key) =&gt; ({
    title: key,
    dataIndex: key,
    key,
    render: (value: any) =&gt; {
      if (typeof value === 'object') {
        return &lt;JsonViewer data={value} theme=&quot;dark&quot; collapsed={1} maxHeight=&quot;100px&quot; /&gt;;
      }
      return String(value);
    },
  }));
}

export default DataInspector;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CustomEdge.tsx (Line 4:20 - Line 299:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 13:19 - Line 308:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup95"><code class="language-tsx text-sm text-gray-800">;

// Edge rendering constants
const EDGE_PADDING_BOTTOM = 80;
const EDGE_PADDING_X = 10;
const EDGE_BORDER_RADIUS = 6;
const HANDLE_SIZE = 20;

// Check if connection is backwards (target is to the left of source)
const isRightOfSourceHandle = (sourceX: number, targetX: number) =&gt; sourceX - HANDLE_SIZE &gt; targetX;

// Get edge render data with path selection logic
const getEdgeRenderData = (props: {
  sourceX: number;
  sourceY: number;
  sourcePosition: Position;
  targetX: number;
  targetY: number;
  targetPosition: Position;
  connectionType?: ConnectionTypeValue;
}) =&gt; {
  const {
    targetX,
    targetY,
    sourceX,
    sourceY,
    sourcePosition,
    targetPosition,
    connectionType = ConnectionType.Main,
  } = props;
  const isConnectorStraight = sourceY === targetY;

  // Use Bezier path for normal connections or non-main connections
  if (!isRightOfSourceHandle(sourceX, targetX) || connectionType !== ConnectionType.Main) {
    const segment = getBezierPath(props);
    return {
      segments: [segment],
      labelPosition: [segment[1], segment[2]],
      isConnectorStraight,
    };
  }

  // Connection is backwards and the source is on the right side
  // Use smooth step path to avoid overlapping the source node
  const firstSegmentTargetX = (sourceX + targetX) / 2;
  const firstSegmentTargetY = sourceY + EDGE_PADDING_BOTTOM;
  const firstSegment = getSmoothStepPath({
    sourceX,
    sourceY,
    targetX: firstSegmentTargetX,
    targetY: firstSegmentTargetY,
    sourcePosition,
    targetPosition: Position.Right,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  const secondSegment = getSmoothStepPath({
    sourceX: firstSegmentTargetX,
    sourceY: firstSegmentTargetY,
    targetX,
    targetY,
    sourcePosition: Position.Left,
    targetPosition,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  return {
    segments: [firstSegment, secondSegment],
    labelPosition: [firstSegmentTargetX, firstSegmentTargetY],
    isConnectorStraight,
  };
};

const CustomEdge: React.FC&lt;CustomEdgeProps&gt; = ({
  id,
  sourceX,
  sourceY,
  targetX,
  targetY,
  sourcePosition,
  targetPosition,
  style = {},
  data,
  selected = false,
  hovered = false,
  bringToFront = false,
}) =&gt; {
  const [isHovered, setIsHovered] = useState(false);
  const [isVisible, setIsVisible] = useState(false);
  const [delayedHovered, setDelayedHovered] = useState(hovered);
  const delayedHoveredTimeoutRef = useRef&lt;NodeJS.Timeout | null&gt;(null);
  const visibilityTimeoutRef = useRef&lt;NodeJS.Timeout | null&gt;(null);

  const connectionType = data?.connectionType || ConnectionType.Main;
  const status = data?.status;
  const isMainConnection = connectionType === ConnectionType.Main;

  // Implement visibility delay to prevent flickering
  useEffect(() =&gt; {
    visibilityTimeoutRef.current = setTimeout(() =&gt; {
      setIsVisible(true);
    }, 30);

    return () =&gt; {
      if (visibilityTimeoutRef.current) {
        clearTimeout(visibilityTimeoutRef.current);
      }
    };
  }, []);

  // Implement delayed hover state
  useEffect(() =&gt; {
    if (hovered) {
      if (delayedHoveredTimeoutRef.current) {
        clearTimeout(delayedHoveredTimeoutRef.current);
      }
      setDelayedHovered(true);
    } else {
      delayedHoveredTimeoutRef.current = setTimeout(() =&gt; {
        setDelayedHovered(false);
      }, 100);
    }

    return () =&gt; {
      if (delayedHoveredTimeoutRef.current) {
        clearTimeout(delayedHoveredTimeoutRef.current);
      }
    };
  }, [hovered]);

  // Calculate edge render data
  const renderData = useMemo(
    () =&gt;
      getEdgeRenderData({
        sourceX,
        sourceY,
        sourcePosition,
        targetX,
        targetY,
        targetPosition,
        connectionType,
      }),
    [sourceX, sourceY, sourcePosition, targetX, targetY, targetPosition, connectionType]
  );

  const { segments, labelPosition, isConnectorStraight } = renderData;

  // Dynamic edge styling
  const getEdgeColor = () =&gt; {
    if (status === 'success') return '#10b981'; // green
    if (status === 'error') return '#ef4444'; // red
    if (status === 'running') return '#f59e0b'; // yellow
    if (status === 'pinned') return '#8b5cf6'; // purple
    if (!isMainConnection) return '#6b7280'; // gray for supplemental
    if (selected) return '#1f2937'; // dark gray for selected
    return '#E2DFD0'; // default dark gray
  };

  const getEdgeStyle = () =&gt; ({
    ...style,
    ...(isMainConnection ? {} : { strokeDasharray: '8,8' }),
    strokeWidth: delayedHovered || isHovered ? 2 : 1,
    stroke: delayedHovered || isHovered ? '#3b82f6' : getEdgeColor(), // blue on hover
    fill: 'none',
    transition: 'stroke 0.3s ease, opacity 0.3s ease, stroke-width 0.3s ease',
    opacity: isVisible ? 1 : 0,
  });

  const handleMouseEnter = useCallback(() =&gt; {
    setIsHovered(true);
  }, []);

  const handleMouseLeave = useCallback(() =&gt; {
    setIsHovered(false);
  }, []);

  const handleDelete = useCallback(
    (event: React.MouseEvent) =&gt; {
      event.stopPropagation();
      event.preventDefault();
      if (data?.onDelete) {
        data.onDelete(id);
      }
    },
    [id, data]
  );

  const renderToolbar = (selected || delayedHovered || isHovered) &amp;&amp; data?.onDelete;

  return (
    &lt;g
      data-testid=&quot;edge&quot;
      className={bringToFront ? 'bring-to-front' : ''}
      style={{ zIndex: bringToFront ? 1 : 0 }}
    &gt;
      {/* Arrow marker definition */}
      &lt;defs&gt;
        &lt;marker
          id={`arrowhead-${id}`}
          markerWidth=&quot;10&quot;
          markerHeight=&quot;7&quot;
          refX=&quot;9&quot;
          refY=&quot;3.5&quot;
          orient=&quot;auto&quot;
        &gt;
          &lt;polygon
            points=&quot;0 0, 10 3.5, 0 7&quot;
            fill={delayedHovered || isHovered ? '#3b82f6' : getEdgeColor()}
            style={{
              transition: 'fill 0.3s ease',
            }}
          /&gt;
        &lt;/marker&gt;
      &lt;/defs&gt;
      {segments.map((segment, index) =&gt; (
        &lt;React.Fragment key={`${id}-${index}`}&gt;
          {/* Invisible wider path for easier hover detection */}
          &lt;path
            d={segment[0]}
            style={{
              stroke: 'transparent',
              strokeWidth: 40,
              fill: 'none',
            }}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          /&gt;

          {/* Visible edge path */}
          &lt;path
            d={segment[0]}
            style={getEdgeStyle()}
            className={`react-flow__edge-path ${isHovered || delayedHovered ? 'hovered' : ''}`}
            markerEnd={`url(#arrowhead-${id})`}
            pointerEvents=&quot;none&quot;
          /&gt;
        &lt;/React.Fragment&gt;
      ))}

      &lt;EdgeLabelRenderer&gt;
        {/* Toolbar with delete button */}
        {renderToolbar &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1]}px)`,
              pointerEvents: 'all',
              zIndex: delayedHovered || isHovered ? 1 : 0,
            }}
            className=&quot;nodrag nopan&quot;
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
          &gt;
            &lt;button
              onMouseDown={handleDelete}
              className=&quot;bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg transition-all duration-200 border-2 border-white hover:scale-110&quot;
              title=&quot;Delete connection&quot;
              style={{
                cursor: 'pointer',
                fontSize: '20px',
                fontWeight: 'bold',
              }}
            &gt;
              ×
            &lt;/button&gt;
          &lt;/div&gt;
        )}

        {/* Connection status indicator */}
        {status &amp;&amp; status !== 'success' &amp;&amp; (
          &lt;div
            style={{
              position: 'absolute',
              transform: `translate(-50%, -50%) translate(${labelPosition[0]}px, ${labelPosition[1] - (isConnectorStraight ? 20 : 0)}px)`,
              pointerEvents: 'none',
              zIndex: 999,
            }}
          &gt;
            &lt;div
              className={`
              w-2 h-2 rounded-full
              ${status === 'error' ? 'bg-red-500' : ''}
              ${status === 'running' ? 'bg-yellow-500 animate-pulse' : ''}
              ${status === 'pinned' ? 'bg-purple-500' : ''}
            `}
            /&gt;
          &lt;/div&gt;
        )}
      &lt;/EdgeLabelRenderer&gt;
    &lt;/g&gt;
  );
};

export default CustomEdge;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CredentialModal.tsx (Line 76:15 - Line 96:26), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 285:5 - Line 305:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup96"><code class="language-tsx text-sm text-gray-800">) {
      case 'gmail':
        return '📧';
      case 'google':
        return '🔍';
      case 'openaiApi':
        return '🤖';
      case 'anthropicApi':
        return '🧠';
      case 'googleAiApi':
        return '🔷';
      case 'azureOpenAiApi':
        return '☁️';
      case 'awsBedrockApi':
        return '🟠';
      default:
        return '🔑';
    }
  };

  // Tab content components</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ContainerNodePanel.tsx (Line 1:1 - Line 374:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/containernodepanel/ContainerNodePanel.tsx (Line 3:1 - Line 376:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup98"><code class="language-tsx text-sm text-gray-800">/**
 * Container Node Panel
 *
 * Side panel for adding and managing container nodes in the workflow editor.
 * Provides drag-and-drop functionality for creating loop, parallel, conditional,
 * try-catch, and batch containers.
 */

import {
  InfoCircleOutlined,
  PlusOutlined,
  QuestionCircleOutlined,
  ReloadOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  Collapse,
  Form,
  Input,
  InputNumber,
  Modal,
  Select,
  Space,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useState } from 'react';
import {
  type ContainerNodeConfig,
  createBatchContainer,
  createConditionalContainer,
  createLoopContainer,
  createParallelContainer,
  createTryCatchContainer,
} from '@/core/types/containerNodes';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Panel } = Collapse;

interface ContainerNodePanelProps {
  onAddContainer: (container: ContainerNodeConfig) =&gt; void;
  className?: string;
}

interface ContainerTemplate {
  id: string;
  name: string;
  description: string;
  icon: string;
  color: string;
  createFunction: (
    id: string,
    name: string,
    position: { x: number; y: number }
  ) =&gt; ContainerNodeConfig;
}

const ContainerNodePanel: React.FC&lt;ContainerNodePanelProps&gt; = ({ onAddContainer, className }) =&gt; {
  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);
  const [selectedTemplate, setSelectedTemplate] = useState&lt;ContainerTemplate | null&gt;(null);
  const [createForm] = Form.useForm();

  const containerTemplates: ContainerTemplate[] = [
    {
      id: 'loop',
      name: 'Loop Container',
      description: 'Execute child nodes repeatedly based on conditions',
      icon: '🔄',
      color: '#3b82f6',
      createFunction: createLoopContainer,
    },
    {
      id: 'parallel',
      name: 'Parallel Container',
      description: 'Execute child nodes simultaneously with concurrency control',
      icon: '⚡',
      color: '#22c55e',
      createFunction: createParallelContainer,
    },
    {
      id: 'conditional',
      name: 'Conditional Container',
      description: 'Execute child nodes based on conditional logic',
      icon: '❓',
      color: '#f59e0b',
      createFunction: createConditionalContainer,
    },
    {
      id: 'try-catch',
      name: 'Try-Catch Container',
      description: 'Handle errors and retry logic for child nodes',
      icon: '🛡️',
      color: '#ef4444',
      createFunction: createTryCatchContainer,
    },
    {
      id: 'batch',
      name: 'Batch Container',
      description: 'Process data in batches with size and delay controls',
      icon: '📦',
      color: '#a855f7',
      createFunction: createBatchContainer,
    },
  ];

  const handleDragStart = (event: React.DragEvent, template: ContainerTemplate) =&gt; {
    event.dataTransfer.setData(
      'application/reactflow',
      JSON.stringify({
        type: 'container',
        template: template.id,
        name: template.name,
      })
    );
    event.dataTransfer.effectAllowed = 'move';
  };

  const handleCreateContainer = (values: any) =&gt; {
    if (!selectedTemplate) return;

    const container = selectedTemplate.createFunction(
      `container_${Date.now()}`,
      values.name,
      { x: 100, y: 100 } // Default position
    );

    onAddContainer(container);
    setIsCreateModalOpen(false);
    createForm.resetFields();
    setSelectedTemplate(null);
  };

  const openCreateModal = (template: ContainerTemplate) =&gt; {
    setSelectedTemplate(template);
    setIsCreateModalOpen(true);
    createForm.setFieldsValue({
      name: template.name,
    });
  };

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-2&quot;&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Container Nodes
          &lt;/Title&gt;
          &lt;Tooltip title=&quot;Add custom container&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;PlusOutlined /&gt;}
              onClick={() =&gt; {
                // Open custom container creation
              }}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Advanced workflow structures for complex automation patterns
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4 space-y-4&quot;&gt;
        &lt;Collapse ghost defaultActiveKey={['containers']} className=&quot;bg-transparent&quot;&gt;
          &lt;Panel
            header={
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;span className=&quot;text-white font-medium&quot;&gt;Container Types&lt;/span&gt;
                &lt;Badge count={containerTemplates.length} size=&quot;small&quot; /&gt;
              &lt;/div&gt;
            }
            key=&quot;containers&quot;
            className=&quot;bg-gray-800&quot;
          &gt;
            &lt;div className=&quot;space-y-2&quot;&gt;
              {containerTemplates.map((template) =&gt; (
                &lt;Card
                  key={template.id}
                  size=&quot;small&quot;
                  className=&quot;bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors cursor-pointer&quot;
                  draggable
                  onDragStart={(e) =&gt; handleDragStart(e, template)}
                  onClick={() =&gt; openCreateModal(template)}
                &gt;
                  &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                    &lt;div
                      className=&quot;w-8 h-8 rounded-lg flex items-center justify-center text-lg&quot;
                      style={{ backgroundColor: `${template.color}20` }}
                    &gt;
                      {template.icon}
                    &lt;/div&gt;
                    &lt;div className=&quot;flex-1&quot;&gt;
                      &lt;div className=&quot;text-white font-medium text-sm&quot;&gt;{template.name}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{template.description}&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;flex gap-1&quot;&gt;
                      &lt;Tooltip title=&quot;Drag to canvas&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;ReloadOutlined /&gt;}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                      &lt;Tooltip title=&quot;Create directly&quot;&gt;
                        &lt;Button
                          type=&quot;text&quot;
                          size=&quot;small&quot;
                          icon={&lt;PlusOutlined /&gt;}
                          onClick={(e) =&gt; {
                            e.stopPropagation();
                            openCreateModal(template);
                          }}
                          className=&quot;text-gray-400 hover:text-gray-300&quot;
                        /&gt;
                      &lt;/Tooltip&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              ))}
            &lt;/div&gt;
          &lt;/Panel&gt;
        &lt;/Collapse&gt;

        &lt;div className=&quot;space-y-2&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-2&quot;&gt;
            Quick Actions
          &lt;/Title&gt;

          &lt;Space direction=&quot;vertical&quot; className=&quot;w-full&quot;&gt;
            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple loop container
                const container = createLoopContainer(`loop_${Date.now()}`, 'Quick Loop', {
                  x: 200,
                  y: 200,
                });
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ReloadOutlined className=&quot;text-blue-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Loop&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;10 iterations, 1s delay&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple parallel container
                const container = createParallelContainer(
                  `parallel_${Date.now()}`,
                  'Quick Parallel',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;ThunderboltOutlined className=&quot;text-green-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Parallel&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;5 concurrent executions&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;

            &lt;Button
              type=&quot;dashed&quot;
              className=&quot;w-full text-left h-auto p-3&quot;
              onClick={() =&gt; {
                // Create a simple conditional container
                const container = createConditionalContainer(
                  `conditional_${Date.now()}`,
                  'Quick Conditional',
                  { x: 200, y: 200 }
                );
                onAddContainer(container);
              }}
            &gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;QuestionCircleOutlined className=&quot;text-yellow-400&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white text-sm&quot;&gt;Quick Conditional&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Basic if-then logic&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;div className=&quot;pt-4 border-t border-gray-700&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2 text-gray-400 text-xs&quot;&gt;
            &lt;InfoCircleOutlined /&gt;
            &lt;span&gt;Drag containers to canvas or click to create directly&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Create Container Modal */}
      &lt;Modal
        title={`Create ${selectedTemplate?.name || 'Container'}`}
        open={isCreateModalOpen}
        onCancel={() =&gt; {
          setIsCreateModalOpen(false);
          setSelectedTemplate(null);
        }}
        onOk={() =&gt; createForm.submit()}
        width={500}
      &gt;
        &lt;Form form={createForm} layout=&quot;vertical&quot; onFinish={handleCreateContainer}&gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Container Name&quot;
            rules={[{ required: true, message: 'Please enter a container name' }]}
          &gt;
            &lt;Input placeholder=&quot;Enter container name&quot; /&gt;
          &lt;/Form.Item&gt;

          {selectedTemplate &amp;&amp; (
            &lt;div className=&quot;mb-4 p-3 bg-gray-50 rounded-lg&quot;&gt;
              &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                &lt;span className=&quot;text-lg&quot;&gt;{selectedTemplate.icon}&lt;/span&gt;
                &lt;span className=&quot;font-medium&quot;&gt;{selectedTemplate.name}&lt;/span&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-gray-600 text-sm&quot;&gt;{selectedTemplate.description}&lt;/div&gt;
            &lt;/div&gt;
          )}

          {selectedTemplate?.id === 'loop' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;loopLimit&quot; label=&quot;Maximum Iterations&quot; initialValue={10}&gt;
                &lt;InputNumber min={1} max={1000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;loopDelay&quot; label=&quot;Delay Between Iterations (ms)&quot; initialValue={1000}&gt;
                &lt;InputNumber min={0} max={10000} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}

          {selectedTemplate?.id === 'parallel' &amp;&amp; (
            &lt;&gt;
              &lt;Form.Item name=&quot;maxConcurrency&quot; label=&quot;Maximum Concurrency&quot; initialValue={5}&gt;
                &lt;InputNumber min={1} max={20} className=&quot;w-full&quot; /&gt;
              &lt;/Form.Item&gt;
              &lt;Form.Item name=&quot;parallelStrategy&quot; label=&quot;Execution Strategy&quot; initialValue=&quot;all&quot;&gt;
                &lt;Select&gt;
                  &lt;Select.Option value=&quot;all&quot;&gt;Wait for All&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;race&quot;&gt;First to Complete&lt;/Select.Option&gt;
                  &lt;Select.Option value=&quot;any&quot;&gt;Any to Complete&lt;/Select.Option&gt;
                &lt;/Select&gt;
              &lt;/Form.Item&gt;
            &lt;/&gt;
          )}
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default ContainerNodePanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConnectionLine.tsx (Line 28:2 - Line 91:15), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 25:2 - Line 88:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup99"><code class="language-tsx text-sm text-gray-800">= (props: {
  sourceX: number;
  sourceY: number;
  sourcePosition: Position;
  targetX: number;
  targetY: number;
  targetPosition: Position;
  connectionType?: ConnectionTypeValue;
}) =&gt; {
  const {
    targetX,
    targetY,
    sourceX,
    sourceY,
    sourcePosition,
    targetPosition,
    connectionType = ConnectionType.Main,
  } = props;
  const isConnectorStraight = sourceY === targetY;

  // Use Bezier path for normal connections or non-main connections
  if (!isRightOfSourceHandle(sourceX, targetX) || connectionType !== ConnectionType.Main) {
    const segment = getBezierPath(props);
    return {
      segments: [segment],
      labelPosition: [segment[1], segment[2]],
      isConnectorStraight,
    };
  }

  // Connection is backwards and the source is on the right side
  // Use smooth step path to avoid overlapping the source node
  const firstSegmentTargetX = (sourceX + targetX) / 2;
  const firstSegmentTargetY = sourceY + EDGE_PADDING_BOTTOM;
  const firstSegment = getSmoothStepPath({
    sourceX,
    sourceY,
    targetX: firstSegmentTargetX,
    targetY: firstSegmentTargetY,
    sourcePosition,
    targetPosition: Position.Right,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  const secondSegment = getSmoothStepPath({
    sourceX: firstSegmentTargetX,
    sourceY: firstSegmentTargetY,
    targetX,
    targetY,
    sourcePosition: Position.Left,
    targetPosition,
    borderRadius: EDGE_BORDER_RADIUS,
    offset: EDGE_PADDING_X,
  });

  return {
    segments: [firstSegment, secondSegment],
    labelPosition: [firstSegmentTargetX, firstSegmentTargetY],
    isConnectorStraight,
  };
};

const ConnectionLine</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConnectionLine.tsx (Line 146:2 - Line 163:5), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/customedge/CustomEdge.tsx (Line 213:2 - Line 230:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup100"><code class="language-tsx text-sm text-gray-800">
          markerWidth=&quot;10&quot;
          markerHeight=&quot;7&quot;
          refX=&quot;9&quot;
          refY=&quot;3.5&quot;
          orient=&quot;auto&quot;
        &gt;
          &lt;polygon
            points=&quot;0 0, 10 3.5, 0 7&quot;
            fill={isMainConnection ? '#374151' : '#6b7280'}
            style={{
              transition: 'fill 0.3s ease',
            }}
          /&gt;
        &lt;/marker&gt;
      &lt;/defs&gt;
      {segments.map((segment, index) =&gt; (
        &lt;path</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionalBranchingPanel.tsx (Line 1:1 - Line 772:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditionalbranchingpanel/ConditionalBranchingPanel.tsx (Line 5:1 - Line 776:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup102"><code class="language-tsx text-sm text-gray-800">/**
 * Conditional Workflow Branching Panel
 *
 * Advanced conditional logic builder with visual branch creation,
 * dynamic routing, expression builder, and complex condition handling.
 */

import {
  BranchesOutlined,
  CheckCircleOutlined,
  CloseCircleOutlined,
  CodeOutlined,
  DeleteOutlined,
  EditOutlined,
  PlayCircleOutlined,
  PlusOutlined,
  QuestionCircleOutlined,
  SettingOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Col,
  Divider,
  Form,
  Input,
  InputNumber,
  List,
  Modal,
  message,
  Radio,
  Row,
  Select,
  Space,
  Switch,
  Tabs,
  Tag,
  Tree,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type { WorkflowNodeInstance } from '@/core/nodes/types';
import { useLeanWorkflowStore } from '@/core/stores/leanWorkflowStore';
import { colors } from '@/design-system/tokens';
import { cn } from '@/design-system/utils';

const { TabPane } = Tabs;
const { Option } = Select;
const { TextArea } = Input;
const { Text } = Typography;

interface ConditionalBranchingPanelProps {
  workflowId: string;
  visible: boolean;
  onClose: () =&gt; void;
  onAddBranch: (branchConfig: BranchConfiguration) =&gt; void;
}

export interface BranchConfiguration {
  id: string;
  name: string;
  description?: string;
  sourceNodeId: string;
  conditions: BranchCondition[];
  logicalOperator: 'AND' | 'OR';
  defaultBranch: boolean;
  priority: number;
  targetNodes: string[];
  metadata: Record&lt;string, any&gt;;
}

export interface BranchCondition {
  id: string;
  field: string;
  operator: ComparisonOperator;
  value: any;
  dataType: 'string' | 'number' | 'boolean' | 'date' | 'array' | 'object';
  negate?: boolean;
  caseSensitive?: boolean;
}

type ComparisonOperator =
  | 'equals'
  | 'not_equals'
  | 'greater_than'
  | 'less_than'
  | 'greater_equal'
  | 'less_equal'
  | 'contains'
  | 'starts_with'
  | 'ends_with'
  | 'regex'
  | 'in_array'
  | 'is_empty'
  | 'is_not_empty'
  | 'exists'
  | 'not_exists';

export const ConditionalBranchingPanel: React.FC&lt;ConditionalBranchingPanelProps&gt; = ({
  workflowId,
  visible,
  onClose,
  onAddBranch,
}) =&gt; {
  const { nodes, edges } = useLeanWorkflowStore();
  const [branches, setBranches] = useState&lt;BranchConfiguration[]&gt;([]);
  const [selectedBranch, setSelectedBranch] = useState&lt;BranchConfiguration | null&gt;(null);
  const [activeTab, setActiveTab] = useState('builder');
  const [form] = Form.useForm();
  const [conditionForm] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [editingBranch, setEditingBranch] = useState&lt;string | null&gt;(null);
  const [testModalVisible, setTestModalVisible] = useState(false);

  useEffect(() =&gt; {
    if (visible) {
      loadExistingBranches();
    }
  }, [visible, loadExistingBranches]);

  const loadExistingBranches = () =&gt; {
    // Extract conditional branches from existing workflow
    const conditionNodes = nodes.filter(
      (node) =&gt;
        node.parameters?.type === 'condition' ||
        node.parameters?.integrationData?.id === 'condition' ||
        node.type === 'condition'
    );

    const extractedBranches: BranchConfiguration[] = conditionNodes.map((node) =&gt; ({
      id: node.id,
      name: node.parameters?.name || node.name || `Branch from ${node.id}`,
      description: node.parameters?.description || '',
      sourceNodeId: node.id,
      conditions: extractConditionsFromNode(node),
      logicalOperator: 'AND',
      defaultBranch: false,
      priority: 1,
      targetNodes: getTargetNodes(node.id),
      metadata: {},
    }));

    setBranches(extractedBranches);
  };

  const extractConditionsFromNode = (node: WorkflowNodeInstance): BranchCondition[] =&gt; {
    const properties = node.parameters?.properties || node.parameters || {};
    const conditions: BranchCondition[] = [];

    // Extract conditions from node properties
    if (properties.condition) {
      // Simple condition
      conditions.push({
        id: `condition_${Date.now()}`,
        field: properties.field || 'data',
        operator: properties.operator || 'equals',
        value: properties.value,
        dataType: properties.dataType || 'string',
        negate: properties.negate || false,
        caseSensitive: properties.caseSensitive !== false,
      });
    } else if (properties.conditions) {
      // Multiple conditions
      properties.conditions.forEach((cond: any, index: number) =&gt; {
        conditions.push({
          id: `condition_${Date.now()}_${index}`,
          field: cond.field,
          operator: cond.operator,
          value: cond.value,
          dataType: cond.dataType || 'string',
          negate: cond.negate || false,
          caseSensitive: cond.caseSensitive !== false,
        });
      });
    }

    return conditions;
  };

  const getTargetNodes = (sourceNodeId: string): string[] =&gt; {
    return edges.filter((edge) =&gt; edge.source === sourceNodeId).map((edge) =&gt; edge.target);
  };

  const handleCreateBranch = async (values: any) =&gt; {
    setLoading(true);
    try {
      const branchConfig: BranchConfiguration = {
        id: editingBranch || `branch_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`,
        name: values.name,
        description: values.description,
        sourceNodeId: values.sourceNodeId,
        conditions: values.conditions || [],
        logicalOperator: values.logicalOperator || 'AND',
        defaultBranch: values.defaultBranch || false,
        priority: values.priority || 1,
        targetNodes: values.targetNodes || [],
        metadata: {
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
        },
      };

      if (editingBranch) {
        setBranches((prev) =&gt; prev.map((b) =&gt; (b.id === editingBranch ? branchConfig : b)));
        message.success('Branch updated successfully');
      } else {
        setBranches((prev) =&gt; [...prev, branchConfig]);
        message.success('Branch created successfully');
      }

      onAddBranch(branchConfig);
      form.resetFields();
      setEditingBranch(null);
    } catch (_error) {
      message.error('Failed to create branch');
    } finally {
      setLoading(false);
    }
  };

  const handleAddCondition = (values: any) =&gt; {
    const condition: BranchCondition = {
      id: `condition_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`,
      field: values.field,
      operator: values.operator,
      value: values.value,
      dataType: values.dataType,
      negate: values.negate || false,
      caseSensitive: values.caseSensitive !== false,
    };

    const currentConditions = form.getFieldValue('conditions') || [];
    form.setFieldsValue({ conditions: [...currentConditions, condition] });
    conditionForm.resetFields();
  };

  const handleRemoveCondition = (conditionId: string) =&gt; {
    const currentConditions = form.getFieldValue('conditions') || [];
    const updatedConditions = currentConditions.filter(
      (c: BranchCondition) =&gt; c.id !== conditionId
    );
    form.setFieldsValue({ conditions: updatedConditions });
  };

  const handleTestBranch = async (branch: BranchConfiguration, testData: any) =&gt; {
    try {
      const result = evaluateBranchConditions(branch, testData);
      message.success(`Branch evaluation result: ${result ? 'TRUE' : 'FALSE'}`);
      return result;
    } catch (_error) {
      message.error('Branch test failed');
      return false;
    }
  };

  const evaluateBranchConditions = (branch: BranchConfiguration, data: any): boolean =&gt; {
    if (branch.conditions.length === 0) return true;

    const results = branch.conditions.map((condition) =&gt; evaluateCondition(condition, data));

    return branch.logicalOperator === 'AND' ? results.every(Boolean) : results.some(Boolean);
  };

  const evaluateCondition = (condition: BranchCondition, data: any): boolean =&gt; {
    const fieldValue = getNestedValue(data, condition.field);
    let result = false;

    switch (condition.operator) {
      case 'equals':
        result = fieldValue === condition.value;
        break;
      case 'not_equals':
        result = fieldValue !== condition.value;
        break;
      case 'greater_than':
        result = Number(fieldValue) &gt; Number(condition.value);
        break;
      case 'less_than':
        result = Number(fieldValue) &lt; Number(condition.value);
        break;
      case 'greater_equal':
        result = Number(fieldValue) &gt;= Number(condition.value);
        break;
      case 'less_equal':
        result = Number(fieldValue) &lt;= Number(condition.value);
        break;
      case 'contains': {
        const searchValue = condition.caseSensitive
          ? condition.value
          : condition.value.toLowerCase();
        const searchIn = condition.caseSensitive
          ? String(fieldValue)
          : String(fieldValue).toLowerCase();
        result = searchIn.includes(searchValue);
        break;
      }
      case 'starts_with':
        result = String(fieldValue).startsWith(String(condition.value));
        break;
      case 'ends_with':
        result = String(fieldValue).endsWith(String(condition.value));
        break;
      case 'regex':
        result = new RegExp(condition.value).test(String(fieldValue));
        break;
      case 'in_array':
        result = Array.isArray(condition.value) &amp;&amp; condition.value.includes(fieldValue);
        break;
      case 'is_empty':
        result =
          !fieldValue ||
          fieldValue === '' ||
          (Array.isArray(fieldValue) &amp;&amp; fieldValue.length === 0);
        break;
      case 'is_not_empty':
        result =
          !!fieldValue &amp;&amp;
          fieldValue !== '' &amp;&amp;
          (!Array.isArray(fieldValue) || fieldValue.length &gt; 0);
        break;
      case 'exists':
        result = fieldValue !== undefined &amp;&amp; fieldValue !== null;
        break;
      case 'not_exists':
        result = fieldValue === undefined || fieldValue === null;
        break;
      default:
        result = false;
    }

    return condition.negate ? !result : result;
  };

  const getNestedValue = (obj: any, path: string): any =&gt; {
    return path.split('.').reduce((current, key) =&gt; current?.[key], obj);
  };

  const renderBranchBuilder = () =&gt; (
    &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;&gt;
      &lt;Card title=&quot;Branch Configuration&quot; size=&quot;small&quot;&gt;
        &lt;Form
          form={form}
          layout=&quot;vertical&quot;
          onFinish={handleCreateBranch}
          initialValues={{
            logicalOperator: 'AND',
            defaultBranch: false,
            priority: 1,
            conditions: [],
          }}
        &gt;
          &lt;Form.Item
            name=&quot;name&quot;
            label=&quot;Branch Name&quot;
            rules={[{ required: true, message: 'Please enter a branch name' }]}
          &gt;
            &lt;Input placeholder=&quot;Success path&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
            &lt;TextArea placeholder=&quot;Handles successful API responses&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;sourceNodeId&quot;
            label=&quot;Source Node&quot;
            rules={[{ required: true, message: 'Please select a source node' }]}
          &gt;
            &lt;Select placeholder=&quot;Select node to branch from&quot;&gt;
              {nodes.map((node) =&gt; (
                &lt;Option key={node.id} value={node.id}&gt;
                  {node.parameters?.name || node.name || node.id}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item name=&quot;logicalOperator&quot; label=&quot;Condition Logic&quot;&gt;
            &lt;Radio.Group&gt;
              &lt;Radio value=&quot;AND&quot;&gt;ALL conditions must be true (AND)&lt;/Radio&gt;
              &lt;Radio value=&quot;OR&quot;&gt;ANY condition must be true (OR)&lt;/Radio&gt;
            &lt;/Radio.Group&gt;
          &lt;/Form.Item&gt;

          &lt;Divider&gt;Conditions&lt;/Divider&gt;

          &lt;Form.Item dependencies={['conditions']} noStyle&gt;
            {({ getFieldValue }) =&gt; {
              const conditions: BranchCondition[] = getFieldValue('conditions') || [];
              return (
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {conditions.map((condition) =&gt; (
                    &lt;Card key={condition.id} size=&quot;small&quot; className=&quot;border-l-4 border-l-blue-500&quot;&gt;
                      &lt;div className=&quot;flex justify-between items-start&quot;&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                            &lt;Text strong&gt;{condition.field}&lt;/Text&gt;
                            &lt;Tag color=&quot;blue&quot;&gt;{condition.operator}&lt;/Tag&gt;
                            &lt;Text code&gt;{JSON.stringify(condition.value)}&lt;/Text&gt;
                            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NEGATED&lt;/Tag&gt;}
                          &lt;/Space&gt;
                        &lt;/div&gt;
                        &lt;Button
                          type=&quot;link&quot;
                          danger
                          icon={&lt;DeleteOutlined /&gt;}
                          onClick={() =&gt; handleRemoveCondition(condition.id)}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Card&gt;
                  ))}
                  {conditions.length === 0 &amp;&amp; (
                    &lt;Alert
                      message=&quot;No conditions defined&quot;
                      description=&quot;Add conditions to control when this branch should be taken&quot;
                      type=&quot;info&quot;
                      showIcon
                    /&gt;
                  )}
                &lt;/div&gt;
              );
            }}
          &lt;/Form.Item&gt;

          &lt;Card title=&quot;Add Condition&quot; size=&quot;small&quot; className=&quot;mt-4&quot;&gt;
            &lt;Form form={conditionForm} layout=&quot;vertical&quot; onFinish={handleAddCondition}&gt;
              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;field&quot; label=&quot;Field Path&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;data.status&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;dataType&quot; label=&quot;Data Type&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;string&quot;&gt;String&lt;/Option&gt;
                      &lt;Option value=&quot;number&quot;&gt;Number&lt;/Option&gt;
                      &lt;Option value=&quot;boolean&quot;&gt;Boolean&lt;/Option&gt;
                      &lt;Option value=&quot;date&quot;&gt;Date&lt;/Option&gt;
                      &lt;Option value=&quot;array&quot;&gt;Array&lt;/Option&gt;
                      &lt;Option value=&quot;object&quot;&gt;Object&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;operator&quot; label=&quot;Operator&quot; rules={[{ required: true }]}&gt;
                    &lt;Select&gt;
                      &lt;Option value=&quot;equals&quot;&gt;Equals (=)&lt;/Option&gt;
                      &lt;Option value=&quot;not_equals&quot;&gt;Not Equals (≠)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_than&quot;&gt;Greater Than (&amp;gt;)&lt;/Option&gt;
                      &lt;Option value=&quot;less_than&quot;&gt;Less Than (&amp;lt;)&lt;/Option&gt;
                      &lt;Option value=&quot;greater_equal&quot;&gt;Greater Equal (≥)&lt;/Option&gt;
                      &lt;Option value=&quot;less_equal&quot;&gt;Less Equal (≤)&lt;/Option&gt;
                      &lt;Option value=&quot;contains&quot;&gt;Contains&lt;/Option&gt;
                      &lt;Option value=&quot;starts_with&quot;&gt;Starts With&lt;/Option&gt;
                      &lt;Option value=&quot;ends_with&quot;&gt;Ends With&lt;/Option&gt;
                      &lt;Option value=&quot;regex&quot;&gt;Regex Match&lt;/Option&gt;
                      &lt;Option value=&quot;in_array&quot;&gt;In Array&lt;/Option&gt;
                      &lt;Option value=&quot;is_empty&quot;&gt;Is Empty&lt;/Option&gt;
                      &lt;Option value=&quot;is_not_empty&quot;&gt;Is Not Empty&lt;/Option&gt;
                      &lt;Option value=&quot;exists&quot;&gt;Exists&lt;/Option&gt;
                      &lt;Option value=&quot;not_exists&quot;&gt;Not Exists&lt;/Option&gt;
                    &lt;/Select&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;value&quot; label=&quot;Value&quot; rules={[{ required: true }]}&gt;
                    &lt;Input placeholder=&quot;success&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Row gutter={16}&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;negate&quot; valuePropName=&quot;checked&quot;&gt;
                    &lt;Switch checkedChildren=&quot;Negate&quot; unCheckedChildren=&quot;Normal&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
                &lt;Col span={12}&gt;
                  &lt;Form.Item name=&quot;caseSensitive&quot; valuePropName=&quot;checked&quot; initialValue={true}&gt;
                    &lt;Switch checkedChildren=&quot;Case Sensitive&quot; unCheckedChildren=&quot;Ignore Case&quot; /&gt;
                  &lt;/Form.Item&gt;
                &lt;/Col&gt;
              &lt;/Row&gt;

              &lt;Form.Item&gt;
                &lt;Button type=&quot;dashed&quot; htmlType=&quot;submit&quot; icon={&lt;PlusOutlined /&gt;} block&gt;
                  Add Condition
                &lt;/Button&gt;
              &lt;/Form.Item&gt;
            &lt;/Form&gt;
          &lt;/Card&gt;

          &lt;Divider&gt;Advanced Settings&lt;/Divider&gt;

          &lt;Row gutter={16}&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;priority&quot; label=&quot;Priority&quot;&gt;
                &lt;InputNumber min={1} max={10} /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Form.Item name=&quot;defaultBranch&quot; label=&quot;Default Branch&quot; valuePropName=&quot;checked&quot;&gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={loading}&gt;
                {editingBranch ? 'Update Branch' : 'Create Branch'}
              &lt;/Button&gt;
              &lt;Button
                onClick={() =&gt; {
                  form.resetFields();
                  setEditingBranch(null);
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
            &lt;/Space&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Card&gt;

      &lt;Card title=&quot;Existing Branches&quot; size=&quot;small&quot;&gt;
        &lt;List
          dataSource={branches}
          renderItem={(branch) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;PlayCircleOutlined /&gt;}
                  onClick={() =&gt; {
                    setSelectedBranch(branch);
                    setTestModalVisible(true);
                  }}
                &gt;
                  Test
                &lt;/Button&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  icon={&lt;EditOutlined /&gt;}
                  onClick={() =&gt; {
                    setEditingBranch(branch.id);
                    form.setFieldsValue(branch);
                  }}
                /&gt;,
                &lt;Button
                  type=&quot;link&quot;
                  danger
                  icon={&lt;DeleteOutlined /&gt;}
                  onClick={() =&gt; {
                    setBranches((prev) =&gt; prev.filter((b) =&gt; b.id !== branch.id));
                    message.success('Branch deleted');
                  }}
                /&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                title={
                  &lt;Space&gt;
                    &lt;BranchesOutlined /&gt;
                    {branch.name}
                    &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
                      {branch.logicalOperator}
                    &lt;/Tag&gt;
                    {branch.defaultBranch &amp;&amp; &lt;Tag color=&quot;gold&quot;&gt;DEFAULT&lt;/Tag&gt;}
                  &lt;/Space&gt;
                }
                description={
                  &lt;Space direction=&quot;vertical&quot; size=&quot;small&quot;&gt;
                    {branch.description}
                    &lt;Text type=&quot;secondary&quot;&gt;
                      {branch.conditions.length} condition(s) • Priority: {branch.priority}
                    &lt;/Text&gt;
                    &lt;div&gt;
                      {branch.conditions.map((condition) =&gt; (
                        &lt;Tag key={condition.id} color=&quot;geekblue&quot; style={{ marginBottom: 4 }}&gt;
                          {condition.field} {condition.operator} {JSON.stringify(condition.value)}
                        &lt;/Tag&gt;
                      ))}
                    &lt;/div&gt;
                  &lt;/Space&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
          locale={{ emptyText: 'No branches configured' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderExpressionBuilder = () =&gt; (
    &lt;Card title=&quot;JavaScript Expression Builder&quot; size=&quot;small&quot;&gt;
      &lt;Alert
        message=&quot;Advanced Expression Mode&quot;
        description=&quot;Write custom JavaScript expressions for complex conditional logic. Use 'data' object to access workflow data.&quot;
        type=&quot;info&quot;
        showIcon
        style={{ marginBottom: 16 }}
      /&gt;

      &lt;Form layout=&quot;vertical&quot;&gt;
        &lt;Form.Item label=&quot;Expression&quot;&gt;
          &lt;TextArea
            rows={10}
            placeholder={`// Example expressions:
return data.status === 'success' &amp;&amp; data.count &gt; 10;

// Multi-line logic
if (data.user &amp;&amp; data.user.role === 'admin') {
  return data.permissions.includes('write');
}
return false;

// Array operations
return data.items.filter(item =&gt; item.active).length &gt; 0;

// Date comparisons
const today = new Date();
const itemDate = new Date(data.createdAt);
return (today.getTime() - itemDate.getTime()) &lt; (24 * 60 * 60 * 1000);`}
            style={{ fontFamily: 'monospace' }}
          /&gt;
        &lt;/Form.Item&gt;

        &lt;Form.Item&gt;
          &lt;Space&gt;
            &lt;Button type=&quot;primary&quot; icon={&lt;PlayCircleOutlined /&gt;}&gt;
              Test Expression
            &lt;/Button&gt;
            &lt;Button icon={&lt;CodeOutlined /&gt;}&gt;Validate Syntax&lt;/Button&gt;
            &lt;Button&gt;Save as Template&lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/Form.Item&gt;
      &lt;/Form&gt;
    &lt;/Card&gt;
  );

  const renderVisualFlowChart = () =&gt; {
    const treeData = branches.map((branch) =&gt; ({
      title: (
        &lt;Space&gt;
          &lt;BranchesOutlined /&gt;
          {branch.name}
          &lt;Tag color={branch.defaultBranch ? 'gold' : 'blue'}&gt;
            {branch.conditions.length} conditions
          &lt;/Tag&gt;
        &lt;/Space&gt;
      ),
      key: branch.id,
      children: branch.conditions.map((condition) =&gt; ({
        title: (
          &lt;Space&gt;
            &lt;QuestionCircleOutlined /&gt;
            {condition.field} {condition.operator} {JSON.stringify(condition.value)}
            {condition.negate &amp;&amp; &lt;Tag color=&quot;orange&quot;&gt;NOT&lt;/Tag&gt;}
          &lt;/Space&gt;
        ),
        key: condition.id,
        icon: condition.negate ? &lt;CloseCircleOutlined /&gt; : &lt;CheckCircleOutlined /&gt;,
      })),
    }));

    return (
      &lt;Card title=&quot;Branch Flow Visualization&quot; size=&quot;small&quot;&gt;
        &lt;Tree
          showIcon
          defaultExpandAll
          treeData={treeData}
          style={{ background: colors.gray[50], padding: 16, borderRadius: 8 }}
        /&gt;
      &lt;/Card&gt;
    );
  };

  return (
    &lt;&gt;
      &lt;Modal
        title={
          &lt;Space&gt;
            &lt;BranchesOutlined /&gt;
            Conditional Branching
          &lt;/Space&gt;
        }
        open={visible}
        onCancel={onClose}
        width={1400}
        footer={null}
        className={cn('conditional-branching-panel')}
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab}&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;SettingOutlined /&gt;
                Branch Builder
              &lt;/span&gt;
            }
            key=&quot;builder&quot;
          &gt;
            {renderBranchBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CodeOutlined /&gt;
                Expression Builder
              &lt;/span&gt;
            }
            key=&quot;expression&quot;
          &gt;
            {renderExpressionBuilder()}
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;BranchesOutlined /&gt;
                Flow Visualization
              &lt;/span&gt;
            }
            key=&quot;visualization&quot;
          &gt;
            {renderVisualFlowChart()}
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Modal&gt;

      &lt;Modal
        title=&quot;Test Branch Logic&quot;
        open={testModalVisible}
        onCancel={() =&gt; setTestModalVisible(false)}
        onOk={() =&gt; {
          if (selectedBranch) {
            const testData = { status: 'success', count: 15 }; // Example test data
            handleTestBranch(selectedBranch, testData);
            setTestModalVisible(false);
          }
        }}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Test Data (JSON)&quot;&gt;
            &lt;TextArea
              rows={8}
              placeholder={JSON.stringify(
                {
                  status: 'success',
                  count: 15,
                  user: { role: 'admin' },
                  timestamp: new Date().toISOString(),
                },
                null,
                2
              )}
            /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/ConditionInputPanel.tsx (Line 3:18 - Line 563:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 5:19 - Line 565:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup104"><code class="language-tsx text-sm text-gray-800">;

interface ConditionInputPanelProps {
  connectedInputNodes: any[];
  selectedNode?: any;
  testResults?: any;
}

const ConditionInputPanel: React.FC&lt;ConditionInputPanelProps&gt; = ({ connectedInputNodes }) =&gt; {
  // Default to expanding the first node that has data
  const [expandedNode, setExpandedNode] = useState&lt;string | null&gt;(() =&gt; {
    const firstNodeWithData = connectedInputNodes.find(
      (node) =&gt; node?.data?.outputData || node?.data?.testResults?.data
    );
    return firstNodeWithData?.id || null;
  });
  const [selectedField, setSelectedField] = useState&lt;string | null&gt;(null);

  // Debug logging
  React.useEffect(() =&gt; {}, []);

  if (connectedInputNodes.length === 0) {
    return (
      &lt;div className=&quot;h-full flex items-center justify-center text-gray-400&quot;&gt;
        &lt;div className=&quot;text-center space-y-3&quot;&gt;
          &lt;div className=&quot;text-3xl&quot;&gt;⚖️&lt;/div&gt;
          &lt;div className=&quot;text-sm font-medium&quot;&gt;No Input Connections&lt;/div&gt;
          &lt;div className=&quot;text-xs text-gray-500 max-w-48&quot;&gt;
            Connect nodes to provide data for condition evaluation
          &lt;/div&gt;
          &lt;div className=&quot;mt-4 text-xs text-blue-400&quot;&gt;
            💡 Conditions evaluate input data to make decisions
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      {/* === CONDITION OVERVIEW === */}
      &lt;div className=&quot;bg-purple-900/20 border border-purple-600/30 rounded-lg p-3&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-2 mb-2&quot;&gt;
          &lt;span className=&quot;text-lg&quot;&gt;⚖️&lt;/span&gt;
          &lt;div className=&quot;text-sm font-medium text-purple-200&quot;&gt;Condition Evaluation&lt;/div&gt;
          &lt;span className=&quot;px-2 py-1 bg-purple-800 text-purple-100 rounded text-xs&quot;&gt;
            {connectedInputNodes.length} input
            {connectedInputNodes.length !== 1 ? 's' : ''}
          &lt;/span&gt;
        &lt;/div&gt;
        &lt;div className=&quot;text-xs text-purple-300&quot;&gt;
          This data will be evaluated by the condition logic. Use field references in your condition
          expressions.
        &lt;/div&gt;
      &lt;/div&gt;

      {/* === DATA ANALYSIS SUMMARY === */}
      {connectedInputNodes.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;bg-gray-800 rounded-lg border border-gray-600 p-3&quot;&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200 mb-3 flex items-center space-x-2&quot;&gt;
            &lt;span&gt;📊&lt;/span&gt;
            &lt;span&gt;Available Data Fields&lt;/span&gt;
          &lt;/div&gt;
          &lt;DataFieldsSummary
            connectedInputNodes={connectedInputNodes}
            onFieldSelect={setSelectedField}
          /&gt;
        &lt;/div&gt;
      )}

      {/* === CONNECTED INPUT NODES === */}
      &lt;div className=&quot;space-y-3&quot;&gt;
        &lt;div className=&quot;text-sm font-semibold text-gray-100 flex items-center space-x-2&quot;&gt;
          &lt;span&gt;📥&lt;/span&gt;
          &lt;span&gt;Input Data Sources&lt;/span&gt;
        &lt;/div&gt;

        {connectedInputNodes.map((node, index) =&gt; {
          // More robust data detection
          const outputData = node?.data?.outputData;
          const testResultsData = node?.data?.testResults?.data;
          const hasOutputData = outputData || testResultsData;

          // Prefer outputData over testResults, but use either if available
          let nodeData = null;
          if (outputData) {
            nodeData = outputData;
          } else if (testResultsData) {
            nodeData = testResultsData;
          }

          const isExpanded = expandedNode === node?.id;

          return (
            &lt;div
              key={node?.id || index}
              className=&quot;bg-gray-800 rounded-lg border border-gray-600 overflow-hidden&quot;
            &gt;
              {/* === NODE HEADER === */}
              &lt;div
                className=&quot;p-3 border-b border-gray-600 bg-gray-750 cursor-pointer hover:bg-gray-700 transition-colors&quot;
                onClick={() =&gt; setExpandedNode(isExpanded ? null : node?.id)}
              &gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
                    &lt;span className=&quot;text-xl&quot; title={node?.data?.label || 'Node Icon'}&gt;
                      {getNodeIcon(node)}
                    &lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;
                        {node?.data?.label || 'Unnamed Node'}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{getNodeTypeDisplay(node)}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    {hasOutputData ? (
                      &lt;span className=&quot;px-2 py-1 bg-green-800 text-green-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;✓&lt;/span&gt;
                        &lt;span&gt;Data Available&lt;/span&gt;
                      &lt;/span&gt;
                    ) : (
                      &lt;span className=&quot;px-2 py-1 bg-yellow-800 text-yellow-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;⏳&lt;/span&gt;
                        &lt;span&gt;No Data&lt;/span&gt;
                      &lt;/span&gt;
                    )}
                    &lt;span
                      className={`transform transition-transform text-gray-400 ${isExpanded ? 'rotate-180' : ''}`}
                    &gt;
                      ▼
                    &lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* === EXPANDABLE DATA CONTENT === */}
              {isExpanded &amp;&amp; (
                &lt;div className=&quot;p-3&quot;&gt;
                  {hasOutputData ? (
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      {/* Enhanced JSON viewer for raw data */}
                      &lt;JsonViewer data={nodeData} maxHeight=&quot;400px&quot; enableClipboard={true} /&gt;

                      {/* Then show the formatted renderer */}
                      &lt;ConditionDataRenderer
                        data={nodeData}
                        nodeType={getNodeType(node)}
                        selectedField={selectedField}
                        onFieldSelect={setSelectedField}
                      /&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;
                      &lt;div className=&quot;text-sm&quot;&gt;No output data available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-1&quot;&gt;Test the connected node to generate data&lt;/div&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              )}
            &lt;/div&gt;
          );
        })}
      &lt;/div&gt;

      {/* === CONDITION EVALUATION TIPS === */}
      &lt;div className=&quot;mt-6 p-3 bg-gray-800 rounded-lg border border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center space-x-2 mb-2&quot;&gt;
          &lt;span className=&quot;text-lg&quot;&gt;💡&lt;/span&gt;
          &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;Condition Tips&lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;space-y-2 text-xs text-gray-400&quot;&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Reference data fields directly in conditions (e.g.,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;subject&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;priority&lt;/code&gt;)
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Use comparison operators:{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;==&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;!=&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;gt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;lt;&lt;/code&gt;,{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;contains&lt;/code&gt;
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-start space-x-2&quot;&gt;
            &lt;span className=&quot;text-purple-400 mt-0.5&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;
              Combine conditions with{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;&amp;&amp;&lt;/code&gt; (and) or{' '}
              &lt;code className=&quot;bg-gray-700 px-1 rounded text-gray-300&quot;&gt;||&lt;/code&gt; (or)
            &lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Component to show summary of all available data fields
const DataFieldsSummary: React.FC&lt;{
  connectedInputNodes: any[];
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ connectedInputNodes, onFieldSelect }) =&gt; {
  const allFields = new Set&lt;string&gt;();

  // Collect all unique fields from connected nodes
  connectedInputNodes.forEach((node, _index) =&gt; {
    const outputData = node?.data?.outputData;
    const testResultsData = node?.data?.testResults?.data;
    const data = outputData || testResultsData;

    if (data &amp;&amp; typeof data === 'object') {
      if (Array.isArray(data)) {
        // Handle arrays (like emails)
        if (data.length &gt; 0 &amp;&amp; typeof data[0] === 'object') {
          Object.keys(data[0]).forEach((key) =&gt; allFields.add(key));
        }
      } else {
        // Handle objects
        Object.keys(data).forEach((key) =&gt; allFields.add(key));
      }
    }
  });

  const fieldsArray = Array.from(allFields).sort();

  if (fieldsArray.length === 0) {
    return (
      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
        No structured fields available. Test connected nodes to analyze data fields.
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
      {fieldsArray.map((field) =&gt; (
        &lt;button
          key={field}
          onClick={() =&gt; onFieldSelect(field)}
          className=&quot;px-2 py-1 bg-purple-800 hover:bg-purple-700 text-purple-200 rounded text-xs transition-colors&quot;
          title={`Click to highlight ${field} in data`}
        &gt;
          {field}
        &lt;/button&gt;
      ))}
    &lt;/div&gt;
  );
};

// Component to render data specifically for condition evaluation
const ConditionDataRenderer: React.FC&lt;{
  data: any;
  nodeType: string;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, nodeType, selectedField, onFieldSelect }) =&gt; {
  if (!data) {
    return &lt;div className=&quot;text-gray-400 text-sm&quot;&gt;No data available&lt;/div&gt;;
  }

  // Handle different data structures

  // Check if it's an array (like emails)
  if (Array.isArray(data)) {
    if (data.length &gt; 0) {
      const firstItem = data[0];
      if (nodeType === 'gmail' || nodeType === 'gmail-trigger') {
        return (
          &lt;EmailConditionView
            email={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      } else {
        // Generic array handling - show first item
        return (
          &lt;GenericConditionView
            data={firstItem}
            selectedField={selectedField}
            onFieldSelect={onFieldSelect}
          /&gt;
        );
      }
    }
  }

  // Handle email data (from Gmail triggers)
  if ((nodeType === 'gmail' || nodeType === 'gmail-trigger') &amp;&amp; typeof data === 'object') {
    return (
      &lt;EmailConditionView
        email={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle transformed data
  if (nodeType === 'transform' &amp;&amp; typeof data === 'object') {
    return (
      &lt;TransformConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  // Handle AI Agent data
  if (nodeType === 'ai-agent' &amp;&amp; typeof data === 'object') {
    return (
      &lt;AIConditionView data={data} selectedField={selectedField} onFieldSelect={onFieldSelect} /&gt;
    );
  }

  // Generic structured data
  if (typeof data === 'object' &amp;&amp; data !== null) {
    return (
      &lt;GenericConditionView
        data={data}
        selectedField={selectedField}
        onFieldSelect={onFieldSelect}
      /&gt;
    );
  }

  return (
    &lt;div className=&quot;space-y-2&quot;&gt;
      &lt;div className=&quot;text-xs text-yellow-400&quot;&gt;Debug: {nodeType} node data (fallback renderer)&lt;/div&gt;
      &lt;div className=&quot;bg-gray-900 p-3 rounded border border-gray-600&quot;&gt;
        &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;
          Type: {typeof data} {Array.isArray(data) &amp;&amp; `(array with ${data.length} items)`}
        &lt;/div&gt;
        &lt;div className=&quot;font-mono text-xs text-gray-200 max-h-40 overflow-y-auto&quot;&gt;
          {typeof data === 'string' ? data : JSON.stringify(data, null, 2)}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Email-specific condition view
const EmailConditionView: React.FC&lt;{
  email: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ email, selectedField, onFieldSelect }) =&gt; {
  const emailFields = [
    { key: 'from', label: 'From', value: email.from },
    { key: 'subject', label: 'Subject', value: email.subject },
    { key: 'body', label: 'Body', value: email.body },
    { key: 'isUnread', label: 'Unread', value: email.isUnread },
    {
      key: 'hasAttachments',
      label: 'Has Attachments',
      value: email.hasAttachments,
    },
    { key: 'labels', label: 'Labels', value: email.labels },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-blue-400 mb-2&quot;&gt;📧 Email fields available for conditions:&lt;/div&gt;
      {emailFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Transform data condition view
const TransformConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-green-400 mb-2&quot;&gt;
        🔄 Transformed fields available for conditions:
      &lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// AI Agent data condition view
const AIConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const aiFields = [
    { key: 'output', label: 'AI Output', value: data.output },
    { key: 'provider', label: 'Provider', value: data.provider },
    { key: 'model', label: 'Model', value: data.model },
    { key: 'usage', label: 'Token Usage', value: data.usage },
  ];

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-orange-400 mb-2&quot;&gt;
        🤖 AI response fields available for conditions:
      &lt;/div&gt;
      {aiFields.map((field) =&gt; (
        &lt;FieldRow
          key={field.key}
          fieldKey={field.key}
          label={field.label}
          value={field.value}
          isSelected={selectedField === field.key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Generic data condition view
const GenericConditionView: React.FC&lt;{
  data: any;
  selectedField: string | null;
  onFieldSelect: (field: string) =&gt; void;
}&gt; = ({ data, selectedField, onFieldSelect }) =&gt; {
  const fields = Object.keys(data);

  return (
    &lt;div className=&quot;space-y-3&quot;&gt;
      &lt;div className=&quot;text-xs text-gray-400 mb-2&quot;&gt;📊 Data fields available for conditions:&lt;/div&gt;
      {fields.map((key) =&gt; (
        &lt;FieldRow
          key={key}
          fieldKey={key}
          label={key}
          value={data[key]}
          isSelected={selectedField === key}
          onSelect={onFieldSelect}
        /&gt;
      ))}
    &lt;/div&gt;
  );
};

// Reusable field row component
const FieldRow: React.FC&lt;{
  fieldKey: string;
  label: string;
  value: any;
  isSelected: boolean;
  onSelect: (field: string) =&gt; void;
}&gt; = ({ fieldKey, label, value, isSelected, onSelect }) =&gt; {
  const displayValue =
    typeof value === 'string' &amp;&amp; value.length &gt; 100 ? `${value.substring(0, 100)}...` : value;

  return (
    &lt;div
      className={`p-3 rounded border cursor-pointer transition-all ${
        isSelected
          ? 'border-purple-500 bg-purple-900/20'
          : 'border-gray-600 hover:border-gray-500 bg-gray-750'
      }`}
      onClick={() =&gt; onSelect(fieldKey)}
    &gt;
      &lt;div className=&quot;flex items-center justify-between mb-1&quot;&gt;
        &lt;span className={`text-sm font-medium ${isSelected ? 'text-purple-200' : 'text-gray-200'}`}&gt;
          {label}
        &lt;/span&gt;
        &lt;code
          className={`text-xs px-2 py-1 rounded ${
            isSelected ? 'bg-purple-800 text-purple-200' : 'bg-gray-700 text-gray-300'
          }`}
        &gt;
          {fieldKey}
        &lt;/code&gt;
      &lt;/div&gt;
      &lt;div className={`text-xs ${isSelected ? 'text-purple-300' : 'text-gray-400'}`}&gt;
        Type: {typeof value} {Array.isArray(value) &amp;&amp; '(array)'}
      &lt;/div&gt;
      &lt;div className={`text-sm mt-2 ${isSelected ? 'text-purple-100' : 'text-gray-300'}`}&gt;
        {typeof displayValue === 'object'
          ? JSON.stringify(displayValue, null, 2)
          : String(displayValue || 'null')}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// Helper functions (same as in other panels)
const getNodeIcon = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return '📧';
  }
  if (node?.type === 'transform') {
    return '🔄';
  }
  if (node?.type === 'ai-agent' || node?.data?.integrationData?.id === 'ai-agent') {
    return '🤖';
  }
  if (node?.type === 'trigger') {
    return '⚡';
  }
  return '📊';
};

const getNodeType = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return 'gmail-trigger';
  }
  if (node?.type === 'transform') {
    return 'transform';
  }
  if (node?.type === 'ai-agent' || node?.data?.integrationData?.id === 'ai-agent') {
    return 'ai-agent';
  }
  return node?.type || 'unknown';
};

const getNodeTypeDisplay = (node: any): string =&gt; {
  return (
    node?.data?.enhancedNodeType?.displayName ||
    node?.data?.nodeTypeData?.displayName ||
    node?.data?.nodeTypeData?.name ||
    node?.type ||
    'Unknown Node Type'
  );
};

export default ConditionInputPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CommentAnnotations.tsx (Line 1:1 - Line 435:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/commentannotations/CommentAnnotations.tsx (Line 8:1 - Line 442:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup106"><code class="language-tsx text-sm text-gray-800">/**
 * Comment Annotations
 *
 * Visual comment pins and thread overlays for workflow canvas,
 * providing contextual commenting system similar to Figma's comments.
 */

import { CheckOutlined, CommentOutlined, SendOutlined } from '@ant-design/icons';
import { Avatar, Badge, Button, Card, Input, Popover } from 'antd';
import type React from 'react';
import { useCallback, useState } from 'react';
import type { CollaborationComment } from '../../../core/services/collaborationService';
import { useCollaborationStore } from '../../../core/stores/collaborationStore';
import { useLeanWorkflowStore } from '../../../core/stores/leanWorkflowStore';

const { TextArea } = Input;

interface CommentAnnotationsProps {
  containerRef: React.RefObject&lt;HTMLDivElement&gt;;
  transform: {
    x: number;
    y: number;
    zoom: number;
  };
  onCommentClick?: (position: { x: number; y: number }) =&gt; void;
}

interface CommentPinProps {
  comment: CollaborationComment;
  screenPosition: { x: number; y: number };
  isSelected: boolean;
  onClick: () =&gt; void;
  onResolve: () =&gt; void;
}

export const CommentAnnotations: React.FC&lt;CommentAnnotationsProps&gt; = ({
  containerRef,
  transform,
  onCommentClick,
}) =&gt; {
  const {
    activeComments,
    selectedCommentId,
    currentUser,
    showComments,
    commentMode,
    selectComment,
    resolveComment,
    addComment,
    replyToComment,
  } = useCollaborationStore();
  const { currentWorkflow } = useLeanWorkflowStore();

  const [replyContents, setReplyContents] = useState&lt;Record&lt;string, string&gt;&gt;({});
  const [newCommentContent, setNewCommentContent] = useState('');
  const [pendingCommentPosition, setPendingCommentPosition] = useState&lt;{
    x: number;
    y: number;
  } | null&gt;(null);

  // Convert workflow coordinates to screen coordinates
  const workflowToScreen = useCallback(
    (x: number, y: number) =&gt; ({
      x: (x + transform.x) * transform.zoom,
      y: (y + transform.y) * transform.zoom,
    }),
    [transform]
  );

  // Convert screen coordinates to workflow coordinates
  const screenToWorkflow = useCallback(
    (x: number, y: number) =&gt; ({
      x: x / transform.zoom - transform.x,
      y: y / transform.zoom - transform.y,
    }),
    [transform]
  );

  // Generate user colors
  const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Handle canvas click for new comments
  const handleCanvasClick = useCallback(
    (event: React.MouseEvent) =&gt; {
      if (!commentMode || !containerRef.current) return;

      const rect = containerRef.current.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;

      const workflowPos = screenToWorkflow(x, y);
      setPendingCommentPosition(workflowPos);
      onCommentClick?.(workflowPos);
    },
    [commentMode, containerRef, screenToWorkflow, onCommentClick]
  );

  // Handle adding new comment
  const handleAddComment = useCallback(async () =&gt; {
    if (!newCommentContent.trim() || !pendingCommentPosition) return;

    try {
      await addComment({
        workflowId: currentWorkflow?.id || '',
        content: newCommentContent,
        position: pendingCommentPosition,
        resolved: false,
        mentions: [], // TODO: Parse mentions from content
      });

      setNewCommentContent('');
      setPendingCommentPosition(null);
    } catch (_error) {}
  }, [newCommentContent, pendingCommentPosition, addComment, currentWorkflow?.id]);

  // Handle replying to comment
  const handleReplyToComment = useCallback(
    async (commentId: string) =&gt; {
      const content = replyContents[commentId];
      if (!content?.trim()) return;

      try {
        await replyToComment(commentId, content);
        setReplyContents({ ...replyContents, [commentId]: '' });
      } catch (_error) {}
    },
    [replyContents, replyToComment]
  );

  // Comment Pin Component
  const CommentPin: React.FC&lt;CommentPinProps&gt; = ({
    comment,
    screenPosition,
    isSelected,
    onClick,
    onResolve,
  }) =&gt; {
    const [isHovered, setIsHovered] = useState(false);
    const userColor = getUserColor(comment.author.id);

    const commentThread = (
      &lt;Card size=&quot;small&quot; className=&quot;w-80 max-h-96 overflow-auto&quot; bodyStyle={{ padding: 12 }}&gt;
        &lt;div className=&quot;space-y-3&quot;&gt;
          {/* Comment header */}
          &lt;div className=&quot;flex items-start justify-between&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar size={24} src={comment.author.avatar} style={{ backgroundColor: userColor }}&gt;
                {comment.author.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div&gt;
                &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                  {comment.author.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(comment.timestamp).toLocaleString()}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckOutlined /&gt;}
              onClick={(e) =&gt; {
                e.stopPropagation();
                onResolve();
              }}
              className=&quot;text-green-600 hover:bg-green-50&quot;
            &gt;
              Resolve
            &lt;/Button&gt;
          &lt;/div&gt;

          {/* Comment content */}
          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;{comment.content}&lt;/div&gt;

          {/* Replies */}
          {comment.replies.length &gt; 0 &amp;&amp; (
            &lt;div className=&quot;space-y-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700&quot;&gt;
              {comment.replies.map((reply) =&gt; (
                &lt;div key={reply.id} className=&quot;space-y-1&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={16}
                      src={reply.author.avatar}
                      style={{ backgroundColor: getUserColor(reply.author.id) }}
                    &gt;
                      {reply.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                      {reply.author.name}
                    &lt;/span&gt;
                    &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                      {new Date(reply.timestamp).toLocaleString()}
                    &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 pl-6&quot;&gt;
                    {reply.content}
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          )}

          {/* Reply input */}
          &lt;div className=&quot;pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
            &lt;div className=&quot;flex space-x-2&quot;&gt;
              &lt;Input
                size=&quot;small&quot;
                placeholder=&quot;Reply...&quot;
                value={replyContents[comment.id] || ''}
                onChange={(e) =&gt;
                  setReplyContents({
                    ...replyContents,
                    [comment.id]: e.target.value,
                  })
                }
                onPressEnter={() =&gt; handleReplyToComment(comment.id)}
              /&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={() =&gt; handleReplyToComment(comment.id)}
                disabled={!replyContents[comment.id]?.trim()}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/Card&gt;
    );

    return (
      &lt;Popover
        content={commentThread}
        title={null}
        trigger=&quot;click&quot;
        placement=&quot;topLeft&quot;
        overlayClassName=&quot;comment-thread-popover&quot;
      &gt;
        &lt;div
          className={`absolute cursor-pointer transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200 z-40 ${
            isSelected ? 'scale-110' : 'scale-100'
          }`}
          style={{
            left: screenPosition.x,
            top: screenPosition.y,
          }}
          onClick={onClick}
          onMouseEnter={() =&gt; setIsHovered(true)}
          onMouseLeave={() =&gt; setIsHovered(false)}
        &gt;
          {/* Comment pin */}
          &lt;div
            className={`relative w-8 h-8 rounded-full border-2 border-white shadow-lg flex items-center justify-center ${
              isSelected || isHovered ? 'transform scale-110' : ''
            }`}
            style={{
              backgroundColor: userColor,
              boxShadow: isSelected ? `0 0 0 3px ${userColor}40` : '0 2px 8px rgba(0,0,0,0.15)',
            }}
          &gt;
            &lt;CommentOutlined className=&quot;text-white text-sm&quot; /&gt;

            {/* Unread replies indicator */}
            {comment.replies.length &gt; 0 &amp;&amp; (
              &lt;Badge
                count={comment.replies.length}
                size=&quot;small&quot;
                className=&quot;absolute -top-1 -right-1&quot;
              /&gt;
            )}
          &lt;/div&gt;

          {/* Connection line to author avatar */}
          {(isSelected || isHovered) &amp;&amp; (
            &lt;div className=&quot;absolute top-10 left-1/2 transform -translate-x-1/2&quot;&gt;
              &lt;div className=&quot;bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-md border border-gray-200 dark:border-gray-700&quot;&gt;
                &lt;div className=&quot;flex items-center space-x-1&quot;&gt;
                  &lt;Avatar
                    size={16}
                    src={comment.author.avatar}
                    style={{ backgroundColor: userColor }}
                  &gt;
                    {comment.author.name.charAt(0).toUpperCase()}
                  &lt;/Avatar&gt;
                  &lt;span className=&quot;text-xs font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                    {comment.author.name}
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      &lt;/Popover&gt;
    );
  };

  // Pending comment input
  const PendingCommentInput: React.FC&lt;{ position: { x: number; y: number } }&gt; = ({ position }) =&gt; {
    const screenPos = workflowToScreen(position.x, position.y);

    return (
      &lt;div
        className=&quot;absolute z-50&quot;
        style={{
          left: screenPos.x + 20,
          top: screenPos.y,
        }}
      &gt;
        &lt;Card size=&quot;small&quot; className=&quot;w-80 shadow-lg&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
              &lt;Avatar
                size={24}
                src={currentUser?.avatar}
                style={{
                  backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
                }}
              &gt;
                {currentUser?.name.charAt(0).toUpperCase() || '?'}
              &lt;/Avatar&gt;
              &lt;span className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                Add a comment
              &lt;/span&gt;
            &lt;/div&gt;

            &lt;TextArea
              rows={3}
              placeholder=&quot;What do you think about this?&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
              autoFocus
            /&gt;

            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; {
                  setPendingCommentPosition(null);
                  setNewCommentContent('');
                }}
              &gt;
                Cancel
              &lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                size=&quot;small&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim()}
              &gt;
                Post
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {/* Pin indicator */}
        &lt;div
          className=&quot;absolute w-6 h-6 rounded-full border-2 border-white shadow-lg flex items-center justify-center&quot;
          style={{
            left: -20,
            top: 20,
            backgroundColor: currentUser ? getUserColor(currentUser.id) : '#ccc',
          }}
        &gt;
          &lt;CommentOutlined className=&quot;text-white text-xs&quot; /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  };

  if (!showComments || !containerRef.current) return null;

  return (
    &lt;&gt;
      {/* Canvas click handler for comment mode */}
      {commentMode &amp;&amp; (
        &lt;div
          className=&quot;absolute inset-0 z-30 cursor-crosshair&quot;
          onClick={handleCanvasClick}
          style={{
            background: commentMode
              ? 'linear-gradient(45deg, transparent 40%, rgba(24, 144, 255, 0.1) 50%, transparent 60%)'
              : 'transparent',
          }}
        /&gt;
      )}

      {/* Existing comments */}
      {activeComments.map((comment) =&gt; {
        const screenPos = workflowToScreen(comment.position.x, comment.position.y);

        return (
          &lt;CommentPin
            key={comment.id}
            comment={comment}
            screenPosition={screenPos}
            isSelected={selectedCommentId === comment.id}
            onClick={() =&gt; selectComment(comment.id)}
            onResolve={() =&gt; resolveComment(comment.id)}
          /&gt;
        );
      })}

      {/* Pending comment input */}
      {pendingCommentPosition &amp;&amp; &lt;PendingCommentInput position={pendingCommentPosition} /&gt;}

      {/* Comment mode instructions */}
      {commentMode &amp;&amp; (
        &lt;div className=&quot;absolute top-4 left-1/2 transform -translate-x-1/2 z-50&quot;&gt;
          &lt;div className=&quot;bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-4 py-2 rounded-lg shadow-md border border-blue-200 dark:border-blue-700&quot;&gt;
            &lt;CommentOutlined className=&quot;mr-2&quot; /&gt;
            Click anywhere on the canvas to add a comment
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/CollaborationPanel.tsx (Line 1:1 - Line 665:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/collaborationpanel/CollaborationPanel.tsx (Line 5:1 - Line 669:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup108"><code class="language-tsx text-sm text-gray-800">/**
 * Collaboration Panel
 *
 * Real-time collaboration interface with user presence, comments,
 * conflict resolution, and collaboration settings. Inspired by
 * Figma's collaboration features and Google Docs comments.
 */

import {
  CheckOutlined,
  ClockCircleOutlined,
  CommentOutlined,
  ExclamationCircleOutlined,
  SendOutlined,
  TeamOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Avatar,
  Badge,
  Button,
  Card,
  Divider,
  Drawer,
  Empty,
  Input,
  Modal,
  Radio,
  Switch,
  Tabs,
  Tag,
  Timeline,
  Tooltip,
} from 'antd';
import type React from 'react';
import { useCallback, useState } from 'react';
import type { CollaborationConflict } from '../../../core/services/collaborationService';
import { useCollaborationStore } from '../../../core/stores/collaborationStore';
import { useLeanWorkflowStore } from '../../../core/stores/leanWorkflowStore';

const { TextArea } = Input;
const { TabPane } = Tabs;

interface CollaborationPanelProps {
  isVisible: boolean;
  onToggle: () =&gt; void;
}

export const CollaborationPanel: React.FC&lt;CollaborationPanelProps&gt; = ({ isVisible, onToggle }) =&gt; {
  const [activeTab, setActiveTab] = useState('users');
  const [newCommentContent, setNewCommentContent] = useState('');
  const [newCommentPosition, setNewCommentPosition] = useState&lt;{ x: number; y: number } | null&gt;(
    null
  );
  const [replyContents, setReplyContents] = useState&lt;Record&lt;string, string&gt;&gt;({});
  const [conflictModalVisible, setConflictModalVisible] = useState(false);
  const [selectedConflict, setSelectedConflict] = useState&lt;CollaborationConflict | null&gt;(null);

  const {
    isConnected,
    connectionStatus,
    currentUser,
    userPresences,
    operationHistory,
    activeComments,
    activeConflicts,
    selectedCommentId,
    showUserCursors,
    showUserSelections,
    showComments,
    commentMode,
    addComment,
    replyToComment,
    resolveComment,
    resolveConflict,
    selectComment,
    toggleCommentMode,
    toggleUserCursors,
    toggleUserSelections,
    toggleComments,
  } = useCollaborationStore();

  const { selectedNodeIds, currentWorkflow } = useLeanWorkflowStore();

  // Generate user colors for consistent display
  const getUserColor = useCallback((userId: string): string =&gt; {
    const colors = [
      '#1890ff',
      '#52c41a',
      '#faad14',
      '#f5222d',
      '#722ed1',
      '#13c2c2',
      '#eb2f96',
      '#fa541c',
      '#2f54eb',
      '#a0d911',
    ];
    const hash = userId.split('').reduce((acc, char) =&gt; acc + char.charCodeAt(0), 0);
    return colors[hash % colors.length];
  }, []);

  // Handle adding a comment
  const handleAddComment = useCallback(async () =&gt; {
    if (!newCommentContent.trim() || !newCommentPosition) return;

    try {
      await addComment({
        workflowId: currentWorkflow?.id || '',
        content: newCommentContent,
        position: newCommentPosition,
        nodeId: selectedNodeIds.length === 1 ? selectedNodeIds[0] : undefined,
        resolved: false,
        mentions: [], // TODO: Parse mentions from content
      });

      setNewCommentContent('');
      setNewCommentPosition(null);
    } catch (_error) {}
  }, [newCommentContent, newCommentPosition, selectedNodeIds, addComment, currentWorkflow?.id]);

  // Handle replying to a comment
  const handleReplyToComment = useCallback(
    async (commentId: string) =&gt; {
      const content = replyContents[commentId];
      if (!content?.trim()) return;

      try {
        await replyToComment(commentId, content);
        setReplyContents({ ...replyContents, [commentId]: '' });
      } catch (_error) {}
    },
    [replyContents, replyToComment]
  );

  // Handle conflict resolution
  const handleResolveConflict = useCallback(
    async (conflict: CollaborationConflict, resolution: any) =&gt; {
      try {
        await resolveConflict(conflict.id, resolution);
        setConflictModalVisible(false);
        setSelectedConflict(null);
      } catch (_error) {}
    },
    [resolveConflict]
  );

  // Users Tab
  const UsersTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Active Users ({userPresences.length + (currentUser ? 1 : 0)})
        &lt;/h3&gt;
        &lt;Badge
          status={isConnected ? 'processing' : 'error'}
          text={connectionStatus}
          className=&quot;capitalize&quot;
        /&gt;
      &lt;/div&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        {/* Current user */}
        {currentUser &amp;&amp; (
          &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={currentUser.avatar}
                style={{ backgroundColor: getUserColor(currentUser.id) }}
              &gt;
                {currentUser.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {currentUser.name} (You)
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;{currentUser.email}&lt;/div&gt;
              &lt;/div&gt;
              &lt;Badge status=&quot;processing&quot; /&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        )}

        {/* Other users */}
        {userPresences.map((presence) =&gt; (
          &lt;Card key={presence.userId} size=&quot;small&quot;&gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Avatar
                size={32}
                src={presence.user.avatar}
                style={{ backgroundColor: getUserColor(presence.userId) }}
              &gt;
                {presence.user.name.charAt(0).toUpperCase()}
              &lt;/Avatar&gt;
              &lt;div className=&quot;flex-1&quot;&gt;
                &lt;div className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {presence.user.name}
                &lt;/div&gt;
                &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
                  {presence.user.email}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex flex-col items-end&quot;&gt;
                &lt;Badge
                  status={presence.user.status === 'online' ? 'success' : 'default'}
                  text={presence.user.status}
                /&gt;
                {presence.cursor &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                    Cursor: {Math.round(presence.cursor.x)}, {Math.round(presence.cursor.y)}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/Card&gt;
        ))}
      &lt;/div&gt;

      {userPresences.length === 0 &amp;&amp; !currentUser &amp;&amp; (
        &lt;Empty description=&quot;No active users&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}

      &lt;Divider /&gt;

      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;h4 className=&quot;font-medium text-gray-900 dark:text-gray-100&quot;&gt;Presence Settings&lt;/h4&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Cursors&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserCursors} onChange={toggleUserCursors} /&gt;
        &lt;/div&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;Show User Selections&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={showUserSelections} onChange={toggleUserSelections} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Comments Tab
  const CommentsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Comments ({activeComments.length})
        &lt;/h3&gt;
        &lt;div className=&quot;flex space-x-2&quot;&gt;
          &lt;Button
            size=&quot;small&quot;
            type={commentMode ? 'primary' : 'default'}
            icon={&lt;CommentOutlined /&gt;}
            onClick={toggleCommentMode}
          &gt;
            {commentMode ? 'Cancel' : 'Add Comment'}
          &lt;/Button&gt;
          &lt;Switch
            size=&quot;small&quot;
            checked={showComments}
            onChange={toggleComments}
            checkedChildren=&quot;Show&quot;
            unCheckedChildren=&quot;Hide&quot;
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {commentMode &amp;&amp; (
        &lt;Card size=&quot;small&quot; className=&quot;bg-blue-50 border-blue-200 dark:bg-blue-900/20&quot;&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400&quot;&gt;
              Click on the canvas to place a comment, or add a general comment below.
            &lt;/div&gt;
            &lt;TextArea
              rows={3}
              placeholder=&quot;Add your comment...&quot;
              value={newCommentContent}
              onChange={(e) =&gt; setNewCommentContent(e.target.value)}
            /&gt;
            &lt;div className=&quot;flex justify-end space-x-2&quot;&gt;
              &lt;Button
                size=&quot;small&quot;
                onClick={() =&gt; setNewCommentPosition({ x: 100, y: 100 })}
                disabled={!newCommentContent.trim()}
              &gt;
                Add General Comment
              &lt;/Button&gt;
              &lt;Button
                size=&quot;small&quot;
                type=&quot;primary&quot;
                icon={&lt;SendOutlined /&gt;}
                onClick={handleAddComment}
                disabled={!newCommentContent.trim() || !newCommentPosition}
              &gt;
                Post Comment
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      )}

      &lt;div className=&quot;space-y-3&quot;&gt;
        {activeComments.length === 0 ? (
          &lt;Empty description=&quot;No active comments&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
        ) : (
          activeComments.map((comment) =&gt; (
            &lt;Card
              key={comment.id}
              size=&quot;small&quot;
              className={selectedCommentId === comment.id ? 'border-blue-500 shadow-md' : ''}
              onClick={() =&gt; selectComment(comment.id)}
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                {/* Comment header */}
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    &lt;Avatar
                      size={24}
                      src={comment.author.avatar}
                      style={{ backgroundColor: getUserColor(comment.author.id) }}
                    &gt;
                      {comment.author.name.charAt(0).toUpperCase()}
                    &lt;/Avatar&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium text-sm text-gray-900 dark:text-gray-100&quot;&gt;
                        {comment.author.name}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                        {new Date(comment.timestamp).toLocaleString()}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex space-x-1&quot;&gt;
                    {comment.nodeId &amp;&amp; &lt;Tag color=&quot;blue&quot;&gt;Node Comment&lt;/Tag&gt;}
                    &lt;Tooltip title=&quot;Resolve Comment&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;CheckOutlined /&gt;}
                        onClick={(e) =&gt; {
                          e.stopPropagation();
                          resolveComment(comment.id);
                        }}
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Comment content */}
                &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300 ml-8&quot;&gt;
                  {comment.content}
                &lt;/div&gt;

                {/* Replies */}
                {comment.replies.length &gt; 0 &amp;&amp; (
                  &lt;div className=&quot;ml-8 space-y-2 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                    {comment.replies.map((reply) =&gt; (
                      &lt;div key={reply.id} className=&quot;flex space-x-2&quot;&gt;
                        &lt;Avatar
                          size={20}
                          src={reply.author.avatar}
                          style={{ backgroundColor: getUserColor(reply.author.id) }}
                        &gt;
                          {reply.author.name.charAt(0).toUpperCase()}
                        &lt;/Avatar&gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-xs text-gray-900 dark:text-gray-100&quot;&gt;
                              {reply.author.name}
                            &lt;/span&gt;
                            &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                              {new Date(reply.timestamp).toLocaleString()}
                            &lt;/span&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                            {reply.content}
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    ))}
                  &lt;/div&gt;
                )}

                {/* Reply input */}
                &lt;div className=&quot;ml-8 pt-2 border-t border-gray-200 dark:border-gray-700&quot;&gt;
                  &lt;div className=&quot;flex space-x-2&quot;&gt;
                    &lt;Input
                      size=&quot;small&quot;
                      placeholder=&quot;Reply...&quot;
                      value={replyContents[comment.id] || ''}
                      onChange={(e) =&gt;
                        setReplyContents({
                          ...replyContents,
                          [comment.id]: e.target.value,
                        })
                      }
                      onPressEnter={() =&gt; handleReplyToComment(comment.id)}
                    /&gt;
                    &lt;Button
                      type=&quot;text&quot;
                      size=&quot;small&quot;
                      icon={&lt;SendOutlined /&gt;}
                      onClick={() =&gt; handleReplyToComment(comment.id)}
                      disabled={!replyContents[comment.id]?.trim()}
                    /&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );

  // Conflicts Tab
  const ConflictsTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;div className=&quot;flex items-center justify-between&quot;&gt;
        &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;
          Conflicts ({activeConflicts.length})
        &lt;/h3&gt;
        {activeConflicts.length &gt; 0 &amp;&amp; &lt;Badge count={activeConflicts.length} status=&quot;error&quot; /&gt;}
      &lt;/div&gt;

      {activeConflicts.length === 0 ? (
        &lt;div className=&quot;text-center py-8&quot;&gt;
          &lt;CheckOutlined className=&quot;text-4xl text-green-500 mb-2&quot; /&gt;
          &lt;div className=&quot;text-gray-600 dark:text-gray-400&quot;&gt;No conflicts detected&lt;/div&gt;
        &lt;/div&gt;
      ) : (
        &lt;div className=&quot;space-y-3&quot;&gt;
          {activeConflicts.map((conflict) =&gt; (
            &lt;Card
              key={conflict.id}
              size=&quot;small&quot;
              className=&quot;border-red-200 bg-red-50 dark:bg-red-900/20&quot;
            &gt;
              &lt;div className=&quot;space-y-2&quot;&gt;
                &lt;div className=&quot;flex items-start justify-between&quot;&gt;
                  &lt;div&gt;
                    &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                      &lt;ExclamationCircleOutlined className=&quot;text-red-500&quot; /&gt;
                      &lt;span className=&quot;font-medium text-red-700 dark:text-red-300&quot;&gt;
                        {conflict.type.replace('_', ' ').toUpperCase()}
                      &lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;text-sm text-gray-600 dark:text-gray-400 mt-1&quot;&gt;
                      Affected nodes: {conflict.affectedNodes.join(', ')}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-xs text-gray-500 mt-1&quot;&gt;
                      {new Date(conflict.timestamp).toLocaleString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Button
                    size=&quot;small&quot;
                    type=&quot;primary&quot;
                    danger
                    onClick={() =&gt; {
                      setSelectedConflict(conflict);
                      setConflictModalVisible(true);
                    }}
                  &gt;
                    Resolve
                  &lt;/Button&gt;
                &lt;/div&gt;

                &lt;div className=&quot;pl-6&quot;&gt;
                  &lt;div className=&quot;text-sm text-gray-700 dark:text-gray-300&quot;&gt;
                    {conflict.operations.length} conflicting operations
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );

  // Activity Tab
  const ActivityTab: React.FC = () =&gt; (
    &lt;div className=&quot;p-4 space-y-4&quot;&gt;
      &lt;h3 className=&quot;text-lg font-semibold text-gray-900 dark:text-gray-100&quot;&gt;Recent Activity&lt;/h3&gt;

      &lt;Timeline className=&quot;mt-4&quot;&gt;
        {operationHistory
          .slice(-10)
          .reverse()
          .map((operation) =&gt; (
            &lt;Timeline.Item
              key={operation.id}
              dot={
                &lt;Avatar size={20} style={{ backgroundColor: getUserColor(operation.userId) }}&gt;
                  {operation.userId.charAt(0).toUpperCase()}
                &lt;/Avatar&gt;
              }
            &gt;
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-gray-900 dark:text-gray-100&quot;&gt;
                  {operation.type.replace('_', ' ')}
                &lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  {new Date(operation.timestamp).toLocaleString()}
                &lt;/div&gt;
                {operation.data?.nodeId &amp;&amp; (
                  &lt;div className=&quot;text-xs text-gray-600 dark:text-gray-400&quot;&gt;
                    Node: {operation.data.nodeId}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/Timeline.Item&gt;
          ))}
      &lt;/Timeline&gt;

      {operationHistory.length === 0 &amp;&amp; (
        &lt;Empty description=&quot;No recent activity&quot; image={Empty.PRESENTED_IMAGE_SIMPLE} /&gt;
      )}
    &lt;/div&gt;
  );

  return (
    &lt;&gt;
      &lt;Drawer
        title=&quot;Collaboration&quot;
        placement=&quot;right&quot;
        onClose={onToggle}
        open={isVisible}
        width={400}
        className=&quot;collaboration-drawer&quot;
      &gt;
        &lt;Tabs activeKey={activeTab} onChange={setActiveTab} className=&quot;h-full&quot;&gt;
          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;TeamOutlined /&gt;
                Users
              &lt;/span&gt;
            }
            key=&quot;users&quot;
          &gt;
            &lt;UsersTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;CommentOutlined /&gt;
                Comments
                {activeComments.length &gt; 0 &amp;&amp; (
                  &lt;Badge count={activeComments.length} size=&quot;small&quot; style={{ marginLeft: 4 }} /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;comments&quot;
          &gt;
            &lt;CommentsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;WarningOutlined /&gt;
                Conflicts
                {activeConflicts.length &gt; 0 &amp;&amp; (
                  &lt;Badge
                    count={activeConflicts.length}
                    size=&quot;small&quot;
                    status=&quot;error&quot;
                    style={{ marginLeft: 4 }}
                  /&gt;
                )}
              &lt;/span&gt;
            }
            key=&quot;conflicts&quot;
          &gt;
            &lt;ConflictsTab /&gt;
          &lt;/TabPane&gt;

          &lt;TabPane
            tab={
              &lt;span&gt;
                &lt;ClockCircleOutlined /&gt;
                Activity
              &lt;/span&gt;
            }
            key=&quot;activity&quot;
          &gt;
            &lt;ActivityTab /&gt;
          &lt;/TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/Drawer&gt;

      {/* Conflict Resolution Modal */}
      &lt;Modal
        title=&quot;Resolve Conflict&quot;
        open={conflictModalVisible}
        onCancel={() =&gt; {
          setConflictModalVisible(false);
          setSelectedConflict(null);
        }}
        footer={null}
        width={600}
      &gt;
        {selectedConflict &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;Alert
              type=&quot;warning&quot;
              message={`${selectedConflict.type.replace('_', ' ')} Conflict`}
              description={`This conflict involves ${selectedConflict.operations.length} operations affecting ${selectedConflict.affectedNodes.length} nodes.`}
            /&gt;

            &lt;div className=&quot;space-y-3&quot;&gt;
              &lt;h4 className=&quot;font-medium&quot;&gt;Choose Resolution Strategy:&lt;/h4&gt;

              &lt;Radio.Group className=&quot;w-full&quot; size=&quot;small&quot;&gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  &lt;Radio value=&quot;last_write_wins&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Last Write Wins&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Keep the most recent changes and discard older ones
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;merge&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Smart Merge&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Attempt to automatically merge compatible changes
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                  &lt;Radio value=&quot;manual&quot;&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;font-medium&quot;&gt;Manual Resolution&lt;/div&gt;
                      &lt;div className=&quot;text-sm text-gray-600&quot;&gt;
                        Review each change individually and decide
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/Radio&gt;
                &lt;/div&gt;
              &lt;/Radio.Group&gt;
            &lt;/div&gt;

            &lt;div className=&quot;flex justify-end space-x-2 pt-4 border-t&quot;&gt;
              &lt;Button onClick={() =&gt; setConflictModalVisible(false)}&gt;Cancel&lt;/Button&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt;
                  handleResolveConflict(selectedConflict, {
                    strategy: 'last_write_wins',
                  })
                }
              &gt;
                Resolve Conflict
              &lt;/Button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AnalyticsDashboard.tsx (Line 1:1 - Line 750:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/analyticsdashboard/AnalyticsDashboard.tsx (Line 4:1 - Line 753:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup110"><code class="language-tsx text-sm text-gray-800">/**
 * Analytics Dashboard
 *
 * Comprehensive analytics and performance monitoring dashboard providing
 * insights, bottleneck detection, cost optimization, and predictive analytics.
 * Inspired by DataDog, New Relic, and Grafana dashboards.
 */

import {
  BarChartOutlined,
  BulbOutlined,
  CheckCircleOutlined,
  ClockCircleOutlined,
  DashboardOutlined,
  DollarCircleOutlined,
  ReloadOutlined,
  RiseOutlined,
  RobotOutlined,
  ThunderboltOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import {
  Badge,
  Button,
  Card,
  Col,
  Empty,
  List,
  Modal,
  Row,
  Select,
  Statistic,
  Switch,
  Table,
  Tabs,
  Tag,
} from 'antd';
import type React from 'react';
import { useEffect, useMemo } from 'react';
import {
  Area,
  AreaChart,
  CartesianGrid,
  Line,
  LineChart,
  Tooltip as RechartsTooltip,
  ResponsiveContainer,
  XAxis,
  YAxis,
} from 'recharts';
import type { NodePerformanceStats } from '../../../core/services/analyticsService';
import {
  formatCurrency,
  formatDuration,
  getCostTrend,
  getExecutionSummary,
  getTopBottlenecks,
  useAnalyticsStore,
} from '../../../core/stores/analyticsStore';

const { TabPane } = Tabs;
const { Option } = Select;

interface AnalyticsDashboardProps {
  isOpen: boolean;
  onClose: () =&gt; void;
  workflowId?: string;
}

export const AnalyticsDashboard: React.FC&lt;AnalyticsDashboardProps&gt; = ({
  isOpen,
  onClose,
  workflowId,
}) =&gt; {
  const {
    currentAnalytics,
    isLoading,
    lastUpdated,
    bottlenecks,
    predictiveInsights,
    costOptimization,
    performanceHistory,
    costHistory,
    reliabilityHistory,
    selectedTab,
    analyticsPeriod,
    // showPredictions,  // TODO: Implement predictions UI
    // showCostAnalysis, // TODO: Implement cost analysis UI
    autoRefresh,
    // selectedNodeId,   // TODO: Implement node selection
    setSelectedTab,
    setAnalyticsPeriod,
    toggleAutoRefresh,
    // togglePredictions,  // TODO: Implement predictions toggle
    // toggleCostAnalysis, // TODO: Implement cost analysis toggle
    setSelectedNode,
    loadAnalytics,
    refreshAnalytics,
  } = useAnalyticsStore();

  // Load analytics when modal opens
  useEffect(() =&gt; {
    if (isOpen &amp;&amp; workflowId &amp;&amp; workflowId !== currentAnalytics?.workflowId) {
      loadAnalytics(workflowId);
    }
  }, [isOpen, workflowId, loadAnalytics, currentAnalytics?.workflowId]);

  const executionSummary = useMemo(() =&gt; getExecutionSummary(currentAnalytics), [currentAnalytics]);

  const topBottlenecks = useMemo(() =&gt; getTopBottlenecks(bottlenecks, 5), [bottlenecks]);

  const costTrend = useMemo(() =&gt; getCostTrend(costHistory), [costHistory]);

  // Chart colors
  const chartColors = {
    primary: '#1890ff',
    success: '#52c41a',
    warning: '#faad14',
    danger: '#ff4d4f',
    purple: '#722ed1',
    cyan: '#13c2c2',
  };

  // Overview Tab Component
  const OverviewTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Key Metrics */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Executions&quot;
              value={executionSummary?.totalExecutions || 0}
              prefix={&lt;ThunderboltOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Success Rate&quot;
              value={executionSummary?.successRate || 0}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;CheckCircleOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.successRate || 0) &gt;= 95 ? '#3f8600' : '#cf1322',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Avg Duration&quot;
              value={formatDuration(executionSummary?.avgDuration || 0)}
              prefix={&lt;ClockCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Efficiency Score&quot;
              value={executionSummary?.efficiency || 0}
              suffix=&quot;/100&quot;
              precision={0}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{
                color: (executionSummary?.efficiency || 0) &gt;= 80 ? '#3f8600' : '#faad14',
              }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Performance Trend Chart */}
      &lt;Card title=&quot;Performance Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={performanceHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Duration']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.primary}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Alerts and Insights Row */}
      &lt;Row gutter={[16, 16]}&gt;
        {/* Top Bottlenecks */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Top Performance Issues&quot; size=&quot;small&quot;&gt;
            {topBottlenecks.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={topBottlenecks}
                renderItem={(bottleneck) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={
                        &lt;Badge status={bottleneck.severity === 'critical' ? 'error' : 'warning'} /&gt;
                      }
                      title={
                        &lt;span&gt;
                          {bottleneck.description}
                          &lt;Tag
                            color={
                              bottleneck.severity === 'critical'
                                ? 'red'
                                : bottleneck.severity === 'high'
                                  ? 'orange'
                                  : 'yellow'
                            }
                            className=&quot;ml-2&quot;
                          &gt;
                            {bottleneck.severity}
                          &lt;/Tag&gt;
                        &lt;/span&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;{bottleneck.impact}&lt;/div&gt;
                          &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No performance issues detected&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;

        {/* Predictive Insights */}
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;AI Predictions&quot; size=&quot;small&quot;&gt;
            {predictiveInsights.length &gt; 0 ? (
              &lt;List
                size=&quot;small&quot;
                dataSource={predictiveInsights}
                renderItem={(insight) =&gt; (
                  &lt;List.Item&gt;
                    &lt;List.Item.Meta
                      avatar={&lt;RobotOutlined className=&quot;text-blue-500&quot; /&gt;}
                      title={
                        &lt;div className=&quot;flex items-center&quot;&gt;
                          &lt;span&gt;{insight.description}&lt;/span&gt;
                          &lt;Tag color=&quot;blue&quot; className=&quot;ml-2&quot;&gt;
                            {Math.round(insight.confidence * 100)}% confidence
                          &lt;/Tag&gt;
                        &lt;/div&gt;
                      }
                      description={
                        &lt;div className=&quot;text-sm&quot;&gt;
                          &lt;div className=&quot;text-gray-600&quot;&gt;Impact: {insight.predictedImpact}&lt;/div&gt;
                          &lt;div className=&quot;text-green-600 mt-1&quot;&gt;Timeframe: {insight.timeframe}&lt;/div&gt;
                        &lt;/div&gt;
                      }
                    /&gt;
                  &lt;/List.Item&gt;
                )}
              /&gt;
            ) : (
              &lt;Empty description=&quot;No predictions available&quot; /&gt;
            )}
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  // Performance Tab Component
  const PerformanceTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Performance Charts Row */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Execution Performance&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;AreaChart data={performanceHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(2)}ms`, 'Performance']}
                /&gt;
                &lt;Area
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.primary}
                  fill={chartColors.primary}
                  fillOpacity={0.6}
                /&gt;
              &lt;/AreaChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;

        &lt;Col span={12}&gt;
          &lt;Card title=&quot;Reliability Trend&quot; size=&quot;small&quot;&gt;
            &lt;ResponsiveContainer width=&quot;100%&quot; height={250}&gt;
              &lt;LineChart data={reliabilityHistory}&gt;
                &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
                &lt;XAxis
                  dataKey=&quot;timestamp&quot;
                  tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
                /&gt;
                &lt;YAxis domain={[0, 100]} /&gt;
                &lt;RechartsTooltip
                  labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
                  formatter={(value: number) =&gt; [`${value.toFixed(1)}%`, 'Success Rate']}
                /&gt;
                &lt;Line
                  type=&quot;monotone&quot;
                  dataKey=&quot;value&quot;
                  stroke={chartColors.success}
                  strokeWidth={2}
                  dot={false}
                /&gt;
              &lt;/LineChart&gt;
            &lt;/ResponsiveContainer&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Node Performance Table */}
      &lt;Card title=&quot;Node Performance Analysis&quot; size=&quot;small&quot;&gt;
        &lt;Table
          size=&quot;small&quot;
          dataSource={currentAnalytics?.nodePerformance || []}
          rowKey=&quot;nodeId&quot;
          pagination={{ pageSize: 10 }}
          columns={[
            {
              title: 'Node',
              dataIndex: 'nodeName',
              key: 'nodeName',
              render: (name: string, record: NodePerformanceStats) =&gt; (
                &lt;div&gt;
                  &lt;div className=&quot;font-medium&quot;&gt;{name}&lt;/div&gt;
                  &lt;div className=&quot;text-xs text-gray-500&quot;&gt;{record.nodeType}&lt;/div&gt;
                &lt;/div&gt;
              ),
            },
            {
              title: 'Executions',
              dataIndex: 'executionCount',
              key: 'executionCount',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.executionCount - b.executionCount,
            },
            {
              title: 'Avg Duration',
              dataIndex: 'averageDuration',
              key: 'averageDuration',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.averageDuration - b.averageDuration,
              render: (duration: number) =&gt; formatDuration(duration),
            },
            {
              title: 'Success Rate',
              dataIndex: 'failureRate',
              key: 'failureRate',
              sorter: (a: NodePerformanceStats, b: NodePerformanceStats) =&gt;
                a.failureRate - b.failureRate,
              render: (failureRate: number) =&gt; (
                &lt;span style={{ color: failureRate &gt; 0.1 ? '#ff4d4f' : '#52c41a' }}&gt;
                  {((1 - failureRate) * 100).toFixed(1)}%
                &lt;/span&gt;
              ),
            },
            {
              title: 'Trend',
              dataIndex: 'trend',
              key: 'trend',
              render: (trend: string) =&gt; (
                &lt;Tag
                  color={trend === 'improving' ? 'green' : trend === 'degrading' ? 'red' : 'blue'}
                &gt;
                  {trend}
                &lt;/Tag&gt;
              ),
            },
            {
              title: 'Actions',
              key: 'actions',
              render: (_, record: NodePerformanceStats) =&gt; (
                &lt;Button type=&quot;link&quot; size=&quot;small&quot; onClick={() =&gt; setSelectedNode(record.nodeId)}&gt;
                  Analyze
                &lt;/Button&gt;
              ),
            },
          ]}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Cost Tab Component
  const CostTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Cost Overview */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Current Period Cost&quot;
              value={costOptimization?.currentCost || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;DollarCircleOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Potential Savings&quot;
              value={costOptimization?.savings || 0}
              formatter={(value) =&gt; formatCurrency(Number(value))}
              prefix={&lt;RiseOutlined /&gt;}
              valueStyle={{ color: '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={8}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Cost Trend&quot;
              value={costTrend}
              suffix=&quot;%&quot;
              precision={1}
              prefix={&lt;BarChartOutlined /&gt;}
              valueStyle={{ color: costTrend &gt; 0 ? '#cf1322' : '#3f8600' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Cost Chart */}
      &lt;Card title=&quot;Cost Trends&quot; size=&quot;small&quot;&gt;
        &lt;ResponsiveContainer width=&quot;100%&quot; height={300}&gt;
          &lt;LineChart data={costHistory}&gt;
            &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;
            &lt;XAxis
              dataKey=&quot;timestamp&quot;
              tickFormatter={(value) =&gt; new Date(value).toLocaleTimeString()}
            /&gt;
            &lt;YAxis tickFormatter={(value) =&gt; formatCurrency(value)} /&gt;
            &lt;RechartsTooltip
              labelFormatter={(value) =&gt; new Date(value).toLocaleString()}
              formatter={(value: number) =&gt; [formatCurrency(value), 'Cost']}
            /&gt;
            &lt;Line
              type=&quot;monotone&quot;
              dataKey=&quot;value&quot;
              stroke={chartColors.warning}
              strokeWidth={2}
              dot={false}
            /&gt;
          &lt;/LineChart&gt;
        &lt;/ResponsiveContainer&gt;
      &lt;/Card&gt;

      {/* Cost Optimization Recommendations */}
      {costOptimization &amp;&amp; (
        &lt;Card title=&quot;Optimization Recommendations&quot; size=&quot;small&quot;&gt;
          &lt;List
            dataSource={costOptimization.recommendations}
            renderItem={(recommendation) =&gt; (
              &lt;List.Item&gt;
                &lt;List.Item.Meta
                  avatar={&lt;DollarCircleOutlined className=&quot;text-green-500&quot; /&gt;}
                  title={
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;span&gt;{recommendation.description}&lt;/span&gt;
                      &lt;Tag color=&quot;green&quot;&gt;
                        Save {formatCurrency(recommendation.estimatedSavings)}
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                  description={
                    &lt;div className=&quot;text-sm&quot;&gt;
                      &lt;div className=&quot;text-gray-600&quot;&gt;{recommendation.implementation}&lt;/div&gt;
                      &lt;Tag
                        color={
                          recommendation.impact === 'high'
                            ? 'red'
                            : recommendation.impact === 'medium'
                              ? 'orange'
                              : 'blue'
                        }
                        className=&quot;mt-1&quot;
                      &gt;
                        {recommendation.impact} impact
                      &lt;/Tag&gt;
                    &lt;/div&gt;
                  }
                /&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        &lt;/Card&gt;
      )}
    &lt;/div&gt;
  );

  // Insights Tab Component
  const InsightsTab: React.FC = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Predictive Insights */}
      &lt;Card title=&quot;Predictive Analytics&quot; size=&quot;small&quot;&gt;
        {predictiveInsights.length &gt; 0 ? (
          &lt;List
            dataSource={predictiveInsights}
            renderItem={(insight) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;RobotOutlined className=&quot;text-blue-500 mr-2&quot; /&gt;
                        {insight.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag color=&quot;blue&quot;&gt;{Math.round(insight.confidence * 100)}% confidence&lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{insight.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Timeframe:&lt;/span&gt;
                        &lt;div&gt;{insight.timeframe}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Expected Impact:&lt;/span&gt;
                        &lt;div&gt;{insight.predictedImpact}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommended Actions:&lt;/span&gt;
                      &lt;ul className=&quot;mt-2 space-y-1&quot;&gt;
                        {insight.recommendedActions.map((action, index) =&gt; (
                          &lt;li key={index} className=&quot;text-sm text-green-600&quot;&gt;
                            • {action}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                      Based on: {insight.basedOn.join(', ')}
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No predictive insights available&quot; /&gt;
        )}
      &lt;/Card&gt;

      {/* Bottleneck Analysis */}
      &lt;Card title=&quot;Bottleneck Analysis&quot; size=&quot;small&quot;&gt;
        {bottlenecks.length &gt; 0 ? (
          &lt;List
            dataSource={bottlenecks}
            renderItem={(bottleneck) =&gt; (
              &lt;List.Item&gt;
                &lt;Card size=&quot;small&quot; className=&quot;w-full&quot;&gt;
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                      &lt;h4 className=&quot;font-medium flex items-center&quot;&gt;
                        &lt;WarningOutlined
                          className={`mr-2 ${
                            bottleneck.severity === 'critical'
                              ? 'text-red-500'
                              : bottleneck.severity === 'high'
                                ? 'text-orange-500'
                                : 'text-yellow-500'
                          }`}
                        /&gt;
                        {bottleneck.type.replace('_', ' ').toUpperCase()}
                      &lt;/h4&gt;
                      &lt;Tag
                        color={
                          bottleneck.severity === 'critical'
                            ? 'red'
                            : bottleneck.severity === 'high'
                              ? 'orange'
                              : 'yellow'
                        }
                      &gt;
                        {bottleneck.severity}
                      &lt;/Tag&gt;
                    &lt;/div&gt;

                    &lt;div className=&quot;text-gray-700&quot;&gt;{bottleneck.description}&lt;/div&gt;

                    &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Impact:&lt;/span&gt;
                        &lt;div&gt;{bottleneck.impact}&lt;/div&gt;
                      &lt;/div&gt;
                      &lt;div&gt;
                        &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Improvement:&lt;/span&gt;
                        &lt;div className=&quot;text-green-600&quot;&gt;{bottleneck.estimatedImprovement}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div&gt;
                      &lt;span className=&quot;font-medium text-gray-600&quot;&gt;Recommendation:&lt;/span&gt;
                      &lt;div className=&quot;text-blue-600 mt-1&quot;&gt;💡 {bottleneck.recommendation}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              &lt;/List.Item&gt;
            )}
          /&gt;
        ) : (
          &lt;Empty description=&quot;No bottlenecks detected&quot; /&gt;
        )}
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  // Settings and Controls
  const AnalyticsHeader: React.FC = () =&gt; (
    &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
      &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
        &lt;Select value={analyticsPeriod} onChange={setAnalyticsPeriod} style={{ width: 120 }}&gt;
          &lt;Option value={1}&gt;Last 24h&lt;/Option&gt;
          &lt;Option value={7}&gt;Last 7 days&lt;/Option&gt;
          &lt;Option value={30}&gt;Last 30 days&lt;/Option&gt;
          &lt;Option value={90}&gt;Last 90 days&lt;/Option&gt;
        &lt;/Select&gt;

        &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
          &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Auto-refresh:&lt;/span&gt;
          &lt;Switch size=&quot;small&quot; checked={autoRefresh} onChange={toggleAutoRefresh} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
        {lastUpdated &amp;&amp; (
          &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
            Updated: {new Date(lastUpdated).toLocaleTimeString()}
          &lt;/span&gt;
        )}

        &lt;Button
          type=&quot;text&quot;
          icon={&lt;ReloadOutlined /&gt;}
          onClick={refreshAnalytics}
          loading={isLoading}
        &gt;
          Refresh
        &lt;/Button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  return (
    &lt;Modal
      title=&quot;Workflow Analytics Dashboard&quot;
      open={isOpen}
      onCancel={onClose}
      width={1200}
      footer={null}
      className=&quot;analytics-dashboard-modal&quot;
    &gt;
      &lt;AnalyticsHeader /&gt;

      &lt;Tabs
        activeKey={selectedTab}
        onChange={(key) =&gt; setSelectedTab(key as any)}
        className=&quot;analytics-tabs&quot;
      &gt;
        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DashboardOutlined /&gt;
              Overview
            &lt;/span&gt;
          }
          key=&quot;overview&quot;
        &gt;
          &lt;OverviewTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BarChartOutlined /&gt;
              Performance
            &lt;/span&gt;
          }
          key=&quot;performance&quot;
        &gt;
          &lt;PerformanceTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;DollarCircleOutlined /&gt;
              Costs
            &lt;/span&gt;
          }
          key=&quot;costs&quot;
        &gt;
          &lt;CostTab /&gt;
        &lt;/TabPane&gt;

        &lt;TabPane
          tab={
            &lt;span&gt;
              &lt;BulbOutlined /&gt;
              Insights
            &lt;/span&gt;
          }
          key=&quot;insights&quot;
        &gt;
          &lt;InsightsTab /&gt;
        &lt;/TabPane&gt;
      &lt;/Tabs&gt;
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedPropertyPanel.tsx (Line 1:1 - Line 487:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancedpropertypanel/AdvancedPropertyPanel.tsx (Line 11:1 - Line 497:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup112"><code class="language-tsx text-sm text-gray-800">/**
 * Advanced Property Panel
 *
 * Three-column layout inspired by SIM's property panel:
 * - INPUT column (700px, resizable): Connected node data visualization
 * - CONFIGURATION column (550px): Dynamic property forms with enhanced features
 * - OUTPUT column: Real-time preview and execution results
 */

import {
  BugOutlined,
  CloseOutlined,
  CopyOutlined,
  FullscreenOutlined,
  PlayCircleOutlined,
  SaveOutlined,
  SettingOutlined,
  SyncOutlined,
} from '@ant-design/icons';
import { Badge, Button, Card, Drawer, Space, Tabs, Tooltip } from 'antd';
import React, { useCallback, useMemo, useState } from 'react';
import { nodeRegistry } from '@/core/nodes';
import { useEnhancedExecutionStore } from '@/core/stores/enhancedExecutionStore';
import { useLeanWorkflowStore } from '@/core/stores/leanWorkflowStore';
import { cn, JsonViewer } from '@/design-system';
import type { PropertyValidationResult } from './EnhancedPropertyRenderer';
import EnhancedPropertyRenderer from './EnhancedPropertyRenderer';

// Simple type definition for property form state
type PropertyFormState = Record&lt;string, any&gt;;

interface AdvancedPropertyPanelProps {
  isOpen: boolean;
  onClose: () =&gt; void;
  nodeId?: string;
}

interface ResizablePanelProps {
  children: React.ReactNode;
  title: string;
  width: number;
  minWidth?: number;
  maxWidth?: number;
  onResize?: (width: number) =&gt; void;
  actions?: React.ReactNode[];
  badge?: string | number;
}

const ResizablePanel: React.FC&lt;ResizablePanelProps&gt; = ({
  children,
  title,
  width,
  minWidth = 200,
  maxWidth = 1000,
  onResize,
  actions,
  badge,
}) =&gt; {
  const [isResizing, setIsResizing] = useState(false);
  const [startX, setStartX] = useState(0);
  const [startWidth, setStartWidth] = useState(width);

  const handleMouseDown = useCallback(
    (e: React.MouseEvent) =&gt; {
      setIsResizing(true);
      setStartX(e.clientX);
      setStartWidth(width);
    },
    [width]
  );

  const handleMouseMove = useCallback(
    (e: MouseEvent) =&gt; {
      if (!isResizing) return;

      const deltaX = e.clientX - startX;
      const newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth + deltaX));
      onResize?.(newWidth);
    },
    [isResizing, startX, startWidth, minWidth, maxWidth, onResize]
  );

  const handleMouseUp = useCallback(() =&gt; {
    setIsResizing(false);
  }, []);

  React.useEffect(() =&gt; {
    if (isResizing) {
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);

      return () =&gt; {
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };
    }
  }, [isResizing, handleMouseMove, handleMouseUp]);

  return (
    &lt;div className=&quot;h-full border-r border-gray-700 bg-gray-800 flex flex-col&quot; style={{ width }}&gt;
      {/* Panel Header */}
      &lt;div className=&quot;flex items-center justify-between p-3 border-b border-gray-700 bg-gray-900&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;h3 className=&quot;text-sm font-semibold text-white&quot;&gt;{title}&lt;/h3&gt;
          {badge &amp;&amp; (
            &lt;Badge count={badge} className=&quot;text-xs&quot; style={{ backgroundColor: '#1890ff' }} /&gt;
          )}
        &lt;/div&gt;
        {actions &amp;&amp; &lt;Space size=&quot;small&quot;&gt;{actions}&lt;/Space&gt;}
      &lt;/div&gt;

      {/* Panel Content */}
      &lt;div className=&quot;flex-1 overflow-auto&quot;&gt;{children}&lt;/div&gt;

      {/* Resize Handle */}
      {onResize &amp;&amp; (
        &lt;div
          className={cn(
            'absolute top-0 right-0 w-1 h-full cursor-col-resize bg-transparent hover:bg-blue-500 transition-colors',
            isResizing &amp;&amp; 'bg-blue-500'
          )}
          onMouseDown={handleMouseDown}
        /&gt;
      )}
    &lt;/div&gt;
  );
};

const InputDataPanel: React.FC&lt;{
  nodeId: string;
  width: number;
  onResize: (width: number) =&gt; void;
}&gt; = ({ nodeId, width, onResize }) =&gt; {
  const { edges } = useLeanWorkflowStore();
  const { getNodeState } = useEnhancedExecutionStore();

  // Find incoming connections to this node
  const incomingData = useMemo(() =&gt; {
    const incomingEdges = edges.filter((edge) =&gt; edge.target === nodeId);
    const data: Record&lt;string, any&gt; = {};

    incomingEdges.forEach((edge) =&gt; {
      const sourceNodeState = getNodeState(edge.source);
      if (sourceNodeState?.outputData) {
        data[edge.source] = sourceNodeState.outputData;
      }
    });

    return data;
  }, [edges, nodeId, getNodeState]);

  const actions = [
    &lt;Tooltip key=&quot;refresh&quot; title=&quot;Refresh data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;SyncOutlined /&gt;}
        onClick={() =&gt; {
          // Refresh input data
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy data&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          navigator.clipboard.writeText(JSON.stringify(incomingData, null, 2));
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  return (
    &lt;ResizablePanel
      title=&quot;Input Data&quot;
      width={width}
      onResize={onResize}
      actions={actions}
      badge={Object.keys(incomingData).length || undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {Object.keys(incomingData).length === 0 ? (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📥&lt;/div&gt;
            &lt;div&gt;No input data available&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;
              Connect nodes or execute the workflow to see input data
            &lt;/div&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;space-y-4&quot;&gt;
            {Object.entries(incomingData).map(([sourceNodeId, data]) =&gt; (
              &lt;Card
                key={sourceNodeId}
                size=&quot;small&quot;
                title={`From: ${sourceNodeId}`}
                className=&quot;bg-gray-900 border-gray-600&quot;
              &gt;
                &lt;JsonViewer data={data} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
              &lt;/Card&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

const ConfigurationPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeById, updateNodeParameters } = useLeanWorkflowStore();
  const [activeTab, setActiveTab] = useState('properties');
  const [formState, setFormState] = useState&lt;PropertyFormState&gt;({});
  const [isValid, setIsValid] = useState(true);
  const [errors, setErrors] = useState&lt;Map&lt;string, string&gt;&gt;(new Map());

  const node = getNodeById(nodeId);
  const nodeDefinition = node ? nodeRegistry.getNodeTypeDescription(node.type) : null;

  // Get enhanced properties for this node
  const enhancedProperties = useMemo(() =&gt; {
    if (!nodeDefinition) return [];

    // Use basic properties for now, can be enhanced later
    return nodeDefinition.properties || [];
  }, [nodeDefinition]);

  // Initialize form state from node parameters
  React.useEffect(() =&gt; {
    if (node) {
      setFormState(node.parameters || {});
    }
  }, [node]);

  // Property change handlers
  const handlePropertyChange = useCallback(
    (name: string, value: any) =&gt; {
      const newFormState = { ...formState, [name]: value };
      setFormState(newFormState);
      updateNodeParameters(nodeId, { [name]: value });
    },
    [formState, nodeId, updateNodeParameters]
  );

  const handleValidationChange = useCallback((result: PropertyValidationResult) =&gt; {
    setIsValid(result.isValid);
    setErrors(result.errors);
  }, []);

  const handleTest = useCallback(async () =&gt; {}, []);

  const handleSave = useCallback(async () =&gt; {}, []);

  const actions = [
    &lt;Tooltip key=&quot;test&quot; title=&quot;Test node&quot;&gt;
      &lt;Button
        type=&quot;primary&quot;
        size=&quot;small&quot;
        icon={&lt;PlayCircleOutlined /&gt;}
        onClick={handleTest}
        disabled={!isValid}
      &gt;
        Test
      &lt;/Button&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;debug&quot; title=&quot;Debug mode&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;BugOutlined /&gt;}
        onClick={() =&gt; {
          // Toggle debug mode for this node
        }}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;save&quot; title=&quot;Save configuration&quot;&gt;
      &lt;Button type=&quot;text&quot; size=&quot;small&quot; icon={&lt;SaveOutlined /&gt;} onClick={handleSave} /&gt;
    &lt;/Tooltip&gt;,
  ];

  const tabItems = [
    {
      key: 'properties',
      label: (
        &lt;span&gt;
          Properties
          {errors.size &gt; 0 &amp;&amp; (
            &lt;Badge
              count={errors.size}
              size=&quot;small&quot;
              style={{ backgroundColor: '#ff4d4f', marginLeft: 8 }}
            /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          {enhancedProperties.length === 0 ? (
            &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
              &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
              &lt;div&gt;No properties available&lt;/div&gt;
              &lt;div className=&quot;text-xs mt-2&quot;&gt;
                This node type doesn't have configurable properties
              &lt;/div&gt;
            &lt;/div&gt;
          ) : (
            &lt;EnhancedPropertyRenderer
              properties={enhancedProperties}
              formState={formState}
              onChange={handlePropertyChange}
              onValidationChange={handleValidationChange}
              theme=&quot;dark&quot;
            /&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'credentials',
      label: 'Credentials',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;🔐&lt;/div&gt;
            &lt;div&gt;Credential management&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Configure authentication for this node&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'settings',
      label: 'Settings',
      children: (
        &lt;div className=&quot;p-4&quot;&gt;
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;⚙️&lt;/div&gt;
            &lt;div&gt;Node settings&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Advanced configuration options&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;ResizablePanel title=&quot;Configuration&quot; width={550} actions={actions}&gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabItems}
        className=&quot;h-full&quot;
        tabBarStyle={{ margin: 0, paddingLeft: 16, paddingRight: 16 }}
      /&gt;
    &lt;/ResizablePanel&gt;
  );
};

const OutputPreviewPanel: React.FC&lt;{ nodeId: string }&gt; = ({ nodeId }) =&gt; {
  const { getNodeState } = useEnhancedExecutionStore();
  const nodeState = getNodeState(nodeId);

  const actions = [
    &lt;Tooltip key=&quot;copy&quot; title=&quot;Copy output&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;CopyOutlined /&gt;}
        onClick={() =&gt; {
          if (nodeState?.outputData) {
            navigator.clipboard.writeText(JSON.stringify(nodeState.outputData, null, 2));
          }
        }}
        disabled={!nodeState?.outputData}
      /&gt;
    &lt;/Tooltip&gt;,
    &lt;Tooltip key=&quot;fullscreen&quot; title=&quot;Fullscreen view&quot;&gt;
      &lt;Button
        type=&quot;text&quot;
        size=&quot;small&quot;
        icon={&lt;FullscreenOutlined /&gt;}
        onClick={() =&gt; {
          // Open fullscreen view
        }}
      /&gt;
    &lt;/Tooltip&gt;,
  ];

  const hasOutput = nodeState?.outputData;
  const hasError = nodeState?.error;

  return (
    &lt;ResizablePanel
      title=&quot;Output Preview&quot;
      width={400}
      actions={actions}
      badge={hasOutput ? '✓' : hasError ? '✗' : undefined}
    &gt;
      &lt;div className=&quot;p-4&quot;&gt;
        {hasError &amp;&amp; nodeState?.error ? (
          &lt;Card className=&quot;bg-red-900 border-red-600&quot; title=&quot;Execution Error&quot; size=&quot;small&quot;&gt;
            &lt;div className=&quot;text-red-200 text-sm&quot;&gt;
              &lt;div className=&quot;font-semibold mb-2&quot;&gt;{nodeState.error.message}&lt;/div&gt;
              {nodeState.error.stack &amp;&amp; (
                &lt;details className=&quot;mt-2&quot;&gt;
                  &lt;summary className=&quot;cursor-pointer&quot;&gt;Stack Trace&lt;/summary&gt;
                  &lt;pre className=&quot;text-xs mt-2 overflow-x-auto&quot;&gt;{nodeState.error.stack}&lt;/pre&gt;
                &lt;/details&gt;
              )}
            &lt;/div&gt;
          &lt;/Card&gt;
        ) : hasOutput ? (
          &lt;div&gt;
            &lt;div className=&quot;flex items-center justify-between mb-3&quot;&gt;
              &lt;span className=&quot;text-sm font-medium text-green-400&quot;&gt;Output Data&lt;/span&gt;
              {nodeState.duration &amp;&amp; (
                &lt;span className=&quot;text-xs text-gray-500&quot;&gt;
                  {nodeState.duration &lt; 1000
                    ? `${nodeState.duration}ms`
                    : `${(nodeState.duration / 1000).toFixed(2)}s`}
                &lt;/span&gt;
              )}
            &lt;/div&gt;
            &lt;JsonViewer data={nodeState.outputData} theme=&quot;dark&quot; collapsed={1} enableClipboard /&gt;
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
            &lt;div className=&quot;text-2xl mb-2&quot;&gt;📤&lt;/div&gt;
            &lt;div&gt;No output data&lt;/div&gt;
            &lt;div className=&quot;text-xs mt-2&quot;&gt;Execute this node to see output data&lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/ResizablePanel&gt;
  );
};

export const AdvancedPropertyPanel: React.FC&lt;AdvancedPropertyPanelProps&gt; = ({
  isOpen,
  onClose,
  nodeId,
}) =&gt; {
  const [inputPanelWidth, setInputPanelWidth] = useState(700);
  const { getNodeById } = useLeanWorkflowStore();

  const node = nodeId ? getNodeById(nodeId) : null;

  if (!isOpen || !nodeId || !node) {
    return null;
  }

  return (
    &lt;Drawer
      title={
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
            &lt;SettingOutlined /&gt;
            &lt;span&gt;{node.name || node.type}&lt;/span&gt;
            &lt;Badge status=&quot;processing&quot; text={node.type} /&gt;
          &lt;/div&gt;
          &lt;Button type=&quot;text&quot; icon={&lt;CloseOutlined /&gt;} onClick={onClose} size=&quot;small&quot; /&gt;
        &lt;/div&gt;
      }
      placement=&quot;bottom&quot;
      height=&quot;80vh&quot;
      open={isOpen}
      onClose={onClose}
      closable={false}
      className=&quot;advanced-property-panel&quot;
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;div className=&quot;flex h-full bg-gray-800&quot;&gt;
        {/* INPUT Column */}
        &lt;InputDataPanel nodeId={nodeId} width={inputPanelWidth} onResize={setInputPanelWidth} /&gt;

        {/* CONFIGURATION Column */}
        &lt;ConfigurationPanel nodeId={nodeId} /&gt;

        {/* OUTPUT Column */}
        &lt;OutputPreviewPanel nodeId={nodeId} /&gt;
      &lt;/div&gt;
    &lt;/Drawer&gt;
  );
};

export default AdvancedPropertyPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedNodePanel.tsx (Line 1:1 - Line 13:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancednodepanel/AdvancedNodePanel.tsx (Line 1:1 - Line 12:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup114"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { CONTAINER_TEMPLATES, ContainerFactory } from '@/app/services/containerFactory';
import { nodeRegistry, useLeanWorkflowStore } from '@/core';
import {
  CATEGORY_DESCRIPTIONS,
  CATEGORY_ICONS,
  UNIFIED_CATEGORIES,
} from '@/core/constants/categories';
import { useAIAssistantStore } from '@/core/stores/aiAssistantStore';
import { VirtualizedList } from '@/design-system';

interface</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AdvancedNodePanel.tsx (Line 11:18 - Line 522:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/advancednodepanel/AdvancedNodePanel.tsx (Line 16:19 - Line 527:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup115"><code class="language-tsx text-sm text-gray-800">;

interface AdvancedNodePanelProps {
  isCollapsed: boolean;
  onToggle: () =&gt; void;
}

// Helper function to get category metadata
const getCategoryMetadata = (category: string) =&gt; {
  const icon = CATEGORY_ICONS[category as keyof typeof CATEGORY_ICONS];
  const info = CATEGORY_DESCRIPTIONS[category as keyof typeof CATEGORY_DESCRIPTIONS];
  return { icon, info };
};

const AdvancedNodePanel: React.FC&lt;AdvancedNodePanelProps&gt; = ({ isCollapsed, onToggle }) =&gt; {
  const { addNode, addEdge, nodes, edges } = useLeanWorkflowStore();
  const { isEnabled: isAIEnabled, nodeSuggestions, getNodeSuggestions } = useAIAssistantStore();
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState&lt;string&gt;('all');
  const [showAISuggestions, setShowAISuggestions] = useState(true);

  // Get all nodes from the registry (replacing hardcoded array)
  const allRegistryDescriptions = nodeRegistry.getAllNodeTypeDescriptions();

  const registryNodes = allRegistryDescriptions
    .map((description) =&gt; ({
      id: `registry-${description.name || 'unknown'}`,
      displayName: description.displayName || description.name || 'Unknown Node',
      description: description.description || 'No description available',
      icon: description.icon || '⚡',
      category: description.categories?.[0] || UNIFIED_CATEGORIES.BUSINESS_PRODUCTIVITY,
      color: description.defaults?.color || '#6B7280',
      type: description.name || 'unknown',
      nodeTypeData: {
        name: description.name || 'unknown',
        displayName: description.displayName || description.name || 'Unknown Node',
      },
      isCore: true, // All registry nodes are core nodes
    }))
    .filter((node) =&gt; node.type !== 'unknown'); // Filter out malformed nodes

  // Add container nodes
  const containerNodes = Object.values(CONTAINER_TEMPLATES).map((template) =&gt; ({
    id: `container-${template.type}`,
    displayName: template.label,
    description: template.description,
    icon: template.icon,
    category: template.category,
    color: '#8B5CF6', // Purple color for containers
    type: 'container',
    containerType: template.type,
    nodeTypeData: {
      name: 'container',
      displayName: template.label,
      containerType: template.type,
    },
    isCore: true,
  })) as Array&lt;{
    id: string;
    displayName: string;
    description: string;
    icon: string;
    category: string;
    color: string;
    type: string;
    containerType?: string;
    nodeTypeData: {
      name: string;
      displayName: string;
      containerType?: string;
    };
    isCore: boolean;
  }&gt;;

  // Only log in development mode and only if there are issues
  if (import.meta.env.DEV &amp;&amp; registryNodes.length === 0) {
  }

  // Pure Registry System - use only registry nodes, no integration duplicates
  const allAvailableNodes = [...registryNodes, ...containerNodes];

  // Use unified categories
  const categories = ['all', ...Object.values(UNIFIED_CATEGORIES).sort()];

  // AI-powered node suggestions
  useEffect(() =&gt; {
    if (isAIEnabled &amp;&amp; nodes.length &gt; 0) {
      const timeoutId = setTimeout(() =&gt; {
        getNodeSuggestions({
          currentNodes: nodes,
          currentEdges: edges,
          lastAction: 'node_added',
        }).catch((_error) =&gt; {});
      }, 500); // Debounce suggestions
      return () =&gt; clearTimeout(timeoutId);
    }
  }, [isAIEnabled, nodes, edges, getNodeSuggestions]);

  // Convert AI suggestions to node format for rendering
  const aiSuggestedNodes = nodeSuggestions.map((suggestion) =&gt; ({
    id: `ai-suggestion-${suggestion.id}`,
    displayName: suggestion.title,
    description: suggestion.description,
    icon: '🤖', // AI suggestion icon
    category: 'AI_SUGGESTIONS',
    color: '#3B82F6', // Blue color for AI suggestions
    type: suggestion.type,
    nodeTypeData: {
      name: suggestion.type,
      displayName: suggestion.title,
    },
    isCore: false,
    aiSuggestion: suggestion,
  }));

  const handleAISuggestionAdd = useCallback(
    (suggestion: (typeof aiSuggestedNodes)[0]) =&gt; {
      if (suggestion.aiSuggestion) {
        // Use default position since AIWorkflowSuggestion doesn't have placement
        const defaultPosition = { x: 100, y: 100 };

        // Create node at default position
        const newNodeId = `node-${Date.now()}-${Math.random().toString(36).substr(2, 9)}-${suggestion.type}`;
        const enhancedNodeType = nodeRegistry.getNodeTypeDescription(suggestion.type);

        const newNode = {
          id: newNodeId,
          type: suggestion.type,
          position: defaultPosition,
          parameters: {
            label: suggestion.displayName,
            nodeType: suggestion.nodeTypeData.name,
            configuration: {},
            credentials: [],
            icon: enhancedNodeType?.icon || suggestion.icon,
            enhancedNodeType: enhancedNodeType,
            nodeTypeData: suggestion.nodeTypeData,
            config: {},
          },
        };

        addNode(newNode);

        // Skip auto-connect since AI suggestion doesn't have connections
        const connections: any[] = [];
        connections.forEach((connection: any) =&gt; {
          if (connection.sourceNodeId &amp;&amp; connection.type === 'input') {
            const newEdge = {
              id: `edge-${connection.sourceNodeId}-${newNodeId}`,
              source: connection.sourceNodeId,
              target: newNodeId,
              type: 'default',
            };
            addEdge(newEdge);
          } else if (connection.targetNodeId &amp;&amp; connection.type === 'output') {
            const newEdge = {
              id: `edge-${newNodeId}-${connection.targetNodeId}`,
              source: newNodeId,
              target: connection.targetNodeId,
              type: 'default',
            };
            addEdge(newEdge);
          }
        });
      }
    },
    [addNode, addEdge]
  );

  // Filter and sort nodes in ascending order
  const filteredNodes = allAvailableNodes
    .filter((node) =&gt; {
      const matchesSearch =
        (node.displayName?.toLowerCase().includes(searchTerm.toLowerCase()) ?? false) ||
        (node.description?.toLowerCase().includes(searchTerm.toLowerCase()) ?? false);
      const matchesCategory = selectedCategory === 'all' || node.category === selectedCategory;
      return matchesSearch &amp;&amp; matchesCategory;
    })
    .sort((a, b) =&gt; (a.displayName || '').localeCompare(b.displayName || ''));

  const onDragStart = useCallback((event: React.DragEvent, node: (typeof allAvailableNodes)[0]) =&gt; {
    try {
      const dragData = {
        type: node.type,
        nodeTypeData: node.nodeTypeData,
        ...(node.type === 'container' &amp;&amp; {
          containerType: (node as any).containerType,
        }),
      };

      event.dataTransfer.setData('application/reactflow', JSON.stringify(dragData));
      event.dataTransfer.effectAllowed = 'move';
    } catch (_error) {}
  }, []);

  // Helper function to find the rightmost node (last in sequence)
  const findLastNode = useCallback(() =&gt; {
    if (nodes.length === 0) return null;

    // Find node with no outgoing connections (target but no source edges)
    const nodesWithOutgoing = new Set(edges.map((edge) =&gt; edge.source));
    const candidateNodes = nodes.filter((node) =&gt; !nodesWithOutgoing.has(node.id));

    if (candidateNodes.length === 0) {
      // If all nodes have outgoing connections, use the rightmost positioned node
      return nodes.reduce((rightmost, current) =&gt;
        current.position.x &gt; rightmost.position.x ? current : rightmost
      );
    }

    // Among candidates with no outgoing connections, pick the rightmost
    return candidateNodes.reduce((rightmost, current) =&gt;
      current.position.x &gt; rightmost.position.x ? current : rightmost
    );
  }, [nodes, edges]);

  const handleAddNode = useCallback(
    (node: (typeof allAvailableNodes)[0]) =&gt; {
      // Find last node for auto-connection
      const lastNode = findLastNode();

      // Position new node to the right of the last node, or at origin if no nodes exist
      const newPosition = lastNode
        ? { x: lastNode.position.x + 300, y: lastNode.position.y }
        : { x: 100, y: 100 };

      let newNode;

      // Handle container nodes differently
      if (node.type === 'container') {
        const containerNode = ContainerFactory.createContainer(
          (node as any).containerType,
          newPosition,
          undefined,
          node.displayName
        );

        // Convert to WorkflowNodeInstance format
        newNode = {
          id: containerNode.id,
          type: containerNode.type || 'container',
          position: containerNode.position,
          parameters: containerNode.data || {},
        };
      } else {
        // Generate a unique ID for the workflow node (simplified for registry nodes)
        const baseId = node.nodeTypeData.name;
        const newNodeId = `node-${Date.now()}-${Math.random().toString(36).substr(2, 9)}-${baseId}`;

        // Get the node type description from registry
        const enhancedNodeType = nodeRegistry.getNodeTypeDescription(node.type);

        newNode = {
          id: newNodeId,
          type: node.type,
          position: newPosition,
          parameters: {
            label: node.displayName,
            nodeType: node.nodeTypeData.name,
            configuration: {},
            credentials: [],
            // Include icon and enhancedNodeType for property panel
            icon: enhancedNodeType?.icon || node.icon,
            enhancedNodeType: enhancedNodeType,
            // Node type data for registry system
            nodeTypeData: node.nodeTypeData,
            config: {},
          },
        };
      }

      addNode(newNode);

      // Auto-connect to the last node if it exists
      if (lastNode) {
        const newEdge = {
          id: `edge-${lastNode.id}-${newNode.id}`,
          source: lastNode.id,
          target: newNode.id,
          type: 'default',
        };
        addEdge(newEdge);
      }
    },
    [addNode, addEdge, findLastNode]
  );

  // Render function for AI suggestion items
  const renderAISuggestionItem = useCallback(
    (suggestion: (typeof aiSuggestedNodes)[0], _index: number) =&gt; (
      &lt;div
        key={suggestion.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, suggestion);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAISuggestionAdd(suggestion);
        }}
        className=&quot;group p-2.5 border border-blue-200 bg-blue-50 rounded-md cursor-move hover:bg-blue-100 hover:border-blue-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm bg-blue-500&quot;&gt;
            {suggestion.icon}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-blue-900 truncate&quot;&gt;{suggestion.displayName}&lt;/p&gt;
              &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-1.5 py-0.5 rounded-full font-medium&quot;&gt;
                AI
              &lt;/span&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-blue-700 truncate mt-0.5 leading-tight&quot;&gt;
              {suggestion.description}
            &lt;/p&gt;
            {suggestion.aiSuggestion &amp;&amp; (
              &lt;div className=&quot;mt-1&quot;&gt;
                &lt;p className=&quot;text-xs text-blue-600 italic&quot;&gt;
                  💡 {suggestion.aiSuggestion.reasoning}
                &lt;/p&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-700 text-xs px-1.5 py-0.5 rounded mt-1 inline-block&quot;&gt;
                  Confidence: {Math.round(suggestion.aiSuggestion.confidence * 100)}%
                &lt;/span&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAISuggestionAdd]
  );

  // Render function for node items in virtualized list
  const renderNodeItem = useCallback(
    (node: (typeof allAvailableNodes)[0], _index: number) =&gt; (
      &lt;div
        key={node.id}
        draggable
        onDragStart={(e) =&gt; {
          e.stopPropagation();
          onDragStart(e, node);
        }}
        onDragEnd={(e) =&gt; {
          e.preventDefault();
          e.stopPropagation();
        }}
        onClick={(e) =&gt; {
          e.stopPropagation();
          handleAddNode(node);
        }}
        className=&quot;group p-2.5 border border-gray-200 rounded-md cursor-move hover:bg-gray-50 hover:border-gray-300 hover:shadow-sm transition-all duration-150 mb-1.5&quot;
      &gt;
        &lt;div className=&quot;flex items-start space-x-2.5&quot;&gt;
          &lt;div
            className=&quot;w-7 h-7 rounded flex-shrink-0 flex items-center justify-center text-white text-xs font-medium shadow-sm&quot;
            style={{ backgroundColor: node.color }}
          &gt;
            {node.icon || node.displayName.charAt(0)}
          &lt;/div&gt;
          &lt;div className=&quot;flex-1 min-w-0&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;p className=&quot;text-sm font-medium text-gray-900 truncate&quot;&gt;{node.displayName}&lt;/p&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-gray-500 truncate mt-0.5 leading-tight&quot;&gt;
              {node.description}
            &lt;/p&gt;
            &lt;div className=&quot;mt-1.5&quot;&gt;
              &lt;span className=&quot;bg-gray-100 text-gray-600 text-xs px-1.5 py-0.5 rounded&quot;&gt;
                {getCategoryMetadata(node.category || '')?.icon || ''} {node.category}
              &lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    ),
    [onDragStart, handleAddNode]
  );

  return (
    &lt;div
      className={`${isCollapsed ? 'w-16' : 'w-80'} h-full bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ease-in-out`}
    &gt;
      {/* Toggle Button */}
      &lt;div className=&quot;flex justify-end p-4&quot;&gt;
        &lt;button
          onClick={onToggle}
          className=&quot;p-2 rounded-lg hover:bg-gray-100 transition-colors&quot;
          title={isCollapsed ? 'Expand node panel' : 'Collapse node panel'}
        &gt;
          &lt;span className=&quot;text-lg&quot;&gt;{isCollapsed ? '→' : '←'}&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;px-4 pb-4 border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-lg font-semibold text-gray-900&quot;&gt;Nodes&lt;/h2&gt;
            &lt;span className=&quot;bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
              {allAvailableNodes.length}
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;p className=&quot;text-sm text-gray-600&quot;&gt;Drag to add to workflow&lt;/p&gt;
        &lt;/div&gt;
      )}

      {/* Search and Filter */}
      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;p-4 border-b border-gray-200 space-y-3&quot;&gt;
          &lt;input
            type=&quot;text&quot;
            placeholder=&quot;Search nodes...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          /&gt;

          &lt;select
            value={selectedCategory}
            onChange={(e) =&gt; setSelectedCategory(e.target.value)}
            aria-label=&quot;Select category&quot;
            className=&quot;w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm&quot;
          &gt;
            {categories.map((category) =&gt; {
              const metadata = category !== 'all' ? getCategoryMetadata(category) : null;
              return (
                &lt;option key={category} value={category}&gt;
                  {category === 'all' ? 'All Categories' : `${metadata?.icon || ''} ${category}`}
                &lt;/option&gt;
              );
            })}
          &lt;/select&gt;
        &lt;/div&gt;
      )}

      {/* AI Suggestions Section */}
      {!isCollapsed &amp;&amp; isAIEnabled &amp;&amp; aiSuggestedNodes.length &gt; 0 &amp;&amp; showAISuggestions &amp;&amp; (
        &lt;div className=&quot;border-b border-gray-200&quot;&gt;
          &lt;div className=&quot;px-4 py-3 bg-blue-50&quot;&gt;
            &lt;div className=&quot;flex items-center justify-between&quot;&gt;
              &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                &lt;div className=&quot;w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center&quot;&gt;
                  &lt;span className=&quot;text-white text-xs&quot;&gt;🤖&lt;/span&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;text-sm font-medium text-blue-900&quot;&gt;AI Suggestions&lt;/h3&gt;
                &lt;span className=&quot;bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                  {aiSuggestedNodes.length}
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;button
                onClick={() =&gt; setShowAISuggestions(false)}
                className=&quot;text-blue-600 hover:text-blue-800 text-xs&quot;
                title=&quot;Hide AI suggestions&quot;
              &gt;
                ✕
              &lt;/button&gt;
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-blue-700 mt-1&quot;&gt;
              Smart suggestions based on your current workflow
            &lt;/p&gt;
          &lt;/div&gt;
          &lt;div className=&quot;px-4 py-2 max-h-48 overflow-y-auto&quot;&gt;
            {aiSuggestedNodes.map((suggestion, index) =&gt; renderAISuggestionItem(suggestion, index))}
          &lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Node List */}
      {!isCollapsed &amp;&amp; (
        &lt;div className=&quot;overflow-hidden flex flex-col&quot;&gt;
          {filteredNodes.length === 0 ? (
            &lt;div className=&quot;h-96 flex items-center justify-center&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;div className=&quot;text-gray-400 text-4xl mb-2&quot;&gt;🔍&lt;/div&gt;
                &lt;p className=&quot;text-gray-500 text-sm&quot;&gt;No nodes found&lt;/p&gt;
                &lt;p className=&quot;text-gray-400 text-xs mt-1&quot;&gt;Try adjusting your search or filter&lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ) : (
            &lt;div className=&quot;px-4 pb-4&quot;&gt;
              &lt;VirtualizedList
                items={filteredNodes}
                renderItem={renderNodeItem}
                height={700}
                estimateSize={85} // Estimated height per node item
                getItemKey={(node) =&gt; node.id}
                gap={0}
                className=&quot;node-list&quot;
                emptyState={
                  &lt;div className=&quot;text-center py-8&quot;&gt;
                    &lt;p className=&quot;text-gray-500 text-sm&quot;&gt;
                      {searchTerm
                        ? 'No nodes match your search'
                        : 'No nodes available in this category'}
                    &lt;/p&gt;
                  &lt;/div&gt;
                }
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default AdvancedNodePanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 115:17 - Line 123:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 102:17 - Line 110:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup116"><code class="language-tsx text-sm text-gray-800">&quot;
      markerWidth=&quot;10&quot;
      markerHeight=&quot;10&quot;
      refX=&quot;9&quot;
      refY=&quot;3&quot;
      orient=&quot;auto&quot;
      markerUnits=&quot;strokeWidth&quot;
    &gt;
      &lt;polygon points=&quot;0,0 0,6 9,3&quot; fill=&quot;#6366F1</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 128:17 - Line 136:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 102:17 - Line 110:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup117"><code class="language-tsx text-sm text-gray-800">&quot;
      markerWidth=&quot;10&quot;
      markerHeight=&quot;10&quot;
      refX=&quot;9&quot;
      refY=&quot;3&quot;
      orient=&quot;auto&quot;
      markerUnits=&quot;strokeWidth&quot;
    &gt;
      &lt;polygon points=&quot;0,0 0,6 9,3&quot; fill=&quot;#8B5CF6</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 141:17 - Line 149:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIEdges.tsx (Line 102:17 - Line 110:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup118"><code class="language-tsx text-sm text-gray-800">&quot;
      markerWidth=&quot;10&quot;
      markerHeight=&quot;10&quot;
      refX=&quot;9&quot;
      refY=&quot;3&quot;
      orient=&quot;auto&quot;
      markerUnits=&quot;strokeWidth&quot;
    &gt;
      &lt;polygon points=&quot;0,0 0,6 9,3&quot; fill=&quot;#14B8A6</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAssistantPanel.tsx (Line 1:1 - Line 578:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/aiassistantpanel/AIAssistantPanel.tsx (Line 4:1 - Line 581:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup120"><code class="language-tsx text-sm text-gray-800">/**
 * AI Assistant Panel
 *
 * Comprehensive AI-powered workflow assistance panel providing:
 * - Natural language workflow generation
 * - Intelligent optimization suggestions
 * - Error diagnosis and solutions
 * - Performance recommendations
 * - Pattern recognition and best practices
 */

import {
  BugOutlined,
  BulbOutlined,
  CheckCircleOutlined,
  InfoCircleOutlined,
  RobotOutlined,
  // PatternOutlined,
  SendOutlined,
  SettingOutlined,
  StarOutlined,
  ThunderboltOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Input,
  List,
  Modal,
  Progress,
  Tabs,
  Tag,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import type { WorkflowDefinition } from '@/core/nodes/types';
import type {
  AIWorkflowSuggestion,
  ErrorDiagnosis,
  NaturalLanguageRequest,
  WorkflowAnalysis,
} from '@/core/services/aiAssistantService';
import { aiAssistantService } from '@/core/services/aiAssistantService';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { TextArea } = Input;

interface AIAssistantPanelProps {
  workflow?: WorkflowDefinition;
  onApplySuggestion?: (suggestion: AIWorkflowSuggestion) =&gt; void;
  onGenerateWorkflow?: (workflow: WorkflowDefinition) =&gt; void;
  className?: string;
}

const AIAssistantPanel: React.FC&lt;AIAssistantPanelProps&gt; = ({
  workflow,
  onApplySuggestion,
  onGenerateWorkflow,
  className,
}) =&gt; {
  const [activeTab, setActiveTab] = useState('suggestions');
  const [naturalLanguageInput, setNaturalLanguageInput] = useState('');
  const [isGenerating, setIsGenerating] = useState(false);
  const [suggestions, setSuggestions] = useState&lt;AIWorkflowSuggestion[]&gt;([]);
  const [_errors] = useState&lt;ErrorDiagnosis[]&gt;([]); // TODO: Implement error handling
  const [analysis, setAnalysis] = useState&lt;WorkflowAnalysis | null&gt;(null);
  const [selectedSuggestion, setSelectedSuggestion] = useState&lt;AIWorkflowSuggestion | null&gt;(null);
  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);

  // Load suggestions when workflow changes
  useEffect(() =&gt; {
    if (workflow) {
      loadSuggestions();
      loadAnalysis();
    }
  }, [workflow, loadAnalysis, loadSuggestions]);

  const loadSuggestions = useCallback(async () =&gt; {
    if (!workflow) return;

    try {
      const workflowSuggestions = await aiAssistantService.analyzeWorkflow(workflow);
      setSuggestions(workflowSuggestions);
    } catch (_error) {}
  }, [workflow]);

  const loadAnalysis = useCallback(async () =&gt; {
    if (!workflow) return;

    try {
      // Simulate analysis loading
      const mockAnalysis: WorkflowAnalysis = {
        complexity: 0.6,
        performance: {
          bottlenecks: ['Sequential processing', 'Large data sets'],
          optimizationOpportunities: ['Parallel processing', 'Data caching'],
          estimatedImprovement: 0.4,
        },
        reliability: {
          errorProneNodes: ['http-node-1', 'database-node-2'],
          missingErrorHandling: ['http-node-1'],
          suggestions: ['Add try-catch containers', 'Implement retry logic'],
        },
        maintainability: {
          codeQuality: 0.7,
          documentation: 0.5,
          modularity: 0.8,
        },
        patterns: {
          detected: ['Sequential Pattern', 'Data Transformation Pattern'],
          recommendations: ['Use Parallel Container', 'Add Error Handling'],
        },
      };
      setAnalysis(mockAnalysis);
    } catch (_error) {}
  }, [workflow]);

  const handleGenerateWorkflow = useCallback(async () =&gt; {
    if (!naturalLanguageInput.trim()) return;

    setIsGenerating(true);
    try {
      const request: NaturalLanguageRequest = {
        text: naturalLanguageInput,
        context: {
          currentWorkflow: workflow,
          userIntent: 'workflow-generation',
        },
      };

      const result = await aiAssistantService.generateWorkflowFromText(request);
      onGenerateWorkflow?.(result.workflow);

      // Show success message
      Modal.success({
        title: 'Workflow Generated Successfully',
        content: (
          &lt;div&gt;
            &lt;p&gt;{result.explanation}&lt;/p&gt;
            &lt;p&gt;Confidence: {(result.confidence * 100).toFixed(1)}%&lt;/p&gt;
            &lt;p&gt;Complexity: {(result.estimatedComplexity * 100).toFixed(1)}%&lt;/p&gt;
          &lt;/div&gt;
        ),
      });
    } catch (_error) {
      Modal.error({
        title: 'Generation Failed',
        content: 'Failed to generate workflow from natural language description.',
      });
    } finally {
      setIsGenerating(false);
    }
  }, [naturalLanguageInput, workflow, onGenerateWorkflow]);

  const handleApplySuggestion = useCallback(
    (suggestion: AIWorkflowSuggestion) =&gt; {
      onApplySuggestion?.(suggestion);

      // Remove applied suggestion
      setSuggestions((prev) =&gt; prev.filter((s) =&gt; s.id !== suggestion.id));

      Modal.success({
        title: 'Suggestion Applied',
        content: `${suggestion.title} has been applied to your workflow.`,
      });
    },
    [onApplySuggestion]
  );

  const handleViewSuggestionDetails = useCallback((suggestion: AIWorkflowSuggestion) =&gt; {
    setSelectedSuggestion(suggestion);
    setIsDetailModalOpen(true);
  }, []);

  const getImpactColor = (impact: string) =&gt; {
    switch (impact) {
      case 'high':
        return 'red';
      case 'medium':
        return 'orange';
      case 'low':
        return 'green';
      default:
        return 'blue';
    }
  };

  const getTypeIcon = (type: string) =&gt; {
    switch (type) {
      case 'optimization':
        return &lt;ThunderboltOutlined className=&quot;text-yellow-500&quot; /&gt;;
      case 'error-fix':
        return &lt;BugOutlined className=&quot;text-red-500&quot; /&gt;;
      case 'enhancement':
        return &lt;StarOutlined className=&quot;text-blue-500&quot; /&gt;;
      case 'pattern':
        return &lt;BulbOutlined className=&quot;text-purple-500&quot; /&gt;;
      default:
        return &lt;BulbOutlined className=&quot;text-gray-500&quot; /&gt;;
    }
  };

  const renderSuggestionCard = (suggestion: AIWorkflowSuggestion) =&gt; (
    &lt;Card
      key={suggestion.id}
      size=&quot;small&quot;
      className=&quot;mb-3 bg-gray-800 border-gray-600 hover:border-gray-500 transition-colors&quot;
      actions={[
        &lt;Tooltip key=&quot;details&quot; title=&quot;View Details&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;InfoCircleOutlined /&gt;}
            onClick={() =&gt; handleViewSuggestionDetails(suggestion)}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
        &lt;Tooltip key=&quot;apply&quot; title=&quot;Apply Suggestion&quot;&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;CheckCircleOutlined /&gt;}
            onClick={() =&gt; handleApplySuggestion(suggestion)}
            className=&quot;text-green-400 hover:text-green-300&quot;
          /&gt;
        &lt;/Tooltip&gt;,
      ]}
    &gt;
      &lt;div className=&quot;space-y-2&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
            {getTypeIcon(suggestion.type)}
            &lt;span className=&quot;text-white font-medium text-sm&quot;&gt;{suggestion.title}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex items-center gap-1&quot;&gt;
            &lt;Tag color={getImpactColor(suggestion.impact)}&gt;{suggestion.impact}&lt;/Tag&gt;
            &lt;Badge
              count={`${(suggestion.confidence * 100).toFixed(0)}%`}
              style={{ backgroundColor: '#1890ff' }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;Text className=&quot;text-gray-400 text-xs&quot;&gt;{suggestion.description}&lt;/Text&gt;

        &lt;div className=&quot;flex items-center gap-2 text-xs text-gray-500&quot;&gt;
          &lt;span&gt;Category: {suggestion.category}&lt;/span&gt;
          {suggestion.estimatedBenefit.performance &amp;&amp; (
            &lt;span&gt;Performance: +{(suggestion.estimatedBenefit.performance * 100).toFixed(0)}%&lt;/span&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/Card&gt;
  );

  const renderAnalysisMetrics = () =&gt; {
    if (!analysis) return null;

    return (
      &lt;div className=&quot;space-y-4&quot;&gt;
        &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
            Workflow Analysis
          &lt;/Title&gt;

          &lt;div className=&quot;space-y-3&quot;&gt;
            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Complexity&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;{(analysis.complexity * 100).toFixed(0)}%&lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.complexity * 100}
                strokeColor=&quot;#3b82f6&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Performance&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.performance.estimatedImprovement * 100).toFixed(0)}% improvement
                  possible
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.performance.estimatedImprovement * 100}
                strokeColor=&quot;#22c55e&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div className=&quot;flex justify-between text-sm mb-1&quot;&gt;
                &lt;span className=&quot;text-gray-300&quot;&gt;Maintainability&lt;/span&gt;
                &lt;span className=&quot;text-gray-400&quot;&gt;
                  {(analysis.maintainability.codeQuality * 100).toFixed(0)}%
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;Progress
                percent={analysis.maintainability.codeQuality * 100}
                strokeColor=&quot;#f59e0b&quot;
                showInfo={false}
                size=&quot;small&quot;
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;

        {analysis.performance.bottlenecks.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Performance Bottlenecks Detected&quot;
            description={
              &lt;ul className=&quot;mt-2&quot;&gt;
                {analysis.performance.bottlenecks.map((bottleneck, index) =&gt; (
                  &lt;li key={index} className=&quot;text-sm&quot;&gt;
                    {bottleneck}
                  &lt;/li&gt;
                ))}
              &lt;/ul&gt;
            }
            type=&quot;warning&quot;
            showIcon
            className=&quot;bg-yellow-900 border-yellow-600&quot;
          /&gt;
        )}

        {analysis.reliability.missingErrorHandling.length &gt; 0 &amp;&amp; (
          &lt;Alert
            message=&quot;Missing Error Handling&quot;
            description={`${analysis.reliability.missingErrorHandling.length} nodes need error handling`}
            type=&quot;error&quot;
            showIcon
            className=&quot;bg-red-900 border-red-600&quot;
          /&gt;
        )}
      &lt;/div&gt;
    );
  };

  return (
    &lt;div className={cn('h-full bg-gray-900 border-r border-gray-700', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;RobotOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            AI Assistant
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Intelligent workflow optimization and generation
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;ai-assistant-tabs&quot;
          items={[
            {
              key: 'suggestions',
              label: (
                &lt;span&gt;
                  &lt;BulbOutlined className=&quot;mr-1&quot; /&gt;
                  Suggestions
                  {suggestions.length &gt; 0 &amp;&amp; (
                    &lt;Badge count={suggestions.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                  )}
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  {suggestions.length === 0 ? (
                    &lt;div className=&quot;text-center text-gray-500 py-8&quot;&gt;
                      &lt;BulbOutlined className=&quot;text-4xl mb-2&quot; /&gt;
                      &lt;div&gt;No suggestions available&lt;/div&gt;
                      &lt;div className=&quot;text-xs mt-2&quot;&gt;
                        {workflow
                          ? 'Workflow analysis in progress...'
                          : 'Load a workflow to get AI suggestions'}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ) : (
                    &lt;div&gt;{suggestions.map(renderSuggestionCard)}&lt;/div&gt;
                  )}
                &lt;/div&gt;
              ),
            },
            {
              key: 'generate',
              label: (
                &lt;span&gt;
                  &lt;SendOutlined className=&quot;mr-1&quot; /&gt;
                  Generate
                &lt;/span&gt;
              ),
              children: (
                &lt;div className=&quot;space-y-4&quot;&gt;
                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Natural Language to Workflow
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-3&quot;&gt;
                      &lt;TextArea
                        value={naturalLanguageInput}
                        onChange={(e) =&gt; setNaturalLanguageInput(e.target.value)}
                        placeholder=&quot;Describe your workflow in natural language...&amp;#10;&amp;#10;Example: 'Send an email notification when a new order is received, then update the inventory database'&quot;
                        rows={4}
                        className=&quot;bg-gray-700 border-gray-600 text-white&quot;
                      /&gt;
                      &lt;Button
                        type=&quot;primary&quot;
                        icon={&lt;SendOutlined /&gt;}
                        onClick={handleGenerateWorkflow}
                        loading={isGenerating}
                        disabled={!naturalLanguageInput.trim()}
                        className=&quot;w-full&quot;
                      &gt;
                        Generate Workflow
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;

                  &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
                    &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
                      Quick Templates
                    &lt;/Title&gt;
                    &lt;div className=&quot;space-y-2&quot;&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Send email notification when form is submitted')
                        }
                      &gt;
                        📧 Email Notification
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Process uploaded files and save to database')
                        }
                      &gt;
                        📁 File Processing
                      &lt;/Button&gt;
                      &lt;Button
                        type=&quot;dashed&quot;
                        size=&quot;small&quot;
                        className=&quot;w-full text-left&quot;
                        onClick={() =&gt;
                          setNaturalLanguageInput('Sync data between two APIs every hour')
                        }
                      &gt;
                        🔄 Data Synchronization
                      &lt;/Button&gt;
                    &lt;/div&gt;
                  &lt;/Card&gt;
                &lt;/div&gt;
              ),
            },
            {
              key: 'analysis',
              label: (
                &lt;span&gt;
                  &lt;SettingOutlined className=&quot;mr-1&quot; /&gt;
                  Analysis
                &lt;/span&gt;
              ),
              children: renderAnalysisMetrics(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Suggestion Details Modal */}
      &lt;Modal
        title={selectedSuggestion?.title}
        open={isDetailModalOpen}
        onCancel={() =&gt; setIsDetailModalOpen(false)}
        footer={[
          &lt;Button key=&quot;cancel&quot; onClick={() =&gt; setIsDetailModalOpen(false)}&gt;
            Close
          &lt;/Button&gt;,
          &lt;Button
            key=&quot;apply&quot;
            type=&quot;primary&quot;
            onClick={() =&gt; {
              if (selectedSuggestion) {
                handleApplySuggestion(selectedSuggestion);
                setIsDetailModalOpen(false);
              }
            }}
          &gt;
            Apply Suggestion
          &lt;/Button&gt;,
        ]}
        width={600}
      &gt;
        {selectedSuggestion &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.description}&lt;/Text&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Title level={5}&gt;Reasoning&lt;/Title&gt;
              &lt;Text className=&quot;text-gray-600&quot;&gt;{selectedSuggestion.reasoning}&lt;/Text&gt;
            &lt;/div&gt;

            {selectedSuggestion.suggestedChanges.length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}&gt;Suggested Changes&lt;/Title&gt;
                &lt;List
                  size=&quot;small&quot;
                  dataSource={selectedSuggestion.suggestedChanges}
                  renderItem={(change) =&gt; (
                    &lt;List.Item&gt;
                      &lt;div className=&quot;space-y-1&quot;&gt;
                        &lt;div className=&quot;font-medium&quot;&gt;{change.type}&lt;/div&gt;
                        &lt;div className=&quot;text-sm text-gray-600&quot;&gt;{change.reason}&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/List.Item&gt;
                  )}
                /&gt;
              &lt;/div&gt;
            )}

            {Object.keys(selectedSuggestion.estimatedBenefit).length &gt; 0 &amp;&amp; (
              &lt;div&gt;
                &lt;Title level={5}&gt;Estimated Benefits&lt;/Title&gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  {selectedSuggestion.estimatedBenefit.performance &amp;&amp; (
                    &lt;div className=&quot;flex justify-between&quot;&gt;
                      &lt;span&gt;Performance:&lt;/span&gt;
                      &lt;span className=&quot;text-green-500&quot;&gt;
                        +{(selectedSuggestion.estimatedBenefit.performance * 100).toFixed(0)}%
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                  {selectedSuggestion.estimatedBenefit.reliability &amp;&amp; (
                    &lt;div className=&quot;flex justify-between&quot;&gt;
                      &lt;span&gt;Reliability:&lt;/span&gt;
                      &lt;span className=&quot;text-blue-500&quot;&gt;
                        +{(selectedSuggestion.estimatedBenefit.reliability * 100).toFixed(0)}%
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                  {selectedSuggestion.estimatedBenefit.maintainability &amp;&amp; (
                    &lt;div className=&quot;flex justify-between&quot;&gt;
                      &lt;span&gt;Maintainability:&lt;/span&gt;
                      &lt;span className=&quot;text-purple-500&quot;&gt;
                        +{(selectedSuggestion.estimatedBenefit.maintainability * 100).toFixed(0)}%
                      &lt;/span&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default AIAssistantPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 71:2 - Line 84:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 111:2 - Line 124:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup121"><code class="language-tsx text-sm text-gray-800">getNodeIcon(node)}
                    &lt;/span&gt;
                    &lt;div&gt;
                      &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;
                        {node?.data?.label || 'Unnamed Node'}
                      &lt;/div&gt;
                      &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{getNodeTypeDisplay(node)}&lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                    {hasOutputData ? (
                      &lt;span className=&quot;px-2 py-1 bg-green-800 text-green-200 rounded text-xs flex items-center space-x-1&quot;&gt;
                        &lt;span&gt;✓&lt;/span&gt;
                        &lt;span&gt;Data Ready</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 100:17 - Line 107:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 157:19 - Line 164:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup122"><code class="language-tsx text-sm text-gray-800">) : (
                  &lt;div className=&quot;text-center py-4 text-gray-400&quot;&gt;
                    &lt;div className=&quot;text-sm&quot;&gt;No output data available&lt;/div&gt;
                    &lt;div className=&quot;text-xs mt-1&quot;&gt;Test the connected node to generate data&lt;/div&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 333:1 - Line 343:10), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 520:1 - Line 530:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup123"><code class="language-tsx text-sm text-gray-800">const getNodeIcon = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return '📧';
  }
  if (node?.type === 'transform') {
    return '🔄';
  }
  if (node?.type === 'trigger'</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 341:5 - Line 359:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 531:5 - Line 549:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup124"><code class="language-tsx text-sm text-gray-800">;
  }
  if (node?.type === 'trigger') {
    return '⚡';
  }
  return '📊';
};

const getNodeType = (node: any): string =&gt; {
  if (
    node?.data?.integrationData?.id === 'gmail' ||
    node?.data?.enhancedNodeType?.id === 'gmail-trigger'
  ) {
    return 'gmail-trigger';
  }
  if (node?.type === 'transform') {
    return 'transform';
  }
  return</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/AIAgentInputPanel.tsx (Line 357:12 - Line 372:18), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/conditioninputpanel/ConditionInputPanel.tsx (Line 550:11 - Line 565:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup125"><code class="language-tsx text-sm text-gray-800">;
  }
  return node?.type || 'unknown';
};

const getNodeTypeDisplay = (node: any): string =&gt; {
  return (
    node?.data?.enhancedNodeType?.displayName ||
    node?.data?.nodeTypeData?.displayName ||
    node?.data?.nodeTypeData?.name ||
    node?.type ||
    'Unknown Node Type'
  );
};

export default AIAgentInputPanel</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/UserManagementPanel.tsx (Line 1:1 - Line 995:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/UserManagement/usermanagementpanel/UserManagementPanel.tsx (Line 4:1 - Line 998:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup127"><code class="language-tsx text-sm text-gray-800">/**
 * User Management Panel
 *
 * Comprehensive user management interface providing:
 * - User listing and search
 * - Role assignment and permissions
 * - User invitation system
 * - MFA management
 * - API key management
 * - SSO configuration
 */

import {
  CheckCircleOutlined,
  DeleteOutlined,
  EditOutlined,
  EyeOutlined,
  KeyOutlined,
  LockOutlined,
  MailOutlined,
  MoreOutlined,
  SettingOutlined,
  TeamOutlined,
  UnlockOutlined,
  UserAddOutlined,
  UserOutlined,
} from '@ant-design/icons';
import {
  Avatar,
  Badge,
  Button,
  Card,
  Dropdown,
  Form,
  Input,
  List,
  Modal,
  Select,
  Space,
  Statistic,
  Switch,
  Table,
  Tabs,
  Tag,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
// import { advancedAuthService } from &quot;@/core/services/advancedAuthService&quot;;
import type {
  APIKey,
  SSOProvider,
  User,
  UserInvitation,
  UserRole,
} from '@/core/types/authentication';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Search } = Input;
const { Option } = Select;

interface UserManagementPanelProps {
  className?: string;
}

const UserManagementPanel: React.FC&lt;UserManagementPanelProps&gt; = ({ className }) =&gt; {
  const [activeTab, setActiveTab] = useState('users');
  const [users, setUsers] = useState&lt;User[]&gt;([]);
  const [roles, setRoles] = useState&lt;UserRole[]&gt;([]);
  const [apiKeys, setApiKeys] = useState&lt;APIKey[]&gt;([]);
  const [invitations, setInvitations] = useState&lt;UserInvitation[]&gt;([]);
  const [ssoProviders, setSSOProviders] = useState&lt;SSOProvider[]&gt;([]);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedRole, setSelectedRole] = useState&lt;string&gt;('all');
  const [isUserModalOpen, setIsUserModalOpen] = useState(false);
  const [isInviteModalOpen, setIsInviteModalOpen] = useState(false);
  const [isAPIKeyModalOpen, setIsAPIKeyModalOpen] = useState(false);
  const [selectedUser, setSelectedUser] = useState&lt;User | null&gt;(null);
  const [isLoading, setIsLoading] = useState(false);

  // Load data on component mount
  useEffect(() =&gt; {
    loadUsers();
    loadRoles();
    loadAPIKeys();
    loadInvitations();
    loadSSOProviders();
  }, [loadAPIKeys, loadInvitations, loadRoles, loadSSOProviders, loadUsers]);

  const loadUsers = useCallback(async () =&gt; {
    setIsLoading(true);
    try {
      // Simulate API call - in production, this would fetch from backend
      const mockUsers: User[] = [
        {
          id: 'user_1',
          email: 'admin@reporunner.com',
          name: 'Admin User',
          role: {
            id: 'admin',
            name: 'Administrator',
            description: 'System administration',
            level: 8,
            permissions: [],
            isSystem: true,
            createdAt: Date.now(),
            updatedAt: Date.now(),
          },
          status: 'active',
          createdAt: Date.now(),
          lastLoginAt: Date.now() - 3600000,
          mfaEnabled: true,
          preferences: {
            theme: 'dark',
            language: 'en',
            timezone: 'UTC',
            notifications: {
              email: true,
              push: false,
              inApp: true,
              workflows: true,
              executions: true,
              security: true,
            },
            dashboard: {
              layout: 'grid',
              widgets: ['workflows', 'executions', 'recent'],
              refreshInterval: 30000,
            },
            editor: {
              autoSave: true,
              autoComplete: true,
              syntaxHighlighting: true,
              wordWrap: true,
            },
          },
          permissions: [],
          projects: [],
        },
        {
          id: 'user_2',
          email: 'editor@reporunner.com',
          name: 'Editor User',
          role: {
            id: 'editor',
            name: 'Editor',
            description: 'Create and edit workflows',
            level: 4,
            permissions: [],
            isSystem: false,
            createdAt: Date.now(),
            updatedAt: Date.now(),
          },
          status: 'active',
          createdAt: Date.now() - 86400000,
          lastLoginAt: Date.now() - 7200000,
          mfaEnabled: false,
          preferences: {
            theme: 'light',
            language: 'en',
            timezone: 'UTC',
            notifications: {
              email: true,
              push: false,
              inApp: true,
              workflows: true,
              executions: true,
              security: true,
            },
            dashboard: {
              layout: 'list',
              widgets: ['workflows', 'executions'],
              refreshInterval: 60000,
            },
            editor: {
              autoSave: true,
              autoComplete: true,
              syntaxHighlighting: true,
              wordWrap: false,
            },
          },
          permissions: [],
          projects: [],
        },
        {
          id: 'user_3',
          email: 'viewer@reporunner.com',
          name: 'Viewer User',
          role: {
            id: 'viewer',
            name: 'Viewer',
            description: 'View-only access',
            level: 2,
            permissions: [],
            isSystem: true,
            createdAt: Date.now(),
            updatedAt: Date.now(),
          },
          status: 'pending',
          createdAt: Date.now() - 172800000,
          mfaEnabled: false,
          preferences: {
            theme: 'dark',
            language: 'en',
            timezone: 'UTC',
            notifications: {
              email: false,
              push: false,
              inApp: true,
              workflows: false,
              executions: false,
              security: true,
            },
            dashboard: {
              layout: 'grid',
              widgets: ['workflows'],
              refreshInterval: 300000,
            },
            editor: {
              autoSave: false,
              autoComplete: false,
              syntaxHighlighting: true,
              wordWrap: true,
            },
          },
          permissions: [],
          projects: [],
        },
      ];
      setUsers(mockUsers);
    } catch (_error) {
    } finally {
      setIsLoading(false);
    }
  }, []);

  const loadRoles = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockRoles: UserRole[] = [
        {
          id: 'owner',
          name: 'Owner',
          description: 'Full system access',
          level: 10,
          permissions: [],
          isSystem: true,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'admin',
          name: 'Administrator',
          description: 'System administration',
          level: 8,
          permissions: [],
          isSystem: true,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'manager',
          name: 'Manager',
          description: 'Project management',
          level: 6,
          permissions: [],
          isSystem: false,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'editor',
          name: 'Editor',
          description: 'Create and edit workflows',
          level: 4,
          permissions: [],
          isSystem: false,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
        {
          id: 'viewer',
          name: 'Viewer',
          description: 'View-only access',
          level: 2,
          permissions: [],
          isSystem: true,
          createdAt: Date.now(),
          updatedAt: Date.now(),
        },
      ];
      setRoles(mockRoles);
    } catch (_error) {}
  }, []);

  const loadAPIKeys = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockAPIKeys: APIKey[] = [
        {
          id: 'key_1',
          name: 'Development API Key',
          key: 'rr_dev_1234567890abcdef',
          keyHash: 'hash1',
          permissions: [],
          expiresAt: Date.now() + 365 * 24 * 60 * 60 * 1000,
          lastUsedAt: Date.now() - 3600000,
          createdAt: Date.now() - 86400000,
          createdBy: 'user_1',
          status: 'active',
          metadata: {
            description: 'API key for development environment',
          },
        },
        {
          id: 'key_2',
          name: 'Production API Key',
          key: 'rr_prod_abcdef1234567890',
          keyHash: 'hash2',
          permissions: [],
          expiresAt: Date.now() + 30 * 24 * 60 * 60 * 1000,
          lastUsedAt: Date.now() - 1800000,
          createdAt: Date.now() - 172800000,
          createdBy: 'user_1',
          status: 'active',
          metadata: {
            description: 'API key for production environment',
          },
        },
      ];
      setApiKeys(mockAPIKeys);
    } catch (_error) {}
  }, []);

  const loadInvitations = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockInvitations: UserInvitation[] = [
        {
          id: 'invite_1',
          email: 'newuser@example.com',
          role: 'editor',
          permissions: [],
          projects: [],
          invitedBy: 'user_1',
          invitedAt: Date.now() - 86400000,
          expiresAt: Date.now() + 6 * 24 * 60 * 60 * 1000,
          status: 'pending',
          token: 'token123',
          message: 'Welcome to Reporunner!',
        },
      ];
      setInvitations(mockInvitations);
    } catch (_error) {}
  }, []);

  const loadSSOProviders = useCallback(async () =&gt; {
    try {
      // Simulate API call
      const mockProviders: SSOProvider[] = [
        {
          id: 'google',
          name: 'Google',
          type: 'oauth2',
          enabled: true,
          configuration: {
            issuer: 'https://accounts.google.com',
            clientId: 'google-client-id',
            redirectUri: 'http://localhost:3000/auth/callback/google',
            scopes: ['openid', 'email', 'profile'],
            endpoints: {
              authorization: 'https://accounts.google.com/o/oauth2/v2/auth',
              token: 'https://oauth2.googleapis.com/token',
              userInfo: 'https://www.googleapis.com/oauth2/v2/userinfo',
            },
            attributes: {
              email: 'email',
              name: 'name',
            },
          },
          metadata: {
            logo: 'https://developers.google.com/identity/images/g-logo.png',
            description: 'Sign in with Google',
          },
        },
        {
          id: 'microsoft',
          name: 'Microsoft',
          type: 'oauth2',
          enabled: false,
          configuration: {
            issuer: 'https://login.microsoftonline.com/common',
            clientId: 'microsoft-client-id',
            redirectUri: 'http://localhost:3000/auth/callback/microsoft',
            scopes: ['openid', 'email', 'profile'],
            endpoints: {
              authorization: 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize',
              token: 'https://login.microsoftonline.com/common/oauth2/v2.0/token',
              userInfo: 'https://graph.microsoft.com/v1.0/me',
            },
            attributes: {
              email: 'mail',
              name: 'displayName',
            },
          },
          metadata: {
            logo: 'https://img.icons8.com/color/48/000000/microsoft.png',
            description: 'Sign in with Microsoft',
          },
        },
      ];
      setSSOProviders(mockProviders);
    } catch (_error) {}
  }, []);

  const getStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'active':
        return 'green';
      case 'inactive':
        return 'gray';
      case 'pending':
        return 'orange';
      case 'suspended':
        return 'red';
      default:
        return 'default';
    }
  };

  const getRoleColor = (roleId: string) =&gt; {
    switch (roleId) {
      case 'owner':
        return 'red';
      case 'admin':
        return 'purple';
      case 'manager':
        return 'blue';
      case 'editor':
        return 'green';
      case 'viewer':
        return 'gray';
      default:
        return 'default';
    }
  };

  const filteredUsers = users.filter((user) =&gt; {
    const matchesSearch =
      !searchTerm ||
      user.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      user.email.toLowerCase().includes(searchTerm.toLowerCase());

    const matchesRole = selectedRole === 'all' || user.role.id === selectedRole;

    return matchesSearch &amp;&amp; matchesRole;
  });

  const userColumns = [
    {
      title: 'User',
      key: 'user',
      render: (record: User) =&gt; (
        &lt;div className=&quot;flex items-center gap-3&quot;&gt;
          &lt;Avatar size=&quot;small&quot; icon={&lt;UserOutlined /&gt;} /&gt;
          &lt;div&gt;
            &lt;div className=&quot;text-white font-medium&quot;&gt;{record.name}&lt;/div&gt;
            &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.email}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Role',
      key: 'role',
      render: (record: User) =&gt; &lt;Tag color={getRoleColor(record.role.id)}&gt;{record.role.name}&lt;/Tag&gt;,
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: User) =&gt; &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;,
    },
    {
      title: 'MFA',
      key: 'mfa',
      render: (record: User) =&gt; (
        &lt;Badge
          status={record.mfaEnabled ? 'success' : 'default'}
          text={record.mfaEnabled ? 'Enabled' : 'Disabled'}
        /&gt;
      ),
    },
    {
      title: 'Last Login',
      key: 'lastLogin',
      render: (record: User) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {record.lastLoginAt ? new Date(record.lastLoginAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: User) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;Edit User&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EditOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedUser(record);
                setIsUserModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Manage MFA&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;CheckCircleOutlined /&gt;}
              onClick={() =&gt; {
                // Handle MFA management
              }}
              className=&quot;text-purple-400 hover:text-purple-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Dropdown
            menu={{
              items: [
                {
                  key: 'suspend',
                  label: record.status === 'active' ? 'Suspend User' : 'Activate User',
                  icon: record.status === 'active' ? &lt;LockOutlined /&gt; : &lt;UnlockOutlined /&gt;,
                },
                {
                  key: 'delete',
                  label: 'Delete User',
                  icon: &lt;DeleteOutlined /&gt;,
                  danger: true,
                },
              ],
            }}
            trigger={['click']}
          &gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;MoreOutlined /&gt;}
              className=&quot;text-gray-400 hover:text-gray-300&quot;
            /&gt;
          &lt;/Dropdown&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const apiKeyColumns = [
    {
      title: 'Name',
      key: 'name',
      render: (_record: APIKey) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{_record.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.metadata.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Key',
      key: 'key',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;font-mono text-xs text-gray-300&quot;&gt;{_record.key.substring(0, 12)}...&lt;/div&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (_record: APIKey) =&gt; (
        &lt;Tag color={_record.status === 'active' ? 'green' : 'red'}&gt;{_record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Expires',
      key: 'expires',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.expiresAt ? new Date(_record.expiresAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Last Used',
      key: 'lastUsed',
      render: (_record: APIKey) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {_record.lastUsedAt ? new Date(_record.lastUsedAt).toLocaleDateString() : 'Never'}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: APIKey) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Revoke Key&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;DeleteOutlined /&gt;}
              className=&quot;text-red-400 hover:text-red-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderUserStats = () =&gt; (
    &lt;div className=&quot;grid grid-cols-4 gap-4 mb-6&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic title=&quot;Total Users&quot; value={users.length} valueStyle={{ color: '#3b82f6' }} /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Active Users&quot;
          value={users.filter((u) =&gt; u.status === 'active').length}
          valueStyle={{ color: '#22c55e' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;Pending Invitations&quot;
          value={invitations.filter((i) =&gt; i.status === 'pending').length}
          valueStyle={{ color: '#f59e0b' }}
        /&gt;
      &lt;/Card&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Statistic
          title=&quot;MFA Enabled&quot;
          value={users.filter((u) =&gt; u.mfaEnabled).length}
          valueStyle={{ color: '#8b5cf6' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderUsersTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      {renderUserStats()}

      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Users
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Search
              placeholder=&quot;Search users...&quot;
              value={searchTerm}
              onChange={(e) =&gt; setSearchTerm(e.target.value)}
              className=&quot;w-64&quot;
            /&gt;
            &lt;Select value={selectedRole} onChange={setSelectedRole} className=&quot;w-32&quot;&gt;
              &lt;Option value=&quot;all&quot;&gt;All Roles&lt;/Option&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;UserAddOutlined /&gt;}
              onClick={() =&gt; setIsInviteModalOpen(true)}
            &gt;
              Invite User
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={userColumns}
          dataSource={filteredUsers}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderAPIKeysTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            API Keys
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsAPIKeyModalOpen(true)}&gt;
            Create API Key
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={apiKeyColumns}
          dataSource={apiKeys}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderInvitationsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Pending Invitations
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;MailOutlined /&gt;} onClick={() =&gt; setIsInviteModalOpen(true)}&gt;
            Send Invitation
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;List
          dataSource={invitations.filter((i) =&gt; i.status === 'pending')}
          renderItem={(invitation) =&gt; (
            &lt;List.Item
              actions={[
                &lt;Button key=&quot;resend&quot; type=&quot;text&quot; size=&quot;small&quot;&gt;
                  Resend
                &lt;/Button&gt;,
                &lt;Button key=&quot;revoke&quot; type=&quot;text&quot; size=&quot;small&quot; danger&gt;
                  Revoke
                &lt;/Button&gt;,
              ]}
            &gt;
              &lt;List.Item.Meta
                avatar={&lt;Avatar icon={&lt;MailOutlined /&gt;} /&gt;}
                title={invitation.email}
                description={
                  &lt;div&gt;
                    &lt;div&gt;Role: {invitation.role}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                      Expires: {new Date(invitation.expiresAt).toLocaleDateString()}
                    &lt;/div&gt;
                  &lt;/div&gt;
                }
              /&gt;
            &lt;/List.Item&gt;
          )}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSSOTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;Title level={5} className=&quot;text-white mb-4&quot;&gt;
          SSO Providers
        &lt;/Title&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {ssoProviders.map((provider) =&gt; (
            &lt;div
              key={provider.id}
              className=&quot;flex items-center justify-between p-3 bg-gray-700 rounded border border-gray-600&quot;
            &gt;
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;img src={provider.metadata.logo} alt={provider.name} className=&quot;w-8 h-8 rounded&quot; /&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{provider.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{provider.metadata.description}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                &lt;Switch
                  checked={provider.enabled}
                  onChange={(_checked) =&gt; {
                    // Handle SSO provider toggle
                  }}
                /&gt;
                &lt;Button
                  type=&quot;text&quot;
                  size=&quot;small&quot;
                  icon={&lt;SettingOutlined /&gt;}
                  onClick={() =&gt; {
                    // Handle SSO configuration
                  }}
                  className=&quot;text-gray-400 hover:text-gray-300&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;TeamOutlined className=&quot;text-blue-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            User Management
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Manage users, roles, permissions, and authentication
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;user-management-tabs&quot;
          items={[
            {
              key: 'users',
              label: (
                &lt;span&gt;
                  &lt;UserOutlined className=&quot;mr-1&quot; /&gt;
                  Users
                  &lt;Badge count={users.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderUsersTab(),
            },
            {
              key: 'apikeys',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  API Keys
                  &lt;Badge count={apiKeys.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAPIKeysTab(),
            },
            {
              key: 'invitations',
              label: (
                &lt;span&gt;
                  &lt;MailOutlined className=&quot;mr-1&quot; /&gt;
                  Invitations
                  &lt;Badge
                    count={invitations.filter((i) =&gt; i.status === 'pending').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderInvitationsTab(),
            },
            {
              key: 'sso',
              label: (
                &lt;span&gt;
                  &lt;LockOutlined className=&quot;mr-1&quot; /&gt;
                  SSO
                  &lt;Badge
                    count={ssoProviders.filter((p) =&gt; p.enabled).length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderSSOTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* User Edit Modal */}
      &lt;Modal
        title=&quot;Edit User&quot;
        open={isUserModalOpen}
        onCancel={() =&gt; setIsUserModalOpen(false)}
        onOk={() =&gt; setIsUserModalOpen(false)}
        width={600}
      &gt;
        {selectedUser &amp;&amp; (
          &lt;Form layout=&quot;vertical&quot;&gt;
            &lt;Form.Item label=&quot;Name&quot;&gt;
              &lt;Input value={selectedUser.name} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Email&quot;&gt;
              &lt;Input value={selectedUser.email} /&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Role&quot;&gt;
              &lt;Select value={selectedUser.role.id}&gt;
                {roles.map((role) =&gt; (
                  &lt;Option key={role.id} value={role.id}&gt;
                    {role.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
            &lt;Form.Item label=&quot;Status&quot;&gt;
              &lt;Select value={selectedUser.status}&gt;
                &lt;Option value=&quot;active&quot;&gt;Active&lt;/Option&gt;
                &lt;Option value=&quot;inactive&quot;&gt;Inactive&lt;/Option&gt;
                &lt;Option value=&quot;suspended&quot;&gt;Suspended&lt;/Option&gt;
              &lt;/Select&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        )}
      &lt;/Modal&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={isInviteModalOpen}
        onCancel={() =&gt; setIsInviteModalOpen(false)}
        onOk={() =&gt; setIsInviteModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Email&quot; required&gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Role&quot; required&gt;
            &lt;Select placeholder=&quot;Select role&quot;&gt;
              {roles.map((role) =&gt; (
                &lt;Option key={role.id} value={role.id}&gt;
                  {role.name}
                &lt;/Option&gt;
              ))}
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Message&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Welcome message (optional)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create API Key Modal */}
      &lt;Modal
        title=&quot;Create API Key&quot;
        open={isAPIKeyModalOpen}
        onCancel={() =&gt; setIsAPIKeyModalOpen(false)}
        onOk={() =&gt; setIsAPIKeyModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;API Key Name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Description (optional)&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Expiration&quot;&gt;
            &lt;Select placeholder=&quot;Select expiration&quot;&gt;
              &lt;Option value=&quot;30&quot;&gt;30 days&lt;/Option&gt;
              &lt;Option value=&quot;90&quot;&gt;90 days&lt;/Option&gt;
              &lt;Option value=&quot;365&quot;&gt;1 year&lt;/Option&gt;
              &lt;Option value=&quot;never&quot;&gt;Never&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Permissions&quot;&gt;
            &lt;Select mode=&quot;multiple&quot; placeholder=&quot;Select permissions&quot;&gt;
              &lt;Option value=&quot;read&quot;&gt;Read&lt;/Option&gt;
              &lt;Option value=&quot;write&quot;&gt;Write&lt;/Option&gt;
              &lt;Option value=&quot;execute&quot;&gt;Execute&lt;/Option&gt;
              &lt;Option value=&quot;manage&quot;&gt;Manage&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default UserManagementPanel;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/SecurityDashboard.tsx (Line 1:1 - Line 908:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/SecurityDashboard/securitydashboard/SecurityDashboard.tsx (Line 4:1 - Line 911:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup129"><code class="language-tsx text-sm text-gray-800">/**
 * Security Dashboard Component
 *
 * Comprehensive security monitoring interface providing:
 * - Real-time security metrics and alerts
 * - Audit log visualization and filtering
 * - Vulnerability scan results and management
 * - Security incident tracking and response
 * - Compliance reporting and monitoring
 * - Secrets management and rotation
 */

import {
  AlertOutlined,
  AuditOutlined,
  BugOutlined,
  CheckCircleOutlined,
  DownloadOutlined,
  EyeOutlined,
  KeyOutlined,
  ReloadOutlined,
  SecurityScanOutlined,
  SettingOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Col,
  DatePicker,
  Form,
  Input,
  Modal,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tabs,
  Tag,
  Timeline,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { enterpriseSecurityService } from '@/core/services/enterpriseSecurityService';
import type {
  AuditCategory,
  AuditLog,
  AuditSeverity,
  ComplianceReport,
  SecretManager,
  SecurityIncident,
  SecurityMetrics,
  VulnerabilityScan,
} from '@/core/types/security';
import { cn } from '@/design-system/utils';

const { Title, Text } = Typography;
const { Option } = Select;
const { RangePicker } = DatePicker;

interface SecurityDashboardProps {
  className?: string;
}

const SecurityDashboard: React.FC&lt;SecurityDashboardProps&gt; = ({ className }) =&gt; {
  const [activeTab, setActiveTab] = useState('overview');
  const [metrics, setMetrics] = useState&lt;SecurityMetrics | null&gt;(null);
  const [auditLogs, setAuditLogs] = useState&lt;AuditLog[]&gt;([]);
  const [incidents, setIncidents] = useState&lt;SecurityIncident[]&gt;([]);
  const [vulnerabilityScans, setVulnerabilityScans] = useState&lt;VulnerabilityScan[]&gt;([]);
  const [complianceReports, setComplianceReports] = useState&lt;ComplianceReport[]&gt;([]);
  const [secrets, setSecrets] = useState&lt;SecretManager[]&gt;([]);
  const [isLoading, setIsLoading] = useState(false);
  const [selectedIncident, setSelectedIncident] = useState&lt;SecurityIncident | null&gt;(null);
  const [isIncidentModalOpen, setIsIncidentModalOpen] = useState(false);
  const [isScanModalOpen, setIsScanModalOpen] = useState(false);
  const [isSecretModalOpen, setIsSecretModalOpen] = useState(false);
  const [filters, setFilters] = useState({
    severity: 'all' as AuditSeverity | 'all',
    category: 'all' as AuditCategory | 'all',
    startDate: null as any,
    endDate: null as any,
  });

  // Load data on component mount
  useEffect(() =&gt; {
    loadSecurityData();
  }, [loadSecurityData]);

  const loadSecurityData = useCallback(async () =&gt; {
    setIsLoading(true);
    try {
      const [metricsData, auditLogsData, incidentsData, scansData, reportsData, secretsData] =
        await Promise.all([
          enterpriseSecurityService.getSecurityMetrics(),
          enterpriseSecurityService.getAuditLogs({ limit: 100 }),
          Promise.resolve([]), // getSecurityIncidents - method doesn't exist yet
          enterpriseSecurityService.getVulnerabilityScans(),
          Promise.resolve([]), // getComplianceReports - method doesn't exist yet
          Promise.resolve([]), // getSecrets - method doesn't exist yet
        ]);

      setMetrics(metricsData);
      setAuditLogs(auditLogsData);
      setIncidents(incidentsData as SecurityIncident[]);
      setVulnerabilityScans(scansData);
      setComplianceReports(reportsData as ComplianceReport[]);
      setSecrets(secretsData as SecretManager[]);
    } catch (_error) {
    } finally {
      setIsLoading(false);
    }
  }, []);

  const getSeverityColor = (severity: string) =&gt; {
    switch (severity) {
      case 'critical':
        return 'red';
      case 'high':
        return 'orange';
      case 'medium':
        return 'yellow';
      case 'low':
        return 'green';
      case 'info':
        return 'blue';
      default:
        return 'default';
    }
  };

  const getStatusColor = (status: string) =&gt; {
    switch (status) {
      case 'open':
        return 'red';
      case 'investigating':
        return 'orange';
      case 'contained':
        return 'blue';
      case 'resolved':
        return 'green';
      case 'closed':
        return 'gray';
      default:
        return 'default';
    }
  };

  const filteredAuditLogs = auditLogs.filter((log) =&gt; {
    if (filters.severity !== 'all' &amp;&amp; log.severity !== filters.severity) return false;
    if (filters.category !== 'all' &amp;&amp; log.category !== filters.category) return false;
    if (filters.startDate &amp;&amp; log.timestamp &lt; filters.startDate.valueOf()) return false;
    if (filters.endDate &amp;&amp; log.timestamp &gt; filters.endDate.valueOf()) return false;
    return true;
  });

  const auditLogColumns = [
    {
      title: 'Timestamp',
      key: 'timestamp',
      render: (_record: AuditLog) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{new Date(_record.timestamp).toLocaleString()}&lt;/div&gt;
      ),
      sorter: (a: AuditLog, b: AuditLog) =&gt; a.timestamp - b.timestamp,
    },
    {
      title: 'User',
      key: 'user',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.userEmail}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.userId}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Action',
      key: 'action',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.action.description}&lt;/div&gt;
          &lt;Tag color={getSeverityColor(_record.severity)}&gt;{_record.action.type}&lt;/Tag&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Resource',
      key: 'resource',
      render: (_record: AuditLog) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white text-sm&quot;&gt;{_record.resource.name}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{_record.resource.type}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (_record: AuditLog) =&gt; (
        &lt;Tag color={getSeverityColor(_record.severity)}&gt;{_record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'IP Address',
      key: 'ipAddress',
      render: (_record: AuditLog) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs font-mono&quot;&gt;{_record.ipAddress}&lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_record: AuditLog) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                // Show audit log details
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const incidentColumns = [
    {
      title: 'Title',
      key: 'title',
      render: (record: SecurityIncident) =&gt; (
        &lt;div&gt;
          &lt;div className=&quot;text-white font-medium&quot;&gt;{record.title}&lt;/div&gt;
          &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{record.description}&lt;/div&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Severity',
      key: 'severity',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getSeverityColor(record.severity)}&gt;{record.severity}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: SecurityIncident) =&gt; (
        &lt;Tag color={getStatusColor(record.status)}&gt;{record.status}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Category',
      key: 'category',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs capitalize&quot;&gt;{record.category.replace('_', ' ')}&lt;/div&gt;
      ),
    },
    {
      title: 'Created',
      key: 'createdAt',
      render: (record: SecurityIncident) =&gt; (
        &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
          {new Date(record.createdAt).toLocaleDateString()}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: SecurityIncident) =&gt; (
        &lt;Space size=&quot;small&quot;&gt;
          &lt;Tooltip title=&quot;View Details&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;EyeOutlined /&gt;}
              onClick={() =&gt; {
                setSelectedIncident(record);
                setIsIncidentModalOpen(true);
              }}
              className=&quot;text-blue-400 hover:text-blue-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
          &lt;Tooltip title=&quot;Update Status&quot;&gt;
            &lt;Button
              type=&quot;text&quot;
              size=&quot;small&quot;
              icon={&lt;SettingOutlined /&gt;}
              onClick={() =&gt; {
                // Update incident status
              }}
              className=&quot;text-green-400 hover:text-green-300&quot;
            /&gt;
          &lt;/Tooltip&gt;
        &lt;/Space&gt;
      ),
    },
  ];

  const renderOverviewTab = () =&gt; (
    &lt;div className=&quot;space-y-6&quot;&gt;
      {/* Security Metrics */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Security Score&quot;
              value={metrics?.securityScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#22c55e' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Open Incidents&quot;
              value={metrics?.openIncidents || 0}
              valueStyle={{ color: '#ef4444' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Critical Incidents&quot;
              value={metrics?.criticalIncidents || 0}
              valueStyle={{ color: '#dc2626' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} sm={12} md={6}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Statistic
              title=&quot;Compliance Score&quot;
              value={metrics?.complianceScore || 0}
              suffix=&quot;/100&quot;
              valueStyle={{ color: '#3b82f6' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Recent Security Events */}
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Recent Security Events
          &lt;/Title&gt;
          &lt;Button
            type=&quot;text&quot;
            size=&quot;small&quot;
            icon={&lt;ReloadOutlined /&gt;}
            onClick={loadSecurityData}
            className=&quot;text-gray-400 hover:text-gray-300&quot;
          /&gt;
        &lt;/div&gt;

        &lt;Timeline
          items={auditLogs.slice(0, 5).map((log) =&gt; ({
            color: getSeverityColor(log.severity),
            children: (
              &lt;div className=&quot;space-y-1&quot;&gt;
                &lt;div className=&quot;text-white text-sm&quot;&gt;{log.action.description}&lt;/div&gt;
                &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                  {log.userEmail} • {new Date(log.timestamp).toLocaleString()}
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Tag color={getSeverityColor(log.severity)}&gt;{log.severity}&lt;/Tag&gt;
                  &lt;Tag&gt;{log.category}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            ),
          }))}
        /&gt;
      &lt;/Card&gt;

      {/* Security Alerts */}
      &lt;Row gutter={[16, 16]}&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Security Alerts
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {incidents.slice(0, 3).map((incident) =&gt; (
                &lt;Alert
                  key={incident.id}
                  message={incident.title}
                  description={incident.description}
                  type={incident.severity === 'critical' ? 'error' : 'warning'}
                  showIcon
                  className=&quot;bg-red-900 border-red-600&quot;
                /&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col xs={24} md={12}&gt;
          &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
            &lt;Title level={5} className=&quot;text-white mb-3&quot;&gt;
              Vulnerability Summary
            &lt;/Title&gt;
            &lt;div className=&quot;space-y-3&quot;&gt;
              {vulnerabilityScans.slice(0, 3).map((scan) =&gt; (
                &lt;div
                  key={scan.id}
                  className=&quot;flex items-center justify-between p-2 bg-gray-700 rounded&quot;
                &gt;
                  &lt;div&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.target}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-right&quot;&gt;
                    &lt;div className=&quot;text-white text-sm&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;findings&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/div&gt;
  );

  const renderAuditLogsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Audit Logs
          &lt;/Title&gt;
          &lt;Space&gt;
            &lt;Select
              value={filters.severity}
              onChange={(value) =&gt; setFilters({ ...filters, severity: value })}
              className=&quot;w-32&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Severity&lt;/Option&gt;
              &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
              &lt;Option value=&quot;error&quot;&gt;Error&lt;/Option&gt;
              &lt;Option value=&quot;warning&quot;&gt;Warning&lt;/Option&gt;
              &lt;Option value=&quot;info&quot;&gt;Info&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;Select
              value={filters.category}
              onChange={(value) =&gt; setFilters({ ...filters, category: value })}
              className=&quot;w-40&quot;
            &gt;
              &lt;Option value=&quot;all&quot;&gt;All Categories&lt;/Option&gt;
              &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
              &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
              &lt;Option value=&quot;data_access&quot;&gt;Data Access&lt;/Option&gt;
              &lt;Option value=&quot;security_event&quot;&gt;Security Event&lt;/Option&gt;
            &lt;/Select&gt;
            &lt;RangePicker
              value={[filters.startDate, filters.endDate]}
              onChange={(dates) =&gt;
                setFilters({
                  ...filters,
                  startDate: dates?.[0],
                  endDate: dates?.[1],
                })
              }
              className=&quot;w-64&quot;
            /&gt;
            &lt;Button
              type=&quot;primary&quot;
              icon={&lt;DownloadOutlined /&gt;}
              onClick={() =&gt; {
                // Export audit logs
              }}
            &gt;
              Export
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;

        &lt;Table
          columns={auditLogColumns}
          dataSource={filteredAuditLogs}
          loading={isLoading}
          pagination={{ pageSize: 20 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
          scroll={{ x: 'max-content' }}
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderIncidentsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Security Incidents
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AlertOutlined /&gt;}
            onClick={() =&gt; setIsIncidentModalOpen(true)}
          &gt;
            Create Incident
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;Table
          columns={incidentColumns}
          dataSource={incidents}
          loading={isLoading}
          pagination={{ pageSize: 10 }}
          size=&quot;small&quot;
          className=&quot;bg-transparent&quot;
          rowKey=&quot;id&quot;
        /&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderVulnerabilitiesTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Vulnerability Scans
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;SecurityScanOutlined /&gt;}
            onClick={() =&gt; setIsScanModalOpen(true)}
          &gt;
            Start Scan
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {vulnerabilityScans.map((scan) =&gt; (
            &lt;Card key={scan.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{scan.target}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{scan.scanType}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{scan.summary.total}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Total&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-red-400 text-lg font-bold&quot;&gt;{scan.summary.critical}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Critical&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-orange-400 text-lg font-bold&quot;&gt;{scan.summary.high}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;High&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={scan.status === 'completed' ? 'green' : 'orange'}&gt;{scan.status}&lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderComplianceTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Compliance Reports
          &lt;/Title&gt;
          &lt;Button
            type=&quot;primary&quot;
            icon={&lt;AuditOutlined /&gt;}
            onClick={() =&gt; {
              // Generate compliance report
            }}
          &gt;
            Generate Report
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {complianceReports.map((report) =&gt; (
            &lt;Card key={report.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{report.standard} Compliance Report&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                    Generated: {new Date(report.generatedAt).toLocaleDateString()}
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.score}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Score&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{report.findings.length}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Findings&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Tag color={report.status === 'completed' ? 'green' : 'orange'}&gt;
                    {report.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  const renderSecretsTab = () =&gt; (
    &lt;div className=&quot;space-y-4&quot;&gt;
      &lt;Card size=&quot;small&quot; className=&quot;bg-gray-800 border-gray-600&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between mb-4&quot;&gt;
          &lt;Title level={5} className=&quot;text-white mb-0&quot;&gt;
            Secrets Management
          &lt;/Title&gt;
          &lt;Button type=&quot;primary&quot; icon={&lt;KeyOutlined /&gt;} onClick={() =&gt; setIsSecretModalOpen(true)}&gt;
            Create Secret
          &lt;/Button&gt;
        &lt;/div&gt;

        &lt;div className=&quot;space-y-3&quot;&gt;
          {secrets.map((secret) =&gt; (
            &lt;Card key={secret.id} size=&quot;small&quot; className=&quot;bg-gray-700 border-gray-600&quot;&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div&gt;
                  &lt;div className=&quot;text-white font-medium&quot;&gt;{secret.name}&lt;/div&gt;
                  &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;{secret.type}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-4&quot;&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;
                      {secret.metadata?.accessCount || 0}
                    &lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Access Count&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;text-center&quot;&gt;
                    &lt;div className=&quot;text-white text-lg font-bold&quot;&gt;{secret.keyVersion}&lt;/div&gt;
                    &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;Key Version&lt;/div&gt;
                  &lt;/div&gt;
                  &lt;Space&gt;
                    &lt;Tooltip title=&quot;Rotate Secret&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;ReloadOutlined /&gt;}
                        className=&quot;text-blue-400 hover:text-blue-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                    &lt;Tooltip title=&quot;View Details&quot;&gt;
                      &lt;Button
                        type=&quot;text&quot;
                        size=&quot;small&quot;
                        icon={&lt;EyeOutlined /&gt;}
                        className=&quot;text-green-400 hover:text-green-300&quot;
                      /&gt;
                    &lt;/Tooltip&gt;
                  &lt;/Space&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/Card&gt;
          ))}
        &lt;/div&gt;
      &lt;/Card&gt;
    &lt;/div&gt;
  );

  return (
    &lt;div className={cn('h-full bg-gray-900', className)}&gt;
      &lt;div className=&quot;p-4 border-b border-gray-700&quot;&gt;
        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
          &lt;CheckCircleOutlined className=&quot;text-green-400 text-lg&quot; /&gt;
          &lt;Title level={4} className=&quot;text-white mb-0&quot;&gt;
            Security Dashboard
          &lt;/Title&gt;
        &lt;/div&gt;
        &lt;Text className=&quot;text-gray-400 text-sm&quot;&gt;
          Enterprise security monitoring and compliance management
        &lt;/Text&gt;
      &lt;/div&gt;

      &lt;div className=&quot;p-4&quot;&gt;
        &lt;Tabs
          activeKey={activeTab}
          onChange={setActiveTab}
          className=&quot;security-dashboard-tabs&quot;
          items={[
            {
              key: 'overview',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Overview
                &lt;/span&gt;
              ),
              children: renderOverviewTab(),
            },
            {
              key: 'audit',
              label: (
                &lt;span&gt;
                  &lt;AuditOutlined className=&quot;mr-1&quot; /&gt;
                  Audit Logs
                  &lt;Badge count={auditLogs.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderAuditLogsTab(),
            },
            {
              key: 'incidents',
              label: (
                &lt;span&gt;
                  &lt;AlertOutlined className=&quot;mr-1&quot; /&gt;
                  Incidents
                  &lt;Badge
                    count={incidents.filter((i) =&gt; i.status === 'open').length}
                    size=&quot;small&quot;
                    className=&quot;ml-2&quot;
                  /&gt;
                &lt;/span&gt;
              ),
              children: renderIncidentsTab(),
            },
            {
              key: 'vulnerabilities',
              label: (
                &lt;span&gt;
                  &lt;BugOutlined className=&quot;mr-1&quot; /&gt;
                  Vulnerabilities
                  &lt;Badge count={vulnerabilityScans.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderVulnerabilitiesTab(),
            },
            {
              key: 'compliance',
              label: (
                &lt;span&gt;
                  &lt;CheckCircleOutlined className=&quot;mr-1&quot; /&gt;
                  Compliance
                  &lt;Badge count={complianceReports.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderComplianceTab(),
            },
            {
              key: 'secrets',
              label: (
                &lt;span&gt;
                  &lt;KeyOutlined className=&quot;mr-1&quot; /&gt;
                  Secrets
                  &lt;Badge count={secrets.length} size=&quot;small&quot; className=&quot;ml-2&quot; /&gt;
                &lt;/span&gt;
              ),
              children: renderSecretsTab(),
            },
          ]}
        /&gt;
      &lt;/div&gt;

      {/* Incident Details Modal */}
      &lt;Modal
        title=&quot;Security Incident Details&quot;
        open={isIncidentModalOpen}
        onCancel={() =&gt; setIsIncidentModalOpen(false)}
        footer={null}
        width={800}
      &gt;
        {selectedIncident &amp;&amp; (
          &lt;div className=&quot;space-y-4&quot;&gt;
            &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Title&lt;/Text&gt;
                &lt;div className=&quot;text-white font-medium&quot;&gt;{selectedIncident.title}&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Severity&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getSeverityColor(selectedIncident.severity)}&gt;
                    {selectedIncident.severity}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Status&lt;/Text&gt;
                &lt;div&gt;
                  &lt;Tag color={getStatusColor(selectedIncident.status)}&gt;
                    {selectedIncident.status}
                  &lt;/Tag&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;Text className=&quot;text-gray-400&quot;&gt;Category&lt;/Text&gt;
                &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.category}&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Description&lt;/Text&gt;
              &lt;div className=&quot;text-white&quot;&gt;{selectedIncident.description}&lt;/div&gt;
            &lt;/div&gt;

            &lt;div&gt;
              &lt;Text className=&quot;text-gray-400&quot;&gt;Timeline&lt;/Text&gt;
              &lt;Timeline
                items={selectedIncident.timeline.map((event) =&gt; ({
                  color: 'blue',
                  children: (
                    &lt;div className=&quot;space-y-1&quot;&gt;
                      &lt;div className=&quot;text-white text-sm&quot;&gt;{event.description}&lt;/div&gt;
                      &lt;div className=&quot;text-gray-400 text-xs&quot;&gt;
                        {new Date(event.timestamp).toLocaleString()} • {event.actor}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                }))}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;

      {/* Start Vulnerability Scan Modal */}
      &lt;Modal
        title=&quot;Start Vulnerability Scan&quot;
        open={isScanModalOpen}
        onCancel={() =&gt; setIsScanModalOpen(false)}
        onOk={() =&gt; setIsScanModalOpen(false)}
        width={500}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Scan Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select scan type&quot;&gt;
              &lt;Option value=&quot;dependency&quot;&gt;Dependency Scan&lt;/Option&gt;
              &lt;Option value=&quot;container&quot;&gt;Container Scan&lt;/Option&gt;
              &lt;Option value=&quot;infrastructure&quot;&gt;Infrastructure Scan&lt;/Option&gt;
              &lt;Option value=&quot;code&quot;&gt;Code Scan&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Target&quot; required&gt;
            &lt;Input placeholder=&quot;Enter target (URL, path, etc.)&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Options&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Additional scan options (JSON)&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;

      {/* Create Secret Modal */}
      &lt;Modal
        title=&quot;Create Secret&quot;
        open={isSecretModalOpen}
        onCancel={() =&gt; setIsSecretModalOpen(false)}
        onOk={() =&gt; setIsSecretModalOpen(false)}
        width={600}
      &gt;
        &lt;Form layout=&quot;vertical&quot;&gt;
          &lt;Form.Item label=&quot;Name&quot; required&gt;
            &lt;Input placeholder=&quot;Secret name&quot; /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Type&quot; required&gt;
            &lt;Select placeholder=&quot;Select secret type&quot;&gt;
              &lt;Option value=&quot;api_key&quot;&gt;API Key&lt;/Option&gt;
              &lt;Option value=&quot;password&quot;&gt;Password&lt;/Option&gt;
              &lt;Option value=&quot;certificate&quot;&gt;Certificate&lt;/Option&gt;
              &lt;Option value=&quot;token&quot;&gt;Token&lt;/Option&gt;
              &lt;Option value=&quot;database_credential&quot;&gt;Database Credential&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Value&quot; required&gt;
            &lt;Input.TextArea placeholder=&quot;Secret value&quot; rows={3} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Description&quot;&gt;
            &lt;Input.TextArea placeholder=&quot;Secret description&quot; rows={2} /&gt;
          &lt;/Form.Item&gt;
          &lt;Form.Item label=&quot;Classification&quot;&gt;
            &lt;Select placeholder=&quot;Select data classification&quot;&gt;
              &lt;Option value=&quot;public&quot;&gt;Public&lt;/Option&gt;
              &lt;Option value=&quot;internal&quot;&gt;Internal&lt;/Option&gt;
              &lt;Option value=&quot;confidential&quot;&gt;Confidential&lt;/Option&gt;
              &lt;Option value=&quot;restricted&quot;&gt;Restricted&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};

export default SecurityDashboard;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/OrganizationSettings.tsx (Line 1:1 - Line 38:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/organizationsettings/OrganizationSettings.tsx (Line 1:1 - Line 37:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup131"><code class="language-tsx text-sm text-gray-800">import {
  AuditOutlined,
  CheckOutlined,
  ClockCircleOutlined,
  GlobalOutlined,
  SecurityScanOutlined,
  SettingOutlined,
  TeamOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Divider,
  Form,
  Input,
  InputNumber,
  Modal,
  message,
  Select,
  Space,
  Switch,
  Table,
  Tabs,
  Tag,
  Tooltip,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import type {
  Organization,
  OrganizationMember,
  OrganizationSettings,
} from '@/core/services/rbacService';
import { useRBACStore } from '@/core/stores/rbacStore';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/OrganizationSettings.tsx (Line 36:26 - Line 564:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/OrganizationManagement/organizationsettings/OrganizationSettings.tsx (Line 40:19 - Line 568:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup132"><code class="language-tsx text-sm text-gray-800">;

const { Title, Text, Paragraph } = Typography;
const { TextArea } = Input;
const { Option } = Select;

interface OrganizationSettingsProps {
  organization: Organization;
}

export const OrganizationSettingsComponent: React.FC&lt;OrganizationSettingsProps&gt; = ({
  organization,
}) =&gt; {
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);
  const [inviteModalVisible, setInviteModalVisible] = useState(false);
  const [inviteForm] = Form.useForm();

  const {
    updateOrganization,
    inviteUser,
    removeUser,
    updateUserRole,
    canManageOrganization,
    canManageUsers,
    isLoading,
    error,
  } = useRBACStore();

  useEffect(() =&gt; {
    form.setFieldsValue({
      name: organization.name,
      description: organization.description,
      domain: organization.domain,
      ...organization.settings,
    });
  }, [organization, form]);

  const handleSaveSettings = async (values: any) =&gt; {
    setLoading(true);
    try {
      const settings: OrganizationSettings = {
        allowPublicWorkflows: values.allowPublicWorkflows,
        requireApprovalForExecution: values.requireApprovalForExecution,
        maxWorkflowsPerUser: values.maxWorkflowsPerUser,
        maxExecutionsPerMonth: values.maxExecutionsPerMonth,
        enableAuditLogging: values.enableAuditLogging,
        enableSSOIntegration: values.enableSSOIntegration,
        allowedDomains: values.allowedDomains
          ?.split(',')
          .map((d: string) =&gt; d.trim())
          .filter(Boolean),
        sessionTimeout: values.sessionTimeout,
        passwordPolicy: {
          minLength: values.passwordMinLength,
          requireUppercase: values.passwordRequireUppercase,
          requireLowercase: values.passwordRequireLowercase,
          requireNumbers: values.passwordRequireNumbers,
          requireSymbols: values.passwordRequireSymbols,
          preventReuse: values.passwordPreventReuse,
          maxAge: values.passwordMaxAge,
        },
      };

      await updateOrganization(organization.id, {
        name: values.name,
        description: values.description,
        domain: values.domain,
        settings,
      });

      message.success('Organization settings updated successfully');
    } catch (error: any) {
      message.error(error.message || 'Failed to update organization settings');
    } finally {
      setLoading(false);
    }
  };

  const handleInviteUser = async (values: any) =&gt; {
    try {
      await inviteUser(organization.id, values.email, values.role);
      message.success(`Invitation sent to ${values.email}`);
      setInviteModalVisible(false);
      inviteForm.resetFields();
    } catch (error: any) {
      message.error(error.message || 'Failed to send invitation');
    }
  };

  const handleRemoveUser = async (userId: string, userName: string) =&gt; {
    Modal.confirm({
      title: 'Remove User',
      content: `Are you sure you want to remove ${userName} from this organization?`,
      okText: 'Remove',
      okType: 'danger',
      onOk: async () =&gt; {
        try {
          await removeUser(organization.id, userId);
          message.success('User removed successfully');
        } catch (error: any) {
          message.error(error.message || 'Failed to remove user');
        }
      },
    });
  };

  const handleUpdateUserRole = async (userId: string, newRole: OrganizationMember['role']) =&gt; {
    try {
      await updateUserRole(organization.id, userId, newRole);
      message.success('User role updated successfully');
    } catch (error: any) {
      message.error(error.message || 'Failed to update user role');
    }
  };

  const memberColumns = [
    {
      title: 'User',
      dataIndex: 'userId',
      key: 'userId',
      render: (userId: string) =&gt; (
        &lt;div&gt;
          &lt;Text strong&gt;{userId}&lt;/Text&gt;
          &lt;br /&gt;
          &lt;Text type=&quot;secondary&quot;&gt;user@example.com&lt;/Text&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Role',
      dataIndex: 'role',
      key: 'role',
      render: (role: OrganizationMember['role'], record: OrganizationMember) =&gt; (
        &lt;Select
          value={role}
          onChange={(newRole) =&gt; handleUpdateUserRole(record.userId, newRole)}
          disabled={!canManageUsers() || record.role === 'owner'}
          style={{ width: 120 }}
        &gt;
          &lt;Option value=&quot;owner&quot;&gt;Owner&lt;/Option&gt;
          &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
          &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
          &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
        &lt;/Select&gt;
      ),
    },
    {
      title: 'Joined',
      dataIndex: 'joinedAt',
      key: 'joinedAt',
      render: (date: Date) =&gt; new Date(date).toLocaleDateString(),
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (_: unknown, record: OrganizationMember) =&gt; (
        &lt;Space&gt;
          {canManageUsers() &amp;&amp; record.role !== 'owner' &amp;&amp; (
            &lt;Button
              type=&quot;link&quot;
              danger
              size=&quot;small&quot;
              onClick={() =&gt; handleRemoveUser(record.userId, record.userId)}
            &gt;
              Remove
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const tabs = [
    {
      key: 'general',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          General
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Form.Item
              name=&quot;name&quot;
              label=&quot;Organization Name&quot;
              rules={[{ required: true, message: 'Please enter organization name' }]}
            &gt;
              &lt;Input placeholder=&quot;Enter organization name&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;description&quot; label=&quot;Description&quot;&gt;
              &lt;TextArea rows={3} placeholder=&quot;Enter organization description&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;domain&quot; label=&quot;Domain&quot;&gt;
              &lt;Input placeholder=&quot;company.com&quot; addonBefore=&quot;@&quot; /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Workflow Settings&lt;/Divider&gt;

            &lt;Form.Item
              name=&quot;allowPublicWorkflows&quot;
              label=&quot;Allow Public Workflows&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;requireApprovalForExecution&quot;
              label=&quot;Require Approval for Execution&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxWorkflowsPerUser&quot; label=&quot;Max Workflows per User&quot;&gt;
              &lt;InputNumber min={1} max={1000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;maxExecutionsPerMonth&quot; label=&quot;Max Executions per Month&quot;&gt;
              &lt;InputNumber min={100} max={1000000} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Space&gt;
                &lt;Button
                  type=&quot;primary&quot;
                  htmlType=&quot;submit&quot;
                  loading={loading || isLoading}
                  disabled={!canManageOrganization()}
                &gt;
                  Save Settings
                &lt;/Button&gt;
                &lt;Button type=&quot;link&quot; onClick={() =&gt; setShowAdvancedSettings(!showAdvancedSettings)}&gt;
                  {showAdvancedSettings ? 'Hide' : 'Show'} Advanced Settings
                &lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Form
            form={form}
            layout=&quot;vertical&quot;
            onFinish={handleSaveSettings}
            disabled={!canManageOrganization()}
          &gt;
            &lt;Alert
              message=&quot;Security Settings&quot;
              description=&quot;Configure security policies and access controls for your organization.&quot;
              type=&quot;info&quot;
              showIcon
              style={{ marginBottom: 24 }}
            /&gt;

            &lt;Form.Item
              name=&quot;enableAuditLogging&quot;
              label=&quot;Enable Audit Logging&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item
              name=&quot;enableSSOIntegration&quot;
              label=&quot;Enable SSO Integration&quot;
              valuePropName=&quot;checked&quot;
            &gt;
              &lt;Switch /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;allowedDomains&quot; label=&quot;Allowed Domains&quot;&gt;
              &lt;Input
                placeholder=&quot;domain1.com, domain2.com&quot;
                addonAfter={
                  &lt;Tooltip title=&quot;Comma-separated list of allowed email domains&quot;&gt;
                    &lt;GlobalOutlined /&gt;
                  &lt;/Tooltip&gt;
                }
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;sessionTimeout&quot; label=&quot;Session Timeout (minutes)&quot;&gt;
              &lt;InputNumber
                min={5}
                max={1440}
                style={{ width: '100%' }}
                addonAfter={&lt;ClockCircleOutlined /&gt;}
              /&gt;
            &lt;/Form.Item&gt;

            &lt;Divider&gt;Password Policy&lt;/Divider&gt;

            &lt;Form.Item name=&quot;passwordMinLength&quot; label=&quot;Minimum Length&quot;&gt;
              &lt;InputNumber min={6} max={32} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
              &lt;Form.Item
                name=&quot;passwordRequireUppercase&quot;
                label=&quot;Require Uppercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireLowercase&quot;
                label=&quot;Require Lowercase Letters&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireNumbers&quot;
                label=&quot;Require Numbers&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;

              &lt;Form.Item
                name=&quot;passwordRequireSymbols&quot;
                label=&quot;Require Symbols&quot;
                valuePropName=&quot;checked&quot;
              &gt;
                &lt;Switch /&gt;
              &lt;/Form.Item&gt;
            &lt;/Space&gt;

            &lt;Form.Item
              name=&quot;passwordPreventReuse&quot;
              label=&quot;Prevent Password Reuse (last N passwords)&quot;
            &gt;
              &lt;InputNumber min={0} max={10} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item name=&quot;passwordMaxAge&quot; label=&quot;Password Expiry (days)&quot;&gt;
              &lt;InputNumber min={30} max={365} style={{ width: '100%' }} /&gt;
            &lt;/Form.Item&gt;

            &lt;Form.Item&gt;
              &lt;Button
                type=&quot;primary&quot;
                htmlType=&quot;submit&quot;
                loading={loading || isLoading}
                disabled={!canManageOrganization()}
                icon={&lt;CheckOutlined /&gt;}
              &gt;
                Update Security Settings
              &lt;/Button&gt;
            &lt;/Form.Item&gt;
          &lt;/Form&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'members',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Members ({organization.members.length})
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;div style={{ marginBottom: 16 }}&gt;
            &lt;Space&gt;
              &lt;Button
                type=&quot;primary&quot;
                onClick={() =&gt; setInviteModalVisible(true)}
                disabled={!canManageUsers()}
                icon={&lt;TeamOutlined /&gt;}
              &gt;
                Invite User
              &lt;/Button&gt;
              &lt;Text type=&quot;secondary&quot;&gt;Manage organization members and their roles&lt;/Text&gt;
            &lt;/Space&gt;
          &lt;/div&gt;

          &lt;Table
            dataSource={organization.members}
            columns={memberColumns}
            rowKey=&quot;userId&quot;
            pagination={{ pageSize: 10 }}
            loading={isLoading}
          /&gt;
        &lt;/Card&gt;
      ),
    },
    {
      key: 'audit',
      label: (
        &lt;span&gt;
          &lt;AuditOutlined /&gt;
          Audit &amp; Compliance
        &lt;/span&gt;
      ),
      children: (
        &lt;Card&gt;
          &lt;Alert
            message=&quot;Audit &amp; Compliance&quot;
            description=&quot;Track all actions performed within your organization for security and compliance purposes.&quot;
            type=&quot;info&quot;
            showIcon
            style={{ marginBottom: 24 }}
          /&gt;

          &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }} size=&quot;large&quot;&gt;
            &lt;Card size=&quot;small&quot; title=&quot;Data Retention&quot;&gt;
              &lt;Paragraph&gt;
                Audit logs are retained for 90 days. Execution logs are retained for 30 days.
                Contact support for longer retention periods.
              &lt;/Paragraph&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Compliance Standards&quot;&gt;
              &lt;Space wrap&gt;
                &lt;Tag color=&quot;green&quot;&gt;SOC 2 Type II&lt;/Tag&gt;
                &lt;Tag color=&quot;blue&quot;&gt;GDPR Compliant&lt;/Tag&gt;
                &lt;Tag color=&quot;purple&quot;&gt;ISO 27001&lt;/Tag&gt;
                &lt;Tag color=&quot;orange&quot;&gt;HIPAA Ready&lt;/Tag&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;

            &lt;Card size=&quot;small&quot; title=&quot;Data Export&quot;&gt;
              &lt;Space&gt;
                &lt;Button&gt;Export Audit Logs&lt;/Button&gt;
                &lt;Button&gt;Export User Data&lt;/Button&gt;
                &lt;Button&gt;Export Workflow Data&lt;/Button&gt;
              &lt;/Space&gt;
            &lt;/Card&gt;
          &lt;/Space&gt;
        &lt;/Card&gt;
      ),
    },
  ];

  return (
    &lt;div&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;SettingOutlined /&gt; Organization Settings
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;
          Manage your organization's settings, security policies, and members
        &lt;/Text&gt;
      &lt;/div&gt;

      {error &amp;&amp; (
        &lt;Alert
          message=&quot;Error&quot;
          description={error}
          type=&quot;error&quot;
          closable
          style={{ marginBottom: 16 }}
        /&gt;
      )}

      &lt;Tabs items={tabs} /&gt;

      {/* Invite User Modal */}
      &lt;Modal
        title=&quot;Invite User&quot;
        open={inviteModalVisible}
        onCancel={() =&gt; setInviteModalVisible(false)}
        footer={null}
        width={500}
      &gt;
        &lt;Form form={inviteForm} layout=&quot;vertical&quot; onFinish={handleInviteUser}&gt;
          &lt;Form.Item
            name=&quot;email&quot;
            label=&quot;Email Address&quot;
            rules={[
              { required: true, message: 'Please enter email address' },
              { type: 'email', message: 'Please enter a valid email address' },
            ]}
          &gt;
            &lt;Input placeholder=&quot;user@example.com&quot; /&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item
            name=&quot;role&quot;
            label=&quot;Role&quot;
            rules={[{ required: true, message: 'Please select a role' }]}
            initialValue=&quot;member&quot;
          &gt;
            &lt;Select&gt;
              &lt;Option value=&quot;admin&quot;&gt;Admin&lt;/Option&gt;
              &lt;Option value=&quot;member&quot;&gt;Member&lt;/Option&gt;
              &lt;Option value=&quot;viewer&quot;&gt;Viewer&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Form.Item&gt;

          &lt;Form.Item&gt;
            &lt;Space&gt;
              &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot; loading={isLoading}&gt;
                Send Invitation
              &lt;/Button&gt;
              &lt;Button onClick={() =&gt; setInviteModalVisible(false)}&gt;Cancel&lt;/Button&gt;
            &lt;/Space&gt;
          &lt;/Form.Item&gt;
        &lt;/Form&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Layout/Header.tsx (Line 12:2 - Line 33:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Layout/Sidebar.tsx (Line 23:2 - Line 44:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup133"><code class="language-tsx text-sm text-gray-800">;

  const handleCreateWorkflow = async () =&gt; {
    const name = prompt('Enter workflow name:');
    if (name) {
      if (name.trim().length === 0) {
        toast.error('Please enter a valid workflow name.');
        return;
      }

      try {
        await createNewWorkflow(name.trim(), navigate);
        toast.success('Workflow created successfully!');
      } catch (error) {
        const errorMessage = error instanceof Error ? error.message : 'Failed to create workflow';
        toast.error(errorMessage);
      }
    }
  };

  const handleLogout = async () =&gt; {
    await</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/PricingSection.tsx (Line 1:1 - Line 510:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/pricingsection/PricingSection.tsx (Line 3:1 - Line 512:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup135"><code class="language-tsx text-sm text-gray-800">/**
 * Pricing Section Component
 *
 * Enterprise-focused pricing tiers with clear value proposition
 * and competitive positioning
 */

import { ArrowRight, Check, Crown, Star, Zap } from 'lucide-react';
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';

export const PricingSection: React.FC = () =&gt; {
  const navigate = useNavigate();
  const [billingPeriod, setBillingPeriod] = useState&lt;'monthly' | 'annually'&gt;('monthly');

  const handlePlanClick = (planName: string) =&gt; {
    if (planName === 'Community') {
      navigate('/register');
    } else if (planName === 'Professional') {
      navigate('/register');
    } else if (planName === 'Enterprise') {
      navigate('/contact');
    }
  };

  const plans = [
    {
      name: 'Community',
      description: 'Perfect for getting started',
      price: { monthly: 0, annually: 0 },
      icon: Star,
      gradient: 'from-gray-500 to-gray-600',
      bgGradient: 'from-gray-50 to-gray-100',
      features: [
        'Self-hosted deployment',
        'Core workflow features',
        'Basic integrations (50+)',
        'Community support',
        'Up to 5 users',
        'Basic analytics',
        'Open source license',
      ],
      limitations: [
        'Limited to 1,000 executions/month',
        'Community support only',
        'Basic security features',
      ],
      cta: 'Get Started Free',
      popular: false,
    },
    {
      name: 'Professional',
      description: 'For growing teams and businesses',
      price: { monthly: 49, annually: 39 },
      icon: Zap,
      gradient: 'from-blue-500 to-blue-600',
      bgGradient: 'from-blue-50 to-blue-100',
      features: [
        'Everything in Community',
        'Advanced integrations (500+)',
        'AI-powered features',
        'Real-time collaboration',
        'Version control',
        'Premium support',
        'Up to 50 users',
        'Advanced analytics',
        'Custom node development',
        'API access',
      ],
      limitations: ['Up to 10,000 executions/month', 'Standard support hours'],
      cta: 'Start Free Trial',
      popular: true,
    },
    {
      name: 'Enterprise',
      description: 'For large organizations',
      price: { monthly: 'Custom', annually: 'Custom' },
      icon: Crown,
      gradient: 'from-purple-500 to-purple-600',
      bgGradient: 'from-purple-50 to-purple-100',
      features: [
        'Everything in Professional',
        'SSO/SAML integration',
        'Advanced security &amp; compliance',
        'Custom deployment options',
        'Unlimited users',
        'Unlimited executions',
        'Dedicated success manager',
        '24/7 priority support',
        'Custom integrations',
        'On-premise deployment',
        'SLA guarantees',
        'Training &amp; onboarding',
      ],
      limitations: [],
      cta: 'Contact Sales',
      popular: false,
    },
  ];

  const comparisonFeatures = [
    {
      category: 'Core Features',
      features: [
        {
          name: 'Visual workflow builder',
          community: true,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Pre-built integrations',
          community: '50+',
          pro: '500+',
          enterprise: 'Unlimited',
        },
        {
          name: 'Real-time collaboration',
          community: false,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Version control',
          community: false,
          pro: true,
          enterprise: true,
        },
      ],
    },
    {
      category: 'AI &amp; Analytics',
      features: [
        {
          name: 'AI-powered automation',
          community: false,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Advanced analytics',
          community: 'Basic',
          pro: 'Advanced',
          enterprise: 'Enterprise',
        },
        {
          name: 'Semantic search',
          community: false,
          pro: true,
          enterprise: true,
        },
        {
          name: 'Intelligent optimization',
          community: false,
          pro: true,
          enterprise: true,
        },
      ],
    },
    {
      category: 'Security &amp; Compliance',
      features: [
        {
          name: 'SSO/SAML integration',
          community: false,
          pro: false,
          enterprise: true,
        },
        {
          name: 'RBAC permissions',
          community: 'Basic',
          pro: 'Advanced',
          enterprise: 'Enterprise',
        },
        {
          name: 'Audit logging',
          community: false,
          pro: 'Basic',
          enterprise: 'Advanced',
        },
        {
          name: 'Compliance certifications',
          community: false,
          pro: false,
          enterprise: true,
        },
      ],
    },
  ];

  return (
    &lt;section className=&quot;py-20 bg-white&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            Simple, Transparent{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Pricing
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto mb-8&quot;&gt;
            Start free, scale as you grow. No hidden fees, no vendor lock-in. Enterprise-grade
            features at every level.
          &lt;/p&gt;

          {/* Billing Toggle */}
          &lt;div className=&quot;inline-flex items-center bg-gray-100 rounded-lg p-1&quot;&gt;
            &lt;button
              onClick={() =&gt; setBillingPeriod('monthly')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'monthly'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Monthly
            &lt;/button&gt;
            &lt;button
              onClick={() =&gt; setBillingPeriod('annually')}
              className={`px-4 py-2 rounded-md font-medium transition-all ${
                billingPeriod === 'annually'
                  ? 'bg-white text-gray-900 shadow-sm'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            &gt;
              Annually
              &lt;span className=&quot;ml-2 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full&quot;&gt;
                Save 20%
              &lt;/span&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Pricing Cards */}
        &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-3 gap-8 mb-20&quot;&gt;
          {plans.map((plan, index) =&gt; {
            const Icon = plan.icon;
            const price = plan.price[billingPeriod];

            return (
              &lt;div
                key={index}
                className={`relative rounded-2xl border-2 p-8 transition-all duration-300 ${
                  plan.popular
                    ? 'border-blue-500 shadow-xl shadow-blue-500/10 scale-105'
                    : 'border-gray-200 hover:border-gray-300 hover:shadow-lg'
                }`}
              &gt;
                {/* Popular Badge */}
                {plan.popular &amp;&amp; (
                  &lt;div className=&quot;absolute -top-4 left-1/2 transform -translate-x-1/2&quot;&gt;
                    &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium&quot;&gt;
                      Most Popular
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Plan Header */}
                &lt;div className=&quot;text-center mb-8&quot;&gt;
                  &lt;div
                    className={`w-16 h-16 rounded-xl bg-gradient-to-r ${plan.gradient} flex items-center justify-center mx-auto mb-4`}
                  &gt;
                    &lt;Icon className=&quot;w-8 h-8 text-white&quot; /&gt;
                  &lt;/div&gt;
                  &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-2&quot;&gt;{plan.name}&lt;/h3&gt;
                  &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{plan.description}&lt;/p&gt;

                  {/* Price */}
                  &lt;div className=&quot;mb-6&quot;&gt;
                    {typeof price === 'number' ? (
                      &lt;&gt;
                        &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;
                          ${price}
                          {price &gt; 0 &amp;&amp; &lt;span className=&quot;text-lg text-gray-600&quot;&gt;/user/month&lt;/span&gt;}
                        &lt;/div&gt;
                        {billingPeriod === 'annually' &amp;&amp; price &gt; 0 &amp;&amp; (
                          &lt;div className=&quot;text-sm text-gray-500&quot;&gt;
                            Billed annually (${price * 12}/user/year)
                          &lt;/div&gt;
                        )}
                      &lt;/&gt;
                    ) : (
                      &lt;div className=&quot;text-4xl font-bold text-gray-900&quot;&gt;{price}&lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/div&gt;

                {/* Features */}
                &lt;div className=&quot;mb-8&quot;&gt;
                  &lt;ul className=&quot;space-y-3&quot;&gt;
                    {plan.features.map((feature, featureIndex) =&gt; (
                      &lt;li key={featureIndex} className=&quot;flex items-start gap-3&quot;&gt;
                        &lt;Check className=&quot;w-5 h-5 text-green-500 mt-0.5 flex-shrink-0&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;{feature}&lt;/span&gt;
                      &lt;/li&gt;
                    ))}
                  &lt;/ul&gt;

                  {/* Limitations */}
                  {plan.limitations.length &gt; 0 &amp;&amp; (
                    &lt;div className=&quot;mt-6 pt-6 border-t border-gray-100&quot;&gt;
                      &lt;p className=&quot;text-sm text-gray-500 mb-2&quot;&gt;Limitations:&lt;/p&gt;
                      &lt;ul className=&quot;space-y-2&quot;&gt;
                        {plan.limitations.map((limitation, limitIndex) =&gt; (
                          &lt;li
                            key={limitIndex}
                            className=&quot;text-sm text-gray-500 flex items-start gap-2&quot;
                          &gt;
                            &lt;div className=&quot;w-1 h-1 rounded-full bg-gray-400 mt-2 flex-shrink-0&quot; /&gt;
                            {limitation}
                          &lt;/li&gt;
                        ))}
                      &lt;/ul&gt;
                    &lt;/div&gt;
                  )}
                &lt;/div&gt;

                {/* CTA Button */}
                &lt;button
                  onClick={() =&gt; handlePlanClick(plan.name)}
                  className={`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center gap-2 ${
                    plan.popular
                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:scale-105 hover:shadow-lg'
                      : 'bg-gray-100 text-gray-900 hover:bg-gray-200'
                  }`}
                &gt;
                  {plan.cta}
                  &lt;ArrowRight className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Feature Comparison Table */}
        &lt;div className=&quot;bg-gray-50 rounded-2xl p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;Feature Comparison&lt;/h3&gt;

          &lt;div className=&quot;overflow-x-auto&quot;&gt;
            &lt;table className=&quot;w-full&quot;&gt;
              &lt;thead&gt;
                &lt;tr className=&quot;border-b border-gray-200&quot;&gt;
                  &lt;th className=&quot;text-left py-4 pr-6 font-semibold text-gray-900&quot;&gt;Features&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Community&lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;
                    Professional
                  &lt;/th&gt;
                  &lt;th className=&quot;text-center py-4 px-4 font-semibold text-gray-900&quot;&gt;Enterprise&lt;/th&gt;
                &lt;/tr&gt;
              &lt;/thead&gt;
              &lt;tbody&gt;
                {comparisonFeatures.map((category, categoryIndex) =&gt; (
                  &lt;React.Fragment key={categoryIndex}&gt;
                    &lt;tr&gt;
                      &lt;td
                        colSpan={4}
                        className=&quot;py-4 pr-6 font-semibold text-gray-800 bg-gray-100/50&quot;
                      &gt;
                        {category.category}
                      &lt;/td&gt;
                    &lt;/tr&gt;
                    {category.features.map((feature, featureIndex) =&gt; (
                      &lt;tr key={featureIndex} className=&quot;border-b border-gray-100&quot;&gt;
                        &lt;td className=&quot;py-3 pr-6 text-gray-700&quot;&gt;{feature.name}&lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.community === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.community === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.community}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.pro === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.pro === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.pro}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                        &lt;td className=&quot;text-center py-3 px-4&quot;&gt;
                          {feature.enterprise === true ? (
                            &lt;Check className=&quot;w-5 h-5 text-green-500 mx-auto&quot; /&gt;
                          ) : feature.enterprise === false ? (
                            &lt;span className=&quot;text-gray-400&quot;&gt;—&lt;/span&gt;
                          ) : (
                            &lt;span className=&quot;text-sm text-gray-600&quot;&gt;{feature.enterprise}&lt;/span&gt;
                          )}
                        &lt;/td&gt;
                      &lt;/tr&gt;
                    ))}
                  &lt;/React.Fragment&gt;
                ))}
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Competitive Pricing Comparison */}
        &lt;div className=&quot;mt-16 bg-white rounded-2xl border border-gray-200 p-8&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold text-gray-900 mb-8 text-center&quot;&gt;
            How We Compare on{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Pricing
            &lt;/span&gt;
          &lt;/h3&gt;

          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6&quot;&gt;
            {/* Reporunner */}
            &lt;div className=&quot;bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Reporunner&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-blue-600 mb-2&quot;&gt;$49/user&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Self-hosted + Pro features&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Unlimited executions&lt;/div&gt;
                  &lt;div&gt;✅ All enterprise features&lt;/div&gt;
                  &lt;div&gt;✅ No hidden costs&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Zapier */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Zapier&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$19.99+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud only&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited tasks/month&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Expensive at scale&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Make.com */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;Make.com&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$9+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, operations-based&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;❌ Limited operations&lt;/div&gt;
                  &lt;div&gt;❌ No self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Costs add up quickly&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* n8n */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;n8n&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;$20+&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Per month, cloud&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ Self-hosting option&lt;/div&gt;
                  &lt;div&gt;❌ Limited AI features&lt;/div&gt;
                  &lt;div&gt;❌ Basic collaboration&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* SIM */}
            &lt;div className=&quot;bg-gray-50 rounded-xl p-6 border border-gray-200&quot;&gt;
              &lt;div className=&quot;text-center&quot;&gt;
                &lt;h4 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;SIM&lt;/h4&gt;
                &lt;div className=&quot;text-2xl font-bold text-gray-600 mb-2&quot;&gt;Custom&lt;/div&gt;
                &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;Enterprise pricing&lt;/p&gt;
                &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                  &lt;div&gt;✅ AI features&lt;/div&gt;
                  &lt;div&gt;❌ Limited self-hosting&lt;/div&gt;
                  &lt;div&gt;❌ Higher enterprise cost&lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;div className=&quot;mt-6 text-center&quot;&gt;
            &lt;p className=&quot;text-sm text-gray-600&quot;&gt;
              💡 &lt;strong&gt;Reporunner advantage:&lt;/strong&gt; Enterprise features at mid-market pricing
              with complete self-hosting control
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Enterprise CTA */}
        &lt;div className=&quot;mt-16 text-center&quot;&gt;
          &lt;div className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white&quot;&gt;
            &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Need a custom solution for your enterprise?&lt;/h3&gt;
            &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
              We offer custom deployment options, dedicated support, and tailored features for large
              organizations with specific requirements.
            &lt;/p&gt;
            &lt;button
              onClick={() =&gt; navigate('/contact')}
              className=&quot;bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors&quot;
            &gt;
              Contact Enterprise Sales
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/IntegrationEcosystem.tsx (Line 1:1 - Line 284:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/integrationecosystem/IntegrationEcosystem.tsx (Line 2:1 - Line 285:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup137"><code class="language-tsx text-sm text-gray-800">/**
 * Integration Ecosystem Section
 *
 * Showcases the extensive integration library and
 * custom development capabilities
 */

import {
  ArrowRight,
  Calendar,
  Cloud,
  Code,
  Database,
  FileText,
  Grid3X3,
  Mail,
  Plus,
  Search,
  Slack,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';

export const IntegrationEcosystem: React.FC = () =&gt; {
  const [activeCategory, setActiveCategory] = useState('all');

  const categories = [
    { id: 'all', name: 'All Integrations', count: 500 },
    { id: 'communication', name: 'Communication', count: 85 },
    { id: 'productivity', name: 'Productivity', count: 120 },
    { id: 'database', name: 'Database', count: 45 },
    { id: 'ai', name: 'AI &amp; ML', count: 75 },
    { id: 'commerce', name: 'E-commerce', count: 60 },
    { id: 'custom', name: 'Custom', count: 'Unlimited' },
  ];

  const integrations = [
    {
      name: 'Gmail',
      category: 'communication',
      icon: Mail,
      description: 'Send, receive, and manage emails',
      gradient: 'from-red-500 to-red-600',
      popular: true,
    },
    {
      name: 'Slack',
      category: 'communication',
      icon: Slack,
      description: 'Team messaging and notifications',
      gradient: 'from-purple-500 to-purple-600',
      popular: true,
    },
    {
      name: 'PostgreSQL',
      category: 'database',
      icon: Database,
      description: 'Relational database operations',
      gradient: 'from-blue-500 to-blue-600',
      popular: false,
    },
    {
      name: 'Google Sheets',
      category: 'productivity',
      icon: FileText,
      description: 'Spreadsheet automation',
      gradient: 'from-green-500 to-green-600',
      popular: true,
    },
    {
      name: 'Calendar',
      category: 'productivity',
      icon: Calendar,
      description: 'Schedule and event management',
      gradient: 'from-indigo-500 to-indigo-600',
      popular: false,
    },
    {
      name: 'AWS',
      category: 'cloud',
      icon: Cloud,
      description: 'Cloud services integration',
      gradient: 'from-orange-500 to-orange-600',
      popular: true,
    },
    {
      name: 'OpenAI',
      category: 'ai',
      icon: Zap,
      description: 'AI and language models',
      gradient: 'from-purple-500 to-pink-500',
      popular: true,
    },
    {
      name: 'Custom API',
      category: 'custom',
      icon: Code,
      description: 'Build your own integrations',
      gradient: 'from-gray-500 to-gray-600',
      popular: false,
    },
  ];

  const filteredIntegrations =
    activeCategory === 'all'
      ? integrations
      : integrations.filter((integration) =&gt; integration.category === activeCategory);

  const features = [
    {
      icon: Grid3X3,
      title: '500+ Pre-built Integrations',
      description: 'Connect to popular services out of the box with minimal configuration.',
    },
    {
      icon: Code,
      title: 'Custom Node SDK',
      description: 'Build your own integrations with our comprehensive development kit.',
    },
    {
      icon: Zap,
      title: 'API-First Architecture',
      description: 'Every integration is built on our robust API foundation.',
    },
    {
      icon: Plus,
      title: 'Community Marketplace',
      description: 'Share and discover integrations built by the community.',
    },
  ];

  return (
    &lt;section className=&quot;py-20 bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            Connect{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Everything
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            Integrate with 500+ services or build your own custom connections. Our ecosystem grows
            with your needs.
          &lt;/p&gt;
        &lt;/div&gt;

        {/* Feature Grid */}
        &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16&quot;&gt;
          {features.map((feature, index) =&gt; {
            const Icon = feature.icon;
            return (
              &lt;div
                key={index}
                className=&quot;bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-lg transition-all hover:-translate-y-1&quot;
              &gt;
                &lt;div className=&quot;bg-gradient-to-r from-blue-500 to-purple-500 w-12 h-12 rounded-lg flex items-center justify-center mb-4&quot;&gt;
                  &lt;Icon className=&quot;w-6 h-6 text-white&quot; /&gt;
                &lt;/div&gt;
                &lt;h3 className=&quot;font-bold text-gray-900 mb-2&quot;&gt;{feature.title}&lt;/h3&gt;
                &lt;p className=&quot;text-gray-600 text-sm&quot;&gt;{feature.description}&lt;/p&gt;
              &lt;/div&gt;
            );
          })}
        &lt;/div&gt;

        {/* Integration Browser */}
        &lt;div className=&quot;bg-white rounded-2xl border border-gray-200 shadow-lg overflow-hidden&quot;&gt;
          {/* Browser Header */}
          &lt;div className=&quot;bg-gray-50 border-b border-gray-200 p-6&quot;&gt;
            &lt;div className=&quot;flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4&quot;&gt;
              &lt;h3 className=&quot;text-2xl font-bold text-gray-900&quot;&gt;Integration Library&lt;/h3&gt;

              {/* Search Bar */}
              &lt;div className=&quot;relative&quot;&gt;
                &lt;Search className=&quot;absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400&quot; /&gt;
                &lt;input
                  type=&quot;text&quot;
                  placeholder=&quot;Search integrations...&quot;
                  className=&quot;pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Category Tabs */}
            &lt;div className=&quot;flex flex-wrap gap-2 mt-6&quot;&gt;
              {categories.map((category) =&gt; (
                &lt;button
                  key={category.id}
                  onClick={() =&gt; setActiveCategory(category.id)}
                  className={`px-4 py-2 rounded-lg font-medium transition-all ${
                    activeCategory === category.id
                      ? 'bg-blue-600 text-white shadow-lg'
                      : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'
                  }`}
                &gt;
                  {category.name}
                  &lt;span className=&quot;ml-2 text-sm opacity-75&quot;&gt;({category.count})&lt;/span&gt;
                &lt;/button&gt;
              ))}
            &lt;/div&gt;
          &lt;/div&gt;

          {/* Integration Grid */}
          &lt;div className=&quot;p-6&quot;&gt;
            &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4&quot;&gt;
              {filteredIntegrations.map((integration, index) =&gt; {
                const Icon = integration.icon;
                return (
                  &lt;div
                    key={index}
                    className=&quot;group relative bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer&quot;
                  &gt;
                    {/* Popular Badge */}
                    {integration.popular &amp;&amp; (
                      &lt;div className=&quot;absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white text-xs px-2 py-1 rounded-full font-medium&quot;&gt;
                        Popular
                      &lt;/div&gt;
                    )}

                    {/* Icon */}
                    &lt;div
                      className={`w-12 h-12 rounded-lg bg-gradient-to-r ${integration.gradient} flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`}
                    &gt;
                      &lt;Icon className=&quot;w-6 h-6 text-white&quot; /&gt;
                    &lt;/div&gt;

                    {/* Content */}
                    &lt;h4 className=&quot;font-semibold text-gray-900 mb-1&quot;&gt;{integration.name}&lt;/h4&gt;
                    &lt;p className=&quot;text-sm text-gray-600 mb-3&quot;&gt;{integration.description}&lt;/p&gt;

                    {/* Install Button */}
                    &lt;button className=&quot;w-full bg-gray-50 hover:bg-blue-50 text-gray-700 hover:text-blue-600 py-2 px-3 rounded-lg text-sm font-medium transition-colors group-hover:bg-blue-50 group-hover:text-blue-600&quot;&gt;
                      Install Integration
                    &lt;/button&gt;
                  &lt;/div&gt;
                );
              })}

              {/* Add More Card */}
              &lt;div className=&quot;border-2 border-dashed border-gray-300 rounded-xl p-4 flex flex-col items-center justify-center text-center hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer&quot;&gt;
                &lt;div className=&quot;w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center mb-3&quot;&gt;
                  &lt;Plus className=&quot;w-6 h-6 text-gray-600&quot; /&gt;
                &lt;/div&gt;
                &lt;h4 className=&quot;font-semibold text-gray-700 mb-1&quot;&gt;Need Something Else?&lt;/h4&gt;
                &lt;p className=&quot;text-sm text-gray-500 mb-3&quot;&gt;Build a custom integration&lt;/p&gt;
                &lt;button className=&quot;text-blue-600 hover:text-blue-700 text-sm font-medium&quot;&gt;
                  View SDK
                &lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            {/* Load More */}
            &lt;div className=&quot;text-center mt-8&quot;&gt;
              &lt;button className=&quot;inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors&quot;&gt;
                View All Integrations
                &lt;ArrowRight className=&quot;w-4 h-4&quot; /&gt;
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Custom Integration CTA */}
        &lt;div className=&quot;mt-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white text-center&quot;&gt;
          &lt;h3 className=&quot;text-2xl font-bold mb-4&quot;&gt;Don't See What You Need?&lt;/h3&gt;
          &lt;p className=&quot;text-blue-100 mb-6 max-w-2xl mx-auto&quot;&gt;
            Build custom integrations with our comprehensive SDK, or let our team create one for
            you. We support any API or service.
          &lt;/p&gt;
          &lt;div className=&quot;flex flex-col sm:flex-row gap-4 justify-center&quot;&gt;
            &lt;button className=&quot;bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors&quot;&gt;
              Explore SDK
            &lt;/button&gt;
            &lt;button className=&quot;border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors&quot;&gt;
              Request Integration
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/HeroSection.tsx (Line 41:26 - Line 49:37), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Layout/Layout.tsx (Line 15:56 - Line 23:33)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup138"><code class="language-tsx text-sm text-gray-800">}
      &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
      &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

      {/* Animated Background Orbs */}
      &lt;div className=&quot;absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse&quot; /&gt;
      &lt;div className=&quot;absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000&quot; /&gt;

      &lt;div className=&quot;container mx-auto px-6 relative z-10</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/Header.tsx (Line 1:1 - Line 370:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/header/Header.tsx (Line 8:1 - Line 377:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup140"><code class="language-tsx text-sm text-gray-800">/**
 * Header Component
 *
 * Main navigation header for public pages
 * Similar to headers used by Zapier, Make, n8n, etc.
 */

import {
  ArrowRight,
  ChevronDown,
  ExternalLink,
  LogIn,
  Menu,
  Play,
  Settings,
  User,
  X,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useEffect, useState } from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import { useAuthStore } from '@/core/stores/authStore';

export const Header: React.FC = () =&gt; {
  const navigate = useNavigate();
  const location = useLocation();
  const { isAuthenticated } = useAuthStore();
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [activeDropdown, setActiveDropdown] = useState&lt;string | null&gt;(null);
  const [isScrolled, setIsScrolled] = useState(false);

  // Handle scroll effect
  useEffect(() =&gt; {
    const handleScroll = () =&gt; {
      setIsScrolled(window.scrollY &gt; 20);
    };
    window.addEventListener('scroll', handleScroll);
    return () =&gt; window.removeEventListener('scroll', handleScroll);
  }, []);

  // Close mobile menu on route change
  useEffect(() =&gt; {
    setIsMobileMenuOpen(false);
    setActiveDropdown(null);
  }, []);

  const handleAuth = () =&gt; {
    if (isAuthenticated) {
      navigate('/app/dashboard');
    } else {
      navigate('/login');
    }
  };

  const handleGetStarted = () =&gt; {
    if (isAuthenticated) {
      navigate('/app/dashboard');
    } else {
      navigate('/register');
    }
  };

  const menuItems = [
    {
      label: 'Product',
      items: [
        {
          name: 'Features',
          href: '/features',
          description: 'Comprehensive automation features',
        },
        {
          name: 'Integrations',
          href: '/integrations',
          description: '150+ integrations available',
        },
        {
          name: 'Pricing',
          href: '/pricing',
          description: 'Transparent pricing plans',
        },
        {
          name: 'Enterprise',
          href: '/enterprise',
          description: 'Enterprise-grade solutions',
        },
        {
          name: 'Self-hosted',
          href: '/self-hosted',
          description: 'Deploy anywhere',
        },
        {
          name: 'Roadmap',
          href: '/roadmap',
          description: 'Product development roadmap',
        },
      ],
    },
    {
      label: 'Developers',
      items: [
        {
          name: 'Documentation',
          href: '/documentation',
          description: 'Complete guides and tutorials',
        },
        {
          name: 'API Reference',
          href: '/api-reference',
          description: 'REST API documentation',
        },
        {
          name: 'Node SDK',
          href: '/documentation',
          description: 'Build custom nodes',
        },
        {
          name: 'Examples',
          href: '/documentation',
          description: 'Code examples and templates',
        },
        {
          name: 'GitHub',
          href: 'https://github.com/reporunner/reporunner',
          description: 'Open source repository',
          external: true,
        },
        {
          name: 'Community',
          href: '/contact',
          description: 'Join our community',
        },
      ],
    },
    {
      label: 'Resources',
      items: [
        {
          name: 'Blog',
          href: '/documentation',
          description: 'Latest insights and tutorials',
        },
        {
          name: 'Case Studies',
          href: '/about',
          description: 'Customer success stories',
        },
        {
          name: 'Help Center',
          href: '/documentation',
          description: 'Support documentation',
        },
        {
          name: 'Status',
          href: 'https://status.reporunner.dev',
          description: 'System status',
          external: true,
        },
      ],
    },
    {
      label: 'Company',
      items: [
        { name: 'About', href: '/about', description: 'Our story and mission' },
        { name: 'Contact', href: '/contact', description: 'Get in touch' },
        { name: 'Careers', href: '/about', description: 'Join our team' },
      ],
    },
  ];

  const isActivePage = (href: string) =&gt; {
    if (href === '/' &amp;&amp; location.pathname === '/') return true;
    if (href !== '/' &amp;&amp; location.pathname.startsWith(href)) return true;
    return false;
  };

  return (
    &lt;header
      className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${
        isScrolled
          ? 'bg-white/95 backdrop-blur-md shadow-lg border-b border-gray-200/50'
          : 'bg-white/80 backdrop-blur-sm'
      }`}
    &gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between h-16&quot;&gt;
          {/* Logo */}
          &lt;Link to=&quot;/&quot; className=&quot;flex items-center gap-3 group&quot;&gt;
            &lt;div className=&quot;w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center&quot;&gt;
              &lt;Zap className=&quot;w-5 h-5 text-white&quot; /&gt;
            &lt;/div&gt;
            &lt;span className=&quot;text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              Reporunner
            &lt;/span&gt;
          &lt;/Link&gt;

          {/* Desktop Navigation */}
          &lt;nav className=&quot;hidden lg:flex items-center space-x-8&quot;&gt;
            {menuItems.map((menu, index) =&gt; (
              &lt;div
                key={index}
                className=&quot;relative group&quot;
                onMouseEnter={() =&gt; setActiveDropdown(menu.label)}
                onMouseLeave={() =&gt; setActiveDropdown(null)}
              &gt;
                &lt;button className=&quot;flex items-center gap-1 text-gray-700 hover:text-blue-600 font-medium transition-colors py-2&quot;&gt;
                  {menu.label}
                  &lt;ChevronDown className=&quot;w-4 h-4&quot; /&gt;
                &lt;/button&gt;

                {/* Dropdown */}
                {activeDropdown === menu.label &amp;&amp; (
                  &lt;div className=&quot;absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-200 py-4 z-50&quot;&gt;
                    &lt;div className=&quot;px-4 pb-2 mb-2 border-b border-gray-100&quot;&gt;
                      &lt;h3 className=&quot;font-semibold text-gray-900&quot;&gt;{menu.label}&lt;/h3&gt;
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className=&quot;flex items-start gap-3 px-4 py-3 hover:bg-gray-50 transition-colors group&quot;
                      &gt;
                        &lt;div className=&quot;flex-1&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;span className=&quot;font-medium text-gray-900 group-hover:text-blue-600&quot;&gt;
                              {item.name}
                            &lt;/span&gt;
                            {item.external &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3 text-gray-400&quot; /&gt;}
                          &lt;/div&gt;
                          &lt;p className=&quot;text-sm text-gray-500 mt-1&quot;&gt;{item.description}&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;ArrowRight className=&quot;w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity mt-1&quot; /&gt;
                      &lt;/Link&gt;
                    ))}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;
            ))}
          &lt;/nav&gt;

          {/* Auth Buttons */}
          &lt;div className=&quot;hidden lg:flex items-center gap-3&quot;&gt;
            {isAuthenticated ? (
              &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/dashboard')}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;User className=&quot;w-4 h-4&quot; /&gt;
                  Dashboard
                &lt;/button&gt;
                &lt;button
                  onClick={() =&gt; navigate('/app/settings')}
                  className=&quot;p-2 text-gray-500 hover:text-gray-700 transition-colors&quot;
                  title=&quot;Settings&quot;
                &gt;
                  &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                &lt;/button&gt;
              &lt;/div&gt;
            ) : (
              &lt;&gt;
                &lt;button
                  onClick={handleAuth}
                  className=&quot;flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-blue-600 font-medium transition-colors&quot;
                &gt;
                  &lt;LogIn className=&quot;w-4 h-4&quot; /&gt;
                  Sign In
                &lt;/button&gt;
                &lt;button
                  onClick={handleGetStarted}
                  className=&quot;flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all hover:scale-105&quot;
                &gt;
                  &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                  Get Started
                &lt;/button&gt;
              &lt;/&gt;
            )}
          &lt;/div&gt;

          {/* Mobile Menu Button */}
          &lt;button
            onClick={() =&gt; setIsMobileMenuOpen(!isMobileMenuOpen)}
            className=&quot;lg:hidden p-2 text-gray-700 hover:text-blue-600 transition-colors&quot;
          &gt;
            {isMobileMenuOpen ? &lt;X className=&quot;w-6 h-6&quot; /&gt; : &lt;Menu className=&quot;w-6 h-6&quot; /&gt;}
          &lt;/button&gt;
        &lt;/div&gt;

        {/* Mobile Menu */}
        {isMobileMenuOpen &amp;&amp; (
          &lt;div className=&quot;lg:hidden border-t border-gray-200 bg-white/95 backdrop-blur-md&quot;&gt;
            &lt;div className=&quot;py-4&quot;&gt;
              {/* Auth Section */}
              &lt;div className=&quot;px-4 py-4 border-b border-gray-200&quot;&gt;
                {isAuthenticated ? (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/dashboard')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;User className=&quot;w-5 h-5&quot; /&gt;
                      Dashboard
                    &lt;/button&gt;
                    &lt;button
                      onClick={() =&gt; navigate('/app/settings')}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;Settings className=&quot;w-5 h-5&quot; /&gt;
                      Settings
                    &lt;/button&gt;
                  &lt;/div&gt;
                ) : (
                  &lt;div className=&quot;space-y-3&quot;&gt;
                    &lt;button
                      onClick={handleAuth}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors&quot;
                    &gt;
                      &lt;LogIn className=&quot;w-5 h-5&quot; /&gt;
                      Sign In
                    &lt;/button&gt;
                    &lt;button
                      onClick={handleGetStarted}
                      className=&quot;w-full flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all&quot;
                    &gt;
                      &lt;Play className=&quot;w-5 h-5&quot; /&gt;
                      Get Started
                    &lt;/button&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;

              {/* Navigation Menu */}
              &lt;div className=&quot;space-y-1 px-4 pt-4&quot;&gt;
                {menuItems.map((menu, index) =&gt; (
                  &lt;div key={index} className=&quot;space-y-1&quot;&gt;
                    &lt;div className=&quot;px-4 py-2 font-semibold text-gray-900 text-sm uppercase tracking-wide&quot;&gt;
                      {menu.label}
                    &lt;/div&gt;
                    {menu.items.map((item, itemIndex) =&gt; (
                      &lt;Link
                        key={itemIndex}
                        to={item.href}
                        target={item.external ? '_blank' : undefined}
                        rel={item.external ? 'noopener noreferrer' : undefined}
                        className={`block px-4 py-3 rounded-lg transition-colors ${
                          isActivePage(item.href)
                            ? 'bg-blue-50 text-blue-600 font-medium'
                            : 'text-gray-700 hover:bg-gray-50'
                        }`}
                      &gt;
                        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                          {item.name}
                          {item.external &amp;&amp; &lt;ExternalLink className=&quot;w-3 h-3 text-gray-400&quot; /&gt;}
                        &lt;/div&gt;
                        &lt;div className=&quot;text-sm text-gray-500 mt-1&quot;&gt;{item.description}&lt;/div&gt;
                      &lt;/Link&gt;
                    ))}
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/header&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/FeatureShowcase.tsx (Line 1:1 - Line 460:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/featureshowcase/FeatureShowcase.tsx (Line 2:1 - Line 461:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup142"><code class="language-tsx text-sm text-gray-800">/**
 * Feature Showcase Section
 *
 * Interactive demos of key Reporunner features with modern UI
 * and engaging animations
 */

import {
  ArrowRight,
  BarChart3,
  Brain,
  GitBranch,
  Play,
  Shield,
  Users,
  Workflow,
  Zap,
} from 'lucide-react';
import type React from 'react';
import { useState } from 'react';

type DemoElement =
  | { type: 'node'; label: string; x: number; y: number; color: string }
  | { type: 'connection'; from: number; to: number }
  | { type: 'user'; name: string; x: number; y: number; color: string }
  | { type: 'edit'; x: number; y: number; user: string }
  | { type: 'chart'; x: number; y: number; width: number; height: number }
  | { type: 'metric'; label: string; x: number; y: number }
  | { type: 'ai-node'; label: string; x: number; y: number; color: string }
  | { type: 'insight'; label: string; x: number; y: number; color: string };

export const FeatureShowcase: React.FC = () =&gt; {
  const [activeFeature, setActiveFeature] = useState(0);

  const features: Array&lt;{
    id: number;
    icon: any;
    title: string;
    subtitle: string;
    description: string;
    image: string;
    highlights: string[];
    demoElements?: DemoElement[];
  }&gt; = [
    {
      id: 0,
      icon: Workflow,
      title: 'Visual Workflow Builder',
      subtitle: 'Drag-and-drop simplicity',
      description:
        'Create complex automations with our intuitive visual editor. Connect 500+ integrations with simple drag-and-drop operations.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Drag-and-drop interface',
        '500+ pre-built integrations',
        'Real-time validation',
        'Auto-connection suggestions',
      ],
      demoElements: [
        {
          type: 'node',
          label: 'Gmail Trigger',
          x: 100,
          y: 150,
          color: 'bg-red-500',
        },
        {
          type: 'node',
          label: 'AI Processor',
          x: 300,
          y: 150,
          color: 'bg-blue-500',
        },
        {
          type: 'node',
          label: 'Slack Action',
          x: 500,
          y: 150,
          color: 'bg-green-500',
        },
        { type: 'connection', from: 0, to: 1 },
        { type: 'connection', from: 1, to: 2 },
      ],
    },
    {
      id: 1,
      icon: Brain,
      title: 'AI-Powered Automation',
      subtitle: 'Intelligent workflows',
      description:
        'Leverage AI for smart error recovery, pattern recognition, and optimization suggestions. Your workflows learn and improve over time.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Smart error recovery',
        'Pattern recognition',
        'Auto-optimization',
        'Natural language queries',
      ],
      demoElements: [
        {
          type: 'ai-node',
          label: 'AI Agent',
          x: 250,
          y: 100,
          color: 'bg-purple-500',
        },
        {
          type: 'insight',
          label: 'Optimized execution path',
          x: 350,
          y: 50,
          color: 'text-green-500',
        },
        {
          type: 'insight',
          label: 'Error pattern detected',
          x: 150,
          y: 200,
          color: 'text-red-500',
        },
      ],
    },
    {
      id: 2,
      icon: Users,
      title: 'Enterprise Collaboration',
      subtitle: 'Team workflows',
      description:
        'Real-time collaborative editing, version control, and enterprise-grade permissions. Build workflows as a team.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Real-time collaboration',
        'Version control',
        'Role-based permissions',
        'Audit trails',
      ],
      demoElements: [
        { type: 'user', name: 'Alice', x: 100, y: 80, color: 'bg-blue-500' },
        { type: 'user', name: 'Bob', x: 200, y: 120, color: 'bg-green-500' },
        { type: 'user', name: 'Carol', x: 300, y: 90, color: 'bg-purple-500' },
        { type: 'edit', x: 150, y: 200, user: 'Alice' },
      ],
    },
    {
      id: 3,
      icon: BarChart3,
      title: 'Advanced Analytics',
      subtitle: 'Performance insights',
      description:
        'Deep insights into workflow performance, cost optimization, and usage patterns. Make data-driven decisions.',
      image: '/api/placeholder/600/400',
      highlights: [
        'Performance monitoring',
        'Cost optimization',
        'Usage analytics',
        'Custom dashboards',
      ],
      demoElements: [
        { type: 'chart', x: 150, y: 100, width: 300, height: 150 },
        { type: 'metric', label: '99.9% Uptime', x: 100, y: 50 },
        { type: 'metric', label: '2.3s Avg Response', x: 350, y: 50 },
      ],
    },
  ];

  const currentFeature = features[activeFeature];

  return (
    &lt;section className=&quot;py-20 bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      &lt;div className=&quot;container mx-auto px-6&quot;&gt;
        {/* Section Header */}
        &lt;div className=&quot;text-center mb-16&quot;&gt;
          &lt;h2 className=&quot;text-4xl md:text-5xl font-bold text-gray-900 mb-6&quot;&gt;
            See Reporunner{' '}
            &lt;span className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent&quot;&gt;
              in Action
            &lt;/span&gt;
          &lt;/h2&gt;
          &lt;p className=&quot;text-xl text-gray-600 max-w-3xl mx-auto&quot;&gt;
            Experience the power of enterprise workflow automation with interactive demos of our key
            features and capabilities.
          &lt;/p&gt;
        &lt;/div&gt;

        &lt;div className=&quot;max-w-7xl mx-auto&quot;&gt;
          &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-2 gap-12 items-center&quot;&gt;
            {/* Feature Tabs */}
            &lt;div className=&quot;space-y-4&quot;&gt;
              {features.map((feature, index) =&gt; {
                const Icon = feature.icon;
                const isActive = activeFeature === index;

                return (
                  &lt;div
                    key={feature.id}
                    className={`cursor-pointer transition-all duration-300 rounded-xl p-6 border-2 ${
                      isActive
                        ? 'border-blue-500 bg-white shadow-lg shadow-blue-500/10'
                        : 'border-gray-200 bg-white/50 hover:border-gray-300 hover:bg-white'
                    }`}
                    onClick={() =&gt; setActiveFeature(index)}
                  &gt;
                    &lt;div className=&quot;flex items-start gap-4&quot;&gt;
                      {/* Icon */}
                      &lt;div
                        className={`w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 ${
                          isActive
                            ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white'
                            : 'bg-gray-100 text-gray-600'
                        }`}
                      &gt;
                        &lt;Icon className=&quot;w-6 h-6&quot; /&gt;
                      &lt;/div&gt;

                      {/* Content */}
                      &lt;div className=&quot;flex-1&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-2 mb-2&quot;&gt;
                          &lt;h3
                            className={`text-xl font-bold transition-colors ${
                              isActive ? 'text-blue-600' : 'text-gray-900'
                            }`}
                          &gt;
                            {feature.title}
                          &lt;/h3&gt;
                          {isActive &amp;&amp; (
                            &lt;div className=&quot;flex items-center gap-1 text-sm text-blue-600 font-medium&quot;&gt;
                              &lt;Play className=&quot;w-4 h-4&quot; /&gt;
                              Live Demo
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;

                        &lt;p className=&quot;text-sm text-gray-500 mb-3&quot;&gt;{feature.subtitle}&lt;/p&gt;
                        &lt;p className=&quot;text-gray-600 mb-4&quot;&gt;{feature.description}&lt;/p&gt;

                        {/* Highlights */}
                        &lt;div className=&quot;grid grid-cols-2 gap-2&quot;&gt;
                          {feature.highlights.map((highlight, i) =&gt; (
                            &lt;div key={i} className=&quot;flex items-center gap-2 text-sm text-gray-600&quot;&gt;
                              &lt;div
                                className={`w-1.5 h-1.5 rounded-full ${
                                  isActive ? 'bg-blue-500' : 'bg-gray-400'
                                }`}
                              /&gt;
                              {highlight}
                            &lt;/div&gt;
                          ))}
                        &lt;/div&gt;

                        {/* Try It Button */}
                        {isActive &amp;&amp; (
                          &lt;div className=&quot;mt-4 pt-4 border-t border-gray-100&quot;&gt;
                            &lt;button className=&quot;group flex items-center gap-2 text-blue-600 font-medium text-sm hover:text-blue-700 transition-colors&quot;&gt;
                              Try this feature
                              &lt;ArrowRight className=&quot;w-4 h-4 transition-transform group-hover:translate-x-1&quot; /&gt;
                            &lt;/button&gt;
                          &lt;/div&gt;
                        )}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                );
              })}
            &lt;/div&gt;

            {/* Interactive Demo Area */}
            &lt;div className=&quot;bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden&quot;&gt;
              {/* Demo Header */}
              &lt;div className=&quot;bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                  &lt;div className=&quot;flex gap-2&quot;&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-red-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-yellow-400&quot; /&gt;
                    &lt;div className=&quot;w-3 h-3 rounded-full bg-green-400&quot; /&gt;
                  &lt;/div&gt;
                  &lt;span className=&quot;text-sm font-medium text-gray-600&quot;&gt;
                    {currentFeature.title} Demo
                  &lt;/span&gt;
                  &lt;div className=&quot;ml-auto flex items-center gap-2 text-xs text-gray-500&quot;&gt;
                    &lt;div className=&quot;w-2 h-2 rounded-full bg-green-500 animate-pulse&quot; /&gt;
                    Live Demo
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              {/* Demo Content */}
              &lt;div className=&quot;relative h-96 bg-gradient-to-br from-slate-50 to-blue-50 p-6&quot;&gt;
                {/* Render demo elements based on feature type */}
                {currentFeature.id === 0 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* Workflow nodes */}
                    {currentFeature.demoElements?.map((element, i) =&gt; {
                      if (element.type === 'node') {
                        return (
                          &lt;div
                            key={i}
                            className={`absolute w-24 h-16 ${element.color} rounded-lg flex items-center justify-center text-white text-xs font-medium shadow-lg transform transition-all duration-1000 hover:scale-110`}
                            style={{
                              left: `${element.x}px`,
                              top: `${element.y}px`,
                              animationDelay: `${i * 200}ms`,
                            }}
                          &gt;
                            {element.label}
                          &lt;/div&gt;
                        );
                      }
                      return null;
                    })}

                    {/* Connections */}
                    &lt;svg className=&quot;absolute inset-0 w-full h-full pointer-events-none&quot;&gt;
                      &lt;defs&gt;
                        &lt;marker
                          id=&quot;arrowhead&quot;
                          markerWidth=&quot;10&quot;
                          markerHeight=&quot;7&quot;
                          refX=&quot;9&quot;
                          refY=&quot;3.5&quot;
                          orient=&quot;auto&quot;
                        &gt;
                          &lt;polygon points=&quot;0 0, 10 3.5, 0 7&quot; fill=&quot;#6366f1&quot; /&gt;
                        &lt;/marker&gt;
                      &lt;/defs&gt;
                      &lt;path
                        d=&quot;M 150 167 Q 200 167 250 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                      /&gt;
                      &lt;path
                        d=&quot;M 350 167 Q 400 167 450 167&quot;
                        stroke=&quot;#6366f1&quot;
                        strokeWidth=&quot;2&quot;
                        fill=&quot;none&quot;
                        markerEnd=&quot;url(#arrowhead)&quot;
                        className=&quot;animate-draw&quot;
                        style={{ animationDelay: '500ms' }}
                      /&gt;
                    &lt;/svg&gt;
                  &lt;/div&gt;
                )}

                {/* AI Feature Demo */}
                {currentFeature.id === 1 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    &lt;div className=&quot;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2&quot;&gt;
                      &lt;div className=&quot;w-32 h-32 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center shadow-xl animate-pulse&quot;&gt;
                        &lt;Brain className=&quot;w-16 h-16 text-white&quot; /&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    {/* AI Insights */}
                    &lt;div className=&quot;absolute top-12 right-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;&gt;
                      &lt;div className=&quot;flex items-center gap-2 text-sm&quot;&gt;
                        &lt;Zap className=&quot;w-4 h-4 text-yellow-500&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;Performance optimized&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div
                      className=&quot;absolute bottom-12 left-12 bg-white rounded-lg shadow-lg p-3 animate-bounce&quot;
                      style={{ animationDelay: '1s' }}
                    &gt;
                      &lt;div className=&quot;flex items-center gap-2 text-sm&quot;&gt;
                        &lt;Shield className=&quot;w-4 h-4 text-green-500&quot; /&gt;
                        &lt;span className=&quot;text-gray-700&quot;&gt;Error pattern detected&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Collaboration Demo */}
                {currentFeature.id === 2 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* User avatars */}
                    &lt;div className=&quot;absolute top-8 left-8 flex -space-x-2&quot;&gt;
                      {['Alice', 'Bob', 'Carol'].map((name, i) =&gt; (
                        &lt;div
                          key={name}
                          className={`w-10 h-10 rounded-full bg-gradient-to-r ${
                            i === 0
                              ? 'from-blue-500 to-blue-600'
                              : i === 1
                                ? 'from-green-500 to-green-600'
                                : 'from-purple-500 to-purple-600'
                          } flex items-center justify-center text-white font-bold text-sm border-2 border-white shadow-lg`}
                          style={{ animationDelay: `${i * 300}ms` }}
                        &gt;
                          {name[0]}
                        &lt;/div&gt;
                      ))}
                    &lt;/div&gt;

                    {/* Collaboration indicator */}
                    &lt;div className=&quot;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2&quot;&gt;
                      &lt;div className=&quot;bg-white rounded-xl shadow-xl p-6 border border-gray-200&quot;&gt;
                        &lt;div className=&quot;flex items-center gap-3 mb-4&quot;&gt;
                          &lt;GitBranch className=&quot;w-6 h-6 text-blue-500&quot; /&gt;
                          &lt;span className=&quot;font-semibold text-gray-800&quot;&gt;Live Collaboration&lt;/span&gt;
                        &lt;/div&gt;
                        &lt;div className=&quot;space-y-2 text-sm text-gray-600&quot;&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 rounded-full bg-green-500&quot; /&gt;
                            Alice is editing workflow
                          &lt;/div&gt;
                          &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                            &lt;div className=&quot;w-2 h-2 rounded-full bg-blue-500&quot; /&gt;
                            Bob added a comment
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}

                {/* Analytics Demo */}
                {currentFeature.id === 3 &amp;&amp; (
                  &lt;div className=&quot;relative w-full h-full&quot;&gt;
                    {/* Mock chart */}
                    &lt;div className=&quot;absolute inset-0 p-8&quot;&gt;
                      &lt;div className=&quot;bg-white rounded-lg shadow-lg p-4 h-full&quot;&gt;
                        &lt;h4 className=&quot;font-semibold text-gray-800 mb-4&quot;&gt;Workflow Performance&lt;/h4&gt;
                        &lt;div className=&quot;h-32 bg-gradient-to-t from-blue-100 to-blue-50 rounded mb-4 relative overflow-hidden&quot;&gt;
                          &lt;div className=&quot;absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-blue-500 to-blue-400 rounded animate-pulse&quot; /&gt;
                        &lt;/div&gt;
                        &lt;div className=&quot;grid grid-cols-2 gap-4 text-sm&quot;&gt;
                          &lt;div className=&quot;bg-green-50 rounded p-2&quot;&gt;
                            &lt;div className=&quot;text-green-600 font-bold&quot;&gt;99.9%&lt;/div&gt;
                            &lt;div className=&quot;text-gray-600&quot;&gt;Uptime&lt;/div&gt;
                          &lt;/div&gt;
                          &lt;div className=&quot;bg-blue-50 rounded p-2&quot;&gt;
                            &lt;div className=&quot;text-blue-600 font-bold&quot;&gt;2.3s&lt;/div&gt;
                            &lt;div className=&quot;text-gray-600&quot;&gt;Avg Response&lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                )}
              &lt;/div&gt;

              {/* Demo Footer */}
              &lt;div className=&quot;bg-gray-50 px-6 py-4 border-t border-gray-200&quot;&gt;
                &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                  &lt;span className=&quot;text-sm text-gray-600&quot;&gt;Interactive demo • Click to explore&lt;/span&gt;
                  &lt;button className=&quot;bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors&quot;&gt;
                    Try Full Demo
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/section&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/ComparisonTable.tsx (Line 405:2 - Line 410:3), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Landing/ComparisonTable.tsx (Line 403:3 - Line 409:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup143"><code class="language-tsx text-sm text-gray-800">&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                  &lt;div className=&quot;p-3&quot;&gt;&lt;/div&gt;
                &lt;/</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/ExecutionHistory.tsx (Line 1:1 - Line 392:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/ExecutionHistory/executionhistory/ExecutionHistory.tsx (Line 4:1 - Line 395:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn145" onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn145" onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup145"><code class="language-tsx text-sm text-gray-800">// Execution History Component - Display workflow execution results

import { EyeOutlined, ReloadOutlined, StopOutlined } from '@ant-design/icons';
import {
  Button,
  Card,
  Col,
  DatePicker,
  Input,
  Modal,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tag,
  Timeline,
} from 'antd';
import type React from 'react';
import { useCallback, useEffect, useState } from 'react';
import { WorkflowApiService } from '@/core';
import { logger } from '@/core/services/LoggingService';

const workflowApiService = new WorkflowApiService();

import type {
  ExecutionFilter,
  NodeExecution,
  PaginationParams,
  WorkflowExecution,
} from '@/core/schemas';

const { RangePicker } = DatePicker;
const { Search } = Input;
const { Option } = Select;

export const ExecutionHistory: React.FC&lt;{
  workflowId?: string;
  onClose?: () =&gt; void;
}&gt; = ({ workflowId, onClose }) =&gt; {
  const [executions, setExecutions] = useState&lt;WorkflowExecution[]&gt;([]);
  const [loading, setLoading] = useState(false);
  const [selectedExecution, setSelectedExecution] = useState&lt;WorkflowExecution | null&gt;(null);
  const [detailsVisible, setDetailsVisible] = useState(false);
  const [filter, setFilter] = useState&lt;ExecutionFilter &amp; PaginationParams&gt;({
    workflowId,
    limit: 20,
    offset: 0,
    sortOrder: 'desc',
  });
  const [total, setTotal] = useState(0);

  const loadExecutions = useCallback(async () =&gt; {
    setLoading(true);
    try {
      const result = await workflowApiService.getExecutions(filter);
      setExecutions(result.items);
      setTotal(result.total);
    } catch (error) {
      logger.error('Failed to load executions', error instanceof Error ? error : undefined);
    } finally {
      setLoading(false);
    }
  }, [filter]);

  useEffect(() =&gt; {
    loadExecutions();
  }, [loadExecutions]);

  const handleStopExecution = async (executionId: string) =&gt; {
    try {
      await workflowApiService.stopExecution(executionId);
      await loadExecutions();
    } catch (error) {
      logger.error('Failed to stop execution', error instanceof Error ? error : undefined, {
        executionId,
      });
    }
  };

  const showExecutionDetails = async (execution: WorkflowExecution) =&gt; {
    setSelectedExecution(execution);
    setDetailsVisible(true);
  };

  const getStatusColor = (status: WorkflowExecution['status']) =&gt; {
    const colors: Record&lt;string, string&gt; = {
      pending: 'orange',
      running: 'blue',
      completed: 'green',
      failed: 'red',
      cancelled: 'gray',
      success: 'green',
      error: 'red',
    };
    return colors[status] || 'default';
  };

  const formatDuration = (duration?: number) =&gt; {
    if (!duration) return '-';
    const seconds = Math.floor(duration / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);

    if (hours &gt; 0) return `${hours}h ${minutes % 60}m ${seconds % 60}s`;
    if (minutes &gt; 0) return `${minutes}m ${seconds % 60}s`;
    return `${seconds}s`;
  };

  const getExecutionResults = (execution: WorkflowExecution) =&gt; {
    // Handle both array and record results formats for backward compatibility
    if (Array.isArray(execution.results)) {
      return execution.results;
    }
    if (execution.results &amp;&amp; typeof execution.results === 'object') {
      return Object.entries(execution.results).map(([nodeId, data]: [string, any]) =&gt; ({
        nodeId,
        nodeName: data?.nodeName || nodeId,
        status: data?.status || 'success',
        output: data?.output,
        error: data?.error,
        executedAt: data?.executedAt || execution.startTime || new Date().toISOString(),
        duration: data?.duration || 0,
      }));
    }
    return [];
  };

  const columns = [
    {
      title: 'Execution ID',
      dataIndex: 'id',
      key: 'id',
      width: 120,
      render: (id: string) =&gt; &lt;span className=&quot;font-mono text-xs&quot;&gt;{id.substring(0, 8)}...&lt;/span&gt;,
    },
    {
      title: 'Workflow',
      dataIndex: 'workflowName',
      key: 'workflowName',
      width: 200,
    },
    {
      title: 'Status',
      dataIndex: 'status',
      key: 'status',
      width: 100,
      render: (status: WorkflowExecution['status']) =&gt; (
        &lt;Tag color={getStatusColor(status)}&gt;{status.toUpperCase()}&lt;/Tag&gt;
      ),
    },
    {
      title: 'Progress',
      key: 'progress',
      width: 120,
      render: (record: WorkflowExecution) =&gt; (
        &lt;div className=&quot;text-xs&quot;&gt;
          {record.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length ||
            0}{' '}
          / {record.nodeExecutions?.length || 0} nodes
        &lt;/div&gt;
      ),
    },
    {
      title: 'Started',
      dataIndex: 'startedAt',
      key: 'startedAt',
      width: 150,
      render: (date: string) =&gt; new Date(date).toLocaleString(),
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (record: WorkflowExecution) =&gt; formatDuration(record.duration),
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 150,
      render: (record: WorkflowExecution) =&gt; (
        &lt;Space&gt;
          &lt;Button size=&quot;small&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; showExecutionDetails(record)}&gt;
            Details
          &lt;/Button&gt;
          {record.status === 'running' &amp;&amp; (
            &lt;Button
              size=&quot;small&quot;
              danger
              icon={&lt;StopOutlined /&gt;}
              onClick={() =&gt; handleStopExecution(record.id)}
            &gt;
              Stop
            &lt;/Button&gt;
          )}
        &lt;/Space&gt;
      ),
    },
  ];

  const content = (
    &lt;div className=&quot;execution-history&quot;&gt;
      &lt;div className=&quot;mb-4&quot;&gt;
        &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
          &lt;Col span={6}&gt;
            &lt;Search
              placeholder=&quot;Search executions...&quot;
              onSearch={(value) =&gt; setFilter({ ...filter, workflowId: value || workflowId })}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={6}&gt;
            &lt;Select
              placeholder=&quot;Filter by status&quot;
              allowClear
              style={{ width: '100%' }}
              onChange={(value) =&gt; setFilter({ ...filter, status: value })}
            &gt;
              &lt;Option value=&quot;pending&quot;&gt;Pending&lt;/Option&gt;
              &lt;Option value=&quot;running&quot;&gt;Running&lt;/Option&gt;
              &lt;Option value=&quot;completed&quot;&gt;Completed&lt;/Option&gt;
              &lt;Option value=&quot;failed&quot;&gt;Failed&lt;/Option&gt;
              &lt;Option value=&quot;cancelled&quot;&gt;Cancelled&lt;/Option&gt;
            &lt;/Select&gt;
          &lt;/Col&gt;
          &lt;Col span={8}&gt;
            &lt;RangePicker
              placeholder={['Start date', 'End date']}
              onChange={(dates) =&gt; {
                if (dates) {
                  setFilter({
                    ...filter,
                    startDate: dates[0]?.toISOString(),
                    endDate: dates[1]?.toISOString(),
                  });
                } else {
                  setFilter({
                    ...filter,
                    startDate: undefined,
                    endDate: undefined,
                  });
                }
              }}
            /&gt;
          &lt;/Col&gt;
          &lt;Col span={4}&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadExecutions} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Col&gt;
        &lt;/Row&gt;
      &lt;/div&gt;

      &lt;Table
        columns={columns}
        dataSource={executions}
        rowKey=&quot;id&quot;
        loading={loading}
        pagination={{
          current: Math.floor((filter.offset || 0) / (filter.limit || 20)) + 1,
          pageSize: filter.limit || 20,
          total,
          onChange: (page, pageSize) =&gt; {
            setFilter({
              ...filter,
              offset: (page - 1) * (pageSize || 20),
              limit: pageSize,
            });
          },
        }}
      /&gt;

      &lt;Modal
        title=&quot;Execution Details&quot;
        open={detailsVisible}
        onCancel={() =&gt; setDetailsVisible(false)}
        width={800}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={() =&gt; setDetailsVisible(false)}&gt;
            Close
          &lt;/Button&gt;,
        ]}
      &gt;
        {selectedExecution &amp;&amp; (
          &lt;div&gt;
            &lt;Row gutter={16} className=&quot;mb-4&quot;&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Status&quot;
                  value={selectedExecution.status.toUpperCase()}
                  valueStyle={{
                    color: getStatusColor(selectedExecution.status),
                  }}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic title=&quot;Duration&quot; value={formatDuration(selectedExecution.duration)} /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Nodes Completed&quot;
                  value={`${selectedExecution.nodeExecutions?.filter((n: NodeExecution) =&gt; n.status === 'completed').length || 0} / ${selectedExecution.nodeExecutions?.length || 0}`}
                /&gt;
              &lt;/Col&gt;
              &lt;Col span={6}&gt;
                &lt;Statistic
                  title=&quot;Success Rate&quot;
                  value={(() =&gt; {
                    const results = getExecutionResults(selectedExecution);
                    const successCount = results.filter((r) =&gt; r.status === 'success').length;
                    const total = results.length;
                    return total &gt; 0 ? Math.round((successCount / total) * 100) : 0;
                  })()}
                  suffix=&quot;%&quot;
                /&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;

            &lt;Card title=&quot;Node Execution Results&quot; className=&quot;mb-4&quot;&gt;
              &lt;Timeline&gt;
                {getExecutionResults(selectedExecution).map((result) =&gt; (
                  &lt;Timeline.Item
                    key={result.nodeId}
                    color={
                      result.status === 'success'
                        ? 'green'
                        : result.status === 'error'
                          ? 'red'
                          : 'gray'
                    }
                  &gt;
                    &lt;div&gt;
                      &lt;strong&gt;{result.nodeName}&lt;/strong&gt;
                      &lt;Tag color={result.status === 'success' ? 'green' : 'red'} className=&quot;ml-2&quot;&gt;
                        {result.status}
                      &lt;/Tag&gt;
                      &lt;div className=&quot;text-gray-500 text-xs&quot;&gt;
                        {new Date(result.executedAt).toLocaleString()} •{' '}
                        {formatDuration(result.duration)}
                      &lt;/div&gt;
                      {result.error &amp;&amp; (
                        &lt;div className=&quot;text-red-500 text-sm mt-1&quot;&gt;{result.error}&lt;/div&gt;
                      )}
                      {result.output &amp;&amp; (
                        &lt;details className=&quot;mt-1&quot;&gt;
                          &lt;summary className=&quot;text-blue-500 cursor-pointer text-sm&quot;&gt;
                            View Output
                          &lt;/summary&gt;
                          &lt;pre className=&quot;bg-gray-100 p-2 rounded mt-1 text-xs overflow-auto max-h-32&quot;&gt;
                            {JSON.stringify(result.output, null, 2)}
                          &lt;/pre&gt;
                        &lt;/details&gt;
                      )}
                    &lt;/div&gt;
                  &lt;/Timeline.Item&gt;
                ))}
              &lt;/Timeline&gt;
            &lt;/Card&gt;

            {selectedExecution.error &amp;&amp; (
              &lt;Card title=&quot;Execution Error&quot; className=&quot;border-red-200&quot;&gt;
                &lt;div className=&quot;text-red-600&quot;&gt;
                  &lt;div className=&quot;font-semibold&quot;&gt;{selectedExecution.error}&lt;/div&gt;
                &lt;/div&gt;
              &lt;/Card&gt;
            )}
          &lt;/div&gt;
        )}
      &lt;/Modal&gt;
    &lt;/div&gt;
  );

  // If onClose is provided, wrap in a modal
  if (onClose) {
    return (
      &lt;Modal
        title=&quot;Execution History&quot;
        open={true}
        onCancel={onClose}
        width={1200}
        footer={[
          &lt;Button key=&quot;close&quot; onClick={onClose}&gt;
            Close
          &lt;/Button&gt;,
        ]}
      &gt;
        {content}
      &lt;/Modal&gt;
    );
  }

  return content;
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/EnterpriseDashboard.tsx (Line 1:1 - Line 42:64), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/enterprisedashboard/EnterpriseDashboard.tsx (Line 1:1 - Line 41:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn147" onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn147" onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup147"><code class="language-tsx text-sm text-gray-800">import {
  ApiOutlined,
  BugOutlined,
  CheckCircleOutlined,
  ClockCircleOutlined,
  DashboardOutlined,
  DatabaseOutlined,
  ExportOutlined,
  FallOutlined,
  ReloadOutlined,
  RiseOutlined,
  SecurityScanOutlined,
  TeamOutlined,
  ThunderboltOutlined,
  UserOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import { Area, Column, Line, Pie } from '@ant-design/plots';
import {
  Alert,
  Avatar,
  Badge,
  Button,
  Card,
  Col,
  DatePicker,
  Progress,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tabs,
  Tag,
  Timeline,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import { useRBACStore } from '@/core/stores/rbacStore';

// import { auditService } from &quot;@/core/services/auditService&quot;;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/EnterpriseDashboard.tsx (Line 40:26 - Line 921:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/EnterpriseDashboard/enterprisedashboard/EnterpriseDashboard.tsx (Line 43:19 - Line 924:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn148" onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn148" onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup148"><code class="language-tsx text-sm text-gray-800">;

// import { auditService } from &quot;@/core/services/auditService&quot;;
// import { securityService } from &quot;@/core/services/securityService&quot;;

const { Title, Text } = Typography;
const { RangePicker } = DatePicker;
const { Option } = Select;

interface DashboardMetrics {
  organizations: {
    total: number;
    active: number;
    growth: number;
  };
  users: {
    total: number;
    active: number;
    newThisMonth: number;
    growth: number;
  };
  workflows: {
    total: number;
    active: number;
    executions: number;
    successRate: number;
  };
  security: {
    threats: number;
    alerts: number;
    complianceScore: number;
    lastIncident?: Date;
  };
  performance: {
    avgExecutionTime: number;
    systemUptime: number;
    errorRate: number;
    throughput: number;
  };
  costs: {
    monthlySpend: number;
    growth: number;
    costPerExecution: number;
  };
}

interface ActivityEvent {
  id: string;
  type: 'user_login' | 'workflow_execution' | 'security_alert' | 'system_event';
  title: string;
  description: string;
  timestamp: Date;
  severity: 'low' | 'medium' | 'high' | 'critical';
  user?: string;
  organization?: string;
}

export const EnterpriseDashboard: React.FC = () =&gt; {
  const [metrics, setMetrics] = useState&lt;DashboardMetrics | null&gt;(null);
  const [activities, setActivities] = useState&lt;ActivityEvent[]&gt;([]);
  const [loading, setLoading] = useState(true);
  const [dateRange, setDateRange] = useState&lt;[any, any] | null&gt;(null);
  const [selectedOrganization, setSelectedOrganization] = useState&lt;string&gt;('all');

  const { organizations, canManageOrganization } = useRBACStore();

  useEffect(() =&gt; {
    loadDashboardData();
  }, [loadDashboardData]);

  const loadDashboardData = async () =&gt; {
    setLoading(true);
    try {
      // Simulate API calls - in real app these would be actual API endpoints
      const mockMetrics: DashboardMetrics = {
        organizations: {
          total: 25,
          active: 22,
          growth: 8.5,
        },
        users: {
          total: 1247,
          active: 892,
          newThisMonth: 156,
          growth: 12.3,
        },
        workflows: {
          total: 5432,
          active: 3891,
          executions: 125678,
          successRate: 94.7,
        },
        security: {
          threats: 3,
          alerts: 12,
          complianceScore: 92,
          lastIncident: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
        },
        performance: {
          avgExecutionTime: 2.3,
          systemUptime: 99.97,
          errorRate: 0.8,
          throughput: 1250,
        },
        costs: {
          monthlySpend: 45678,
          growth: -5.2,
          costPerExecution: 0.036,
        },
      };

      const mockActivities: ActivityEvent[] = [
        {
          id: '1',
          type: 'security_alert',
          title: 'Multiple Failed Login Attempts',
          description: 'User john.doe@acme.com has 5 failed login attempts',
          timestamp: new Date(Date.now() - 30 * 60 * 1000),
          severity: 'high',
          user: 'john.doe@acme.com',
          organization: 'Acme Corp',
        },
        {
          id: '2',
          type: 'workflow_execution',
          title: 'High Volume Data Pipeline Completed',
          description: 'Successfully processed 50,000 records in 4.2 minutes',
          timestamp: new Date(Date.now() - 45 * 60 * 1000),
          severity: 'low',
          user: 'sarah.chen@techcorp.com',
          organization: 'TechCorp',
        },
        {
          id: '3',
          type: 'user_login',
          title: 'Admin Login from New Location',
          description: 'Administrator logged in from Tokyo, Japan',
          timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),
          severity: 'medium',
          user: 'admin@enterprise.com',
          organization: 'Enterprise Ltd',
        },
        {
          id: '4',
          type: 'system_event',
          title: 'System Maintenance Completed',
          description: 'Scheduled maintenance window completed successfully',
          timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000),
          severity: 'low',
        },
      ];

      setMetrics(mockMetrics);
      setActivities(mockActivities);
    } catch (_error) {
    } finally {
      setLoading(false);
    }
  };

  const getActivityIcon = (type: ActivityEvent['type']) =&gt; {
    switch (type) {
      case 'security_alert':
        return &lt;SecurityScanOutlined /&gt;;
      case 'workflow_execution':
        return &lt;ThunderboltOutlined /&gt;;
      case 'user_login':
        return &lt;UserOutlined /&gt;;
      case 'system_event':
        return &lt;DatabaseOutlined /&gt;;
      default:
        return &lt;ClockCircleOutlined /&gt;;
    }
  };

  const getSeverityColor = (severity: string) =&gt; {
    switch (severity) {
      case 'critical':
        return '#ff4d4f';
      case 'high':
        return '#fa8c16';
      case 'medium':
        return '#fadb14';
      case 'low':
        return '#52c41a';
      default:
        return '#d9d9d9';
    }
  };

  // Chart data
  const executionTrendData = [
    { date: '2024-01', executions: 8500 },
    { date: '2024-02', executions: 9200 },
    { date: '2024-03', executions: 8800 },
    { date: '2024-04', executions: 10500 },
    { date: '2024-05', executions: 11200 },
    { date: '2024-06', executions: 12800 },
  ];

  const userGrowthData = [
    { month: 'Jan', active: 750, total: 1100 },
    { month: 'Feb', active: 820, total: 1150 },
    { month: 'Mar', active: 780, total: 1180 },
    { month: 'Apr', active: 890, total: 1220 },
    { month: 'May', active: 850, total: 1250 },
    { month: 'Jun', active: 892, total: 1247 },
  ];

  const workflowCategoriesData = [
    { type: 'Data Processing', value: 35 },
    { type: 'Email Automation', value: 25 },
    { type: 'AI/ML Workflows', value: 20 },
    { type: 'Integration', value: 12 },
    { type: 'Other', value: 8 },
  ];

  const performanceData = [
    { time: '00:00', cpu: 45, memory: 62, throughput: 1200 },
    { time: '04:00', cpu: 32, memory: 58, throughput: 800 },
    { time: '08:00', cpu: 78, memory: 75, throughput: 2100 },
    { time: '12:00', cpu: 85, memory: 82, throughput: 2500 },
    { time: '16:00', cpu: 92, memory: 88, throughput: 2800 },
    { time: '20:00', cpu: 67, memory: 71, throughput: 1900 },
  ];

  const topUsersData = [
    {
      name: 'Sarah Chen',
      organization: 'TechCorp',
      executions: 1250,
      successRate: 98.5,
    },
    {
      name: 'Mike Johnson',
      organization: 'DataFlow Inc',
      executions: 980,
      successRate: 96.2,
    },
    {
      name: 'Lisa Wang',
      organization: 'AutoSys',
      executions: 875,
      successRate: 99.1,
    },
    {
      name: 'John Smith',
      organization: 'ProcessPro',
      executions: 820,
      successRate: 94.8,
    },
    {
      name: 'Emma Davis',
      organization: 'FlowTech',
      executions: 765,
      successRate: 97.3,
    },
  ];

  const topOrganizationsData = [
    {
      name: 'TechCorp',
      users: 89,
      workflows: 342,
      executions: 15680,
      growth: 15.2,
    },
    {
      name: 'DataFlow Inc',
      users: 67,
      workflows: 298,
      executions: 12450,
      growth: 8.7,
    },
    {
      name: 'AutoSys',
      users: 54,
      workflows: 234,
      executions: 9870,
      growth: 22.1,
    },
    {
      name: 'ProcessPro',
      users: 43,
      workflows: 187,
      executions: 7890,
      growth: -2.4,
    },
    {
      name: 'FlowTech',
      users: 38,
      workflows: 156,
      executions: 6540,
      growth: 11.8,
    },
  ];

  const tabs = [
    {
      key: 'overview',
      label: (
        &lt;span&gt;
          &lt;DashboardOutlined /&gt;
          Overview
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          {/* Key Metrics */}
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Total Organizations&quot;
                  value={metrics?.organizations.total}
                  prefix={&lt;TeamOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.organizations.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Users&quot;
                  value={metrics?.users.active}
                  prefix={&lt;UserOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px', color: '#52c41a' }}&gt;
                      &lt;RiseOutlined /&gt; {metrics?.users.growth}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Workflow Executions&quot;
                  value={metrics?.workflows.executions}
                  prefix={&lt;ThunderboltOutlined /&gt;}
                  suffix={
                    &lt;span style={{ fontSize: '14px' }}&gt;
                      {metrics?.workflows.successRate}% success
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;System Uptime&quot;
                  value={metrics?.performance.systemUptime}
                  precision={2}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{ color: '#52c41a' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {/* Charts */}
          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;Execution Trends&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Line
                  data={executionTrendData}
                  xField=&quot;date&quot;
                  yField=&quot;executions&quot;
                  height={300}
                  smooth
                  point={{ size: 5, shape: 'circle' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={12}&gt;
              &lt;Card
                title=&quot;User Growth&quot;
                extra={
                  &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                    Export
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Column
                  data={userGrowthData}
                  xField=&quot;month&quot;
                  yField=&quot;total&quot;
                  height={300}
                  columnStyle={{ fill: '#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'performance',
      label: (
        &lt;span&gt;
          &lt;RiseOutlined /&gt;
          Performance
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Avg Execution Time&quot;
                  value={metrics?.performance.avgExecutionTime}
                  precision={1}
                  suffix=&quot;s&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Error Rate&quot;
                  value={metrics?.performance.errorRate ?? 0}
                  precision={1}
                  suffix=&quot;%&quot;
                  prefix={&lt;BugOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.performance.errorRate ?? 0) &gt; 2 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Throughput&quot;
                  value={metrics?.performance.throughput}
                  suffix=&quot;/hour&quot;
                  prefix={&lt;ApiOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Monthly Spend&quot;
                  value={metrics?.costs.monthlySpend}
                  prefix=&quot;$&quot;
                  suffix={
                    &lt;span
                      style={{
                        fontSize: '14px',
                        color: (metrics?.costs.growth ?? 0) &lt; 0 ? '#52c41a' : '#cf1322',
                      }}
                    &gt;
                      {(metrics?.costs.growth ?? 0) &lt; 0 ? &lt;FallOutlined /&gt; : &lt;RiseOutlined /&gt;}{' '}
                      {Math.abs(metrics?.costs.growth ?? 0)}%
                    &lt;/span&gt;
                  }
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Row gutter={[16, 16]}&gt;
            &lt;Col span={16}&gt;
              &lt;Card
                title=&quot;System Performance (24h)&quot;
                extra={
                  &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                    Refresh
                  &lt;/Button&gt;
                }
              &gt;
                &lt;Area
                  data={performanceData}
                  xField=&quot;time&quot;
                  yField=&quot;cpu&quot;
                  height={300}
                  // @ts-expect-error Area config shape may differ by version
                  areaStyle={{ fill: 'l(270) 0:#ffffff 0.5:#7ec2f3 1:#1890ff' }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={8}&gt;
              &lt;Card title=&quot;Workflow Categories&quot;&gt;
                &lt;Pie
                  data={workflowCategoriesData}
                  angleField=&quot;value&quot;
                  colorField=&quot;type&quot;
                  height={300}
                  radius={0.8}
                  label={{
                    type: 'spider',
                    content: '{name}\n{percentage}',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'security',
      label: (
        &lt;span&gt;
          &lt;SecurityScanOutlined /&gt;
          Security
          {metrics?.security &amp;&amp; metrics.security.alerts &gt; 0 &amp;&amp; (
            &lt;Badge count={metrics.security.alerts} style={{ marginLeft: 8 }} /&gt;
          )}
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Row gutter={[16, 16]} style={{ marginBottom: 24 }}&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Active Threats&quot;
                  value={metrics?.security.threats ?? 0}
                  prefix={&lt;WarningOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.threats ?? 0) &gt; 0 ? '#cf1322' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Security Alerts&quot;
                  value={metrics?.security.alerts ?? 0}
                  prefix={&lt;SecurityScanOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security.alerts ?? 0) &gt; 5 ? '#fa8c16' : '#52c41a',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Compliance Score&quot;
                  value={metrics?.security.complianceScore ?? 0}
                  suffix=&quot;%&quot;
                  prefix={&lt;CheckCircleOutlined /&gt;}
                  valueStyle={{
                    color: (metrics?.security?.complianceScore ?? 0) &gt;= 90 ? '#52c41a' : '#fa8c16',
                  }}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
            &lt;Col span={6}&gt;
              &lt;Card&gt;
                &lt;Statistic
                  title=&quot;Last Incident&quot;
                  value={
                    metrics?.security.lastIncident
                      ? Math.floor(
                          (Date.now() - metrics.security.lastIncident.getTime()) /
                            (24 * 60 * 60 * 1000)
                        )
                      : 0
                  }
                  suffix=&quot; days ago&quot;
                  prefix={&lt;ClockCircleOutlined /&gt;}
                /&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;

          {(metrics?.security.alerts ?? 0) &gt; 0 &amp;&amp; (
            &lt;Alert
              message=&quot;Security Alerts Require Attention&quot;
              description={`There are ${metrics?.security.alerts ?? 0} active security alerts that need investigation.`}
              type=&quot;warning&quot;
              showIcon
              style={{ marginBottom: 24 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;primary&quot;&gt;
                  View All Alerts
                &lt;/Button&gt;
              }
            /&gt;
          )}

          &lt;Card title=&quot;Security Overview&quot;&gt;
            &lt;Row gutter={16}&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Threat Detection&lt;/Text&gt;
                  &lt;Progress percent={85} status=&quot;active&quot; strokeColor=&quot;#52c41a&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Access Control&lt;/Text&gt;
                  &lt;Progress percent={92} status=&quot;active&quot; strokeColor=&quot;#1890ff&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Data Encryption&lt;/Text&gt;
                  &lt;Progress percent={98} status=&quot;active&quot; strokeColor=&quot;#722ed1&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
              &lt;Col span={12}&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Audit Coverage&lt;/Text&gt;
                  &lt;Progress percent={94} status=&quot;active&quot; strokeColor=&quot;#fa8c16&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Vulnerability Management&lt;/Text&gt;
                  &lt;Progress percent={88} status=&quot;active&quot; strokeColor=&quot;#13c2c2&quot; /&gt;
                &lt;/div&gt;
                &lt;div style={{ marginBottom: 16 }}&gt;
                  &lt;Text strong&gt;Incident Response&lt;/Text&gt;
                  &lt;Progress percent={90} status=&quot;active&quot; strokeColor=&quot;#eb2f96&quot; /&gt;
                &lt;/div&gt;
              &lt;/Col&gt;
            &lt;/Row&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'organizations',
      label: (
        &lt;span&gt;
          &lt;TeamOutlined /&gt;
          Organizations
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Top Organizations&quot;
            extra={
              &lt;Space&gt;
                &lt;Button icon={&lt;ExportOutlined /&gt;} size=&quot;small&quot;&gt;
                  Export
                &lt;/Button&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Table
              dataSource={topOrganizationsData}
              pagination={false}
              columns={[
                {
                  title: 'Organization',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; style={{ backgroundColor: '#1890ff', marginRight: 8 }}&gt;
                        {name.charAt(0)}
                      &lt;/Avatar&gt;
                      &lt;Text strong&gt;{name}&lt;/Text&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Users',
                  dataIndex: 'users',
                  key: 'users',
                  render: (users: number) =&gt; &lt;Statistic value={users} /&gt;,
                },
                {
                  title: 'Workflows',
                  dataIndex: 'workflows',
                  key: 'workflows',
                  render: (workflows: number) =&gt; &lt;Statistic value={workflows} /&gt;,
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Growth',
                  dataIndex: 'growth',
                  key: 'growth',
                  render: (growth: number) =&gt; (
                    &lt;span style={{ color: growth &gt;= 0 ? '#52c41a' : '#cf1322' }}&gt;
                      {growth &gt;= 0 ? &lt;RiseOutlined /&gt; : &lt;FallOutlined /&gt;} {Math.abs(growth)}%
                    &lt;/span&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;

          &lt;Card title=&quot;Top Users&quot; style={{ marginTop: 16 }}&gt;
            &lt;Table
              dataSource={topUsersData}
              pagination={false}
              columns={[
                {
                  title: 'User',
                  dataIndex: 'name',
                  key: 'name',
                  render: (name: string, record: any) =&gt; (
                    &lt;div&gt;
                      &lt;Avatar size=&quot;small&quot; icon={&lt;UserOutlined /&gt;} style={{ marginRight: 8 }} /&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;{name}&lt;/Text&gt;
                        &lt;br /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;{record.organization}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  ),
                },
                {
                  title: 'Executions',
                  dataIndex: 'executions',
                  key: 'executions',
                  render: (executions: number) =&gt; &lt;Statistic value={executions} /&gt;,
                },
                {
                  title: 'Success Rate',
                  dataIndex: 'successRate',
                  key: 'successRate',
                  render: (rate: number) =&gt; (
                    &lt;Progress
                      percent={rate}
                      size=&quot;small&quot;
                      status={rate &gt;= 95 ? 'success' : rate &gt;= 90 ? 'normal' : 'exception'}
                    /&gt;
                  ),
                },
              ]}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'activity',
      label: (
        &lt;span&gt;
          &lt;ClockCircleOutlined /&gt;
          Activity
        &lt;/span&gt;
      ),
      children: (
        &lt;div&gt;
          &lt;Card
            title=&quot;Recent Activity&quot;
            extra={
              &lt;Space&gt;
                &lt;Select defaultValue=&quot;all&quot; style={{ width: 120 }}&gt;
                  &lt;Option value=&quot;all&quot;&gt;All Events&lt;/Option&gt;
                  &lt;Option value=&quot;security&quot;&gt;Security&lt;/Option&gt;
                  &lt;Option value=&quot;workflow&quot;&gt;Workflows&lt;/Option&gt;
                  &lt;Option value=&quot;user&quot;&gt;Users&lt;/Option&gt;
                &lt;/Select&gt;
                &lt;Button icon={&lt;ReloadOutlined /&gt;} size=&quot;small&quot;&gt;
                  Refresh
                &lt;/Button&gt;
              &lt;/Space&gt;
            }
          &gt;
            &lt;Timeline&gt;
              {activities.map((activity) =&gt; (
                &lt;Timeline.Item
                  key={activity.id}
                  dot={
                    &lt;Avatar
                      size=&quot;small&quot;
                      style={{
                        backgroundColor: getSeverityColor(activity.severity),
                      }}
                      icon={getActivityIcon(activity.type)}
                    /&gt;
                  }
                &gt;
                  &lt;div&gt;
                    &lt;div
                      style={{
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                      }}
                    &gt;
                      &lt;Text strong&gt;{activity.title}&lt;/Text&gt;
                      &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                        {activity.timestamp.toLocaleTimeString()}
                      &lt;/Text&gt;
                    &lt;/div&gt;
                    &lt;div style={{ marginTop: 4 }}&gt;
                      &lt;Text&gt;{activity.description}&lt;/Text&gt;
                    &lt;/div&gt;
                    {(activity.user || activity.organization) &amp;&amp; (
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {activity.user &amp;&amp; (
                          &lt;Tag icon={&lt;UserOutlined /&gt;} color=&quot;blue&quot;&gt;
                            {activity.user}
                          &lt;/Tag&gt;
                        )}
                        {activity.organization &amp;&amp; (
                          &lt;Tag icon={&lt;TeamOutlined /&gt;} color=&quot;green&quot;&gt;
                            {activity.organization}
                          &lt;/Tag&gt;
                        )}
                        &lt;Tag color={getSeverityColor(activity.severity)}&gt;{activity.severity}&lt;/Tag&gt;
                      &lt;/div&gt;
                    )}
                  &lt;/div&gt;
                &lt;/Timeline.Item&gt;
              ))}
            &lt;/Timeline&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  if (!metrics) {
    return &lt;div&gt;Loading...&lt;/div&gt;;
  }

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
          }}
        &gt;
          &lt;div&gt;
            &lt;Title level={2}&gt;
              &lt;DashboardOutlined /&gt; Enterprise Dashboard
            &lt;/Title&gt;
            &lt;Text type=&quot;secondary&quot;&gt;
              Comprehensive overview of your organization's automation platform
            &lt;/Text&gt;
          &lt;/div&gt;
          &lt;Space&gt;
            &lt;RangePicker value={dateRange} onChange={setDateRange} style={{ width: 300 }} /&gt;
            {canManageOrganization() &amp;&amp; (
              &lt;Select
                value={selectedOrganization}
                onChange={setSelectedOrganization}
                style={{ width: 200 }}
              &gt;
                &lt;Option value=&quot;all&quot;&gt;All Organizations&lt;/Option&gt;
                {organizations.map((org) =&gt; (
                  &lt;Option key={org.id} value={org.id}&gt;
                    {org.name}
                  &lt;/Option&gt;
                ))}
              &lt;/Select&gt;
            )}
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadDashboardData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
          &lt;/Space&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;Tabs items={tabs} /&gt;
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/AuditDashboard.tsx (Line 1:1 - Line 42:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/auditdashboard/AuditDashboard.tsx (Line 1:1 - Line 41:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn150" onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn150" onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup150"><code class="language-tsx text-sm text-gray-800">import {
  AlertOutlined,
  AuditOutlined,
  CheckCircleOutlined,
  DownloadOutlined,
  ExportOutlined,
  EyeOutlined,
  FilterOutlined,
  GlobalOutlined,
  ReloadOutlined,
  SecurityScanOutlined,
  UserOutlined,
  WarningOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Button,
  Card,
  Col,
  DatePicker,
  Descriptions,
  Input,
  Modal,
  Row,
  Select,
  Space,
  Statistic,
  Table,
  Tag,
  Typography,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  type AuditEvent,
  type AuditFilter,
  auditService,
  type ComplianceReport,
  type SecurityAlert,
} from '@/core/services/auditService';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/AuditDashboard.tsx (Line 40:31 - Line 703:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AuditDashboard/auditdashboard/AuditDashboard.tsx (Line 42:19 - Line 705:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn151" onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn151" onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup151"><code class="language-tsx text-sm text-gray-800">;

const { RangePicker } = DatePicker;
const { Option } = Select;
const { Search } = Input;
const { Title, Text } = Typography;

export const AuditDashboard: React.FC = () =&gt; {
  const [events, setEvents] = useState&lt;AuditEvent[]&gt;([]);
  const [filteredEvents, setFilteredEvents] = useState&lt;AuditEvent[]&gt;([]);
  const [securityAlerts, setSecurityAlerts] = useState&lt;SecurityAlert[]&gt;([]);
  const [complianceReports, setComplianceReports] = useState&lt;ComplianceReport[]&gt;([]);
  const [loading, setLoading] = useState(false);
  const [selectedEvent, setSelectedEvent] = useState&lt;AuditEvent | null&gt;(null);
  const [filter, setFilter] = useState&lt;AuditFilter&gt;({});
  const [exportModalVisible, setExportModalVisible] = useState(false);

  // Filter states
  const [dateRange, setDateRange] = useState&lt;[any, any] | null&gt;(null);
  const [selectedUser, setSelectedUser] = useState&lt;string&gt;();
  const [selectedAction, setSelectedAction] = useState&lt;string&gt;();
  const [selectedResource, setSelectedResource] = useState&lt;string&gt;();
  const [selectedSeverity, setSelectedSeverity] = useState&lt;string&gt;();
  const [selectedCategory, setSelectedCategory] = useState&lt;string&gt;();
  const [searchTerm, setSearchTerm] = useState&lt;string&gt;('');

  useEffect(() =&gt; {
    loadAuditData();
  }, [loadAuditData]);

  useEffect(() =&gt; {
    applyFilters();
  }, [applyFilters]);

  const loadAuditData = async () =&gt; {
    setLoading(true);
    try {
      // In a real app, these would be API calls
      const mockEvents: AuditEvent[] = [
        {
          id: '1',
          timestamp: new Date(Date.now() - 3600000),
          userId: 'user1',
          userName: 'John Doe',
          action: 'login',
          resource: 'authentication',
          details: { success: true },
          ipAddress: '192.168.1.100',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'low',
          category: 'authentication',
          result: 'success',
        },
        {
          id: '2',
          timestamp: new Date(Date.now() - 7200000),
          userId: 'user2',
          userName: 'Jane Smith',
          action: 'execute',
          resource: 'workflow',
          resourceId: 'wf123',
          details: { workflowName: 'Data Pipeline', executionId: 'exec456' },
          ipAddress: '192.168.1.101',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'medium',
          category: 'workflow',
          result: 'success',
        },
        {
          id: '3',
          timestamp: new Date(Date.now() - 10800000),
          userId: 'user3',
          userName: 'Bob Wilson',
          action: 'delete',
          resource: 'workflow',
          resourceId: 'wf789',
          details: { workflowName: 'Legacy Process' },
          ipAddress: '192.168.1.102',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'high',
          category: 'workflow',
          result: 'success',
        },
        {
          id: '4',
          timestamp: new Date(Date.now() - 14400000),
          userId: 'user1',
          userName: 'John Doe',
          action: 'login',
          resource: 'authentication',
          details: { success: false },
          ipAddress: '192.168.1.100',
          userAgent: 'Mozilla/5.0...',
          organizationId: 'org1',
          severity: 'medium',
          category: 'authentication',
          result: 'failure',
        },
      ];

      const mockAlerts: SecurityAlert[] = [
        {
          id: 'alert1',
          type: 'failed_login_attempts',
          severity: 'high',
          title: 'Multiple Failed Login Attempts',
          description: 'User john.doe@example.com has 5 failed login attempts in the last hour',
          triggeredAt: new Date(Date.now() - 1800000),
          userId: 'user1',
          organizationId: 'org1',
          events: [mockEvents[3]],
          status: 'open',
        },
      ];

      setEvents(mockEvents);
      setSecurityAlerts(mockAlerts);
    } catch (_error) {
    } finally {
      setLoading(false);
    }
  };

  const applyFilters = async () =&gt; {
    const newFilter: AuditFilter = {
      ...filter,
      startDate: dateRange?.[0]?.toDate(),
      endDate: dateRange?.[1]?.toDate(),
      userId: selectedUser,
      action: selectedAction,
      resource: selectedResource,
      severity: selectedSeverity as any,
      category: selectedCategory as any,
      searchTerm,
    };

    try {
      const filtered = await auditService.getEvents(newFilter, 1000, 0);
      setFilteredEvents(
        filtered.length &gt; 0
          ? filtered
          : events.filter((event) =&gt; {
              if (newFilter.startDate &amp;&amp; event.timestamp &lt; newFilter.startDate) return false;
              if (newFilter.endDate &amp;&amp; event.timestamp &gt; newFilter.endDate) return false;
              if (newFilter.userId &amp;&amp; event.userId !== newFilter.userId) return false;
              if (newFilter.action &amp;&amp; !event.action.includes(newFilter.action)) return false;
              if (newFilter.resource &amp;&amp; event.resource !== newFilter.resource) return false;
              if (newFilter.severity &amp;&amp; event.severity !== newFilter.severity) return false;
              if (newFilter.category &amp;&amp; event.category !== newFilter.category) return false;
              if (newFilter.searchTerm) {
                const searchLower = newFilter.searchTerm.toLowerCase();
                const matchesSearch =
                  event.action.toLowerCase().includes(searchLower) ||
                  event.resource.toLowerCase().includes(searchLower) ||
                  event.userName.toLowerCase().includes(searchLower) ||
                  JSON.stringify(event.details).toLowerCase().includes(searchLower);
                if (!matchesSearch) return false;
              }
              return true;
            })
      );
    } catch (_error) {
      setFilteredEvents(events);
    }
  };

  const clearFilters = () =&gt; {
    setDateRange(null);
    setSelectedUser(undefined);
    setSelectedAction(undefined);
    setSelectedResource(undefined);
    setSelectedSeverity(undefined);
    setSelectedCategory(undefined);
    setSearchTerm('');
    setFilter({});
  };

  const exportData = async (format: 'json' | 'csv') =&gt; {
    try {
      const startDate = dateRange?.[0]?.toDate() || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
      const endDate = dateRange?.[1]?.toDate() || new Date();

      const data = await auditService.exportAuditData('org1', startDate, endDate, format);

      const blob = new Blob([data], {
        type: format === 'json' ? 'application/json' : 'text/csv',
      });

      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `audit-log-${startDate.toISOString().split('T')[0]}-${endDate.toISOString().split('T')[0]}.${format}`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      setExportModalVisible(false);
    } catch (_error) {}
  };

  const generateComplianceReport = async () =&gt; {
    try {
      const startDate = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000); // Last 30 days
      const endDate = new Date();

      const report = await auditService.generateComplianceReport(
        'org1',
        startDate,
        endDate,
        'current-user'
      );
      setComplianceReports([...complianceReports, report]);

      Modal.info({
        title: 'Compliance Report Generated',
        content: `Report &quot;${report.name}&quot; has been generated successfully. Status: ${report.status}`,
        width: 600,
      });
    } catch (_error) {}
  };

  const getSeverityColor = (severity: string) =&gt; {
    switch (severity) {
      case 'critical':
        return 'red';
      case 'high':
        return 'orange';
      case 'medium':
        return 'gold';
      case 'low':
        return 'green';
      default:
        return 'default';
    }
  };

  const getResultColor = (result: string) =&gt; {
    switch (result) {
      case 'success':
        return 'green';
      case 'failure':
        return 'red';
      case 'error':
        return 'orange';
      default:
        return 'default';
    }
  };

  const columns = [
    {
      title: 'Timestamp',
      dataIndex: 'timestamp',
      key: 'timestamp',
      width: 180,
      render: (timestamp: Date) =&gt; (
        &lt;div&gt;
          &lt;div&gt;{timestamp.toLocaleDateString()}&lt;/div&gt;
          &lt;Text type=&quot;secondary&quot;&gt;{timestamp.toLocaleTimeString()}&lt;/Text&gt;
        &lt;/div&gt;
      ),
      sorter: (a: AuditEvent, b: AuditEvent) =&gt; b.timestamp.getTime() - a.timestamp.getTime(),
      defaultSortOrder: 'descend' as const,
    },
    {
      title: 'User',
      dataIndex: 'userName',
      key: 'userName',
      width: 150,
      render: (userName: string, record: AuditEvent) =&gt; (
        &lt;div&gt;
          &lt;UserOutlined /&gt; {userName}
          &lt;br /&gt;
          &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
            {record.ipAddress}
          &lt;/Text&gt;
        &lt;/div&gt;
      ),
    },
    {
      title: 'Action',
      dataIndex: 'action',
      key: 'action',
      width: 120,
      render: (action: string) =&gt; &lt;Tag color=&quot;blue&quot;&gt;{action}&lt;/Tag&gt;,
    },
    {
      title: 'Resource',
      dataIndex: 'resource',
      key: 'resource',
      width: 120,
      render: (resource: string, record: AuditEvent) =&gt; (
        &lt;div&gt;
          &lt;Tag color=&quot;purple&quot;&gt;{resource}&lt;/Tag&gt;
          {record.resourceId &amp;&amp; (
            &lt;div&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                ID: {record.resourceId}
              &lt;/Text&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      title: 'Result',
      dataIndex: 'result',
      key: 'result',
      width: 100,
      render: (result: string) =&gt; &lt;Tag color={getResultColor(result)}&gt;{result}&lt;/Tag&gt;,
    },
    {
      title: 'Severity',
      dataIndex: 'severity',
      key: 'severity',
      width: 100,
      render: (severity: string) =&gt; &lt;Tag color={getSeverityColor(severity)}&gt;{severity}&lt;/Tag&gt;,
    },
    {
      title: 'Category',
      dataIndex: 'category',
      key: 'category',
      width: 120,
      render: (category: string) =&gt; &lt;Tag&gt;{category}&lt;/Tag&gt;,
    },
    {
      title: 'Actions',
      key: 'actions',
      width: 100,
      render: (_: unknown, record: AuditEvent) =&gt; (
        &lt;Button type=&quot;link&quot; icon={&lt;EyeOutlined /&gt;} onClick={() =&gt; setSelectedEvent(record)}&gt;
          View
        &lt;/Button&gt;
      ),
    },
  ];

  const uniqueUsers = Array.from(new Set(events.map((e) =&gt; e.userName)));
  const uniqueActions = Array.from(new Set(events.map((e) =&gt; e.action)));
  const uniqueResources = Array.from(new Set(events.map((e) =&gt; e.resource)));

  const securityMetrics = {
    totalEvents: filteredEvents.length,
    securityEvents: filteredEvents.filter(
      (e) =&gt;
        e.category === 'authentication' ||
        e.category === 'authorization' ||
        e.severity === 'high' ||
        e.severity === 'critical'
    ).length,
    failedLogins: filteredEvents.filter((e) =&gt; e.action === 'login' &amp;&amp; e.result === 'failure')
      .length,
    criticalEvents: filteredEvents.filter((e) =&gt; e.severity === 'critical').length,
  };

  return (
    &lt;div style={{ padding: '24px' }}&gt;
      &lt;div style={{ marginBottom: 24 }}&gt;
        &lt;Title level={2}&gt;
          &lt;AuditOutlined /&gt; Audit &amp; Security Dashboard
        &lt;/Title&gt;
        &lt;Text type=&quot;secondary&quot;&gt;Monitor security events, audit trails, and compliance status&lt;/Text&gt;
      &lt;/div&gt;

      {/* Security Metrics */}
      &lt;Row gutter={16} style={{ marginBottom: 24 }}&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Total Events&quot;
              value={securityMetrics.totalEvents}
              prefix={&lt;AuditOutlined /&gt;}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Security Events&quot;
              value={securityMetrics.securityEvents}
              prefix={&lt;SecurityScanOutlined /&gt;}
              valueStyle={{ color: '#faad14' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Failed Logins&quot;
              value={securityMetrics.failedLogins}
              prefix={&lt;WarningOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
        &lt;Col span={6}&gt;
          &lt;Card&gt;
            &lt;Statistic
              title=&quot;Critical Events&quot;
              value={securityMetrics.criticalEvents}
              prefix={&lt;AlertOutlined /&gt;}
              valueStyle={{ color: '#cf1322' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;

      {/* Security Alerts */}
      {securityAlerts.length &gt; 0 &amp;&amp; (
        &lt;Card
          title={
            &lt;span&gt;
              &lt;AlertOutlined /&gt; Active Security Alerts
            &lt;/span&gt;
          }
          style={{ marginBottom: 24 }}
        &gt;
          {securityAlerts.map((alert) =&gt; (
            &lt;Alert
              key={alert.id}
              message={alert.title}
              description={alert.description}
              type={
                alert.severity === 'critical'
                  ? 'error'
                  : alert.severity === 'high'
                    ? 'warning'
                    : 'info'
              }
              showIcon
              style={{ marginBottom: 8 }}
              action={
                &lt;Button size=&quot;small&quot; type=&quot;link&quot;&gt;
                  Investigate
                &lt;/Button&gt;
              }
            /&gt;
          ))}
        &lt;/Card&gt;
      )}

      {/* Filters */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;FilterOutlined /&gt; Filters &amp; Search
          &lt;/span&gt;
        }
        style={{ marginBottom: 24 }}
        extra={
          &lt;Space&gt;
            &lt;Button icon={&lt;ReloadOutlined /&gt;} onClick={loadAuditData} loading={loading}&gt;
              Refresh
            &lt;/Button&gt;
            &lt;Button icon={&lt;ExportOutlined /&gt;} onClick={() =&gt; setExportModalVisible(true)}&gt;
              Export
            &lt;/Button&gt;
            &lt;Button icon={&lt;CheckCircleOutlined /&gt;} onClick={generateComplianceReport}&gt;
              Generate Report
            &lt;/Button&gt;
          &lt;/Space&gt;
        }
      &gt;
        &lt;Space wrap style={{ marginBottom: 16 }}&gt;
          &lt;RangePicker
            value={dateRange}
            onChange={setDateRange}
            showTime
            format=&quot;YYYY-MM-DD HH:mm&quot;
            placeholder={['Start Date', 'End Date']}
          /&gt;

          &lt;Select
            placeholder=&quot;Select User&quot;
            value={selectedUser}
            onChange={setSelectedUser}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueUsers.map((user) =&gt; (
              &lt;Option key={user} value={user}&gt;
                {user}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Action&quot;
            value={selectedAction}
            onChange={setSelectedAction}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueActions.map((action) =&gt; (
              &lt;Option key={action} value={action}&gt;
                {action}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Select Resource&quot;
            value={selectedResource}
            onChange={setSelectedResource}
            allowClear
            style={{ width: 150 }}
          &gt;
            {uniqueResources.map((resource) =&gt; (
              &lt;Option key={resource} value={resource}&gt;
                {resource}
              &lt;/Option&gt;
            ))}
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Severity&quot;
            value={selectedSeverity}
            onChange={setSelectedSeverity}
            allowClear
            style={{ width: 120 }}
          &gt;
            &lt;Option value=&quot;low&quot;&gt;Low&lt;/Option&gt;
            &lt;Option value=&quot;medium&quot;&gt;Medium&lt;/Option&gt;
            &lt;Option value=&quot;high&quot;&gt;High&lt;/Option&gt;
            &lt;Option value=&quot;critical&quot;&gt;Critical&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Select
            placeholder=&quot;Category&quot;
            value={selectedCategory}
            onChange={setSelectedCategory}
            allowClear
            style={{ width: 150 }}
          &gt;
            &lt;Option value=&quot;authentication&quot;&gt;Authentication&lt;/Option&gt;
            &lt;Option value=&quot;authorization&quot;&gt;Authorization&lt;/Option&gt;
            &lt;Option value=&quot;workflow&quot;&gt;Workflow&lt;/Option&gt;
            &lt;Option value=&quot;credential&quot;&gt;Credential&lt;/Option&gt;
            &lt;Option value=&quot;organization&quot;&gt;Organization&lt;/Option&gt;
            &lt;Option value=&quot;user_management&quot;&gt;User Management&lt;/Option&gt;
          &lt;/Select&gt;

          &lt;Button onClick={clearFilters}&gt;Clear Filters&lt;/Button&gt;
        &lt;/Space&gt;

        &lt;Search
          placeholder=&quot;Search events...&quot;
          value={searchTerm}
          onChange={(e) =&gt; setSearchTerm(e.target.value)}
          style={{ width: 300 }}
        /&gt;
      &lt;/Card&gt;

      {/* Audit Events Table */}
      &lt;Card
        title={
          &lt;span&gt;
            &lt;AuditOutlined /&gt; Audit Events ({filteredEvents.length})
          &lt;/span&gt;
        }
      &gt;
        &lt;Table
          dataSource={filteredEvents}
          columns={columns}
          rowKey=&quot;id&quot;
          loading={loading}
          pagination={{
            pageSize: 50,
            showSizeChanger: true,
            showQuickJumper: true,
            showTotal: (total, range) =&gt; `${range[0]}-${range[1]} of ${total} events`,
          }}
          scroll={{ x: 1200 }}
        /&gt;
      &lt;/Card&gt;

      {/* Event Details Modal */}
      &lt;Modal
        title=&quot;Event Details&quot;
        open={!!selectedEvent}
        onCancel={() =&gt; setSelectedEvent(null)}
        footer={null}
        width={800}
      &gt;
        {selectedEvent &amp;&amp; (
          &lt;Descriptions column={2} bordered&gt;
            &lt;Descriptions.Item label=&quot;Timestamp&quot;&gt;
              {selectedEvent.timestamp.toLocaleString()}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User&quot;&gt;
              {selectedEvent.userName} ({selectedEvent.userId})
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Action&quot;&gt;
              &lt;Tag color=&quot;blue&quot;&gt;{selectedEvent.action}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Resource&quot;&gt;
              &lt;Tag color=&quot;purple&quot;&gt;{selectedEvent.resource}&lt;/Tag&gt;
              {selectedEvent.resourceId &amp;&amp; ` (${selectedEvent.resourceId})`}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Result&quot;&gt;
              &lt;Tag color={getResultColor(selectedEvent.result)}&gt;{selectedEvent.result}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Severity&quot;&gt;
              &lt;Tag color={getSeverityColor(selectedEvent.severity)}&gt;{selectedEvent.severity}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Category&quot;&gt;
              &lt;Tag&gt;{selectedEvent.category}&lt;/Tag&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;IP Address&quot;&gt;
              &lt;GlobalOutlined /&gt; {selectedEvent.ipAddress}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Organization&quot; span={2}&gt;
              {selectedEvent.organizationId || 'N/A'}
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;Details&quot; span={2}&gt;
              &lt;pre
                style={{
                  fontSize: '12px',
                  background: '#f5f5f5',
                  padding: '8px',
                  borderRadius: '4px',
                }}
              &gt;
                {JSON.stringify(selectedEvent.details, null, 2)}
              &lt;/pre&gt;
            &lt;/Descriptions.Item&gt;
            &lt;Descriptions.Item label=&quot;User Agent&quot; span={2}&gt;
              &lt;Text type=&quot;secondary&quot; style={{ fontSize: '12px' }}&gt;
                {selectedEvent.userAgent}
              &lt;/Text&gt;
            &lt;/Descriptions.Item&gt;
          &lt;/Descriptions&gt;
        )}
      &lt;/Modal&gt;

      {/* Export Modal */}
      &lt;Modal
        title=&quot;Export Audit Data&quot;
        open={exportModalVisible}
        onCancel={() =&gt; setExportModalVisible(false)}
        footer={null}
      &gt;
        &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
          &lt;Text&gt;Select export format:&lt;/Text&gt;
          &lt;Space&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('json')} type=&quot;primary&quot;&gt;
              Export as JSON
            &lt;/Button&gt;
            &lt;Button icon={&lt;DownloadOutlined /&gt;} onClick={() =&gt; exportData('csv')}&gt;
              Export as CSV
            &lt;/Button&gt;
          &lt;/Space&gt;
          &lt;Text type=&quot;secondary&quot;&gt;
            Export will include all events within the selected date range.
          &lt;/Text&gt;
        &lt;/Space&gt;
      &lt;/Modal&gt;
    &lt;/div&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/AIWorkflowStudio.tsx (Line 1:1 - Line 51:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/aiworkflowstudio/AIWorkflowStudio.tsx (Line 1:1 - Line 50:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn153" onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn153" onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup153"><code class="language-tsx text-sm text-gray-800">import {
  AudioOutlined,
  BarChartOutlined,
  CloudUploadOutlined,
  CodeOutlined,
  ExperimentOutlined,
  EyeOutlined,
  FileImageOutlined,
  FileTextOutlined,
  PlayCircleOutlined,
  RobotOutlined,
  SettingOutlined,
  SoundOutlined,
  ThunderboltOutlined,
  VideoCameraOutlined,
} from '@ant-design/icons';
import {
  Alert,
  Badge,
  Button,
  Card,
  Col,
  Divider,
  Input,
  InputNumber,
  Modal,
  message,
  Progress,
  Row,
  Select,
  Slider,
  Space,
  Statistic,
  Table,
  Tabs,
  Tag,
  Timeline,
  Typography,
  Upload,
} from 'antd';
import type React from 'react';
import { useEffect, useState } from 'react';
import {
  type AIModel,
  type AINodeConfig,
  type AIWorkflowExecution,
  aiOrchestrationService,
  type MultiModalWorkflow,
} from '@/core/services/aiOrchestrationService';

const</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/AIWorkflowStudio.tsx (Line 49:41 - Line 759:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/AIWorkflowStudio/aiworkflowstudio/AIWorkflowStudio.tsx (Line 51:19 - Line 761:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn154" onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn154" onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup154"><code class="language-tsx text-sm text-gray-800">;

const { Title, Text, Paragraph } = Typography;
const { TextArea } = Input;
const { Option } = Select;
const { Dragger } = Upload;

interface AIWorkflowStudioProps {
  visible: boolean;
  onClose: () =&gt; void;
}

export const AIWorkflowStudio: React.FC&lt;AIWorkflowStudioProps&gt; = ({ visible, onClose }) =&gt; {
  const [availableModels, setAvailableModels] = useState&lt;AIModel[]&gt;([]);
  const [selectedModel, setSelectedModel] = useState&lt;string&gt;('');
  const [nodeConfig, setNodeConfig] = useState&lt;Partial&lt;AINodeConfig&gt;&gt;({
    prompt: '',
    systemPrompt: '',
    temperature: 0.7,
    maxTokens: 1000,
  });
  const [currentExecution, setCurrentExecution] = useState&lt;AIWorkflowExecution | null&gt;(null);
  const [executionHistory, setExecutionHistory] = useState&lt;AIWorkflowExecution[]&gt;([]);
  const [isExecuting, setIsExecuting] = useState(false);
  const [activeTab, setActiveTab] = useState('builder');
  const [uploadedFiles, setUploadedFiles] = useState&lt;any[]&gt;([]);
  const [workflowInputs, setWorkflowInputs] = useState&lt;Record&lt;string, any&gt;&gt;({});

  useEffect(() =&gt; {
    if (visible) {
      loadAvailableModels();
    }
  }, [visible, loadAvailableModels]);

  const loadAvailableModels = () =&gt; {
    const models = aiOrchestrationService.getAvailableModels();
    setAvailableModels(models);
    if (models.length &gt; 0) {
      setSelectedModel(models[0].id);
    }
  };

  const handleExecuteWorkflow = async () =&gt; {
    if (!selectedModel) {
      message.error('Please select an AI model');
      return;
    }

    setIsExecuting(true);
    try {
      // Create a simple workflow for demonstration
      const workflow: Omit&lt;MultiModalWorkflow, 'id'&gt; = {
        name: 'AI Studio Workflow',
        description: 'Interactive AI workflow execution',
        inputTypes: ['text', 'image', 'audio'],
        outputTypes: ['text', 'structured_data'],
        nodes: [
          {
            id: 'main-node',
            type: 'ai_reasoning',
            config: {
              modelId: selectedModel,
              ...nodeConfig,
            } as AINodeConfig,
            dependencies: [],
            outputs: [],
            retryPolicy: {
              maxRetries: 2,
              backoffStrategy: 'exponential',
              retryConditions: ['error', 'low_confidence'],
              fallbackStrategy: 'different_model',
            },
          },
        ],
        edges: [],
        triggers: [{ type: 'manual', config: {}, enabled: true }],
        metadata: {
          version: '1.0.0',
          author: 'AI Studio',
          tags: ['interactive', 'multi-modal'],
          category: 'experimental',
          complexity: 'simple',
          estimatedCost: 0.1,
          estimatedTime: 5000,
          lastUpdated: new Date(),
        },
      };

      const createdWorkflow = await aiOrchestrationService.createMultiModalWorkflow(workflow);
      const execution = await aiOrchestrationService.executeWorkflow(
        createdWorkflow.id,
        workflowInputs
      );

      setCurrentExecution(execution);
      setExecutionHistory((prev: AIWorkflowExecution[]) =&gt; [execution, ...prev]);
      message.success('Workflow executed successfully!');
    } catch (error: any) {
      message.error(`Execution failed: ${error.message}`);
    } finally {
      setIsExecuting(false);
    }
  };

  const handleFileUpload = (file: any) =&gt; {
    const reader = new FileReader();
    reader.onload = (e) =&gt; {
      const fileData = {
        name: file.name,
        type: file.type,
        size: file.size,
        content: e.target?.result,
        timestamp: new Date(),
      };
      setUploadedFiles((prev: any[]) =&gt; [...prev, fileData]);
      setWorkflowInputs((prev: Record&lt;string, any&gt;) =&gt; ({
        ...prev,
        files: [...(prev.files || []), fileData],
      }));
    };

    if (file.type.startsWith('image/')) {
      reader.readAsDataURL(file);
    } else if (file.type.startsWith('audio/')) {
      reader.readAsArrayBuffer(file);
    } else {
      reader.readAsText(file);
    }

    return false; // Prevent auto upload
  };

  const getModelIcon = (model: AIModel) =&gt; {
    switch (model.type) {
      case 'language':
        return &lt;RobotOutlined /&gt;;
      case 'vision':
        return &lt;EyeOutlined /&gt;;
      case 'speech':
        return &lt;AudioOutlined /&gt;;
      case 'code':
        return &lt;CodeOutlined /&gt;;
      case 'multimodal':
        return &lt;ExperimentOutlined /&gt;;
      default:
        return &lt;ThunderboltOutlined /&gt;;
    }
  };

  const getModalityIcon = (modality: string) =&gt; {
    switch (modality) {
      case 'text':
        return &lt;FileTextOutlined /&gt;;
      case 'image':
        return &lt;FileImageOutlined /&gt;;
      case 'audio':
        return &lt;SoundOutlined /&gt;;
      case 'video':
        return &lt;VideoCameraOutlined /&gt;;
      default:
        return &lt;FileTextOutlined /&gt;;
    }
  };

  const executionColumns = [
    {
      title: 'ID',
      dataIndex: 'id',
      key: 'id',
      width: 120,
      render: (id: string) =&gt; &lt;Text code&gt;{id.slice(-8)}&lt;/Text&gt;,
    },
    {
      title: 'Status',
      dataIndex: 'status',
      key: 'status',
      width: 100,
      render: (status: string) =&gt; {
        const color = status === 'completed' ? 'green' : status === 'failed' ? 'red' : 'blue';
        return &lt;Tag color={color}&gt;{status}&lt;/Tag&gt;;
      },
    },
    {
      title: 'Quality',
      dataIndex: 'qualityScore',
      key: 'qualityScore',
      width: 100,
      render: (score: number) =&gt; (
        &lt;Progress
          percent={Math.round(score * 100)}
          size=&quot;small&quot;
          status={score &gt;= 0.8 ? 'success' : score &gt;= 0.6 ? 'normal' : 'exception'}
        /&gt;
      ),
    },
    {
      title: 'Cost',
      dataIndex: 'totalCost',
      key: 'totalCost',
      width: 80,
      render: (cost: number) =&gt; &lt;Text&gt;${cost.toFixed(4)}&lt;/Text&gt;,
    },
    {
      title: 'Duration',
      key: 'duration',
      width: 100,
      render: (_: unknown, record: AIWorkflowExecution) =&gt; {
        if (!record.endTime) return '-';
        const duration = record.endTime.getTime() - record.startTime.getTime();
        return &lt;Text&gt;{(duration / 1000).toFixed(1)}s&lt;/Text&gt;;
      },
    },
  ];

  const tabs = [
    {
      key: 'builder',
      label: (
        &lt;span&gt;
          &lt;SettingOutlined /&gt;
          AI Builder
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Row gutter={[24, 24]}&gt;
            &lt;Col span={12}&gt;
              &lt;Card title=&quot;AI Model Configuration&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Select AI Model&lt;/Text&gt;
                    &lt;Select
                      value={selectedModel}
                      onChange={setSelectedModel}
                      style={{ width: '100%', marginTop: 8 }}
                      placeholder=&quot;Choose an AI model&quot;
                    &gt;
                      {availableModels.map((model) =&gt; (
                        &lt;Option key={model.id} value={model.id}&gt;
                          &lt;div
                            style={{
                              display: 'flex',
                              alignItems: 'center',
                              justifyContent: 'space-between',
                            }}
                          &gt;
                            &lt;span&gt;
                              {getModelIcon(model)} {model.name}
                            &lt;/span&gt;
                            &lt;div&gt;
                              &lt;Tag&gt;{model.provider}&lt;/Tag&gt;
                              &lt;Tag color=&quot;blue&quot;&gt;${model.costPer1kTokens}/1k&lt;/Tag&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/Option&gt;
                      ))}
                    &lt;/Select&gt;
                  &lt;/div&gt;

                  {selectedModel &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      return (
                        &lt;div&gt;
                          &lt;Divider style={{ margin: '16px 0' }} /&gt;
                          &lt;div style={{ marginBottom: 16 }}&gt;
                            &lt;Text strong&gt;Model Details&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              &lt;div&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Type:&lt;/Text&gt; &lt;Tag&gt;{model.type}&lt;/Tag&gt;
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Input:&lt;/Text&gt;
                                {model.inputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Output:&lt;/Text&gt;
                                {model.outputModalities.map((modality) =&gt; (
                                  &lt;Tag
                                    key={modality}
                                    icon={getModalityIcon(modality)}
                                    style={{ marginLeft: 4 }}
                                  &gt;
                                    {modality}
                                  &lt;/Tag&gt;
                                ))}
                              &lt;/div&gt;
                              &lt;div style={{ marginTop: 4 }}&gt;
                                &lt;Text type=&quot;secondary&quot;&gt;Context Window:&lt;/Text&gt;{' '}
                                &lt;Text&gt;{model.contextWindow.toLocaleString()} tokens&lt;/Text&gt;
                              &lt;/div&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;

                          &lt;div&gt;
                            &lt;Text strong&gt;Capabilities&lt;/Text&gt;
                            &lt;div style={{ marginTop: 8 }}&gt;
                              {model.capabilities.map((cap) =&gt; (
                                &lt;Tag key={cap.name} color=&quot;purple&quot;&gt;
                                  {cap.name} ({cap.proficiency}/5)
                                &lt;/Tag&gt;
                              ))}
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;
                      );
                    })()}

                  &lt;Divider /&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;Main Prompt&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.prompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          prompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter your main prompt here...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;System Prompt (Optional)&lt;/Text&gt;
                    &lt;TextArea
                      value={nodeConfig.systemPrompt}
                      onChange={(e) =&gt;
                        setNodeConfig((prev) =&gt; ({
                          ...prev,
                          systemPrompt: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter system instructions...&quot;
                      rows={3}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;Row gutter={16}&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Temperature&lt;/Text&gt;
                        &lt;Slider
                          min={0}
                          max={2}
                          step={0.1}
                          value={nodeConfig.temperature}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              temperature: value,
                            }))
                          }
                          style={{ marginTop: 8 }}
                        /&gt;
                        &lt;Text type=&quot;secondary&quot;&gt;Current: {nodeConfig.temperature}&lt;/Text&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                    &lt;Col span={12}&gt;
                      &lt;div&gt;
                        &lt;Text strong&gt;Max Tokens&lt;/Text&gt;
                        &lt;InputNumber
                          min={1}
                          max={
                            selectedModel
                              ? availableModels.find((m) =&gt; m.id === selectedModel)?.maxTokens
                              : 4096
                          }
                          value={nodeConfig.maxTokens}
                          onChange={(value) =&gt;
                            setNodeConfig((prev) =&gt; ({
                              ...prev,
                              maxTokens: value || 1000,
                            }))
                          }
                          style={{ width: '100%', marginTop: 8 }}
                        /&gt;
                      &lt;/div&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;

            &lt;Col span={12}&gt;
              &lt;Card title=&quot;Multi-Modal Inputs&quot; size=&quot;small&quot;&gt;
                &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                  &lt;div&gt;
                    &lt;Text strong&gt;Text Input&lt;/Text&gt;
                    &lt;TextArea
                      value={workflowInputs.text || ''}
                      onChange={(e) =&gt;
                        setWorkflowInputs((prev) =&gt; ({
                          ...prev,
                          text: e.target.value,
                        }))
                      }
                      placeholder=&quot;Enter text input for the AI model...&quot;
                      rows={4}
                      style={{ marginTop: 8 }}
                    /&gt;
                  &lt;/div&gt;

                  &lt;div&gt;
                    &lt;Text strong&gt;File Uploads&lt;/Text&gt;
                    &lt;Dragger
                      multiple
                      beforeUpload={handleFileUpload}
                      showUploadList={false}
                      style={{ marginTop: 8 }}
                    &gt;
                      &lt;p className=&quot;ant-upload-drag-icon&quot;&gt;
                        &lt;CloudUploadOutlined /&gt;
                      &lt;/p&gt;
                      &lt;p className=&quot;ant-upload-text&quot;&gt;Click or drag files to upload&lt;/p&gt;
                      &lt;p className=&quot;ant-upload-hint&quot;&gt;
                        Support for images, audio, video, and documents
                      &lt;/p&gt;
                    &lt;/Dragger&gt;
                  &lt;/div&gt;

                  {uploadedFiles.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      &lt;Text strong&gt;Uploaded Files&lt;/Text&gt;
                      &lt;div style={{ marginTop: 8 }}&gt;
                        {uploadedFiles.map((file, index) =&gt; (
                          &lt;Tag
                            key={index}
                            icon={getModalityIcon(file.type.split('/')[0])}
                            style={{ marginBottom: 4, marginRight: 4 }}
                          &gt;
                            {file.name}
                          &lt;/Tag&gt;
                        ))}
                      &lt;/div&gt;
                    &lt;/div&gt;
                  )}

                  &lt;Divider /&gt;

                  &lt;Button
                    type=&quot;primary&quot;
                    size=&quot;large&quot;
                    onClick={handleExecuteWorkflow}
                    loading={isExecuting}
                    disabled={!selectedModel || !nodeConfig.prompt}
                    icon={&lt;PlayCircleOutlined /&gt;}
                    style={{ width: '100%' }}
                  &gt;
                    {isExecuting ? 'Executing...' : 'Execute AI Workflow'}
                  &lt;/Button&gt;

                  {selectedModel &amp;&amp;
                    nodeConfig.prompt &amp;&amp;
                    (() =&gt; {
                      const model = availableModels.find((m) =&gt; m.id === selectedModel);
                      if (!model) return null;

                      const estimatedTokens = Math.ceil((nodeConfig.prompt?.length || 0) / 4);
                      const estimatedCost = (estimatedTokens / 1000) * model.costPer1kTokens;

                      return (
                        &lt;Alert
                          message=&quot;Execution Estimate&quot;
                          description={
                            &lt;div&gt;
                              &lt;div&gt;Estimated tokens: ~{estimatedTokens}&lt;/div&gt;
                              &lt;div&gt;Estimated cost: ${estimatedCost.toFixed(4)}&lt;/div&gt;
                            &lt;/div&gt;
                          }
                          type=&quot;info&quot;
                          showIcon
                        /&gt;
                      );
                    })()}
                &lt;/Space&gt;
              &lt;/Card&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/div&gt;
      ),
    },
    {
      key: 'execution',
      label: (
        &lt;span&gt;
          &lt;PlayCircleOutlined /&gt;
          Execution Results
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          {currentExecution ? (
            &lt;Row gutter={[24, 24]}&gt;
              &lt;Col span={24}&gt;
                &lt;Card title={`Execution ${currentExecution.id.slice(-8)}`} size=&quot;small&quot;&gt;
                  &lt;Row gutter={16}&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Status&quot;
                        value={currentExecution.status}
                        valueStyle={{
                          color: currentExecution.status === 'completed' ? '#3f8600' : '#cf1322',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Quality Score&quot;
                        value={Math.round(currentExecution.qualityScore * 100)}
                        suffix=&quot;%&quot;
                        valueStyle={{
                          color: currentExecution.qualityScore &gt;= 0.8 ? '#3f8600' : '#fa8c16',
                        }}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic
                        title=&quot;Total Cost&quot;
                        value={currentExecution.totalCost}
                        prefix=&quot;$&quot;
                        precision={4}
                      /&gt;
                    &lt;/Col&gt;
                    &lt;Col span={6}&gt;
                      &lt;Statistic title=&quot;Tokens Used&quot; value={currentExecution.totalTokens} /&gt;
                    &lt;/Col&gt;
                  &lt;/Row&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Node Executions&quot; size=&quot;small&quot;&gt;
                  &lt;Timeline&gt;
                    {currentExecution.nodeExecutions.map((nodeExec, index) =&gt; (
                      &lt;Timeline.Item
                        key={index}
                        color={
                          nodeExec.status === 'completed'
                            ? 'green'
                            : nodeExec.status === 'failed'
                              ? 'red'
                              : 'blue'
                        }
                      &gt;
                        &lt;div&gt;
                          &lt;Text strong&gt;Node {nodeExec.nodeId}&lt;/Text&gt;
                          &lt;div style={{ marginTop: 4 }}&gt;
                            &lt;Tag color={nodeExec.status === 'completed' ? 'green' : 'red'}&gt;
                              {nodeExec.status}
                            &lt;/Tag&gt;
                            &lt;Text type=&quot;secondary&quot;&gt;
                              {nodeExec.endTime
                                ? `${((nodeExec.endTime.getTime() - nodeExec.startTime.getTime()) / 1000).toFixed(1)}s`
                                : 'Running...'}
                            &lt;/Text&gt;
                          &lt;/div&gt;
                          {nodeExec.outputs.length &gt; 0 &amp;&amp; (
                            &lt;div
                              style={{
                                marginTop: 8,
                                padding: 8,
                                background: '#f5f5f5',
                                borderRadius: 4,
                              }}
                            &gt;
                              &lt;Text style={{ fontSize: '12px' }}&gt;
                                {typeof nodeExec.outputs[0].content === 'string'
                                  ? nodeExec.outputs[0].content.slice(0, 200) +
                                    (nodeExec.outputs[0].content.length &gt; 200 ? '...' : '')
                                  : JSON.stringify(nodeExec.outputs[0].content).slice(0, 200)}
                              &lt;/Text&gt;
                            &lt;/div&gt;
                          )}
                        &lt;/div&gt;
                      &lt;/Timeline.Item&gt;
                    ))}
                  &lt;/Timeline&gt;
                &lt;/Card&gt;
              &lt;/Col&gt;

              &lt;Col span={12}&gt;
                &lt;Card title=&quot;Quality Metrics&quot; size=&quot;small&quot;&gt;
                  {currentExecution.nodeExecutions.length &gt; 0 &amp;&amp; (
                    &lt;div&gt;
                      {Object.entries(currentExecution.nodeExecutions[0].qualityMetrics).map(
                        ([metric, value]) =&gt; (
                          &lt;div key={metric} style={{ marginBottom: 8 }}&gt;
                            &lt;div
                              style={{
                                display: 'flex',
                                justifyContent: 'space-between',
                                marginBottom: 4,
                              }}
                            &gt;
                              &lt;Text&gt;{metric.charAt(0).toUpperCase() + metric.slice(1)}&lt;/Text&gt;
                              &lt;Text&gt;{Math.round(value * 100)}%&lt;/Text&gt;
                            &lt;/div&gt;
                            &lt;Progress
                              percent={Math.round(value * 100)}
                              size=&quot;small&quot;
                              status={
                                value &gt;= 0.8 ? 'success' : value &gt;= 0.6 ? 'normal' : 'exception'
                              }
                              showInfo={false}
                            /&gt;
                          &lt;/div&gt;
                        )
                      )}
                    &lt;/div&gt;
                  )}
                &lt;/Card&gt;

                {currentExecution.insights.length &gt; 0 &amp;&amp; (
                  &lt;Card title=&quot;AI Insights&quot; size=&quot;small&quot; style={{ marginTop: 16 }}&gt;
                    &lt;Space direction=&quot;vertical&quot; style={{ width: '100%' }}&gt;
                      {currentExecution.insights.map((insight, index) =&gt; (
                        &lt;Alert
                          key={index}
                          message={insight.message}
                          description={insight.recommendation}
                          type={insight.impact === 'high' ? 'warning' : 'info'}
                          showIcon
                          style={{ fontSize: '12px' }}
                        /&gt;
                      ))}
                    &lt;/Space&gt;
                  &lt;/Card&gt;
                )}
              &lt;/Col&gt;
            &lt;/Row&gt;
          ) : (
            &lt;div style={{ textAlign: 'center', padding: '48px' }}&gt;
              &lt;ExperimentOutlined style={{ fontSize: '48px', color: '#d9d9d9' }} /&gt;
              &lt;Title level={4} type=&quot;secondary&quot;&gt;
                No execution results yet
              &lt;/Title&gt;
              &lt;Paragraph type=&quot;secondary&quot;&gt;
                Execute a workflow from the AI Builder tab to see results here
              &lt;/Paragraph&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      ),
    },
    {
      key: 'history',
      label: (
        &lt;span&gt;
          &lt;BarChartOutlined /&gt;
          Execution History
        &lt;/span&gt;
      ),
      children: (
        &lt;div style={{ padding: '24px' }}&gt;
          &lt;Card title=&quot;Execution History&quot; size=&quot;small&quot;&gt;
            &lt;Table
              dataSource={executionHistory}
              columns={executionColumns}
              rowKey=&quot;id&quot;
              pagination={{ pageSize: 10 }}
              onRow={(record) =&gt; ({
                onClick: () =&gt; setCurrentExecution(record),
              })}
              style={{ cursor: 'pointer' }}
            /&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      ),
    },
  ];

  return (
    &lt;Modal
      title={
        &lt;div style={{ display: 'flex', alignItems: 'center' }}&gt;
          &lt;ExperimentOutlined style={{ marginRight: 8 }} /&gt;
          AI Workflow Studio
          &lt;Badge count=&quot;Beta&quot; style={{ marginLeft: 8 }} /&gt;
        &lt;/div&gt;
      }
      open={visible}
      onCancel={onClose}
      footer={null}
      width=&quot;90%&quot;
      style={{ top: 20 }}
      bodyStyle={{ padding: 0 }}
    &gt;
      &lt;Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        items={tabs}
        style={{ minHeight: '70vh' }}
      /&gt;
    &lt;/Modal&gt;
  );
};</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/@reporunner/ui/src/components/base/modal.tsx (Line 94:11 - Line 107:23), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/WorkflowEditor/credentialmodal/CredentialModal.tsx (Line 346:2 - Line 359:28)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn179" onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn179" onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup179"><code class="language-tsx text-sm text-gray-800">&gt;
            &lt;svg className=&quot;w-6 h-6&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
              &lt;path
                strokeLinecap=&quot;round&quot;
                strokeLinejoin=&quot;round&quot;
                strokeWidth={2}
                d=&quot;M6 18L18 6M6 6l12 12&quot;
              /&gt;
            &lt;/svg&gt;
          &lt;/button&gt;
        &lt;/div&gt;

        {/* Content */}
        &lt;div className=&quot;flex-1 overflow-y-auto</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/SelfHosted.tsx (Line 205:2 - Line 219:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 68:2 - Line 82:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn202" onclick="toggleCodeBlock('cloneGroup202', 'expandBtn202', 'collapseBtn202')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn202" onclick="toggleCodeBlock('cloneGroup202', 'expandBtn202', 'collapseBtn202')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup202"><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Roadmap.tsx (Line 258:3 - Line 272:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/SelfHosted.tsx (Line 205:3 - Line 82:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn203" onclick="toggleCodeBlock('cloneGroup203', 'expandBtn203', 'collapseBtn203')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn203" onclick="toggleCodeBlock('cloneGroup203', 'expandBtn203', 'collapseBtn203')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup203"><code class="language-tsx text-sm text-gray-800">};

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Product</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Privacy.tsx (Line 80:15 - Line 97:8), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 66:108 - Line 220:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn204" onclick="toggleCodeBlock('cloneGroup204', 'expandBtn204', 'collapseBtn204')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn204" onclick="toggleCodeBlock('cloneGroup204', 'expandBtn204', 'collapseBtn204')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup204"><code class="language-tsx text-sm text-gray-800">,
    },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Privacy</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/PricingPage.tsx (Line 352:172 - Line 368:7), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 66:108 - Line 82:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn205" onclick="toggleCodeBlock('cloneGroup205', 'expandBtn205', 'collapseBtn205')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn205" onclick="toggleCodeBlock('cloneGroup205', 'expandBtn205', 'collapseBtn205')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup205"><code class="language-tsx text-sm text-gray-800">,
    },
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Simple</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/PricingPage.tsx (Line 669:13 - Line 679:5), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 492:13 - Line 502:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn206" onclick="toggleCodeBlock('cloneGroup206', 'expandBtn206', 'collapseBtn206')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn206" onclick="toggleCodeBlock('cloneGroup206', 'expandBtn206', 'collapseBtn206')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup206"><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Get Started?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Join</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/IntegrationsPage.tsx (Line 260:2 - Line 275:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 68:2 - Line 220:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn207" onclick="toggleCodeBlock('cloneGroup207', 'expandBtn207', 'collapseBtn207')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn207" onclick="toggleCodeBlock('cloneGroup207', 'expandBtn207', 'collapseBtn207')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup207"><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                150</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Features.tsx (Line 295:2 - Line 310:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Roadmap.tsx (Line 257:2 - Line 82:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn208" onclick="toggleCodeBlock('cloneGroup208', 'expandBtn208', 'collapseBtn208')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn208" onclick="toggleCodeBlock('cloneGroup208', 'expandBtn208', 'collapseBtn208')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup208"><code class="language-tsx text-sm text-gray-800">,
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Features</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Enterprise.tsx (Line 217:2 - Line 230:18), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Roadmap.tsx (Line 257:2 - Line 80:30)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn209" onclick="toggleCodeBlock('cloneGroup209', 'expandBtn209', 'collapseBtn209')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn209" onclick="toggleCodeBlock('cloneGroup209', 'expandBtn209', 'collapseBtn209')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup209"><code class="language-tsx text-sm text-gray-800">,
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-6xl mx-auto</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Documentation.tsx (Line 288:3 - Line 303:14), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/SelfHosted.tsx (Line 205:3 - Line 220:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn210" onclick="toggleCodeBlock('cloneGroup210', 'expandBtn210', 'collapseBtn210')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn210" onclick="toggleCodeBlock('cloneGroup210', 'expandBtn210', 'collapseBtn210')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup210"><code class="language-tsx text-sm text-gray-800">};

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                Documentation</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Documentation.tsx (Line 605:17 - Line 615:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 490:17 - Line 500:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn211" onclick="toggleCodeBlock('cloneGroup211', 'expandBtn211', 'collapseBtn211')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn211" onclick="toggleCodeBlock('cloneGroup211', 'expandBtn211', 'collapseBtn211')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup211"><code class="language-tsx text-sm text-gray-800">&lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Start</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Dashboard.tsx (Line 106:2 - Line 118:40), /home/margon/Reporunner/reporunner/packages/frontend/src/app/components/Layout/Header.tsx (Line 12:6 - Line 35:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn212" onclick="toggleCodeBlock('cloneGroup212', 'expandBtn212', 'collapseBtn212')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn212" onclick="toggleCodeBlock('cloneGroup212', 'expandBtn212', 'collapseBtn212')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup212"><code class="language-tsx text-sm text-gray-800">);

  const handleCreateWorkflow = async () =&gt; {
    const name = prompt('Enter workflow name:');
    if (name) {
      if (name.trim().length === 0) {
        toast.error('Please enter a valid workflow name.');
        return;
      }

      try {
        await createNewWorkflow(name.trim(), navigate);
        // Refresh the dashboard workflows list</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Dashboard.tsx (Line 242:15 - Line 252:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Executions.tsx (Line 140:2 - Line 150:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn213" onclick="toggleCodeBlock('cloneGroup213', 'expandBtn213', 'collapseBtn213')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn213" onclick="toggleCodeBlock('cloneGroup213', 'expandBtn213', 'collapseBtn213')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup213"><code class="language-tsx text-sm text-gray-800">.map((stat) =&gt; (
          &lt;div
            key={stat.name}
            className=&quot;bg-white/10 backdrop-blur-md p-6 rounded-lg border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300&quot;
          &gt;
            &lt;div className=&quot;flex items-center&quot;&gt;
              &lt;div className=&quot;text-2xl mr-4&quot;&gt;{stat.icon}&lt;/div&gt;
              &lt;div&gt;
                &lt;p className=&quot;text-sm font-medium text-slate-300&quot;&gt;{stat.name}&lt;/p&gt;
                &lt;p className=&quot;text-2xl font-semibold text-white&quot;&gt;{stat.value}&lt;/p&gt;
                {</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Credentials.tsx (Line 253:12 - Line 266:12), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Dashboard.tsx (Line 269:10 - Line 283:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn214" onclick="toggleCodeBlock('cloneGroup214', 'expandBtn214', 'collapseBtn214')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn214" onclick="toggleCodeBlock('cloneGroup214', 'expandBtn214', 'collapseBtn214')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup214"><code class="language-tsx text-sm text-gray-800">&lt;/h2&gt;
            &lt;button
              onClick={() =&gt; setShowCreateForm(true)}
              className=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 shadow-lg&quot;
            &gt;
              Create New
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          {isLoading ? (
            &lt;div className=&quot;text-center py-8&quot;&gt;
              &lt;div className=&quot;animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto&quot;&gt;&lt;/div&gt;
              &lt;p className=&quot;mt-2 text-slate-300&quot;&gt;Loading credentials</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Contact.tsx (Line 180:5 - Line 195:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/SelfHosted.tsx (Line 204:5 - Line 82:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn215" onclick="toggleCodeBlock('cloneGroup215', 'expandBtn215', 'collapseBtn215')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn215" onclick="toggleCodeBlock('cloneGroup215', 'expandBtn215', 'collapseBtn215')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup215"><code class="language-tsx text-sm text-gray-800">);
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Get</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Contact.tsx (Line 539:13 - Line 549:38), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/PricingPage.tsx (Line 631:13 - Line 641:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn216" onclick="toggleCodeBlock('cloneGroup216', 'expandBtn216', 'collapseBtn216')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn216" onclick="toggleCodeBlock('cloneGroup216', 'expandBtn216', 'collapseBtn216')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup216"><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* FAQ */}
      &lt;section className=&quot;py-16 bg-gray-50&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6&quot;&gt;
          &lt;div className=&quot;max-w-3xl mx-auto&quot;&gt;
            &lt;div className=&quot;text-center mb-12&quot;&gt;
              &lt;h2 className=&quot;text-4xl font-bold text-gray-900 mb-6</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Contact.tsx (Line 566:7 - Line 577:6), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 491:4 - Line 502:3)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn217" onclick="toggleCodeBlock('cloneGroup217', 'expandBtn217', 'collapseBtn217')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn217" onclick="toggleCodeBlock('cloneGroup217', 'expandBtn217', 'collapseBtn217')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup217"><code class="language-tsx text-sm text-gray-800">&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Get Started?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Don't</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/About.tsx (Line 170:2 - Line 185:9), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Terms.tsx (Line 67:5 - Line 82:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn218" onclick="toggleCodeBlock('cloneGroup218', 'expandBtn218', 'collapseBtn218')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn218" onclick="toggleCodeBlock('cloneGroup218', 'expandBtn218', 'collapseBtn218')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup218"><code class="language-tsx text-sm text-gray-800">},
  ];

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              Building</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/APIReference.tsx (Line 337:28 - Line 354:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Documentation.tsx (Line 286:9 - Line 220:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn219" onclick="toggleCodeBlock('cloneGroup219', 'expandBtn219', 'collapseBtn219')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn219" onclick="toggleCodeBlock('cloneGroup219', 'expandBtn219', 'collapseBtn219')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup219"><code class="language-tsx text-sm text-gray-800">;
    }
  };

  return (
    &lt;div className=&quot;min-h-screen bg-gradient-to-br from-slate-50 to-blue-50&quot;&gt;
      {/* Header */}
      &lt;Header /&gt;
      {/* Hero Section */}
      &lt;section className=&quot;relative py-20 overflow-hidden&quot;&gt;
        &lt;div className=&quot;absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900&quot; /&gt;
        &lt;div className=&quot;absolute inset-0 bg-[url('/grid.svg')] opacity-20&quot; /&gt;

        &lt;div className=&quot;container mx-auto px-6 relative z-10&quot;&gt;
          &lt;div className=&quot;max-w-4xl mx-auto text-center&quot;&gt;
            &lt;h1 className=&quot;text-5xl md:text-6xl font-bold text-white mb-6 leading-tight&quot;&gt;
              &lt;span className=&quot;bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent&quot;&gt;
                API</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/APIReference.tsx (Line 492:19 - Line 508:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/IntegrationsPage.tsx (Line 399:11 - Line 416:29)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn220" onclick="toggleCodeBlock('cloneGroup220', 'expandBtn220', 'collapseBtn220')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn220" onclick="toggleCodeBlock('cloneGroup220', 'expandBtn220', 'collapseBtn220')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup220"><code class="language-tsx text-sm text-gray-800">.map((category) =&gt; {
                      const Icon = category.icon;
                      return (
                        &lt;button
                          key={category.id}
                          onClick={() =&gt; setActiveEndpoint(category.id)}
                          className={`w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors ${
                            activeEndpoint === category.id
                              ? 'bg-blue-50 text-blue-700 border border-blue-200'
                              : 'text-gray-700 hover:bg-gray-50'
                          }`}
                        &gt;
                          &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                            &lt;Icon className=&quot;w-5 h-5&quot; /&gt;
                            &lt;span className=&quot;font-medium&quot;&gt;{category.name}&lt;/span&gt;
                          &lt;/div&gt;
                          &lt;span </code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/APIReference.tsx (Line 788:15 - Line 799:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/pages/Documentation.tsx (Line 606:15 - Line 617:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn221" onclick="toggleCodeBlock('cloneGroup221', 'expandBtn221', 'collapseBtn221')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn221" onclick="toggleCodeBlock('cloneGroup221', 'expandBtn221', 'collapseBtn221')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup221"><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/section&gt;

      {/* CTA Section */}
      &lt;section className=&quot;py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white&quot;&gt;
        &lt;div className=&quot;container mx-auto px-6 text-center&quot;&gt;
          &lt;h2 className=&quot;text-4xl font-bold mb-6&quot;&gt;Ready to Start Building?&lt;/h2&gt;
          &lt;p className=&quot;text-xl mb-8 max-w-2xl mx-auto opacity-90&quot;&gt;
            Get</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 25:2 - Line 35:2), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 32:80 - Line 42:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn225" onclick="toggleCodeBlock('cloneGroup225', 'expandBtn225', 'collapseBtn225')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn225" onclick="toggleCodeBlock('cloneGroup225', 'expandBtn225', 'collapseBtn225')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup225"><code class="language-tsx text-sm text-gray-800">;

  // Menu state for NodeToolbar
  const [showLocalMenu, setShowLocalMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showLocalMenu,
    triggerRef: menuTriggerRef,
    menuRef:</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 50:2 - Line 85:25), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/bodies/DatabaseNodeBody.tsx (Line 43:2 - Line 82:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn226" onclick="toggleCodeBlock('cloneGroup226', 'expandBtn226', 'collapseBtn226')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn226" onclick="toggleCodeBlock('cloneGroup226', 'expandBtn226', 'collapseBtn226')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup226"><code class="language-tsx text-sm text-gray-800">;

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-yellow-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Input Handle */}
            &lt;Handle
              type=&quot;target&quot;
              position={Position.Left}
              id=&quot;input_0&quot;
              style={{
                background: '#555',
                width: 10,
                height: 10,
                left: -5,
              }}
            /&gt;

            {/* True Output Handle */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 1:1 - Line 12:4), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/ConditionNodeBody.tsx (Line 1:1 - Line 12:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn229" onclick="toggleCodeBlock('cloneGroup229', 'expandBtn229', 'collapseBtn229')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn229" onclick="toggleCodeBlock('cloneGroup229', 'expandBtn229', 'collapseBtn229')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup229"><code class="language-tsx text-sm text-gray-800">import type React from 'react';
import { useRef, useState } from 'react';
import { Handle, Position } from 'reactflow';
import NodeToolbar from '../components/WorkflowEditor/NodeTypes/BaseNode/NodeToolbar';
import { useSmartMenuPosition } from '../hooks/useSmartMenuPosition';
import type { CustomNodeBodyProps } from './nodeUiRegistry';
import { NodeIcon, NodeLabel, StatusBadge } from './shared';

/**
 * Custom AI Agent Node Body Component
 * Gmail-style UI with AI-specific features and handles
 */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 28:3 - Line 43:18), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 34:3 - Line 41:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn230" onclick="toggleCodeBlock('cloneGroup230', 'expandBtn230', 'collapseBtn230')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn230" onclick="toggleCodeBlock('cloneGroup230', 'expandBtn230', 'collapseBtn230')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup230"><code class="language-tsx text-sm text-gray-800">// Menu state for NodeToolbar
  const [showLocalMenu, setShowLocalMenu] = useState(false);
  const menuTriggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const menuRef = useRef&lt;HTMLDivElement&gt;(null);

  const { positionClasses, positionStyles } = useSmartMenuPosition({
    isOpen: showLocalMenu,
    triggerRef: menuTriggerRef,
    menuRef: menuRef,
    offset: 4,
    onClose: () =&gt; setShowLocalMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook

  const handleDoubleClick</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 36:2 - Line 63:28), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 42:5 - Line 69:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn231" onclick="toggleCodeBlock('cloneGroup231', 'expandBtn231', 'collapseBtn231')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn231" onclick="toggleCodeBlock('cloneGroup231', 'expandBtn231', 'collapseBtn231')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup231"><code class="language-tsx text-sm text-gray-800">menuRef,
    offset: 4,
    onClose: () =&gt; setShowLocalMenu(false),
  });

  // Click-outside handling is now centralized in useSmartMenuPosition hook

  const handleDoubleClick = (event: React.MouseEvent) =&gt; {
    event.stopPropagation();
    onOpenProperties?.();
  };

  return (
    &lt;div className=&quot;flex flex-col&quot;&gt;
      &lt;div className=&quot;relative&quot;&gt;
        &lt;div className=&quot;flex items-center&quot;&gt;
          &lt;div
            className={`
              relative flex items-center justify-center bg-gray-800 p-4 shadow-lg transition-all duration-200
              rounded-md min-w-[80px] max-w-[150px] min-h-[60px]
              ${selected ? 'ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
              ${isHovered ? 'hover:shadow-xl hover:scale-105 ring-2 ring-offset-2 ring-offset-gray-900 ring-purple-400' : ''}
            `}
            onMouseEnter={onMouseEnter}
            onMouseLeave={onMouseLeave}
            onDoubleClick={handleDoubleClick}
          &gt;
            {/* Standard Input Handle */</code></pre></div><div class="py-4"><p class="text-gray-600">/home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/AIAgentNodeBody.tsx (Line 135:13 - Line 207:19), /home/margon/Reporunner/reporunner/packages/frontend/src/app/node-extensions/custom-nodes/GmailNodeBody.tsx (Line 113:13 - Line 185:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn232" onclick="toggleCodeBlock('cloneGroup232', 'expandBtn232', 'collapseBtn232')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn232" onclick="toggleCodeBlock('cloneGroup232', 'expandBtn232', 'collapseBtn232')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup232"><code class="language-tsx text-sm text-gray-800">{/* Shared NodeToolbar */}
            &lt;NodeToolbar
              visible={isHovered}
              onPlay={() =&gt; {}}
              onStop={() =&gt; {}}
              onDelete={(e) =&gt; {
                e.stopPropagation();
                onDelete?.();
              }}
              onMenuToggle={() =&gt; setShowLocalMenu(!showLocalMenu)}
              menuTriggerRef={menuTriggerRef}
            /&gt;

            {/* Menu Dropdown */}
            {showLocalMenu &amp;&amp; (
              &lt;div
                ref={menuRef}
                className={`${positionClasses} bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 min-w-[120px]`}
                style={positionStyles}
                onClick={(e) =&gt; e.stopPropagation()}
              &gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onOpenProperties?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📂&lt;/span&gt; Open
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🧪&lt;/span&gt; Test
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📄&lt;/span&gt; Copy
                &lt;/button&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-gray-200 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;📋&lt;/span&gt; Duplicate
                &lt;/button&gt;
                &lt;hr className=&quot;my-1 border-gray-600&quot; /&gt;
                &lt;button
                  onClick={(e) =&gt; {
                    e.stopPropagation();
                    onDelete?.();
                    setShowLocalMenu(false);
                  }}
                  className=&quot;w-full px-3 py-1.5 text-left text-sm text-red-400 hover:bg-gray-700 flex items-center gap-2&quot;
                &gt;
                  &lt;span&gt;🗑️&lt;/span&gt; Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}

            {/* Status Badge */</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="css-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">css</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div></section><!-- Add more sections for other formats and clone groups as needed--></main><footer class="bg-white shadow mt-8 py-4"><div class="container mx-auto px-4 text-center"><p class="text-sm text-gray-600">This report is generated by jscpd, an open-source copy/paste detector.</p><p class="text-sm text-gray-600">jscpd is licensed under the MIT License.</p><a class="text-blue-500 text-sm" href="https://github.com/kucherenko/jscpd" target="_blank" rel="noopener noreferrer">View jscpd on GitHub</a></div></footer><script src="js/prism.js"></script><script>function toggleCodeBlock(codeBlockId, expandBtnId, collapseBtnId) {
  const codeBlock = document.getElementById(codeBlockId);
  const expandBtn = document.getElementById(expandBtnId);
  const collapseBtn = document.getElementById(collapseBtnId);

  codeBlock.classList.toggle('hidden');
  expandBtn.classList.toggle('hidden');
  collapseBtn.classList.toggle('hidden');
}</script></body></html>